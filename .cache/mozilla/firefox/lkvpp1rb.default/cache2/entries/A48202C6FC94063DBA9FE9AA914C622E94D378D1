/*
 * # Semantic - Accordion
 * http://github.com/jlukic/semantic-ui/
 *
 *
 * Copyright 2013 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */

;(function ($, window, document, undefined) {

$.fn.accordion = function(parameters) {
  var
    $allModules     = $(this),

    time            = new Date().getTime(),
    performance     = [],

    query           = arguments[0],
    methodInvoked   = (typeof query == 'string'),
    queryArguments  = [].slice.call(arguments, 1),
    returnedValue
  ;
  $allModules
    .each(function() {
      var
        settings        = ( $.isPlainObject(parameters) )
          ? $.extend(true, {}, $.fn.accordion.settings, parameters)
          : $.extend({}, $.fn.accordion.settings),

        className       = settings.className,
        namespace       = settings.namespace,
        selector        = settings.selector,
        error           = settings.error,

        eventNamespace  = '.' + namespace,
        moduleNamespace = 'module-' + namespace,
        moduleSelector  = $allModules.selector || '',

        $module  = $(this),
        $title   = $module.find(selector.title),
        $content = $module.find(selector.content),

        element  = this,
        instance = $module.data(moduleNamespace),
        module
      ;

      module = {

        initialize: function() {
          module.debug('Initializing accordion with bound events', $module);
          // initializing
          $title
            .on('click' + eventNamespace, module.event.click)
          ;
          module.instantiate();
        },

        instantiate: function() {
          instance = module;
          $module
            .data(moduleNamespace, module)
          ;
        },

        destroy: function() {
          module.debug('Destroying previous accordion for', $module);
          $module
            .removeData(moduleNamespace)
          ;
          $title
            .off(eventNamespace)
          ;
        },

        event: {
          click: function() {
            module.verbose('Title clicked', this);
            var
              $activeTitle = $(this),
              index        = $title.index($activeTitle)
            ;
            module.toggle(index);
          },
          resetDisplay: function() {
            $(this).css('display', '');
            if( $(this).attr('style') == '') {
              $(this)
                .attr('style', '')
                .removeAttr('style')
              ;
            }
          },
          resetOpacity: function() {
            $(this).css('opacity', '');
            if( $(this).attr('style') == '') {
              $(this)
                .attr('style', '')
                .removeAttr('style')
              ;
            }
          }
        },

        toggle: function(index) {
          module.debug('Toggling content content at index', index);
          var
            $activeTitle   = $title.eq(index),
            $activeContent = $activeTitle.next($content),
            contentIsOpen  = $activeContent.is(':visible')
          ;
          if(contentIsOpen) {
            if(settings.collapsible) {
              module.close(index);
            }
            else {
              module.debug('Cannot close accordion content collapsing is disabled');
            }
          }
          else {
            module.open(index);
          }
        },

        open: function(index) {
          var
            $activeTitle     = $title.eq(index),
            $activeContent   = $activeTitle.next($content),
            $previousTitle   = $activeTitle.siblings(selector.title).filter('.' + className.active),
            $previousContent = $previousTitle.next($title),
            contentIsOpen    =  ($previousTitle.size() > 0)
          ;
          if( !$activeContent.is(':animated') ) {
            module.debug('Opening accordion content', $activeTitle);
            if(settings.exclusive && contentIsOpen) {
              $previousTitle
                .removeClass(className.active)
              ;
              $previousContent
                .stop()
                .children()
                  .stop()
                  .animate({
                    opacity: 0
                  }, settings.duration, module.event.resetOpacity)
                  .end()
                .slideUp(settings.duration , settings.easing, function() {
                  $previousContent
                    .removeClass(className.active)
                    .children()
                  ;
                  $.proxy(module.event.resetDisplay, this)();
                })
              ;
            }
            $activeTitle
              .addClass(className.active)
            ;
            $activeContent
              .stop()
              .children()
                .stop()
                .animate({
                  opacity: 1
                }, settings.duration)
                .end()
              .slideDown(settings.duration, settings.easing, function() {
                $activeContent
                  .addClass(className.active)
                ;
                $.proxy(module.event.resetDisplay, this)();
                $.proxy(settings.onOpen, $activeContent)();
                $.proxy(settings.onChange, $activeContent)();
              })
            ;
          }
        },

        close: function(index) {
          var
            $activeTitle   = $title.eq(index),
            $activeContent = $activeTitle.next($content)
          ;
          module.debug('Closing accordion content', $activeContent);
          $activeTitle
            .removeClass(className.active)
          ;
          $activeContent
            .removeClass(className.active)
            .show()
            .stop()
            .children()
              .stop()
              .animate({
                opacity: 0
              }, settings.duration, module.event.resetOpacity)
              .end()
            .slideUp(settings.duration, settings.easing, function(){
              $.proxy(module.event.resetDisplay, this)();
              $.proxy(settings.onClose, $activeContent)();
              $.proxy(settings.onChange, $activeContent)();
            })
          ;
        },

        setting: function(name, value) {
          if( $.isPlainObject(name) ) {
            $.extend(true, settings, name);
          }
          else if(value !== undefined) {
            settings[name] = value;
          }
          else {
            return settings[name];
          }
        },
        internal: function(name, value) {
          module.debug('Changing internal', name, value);
          if(value !== undefined) {
            if( $.isPlainObject(name) ) {
              $.extend(true, module, name);
            }
            else {
              module[name] = value;
            }
          }
          else {
            return module[name];
          }
        },
        debug: function() {
          if(settings.debug) {
            if(settings.performance) {
              module.performance.log(arguments);
            }
            else {
              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');
              module.debug.apply(console, arguments);
            }
          }
        },
        verbose: function() {
          if(settings.verbose && settings.debug) {
            if(settings.performance) {
              module.performance.log(arguments);
            }
            else {
              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');
              module.verbose.apply(console, arguments);
            }
          }
        },
        error: function() {
          module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');
          module.error.apply(console, arguments);
        },
        performance: {
          log: function(message) {
            var
              currentTime,
              executionTime,
              previousTime
            ;
            if(settings.performance) {
              currentTime   = new Date().getTime();
              previousTime  = time || currentTime;
              executionTime = currentTime - previousTime;
              time          = currentTime;
              performance.push({
                'Element'        : element,
                'Name'           : message[0],
                'Arguments'      : [].slice.call(message, 1) || '',
                'Execution Time' : executionTime
              });
            }
            clearTimeout(module.performance.timer);
            module.performance.timer = setTimeout(module.performance.display, 100);
          },
          display: function() {
            var
              title = settings.name + ':',
              totalTime = 0
            ;
            time = false;
            clearTimeout(module.performance.timer);
            $.each(performance, function(index, data) {
              totalTime += data['Execution Time'];
            });
            title += ' ' + totalTime + 'ms';
            if(moduleSelector) {
              title += ' \'' + moduleSelector + '\'';
            }
            if( (console.group !== undefined || console.table !== undefined) && performance.length > 0) {
              console.groupCollapsed(title);
              if(console.table) {
                console.table(performance);
              }
              else {
                $.each(performance, function(index, data) {
                  console.log(data['Name'] + ': ' + data['Execution Time']+'ms');
                });
              }
              console.groupEnd();
            }
            performance = [];
          }
        },
        invoke: function(query, passedArguments, context) {
          var
            object = instance,
            maxDepth,
            found,
            response
          ;
          passedArguments = passedArguments || queryArguments;
          context         = element         || context;
          if(typeof query == 'string' && object !== undefined) {
            query    = query.split(/[\. ]/);
            maxDepth = query.length - 1;
            $.each(query, function(depth, value) {
              var camelCaseValue = (depth != maxDepth)
                ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1)
                : query
              ;
              if( $.isPlainObject( object[camelCaseValue] ) && (depth != maxDepth) ) {
                object = object[camelCaseValue];
              }
              else if( object[camelCaseValue] !== undefined ) {
                found = object[camelCaseValue];
                return false;
              }
              else if( $.isPlainObject( object[value] ) && (depth != maxDepth) ) {
                object = object[value];
              }
              else if( object[value] !== undefined ) {
                found = object[value];
                return false;
              }
              else {
                return false;
              }
            });
          }
          if ( $.isFunction( found ) ) {
            response = found.apply(context, passedArguments);
          }
          else if(found !== undefined) {
            response = found;
          }
          if($.isArray(returnedValue)) {
            returnedValue.push(response);
          }
          else if(returnedValue !== undefined) {
            returnedValue = [returnedValue, response];
          }
          else if(response !== undefined) {
            returnedValue = response;
          }
          return found;
        }
      };
      if(methodInvoked) {
        if(instance === undefined) {
          module.initialize();
        }
        module.invoke(query);
      }
      else {
        if(instance !== undefined) {
          module.destroy();
        }
        module.initialize();
      }
    })
  ;
  return (returnedValue !== undefined)
    ? returnedValue
    : this
  ;
};

$.fn.accordion.settings = {
  name        : 'Accordion',
  namespace   : 'accordion',

  debug       : false,
  verbose     : true,
  performance : true,

  exclusive   : true,
  collapsible : true,

  duration    : 500,
  easing      : 'easeInOutQuint',

  onOpen      : function(){},
  onClose     : function(){},
  onChange    : function(){},

  error: {
    method    : 'The method you called is not defined'
  },

  className   : {
    active : 'active'
  },

  selector    : {
    title   : '.title',
    content : '.content'
  }


};

// Adds easing
$.extend( $.easing, {
  easeInOutQuint: function (x, t, b, c, d) {
    if ((t/=d/2) < 1) return c/2*t*t*t*t*t + b;
    return c/2*((t-=2)*t*t*t*t + 2) + b;
  }
});

})( jQuery, window , document );


/*
 * # Semantic - API
 * http://github.com/jlukic/semantic-ui/
 *
 *
 * Copyright 2013 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */

;(function ( $, window, document, undefined ) {

  $.api = $.fn.api = function(parameters) {

    var
      settings       = $.extend(true, {}, $.api.settings, parameters),

      // if this keyword isn't a jQuery object, create one
      context        = (typeof this != 'function')
        ? this
        : $('<div/>'),
      // context defines the element used for loading/error state
      $context       = (settings.stateContext)
        ? $(settings.stateContext)
        : $(context),
      // module is the thing that initiates the api action, can be independent of context
      $module = typeof this == 'object'
        ? $(context)
        : $context,

      element         = this,
      time            = new Date().getTime(),
      performance     = [],

      moduleSelector  = $module.selector || '',
      moduleNamespace = settings.namespace + '-module',

      className       = settings.className,
      metadata        = settings.metadata,
      error           = settings.error,

      instance        = $module.data(moduleNamespace),

      query           = arguments[0],
      methodInvoked   = (instance !== undefined && typeof query == 'string'),
      queryArguments  = [].slice.call(arguments, 1),

      module,
      returnedValue
    ;

    module = {
      initialize: function() {
        var
          runSettings,

          loadingTimer   = new Date().getTime(),
          loadingDelay,

          promise,
          url,

          formData       = {},
          data,

          ajaxSettings   = {},
          xhr
        ;

        // serialize parent form if requested!
        if(settings.serializeForm && $(this).toJSON() !== undefined) {
          formData = module.get.formData();
          module.debug('Adding form data to API Request', formData);
          $.extend(true, settings.data, formData);
        }

        // let beforeSend change settings object
        runSettings = $.proxy(settings.beforeSend, $module)(settings);

        // check for exit conditions
        if(runSettings !== undefined && !runSettings) {
          module.error(error.beforeSend);
          module.reset();
          return;
        }

        // get real url from template
        url = module.get.url( module.get.templateURL() );

        // exit conditions reached from missing url parameters
        if( !url ) {
          module.error(error.missingURL);
          module.reset();
          return;
        }

        // promise handles notification on api request, so loading min. delay can occur for all notifications
        promise =
          $.Deferred()
            .always(function() {
              if(settings.stateContext) {
                $context
                  .removeClass(className.loading)
                ;
              }
              $.proxy(settings.complete, $module)();
            })
            .done(function(response) {
              module.debug('API request successful');
              // take a stab at finding success state if json
              if(settings.dataType == 'json') {
                if (response.error !== undefined) {
                  $.proxy(settings.failure, $context)(response.error, settings, $module);
                }
                else if ($.isArray(response.errors)) {
                  $.proxy(settings.failure, $context)(response.errors[0], settings, $module);
                }
                else {
                  $.proxy(settings.success, $context)(response, settings, $module);
                }
              }
              // otherwise
              else {
                $.proxy(settings.success, $context)(response, settings, $module);
              }
            })
            .fail(function(xhr, status, httpMessage) {
              var
                errorMessage = (settings.error[status] !== undefined)
                  ? settings.error[status]
                  : httpMessage,
                response
              ;
              // let em know unless request aborted
              if(xhr !== undefined) {
                // readyState 4 = done, anything less is not really sent
                if(xhr.readyState !== undefined && xhr.readyState == 4) {

                  // if http status code returned and json returned error, look for it
                  if( xhr.status != 200 && httpMessage !== undefined && httpMessage !== '') {
                    module.error(error.statusMessage + httpMessage);
                  }
                  else {
                    if(status == 'error' && settings.dataType == 'json') {
                      try {
                        response = $.parseJSON(xhr.responseText);
                        if(response && response.error !== undefined) {
                          errorMessage = response.error;
                        }
                      }
                      catch(error) {
                        module.error(error.JSONParse);
                      }
                    }
                  }
                  $context
                    .removeClass(className.loading)
                    .addClass(className.error)
                  ;
                  // show error state only for duration specified in settings
                  if(settings.errorLength > 0) {
                    setTimeout(function(){
                      $context
                        .removeClass(className.error)
                      ;
                    }, settings.errorLength);
                  }
                  module.debug('API Request error:', errorMessage);
                  $.proxy(settings.failure, $context)(errorMessage, settings, this);
                }
                else {
                  module.debug('Request Aborted (Most likely caused by page change)');
                }
              }
            })
        ;

        // look for params in data
        $.extend(true, ajaxSettings, settings, {
          success    : function(){},
          failure    : function(){},
          complete   : function(){},
          type       : settings.method || settings.type,
          data       : data,
          url        : url,
          beforeSend : settings.beforeXHR
        });

        if(settings.stateContext) {
          $context
            .addClass(className.loading)
          ;
        }

        if(settings.progress) {
          module.verbose('Adding progress events');
          $.extend(true, ajaxSettings, {
            xhr: function() {
              var
                xhr = new window.XMLHttpRequest()
              ;
              xhr.upload.addEventListener('progress', function(event) {
                var
                  percentComplete
                ;
                if (event.lengthComputable) {
                  percentComplete = Math.round(event.loaded / event.total * 10000) / 100 + '%';
                  $.proxy(settings.progress, $context)(percentComplete, event);
                }
              }, false);
              xhr.addEventListener('progress', function(event) {
                var
                  percentComplete
                ;
                if (event.lengthComputable) {
                  percentComplete = Math.round(event.loaded / event.total * 10000) / 100 + '%';
                  $.proxy(settings.progress, $context)(percentComplete, event);
                }
              }, false);
              return xhr;
            }
          });
        }

        module.verbose('Creating AJAX request with settings: ', ajaxSettings);
        xhr =
          $.ajax(ajaxSettings)
            .always(function() {
              // calculate if loading time was below minimum threshold
              loadingDelay = ( settings.loadingLength - (new Date().getTime() - loadingTimer) );
              settings.loadingDelay = loadingDelay < 0
                ? 0
                : loadingDelay
              ;
            })
            .done(function(response) {
              var
                context = this
              ;
              setTimeout(function(){
                promise.resolveWith(context, [response]);
              }, settings.loadingDelay);
            })
            .fail(function(xhr, status, httpMessage) {
              var
                context = this
              ;
              // page triggers abort on navigation, dont show error
              if(status != 'abort') {
                setTimeout(function(){
                  promise.rejectWith(context, [xhr, status, httpMessage]);
                }, settings.loadingDelay);
              }
              else {
                $context
                  .removeClass(className.error)
                  .removeClass(className.loading)
                ;
              }
            })
        ;
        if(settings.stateContext) {
          $module
            .data(metadata.promise, promise)
            .data(metadata.xhr, xhr)
          ;
        }
      },

      get: {
        formData: function() {
          return $module
            .closest('form')
              .toJSON()
          ;
        },
        templateURL: function() {
          var
            action = $module.data(settings.metadata.action) || settings.action || false,
            url
          ;
          if(action) {
            module.debug('Creating url for: ', action);
            if(settings.api[action] !== undefined) {
              url = settings.api[action];
            }
            else {
              module.error(error.missingAction);
            }
          }
          // override with url if specified
          if(settings.url) {
            url = settings.url;
            module.debug('Getting url', url);
          }
          return url;
        },
        url: function(url, urlData) {
          var
            urlVariables
          ;
          if(url) {
            urlVariables = url.match(settings.regExpTemplate);
            urlData      = urlData || settings.urlData;

            if(urlVariables) {
              module.debug('Looking for URL variables', urlVariables);
              $.each(urlVariables, function(index, templateValue){
                var
                  term      = templateValue.substr( 2, templateValue.length - 3),
                  termValue = ($.isPlainObject(urlData) && urlData[term] !== undefined)
                    ? urlData[term]
                    : ($module.data(term) !== undefined)
                      ? $module.data(term)
                      : urlData[term]
                ;
                module.verbose('Looking for variable', term, $module, $module.data(term), urlData[term]);
                // remove optional value
                if(termValue === false) {
                  module.debug('Removing variable from URL', urlVariables);
                  url = url.replace('/' + templateValue, '');
                }
                // undefined condition
                else if(termValue === undefined || !termValue) {
                  module.error(error.missingParameter + term);
                  url = false;
                  return false;
                }
                else {
                  url = url.replace(templateValue, termValue);
                }
              });
            }
          }
          return url;
        }
      },

      // reset api request
      reset: function() {
        $module
          .data(metadata.promise, false)
          .data(metadata.xhr, false)
        ;
        $context
          .removeClass(className.error)
          .removeClass(className.loading)
        ;
      },

      setting: function(name, value) {
        if( $.isPlainObject(name) ) {
          $.extend(true, settings, name);
        }
        else if(value !== undefined) {
          settings[name] = value;
        }
        else {
          return settings[name];
        }
      },
      internal: function(name, value) {
        if( $.isPlainObject(name) ) {
          $.extend(true, module, name);
        }
        else if(value !== undefined) {
          module[name] = value;
        }
        else {
          return module[name];
        }
      },
      debug: function() {
        if(settings.debug) {
          if(settings.performance) {
            module.performance.log(arguments);
          }
          else {
            module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');
            module.debug.apply(console, arguments);
          }
        }
      },
      verbose: function() {
        if(settings.verbose && settings.debug) {
          if(settings.performance) {
            module.performance.log(arguments);
          }
          else {
            module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');
            module.verbose.apply(console, arguments);
          }
        }
      },
      error: function() {
        module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');
        module.error.apply(console, arguments);
      },
      performance: {
        log: function(message) {
          var
            currentTime,
            executionTime,
            previousTime
          ;
          if(settings.performance) {
            currentTime   = new Date().getTime();
            previousTime  = time || currentTime;
            executionTime = currentTime - previousTime;
            time          = currentTime;
            performance.push({
              'Element'        : element,
              'Name'           : message[0],
              'Arguments'      : [].slice.call(message, 1) || '',
              'Execution Time' : executionTime
            });
          }
          clearTimeout(module.performance.timer);
          module.performance.timer = setTimeout(module.performance.display, 100);
        },
        display: function() {
          var
            title = settings.name + ':',
            totalTime = 0
          ;
          time = false;
          clearTimeout(module.performance.timer);
          $.each(performance, function(index, data) {
            totalTime += data['Execution Time'];
          });
          title += ' ' + totalTime + 'ms';
          if(moduleSelector) {
            title += ' \'' + moduleSelector + '\'';
          }
          if( (console.group !== undefined || console.table !== undefined) && performance.length > 0) {
            console.groupCollapsed(title);
            if(console.table) {
              console.table(performance);
            }
            else {
              $.each(performance, function(index, data) {
                console.log(data['Name'] + ': ' + data['Execution Time']+'ms');
              });
            }
            console.groupEnd();
          }
          performance = [];
        }
      },
      invoke: function(query, passedArguments, context) {
        var
          object = instance,
          maxDepth,
          found,
          response
        ;
        passedArguments = passedArguments || queryArguments;
        context         = element         || context;
        if(typeof query == 'string' && object !== undefined) {
          query    = query.split(/[\. ]/);
          maxDepth = query.length - 1;
          $.each(query, function(depth, value) {
            var camelCaseValue = (depth != maxDepth)
              ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1)
              : query
            ;
            if( $.isPlainObject( object[camelCaseValue] ) && (depth != maxDepth) ) {
              object = object[camelCaseValue];
            }
            else if( object[camelCaseValue] !== undefined ) {
              found = object[camelCaseValue];
              return false;
            }
            else if( $.isPlainObject( object[value] ) && (depth != maxDepth) ) {
              object = object[value];
            }
            else if( object[value] !== undefined ) {
              found = object[value];
              return false;
            }
            else {
              return false;
            }
          });
        }
        if ( $.isFunction( found ) ) {
          response = found.apply(context, passedArguments);
        }
        else if(found !== undefined) {
          response = found;
        }
        if($.isArray(returnedValue)) {
          returnedValue.push(response);
        }
        else if(returnedValue !== undefined) {
          returnedValue = [returnedValue, response];
        }
        else if(response !== undefined) {
          returnedValue = response;
        }
        return found;
      }
    };

    if(methodInvoked) {
      if(instance === undefined) {
        module.initialize();
      }
      module.invoke(query);
    }
    else {
      if(instance !== undefined) {
        module.destroy();
      }
      module.initialize();
    }

    return (returnedValue !== undefined)
      ? returnedValue
      : this
    ;
  };

  // handle DOM attachment to API functionality
  $.fn.apiButton = function(parameters) {
    $(this)
      .each(function(){
        var
          // if only function passed it is success callback
          $module  = $(this),
          selector = $(this).selector || '',

          settings = ( $.isFunction(parameters) )
            ? $.extend(true, {}, $.api.settings, $.fn.apiButton.settings, { stateContext: this, success: parameters })
            : $.extend(true, {}, $.api.settings, $.fn.apiButton.settings, { stateContext: this}, parameters),
          module
        ;
        module = {
          initialize: function() {
            if(settings.context && selector !== '') {
              $(settings.context)
                .on(selector, 'click.' + settings.namespace, module.click)
              ;
            }
            else {
              $module
                .on('click.' + settings.namespace, module.click)
              ;
            }
          },
          click: function() {
            if(!settings.filter || $(this).filter(settings.filter).size() === 0) {
              $.proxy( $.api, this )(settings);
            }
          }
        };
        module.initialize();
      })
    ;
    return this;
  };

  $.api.settings = {

    name        : 'API',
    namespace   : 'api',

    debug       : true,
    verbose     : true,
    performance : true,

    api         : {},

    beforeSend  : function(settings) {
      return settings;
    },
    beforeXHR   : function(xhr) {},
    success     : function(response) {},
    complete    : function(response) {},
    failure     : function(errorCode) {},
    progress    : false,

    error : {
      missingAction    : 'API action used but no url was defined',
      missingURL       : 'URL not specified for the API action',
      missingParameter : 'Missing an essential URL parameter: ',

      timeout          : 'Your request timed out',
      error            : 'There was an error with your request',
      parseError       : 'There was an error parsing your request',
      JSONParse        : 'JSON could not be parsed during error handling',
      statusMessage    : 'Server gave an error: ',
      beforeSend       : 'The before send function has aborted the request',
      exitConditions   : 'API Request Aborted. Exit conditions met'
    },

    className: {
      loading : 'loading',
      error   : 'error'
    },

    metadata: {
      action  : 'action',
      promise : 'promise',
      xhr     : 'xhr'
    },

    regExpTemplate: /\{\$([A-z]+)\}/g,

    action        : false,
    url           : false,
    urlData       : false,
    serializeForm : false,

    stateContext  : false,

    method        : 'get',
    data          : {},
    dataType      : 'json',
    cache         : true,

    loadingLength : 200,
    errorLength   : 2000

  };

  $.fn.apiButton.settings = {
    filter       : '.disabled, .loading',
    context      : false,
    stateContext : false
  };

})( jQuery, window , document );
/*
 * # Semantic - Colorize
 * http://github.com/jlukic/semantic-ui/
 *
 *
 * Copyright 2013 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */

;(function ( $, window, document, undefined ) {

  $.fn.colorize = function(parameters) {
    var
      settings        = $.extend(true, {}, $.fn.colorize.settings, parameters),
      // hoist arguments
      moduleArguments = arguments || false
    ;
    $(this)
      .each(function(instanceIndex) {

        var
          $module         = $(this),

          mainCanvas      = $('<canvas />')[0],
          imageCanvas     = $('<canvas />')[0],
          overlayCanvas   = $('<canvas />')[0],

          backgroundImage = new Image(),

          // defs
          mainContext,
          imageContext,
          overlayContext,

          image,
          imageName,

          width,
          height,

          // shortucts
          colors    = settings.colors,
          paths     = settings.paths,
          namespace = settings.namespace,
          error     = settings.error,

          // boilerplate
          instance   = $module.data('module-' + namespace),
          module
        ;

        module = {

          checkPreconditions: function() {
            module.debug('Checking pre-conditions');

            if( !$.isPlainObject(colors) || $.isEmptyObject(colors) ) {
              module.error(error.undefinedColors);
              return false;
            }
            return true;
          },

          async: function(callback) {
            if(settings.async) {
              setTimeout(callback, 0);
            }
            else {
              callback();
            }
          },

          getMetadata: function() {
            module.debug('Grabbing metadata');
            image     = $module.data('image') || settings.image || undefined;
            imageName = $module.data('name')  || settings.name  || instanceIndex;
            width     = settings.width        || $module.width();
            height    = settings.height       || $module.height();
            if(width === 0 || height === 0) {
              module.error(error.undefinedSize);
            }
          },

          initialize: function() {
            module.debug('Initializing with colors', colors);
            if( module.checkPreconditions() ) {

              module.async(function() {
                module.getMetadata();
                module.canvas.create();

                module.draw.image(function() {
                  module.draw.colors();
                  module.canvas.merge();
                });
                $module
                  .data('module-' + namespace, module)
                ;
              });
            }
          },

          redraw: function() {
            module.debug('Redrawing image');
            module.async(function() {
              module.canvas.clear();
              module.draw.colors();
              module.canvas.merge();
            });
          },

          change: {
            color: function(colorName, color) {
              module.debug('Changing color', colorName);
              if(colors[colorName] === undefined) {
                module.error(error.missingColor);
                return false;
              }
              colors[colorName] = color;
              module.redraw();
            }
          },

          canvas: {
            create: function() {
              module.debug('Creating canvases');

              mainCanvas.width     = width;
              mainCanvas.height    = height;
              imageCanvas.width    = width;
              imageCanvas.height   = height;
              overlayCanvas.width  = width;
              overlayCanvas.height = height;

              mainContext    = mainCanvas.getContext('2d');
              imageContext   = imageCanvas.getContext('2d');
              overlayContext = overlayCanvas.getContext('2d');

              $module
                .append( mainCanvas )
              ;
              mainContext    = $module.children('canvas')[0].getContext('2d');
            },
            clear: function(context) {
              module.debug('Clearing canvas');
              overlayContext.fillStyle = '#FFFFFF';
              overlayContext.fillRect(0, 0, width, height);
            },
            merge: function() {
              if( !$.isFunction(mainContext.blendOnto) ) {
                module.error(error.missingPlugin);
                return;
              }
              mainContext.putImageData( imageContext.getImageData(0, 0, width, height), 0, 0);
              overlayContext.blendOnto(mainContext, 'multiply');
            }
          },

          draw: {

            image: function(callback) {
              module.debug('Drawing image');
              callback = callback || function(){};
              if(image) {
                backgroundImage.src    = image;
                backgroundImage.onload = function() {
                  imageContext.drawImage(backgroundImage, 0, 0);
                  callback();
                };
              }
              else {
                module.error(error.noImage);
                callback();
              }
            },

            colors: function() {
              module.debug('Drawing color overlays', colors);
              $.each(colors, function(colorName, color) {
                settings.onDraw(overlayContext, imageName, colorName, color);
              });
            }

          },

          debug: function(message, variableName) {
            if(settings.debug) {
              if(variableName !== undefined) {
                console.info(settings.name + ': ' + message, variableName);
              }
              else {
                console.info(settings.name + ': ' + message);
              }
            }
          },
          error: function(errorMessage) {
            console.warn(settings.name + ': ' + errorMessage);
          },
          invoke: function(methodName, context, methodArguments) {
            var
              method
            ;
            methodArguments = methodArguments || Array.prototype.slice.call( arguments, 2 );

            if(typeof methodName == 'string' && instance !== undefined) {
              methodName = methodName.split('.');
              $.each(methodName, function(index, name) {
                if( $.isPlainObject( instance[name] ) ) {
                  instance = instance[name];
                  return true;
                }
                else if( $.isFunction( instance[name] ) ) {
                  method = instance[name];
                  return true;
                }
                module.error(settings.error.method);
                return false;
              });
            }
            return ( $.isFunction( method ) )
              ? method.apply(context, methodArguments)
              : false
            ;
          }

        };
        if(instance !== undefined && moduleArguments) {
          // simpler than invoke realizing to invoke itself (and losing scope due prototype.call()
          if(moduleArguments[0] == 'invoke') {
            moduleArguments = Array.prototype.slice.call( moduleArguments, 1 );
          }
          return module.invoke(moduleArguments[0], this, Array.prototype.slice.call( moduleArguments, 1 ) );
        }
        // initializing
        module.initialize();
      })
    ;
    return this;
  };

  $.fn.colorize.settings = {
    name      : 'Image Colorizer',
    debug     : true,
    namespace : 'colorize',

    onDraw    : function(overlayContext, imageName, colorName, color) {},

    // whether to block execution while updating canvas
    async     : true,
    // object containing names and default values of color regions
    colors    : {},

    metadata: {
      image : 'image',
      name  : 'name'
    },

    error: {
      noImage         : 'No tracing image specified',
      undefinedColors : 'No default colors specified.',
      missingColor    : 'Attempted to change color that does not exist',
      missingPlugin   : 'Blend onto plug-in must be included',
      undefinedHeight : 'The width or height of image canvas could not be automatically determined. Please specify a height.'
    }

  };

})( jQuery, window , document );

/*
 * # Semantic - Form Validation
 * http://github.com/jlukic/semantic-ui/
 *
 *
 * Copyright 2013 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */

;(function ( $, window, document, undefined ) {

$.fn.form = function(fields, parameters) {
  var
    $allModules     = $(this),

    settings        = $.extend(true, {}, $.fn.form.settings, parameters),
    validation      = $.extend({}, $.fn.form.settings.defaults, fields),

    namespace       = settings.namespace,
    metadata        = settings.metadata,
    selector        = settings.selector,
    className       = settings.className,
    error           = settings.error,

    eventNamespace  = '.' + namespace,
    moduleNamespace = 'module-' + namespace,

    moduleSelector  = $allModules.selector || '',

    time            = new Date().getTime(),
    performance     = [],

    query           = arguments[0],
    methodInvoked   = (typeof query == 'string'),
    queryArguments  = [].slice.call(arguments, 1),
    returnedValue
  ;
  $allModules
    .each(function() {
      var
        $module    = $(this),
        $field     = $(this).find(selector.field),
        $group     = $(this).find(selector.group),
        $message   = $(this).find(selector.message),
        $prompt    = $(this).find(selector.prompt),
        $submit    = $(this).find(selector.submit),

        formErrors = [],

        element    = this,
        instance   = $module.data(moduleNamespace),
        module
      ;

      module      = {

        initialize: function() {
          module.verbose('Initializing form validation', $module, validation, settings);
          module.bindEvents();
          module.instantiate();
        },

        instantiate: function() {
          module.verbose('Storing instance of module', module);
          instance = module;
          $module
            .data(moduleNamespace, module)
          ;
        },

        destroy: function() {
          module.verbose('Destroying previous module', instance);
          module.removeEvents();
          $module
            .removeData(moduleNamespace)
          ;
        },

        refresh: function() {
          module.verbose('Refreshing selector cache');
          $field = $module.find(selector.field);
        },

        submit: function() {
          module.verbose('Submitting form', $module);
          $module
            .submit()
          ;
        },

        bindEvents: function() {
          if(settings.keyboardShortcuts) {
            $field
              .on('keydown' + eventNamespace, module.event.field.keydown)
            ;
          }
          $module
            .on('submit' + eventNamespace, module.validate.form)
          ;
          $field
            .on('blur' + eventNamespace, module.event.field.blur)
          ;
          $submit
            .on('click' + eventNamespace, module.submit)
          ;
          $field
            .each(function() {
              var
                type       = $(this).prop('type'),
                inputEvent = module.get.changeEvent(type)
              ;
              $(this)
                .on(inputEvent + eventNamespace, module.event.field.change)
              ;
            })
          ;
        },

        removeEvents: function() {
          $module
            .off(eventNamespace)
          ;
          $field
            .off(eventNamespace)
          ;
          $submit
            .off(eventNamespace)
          ;
          $field
            .off(eventNamespace)
          ;
        },

        event: {
          field: {
            keydown: function(event) {
              var
                $field  = $(this),
                key     = event.which,
                keyCode = {
                  enter  : 13,
                  escape : 27
                }
              ;
              if( key == keyCode.escape) {
                module.verbose('Escape key pressed blurring field');
                $field
                  .blur()
                ;
              }
              if(!event.ctrlKey && key == keyCode.enter && $field.is(selector.input) ) {
                module.debug('Enter key pressed, submitting form');
                $submit
                  .addClass(className.down)
                ;
                $field
                  .one('keyup' + eventNamespace, module.event.field.keyup)
                ;
                event.preventDefault();
                return false;
              }
            },
            keyup: function() {
              module.verbose('Doing keyboard shortcut form submit');
              $submit.removeClass(className.down);
              module.submit();
            },
            blur: function() {
              var
                $field      = $(this),
                $fieldGroup = $field.closest($group)
              ;
              if( $fieldGroup.hasClass(className.error) ) {
                module.debug('Revalidating field', $field,  module.get.validation($field));
                module.validate.field( module.get.validation($field) );
              }
              else if(settings.on == 'blur' || settings.on == 'change') {
                module.validate.field( module.get.validation($field) );
              }
            },
            change: function() {
              var
                $field      = $(this),
                $fieldGroup = $field.closest($group)
              ;
              if(settings.on == 'change' || ( $fieldGroup.hasClass(className.error) && settings.revalidate) ) {
                clearTimeout(module.timer);
                module.timer = setTimeout(function() {
                  module.debug('Revalidating field', $field,  module.get.validation($field));
                  module.validate.field( module.get.validation($field) );
                }, settings.delay);
              }
            }
          }

        },

        get: {
          changeEvent: function(type) {
            if(type == 'checkbox' || type == 'radio' || type == 'hidden') {
              return 'change';
            }
            else {
              return (document.createElement('input').oninput !== undefined)
                ? 'input'
                : (document.createElement('input').onpropertychange !== undefined)
                  ? 'propertychange'
                  : 'keyup'
              ;
            }
          },
          field: function(identifier) {
            module.verbose('Finding field with identifier', identifier);
            if( $field.filter('#' + identifier).size() > 0 ) {
              return $field.filter('#' + identifier);
            }
            else if( $field.filter('[name="' + identifier +'"]').size() > 0 ) {
              return $field.filter('[name="' + identifier +'"]');
            }
            else if( $field.filter('[data-' + metadata.validate + '="'+ identifier +'"]').size() > 0 ) {
              return $field.filter('[data-' + metadata.validate + '="'+ identifier +'"]');
            }
            return $('<input/>');
          },
          validation: function($field) {
            var
              rules
            ;
            $.each(validation, function(fieldName, field) {
              if( module.get.field(field.identifier).get(0) == $field.get(0) ) {
                rules = field;
              }
            });
            return rules || false;
          }
        },

        has: {

          field: function(identifier) {
            module.verbose('Checking for existence of a field with identifier', identifier);
            if( $field.filter('#' + identifier).size() > 0 ) {
              return true;
            }
            else if( $field.filter('[name="' + identifier +'"]').size() > 0 ) {
              return true;
            }
            else if( $field.filter('[data-' + metadata.validate + '="'+ identifier +'"]').size() > 0 ) {
              return true;
            }
            return false;
          }

        },

        add: {
          prompt: function(identifier, errors) {
            var
              $field       = module.get.field(identifier),
              $fieldGroup  = $field.closest($group),
              $prompt      = $fieldGroup.find(selector.prompt),
              promptExists = ($prompt.size() !== 0)
            ;
            errors = (typeof errors == 'string')
              ? [errors]
              : errors
            ;
            module.verbose('Adding field error state', identifier);
            $fieldGroup
              .addClass(className.error)
            ;
            if(settings.inline) {
              if(!promptExists) {
                $prompt = settings.templates.prompt(errors);
                $prompt
                  .appendTo($fieldGroup)
                ;
              }
              $prompt
                .html(errors[0])
              ;
              if(!promptExists) {
                if(settings.transition && $.fn.transition !== undefined && $module.transition('is supported')) {
                  module.verbose('Displaying error with css transition', settings.transition);
                  $prompt.transition(settings.transition + ' in', settings.duration);
                }
                else {
                  module.verbose('Displaying error with fallback javascript animation');
                  $prompt
                    .fadeIn(settings.duration)
                  ;
                }
              }
              else {
                module.verbose('Inline errors are disabled, no inline error added', identifier);
              }
            }
          },
          errors: function(errors) {
            module.debug('Adding form error messages', errors);
            $message
              .html( settings.templates.error(errors) )
            ;
          }
        },

        remove: {
          prompt: function(field) {
            var
              $field      = module.get.field(field.identifier),
              $fieldGroup = $field.closest($group),
              $prompt     = $fieldGroup.find(selector.prompt)
            ;
            $fieldGroup
              .removeClass(className.error)
            ;
            if(settings.inline && $prompt.is(':visible')) {
              module.verbose('Removing prompt for field', field);
              if(settings.transition && $.fn.transition !== undefined && $module.transition('is supported')) {
                $prompt.transition(settings.transition + ' out', settings.duration, function() {
                  $prompt.remove();
                });
              }
              else {
                $prompt
                  .fadeOut(settings.duration, function(){
                    $prompt.remove();
                  })
                ;
              }
            }
          }
        },

        validate: {

          form: function(event) {
            var
              allValid = true
            ;
            // reset errors
            formErrors = [];
            $.each(validation, function(fieldName, field) {
              if( !( module.validate.field(field) ) ) {
                allValid = false;
              }
            });
            if(allValid) {
              module.debug('Form has no validation errors, submitting');
              $module
                .removeClass(className.error)
                .addClass(className.success)
              ;
              return $.proxy(settings.onSuccess, this)(event);
            }
            else {
              module.debug('Form has errors');
              $module.addClass(className.error);
              if(!settings.inline) {
                module.add.errors(formErrors);
              }
              return $.proxy(settings.onFailure, this)(formErrors);
            }
          },

          // takes a validation object and returns whether field passes validation
          field: function(field) {
            var
              $field      = module.get.field(field.identifier),
              fieldValid  = true,
              fieldErrors = []
            ;
            if(field.rules !== undefined) {
              $.each(field.rules, function(index, rule) {
                if( module.has.field(field.identifier) && !( module.validate.rule(field, rule) ) ) {
                  module.debug('Field is invalid', field.identifier, rule.type);
                  fieldErrors.push(rule.prompt);
                  fieldValid = false;
                }
              });
            }
            if(fieldValid) {
              module.remove.prompt(field, fieldErrors);
              $.proxy(settings.onValid, $field)();
            }
            else {
              formErrors = formErrors.concat(fieldErrors);
              module.add.prompt(field.identifier, fieldErrors);
              $.proxy(settings.onInvalid, $field)(fieldErrors);
              return false;
            }
            return true;
          },

          // takes validation rule and returns whether field passes rule
          rule: function(field, validation) {
            var
              $field        = module.get.field(field.identifier),
              type          = validation.type,
              value         = $.trim($field.val() + ''),

              bracketRegExp = /\[(.*)\]/i,
              bracket       = bracketRegExp.exec(type),
              isValid       = true,
              ancillary,
              functionType
            ;
            // if bracket notation is used, pass in extra parameters
            if(bracket !== undefined && bracket !== null) {
              ancillary    = '' + bracket[1];
              functionType = type.replace(bracket[0], '');
              isValid      = $.proxy(settings.rules[functionType], $module)(value, ancillary);
            }
            // normal notation
            else {
              isValid = $.proxy(settings.rules[type], $field)(value);
            }
            return isValid;
          }
        },

        setting: function(name, value) {
          if( $.isPlainObject(name) ) {
            $.extend(true, settings, name);
          }
          else if(value !== undefined) {
            settings[name] = value;
          }
          else {
            return settings[name];
          }
        },
        internal: function(name, value) {
          if( $.isPlainObject(name) ) {
            $.extend(true, module, name);
          }
          else if(value !== undefined) {
            module[name] = value;
          }
          else {
            return module[name];
          }
        },
        debug: function() {
          if(settings.debug) {
            if(settings.performance) {
              module.performance.log(arguments);
            }
            else {
              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');
              module.debug.apply(console, arguments);
            }
          }
        },
        verbose: function() {
          if(settings.verbose && settings.debug) {
            if(settings.performance) {
              module.performance.log(arguments);
            }
            else {
              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');
              module.verbose.apply(console, arguments);
            }
          }
        },
        error: function() {
          module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');
          module.error.apply(console, arguments);
        },
        performance: {
          log: function(message) {
            var
              currentTime,
              executionTime,
              previousTime
            ;
            if(settings.performance) {
              currentTime   = new Date().getTime();
              previousTime  = time || currentTime;
              executionTime = currentTime - previousTime;
              time          = currentTime;
              performance.push({
                'Element'        : element,
                'Name'           : message[0],
                'Arguments'      : [].slice.call(message, 1) || '',
                'Execution Time' : executionTime
              });
            }
            clearTimeout(module.performance.timer);
            module.performance.timer = setTimeout(module.performance.display, 100);
          },
          display: function() {
            var
              title = settings.name + ':',
              totalTime = 0
            ;
            time = false;
            clearTimeout(module.performance.timer);
            $.each(performance, function(index, data) {
              totalTime += data['Execution Time'];
            });
            title += ' ' + totalTime + 'ms';
            if(moduleSelector) {
              title += ' \'' + moduleSelector + '\'';
            }
            if($allModules.size() > 1) {
              title += ' ' + '(' + $allModules.size() + ')';
            }
            if( (console.group !== undefined || console.table !== undefined) && performance.length > 0) {
              console.groupCollapsed(title);
              if(console.table) {
                console.table(performance);
              }
              else {
                $.each(performance, function(index, data) {
                  console.log(data['Name'] + ': ' + data['Execution Time']+'ms');
                });
              }
              console.groupEnd();
            }
            performance = [];
          }
        },
        invoke: function(query, passedArguments, context) {
          var
            object = instance,
            maxDepth,
            found,
            response
          ;
          passedArguments = passedArguments || queryArguments;
          context         = element         || context;
          if(typeof query == 'string' && object !== undefined) {
            query    = query.split(/[\. ]/);
            maxDepth = query.length - 1;
            $.each(query, function(depth, value) {
              var camelCaseValue = (depth != maxDepth)
                ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1)
                : query
              ;
              if( $.isPlainObject( object[camelCaseValue] ) && (depth != maxDepth) ) {
                object = object[camelCaseValue];
              }
              else if( object[camelCaseValue] !== undefined ) {
                found = object[camelCaseValue];
                return false;
              }
              else if( $.isPlainObject( object[value] ) && (depth != maxDepth) ) {
                object = object[value];
              }
              else if( object[value] !== undefined ) {
                found = object[value];
                return false;
              }
              else {
                return false;
              }
            });
          }
          if ( $.isFunction( found ) ) {
            response = found.apply(context, passedArguments);
          }
          else if(found !== undefined) {
            response = found;
          }
          if($.isArray(returnedValue)) {
            returnedValue.push(response);
          }
          else if(returnedValue !== undefined) {
            returnedValue = [returnedValue, response];
          }
          else if(response !== undefined) {
            returnedValue = response;
          }
          return found;
        }
      };
      if(methodInvoked) {
        if(instance === undefined) {
          module.initialize();
        }
        module.invoke(query);
      }
      else {
        if(instance !== undefined) {
          module.destroy();
        }
        module.initialize();
      }

    })
  ;

  return (returnedValue !== undefined)
    ? returnedValue
    : this
  ;
};

$.fn.form.settings = {

  name              : 'Form',
  namespace         : 'form',

  debug             : true,
  verbose           : true,
  performance       : true,


  keyboardShortcuts : true,
  on                : 'submit',
  inline            : false,

  delay             : 200,
  revalidate        : true,

  transition        : 'scale',
  duration          : 150,


  onValid           : function() {},
  onInvalid         : function() {},
  onSuccess         : function() { return true; },
  onFailure         : function() { return false; },

  metadata : {
    validate: 'validate'
  },

  selector : {
    message : '.error.message',
    field   : 'input, textarea, select',
    group   : '.field',
    input   : 'input',
    prompt  : '.prompt',
    submit  : '.submit'
  },

  className : {
    error   : 'error',
    success : 'success',
    down    : 'down',
    label   : 'ui label prompt'
  },

  // errors
  error: {
    method   : 'The method you called is not defined.'
  },


  templates: {
    error: function(errors) {
      var
        html = '<ul class="list">'
      ;
      $.each(errors, function(index, value) {
        html += '<li>' + value + '</li>';
      });
      html += '</ul>';
      return $(html);
    },
    prompt: function(errors) {
      return $('<div/>')
        .addClass('ui red pointing prompt label')
        .html(errors[0])
      ;
    }
  },

  rules: {
    checked: function() {
      return ($(this).filter(':checked').size() > 0);
    },
    empty: function(value) {
      return !(value === undefined || '' === value);
    },
    email: function(value){
      var
        emailRegExp = new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?", "i")
      ;
      return emailRegExp.test(value);
    },
    length: function(value, requiredLength) {
      return (value !== undefined)
        ? (value.length >= requiredLength)
        : false
      ;
    },
    not: function(value, notValue) {
      return (value != notValue);
    },
    contains: function(value, text) {
      text = text.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
      return (value.search(text) !== -1);
    },
    is: function(value, text) {
      return (value == text);
    },
    maxLength: function(value, maxLength) {
      return (value !== undefined)
        ? (value.length <= maxLength)
        : false
      ;
    },
    match: function(value, fieldIdentifier) {
      // use either id or name of field
      var
        $form = $(this),
        matchingValue
      ;
      if($form.find('#' + fieldIdentifier).size() > 0) {
        matchingValue = $form.find('#' + fieldIdentifier).val();
      }
      else if($form.find('[name=' + fieldIdentifier +']').size() > 0) {
        matchingValue = $form.find('[name=' + fieldIdentifier + ']').val();
      }
      else if( $form.find('[data-validate="'+ fieldIdentifier +'"]').size() > 0 ) {
        matchingValue = $form.find('[data-validate="'+ fieldIdentifier +'"]').val();
      }
      return (matchingValue !== undefined)
        ? ( value.toString() == matchingValue.toString() )
        : false
      ;
    },
    url: function(value) {
      var
        urlRegExp = /(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/
      ;
      return urlRegExp.test(value);
    }
  }

};

})( jQuery, window , document );

/*
 * # Semantic - State
 * http://github.com/jlukic/semantic-ui/
 *
 *
 * Copyright 2013 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */

;(function ( $, window, document, undefined ) {

$.fn.state = function(parameters) {
  var
    $allModules     = $(this),
    settings        = $.extend(true, {}, $.fn.state.settings, parameters),

    moduleSelector  = $allModules.selector || '',

    time            = new Date().getTime(),
    performance     = [],

    query           = arguments[0],
    methodInvoked   = (typeof query == 'string'),
    queryArguments  = [].slice.call(arguments, 1),

    // shortcuts
    error         = settings.error,
    metadata      = settings.metadata,
    className     = settings.className,
    namespace     = settings.namespace,
    states        = settings.states,
    text          = settings.text,

    eventNamespace  = '.' + namespace,
    moduleNamespace = namespace + '-module',


    returnedValue
  ;
  $allModules
    .each(function() {
      var
        $module       = $(this),

        element       = this,
        instance      = $module.data(moduleNamespace),

        module
      ;
      module = {

        initialize: function() {
          module.verbose('Initializing module');

          // allow module to guess desired state based on element
          if(settings.automatic) {
            module.add.defaults();
          }

          // bind events with delegated events
          if(settings.context && moduleSelector !== '') {
            if( module.allows('hover') ) {
              $(element, settings.context)
                .on(moduleSelector, 'mouseenter' + eventNamespace, module.enable.hover)
                .on(moduleSelector, 'mouseleave' + eventNamespace, module.disable.hover)
              ;
            }
            if( module.allows('down') ) {
              $(element, settings.context)
                .on(moduleSelector, 'mousedown' + eventNamespace, module.enable.down)
                .on(moduleSelector, 'mouseup'   + eventNamespace, module.disable.down)
              ;
            }
            if( module.allows('focus') ) {
              $(element, settings.context)
                .on(moduleSelector, 'focus' + eventNamespace, module.enable.focus)
                .on(moduleSelector, 'blur'  + eventNamespace, module.disable.focus)
              ;
            }
            $(settings.context)
              .on(moduleSelector, 'mouseenter' + eventNamespace, module.change.text)
              .on(moduleSelector, 'mouseleave' + eventNamespace, module.reset.text)
              .on(moduleSelector, 'click'      + eventNamespace, module.toggle.state)
            ;
          }
          else {
            if( module.allows('hover') ) {
              $module
                .on('mouseenter' + eventNamespace, module.enable.hover)
                .on('mouseleave' + eventNamespace, module.disable.hover)
              ;
            }
            if( module.allows('down') ) {
              $module
                .on('mousedown' + eventNamespace, module.enable.down)
                .on('mouseup'   + eventNamespace, module.disable.down)
              ;
            }
            if( module.allows('focus') ) {
              $module
                .on('focus' + eventNamespace, module.enable.focus)
                .on('blur'  + eventNamespace, module.disable.focus)
              ;
            }
            $module
              .on('mouseenter' + eventNamespace, module.change.text)
              .on('mouseleave' + eventNamespace, module.reset.text)
              .on('click'      + eventNamespace, module.toggle.state)
            ;
          }
          module.instantiate();
        },

        instantiate: function() {
          module.verbose('Storing instance of module', module);
          instance = module;
          $module
            .data(moduleNamespace, module)
          ;
        },

        destroy: function() {
          module.verbose('Destroying previous module', instance);
          $module
            .off(eventNamespace)
            .removeData(moduleNamespace)
          ;
        },

        refresh: function() {
          module.verbose('Refreshing selector cache');
          $module = $(element);
        },

        add: {
          defaults: function() {
            var
              userStates = parameters && $.isPlainObject(parameters.states)
                ? parameters.states
                : {}
            ;
            $.each(settings.defaults, function(type, typeStates) {
              if( module.is[type] !== undefined && module.is[type]() ) {
                module.verbose('Adding default states', type, element);
                $.extend(settings.states, typeStates, userStates);
              }
            });
          }
        },

        is: {

          active: function() {
            return $module.hasClass(className.active);
          },
          loading: function() {
            return $module.hasClass(className.loading);
          },
          inactive: function() {
            return !( $module.hasClass(className.active) );
          },

          enabled: function() {
            return !( $module.is(settings.filter.active) );
          },
          disabled: function() {
            return ( $module.is(settings.filter.active) );
          },
          textEnabled: function() {
            return !( $module.is(settings.filter.text) );
          },

          // definitions for automatic type detection
          button: function() {
            return $module.is('.button:not(a, .submit)');
          },
          input: function() {
            return $module.is('input');
          }
        },

        allow: function(state) {
          module.debug('Now allowing state', state);
          states[state] = true;
        },
        disallow: function(state) {
          module.debug('No longer allowing', state);
          states[state] = false;
        },

        allows: function(state) {
          return states[state] || false;
        },

        enable: {
          state: function(state) {
            if(module.allows(state)) {
              $module.addClass( className[state] );
            }
          },
          // convenience
          focus: function() {
            $module.addClass(className.focus);
          },
          hover: function() {
            $module.addClass(className.hover);
          },
          down: function() {
            $module.addClass(className.down);
          },
        },

        disable: {
          state: function(state) {
            if(module.allows(state)) {
              $module.removeClass( className[state] );
            }
          },
          // convenience
          focus: function() {
            $module.removeClass(className.focus);
          },
          hover: function() {
            $module.removeClass(className.hover);
          },
          down: function() {
            $module.removeClass(className.down);
          },
        },

        toggle: {
          state: function() {
            var
              apiRequest = $module.data(metadata.promise)
            ;
            if( module.allows('active') && module.is.enabled() ) {
              module.refresh();
              if(apiRequest !== undefined) {
                module.listenTo(apiRequest);
              }
              else {
                module.change.state();
              }
            }
          }
        },

        listenTo: function(apiRequest) {
          module.debug('API request detected, waiting for state signal', apiRequest);
          if(apiRequest) {
            if(text.loading) {
              module.update.text(text.loading);
            }
            $.when(apiRequest)
              .then(function() {
                if(apiRequest.state() == 'resolved') {
                  module.debug('API request succeeded');
                  settings.activateTest   = function(){ return true; };
                  settings.deactivateTest = function(){ return true; };
                }
                else {
                  module.debug('API request failed');
                  settings.activateTest   = function(){ return false; };
                  settings.deactivateTest = function(){ return false; };
                }
                module.change.state();
              })
            ;
          }
          // xhr exists but set to false, beforeSend killed the xhr
          else {
            settings.activateTest   = function(){ return false; };
            settings.deactivateTest = function(){ return false; };
          }
        },

        // checks whether active/inactive state can be given
        change: {

          state: function() {
            module.debug('Determining state change direction');
            // inactive to active change
            if( module.is.inactive() ) {
              module.activate();
            }
            else {
              module.deactivate();
            }
            if(settings.sync) {
              module.sync();
            }
            $.proxy(settings.onChange, element)();
          },

          text: function() {
            if( module.is.textEnabled() ) {
              if( module.is.active() ) {
                if(text.hover) {
                  module.verbose('Changing text to hover text', text.hover);
                  module.update.text(text.hover);
                }
                else if(text.disable) {
                  module.verbose('Changing text to disable text', text.disable);
                  module.update.text(text.disable);
                }
              }
              else {
                if(text.hover) {
                  module.verbose('Changing text to hover text', text.disable);
                  module.update.text(text.hover);
                }
                else if(text.enable){
                  module.verbose('Changing text to enable text', text.enable);
                  module.update.text(text.enable);
                }
              }
            }
          }

        },

        activate: function() {
          if( $.proxy(settings.activateTest, element)() ) {
            module.debug('Setting state to active');
            $module
              .addClass(className.active)
            ;
            module.update.text(text.active);
          }
          $.proxy(settings.onActivate, element)();
        },

        deactivate: function() {
          if($.proxy(settings.deactivateTest, element)() ) {
            module.debug('Setting state to inactive');
            $module
              .removeClass(className.active)
            ;
            module.update.text(text.inactive);
          }
          $.proxy(settings.onDeactivate, element)();
        },

        sync: function() {
          module.verbose('Syncing other buttons to current state');
          if( module.is.active() ) {
            $allModules
              .not($module)
                .state('activate');
          }
          else {
            $allModules
              .not($module)
                .state('deactivate')
            ;
          }
        },

        get: {
          text: function() {
            return (settings.selector.text)
              ? $module.find(settings.selector.text).text()
              : $module.html()
            ;
          },
          textFor: function(state) {
            return text[state] || false;
          }
        },

        flash: {
          text: function(text, duration) {
            var
              previousText = module.get.text()
            ;
            module.debug('Flashing text message', text, duration);
            text     = text     || settings.text.flash;
            duration = duration || settings.flashDuration;
            module.update.text(text);
            setTimeout(function(){
              module.update.text(previousText);
            }, duration);
          }
        },

        reset: {
          // on mouseout sets text to previous value
          text: function() {
            var
              activeText   = text.active   || $module.data(metadata.storedText),
              inactiveText = text.inactive || $module.data(metadata.storedText)
            ;
            if( module.is.textEnabled() ) {
              if( module.is.active() && activeText) {
                module.verbose('Resetting active text', activeText);
                module.update.text(activeText);
              }
              else if(inactiveText) {
                module.verbose('Resetting inactive text', activeText);
                module.update.text(inactiveText);
              }
            }
          }
        },

        update: {
          text: function(text) {
            var
              currentText = module.get.text()
            ;
            if(text && text !== currentText) {
              module.debug('Updating text', text);
              if(settings.selector.text) {
                $module
                  .data(metadata.storedText, text)
                  .find(settings.selector.text)
                    .text(text)
                ;
              }
              else {
                $module
                  .data(metadata.storedText, text)
                  .html(text)
                ;
              }
            }
            else {
              module.debug('Text is already sane, ignoring update', text);
            }
          }
        },

        setting: function(name, value) {
          module.debug('Changing setting', name, value);
          if(value !== undefined) {
            if( $.isPlainObject(name) ) {
              $.extend(true, settings, name);
            }
            else {
              settings[name] = value;
            }
          }
          else {
            return settings[name];
          }
        },
        internal: function(name, value) {
          module.debug('Changing internal', name, value);
          if(value !== undefined) {
            if( $.isPlainObject(name) ) {
              $.extend(true, module, name);
            }
            else {
              module[name] = value;
            }
          }
          else {
            return module[name];
          }
        },
        debug: function() {
          if(settings.debug) {
            if(settings.performance) {
              module.performance.log(arguments);
            }
            else {
              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');
              module.debug.apply(console, arguments);
            }
          }
        },
        verbose: function() {
          if(settings.verbose && settings.debug) {
            if(settings.performance) {
              module.performance.log(arguments);
            }
            else {
              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');
              module.verbose.apply(console, arguments);
            }
          }
        },
        error: function() {
          module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');
          module.error.apply(console, arguments);
        },
        performance: {
          log: function(message) {
            var
              currentTime,
              executionTime,
              previousTime
            ;
            if(settings.performance) {
              currentTime   = new Date().getTime();
              previousTime  = time || currentTime;
              executionTime = currentTime - previousTime;
              time          = currentTime;
              performance.push({
                'Element'        : element,
                'Name'           : message[0],
                'Arguments'      : [].slice.call(message, 1) || '',
                'Execution Time' : executionTime
              });
            }
            clearTimeout(module.performance.timer);
            module.performance.timer = setTimeout(module.performance.display, 100);
          },
          display: function() {
            var
              title = settings.name + ':',
              totalTime = 0
            ;
            time = false;
            clearTimeout(module.performance.timer);
            $.each(performance, function(index, data) {
              totalTime += data['Execution Time'];
            });
            title += ' ' + totalTime + 'ms';
            if(moduleSelector) {
              title += ' \'' + moduleSelector + '\'';
            }
            if($allModules.size() > 1) {
              title += ' ' + '(' + $allModules.size() + ')';
            }
            if( (console.group !== undefined || console.table !== undefined) && performance.length > 0) {
              console.groupCollapsed(title);
              if(console.table) {
                console.table(performance);
              }
              else {
                $.each(performance, function(index, data) {
                  console.log(data['Name'] + ': ' + data['Execution Time']+'ms');
                });
              }
              console.groupEnd();
            }
            performance = [];
          }
        },
        invoke: function(query, passedArguments, context) {
          var
            object = instance,
            maxDepth,
            found,
            response
          ;
          passedArguments = passedArguments || queryArguments;
          context         = element         || context;
          if(typeof query == 'string' && object !== undefined) {
            query    = query.split(/[\. ]/);
            maxDepth = query.length - 1;
            $.each(query, function(depth, value) {
              var camelCaseValue = (depth != maxDepth)
                ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1)
                : query
              ;
              if( $.isPlainObject( object[camelCaseValue] ) && (depth != maxDepth) ) {
                object = object[camelCaseValue];
              }
              else if( object[camelCaseValue] !== undefined ) {
                found = object[camelCaseValue];
                return false;
              }
              else if( $.isPlainObject( object[value] ) && (depth != maxDepth) ) {
                object = object[value];
              }
              else if( object[value] !== undefined ) {
                found = object[value];
                return false;
              }
              else {
                return false;
              }
            });
          }
          if ( $.isFunction( found ) ) {
            response = found.apply(context, passedArguments);
          }
          else if(found !== undefined) {
            response = found;
          }
          if($.isArray(returnedValue)) {
            returnedValue.push(response);
          }
          else if(returnedValue !== undefined) {
            returnedValue = [returnedValue, response];
          }
          else if(response !== undefined) {
            returnedValue = response;
          }
          return found;
        }
      };
      if(methodInvoked) {
        if(instance === undefined) {
          module.initialize();
        }
        module.invoke(query);
      }
      else {
        if(instance !== undefined) {
          module.destroy();
        }
        module.initialize();
      }

    })
  ;

  return (returnedValue !== undefined)
    ? returnedValue
    : this
  ;
};

$.fn.state.settings = {

  // module info
  name : 'State',

  // debug output
  debug      : true,

  // verbose debug output
  verbose    : true,

  // namespace for events
  namespace  : 'state',

  // debug data includes performance
  performance: true,

  // callback occurs on state change
  onActivate   : function() {},
  onDeactivate : function() {},
  onChange     : function() {},

  // state test functions
  activateTest   : function() { return true; },
  deactivateTest : function() { return true; },

  // whether to automatically map default states
  automatic     : true,

  // activate / deactivate changes all elements instantiated at same time
  sync          : false,

  // default flash text duration, used for temporarily changing text of an element
  flashDuration : 3000,

  // selector filter
  filter     : {
    text   : '.loading, .disabled',
    active : '.disabled'
  },

  context    : false,

  // error
  error: {
    method : 'The method you called is not defined.'
  },

  // metadata
  metadata: {
    promise    : 'promise',
    storedText : 'stored-text'
  },

  // change class on state
  className: {
    focus   : 'focus',
    hover   : 'hover',
    down    : 'down',
    active  : 'active',
    loading : 'loading'
  },

  selector: {
    // selector for text node
    text: false
  },

  defaults : {
    input: {
      hover   : true,
      focus   : true,
      down    : true,
      loading : false,
      active  : false
    },
    button: {
      hover   : true,
      focus   : false,
      down    : true,
      active  : true,
      loading : true
    }
  },

  states     : {
    hover   : true,
    focus   : true,
    down    : true,
    loading : false,
    active  : false
  },

  text     : {
    flash    : false,
    hover    : false,
    active   : false,
    inactive : false,
    enable   : false,
    disable  : false
  }

};



})( jQuery, window , document );

/*
 * # Semantic - Chatroom
 * http://github.com/jlukic/semantic-ui/
 *
 *
 * Copyright 2013 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */

;(function ($, window, document, undefined) {

$.fn.chatroom = function(parameters) {
  var
    $allModules    = $(this),
    moduleSelector = $allModules.selector || '',

    time           = new Date().getTime(),
    performance    = [],

    query          = arguments[0],
    methodInvoked  = (typeof query == 'string'),
    queryArguments = [].slice.call(arguments, 1),
    returnedValue
  ;
  $(this)
    .each(function() {
      var
        settings  = $.extend(true, {}, $.fn.chatroom.settings, parameters),

        className = settings.className,
        namespace = settings.namespace,
        selector  = settings.selector,
        error     = settings.error,

        $module         = $(this),

        $expandButton   = $module.find(selector.expandButton),
        $userListButton = $module.find(selector.userListButton),

        $userList       = $module.find(selector.userList),
        $room           = $module.find(selector.room),
        $userCount      = $module.find(selector.userCount),

        $log            = $module.find(selector.log),
        $message        = $module.find(selector.message),

        $messageInput   = $module.find(selector.messageInput),
        $messageButton  = $module.find(selector.messageButton),

        instance        = $module.data('module'),
        element         = this,

        html            = '',
        users           = {},

        channel,
        loggedInUser,

        message,
        count,

        height,

        pusher,
        module
      ;

      module = {

        width: {
          log      : $log.width(),
          userList : $userList.outerWidth()
        },

        initialize: function() {

          // check error conditions
          if(Pusher === undefined) {
            module.error(error.pusher);
          }
          if(settings.key === undefined || settings.channelName === undefined) {
            module.error(error.key);
            return false;
          }
          else if( !(settings.endpoint.message || settings.endpoint.authentication) ) {
            module.error(error.endpoint);
            return false;
          }

          // define pusher
          pusher                       = new Pusher(settings.key);
          Pusher.channel_auth_endpoint = settings.endpoint.authentication;

          channel = pusher.subscribe(settings.channelName);

          channel.bind('pusher:subscription_succeeded', module.user.list.create);
          channel.bind('pusher:subscription_error', module.error);
          channel.bind('pusher:member_added', module.user.joined);
          channel.bind('pusher:member_removed', module.user.left);
          channel.bind('update_messages', module.message.receive);

          $.each(settings.customEvents, function(label, value) {
            channel.bind(label, value);
          });

          // bind module events
          $userListButton
            .on('click.' +  namespace, module.event.toggleUserList)
          ;
          $expandButton
            .on('click.'   +  namespace, module.event.toggleExpand)
          ;
          $messageInput
            .on('keydown.' +  namespace, module.event.input.keydown)
            .on('keyup.'   +  namespace, module.event.input.keyup)
          ;
          $messageButton
            .on('mouseenter.' +  namespace, module.event.hover)
            .on('mouseleave.' +  namespace, module.event.hover)
            .on('click.' +  namespace, module.event.submit)
          ;
          // scroll to bottom of chat log
          $log
            .animate({
              scrollTop: $log.prop('scrollHeight')
            }, 400)
          ;
          $module
            .data('module', module)
            .addClass(className.loading)
          ;

        },

        // refresh module
        refresh: function() {
          // reset width calculations
          $userListButton
            .removeClass(className.active)
          ;
          module.width = {
            log      : $log.width(),
            userList : $userList.outerWidth()
          };
          if( $userListButton.hasClass(className.active) ) {
            module.user.list.hide();
          }
          $module.data('module', module);
        },

        user: {

          updateCount: function() {
            if(settings.userCount) {
              users = $module.data('users');
              count = 0;
              $.each(users, function() {
                count++;
              });
              $userCount
                .html( settings.templates.userCount(count) )
              ;
            }
          },

          // add user to user list
          joined: function(member) {
            users = $module.data('users');
            if(member.id != 'anonymous' && users[ member.id ] === undefined ) {
              users[ member.id ] = member.info;
              if(settings.randomColor && member.info.color === undefined) {
                member.info.color = settings.templates.color(member.id);
              }
              html = settings.templates.userList(member.info);
              if(member.info.isAdmin) {
                $(html)
                  .prependTo($userList)
                ;
              }
              else {
                $(html)
                  .appendTo($userList)
                ;
              }
              if(settings.partingMessages) {
                $log
                  .append( settings.templates.joined(member.info) )
                ;
                module.message.scroll.test();
              }
              module.user.updateCount();
            }
          },

          // remove user from user list
          left: function(member) {
            users = $module.data('users');
            if(member !== undefined && member.id !== 'anonymous') {
              delete users[ member.id ];
              $module
                .data('users', users)
              ;
              $userList
                .find('[data-id='+ member.id + ']')
                  .remove()
              ;
              if(settings.partingMessages) {
                $log
                  .append( settings.templates.left(member.info) )
                ;
                module.message.scroll.test();
              }
              module.user.updateCount();
            }
          },

          list: {

            // receives list of members and generates user list
            create: function(members) {
              users = {};
              members.each(function(member) {
                if(member.id !== 'anonymous' && member.id !== 'undefined') {
                  if(settings.randomColor && member.info.color === undefined) {
                    member.info.color = settings.templates.color(member.id);
                  }
                  // sort list with admin first
                  html = (member.info.isAdmin)
                    ? settings.templates.userList(member.info) + html
                    : html + settings.templates.userList(member.info)
                  ;
                  users[ member.id ] = member.info;
                }
              });
              $module
                .data('users', users)
                .data('user', users[members.me.id] )
                .removeClass(className.loading)
              ;
              $userList
                .html(html)
              ;
              module.user.updateCount();
              $.proxy(settings.onJoin, $userList.children())();
            },

            // shows user list
            show: function() {
              $log
                .animate({
                  width: (module.width.log - module.width.userList)
                }, {
                  duration : settings.speed,
                  easing   : settings.easing,
                  complete : module.message.scroll.move
                })
              ;
            },

            // hides user list
            hide: function() {
              $log
                .stop()
                .animate({
                  width: (module.width.log)
                }, {
                  duration : settings.speed,
                  easing   : settings.easing,
                  complete : module.message.scroll.move
                })
              ;
            }

          }

        },

        message: {

          // handles scrolling of chat log
          scroll: {
            test: function() {
              height = $log.prop('scrollHeight') - $log.height();
              if( Math.abs($log.scrollTop() - height) < settings.scrollArea) {
                module.message.scroll.move();
              }
            },

            move: function() {
              height = $log.prop('scrollHeight') - $log.height();
              $log
                .scrollTop(height)
              ;
            }
          },

          // sends chat message
          send: function(message) {
            if( !module.utils.emptyString(message) ) {
              $.api({
                url    : settings.endpoint.message,
                method : 'POST',
                data   : {
                  'message': {
                    content   : message,
                    timestamp : new Date().getTime()
                  }
                }
              });
            }
          },

          // receives chat response and processes
          receive: function(response) {
            message      = response.data;
            users        = $module.data('users');
            loggedInUser = $module.data('user');
            if(users[ message.userID] !== undefined) {
              // logged in user's messages already pushed instantly
              if(loggedInUser === undefined || loggedInUser.id != message.userID) {
                message.user = users[ message.userID ];
                module.message.display(message);
              }
            }
          },

          // displays message in chat log
          display: function(message) {
            $log
              .append( settings.templates.message(message) )
            ;
            module.message.scroll.test();
            $.proxy(settings.onMessage, $log.children().last() )();
          }

        },

        expand: function() {
          $module
            .addClass(className.expand)
          ;
          $.proxy(settings.onExpand, $module )();
          module.refresh();
        },

        contract: function() {
          $module
            .removeClass(className.expand)
          ;
          $.proxy(settings.onContract, $module )();
          module.refresh();
        },

        event: {

          input: {

            keydown: function(event) {
              if(event.which == 13) {
                $messageButton
                  .addClass(className.down)
                ;
              }
            },

            keyup: function(event) {
              if(event.which == 13) {
                $messageButton
                  .removeClass(className.down)
                ;
                module.event.submit();
              }
            }

          },

          // handles message form submit
          submit: function() {
            var
              message      = $messageInput.val(),
              loggedInUser = $module.data('user')
            ;
            if(loggedInUser !== undefined && !module.utils.emptyString(message)) {
              module.message.send(message);
              // display immediately
              module.message.display({
                user: loggedInUser,
                text: message
              });
              module.message.scroll.move();
              $messageInput
                .val('')
              ;

            }
          },

          // handles button click on expand button
          toggleExpand: function() {
            if( !$module.hasClass(className.expand) ) {
              $expandButton
                .addClass(className.active)
              ;
              module.expand();
            }
            else {
              $expandButton
                .removeClass(className.active)
              ;
              module.contract();
            }
          },

          // handles button click on user list button
          toggleUserList: function() {
            if( !$log.is(':animated') ) {
              if( !$userListButton.hasClass(className.active) ) {
                $userListButton
                  .addClass(className.active)
                ;
                module.user.list.show();
              }
              else {
                $userListButton
                  .removeClass('active')
                ;
                module.user.list.hide();
              }
            }

          }
        },

        utils: {

          emptyString: function(string) {
            if(typeof string == 'string') {
              return (string.search(/\S/) == -1);
            }
            return false;
          }

        },

      setting: function(name, value) {
        if(value !== undefined) {
          if( $.isPlainObject(name) ) {
            $.extend(true, settings, name);
          }
          else {
            settings[name] = value;
          }
        }
        else {
          return settings[name];
        }
      },
      internal: function(name, value) {
        if( $.isPlainObject(name) ) {
          $.extend(true, module, name);
        }
        else if(value !== undefined) {
          module[name] = value;
        }
        else {
          return module[name];
        }
      },
      debug: function() {
        if(settings.debug) {
          if(settings.performance) {
            module.performance.log(arguments);
          }
          else {
            module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');
            module.debug.apply(console, arguments);
          }
        }
      },
      verbose: function() {
        if(settings.verbose && settings.debug) {
          if(settings.performance) {
            module.performance.log(arguments);
          }
          else {
            module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');
            module.verbose.apply(console, arguments);
          }
        }
      },
      error: function() {
        module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');
        module.error.apply(console, arguments);
      },
      performance: {
        log: function(message) {
          var
            currentTime,
            executionTime,
            previousTime
          ;
          if(settings.performance) {
            currentTime   = new Date().getTime();
            previousTime  = time || currentTime;
            executionTime = currentTime - previousTime;
            time          = currentTime;
            performance.push({
              'Element'        : element,
              'Name'           : message[0],
              'Arguments'      : [].slice.call(message, 1) || '',
              'Execution Time' : executionTime
            });
          }
          clearTimeout(module.performance.timer);
          module.performance.timer = setTimeout(module.performance.display, 100);
        },
        display: function() {
          var
            title = settings.name + ':',
            totalTime = 0
          ;
          time = false;
          clearTimeout(module.performance.timer);
          $.each(performance, function(index, data) {
            totalTime += data['Execution Time'];
          });
          title += ' ' + totalTime + 'ms';
          if(moduleSelector) {
            title += ' \'' + moduleSelector + '\'';
          }
          if( (console.group !== undefined || console.table !== undefined) && performance.length > 0) {
            console.groupCollapsed(title);
            if(console.table) {
              console.table(performance);
            }
            else {
              $.each(performance, function(index, data) {
                console.log(data['Name'] + ': ' + data['Execution Time']+'ms');
              });
            }
            console.groupEnd();
          }
          performance = [];
        }
      },
      invoke: function(query, passedArguments, context) {
        var
          maxDepth,
          found
        ;
        passedArguments = passedArguments || queryArguments;
        context         = element         || context;
        if(typeof query == 'string' && instance !== undefined) {
          query    = query.split(/[\. ]/);
          maxDepth = query.length - 1;
          $.each(query, function(depth, value) {
            if( $.isPlainObject( instance[value] ) && (depth != maxDepth) ) {
              instance = instance[value];
            }
            else if( instance[value] !== undefined ) {
              found = instance[value];
            }
            else {
              module.error(error.method, query);
            }
          });
        }
        if ( $.isFunction( found ) ) {
          return found.apply(context, passedArguments);
        }
        return found || false;
      }
    };

    if(methodInvoked) {
      if(instance === undefined) {
        module.initialize();
      }
      module.invoke(query);
    }
    else {
      if(instance !== undefined) {
        module.destroy();
      }
      module.initialize();
    }
  })
;
  return (returnedValue !== undefined)
    ? returnedValue
    : this
  ;
};

  $.fn.chatroom.settings = {

    name            : 'Chat',
    debug           : false,
    namespace       : 'chat',

    channel         : 'present-chat',

    onJoin          : function(){},
    onMessage       : function(){},
    onExpand        : function(){},
    onContract      : function(){},

    customEvents    : {},

    partingMessages : false,
    userCount       : true,
    randomColor     : true,

    speed           : 300,
    easing          : 'easeOutQuint',

    // pixels from bottom of chat log that should trigger auto scroll to bottom
    scrollArea      : 9999,

    endpoint        : {
      message        : false,
      authentication : false
    },

    error: {
      method   : 'The method you called is not defined',
      endpoint : 'Please define a message and authentication endpoint.',
      key      : 'You must specify a pusher key and channel.',
      pusher   : 'You must include the Pusher library.'
    },

    className   : {
      expand  : 'expand',
      active  : 'active',
      hover   : 'hover',
      down    : 'down',
      loading : 'loading'
    },

    selector    : {
      userCount      : '.actions .message',
      userListButton : '.actions .list.button',
      expandButton   : '.actions .expand.button',
      room           : '.room',
      userList       : '.room .list',
      log            : '.room .log',
      message        : '.room .log .message',
      author         : '.room log .message .author',
      messageInput   : '.talk input',
      messageButton  : '.talk .send.button'
    },

    templates: {

      userCount: function(number) {
        return number + ' users in chat';
      },

      color: function(userID) {
        var
          colors = [
            '#000000',
            '#333333',
            '#666666',
            '#999999',
            '#CC9999',
            '#CC6666',
            '#CC3333',
            '#993333',
            '#663333',
            '#CC6633',
            '#CC9966',
            '#CC9933',
            '#999966',
            '#CCCC66',
            '#99CC66',
            '#669933',
            '#669966',
            '#33A3CC',
            '#336633',
            '#33CCCC',
            '#339999',
            '#336666',
            '#336699',
            '#6666CC',
            '#9966CC',
            '#333399',
            '#663366',
            '#996699',
            '#993366',
            '#CC6699'
          ]
        ;
        return colors[ Math.floor( Math.random() * colors.length) ];
      },

      message: function(message) {
        var
          html = ''
        ;
        if(message.user.isAdmin) {
          message.user.color = '#55356A';
          html += '<div class="admin message">';
          html += '<span class="quirky ui flag team"></span>';
        }
        /*
        else if(message.user.isPro) {
          html += '<div class="indent message">';
          html += '<span class="quirky ui flag pro"></span>';
        }
        */
        else {
          html += '<div class="message">';
        }
        html += '<p>';
        if(message.user.color !== undefined) {
          html += '<span class="author" style="color: ' + message.user.color + ';">' + message.user.name + '</span>: ';
        }
        else {
          html += '<span class="author">' + message.user.name + '</span>: ';
        }
        html += ''
          +   message.text
          + ' </p>'
          + '</div>'
        ;
        return html;
      },

      joined: function(member) {
        return (typeof member.name !== undefined)
          ? '<div class="status">' + member.name + ' has joined the chat.</div>'
          : false
        ;
      },
      left: function(member) {
        return (typeof member.name !== undefined)
          ? '<div class="status">' + member.name + ' has left the chat.</div>'
          : false
        ;
      },

      userList: function(member) {
        var
          html = ''
        ;
        if(member.isAdmin) {
          member.color = '#55356A';
        }
        html +=  ''
          + '<div class="user" data-id="' + member.id + '">'
          + ' <div class="image">'
          + '   <img src="' + member.avatarURL + '">'
          + ' </div>'
        ;
        if(member.color !== undefined) {
          html += ' <p><a href="/users/' + member.id + '" target="_blank" style="color: ' + member.color + ';">' + member.name + '</a></p>';
        }
        else {
          html += ' <p><a href="/users/' + member.id + '" target="_blank">' + member.name + '</a></p>';
        }
        html += '</div>';
        return html;
      }

    }

  };

})( jQuery, window , document );

/*
 * # Semantic - Checkbox
 * http://github.com/jlukic/semantic-ui/
 *
 *
 * Copyright 2013 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */

;(function ( $, window, document, undefined ) {

$.fn.checkbox = function(parameters) {
  var
    $allModules    = $(this),
    moduleSelector = $allModules.selector || '',

    time           = new Date().getTime(),
    performance    = [],

    query          = arguments[0],
    methodInvoked  = (typeof query == 'string'),
    queryArguments = [].slice.call(arguments, 1),
    returnedValue
  ;

  $allModules
    .each(function() {
      var
        settings        = $.extend(true, {}, $.fn.checkbox.settings, parameters),

        className       = settings.className,
        namespace       = settings.namespace,
        error           = settings.error,

        eventNamespace  = '.' + namespace,
        moduleNamespace = 'module-' + namespace,

        $module         = $(this),
        $label          = $(this).next(settings.selector.label).first(),
        $input          = $(this).find(settings.selector.input),

        selector        = $module.selector || '',
        instance        = $module.data(moduleNamespace),

        element         = this,
        module
      ;

      module      = {

        initialize: function() {
          module.verbose('Initializing checkbox', settings);
          if(settings.context && selector !== '') {
            module.verbose('Adding delegated events');
            $(element, settings.context)
              .on(selector, 'click' + eventNamespace, module.toggle)
              .on(selector + ' + ' + settings.selector.label, 'click' + eventNamespace, module.toggle)
            ;
          }
          else {
            $module
              .on('click' + eventNamespace, module.toggle)
              .data(moduleNamespace, module)
            ;
            $label
              .on('click' + eventNamespace, module.toggle)
            ;
          }
          module.instantiate();
        },

        instantiate: function() {
          module.verbose('Storing instance of module', module);
          instance = module;
          $module
            .data(moduleNamespace, module)
          ;
        },

        destroy: function() {
          module.verbose('Destroying previous module');
          $module
            .off(eventNamespace)
            .removeData(moduleNamespace)
          ;
        },

        is: {
          radio: function() {
            return $module.hasClass(className.radio);
          },
          enabled: function() {
            return $input.prop('checked') !== undefined && $input.prop('checked');
          },
          disabled: function() {
            return !module.is.enabled();
          }
        },

        can: {
          disable: function() {
            return (typeof settings.required === 'boolean')
              ? settings.required
              : !module.is.radio()
            ;
          }
        },

        enable: function() {
          module.debug('Enabling checkbox', $input);
          $input
            .prop('checked', true)
            .trigger('change')
          ;
          $.proxy(settings.onChange, $input.get())();
          $.proxy(settings.onEnable, $input.get())();
        },

        disable: function() {
          module.debug('Disabling checkbox');
          $input
            .prop('checked', false)
            .trigger('change')
          ;
          $.proxy(settings.onChange, $input.get())();
          $.proxy(settings.onDisable, $input.get())();
        },

        toggle: function(event) {
          module.verbose('Determining new checkbox state');
          if( module.is.disabled() ) {
            module.enable();
          }
          else if( module.is.enabled() && module.can.disable() ) {
            module.disable();
          }
        },
        setting: function(name, value) {
          if( $.isPlainObject(name) ) {
            $.extend(true, settings, name);
          }
          else if(value !== undefined) {
            settings[name] = value;
          }
          else {
            return settings[name];
          }
        },
        internal: function(name, value) {
          if( $.isPlainObject(name) ) {
            $.extend(true, module, name);
          }
          else if(value !== undefined) {
            module[name] = value;
          }
          else {
            return module[name];
          }
        },
        debug: function() {
          if(settings.debug) {
            if(settings.performance) {
              module.performance.log(arguments);
            }
            else {
              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');
              module.debug.apply(console, arguments);
            }
          }
        },
        verbose: function() {
          if(settings.verbose && settings.debug) {
            if(settings.performance) {
              module.performance.log(arguments);
            }
            else {
              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');
              module.verbose.apply(console, arguments);
            }
          }
        },
        error: function() {
          module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');
          module.error.apply(console, arguments);
        },
        performance: {
          log: function(message) {
            var
              currentTime,
              executionTime,
              previousTime
            ;
            if(settings.performance) {
              currentTime   = new Date().getTime();
              previousTime  = time || currentTime;
              executionTime = currentTime - previousTime;
              time          = currentTime;
              performance.push({
                'Element'        : element,
                'Name'           : message[0],
                'Arguments'      : [].slice.call(message, 1) || '',
                'Execution Time' : executionTime
              });
            }
            clearTimeout(module.performance.timer);
            module.performance.timer = setTimeout(module.performance.display, 100);
          },
          display: function() {
            var
              title = settings.name + ':',
              totalTime = 0
            ;
            time = false;
            clearTimeout(module.performance.timer);
            $.each(performance, function(index, data) {
              totalTime += data['Execution Time'];
            });
            title += ' ' + totalTime + 'ms';
            if(moduleSelector) {
              title += ' \'' + moduleSelector + '\'';
            }
            if( (console.group !== undefined || console.table !== undefined) && performance.length > 0) {
              console.groupCollapsed(title);
              if(console.table) {
                console.table(performance);
              }
              else {
                $.each(performance, function(index, data) {
                  console.log(data['Name'] + ': ' + data['Execution Time']+'ms');
                });
              }
              console.groupEnd();
            }
            performance = [];
          }
        },
        invoke: function(query, passedArguments, context) {
          var
            object = instance,
            maxDepth,
            found,
            response
          ;
          passedArguments = passedArguments || queryArguments;
          context         = element         || context;
          if(typeof query == 'string' && object !== undefined) {
            query    = query.split(/[\. ]/);
            maxDepth = query.length - 1;
            $.each(query, function(depth, value) {
              var camelCaseValue = (depth != maxDepth)
                ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1)
                : query
              ;
              if( $.isPlainObject( object[camelCaseValue] ) && (depth != maxDepth) ) {
                object = object[camelCaseValue];
              }
              else if( object[camelCaseValue] !== undefined ) {
                found = object[camelCaseValue];
                return false;
              }
              else if( $.isPlainObject( object[value] ) && (depth != maxDepth) ) {
                object = object[value];
              }
              else if( object[value] !== undefined ) {
                found = object[value];
                return false;
              }
              else {
                return false;
              }
            });
          }
          if ( $.isFunction( found ) ) {
            response = found.apply(context, passedArguments);
          }
          else if(found !== undefined) {
            response = found;
          }
          if($.isArray(returnedValue)) {
            returnedValue.push(response);
          }
          else if(returnedValue !== undefined) {
            returnedValue = [returnedValue, response];
          }
          else if(response !== undefined) {
            returnedValue = response;
          }
          return found;
        }
      };

      if(methodInvoked) {
        if(instance === undefined) {
          module.initialize();
        }
        module.invoke(query);
      }
      else {
        if(instance !== undefined) {
          module.destroy();
        }
        module.initialize();
      }
    })
  ;

  return (returnedValue !== undefined)
    ? returnedValue
    : this
  ;
};

$.fn.checkbox.settings = {

  name        : 'Checkbox',
  namespace   : 'checkbox',

  debug       : false,
  verbose     : true,
  performance : true,

  // delegated event context
  context     : false,
  required    : 'auto',

  onChange    : function(){},
  onEnable    : function(){},
  onDisable   : function(){},

  error     : {
    method   : 'The method you called is not defined.'
  },

  selector : {
    input  : 'input[type=checkbox], input[type=radio]',
    label  : 'label'
  },

  className : {
    radio  : 'radio'
  }

};

})( jQuery, window , document );

/*
 * # Semantic - Dimmer
 * http://github.com/jlukic/semantic-ui/
 *
 *
 * Copyright 2013 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */

;(function ( $, window, document, undefined ) {

$.fn.dimmer = function(parameters) {
  var
    $allModules     = $(this),

    time            = new Date().getTime(),
    performance     = [],

    query           = arguments[0],
    methodInvoked   = (typeof query == 'string'),
    queryArguments  = [].slice.call(arguments, 1),

    returnedValue
  ;

  $allModules
    .each(function() {
      var
        settings        = ( $.isPlainObject(parameters) )
          ? $.extend(true, {}, $.fn.dimmer.settings, parameters)
          : $.extend({}, $.fn.dimmer.settings),

        selector        = settings.selector,
        namespace       = settings.namespace,
        className       = settings.className,
        error           = settings.error,

        eventNamespace  = '.' + namespace,
        moduleNamespace = 'module-' + namespace,
        moduleSelector  = $allModules.selector || '',

        clickEvent      = ('ontouchstart' in document.documentElement)
          ? 'touchstart'
          : 'click',

        $module = $(this),
        $dimmer,
        $dimmable,

        element   = this,
        instance  = $module.data(moduleNamespace),
        module
      ;

      module = {

        preinitialize: function() {
          if( module.is.dimmer() ) {
            $dimmable = $module.parent();
            $dimmer   = $module;
          }
          else {
            $dimmable = $module;
            if( module.has.dimmer() ) {
              $dimmer = $dimmable.children(selector.dimmer).first();
            }
            else {
              $dimmer = module.create();
            }
          }
        },

        initialize: function() {
          module.debug('Initializing dimmer', settings);
          if(settings.on == 'hover') {
            $dimmable
              .on('mouseenter' + eventNamespace, module.show)
              .on('mouseleave' + eventNamespace, module.hide)
            ;
          }
          else if(settings.on == 'click') {
            $dimmable
              .on(clickEvent + eventNamespace, module.toggle)
            ;
          }

          if( module.is.page() ) {
            module.debug('Setting as a page dimmer', $dimmable);
            module.set.pageDimmer();
          }

          if(settings.closable) {
            module.verbose('Adding dimmer close event', $dimmer);
            $dimmer
              .on(clickEvent + eventNamespace, module.event.click)
            ;
          }
          module.set.dimmable();
          module.instantiate();
        },

        instantiate: function() {
          module.verbose('Storing instance of module', module);
          instance = module;
          $module
            .data(moduleNamespace, instance)
          ;
        },

        destroy: function() {
          module.verbose('Destroying previous module', $dimmer);
          $module
            .removeData(moduleNamespace)
          ;
          $dimmable
            .off(eventNamespace)
          ;
          $dimmer
            .off(eventNamespace)
          ;
        },

        event: {

          click: function(event) {
            module.verbose('Determining if event occured on dimmer', event);
            if( $dimmer.find(event.target).size() === 0 || $(event.target).is(selector.content) ) {
              module.hide();
              event.stopImmediatePropagation();
            }
          }

        },

        addContent: function(element) {
          var
            $content = $(element)
          ;
          module.debug('Add content to dimmer', $content);
          if($content.parent()[0] !== $dimmer[0]) {
            $content.detach().appendTo($dimmer);
          }
        },

        create: function() {
          return $( settings.template.dimmer() ).appendTo($dimmable);
        },

        animate: {
          show: function(callback) {
            callback = $.isFunction(callback)
              ? callback
              : function(){}
            ;
            module.set.dimmed();
            if(settings.on != 'hover' && settings.useCSS && $.fn.transition !== undefined && $dimmer.transition('is supported')) {
              $dimmer
                .transition({
                  animation : settings.transition + ' in',
                  queue     : true,
                  duration  : module.get.duration(),
                  complete  : function() {
                    module.set.active();
                    callback();
                  }
                })
              ;
            }
            else {
              module.verbose('Showing dimmer animation with javascript');
              $dimmer
                .stop()
                .css({
                  opacity : 0,
                  width   : '100%',
                  height  : '100%'
                })
                .fadeTo(module.get.duration(), 1, function() {
                  $dimmer.removeAttr('style');
                  module.set.active();
                  callback();
                })
              ;
            }
          },
          hide: function(callback) {
            callback = $.isFunction(callback)
              ? callback
              : function(){}
            ;
            if(settings.on != 'hover' && settings.useCSS && $.fn.transition !== undefined && $dimmer.transition('is supported')) {
              module.verbose('Hiding dimmer with css');
              $dimmer
                .transition({
                  animation : settings.transition + ' out',
                  duration  : module.get.duration(),
                  queue     : true,
                  complete  : function() {
                    module.remove.dimmed();
                    module.remove.active();
                    callback();
                  }
                })
              ;
            }
            else {
              module.verbose('Hiding dimmer with javascript');
              $dimmer
                .stop()
                .fadeOut(module.get.duration(), function() {
                  $dimmer.removeAttr('style');
                  module.remove.dimmed();
                  module.remove.active();
                  callback();
                })
              ;
            }
          }
        },

        get: {
          dimmer: function() {
            return $dimmer;
          },
          duration: function() {
            if(typeof settings.duration == 'object') {
              if( module.is.active() ) {
                return settings.duration.hide;
              }
              else {
                return settings.duration.show;
              }
            }
            return settings.duration;
          }
        },

        has: {
          dimmer: function() {
            return ( $module.children(selector.dimmer).size() > 0 );
          }
        },

        is: {
          active: function() {
            return $dimmer.hasClass(className.active);
          },
          animating: function() {
            return ( $dimmer.is(':animated') || $dimmer.hasClass(className.transition) );
          },
          dimmer: function() {
            return $module.is(selector.dimmer);
          },
          dimmable: function() {
            return $module.is(selector.dimmable);
          },
          dimmed: function() {
            return $dimmable.hasClass(className.dimmed);
          },
          disabled: function() {
            return $dimmable.hasClass(className.disabled);
          },
          enabled: function() {
            return !module.is.disabled();
          },
          page: function () {
            return $dimmable.is('body');
          },
          pageDimmer: function() {
            return $dimmer.hasClass(className.pageDimmer);
          }
        },

        can: {
          show: function() {
            return !$dimmer.hasClass(className.disabled);
          }
        },

        set: {
          active: function() {
            module.set.dimmed();
            $dimmer
              .removeClass(className.transition)
              .addClass(className.active)
            ;
          },
          dimmable: function() {
            $dimmable.addClass(className.dimmable);
          },
          dimmed: function() {
            $dimmable.addClass(className.dimmed);
          },
          pageDimmer: function() {
            $dimmer.addClass(className.pageDimmer);
          },
          disabled: function() {
            $dimmer.addClass(className.disabled);
          }
        },

        remove: {
          active: function() {
            $dimmer
              .removeClass(className.transition)
              .removeClass(className.active)
            ;
          },
          dimmed: function() {
            $dimmable.removeClass(className.dimmed);
          },
          disabled: function() {
            $dimmer.removeClass(className.disabled);
          }
        },

        show: function(callback) {
          callback = $.isFunction(callback)
            ? callback
            : function(){}
          ;
          module.debug('Showing dimmer', $dimmer, settings);
          if( !module.is.active() && module.is.enabled() ) {
            module.animate.show(callback);
            $.proxy(settings.onShow, element)();
            $.proxy(settings.onChange, element)();
          }
          else {
            module.debug('Dimmer is already shown or disabled');
          }
        },

        hide: function(callback) {
          callback = $.isFunction(callback)
            ? callback
            : function(){}
          ;
          if( module.is.active() || module.is.animating() ) {
            module.debug('Hiding dimmer', $dimmer);
            module.animate.hide(callback);
            $.proxy(settings.onHide, element)();
            $.proxy(settings.onChange, element)();
          }
          else {
            module.debug('Dimmer is not visible');
          }
        },

        toggle: function() {
          module.verbose('Toggling dimmer visibility', $dimmer);
          if( !module.is.dimmed() ) {
            module.show();
          }
          else {
            module.hide();
          }
        },

        setting: function(name, value) {
          if( $.isPlainObject(name) ) {
            $.extend(true, settings, name);
          }
          else if(value !== undefined) {
            settings[name] = value;
          }
          else {
            return settings[name];
          }
        },
        internal: function(name, value) {
          if( $.isPlainObject(name) ) {
            $.extend(true, module, name);
          }
          else if(value !== undefined) {
            module[name] = value;
          }
          else {
            return module[name];
          }
        },
        debug: function() {
          if(settings.debug) {
            if(settings.performance) {
              module.performance.log(arguments);
            }
            else {
              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');
              module.debug.apply(console, arguments);
            }
          }
        },
        verbose: function() {
          if(settings.verbose && settings.debug) {
            if(settings.performance) {
              module.performance.log(arguments);
            }
            else {
              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');
              module.verbose.apply(console, arguments);
            }
          }
        },
        error: function() {
          module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');
          module.error.apply(console, arguments);
        },
        performance: {
          log: function(message) {
            var
              currentTime,
              executionTime,
              previousTime
            ;
            if(settings.performance) {
              currentTime   = new Date().getTime();
              previousTime  = time || currentTime;
              executionTime = currentTime - previousTime;
              time          = currentTime;
              performance.push({
                'Element'        : element,
                'Name'           : message[0],
                'Arguments'      : [].slice.call(message, 1) || '',
                'Execution Time' : executionTime
              });
            }
            clearTimeout(module.performance.timer);
            module.performance.timer = setTimeout(module.performance.display, 100);
          },
          display: function() {
            var
              title = settings.name + ':',
              totalTime = 0
            ;
            time = false;
            clearTimeout(module.performance.timer);
            $.each(performance, function(index, data) {
              totalTime += data['Execution Time'];
            });
            title += ' ' + totalTime + 'ms';
            if(moduleSelector) {
              title += ' \'' + moduleSelector + '\'';
            }
            if($allModules.size() > 1) {
              title += ' ' + '(' + $allModules.size() + ')';
            }
            if( (console.group !== undefined || console.table !== undefined) && performance.length > 0) {
              console.groupCollapsed(title);
              if(console.table) {
                console.table(performance);
              }
              else {
                $.each(performance, function(index, data) {
                  console.log(data['Name'] + ': ' + data['Execution Time']+'ms');
                });
              }
              console.groupEnd();
            }
            performance = [];
          }
        },
        invoke: function(query, passedArguments, context) {
          var
            object = instance,
            maxDepth,
            found,
            response
          ;
          passedArguments = passedArguments || queryArguments;
          context         = element         || context;
          if(typeof query == 'string' && object !== undefined) {
            query    = query.split(/[\. ]/);
            maxDepth = query.length - 1;
            $.each(query, function(depth, value) {
              var camelCaseValue = (depth != maxDepth)
                ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1)
                : query
              ;
              if( $.isPlainObject( object[camelCaseValue] ) && (depth != maxDepth) ) {
                object = object[camelCaseValue];
              }
              else if( object[camelCaseValue] !== undefined ) {
                found = object[camelCaseValue];
                return false;
              }
              else if( $.isPlainObject( object[value] ) && (depth != maxDepth) ) {
                object = object[value];
              }
              else if( object[value] !== undefined ) {
                found = object[value];
                return false;
              }
              else {
                return false;
              }
            });
          }
          if ( $.isFunction( found ) ) {
            response = found.apply(context, passedArguments);
          }
          else if(found !== undefined) {
            response = found;
          }
          if($.isArray(returnedValue)) {
            returnedValue.push(response);
          }
          else if(returnedValue !== undefined) {
            returnedValue = [returnedValue, response];
          }
          else if(response !== undefined) {
            returnedValue = response;
          }
          return found;
        }
      };

      module.preinitialize();

      if(methodInvoked) {
        if(instance === undefined) {
          module.initialize();
        }
        module.invoke(query);
      }
      else {
        if(instance !== undefined) {
          module.destroy();
        }
        module.initialize();
      }
    })
  ;

  return (returnedValue !== undefined)
    ? returnedValue
    : this
  ;
};

$.fn.dimmer.settings = {

  name        : 'Dimmer',
  namespace   : 'dimmer',

  debug       : false,
  verbose     : true,
  performance : true,

  transition  : 'fade',
  useCSS      : true,
  on          : false,
  closable    : true,

  duration    : {
    show : 500,
    hide : 500
  },

  onChange    : function(){},
  onShow      : function(){},
  onHide      : function(){},

  error   : {
    method   : 'The method you called is not defined.'
  },

  selector: {
    dimmable : '.ui.dimmable',
    dimmer   : '.ui.dimmer',
    content  : '.ui.dimmer > .content, .ui.dimmer > .content > .center'
  },

  template: {
    dimmer: function() {
     return $('<div />').attr('class', 'ui dimmer');
    }
  },

  className : {
    active     : 'active',
    dimmable   : 'ui dimmable',
    dimmed     : 'dimmed',
    disabled   : 'disabled',
    pageDimmer : 'page',
    hide       : 'hide',
    show       : 'show',
    transition : 'transition'
  }

};

})( jQuery, window , document );
/*
 * # Semantic - Dropdown
 * http://github.com/jlukic/semantic-ui/
 *
 *
 * Copyright 2013 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
;(function ( $, window, document, undefined ) {

$.fn.dropdown = function(parameters) {
    var
    $allModules    = $(this),
    $document      = $(document),

    moduleSelector = $allModules.selector || '',

    hasTouch       = ('ontouchstart' in document.documentElement),
    time           = new Date().getTime(),
    performance    = [],

    query          = arguments[0],
    methodInvoked  = (typeof query == 'string'),
    queryArguments = [].slice.call(arguments, 1),
    returnedValue
  ;

  $allModules
    .each(function() {
      var
        settings          = ( $.isPlainObject(parameters) )
          ? $.extend(true, {}, $.fn.dropdown.settings, parameters)
          : $.extend({}, $.fn.dropdown.settings),

        className       = settings.className,
        metadata        = settings.metadata,
        namespace       = settings.namespace,
        selector        = settings.selector,
        error           = settings.error,

        eventNamespace  = '.' + namespace,
        moduleNamespace = 'module-' + namespace,

        $module         = $(this),
        $item           = $module.find(selector.item),
        $text           = $module.find(selector.text),
        $input          = $module.find(selector.input),

        $menu           = $module.children(selector.menu),


        element         = this,
        instance        = $module.data(moduleNamespace),
        module
      ;

      module = {

        initialize: function() {
          module.debug('Initializing dropdown', settings);

          module.save.defaults();
          module.set.selected();

          if(hasTouch) {
            module.bind.touchEvents();
          }
          module.bind.mouseEvents();
          module.instantiate();
        },

        instantiate: function() {
          module.verbose('Storing instance of dropdown', module);
          instance = module;
          $module
            .data(moduleNamespace, module)
          ;
        },

        destroy: function() {
          module.verbose('Destroying previous dropdown for', $module);
          $item
            .off(eventNamespace)
          ;
          $module
            .off(eventNamespace)
            .removeData(moduleNamespace)
          ;
        },

        bind: {
          touchEvents: function() {
            module.debug('Touch device detected binding touch events');
            $module
              .on('touchstart' + eventNamespace, module.event.test.toggle)
            ;
            $item
              .on('touchstart' + eventNamespace, module.event.item.mouseenter)
              .on('touchstart' + eventNamespace, module.event.item.click)
            ;
          },
          mouseEvents: function() {
            module.verbose('Mouse detected binding mouse events');
            if(settings.on == 'click') {
              $module
                .on('click' + eventNamespace, module.event.test.toggle)
              ;
            }
            else if(settings.on == 'hover') {
              $module
                .on('mouseenter' + eventNamespace, module.delay.show)
                .on('mouseleave' + eventNamespace, module.delay.hide)
              ;
            }
            else {
              $module
                .on(settings.on + eventNamespace, module.toggle)
              ;
            }
            $item
              .on('mouseenter' + eventNamespace, module.event.item.mouseenter)
              .on('mouseleave' + eventNamespace, module.event.item.mouseleave)
              .on('click'      + eventNamespace, module.event.item.click)
            ;
          },
          intent: function() {
            module.verbose('Binding hide intent event to document');
            if(hasTouch) {
              $document
                .on('touchstart' + eventNamespace, module.event.test.touch)
                .on('touchmove'  + eventNamespace, module.event.test.touch)
              ;
            }
            $document
              .on('click' + eventNamespace, module.event.test.hide)
            ;
          }
        },

        unbind: {
          intent: function() {
            module.verbose('Removing hide intent event from document');
            if(hasTouch) {
              $document
                .off('touchstart' + eventNamespace)
                .off('touchmove' + eventNamespace)
              ;
            }
            $document
              .off('click' + eventNamespace)
            ;
          }
        },

        event: {
          test: {
            toggle: function(event) {
              if( module.determine.intent(event, module.toggle) ) {
                event.preventDefault();
              }
            },
            touch: function(event) {
              module.determine.intent(event, function() {
                if(event.type == 'touchstart') {
                  module.timer = setTimeout(module.hide, settings.delay.touch);
                }
                else if(event.type == 'touchmove') {
                  clearTimeout(module.timer);
                }
              });
              event.stopPropagation();
            },
            hide: function(event) {
              module.determine.intent(event, module.hide);
            }
          },

          item: {

            mouseenter: function(event) {
              var
                $currentMenu = $(this).find(selector.menu),
                $otherMenus  = $(this).siblings(selector.item).children(selector.menu)
              ;
              if( $currentMenu.size() > 0 ) {
                clearTimeout(module.itemTimer);
                module.itemTimer = setTimeout(function() {
                  module.animate.hide(false, $otherMenus);
                  module.verbose('Showing sub-menu', $currentMenu);
                  module.animate.show(false,  $currentMenu);
                }, settings.delay.show * 2);
                event.preventDefault();
              }
            },

            mouseleave: function(event) {
              var
                $currentMenu = $(this).find(selector.menu)
              ;
              if($currentMenu.size() > 0) {
                clearTimeout(module.itemTimer);
                module.itemTimer = setTimeout(function() {
                  module.verbose('Hiding sub-menu', $currentMenu);
                  module.animate.hide(false,  $currentMenu);
                }, settings.delay.hide);
              }
            },

            click: function (event) {
              var
                $choice = $(this),
                text    = ( $choice.data(metadata.text) !== undefined )
                  ? $choice.data(metadata.text)
                  : $choice.text(),
                value   = ( $choice.data(metadata.value) !== undefined)
                  ? $choice.data(metadata.value)
                  : (typeof text === 'string')
                      ? text.toLowerCase()
                      : text,
                callback = function() {
                  module.determine.selectAction(text, value);
                  $.proxy(settings.onChange, element)(value, text);
                }
              ;
              if( $choice.find(selector.menu).size() === 0 ) {
                if(event.type == 'touchstart') {
                  $choice.one('click', callback);
                }
                else {
                  callback();
                }
              }
            }

          },

          resetStyle: function() {
            $(this).removeAttr('style');
          }

        },

        determine: {
          selectAction: function(text, value) {
            module.verbose('Determining action', settings.action);
            if( $.isFunction( module.action[settings.action] ) ) {
              module.verbose('Triggering preset action', settings.action, text, value);
              module.action[ settings.action ](text, value);
            }
            else if( $.isFunction(settings.action) ) {
              module.verbose('Triggering user action', settings.action, text, value);
              settings.action(text, value);
            }
            else {
              module.error(error.action, settings.action);
            }
          },
          intent: function(event, callback) {
            module.debug('Determining whether event occurred in dropdown', event.target);
            callback = callback || function(){};
            if( $(event.target).closest($menu).size() === 0 ) {
              module.verbose('Triggering event', callback);
              callback();
              return true;
            }
            else {
              module.verbose('Event occurred in dropdown, canceling callback');
              return false;
            }
          }
        },

        action: {

          nothing: function() {},

          hide: function() {
            module.hide();
          },

          activate: function(text, value) {
            value = (value !== undefined)
              ? value
              : text
            ;
            module.set.selected(value);
            module.set.value(value);
            module.hide();
          },

          /* Deprecated */
          auto: function(text, value) {
            value = (value !== undefined)
              ? value
              : text
            ;
            module.set.selected(value);
            module.set.value(value);
            module.hide();
          },

          /* Deprecated */
          changeText: function(text, value) {
            value = (value !== undefined)
              ? value
              : text
            ;
            module.set.selected(value);
            module.hide();
          },

          /* Deprecated */
          updateForm: function(text, value) {
            value = (value !== undefined)
              ? value
              : text
            ;
            module.set.selected(value);
            module.set.value(value);
            module.hide();
          }

        },

        get: {
          text: function() {
            return $text.text();
          },
          value: function() {
            return ($input.size() > 0)
              ? $input.val()
              : $module.data(metadata.value)
            ;
          },
          item: function(value, strict) {
            var
              $selectedItem = false
            ;
            value = (value !== undefined)
              ? value
              : ( module.get.value() !== undefined)
                ? module.get.value()
                : module.get.text()
            ;
            if(strict === undefined && value === '') {
              module.debug('Ambiguous dropdown value using strict type check', value);
              strict = true;
            }
            else {
              strict = strict || false;
            }
            if(value !== undefined) {
              $item
                .each(function() {
                  var
                    $choice       = $(this),
                    optionText    = ( $choice.data(metadata.text) !== undefined )
                      ? $choice.data(metadata.text)
                      : $choice.text(),
                    optionValue   = ( $choice.data(metadata.value) !== undefined )
                      ? $choice.data(metadata.value)
                      : (typeof optionText === 'string')
                        ? optionText.toLowerCase()
                        : optionText
                  ;
                  if(strict) {
                    if( optionValue === value ) {
                      $selectedItem = $(this);
                    }
                    else if( !$selectedItem && optionText === value ) {
                      $selectedItem = $(this);
                    }
                  }
                  else {
                    if( optionValue == value ) {
                      $selectedItem = $(this);
                    }
                    else if( !$selectedItem && optionText == value ) {
                      $selectedItem = $(this);
                    }
                  }
                })
              ;
            }
            else {
              value = module.get.text();
            }
            return $selectedItem || false;
          }
        },

        restore: {
          defaults: function() {
            module.restore.defaultText();
            module.restore.defaultValue();
          },
          defaultText: function() {
            var
              defaultText = $module.data(metadata.defaultText)
            ;
            module.debug('Restoring default text', defaultText);
            module.set.text(defaultText);
          },
          defaultValue: function() {
            var
              defaultValue = $module.data(metadata.defaultValue)
            ;
            if(defaultValue !== undefined) {
              module.debug('Restoring default value', defaultValue);
              module.set.selected(defaultValue);
              module.set.value(defaultValue);
            }
          }
        },

        save: {
          defaults: function() {
            module.save.defaultText();
            module.save.defaultValue();
          },
          defaultValue: function() {
            $module.data(metadata.defaultValue, module.get.value() );
          },
          defaultText: function() {
            $module.data(metadata.defaultText, $text.text() );
          }
        },

        set: {
          text: function(text) {
            module.debug('Changing text', text, $text);
            $text.removeClass(className.placeholder);
            $text.text(text);
          },
          value: function(value) {
            module.debug('Adding selected value to hidden input', value, $input);
            if($input.size() > 0) {
              $input
                .val(value)
                .trigger('change')
              ;
            }
            else {
              $module.data(metadata.value, value);
            }
          },
          active: function() {
            $module.addClass(className.active);
          },
          visible: function() {
            $module.addClass(className.visible);
          },
          selected: function(value) {
            var
              $selectedItem = module.get.item(value),
              selectedText
            ;
            if($selectedItem) {
              module.debug('Setting selected menu item to', $selectedItem);
              selectedText = ($selectedItem.data(metadata.text) !== undefined)
                ? $selectedItem.data(metadata.text)
                : $selectedItem.text()
              ;
              $item
                .removeClass(className.active)
              ;
              $selectedItem
                .addClass(className.active)
              ;
              module.set.text(selectedText);
            }
          }
        },

        remove: {
          active: function() {
            $module.removeClass(className.active);
          },
          visible: function() {
            $module.removeClass(className.visible);
          }
        },

        is: {
          selection: function() {
            return $module.hasClass(className.selection);
          },
          animated: function($subMenu) {
            return ($subMenu)
              ? $subMenu.is(':animated') || $subMenu.transition('is animating')
              : $menu.is(':animated') || $menu.transition('is animating')
            ;
          },
          visible: function($subMenu) {
            return ($subMenu)
              ? $subMenu.is(':visible')
              : $menu.is(':visible')
            ;
          },
          hidden: function($subMenu) {
            return ($subMenu)
              ? $subMenu.is(':not(:visible)')
              : $menu.is(':not(:visible)')
            ;
          }
        },

        can: {
          click: function() {
            return (hasTouch || settings.on == 'click');
          },
          show: function() {
            return !$module.hasClass(className.disabled);
          }
        },

        animate: {
          show: function(callback, $subMenu) {
            var
              $currentMenu = $subMenu || $menu
            ;
            callback = callback || function(){};
            if( module.is.hidden($currentMenu) ) {
              module.verbose('Doing menu show animation', $currentMenu);
              if(settings.transition == 'none') {
                callback();
              }
              else if($.fn.transition !== undefined && $module.transition('is supported')) {
                $currentMenu
                  .transition({
                    animation : settings.transition + ' in',
                    duration  : settings.duration,
                    complete  : callback,
                    queue     : false
                  })
                ;
              }
              else if(settings.transition == 'slide down') {
                $currentMenu
                  .hide()
                  .clearQueue()
                  .children()
                    .clearQueue()
                    .css('opacity', 0)
                    .delay(50)
                    .animate({
                      opacity : 1
                    }, settings.duration, 'easeOutQuad', module.event.resetStyle)
                    .end()
                  .slideDown(100, 'easeOutQuad', function() {
                    $.proxy(module.event.resetStyle, this)();
                    callback();
                  })
                ;
              }
              else if(settings.transition == 'fade') {
                $currentMenu
                  .hide()
                  .clearQueue()
                  .fadeIn(settings.duration, function() {
                    $.proxy(module.event.resetStyle, this)();
                    callback();
                  })
                ;
              }
              else {
                module.error(error.transition, settings.transition);
              }
            }
          },
          hide: function(callback, $subMenu) {
            var
              $currentMenu = $subMenu || $menu
            ;
            callback = callback || function(){};
            if(module.is.visible($currentMenu) ) {
              module.verbose('Doing menu hide animation', $currentMenu);
              if($.fn.transition !== undefined && $module.transition('is supported')) {
                $currentMenu
                  .transition({
                    animation : settings.transition + ' out',
                    duration  : settings.duration,
                    complete  : callback,
                    queue     : false
                  })
                ;
              }
              else if(settings.transition == 'none') {
                callback();
              }
              else if(settings.transition == 'slide down') {
                $currentMenu
                  .show()
                  .clearQueue()
                  .children()
                    .clearQueue()
                    .css('opacity', 1)
                    .animate({
                      opacity : 0
                    }, 100, 'easeOutQuad', module.event.resetStyle)
                    .end()
                  .delay(50)
                  .slideUp(100, 'easeOutQuad', function() {
                    $.proxy(module.event.resetStyle, this)();
                    callback();
                  })
                ;
              }
              else if(settings.transition == 'fade') {
                $currentMenu
                  .show()
                  .clearQueue()
                  .fadeOut(150, function() {
                    $.proxy(module.event.resetStyle, this)();
                    callback();
                  })
                ;
              }
              else {
                module.error(error.transition);
              }
            }
          }
        },

        show: function() {
          module.debug('Checking if dropdown can show');
          if( module.is.hidden() ) {
            module.hideOthers();
            module.set.active();
            module.animate.show(function() {
              if( module.can.click() ) {
                module.bind.intent();
              }
              module.set.visible();
            });
            $.proxy(settings.onShow, element)();
          }
        },

        hide: function() {
          if( !module.is.animated() && module.is.visible() ) {
            module.debug('Hiding dropdown');
            if( module.can.click() ) {
              module.unbind.intent();
            }
            module.remove.active();
            module.animate.hide(module.remove.visible);
            $.proxy(settings.onHide, element)();
          }
        },

        delay: {
          show: function() {
            module.verbose('Delaying show event to ensure user intent');
            clearTimeout(module.timer);
            module.timer = setTimeout(module.show, settings.delay.show);
          },
          hide: function() {
            module.verbose('Delaying hide event to ensure user intent');
            clearTimeout(module.timer);
            module.timer = setTimeout(module.hide, settings.delay.hide);
          }
        },

        hideOthers: function() {
          module.verbose('Finding other dropdowns to hide');
          $allModules
            .not($module)
              .has(selector.menu + ':visible')
              .dropdown('hide')
          ;
        },

        toggle: function() {
          module.verbose('Toggling menu visibility');
          if( module.is.hidden() ) {
            module.show();
          }
          else {
            module.hide();
          }
        },

        setting: function(name, value) {
          if( $.isPlainObject(name) ) {
            $.extend(true, settings, name);
          }
          else if(value !== undefined) {
            settings[name] = value;
          }
          else {
            return settings[name];
          }
        },
        internal: function(name, value) {
          if( $.isPlainObject(name) ) {
            $.extend(true, module, name);
          }
          else if(value !== undefined) {
            module[name] = value;
          }
          else {
            return module[name];
          }
        },
        debug: function() {
          if(settings.debug) {
            if(settings.performance) {
              module.performance.log(arguments);
            }
            else {
              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');
              module.debug.apply(console, arguments);
            }
          }
        },
        verbose: function() {
          if(settings.verbose && settings.debug) {
            if(settings.performance) {
              module.performance.log(arguments);
            }
            else {
              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');
              module.verbose.apply(console, arguments);
            }
          }
        },
        error: function() {
          module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');
          module.error.apply(console, arguments);
        },
        performance: {
          log: function(message) {
            var
              currentTime,
              executionTime,
              previousTime
            ;
            if(settings.performance) {
              currentTime   = new Date().getTime();
              previousTime  = time || currentTime;
              executionTime = currentTime - previousTime;
              time          = currentTime;
              performance.push({
                'Element'        : element,
                'Name'           : message[0],
                'Arguments'      : [].slice.call(message, 1) || '',
                'Execution Time' : executionTime
              });
            }
            clearTimeout(module.performance.timer);
            module.performance.timer = setTimeout(module.performance.display, 100);
          },
          display: function() {
            var
              title = settings.name + ':',
              totalTime = 0
            ;
            time = false;
            clearTimeout(module.performance.timer);
            $.each(performance, function(index, data) {
              totalTime += data['Execution Time'];
            });
            title += ' ' + totalTime + 'ms';
            if(moduleSelector) {
              title += ' \'' + moduleSelector + '\'';
            }
            if( (console.group !== undefined || console.table !== undefined) && performance.length > 0) {
              console.groupCollapsed(title);
              if(console.table) {
                console.table(performance);
              }
              else {
                $.each(performance, function(index, data) {
                  console.log(data['Name'] + ': ' + data['Execution Time']+'ms');
                });
              }
              console.groupEnd();
            }
            performance = [];
          }
        },
        invoke: function(query, passedArguments, context) {
          var
            object = instance,
            maxDepth,
            found,
            response
          ;
          passedArguments = passedArguments || queryArguments;
          context         = element         || context;
          if(typeof query == 'string' && object !== undefined) {
            query    = query.split(/[\. ]/);
            maxDepth = query.length - 1;
            $.each(query, function(depth, value) {
              var camelCaseValue = (depth != maxDepth)
                ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1)
                : query
              ;
              if( $.isPlainObject( object[camelCaseValue] ) && (depth != maxDepth) ) {
                object = object[camelCaseValue];
              }
              else if( object[camelCaseValue] !== undefined ) {
                found = object[camelCaseValue];
                return false;
              }
              else if( $.isPlainObject( object[value] ) && (depth != maxDepth) ) {
                object = object[value];
              }
              else if( object[value] !== undefined ) {
                found = object[value];
                return false;
              }
              else {
                module.error(error.method, query);
                return false;
              }
            });
          }
          if ( $.isFunction( found ) ) {
            response = found.apply(context, passedArguments);
          }
          else if(found !== undefined) {
            response = found;
          }
          if($.isArray(returnedValue)) {
            returnedValue.push(response);
          }
          else if(returnedValue !== undefined) {
            returnedValue = [returnedValue, response];
          }
          else if(response !== undefined) {
            returnedValue = response;
          }
          return found;
        }
      };

      if(methodInvoked) {
        if(instance === undefined) {
          module.initialize();
        }
        module.invoke(query);
      }
      else {
        if(instance !== undefined) {
          module.destroy();
        }
        module.initialize();
      }
    })
  ;

  return (returnedValue !== undefined)
    ? returnedValue
    : this
  ;
};

$.fn.dropdown.settings = {

  name        : 'Dropdown',
  namespace   : 'dropdown',

  debug       : false,
  verbose     : true,
  performance : true,

  on          : 'click',
  action      : 'activate',

  delay: {
    show  : 200,
    hide  : 300,
    touch : 50
  },

  transition : 'slide down',
  duration   : 250,

  onChange : function(value, text){},
  onShow   : function(){},
  onHide   : function(){},

  error   : {
    action    : 'You called a dropdown action that was not defined',
    method    : 'The method you called is not defined.',
    transition : 'The requested transition was not found'
  },

  metadata: {
    defaultText  : 'defaultText',
    defaultValue : 'defaultValue',
    text         : 'text',
    value        : 'value'
  },

  selector : {
    menu  : '.menu',
    item  : '.menu > .item',
    text  : '> .text',
    input : '> input[type="hidden"]'
  },

  className : {
    active      : 'active',
    placeholder : 'default',
    disabled    : 'disabled',
    visible     : 'visible',
    selection   : 'selection'
  }

};

// Adds easing
$.extend( $.easing, {
  easeOutQuad: function (x, t, b, c, d) {
    return -c *(t/=d)*(t-2) + b;
  },
});


})( jQuery, window , document );
/*
 * # Semantic - Modal
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Copyright 2013 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */

;(function ( $, window, document, undefined ) {

$.fn.modal = function(parameters) {
  var
    $allModules = $(this),
    $window     = $(window),
    $document   = $(document),
    $body       = $('body'),

    time            = new Date().getTime(),
    performance     = [],

    query           = arguments[0],
    methodInvoked   = (typeof query == 'string'),
    queryArguments  = [].slice.call(arguments, 1),

    requestAnimationFrame = window.requestAnimationFrame
      || window.mozRequestAnimationFrame
      || window.webkitRequestAnimationFrame
      || window.msRequestAnimationFrame
      || function(callback) { setTimeout(callback, 0); },

    returnedValue
  ;


  $allModules
    .each(function() {
      var
        settings    = ( $.isPlainObject(parameters) )
          ? $.extend(true, {}, $.fn.modal.settings, parameters)
          : $.extend({}, $.fn.modal.settings),

        selector        = settings.selector,
        className       = settings.className,
        namespace       = settings.namespace,
        error           = settings.error,

        eventNamespace  = '.' + namespace,
        moduleNamespace = 'module-' + namespace,
        moduleSelector  = $allModules.selector || '',

        $module      = $(this),
        $context     = $(settings.context),
        $close       = $module.find(selector.close),

        $allModals,
        $otherModals,
        $focusedElement,
        $dimmable,
        $dimmer,

        element      = this,
        instance     = $module.data(moduleNamespace),
        module
      ;

      module  = {

        initialize: function() {
          module.verbose('Initializing dimmer', $context);

          if($.fn.dimmer === undefined) {
            module.error(error.dimmer);
            return;
          }
          $dimmable = $context
            .dimmer({
              closable : false,
              useCSS   : true,
              duration : {
                show     : settings.duration * 0.9,
                hide     : settings.duration * 1.1
              }
            })
          ;

          if(settings.detachable) {
            $dimmable.dimmer('add content', $module);
          }

          $dimmer = $dimmable
            .dimmer('get dimmer')
          ;

          $otherModals = $module.siblings(selector.modal);
          $allModals   = $otherModals.add($module);

          module.verbose('Attaching close events', $close);
          $close
            .on('click' + eventNamespace, module.event.close)
          ;
          $window
            .on('resize' + eventNamespace, module.event.resize)
          ;
          module.instantiate();
        },

        instantiate: function() {
          module.verbose('Storing instance of modal');
          instance = module;
          $module
            .data(moduleNamespace, instance)
          ;
        },

        destroy: function() {
          module.verbose('Destroying previous modal');
          $module
            .removeData(moduleNamespace)
            .off(eventNamespace)
          ;
          $close
            .off(eventNamespace)
          ;
          $context
            .dimmer('destroy')
          ;
        },

        refresh: function() {
          module.remove.scrolling();
          module.cacheSizes();
          module.set.screenHeight();
          module.set.type();
          module.set.position();
        },

        attachEvents: function(selector, event) {
          var
            $toggle = $(selector)
          ;
          event = $.isFunction(module[event])
            ? module[event]
            : module.toggle
          ;
          if($toggle.size() > 0) {
            module.debug('Attaching modal events to element', selector, event);
            $toggle
              .off(eventNamespace)
              .on('click' + eventNamespace, event)
            ;
          }
          else {
            module.error(error.notFound);
          }
        },

        event: {
          close: function() {
            module.verbose('Closing element pressed');
            if( $(this).is(selector.approve) ) {
              if($.proxy(settings.onApprove, element)() !== false) {
                module.hide();
              }
              else {
                module.verbose('Approve callback returned false cancelling hide');
              }
            }
            else if( $(this).is(selector.deny) ) {
              if($.proxy(settings.onDeny, element)() !== false) {
                module.hide();
              }
              else {
                module.verbose('Deny callback returned false cancelling hide');
              }
            }
            else {
              module.hide();
            }
          },
          click: function(event) {
            if( $(event.target).closest(selector.modal).size() === 0 ) {
              module.debug('Dimmer clicked, hiding all modals');
              if(settings.allowMultiple) {
                module.hide();
              }
              else {
                module.hideAll();
              }
              event.stopImmediatePropagation();
            }
          },
          debounce: function(method, delay) {
            clearTimeout(module.timer);
            module.timer = setTimeout(method, delay);
          },
          keyboard: function(event) {
            var
              keyCode   = event.which,
              escapeKey = 27
            ;
            if(keyCode == escapeKey) {
              if(settings.closable) {
                module.debug('Escape key pressed hiding modal');
                module.hide();
              }
              else {
                module.debug('Escape key pressed, but closable is set to false');
              }
              event.preventDefault();
            }
          },
          resize: function() {
            if( $dimmable.dimmer('is active') ) {
              requestAnimationFrame(module.refresh);
            }
          }
        },

        toggle: function() {
          if( module.is.active() ) {
            module.hide();
          }
          else {
            module.show();
          }
        },

        show: function(callback) {
          callback = $.isFunction(callback)
            ? callback
            : function(){}
          ;
          module.showDimmer();
          module.showModal(callback);
        },

        showModal: function(callback) {
          callback = $.isFunction(callback)
            ? callback
            : function(){}
          ;
          if( !module.is.active() ) {
            module.cacheSizes();
            module.set.position();
            module.set.screenHeight();
            module.set.type();

            if( $otherModals.filter(':visible').size() > 0 && !settings.allowMultiple) {
              module.debug('Other modals visible, queueing show animation');
              module.hideOthers(module.showModal);
            }
            else {
              $.proxy(settings.onShow, element)();
              if(settings.transition && $.fn.transition !== undefined && $module.transition('is supported')) {
                module.debug('Showing modal with css animations');
                $module
                  .transition(settings.transition + ' in', settings.duration, function() {
                    $.proxy(settings.onVisible, element)();
                    module.set.active();
                    callback();
                  })
                ;
              }
              else {
                module.debug('Showing modal with javascript');
                $module
                  .fadeIn(settings.duration, settings.easing, function() {
                    $.proxy(settings.onVisible, element)();
                    module.set.active();
                    callback();
                  })
                ;
              }
            }
          }
          else {
            module.debug('Modal is already visible');
          }
        },

        showDimmer: function() {
          if( !$dimmable.dimmer('is active') ) {
            module.debug('Showing dimmer');
            $dimmable.dimmer('show');
          }
          else {
            module.debug('Dimmer already visible');
          }
        },

        hide: function(callback) {
          callback = $.isFunction(callback)
            ? callback
            : function(){}
          ;
          if($allModals.filter(':visible').size() <= 1) {
            module.hideDimmer();
          }
          module.hideModal(callback);
        },

        hideDimmer: function() {
          if( !module.is.active() ) {
            module.debug('Dimmer is not visible cannot hide');
            return;
          }
          module.debug('Hiding dimmer');
          if(settings.closable) {
            $dimmer
              .off('click' + eventNamespace)
            ;
          }
          $dimmable.dimmer('hide', function() {
            if(settings.transition && $.fn.transition !== undefined && $module.transition('is supported')) {
              $module
                .transition('reset')
              ;
              module.remove.screenHeight();
            }
            module.remove.active();
          });
        },

        hideModal: function(callback) {
          callback = $.isFunction(callback)
            ? callback
            : function(){}
          ;
          if( !module.is.active() ) {
            module.debug('Cannot hide modal it is not active');
            return;
          }
          module.debug('Hiding modal');
          module.remove.keyboardShortcuts();
          $.proxy(settings.onHide, element)();
          if(settings.transition && $.fn.transition !== undefined && $module.transition('is supported')) {
            $module
              .transition(settings.transition + ' out', settings.duration, function() {
                $.proxy(settings.onHidden, element)();
                module.remove.active();
                module.restore.focus();
                callback();
              })
            ;
          }
          else {
            $module
              .fadeOut(settings.duration, settings.easing, function() {
                $.proxy(settings.onHidden, element)();
                module.remove.active();
                module.restore.focus();
                callback();
              })
            ;
          }
        },

        hideAll: function(callback) {
          callback = $.isFunction(callback)
            ? callback
            : function(){}
          ;
          if( $allModals.is(':visible') ) {
            module.debug('Hiding all visible modals');
            module.hideDimmer();
            $allModals
              .filter(':visible')
                .modal('hide modal', callback)
            ;
          }
        },

        hideOthers: function(callback) {
          callback = $.isFunction(callback)
            ? callback
            : function(){}
          ;
          if( $otherModals.is(':visible') ) {
            module.debug('Hiding other modals');
            $otherModals
              .filter(':visible')
                .modal('hide modal', callback)
            ;
          }
        },

        add: {
          keyboardShortcuts: function() {
            module.verbose('Adding keyboard shortcuts');
            $document
              .on('keyup' + eventNamespace, module.event.keyboard)
            ;
          }
        },

        save: {
          focus: function() {
            $focusedElement = $(document.activeElement).blur();
          }
        },

        restore: {
          focus: function() {
            if($focusedElement && $focusedElement.size() > 0) {
              $focusedElement.focus();
            }
          }
        },

        remove: {
          active: function() {
            $module.removeClass(className.active);
          },
          screenHeight: function() {
            if(module.cache.height > module.cache.pageHeight) {
              module.debug('Removing page height');
              $body
                .css('height', '')
              ;
            }
          },
          keyboardShortcuts: function() {
            module.verbose('Removing keyboard shortcuts');
            $document
              .off('keyup' + eventNamespace)
            ;
          },
          scrolling: function() {
            $dimmable.removeClass(className.scrolling);
            $module.removeClass(className.scrolling);
          }
        },

        cacheSizes: function() {
          module.cache = {
            pageHeight    : $body.outerHeight(),
            height        : $module.outerHeight() + settings.offset,
            contextHeight : (settings.context == 'body')
              ? $(window).height()
              : $dimmable.height()
          };
          module.debug('Caching modal and container sizes', module.cache);
        },

        can: {
          fit: function() {
            return (module.cache.height < module.cache.contextHeight);
          }
        },

        is: {
          active: function() {
            return $module.hasClass(className.active);
          },
          modernBrowser: function() {
            // appName for IE11 reports 'Netscape' can no longer use
            return !(window.ActiveXObject || "ActiveXObject" in window);
          }
        },

        set: {
          screenHeight: function() {
            if(module.cache.height > module.cache.pageHeight) {
              module.debug('Modal is taller than page content, resizing page height');
              $body
                .css('height', module.cache.height + settings.padding)
              ;
            }
          },
          active: function() {
            module.add.keyboardShortcuts();
            module.save.focus();
            $module
              .addClass(className.active)
            ;
            if(settings.closable) {
              $dimmer
                .off('click' + eventNamespace)
                .on('click' + eventNamespace, module.event.click)
              ;
            }
          },
          scrolling: function() {
            $dimmable.addClass(className.scrolling);
            $module.addClass(className.scrolling);
          },
          type: function() {
            if(module.can.fit()) {
              module.verbose('Modal fits on screen');
              module.remove.scrolling();
            }
            else {
              module.verbose('Modal cannot fit on screen setting to scrolling');
              module.set.scrolling();
            }
          },
          position: function() {
            module.verbose('Centering modal on page', module.cache);
            if(module.can.fit()) {
              $module
                .css({
                  top: '',
                  marginTop: -(module.cache.height / 2)
                })
              ;
            }
            else {
              $module
                .css({
                  marginTop : '1em',
                  top       : $document.scrollTop()
                })
              ;
            }
          }
        },

        setting: function(name, value) {
          if( $.isPlainObject(name) ) {
            $.extend(true, settings, name);
          }
          else if(value !== undefined) {
            settings[name] = value;
          }
          else {
            return settings[name];
          }
        },
        internal: function(name, value) {
          if( $.isPlainObject(name) ) {
            $.extend(true, module, name);
          }
          else if(value !== undefined) {
            module[name] = value;
          }
          else {
            return module[name];
          }
        },
        debug: function() {
          if(settings.debug) {
            if(settings.performance) {
              module.performance.log(arguments);
            }
            else {
              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');
              module.debug.apply(console, arguments);
            }
          }
        },
        verbose: function() {
          if(settings.verbose && settings.debug) {
            if(settings.performance) {
              module.performance.log(arguments);
            }
            else {
              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');
              module.verbose.apply(console, arguments);
            }
          }
        },
        error: function() {
          module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');
          module.error.apply(console, arguments);
        },
        performance: {
          log: function(message) {
            var
              currentTime,
              executionTime,
              previousTime
            ;
            if(settings.performance) {
              currentTime   = new Date().getTime();
              previousTime  = time || currentTime;
              executionTime = currentTime - previousTime;
              time          = currentTime;
              performance.push({
                'Element'        : element,
                'Name'           : message[0],
                'Arguments'      : [].slice.call(message, 1) || '',
                'Execution Time' : executionTime
              });
            }
            clearTimeout(module.performance.timer);
            module.performance.timer = setTimeout(module.performance.display, 100);
          },
          display: function() {
            var
              title = settings.name + ':',
              totalTime = 0
            ;
            time = false;
            clearTimeout(module.performance.timer);
            $.each(performance, function(index, data) {
              totalTime += data['Execution Time'];
            });
            title += ' ' + totalTime + 'ms';
            if(moduleSelector) {
              title += ' \'' + moduleSelector + '\'';
            }
            if( (console.group !== undefined || console.table !== undefined) && performance.length > 0) {
              console.groupCollapsed(title);
              if(console.table) {
                console.table(performance);
              }
              else {
                $.each(performance, function(index, data) {
                  console.log(data['Name'] + ': ' + data['Execution Time']+'ms');
                });
              }
              console.groupEnd();
            }
            performance = [];
          }
        },
        invoke: function(query, passedArguments, context) {
          var
            object = instance,
            maxDepth,
            found,
            response
          ;
          passedArguments = passedArguments || queryArguments;
          context         = element         || context;
          if(typeof query == 'string' && object !== undefined) {
            query    = query.split(/[\. ]/);
            maxDepth = query.length - 1;
            $.each(query, function(depth, value) {
              var camelCaseValue = (depth != maxDepth)
                ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1)
                : query
              ;
              if( $.isPlainObject( object[camelCaseValue] ) && (depth != maxDepth) ) {
                object = object[camelCaseValue];
              }
              else if( object[camelCaseValue] !== undefined ) {
                found = object[camelCaseValue];
                return false;
              }
              else if( $.isPlainObject( object[value] ) && (depth != maxDepth) ) {
                object = object[value];
              }
              else if( object[value] !== undefined ) {
                found = object[value];
                return false;
              }
              else {
                return false;
              }
            });
          }
          if ( $.isFunction( found ) ) {
            response = found.apply(context, passedArguments);
          }
          else if(found !== undefined) {
            response = found;
          }
          if($.isArray(returnedValue)) {
            returnedValue.push(response);
          }
          else if(returnedValue !== undefined) {
            returnedValue = [returnedValue, response];
          }
          else if(response !== undefined) {
            returnedValue = response;
          }
          return found;
        }
      };

      if(methodInvoked) {
        if(instance === undefined) {
          module.initialize();
        }
        module.invoke(query);
      }
      else {
        if(instance !== undefined) {
          module.destroy();
        }
        module.initialize();
      }
    })
  ;

  return (returnedValue !== undefined)
    ? returnedValue
    : this
  ;
};

$.fn.modal.settings = {

  name          : 'Modal',
  namespace     : 'modal',

  debug         : false,
  verbose       : true,
  performance   : true,

  allowMultiple : true,
  detachable    : true,
  closable      : true,
  context       : 'body',

  duration      : 500,
  easing        : 'easeOutExpo',
  offset        : 0,
  transition    : 'scale',

  padding       : 30,

  onShow        : function(){},
  onHide        : function(){},

  onVisible     : function(){},
  onHidden      : function(){},

  onApprove     : function(){ return true; },
  onDeny        : function(){ return true; },

  selector    : {
    close    : '.close, .actions .button',
    approve  : '.actions .positive, .actions .approve, .actions .ok',
    deny     : '.actions .negative, .actions .deny, .actions .cancel',
    modal    : '.ui.modal'
  },
  error : {
    dimmer    : 'UI Dimmer, a required component is not included in this page',
    method    : 'The method you called is not defined.'
  },
  className : {
    active    : 'active',
    scrolling : 'scrolling'
  }
};


})( jQuery, window , document );
/*
 * # Semantic - Nag
 * http://github.com/jlukic/semantic-ui/
 *
 *
 * Copyright 2013 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */

;(function ($, window, document, undefined) {

$.fn.nag = function(parameters) {
  var
    $allModules     = $(this),
    moduleSelector  = $allModules.selector || '',

    time            = new Date().getTime(),
    performance     = [],

    query           = arguments[0],
    methodInvoked   = (typeof query == 'string'),
    queryArguments  = [].slice.call(arguments, 1),
    returnedValue
  ;
  $(this)
    .each(function() {
      var
        settings        = $.extend(true, {}, $.fn.nag.settings, parameters),

        className       = settings.className,
        selector        = settings.selector,
        error           = settings.error,
        namespace       = settings.namespace,

        eventNamespace  = '.' + namespace,
        moduleNamespace = namespace + '-module',

        $module         = $(this),

        $close          = $module.find(selector.close),
        $context        = $(settings.context),


        element         = this,
        instance        = $module.data(moduleNamespace),

        moduleOffset,
        moduleHeight,

        contextWidth,
        contextHeight,
        contextOffset,

        yOffset,
        yPosition,

        timer,
        module,

        requestAnimationFrame = window.requestAnimationFrame
          || window.mozRequestAnimationFrame
          || window.webkitRequestAnimationFrame
          || window.msRequestAnimationFrame
          || function(callback) { setTimeout(callback, 0); }
      ;
      module = {

        initialize: function() {
          module.verbose('Initializing element');
          // calculate module offset once
          moduleOffset  = $module.offset();
          moduleHeight  = $module.outerHeight();
          contextWidth  = $context.outerWidth();
          contextHeight = $context.outerHeight();
          contextOffset = $context.offset();

          $module
            .data(moduleNamespace, module)
          ;
          $close
            .on('click' + eventNamespace, module.dismiss)
          ;
          // lets avoid javascript if we dont need to reposition
          if(settings.context == window && settings.position == 'fixed') {
            $module
              .addClass(className.fixed)
            ;
          }
          if(settings.sticky) {
            module.verbose('Adding scroll events');
            // retrigger on scroll for absolute
            if(settings.position == 'absolute') {
              $context
                .on('scroll' + eventNamespace, module.event.scroll)
                .on('resize' + eventNamespace, module.event.scroll)
              ;
            }
            // fixed is always relative to window
            else {
              $(window)
                .on('scroll' + eventNamespace, module.event.scroll)
                .on('resize' + eventNamespace, module.event.scroll)
              ;
            }
            // fire once to position on init
            $.proxy(module.event.scroll, this)();
          }

          if(settings.displayTime > 0) {
            setTimeout(module.hide, settings.displayTime);
          }
          if(module.should.show()) {
            if( !$module.is(':visible') ) {
              module.show();
            }
          }
          else {
            module.hide();
          }
        },

        destroy: function() {
          module.verbose('Destroying instance');
          $module
            .removeData(moduleNamespace)
            .off(eventNamespace)
          ;
          if(settings.sticky) {
            $context
              .off(eventNamespace)
            ;
          }
        },

        refresh: function() {
          module.debug('Refreshing cached calculations');
          moduleOffset  = $module.offset();
          moduleHeight  = $module.outerHeight();
          contextWidth  = $context.outerWidth();
          contextHeight = $context.outerHeight();
          contextOffset = $context.offset();
        },

        show: function() {
          module.debug('Showing nag', settings.animation.show);
          if(settings.animation.show == 'fade') {
            $module
              .fadeIn(settings.duration, settings.easing)
            ;
          }
          else {
            $module
              .slideDown(settings.duration, settings.easing)
            ;
          }
        },

        hide: function() {
          module.debug('Showing nag', settings.animation.hide);
          if(settings.animation.show == 'fade') {
            $module
              .fadeIn(settings.duration, settings.easing)
            ;
          }
          else {
            $module
              .slideUp(settings.duration, settings.easing)
            ;
          }
        },

        onHide: function() {
          module.debug('Removing nag', settings.animation.hide);
          $module.remove();
          if (settings.onHide) {
            settings.onHide();
          }
        },

        stick: function() {
          module.refresh();

          if(settings.position == 'fixed') {
            var
              windowScroll = $(window).prop('pageYOffset') || $(window).scrollTop(),
              fixedOffset = ( $module.hasClass(className.bottom) )
                ? contextOffset.top + (contextHeight - moduleHeight) - windowScroll
                : contextOffset.top - windowScroll
            ;
            $module
              .css({
                position : 'fixed',
                top      : fixedOffset,
                left     : contextOffset.left,
                width    : contextWidth - settings.scrollBarWidth
              })
            ;
          }
          else {
            $module
              .css({
                top : yPosition
              })
            ;
          }
        },
        unStick: function() {
          $module
            .css({
              top : ''
            })
          ;
        },
        dismiss: function(event) {
          if(settings.storageMethod) {
            module.storage.set(settings.storedKey, settings.storedValue);
          }
          module.hide();
          event.stopImmediatePropagation();
          event.preventDefault();
        },

        should: {
          show: function() {
            if(settings.persist) {
              module.debug('Persistent nag is set, can show nag');
              return true;
            }
            if(module.storage.get(settings.storedKey) != settings.storedValue) {
              module.debug('Stored value is not set, can show nag', module.storage.get(settings.storedKey));
              return true;
            }
            module.debug('Stored value is set, cannot show nag', module.storage.get(settings.storedKey));
            return false;
          },
          stick: function() {
            yOffset   = $context.prop('pageYOffset') || $context.scrollTop();
            yPosition = ( $module.hasClass(className.bottom) )
              ? (contextHeight - $module.outerHeight() ) + yOffset
              : yOffset
            ;
            // absolute position calculated when y offset met
            if(yPosition > moduleOffset.top) {
              return true;
            }
            else if(settings.position == 'fixed') {
              return true;
            }
            return false;
          }
        },

        storage: {

          set: function(key, value) {
            module.debug('Setting stored value', key, value, settings.storageMethod);
            if(settings.storageMethod == 'local' && window.store !== undefined) {
              window.store.set(key, value);
            }
            // store by cookie
            else if($.cookie !== undefined) {
              $.cookie(key, value);
            }
            else {
              module.error(error.noStorage);
            }
          },
          get: function(key) {
            module.debug('Getting stored value', key, settings.storageMethod);
            if(settings.storageMethod == 'local' && window.store !== undefined) {
              return window.store.get(key);
            }
            // get by cookie
            else if($.cookie !== undefined) {
              return $.cookie(key);
            }
            else {
              module.error(error.noStorage);
            }
          }

        },

        event: {
          scroll: function() {
            if(timer !== undefined) {
              clearTimeout(timer);
            }
            timer = setTimeout(function() {
              if(module.should.stick() ) {
                requestAnimationFrame(module.stick);
              }
              else {
                module.unStick();
              }
            }, settings.lag);
          }
        },
        setting: function(name, value) {
          if( $.isPlainObject(name) ) {
            $.extend(true, settings, name);
          }
          else if(value !== undefined) {
            settings[name] = value;
          }
          else {
            return settings[name];
          }
        },
        internal: function(name, value) {
          module.debug('Changing internal', name, value);
          if(value !== undefined) {
            if( $.isPlainObject(name) ) {
              $.extend(true, module, name);
            }
            else {
              module[name] = value;
            }
          }
          else {
            return module[name];
          }
        },
        debug: function() {
          if(settings.debug) {
            if(settings.performance) {
              module.performance.log(arguments);
            }
            else {
              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');
              module.debug.apply(console, arguments);
            }
          }
        },
        verbose: function() {
          if(settings.verbose && settings.debug) {
            if(settings.performance) {
              module.performance.log(arguments);
            }
            else {
              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');
              module.verbose.apply(console, arguments);
            }
          }
        },
        error: function() {
          module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');
          module.error.apply(console, arguments);
        },
        performance: {
          log: function(message) {
            var
              currentTime,
              executionTime,
              previousTime
            ;
            if(settings.performance) {
              currentTime   = new Date().getTime();
              previousTime  = time || currentTime;
              executionTime = currentTime - previousTime;
              time          = currentTime;
              performance.push({
                'Element'        : element,
                'Name'           : message[0],
                'Arguments'      : [].slice.call(message, 1) || '',
                'Execution Time' : executionTime
              });
            }
            clearTimeout(module.performance.timer);
            module.performance.timer = setTimeout(module.performance.display, 100);
          },
          display: function() {
            var
              title = settings.name + ':',
              totalTime = 0
            ;
            time = false;
            clearTimeout(module.performance.timer);
            $.each(performance, function(index, data) {
              totalTime += data['Execution Time'];
            });
            title += ' ' + totalTime + 'ms';
            if(moduleSelector) {
              title += ' \'' + moduleSelector + '\'';
            }
            if($allModules.size() > 1) {
              title += ' ' + '(' + $allModules.size() + ')';
            }
            if( (console.group !== undefined || console.table !== undefined) && performance.length > 0) {
              console.groupCollapsed(title);
              if(console.table) {
                console.table(performance);
              }
              else {
                $.each(performance, function(index, data) {
                  console.log(data['Name'] + ': ' + data['Execution Time']+'ms');
                });
              }
              console.groupEnd();
            }
            performance = [];
          }
        },
        invoke: function(query, passedArguments, context) {
          var
            object = instance,
            maxDepth,
            found,
            response
          ;
          passedArguments = passedArguments || queryArguments;
          context         = element         || context;
          if(typeof query == 'string' && object !== undefined) {
            query    = query.split(/[\. ]/);
            maxDepth = query.length - 1;
            $.each(query, function(depth, value) {
              var camelCaseValue = (depth != maxDepth)
                ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1)
                : query
              ;
              if( $.isPlainObject( object[camelCaseValue] ) && (depth != maxDepth) ) {
                object = object[camelCaseValue];
              }
              else if( object[camelCaseValue] !== undefined ) {
                found = object[camelCaseValue];
                return false;
              }
              else if( $.isPlainObject( object[value] ) && (depth != maxDepth) ) {
                object = object[value];
              }
              else if( object[value] !== undefined ) {
                found = object[value];
                return false;
              }
              else {
                return false;
              }
            });
          }
          if ( $.isFunction( found ) ) {
            response = found.apply(context, passedArguments);
          }
          else if(found !== undefined) {
            response = found;
          }
          if($.isArray(returnedValue)) {
            returnedValue.push(response);
          }
          else if(returnedValue !== undefined) {
            returnedValue = [returnedValue, response];
          }
          else if(response !== undefined) {
            returnedValue = response;
          }
          return found;
        }
      };
      if(methodInvoked) {
        if(instance === undefined) {
          module.initialize();
        }
        module.invoke(query);
      }
      else {
        if(instance !== undefined) {
          module.destroy();
        }
        module.initialize();
      }

    })
  ;
  return (returnedValue !== undefined)
    ? returnedValue
    : this
  ;
};

$.fn.nag.settings = {

  name        : 'Nag',

  debug       : false,
  verbose     : true,
  performance : true,

  namespace   : 'Nag',

  // allows cookie to be overriden
  persist     : false,

  // set to zero to manually dismiss, otherwise hides on its own
  displayTime : 0,

  animation   : {
    show: 'slide',
    hide: 'slide'
  },

  // method of stickyness
  position       : 'fixed',
  scrollBarWidth : 18,

  // type of storage to use
  storageMethod  : 'cookie',

  // value to store in dismissed localstorage/cookie
  storedKey      : 'nag',
  storedValue    : 'dismiss',

  // need to calculate stickyness on scroll
  sticky         : false,

  // how often to check scroll event
  lag            : 0,

  // context for scroll event
  context        : window,

  error: {
    noStorage  : 'Neither $.cookie or store is defined. A storage solution is required for storing state',
    method    : 'The method you called is not defined.'
  },

  className     : {
    bottom      : 'bottom',
    fixed       : 'fixed'
  },

  selector      : {
    close: '.icon.close'
  },

  speed         : 500,
  easing        : 'easeOutQuad',

  onHide: function() {}

};

})( jQuery, window , document );

/*
 * # Semantic - Popup
 * http://github.com/jlukic/semantic-ui/
 *
 *
 * Copyright 2013 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */

;(function ($, window, document, undefined) {

$.fn.popup = function(parameters) {
  var
    $allModules     = $(this),
    $document       = $(document),

    moduleSelector  = $allModules.selector || '',

    time            = new Date().getTime(),
    performance     = [],

    query           = arguments[0],
    methodInvoked   = (typeof query == 'string'),
    queryArguments  = [].slice.call(arguments, 1),

    returnedValue
  ;
  $allModules
    .each(function() {
      var
        settings        = ( $.isPlainObject(parameters) )
          ? $.extend(true, {}, $.fn.popup.settings, parameters)
          : $.extend({}, $.fn.popup.settings),

        selector        = settings.selector,
        className       = settings.className,
        error           = settings.error,
        metadata        = settings.metadata,
        namespace       = settings.namespace,

        eventNamespace  = '.' + settings.namespace,
        moduleNamespace = 'module-' + namespace,

        $module         = $(this),
        $context        = $(settings.context),
        $target         = (settings.target)
          ? $(settings.target)
          : $module,

        $window         = $(window),

        $offsetParent   = (settings.inline)
          ? $target.offsetParent()
          : $window,
        $popup          = (settings.inline)
          ? $target.next(settings.selector.popup)
          : $window.children(settings.selector.popup).last(),

        searchDepth     = 0,

        element         = this,
        instance        = $module.data(moduleNamespace),
        module
      ;

      module = {

        // binds events
        initialize: function() {
          module.debug('Initializing module', $module);
          if(settings.on == 'click') {
            $module
              .on('click', module.toggle)
            ;
          }
          else {
            $module
              .on(module.get.startEvent() + eventNamespace, module.event.start)
              .on(module.get.endEvent() + eventNamespace, module.event.end)
            ;
          }
          if(settings.target) {
            module.debug('Target set to element', $target);
          }
          $window
            .on('resize' + eventNamespace, module.event.resize)
          ;
          module.instantiate();
        },

        instantiate: function() {
          module.verbose('Storing instance of module', module);
          instance = module;
          $module
            .data(moduleNamespace, instance)
          ;
        },

        refresh: function() {
          if(settings.inline) {
            $popup = $target.next(selector.popup);
            $offsetParent = $target.offsetParent();
          }
          else {
            $popup = $window.children(selector.popup).last();
          }
        },

        destroy: function() {
          module.debug('Destroying previous module');
          $window
            .off(eventNamespace)
          ;
          $popup
            .remove()
          ;
          $module
            .off(eventNamespace)
            .removeData(moduleNamespace)
          ;
        },

        event: {
          start:  function(event) {
            module.timer = setTimeout(function() {
              if( module.is.hidden() ) {
                module.show();
              }
            }, settings.delay);
          },
          end:  function() {
            clearTimeout(module.timer);
            if( module.is.visible() ) {
              module.hide();
            }
          },
          resize: function() {
            if( module.is.visible() ) {
              module.set.position();
            }
          }
        },

        // generates popup html from metadata
        create: function() {
          module.debug('Creating pop-up html');
          var
            html      = $module.data(metadata.html)      || settings.html,
            variation = $module.data(metadata.variation) || settings.variation,
            title     = $module.data(metadata.title)     || settings.title,
            content   = $module.data(metadata.content)   || $module.attr('title') || settings.content
          ;
          if(html || content || title) {
            if(!html) {
              html = settings.template({
                title   : title,
                content : content
              });
            }
            $popup = $('<div/>')
              .addClass(className.popup)
              .addClass(variation)
              .html(html)
            ;
            if(settings.inline) {
              module.verbose('Inserting popup element inline', $popup);
              $popup
                .data(moduleNamespace, instance)
                .insertAfter($module)
              ;
            }
            else {
              module.verbose('Appending popup element to body', $popup);
              $popup
                .data(moduleNamespace, instance)
                .appendTo( $context )
              ;
            }
            $.proxy(settings.onCreate, $popup)();
          }
          else {
            module.error(error.content);
          }
        },

        // determines popup state
        toggle: function() {
          module.debug('Toggling pop-up');
          if( module.is.hidden() ) {
            module.debug('Popup is hidden, showing pop-up');
            module.unbind.close();
            module.hideAll();
            module.show();
          }
          else {
            module.debug('Popup is visible, hiding pop-up');
            module.hide();
          }
        },

        show: function(callback) {
          callback = callback || function(){};
          module.debug('Showing pop-up', settings.transition);
          if(!settings.preserve) {
            module.refresh();
          }
          if( !module.exists() ) {
            module.create();
          }
          module.save.conditions();
          module.set.position();
          module.animate.show(callback);
        },


        hide: function(callback) {
          callback = callback || function(){};
          $module
            .removeClass(className.visible)
          ;
          module.restore.conditions();
          module.unbind.close();
          if( module.is.visible() ) {
            module.animate.hide(callback);
          }
        },

        hideAll: function() {
          $(selector.popup)
            .filter(':visible')
              .popup('hide')
          ;
        },

        hideGracefully: function(event) {
          // don't close on clicks inside popup
          if(event && $(event.target).closest(selector.popup).size() === 0) {
            module.debug('Click occurred outside popup hiding popup');
            module.hide();
          }
          else {
            module.debug('Click was inside popup, keeping popup open');
          }
        },

        exists: function() {
          if(settings.inline) {
            return ( $popup.size() !== 0 );
          }
          else {
            return ( $popup.parent($context).size() );
          }
        },

        remove: function() {
          module.debug('Removing popup');
          $popup
            .remove()
          ;
        },

        save: {
          conditions: function() {
            module.cache = {
              title: $module.attr('title')
            };
            if (module.cache.title) {
              $module.removeAttr('title');
            }
            module.verbose('Saving original attributes', module.cache.title);
          }
        },
        restore: {
          conditions: function() {
            if(module.cache && module.cache.title) {
              $module.attr('title', module.cache.title);
              module.verbose('Restoring original attributes', module.cache.title);
            }
            return true;
          }
        },
        animate: {
          show: function(callback) {
            callback = callback || function(){};
            $module
              .addClass(className.visible)
            ;
            if(settings.transition && $.fn.transition !== undefined && $module.transition('is supported')) {
              $popup
                .transition(settings.transition + ' in', settings.duration, function() {
                  module.bind.close();
                  $.proxy(callback, element)();
                })
              ;
            }
            else {
              $popup
                .stop()
                .fadeIn(settings.duration, settings.easing, function() {
                  module.bind.close();
                  $.proxy(callback, element)();
                })
              ;
            }
            $.proxy(settings.onShow, element)();
          },
          hide: function(callback) {
            callback = callback || function(){};
            module.debug('Hiding pop-up');
            if(settings.transition && $.fn.transition !== undefined && $module.transition('is supported')) {
              $popup
                .transition(settings.transition + ' out', settings.duration, function() {
                  module.reset();
                  callback();
                })
              ;
            }
            else {
              $popup
                .stop()
                .fadeOut(settings.duration, settings.easing, function() {
                  module.reset();
                  callback();
                })
              ;
            }
            $.proxy(settings.onHide, element)();
          }
        },

        get: {
          startEvent: function() {
            if(settings.on == 'hover') {
              return 'mouseenter';
            }
            else if(settings.on == 'focus') {
              return 'focus';
            }
          },
          endEvent: function() {
            if(settings.on == 'hover') {
              return 'mouseleave';
            }
            else if(settings.on == 'focus') {
              return 'blur';
            }
          },
          offstagePosition: function() {
            var
              boundary  = {
                top    : $(window).scrollTop(),
                bottom : $(window).scrollTop() + $(window).height(),
                left   : 0,
                right  : $(window).width()
              },
              popup     = {
                width    : $popup.width(),
                height   : $popup.outerHeight(),
                position : $popup.offset()
              },
              offstage  = {},
              offstagePositions = []
            ;
            if(popup.position) {
              offstage = {
                top    : (popup.position.top < boundary.top),
                bottom : (popup.position.top + popup.height > boundary.bottom),
                right  : (popup.position.left + popup.width > boundary.right),
                left   : (popup.position.left < boundary.left)
              };
            }
            module.verbose('Checking if outside viewable area', popup.position);
            // return only boundaries that have been surpassed
            $.each(offstage, function(direction, isOffstage) {
              if(isOffstage) {
                offstagePositions.push(direction);
              }
            });
            return (offstagePositions.length > 0)
              ? offstagePositions.join(' ')
              : false
            ;
          },
          nextPosition: function(position) {
            switch(position) {
              case 'top left':
                position = 'bottom left';
              break;
              case 'bottom left':
                position = 'top right';
              break;
              case 'top right':
                position = 'bottom right';
              break;
              case 'bottom right':
                position = 'top center';
              break;
              case 'top center':
                position = 'bottom center';
              break;
              case 'bottom center':
                position = 'right center';
              break;
              case 'right center':
                position = 'left center';
              break;
              case 'left center':
                position = 'top center';
              break;
            }
            return position;
          }
        },

        set: {
          position: function(position, arrowOffset) {
            var
              windowWidth  = $(window).width(),
              windowHeight = $(window).height(),

              width        = $target.outerWidth(),
              height       = $target.outerHeight(),

              popupWidth   = $popup.width(),
              popupHeight  = $popup.outerHeight(),

              parentWidth  = $offsetParent.outerWidth(),
              parentHeight = $offsetParent.outerHeight(),

              distanceAway = settings.distanceAway,

              offset       = (settings.inline)
                ? $target.position()
                : $target.offset(),

              positioning,
              offstagePosition
            ;
            position    = position    || $module.data(metadata.position)    || settings.position;
            arrowOffset = arrowOffset || $module.data(metadata.offset)      || settings.offset;
            // adjust for margin when inline
            if(settings.inline) {
              if(position == 'left center' || position == 'right center') {
                arrowOffset  += parseInt( window.getComputedStyle(element).getPropertyValue('margin-top'), 10);
                distanceAway += -parseInt( window.getComputedStyle(element).getPropertyValue('margin-left'), 10);
              }
              else {
                arrowOffset  += parseInt( window.getComputedStyle(element).getPropertyValue('margin-left'), 10);
                distanceAway += parseInt( window.getComputedStyle(element).getPropertyValue('margin-top'), 10);
              }
            }
            module.debug('Calculating offset for position', position);
            switch(position) {
              case 'top left':
                positioning = {
                  bottom :  parentHeight - offset.top + distanceAway,
                  right  :  parentWidth - offset.left - arrowOffset,
                  top    : 'auto',
                  left   : 'auto'
                };
              break;
              case 'top center':
                positioning = {
                  bottom :  parentHeight - offset.top + distanceAway,
                  left   : offset.left + (width / 2) - (popupWidth / 2) + arrowOffset,
                  top    : 'auto',
                  right  : 'auto'
                };
              break;
              case 'top right':
                positioning = {
                  top    : 'auto',
                  bottom :  parentHeight - offset.top + distanceAway,
                  left   : offset.left + width + arrowOffset,
                  right  : 'auto'
                };
              break;
              case 'left center':
                positioning = {
                  top    :  offset.top + (height / 2) - (popupHeight / 2) + arrowOffset,
                  right  : parentWidth - offset.left + distanceAway,
                  left   : 'auto',
                  bottom : 'auto'
                };
              break;
              case 'right center':
                positioning = {
                  top    :  offset.top + (height / 2) - (popupHeight / 2) + arrowOffset,
                  left   : offset.left + width + distanceAway,
                  bottom : 'auto',
                  right  : 'auto'
                };
              break;
              case 'bottom left':
                positioning = {
                  top    :  offset.top + height + distanceAway,
                  right  : parentWidth - offset.left - arrowOffset,
                  left   : 'auto',
                  bottom : 'auto'
                };
              break;
              case 'bottom center':
                positioning = {
                  top    :  offset.top + height + distanceAway,
                  left   : offset.left + (width / 2) - (popupWidth / 2) + arrowOffset,
                  bottom : 'auto',
                  right  : 'auto'
                };
              break;
              case 'bottom right':
                positioning = {
                  top    :  offset.top + height + distanceAway,
                  left   : offset.left + width + arrowOffset,
                  bottom : 'auto',
                  right  : 'auto'
                };
              break;
            }
            // tentatively place on stage
            $popup
              .css(positioning)
              .removeClass(className.position)
              .addClass(position)
              .addClass(className.loading)
            ;
            // check if is offstage
            offstagePosition = module.get.offstagePosition();

            // recursively find new positioning
            if(offstagePosition) {
              module.debug('Element is outside boundaries', offstagePosition);
              if(searchDepth < settings.maxSearchDepth) {
                position = module.get.nextPosition(position);
                searchDepth++;
                module.debug('Trying new position', position);
                return module.set.position(position);
              }
              else {
                module.error(error.recursion);
                searchDepth = 0;
                module.reset();
                $popup.removeClass(className.loading);
                return false;
              }
            }
            else {
              module.debug('Position is on stage', position);
              searchDepth = 0;
              $popup.removeClass(className.loading);
              return true;
            }
          }

        },

        bind: {
          close:function() {
            if(settings.on == 'click' && settings.closable) {
              module.verbose('Binding popup close event to document');
              $document
                .on('click' + eventNamespace, function(event) {
                  module.verbose('Pop-up clickaway intent detected');
                  $.proxy(module.hideGracefully, this)(event);
                })
              ;
            }
          }
        },

        unbind: {
          close: function() {
            if(settings.on == 'click' && settings.closable) {
              module.verbose('Removing close event from document');
              $document
                .off('click' + eventNamespace)
              ;
            }
          }
        },

        is: {
          animating: function() {
            return ( $popup.is(':animated') || $popup.hasClass(className.animating) );
          },
          visible: function() {
            return $popup.is(':visible');
          },
          hidden: function() {
            return !module.is.visible();
          }
        },

        reset: function() {
          $popup
            .attr('style', '')
            .removeAttr('style')
          ;
          if(!settings.preserve) {
            module.remove();
          }
        },

        setting: function(name, value) {
          if( $.isPlainObject(name) ) {
            $.extend(true, settings, name);
          }
          else if(value !== undefined) {
            settings[name] = value;
          }
          else {
            return settings[name];
          }
        },
        internal: function(name, value) {
          if( $.isPlainObject(name) ) {
            $.extend(true, module, name);
          }
          else if(value !== undefined) {
            module[name] = value;
          }
          else {
            return module[name];
          }
        },
        debug: function() {
          if(settings.debug) {
            if(settings.performance) {
              module.performance.log(arguments);
            }
            else {
              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');
              module.debug.apply(console, arguments);
            }
          }
        },
        verbose: function() {
          if(settings.verbose && settings.debug) {
            if(settings.performance) {
              module.performance.log(arguments);
            }
            else {
              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');
              module.verbose.apply(console, arguments);
            }
          }
        },
        error: function() {
          module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');
          module.error.apply(console, arguments);
        },
        performance: {
          log: function(message) {
            var
              currentTime,
              executionTime,
              previousTime
            ;
            if(settings.performance) {
              currentTime   = new Date().getTime();
              previousTime  = time || currentTime;
              executionTime = currentTime - previousTime;
              time          = currentTime;
              performance.push({
                'Element'        : element,
                'Name'           : message[0],
                'Arguments'      : [].slice.call(message, 1) || '',
                'Execution Time' : executionTime
              });
            }
            clearTimeout(module.performance.timer);
            module.performance.timer = setTimeout(module.performance.display, 100);
          },
          display: function() {
            var
              title = settings.name + ':',
              totalTime = 0
            ;
            time = false;
            clearTimeout(module.performance.timer);
            $.each(performance, function(index, data) {
              totalTime += data['Execution Time'];
            });
            title += ' ' + totalTime + 'ms';
            if(moduleSelector) {
              title += ' \'' + moduleSelector + '\'';
            }
            if( (console.group !== undefined || console.table !== undefined) && performance.length > 0) {
              console.groupCollapsed(title);
              if(console.table) {
                console.table(performance);
              }
              else {
                $.each(performance, function(index, data) {
                  console.log(data['Name'] + ': ' + data['Execution Time']+'ms');
                });
              }
              console.groupEnd();
            }
            performance = [];
          }
        },
        invoke: function(query, passedArguments, context) {
          var
            object = instance,
            maxDepth,
            found,
            response
          ;
          passedArguments = passedArguments || queryArguments;
          context         = element         || context;
          if(typeof query == 'string' && object !== undefined) {
            query    = query.split(/[\. ]/);
            maxDepth = query.length - 1;
            $.each(query, function(depth, value) {
              var camelCaseValue = (depth != maxDepth)
                ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1)
                : query
              ;
              if( $.isPlainObject( object[camelCaseValue] ) && (depth != maxDepth) ) {
                object = object[camelCaseValue];
              }
              else if( object[camelCaseValue] !== undefined ) {
                found = object[camelCaseValue];
                return false;
              }
              else if( $.isPlainObject( object[value] ) && (depth != maxDepth) ) {
                object = object[value];
              }
              else if( object[value] !== undefined ) {
                found = object[value];
                return false;
              }
              else {
                return false;
              }
            });
          }
          if ( $.isFunction( found ) ) {
            response = found.apply(context, passedArguments);
          }
          else if(found !== undefined) {
            response = found;
          }
          if($.isArray(returnedValue)) {
            returnedValue.push(response);
          }
          else if(returnedValue !== undefined) {
            returnedValue = [returnedValue, response];
          }
          else if(response !== undefined) {
            returnedValue = response;
          }
          return found;
        }
      };

      if(methodInvoked) {
        if(instance === undefined) {
          module.initialize();
        }
        module.invoke(query);
      }
      else {
        if(instance !== undefined) {
          module.destroy();
        }
        module.initialize();
      }
    })
  ;

  return (returnedValue !== undefined)
    ? returnedValue
    : this
  ;
};

$.fn.popup.settings = {

  name           : 'Popup',
  debug          : false,
  verbose        : true,
  performance    : true,
  namespace      : 'popup',

  onCreate       : function(){},
  onShow         : function(){},
  onHide         : function(){},

  variation      : '',
  content        : false,
  html           : false,
  title          : false,

  on             : 'hover',
  target         : false,
  closable       : true,

  context        : 'body',
  position       : 'top center',
  delay          : 150,
  inline         : false,
  preserve       : false,

  duration       : 250,
  easing         : 'easeOutQuint',
  transition     : 'scale',

  distanceAway   : 0,
  offset         : 0,
  maxSearchDepth : 10,

  error: {
    content   : 'Your popup has no content specified',
    method    : 'The method you called is not defined.',
    recursion : 'Popup attempted to reposition element to fit, but could not find an adequate position.'
  },

  metadata: {
    content   : 'content',
    html      : 'html',
    offset    : 'offset',
    position  : 'position',
    title     : 'title',
    variation : 'variation'
  },

  className   : {
    animating   : 'animating',
    loading     : 'loading',
    popup       : 'ui popup',
    position    : 'top left center bottom right',
    visible     : 'visible'
  },

  selector    : {
    popup    : '.ui.popup'
  },

  template: function(text) {
    var html = '';
    if(typeof text !== undefined) {
      if(typeof text.title !== undefined && text.title) {
        html += '<div class="header">' + text.title + '</div class="header">';
      }
      if(typeof text.content !== undefined && text.content) {
        html += '<div class="content">' + text.content + '</div>';
      }
    }
    return html;
  }

};

})( jQuery, window , document );

/*
 * # Semantic - Rating
 * http://github.com/jlukic/semantic-ui/
 *
 *
 * Copyright 2013 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */

;(function ($, window, document, undefined) {

$.fn.rating = function(parameters) {
  var
    $allModules     = $(this),
    moduleSelector  = $allModules.selector || '',

    time            = new Date().getTime(),
    performance     = [],

    query           = arguments[0],
    methodInvoked   = (typeof query == 'string'),
    queryArguments  = [].slice.call(arguments, 1),
    returnedValue
  ;
  $allModules
    .each(function() {
      var
        settings        = ( $.isPlainObject(parameters) )
          ? $.extend(true, {}, $.fn.rating.settings, parameters)
          : $.extend({}, $.fn.rating.settings),

        namespace       = settings.namespace,
        className       = settings.className,
        metadata        = settings.metadata,
        selector        = settings.selector,
        error           = settings.error,

        eventNamespace  = '.' + namespace,
        moduleNamespace = 'module-' + namespace,

        element         = this,
        instance        = $(this).data(moduleNamespace),

        $module         = $(this),
        $icon           = $module.find(selector.icon),

        module
      ;

      module = {

        initialize: function() {
          module.verbose('Initializing rating module', settings);

          if(settings.interactive) {
            module.enable();
          }
          else {
            module.disable();
          }

          if(settings.initialRating) {
            module.debug('Setting initial rating');
            module.setRating(settings.initialRating);
          }
          if( $module.data(metadata.rating) ) {
            module.debug('Rating found in metadata');
            module.setRating( $module.data(metadata.rating) );
          }
          module.instantiate();
        },

        instantiate: function() {
          module.verbose('Instantiating module', settings);
          instance = module;
          $module
            .data(moduleNamespace, module)
          ;
        },

        destroy: function() {
          module.verbose('Destroying previous instance', instance);
          $module
            .removeData(moduleNamespace)
          ;
          $icon
            .off(eventNamespace)
          ;
        },

        event: {
          mouseenter: function() {
            var
              $activeIcon = $(this)
            ;
            $activeIcon
              .nextAll()
                .removeClass(className.hover)
            ;
            $module
              .addClass(className.hover)
            ;
            $activeIcon
              .addClass(className.hover)
                .prevAll()
                .addClass(className.hover)
            ;
          },
          mouseleave: function() {
            $module
              .removeClass(className.hover)
            ;
            $icon
              .removeClass(className.hover)
            ;
          },
          click: function() {
            var
              $activeIcon   = $(this),
              currentRating = module.getRating(),
              rating        = $icon.index($activeIcon) + 1
            ;
            if(settings.clearable && currentRating == rating) {
              module.clearRating();
            }
            else {
              module.setRating( rating );
            }
          }
        },

        clearRating: function() {
          module.debug('Clearing current rating');
          module.setRating(0);
        },

        getRating: function() {
          var
            currentRating = $icon.filter('.' + className.active).size()
          ;
          module.verbose('Current rating retrieved', currentRating);
          return currentRating;
        },

        enable: function() {
          module.debug('Setting rating to interactive mode');
          $icon
            .on('mouseenter' + eventNamespace, module.event.mouseenter)
            .on('mouseleave' + eventNamespace, module.event.mouseleave)
            .on('click' + eventNamespace, module.event.click)
          ;
          $module
            .removeClass(className.disabled)
          ;
        },

        disable: function() {
          module.debug('Setting rating to read-only mode');
          $icon
            .off(eventNamespace)
          ;
          $module
            .addClass(className.disabled)
          ;
        },

        setRating: function(rating) {
          var
            ratingIndex = (rating - 1 >= 0)
              ? (rating - 1)
              : 0,
            $activeIcon = $icon.eq(ratingIndex)
          ;
          $module
            .removeClass(className.hover)
          ;
          $icon
            .removeClass(className.hover)
            .removeClass(className.active)
          ;
          if(rating > 0) {
            module.verbose('Setting current rating to', rating);
            $activeIcon
              .addClass(className.active)
                .prevAll()
                .addClass(className.active)
            ;
          }
          $.proxy(settings.onRate, element)(rating);
        },

        setting: function(name, value) {
          if( $.isPlainObject(name) ) {
            $.extend(true, settings, name);
          }
          else if(value !== undefined) {
            settings[name] = value;
          }
          else {
            return settings[name];
          }
        },
        internal: function(name, value) {
          if( $.isPlainObject(name) ) {
            $.extend(true, module, name);
          }
          else if(value !== undefined) {
            module[name] = value;
          }
          else {
            return module[name];
          }
        },
        debug: function() {
          if(settings.debug) {
            if(settings.performance) {
              module.performance.log(arguments);
            }
            else {
              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');
              module.debug.apply(console, arguments);
            }
          }
        },
        verbose: function() {
          if(settings.verbose && settings.debug) {
            if(settings.performance) {
              module.performance.log(arguments);
            }
            else {
              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');
              module.verbose.apply(console, arguments);
            }
          }
        },
        error: function() {
          module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');
          module.error.apply(console, arguments);
        },
        performance: {
          log: function(message) {
            var
              currentTime,
              executionTime,
              previousTime
            ;
            if(settings.performance) {
              currentTime   = new Date().getTime();
              previousTime  = time || currentTime;
              executionTime = currentTime - previousTime;
              time          = currentTime;
              performance.push({
                'Element'        : element,
                'Name'           : message[0],
                'Arguments'      : [].slice.call(message, 1) || '',
                'Execution Time' : executionTime
              });
            }
            clearTimeout(module.performance.timer);
            module.performance.timer = setTimeout(module.performance.display, 100);
          },
          display: function() {
            var
              title = settings.name + ':',
              totalTime = 0
            ;
            time = false;
            clearTimeout(module.performance.timer);
            $.each(performance, function(index, data) {
              totalTime += data['Execution Time'];
            });
            title += ' ' + totalTime + 'ms';
            if(moduleSelector) {
              title += ' \'' + moduleSelector + '\'';
            }
            if($allModules.size() > 1) {
              title += ' ' + '(' + $allModules.size() + ')';
            }
            if( (console.group !== undefined || console.table !== undefined) && performance.length > 0) {
              console.groupCollapsed(title);
              if(console.table) {
                console.table(performance);
              }
              else {
                $.each(performance, function(index, data) {
                  console.log(data['Name'] + ': ' + data['Execution Time']+'ms');
                });
              }
              console.groupEnd();
            }
            performance = [];
          }
        },
        invoke: function(query, passedArguments, context) {
          var
            object = instance,
            maxDepth,
            found,
            response
          ;
          passedArguments = passedArguments || queryArguments;
          context         = element         || context;
          if(typeof query == 'string' && object !== undefined) {
            query    = query.split(/[\. ]/);
            maxDepth = query.length - 1;
            $.each(query, function(depth, value) {
              var camelCaseValue = (depth != maxDepth)
                ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1)
                : query
              ;
              if( $.isPlainObject( object[camelCaseValue] ) && (depth != maxDepth) ) {
                object = object[camelCaseValue];
              }
              else if( object[camelCaseValue] !== undefined ) {
                found = object[camelCaseValue];
                return false;
              }
              else if( $.isPlainObject( object[value] ) && (depth != maxDepth) ) {
                object = object[value];
              }
              else if( object[value] !== undefined ) {
                found = object[value];
                return false;
              }
              else {
                return false;
              }
            });
          }
          if ( $.isFunction( found ) ) {
            response = found.apply(context, passedArguments);
          }
          else if(found !== undefined) {
            response = found;
          }
          if($.isArray(returnedValue)) {
            returnedValue.push(response);
          }
          else if(returnedValue !== undefined) {
            returnedValue = [returnedValue, response];
          }
          else if(response !== undefined) {
            returnedValue = response;
          }
          return found;
        }
      };
      if(methodInvoked) {
        if(instance === undefined) {
          module.initialize();
        }
        module.invoke(query);
      }
      else {
        if(instance !== undefined) {
          module.destroy();
        }
        module.initialize();
      }
    })
  ;

  return (returnedValue !== undefined)
    ? returnedValue
    : this
  ;
};

$.fn.rating.settings = {

  name          : 'Rating',
  namespace     : 'rating',

  verbose       : true,
  debug         : false,
  performance   : true,

  initialRating : 0,
  interactive   : true,
  clearable     : false,

  onRate        : function(rating){},

  error       : {
    method : 'The method you called is not defined'
  },

  metadata: {
    rating: 'rating'
  },

  className : {
    active   : 'active',
    disabled : 'disabled',
    hover    : 'hover',
    loading  : 'loading'
  },

  selector  : {
    icon : '.icon'
  }

};

})( jQuery, window , document );

/*
 * # Semantic - Search
 * http://github.com/jlukic/semantic-ui/
 *
 *
 * Copyright 2013 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */

;(function ($, window, document, undefined) {

$.fn.search = function(source, parameters) {
  var
    $allModules     = $(this),
    moduleSelector  = $allModules.selector || '',

    time            = new Date().getTime(),
    performance     = [],

    query           = arguments[0],
    methodInvoked   = (typeof query == 'string'),
    queryArguments  = [].slice.call(arguments, 1),
    returnedValue
  ;
  $(this)
    .each(function() {
      var
        settings        = $.extend(true, {}, $.fn.search.settings, parameters),

        className       = settings.className,
        selector        = settings.selector,
        error           = settings.error,
        namespace       = settings.namespace,

        eventNamespace  = '.' + namespace,
        moduleNamespace = namespace + '-module',

        $module         = $(this),
        $prompt         = $module.find(selector.prompt),
        $searchButton   = $module.find(selector.searchButton),
        $results        = $module.find(selector.results),
        $result         = $module.find(selector.result),
        $category       = $module.find(selector.category),

        element         = this,
        instance        = $module.data(moduleNamespace),

        module
      ;
      module = {

        initialize: function() {
          module.verbose('Initializing module');
          var
            prompt = $prompt[0],
            inputEvent   = (prompt.oninput !== undefined)
              ? 'input'
              : (prompt.onpropertychange !== undefined)
                ? 'propertychange'
                : 'keyup'
          ;
          // attach events
          $prompt
            .on('focus' + eventNamespace, module.event.focus)
            .on('blur' + eventNamespace, module.event.blur)
            .on('keydown' + eventNamespace, module.handleKeyboard)
          ;
          if(settings.automatic) {
            $prompt
              .on(inputEvent + eventNamespace, module.search.throttle)
            ;
          }
          $searchButton
            .on('click' + eventNamespace, module.search.query)
          ;
          $results
            .on('click' + eventNamespace, selector.result, module.results.select)
          ;
          module.instantiate();
        },
        instantiate: function() {
          module.verbose('Storing instance of module', module);
          instance = module;
          $module
            .data(moduleNamespace, module)
          ;
        },
        destroy: function() {
          module.verbose('Destroying instance');
          $module
            .removeData(moduleNamespace)
          ;
        },
        event: {
          focus: function() {
            $module
              .addClass(className.focus)
            ;
            module.results.show();
          },
          blur: function() {
            module.search.cancel();
            $module
              .removeClass(className.focus)
            ;
            module.results.hide();
          }
        },
        handleKeyboard: function(event) {
          var
            // force latest jq dom
            $result       = $module.find(selector.result),
            $category     = $module.find(selector.category),
            keyCode       = event.which,
            keys          = {
              backspace : 8,
              enter     : 13,
              escape    : 27,
              upArrow   : 38,
              downArrow : 40
            },
            activeClass  = className.active,
            currentIndex = $result.index( $result.filter('.' + activeClass) ),
            resultSize   = $result.size(),
            newIndex
          ;
          // search shortcuts
          if(keyCode == keys.escape) {
            module.verbose('Escape key pressed, blurring search field');
            $prompt
              .trigger('blur')
            ;
          }
          // result shortcuts
          if($results.filter(':visible').size() > 0) {
            if(keyCode == keys.enter) {
              module.verbose('Enter key pressed, selecting active result');
              if( $result.filter('.' + activeClass).exists() ) {
                $.proxy(module.results.select, $result.filter('.' + activeClass) )();
                event.preventDefault();
                return false;
              }
            }
            else if(keyCode == keys.upArrow) {
              module.verbose('Up key pressed, changing active result');
              newIndex = (currentIndex - 1 < 0)
                ? currentIndex
                : currentIndex - 1
              ;
              $category
                .removeClass(activeClass)
              ;
              $result
                .removeClass(activeClass)
                .eq(newIndex)
                  .addClass(activeClass)
                  .closest($category)
                    .addClass(activeClass)
              ;
              event.preventDefault();
            }
            else if(keyCode == keys.downArrow) {
              module.verbose('Down key pressed, changing active result');
              newIndex = (currentIndex + 1 >= resultSize)
                ? currentIndex
                : currentIndex + 1
              ;
              $category
                .removeClass(activeClass)
              ;
              $result
                .removeClass(activeClass)
                .eq(newIndex)
                  .addClass(activeClass)
                  .closest($category)
                    .addClass(activeClass)
              ;
              event.preventDefault();
            }
          }
          else {
            // query shortcuts
            if(keyCode == keys.enter) {
              module.verbose('Enter key pressed, executing query');
              module.search.query();
              $searchButton
                .addClass(className.down)
              ;
              $prompt
                .one('keyup', function(){
                  $searchButton
                    .removeClass(className.down)
                  ;
                })
              ;
            }
          }
        },
        search: {
          cancel: function() {
            var
              xhr = $module.data('xhr') || false
            ;
            if( xhr && xhr.state() != 'resolved') {
              module.debug('Cancelling last search');
              xhr.abort();
            }
          },
          throttle: function() {
            var
              searchTerm    = $prompt.val(),
              numCharacters = searchTerm.length
            ;
            clearTimeout(module.timer);
            if(numCharacters >= settings.minCharacters)  {
              module.timer = setTimeout(module.search.query, settings.searchThrottle);
            }
            else {
              module.results.hide();
            }
          },
          query: function() {
            var
              searchTerm = $prompt.val(),
              cachedHTML = module.search.cache.read(searchTerm)
            ;
            if(cachedHTML) {
              module.debug("Reading result for '" + searchTerm + "' from cache");
              module.results.add(cachedHTML);
            }
            else {
              module.debug("Querying for '" + searchTerm + "'");
              if(typeof source == 'object') {
                module.search.local(searchTerm);
              }
              else {
                module.search.remote(searchTerm);
              }
              $.proxy(settings.onSearchQuery, $module)(searchTerm);
            }
          },
          local: function(searchTerm) {
            var
              results   = [],
              fullTextResults = [],
              searchFields    = $.isArray(settings.searchFields)
                ? settings.searchFields
                : [settings.searchFields],

              searchRegExp   = new RegExp('(?:\s|^)' + searchTerm, 'i'),
              fullTextRegExp = new RegExp(searchTerm, 'i'),
              searchHTML
            ;
            $module
              .addClass(className.loading)
            ;
            // iterate through search fields in array order
            $.each(searchFields, function(index, field) {
              $.each(source, function(label, thing) {
                if(typeof thing[field] == 'string' && ($.inArray(thing, results) == -1) && ($.inArray(thing, fullTextResults) == -1) ) {
                  if( searchRegExp.test( thing[field] ) ) {
                    results.push(thing);
                  }
                  else if( fullTextRegExp.test( thing[field] ) ) {
                    fullTextResults.push(thing);
                  }
                }
              });
            });
            searchHTML = module.results.generate({
              results: $.merge(results, fullTextResults)
            });
            $module
              .removeClass(className.loading)
            ;
            module.search.cache.write(searchTerm, searchHTML);
            module.results.add(searchHTML);
          },
          remote: function(searchTerm) {
            var
              apiSettings = {
                stateContext  : $module,
                url           : source,
                urlData: { query: searchTerm },
                success       : function(response) {
                  searchHTML = module.results.generate(response);
                  module.search.cache.write(searchTerm, searchHTML);
                  module.results.add(searchHTML);
                },
                failure      : module.error
              },
              searchHTML
            ;
            module.search.cancel();
            module.debug('Executing search');
            $.extend(true, apiSettings, settings.apiSettings);
            $.api(apiSettings);
          },

          cache: {
            read: function(name) {
              var
                cache = $module.data('cache')
              ;
              return (settings.cache && (typeof cache == 'object') && (cache[name] !== undefined) )
                ? cache[name]
                : false
              ;
            },
            write: function(name, value) {
              var
                cache = ($module.data('cache') !== undefined)
                  ? $module.data('cache')
                  : {}
              ;
              cache[name] = value;
              $module
                .data('cache', cache)
              ;
            }
          }
        },

        results: {
          generate: function(response) {
            module.debug('Generating html from response', response);
            var
              template = settings.templates[settings.type],
              html     = ''
            ;
            if(($.isPlainObject(response.results) && !$.isEmptyObject(response.results)) || ($.isArray(response.results) && response.results.length > 0) ) {
              if(settings.maxResults > 0) {
                response.results = $.makeArray(response.results).slice(0, settings.maxResults);
              }
              if(response.results.length > 0) {
                if($.isFunction(template)) {
                  html = template(response);
                }
                else {
                  module.error(error.noTemplate, false);
                }
              }
            }
            else {
              html = module.message(error.noResults, 'empty');
            }
            $.proxy(settings.onResults, $module)(response);
            return html;
          },
          add: function(html) {
            if(settings.onResultsAdd == 'default' || $.proxy(settings.onResultsAdd, $results)(html) == 'default') {
              $results
                .html(html)
              ;
            }
            module.results.show();
          },
          show: function() {
            if( ($results.filter(':visible').size() === 0) && ($prompt.filter(':focus').size() > 0) && $results.html() !== '') {
              $results
                .stop()
                .fadeIn(200)
              ;
              $.proxy(settings.onResultsOpen, $results)();
            }
          },
          hide: function() {
            if($results.filter(':visible').size() > 0) {
              $results
                .stop()
                .fadeOut(200)
              ;
              $.proxy(settings.onResultsClose, $results)();
            }
          },
          select: function(event) {
            module.debug('Search result selected');
            var
              $result = $(this),
              $title  = $result.find('.title'),
              title   = $title.html()
            ;
            if(settings.onSelect == 'default' || $.proxy(settings.onSelect, this)(event) == 'default') {
              var
                $link  = $result.find('a[href]').eq(0),
                href   = $link.attr('href') || false,
                target = $link.attr('target') || false
              ;
              module.results.hide();
              $prompt
                .val(title)
              ;
              if(href) {
                if(target == '_blank' || event.ctrlKey) {
                  window.open(href);
                }
                else {
                  window.location.href = (href);
                }
              }
            }
          }
        },

        setting: function(name, value) {
          if( $.isPlainObject(name) ) {
            $.extend(true, settings, name);
          }
          else if(value !== undefined) {
            settings[name] = value;
          }
          else {
            return settings[name];
          }
        },
        internal: function(name, value) {
          if( $.isPlainObject(name) ) {
            $.extend(true, module, name);
          }
          else if(value !== undefined) {
            module[name] = value;
          }
          else {
            return module[name];
          }
        },
        debug: function() {
          if(settings.debug) {
            if(settings.performance) {
              module.performance.log(arguments);
            }
            else {
              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');
              module.debug.apply(console, arguments);
            }
          }
        },
        verbose: function() {
          if(settings.verbose && settings.debug) {
            if(settings.performance) {
              module.performance.log(arguments);
            }
            else {
              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');
              module.verbose.apply(console, arguments);
            }
          }
        },
        error: function() {
          module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');
          module.error.apply(console, arguments);
        },
        performance: {
          log: function(message) {
            var
              currentTime,
              executionTime,
              previousTime
            ;
            if(settings.performance) {
              currentTime   = new Date().getTime();
              previousTime  = time || currentTime;
              executionTime = currentTime - previousTime;
              time          = currentTime;
              performance.push({
                'Element'        : element,
                'Name'           : message[0],
                'Arguments'      : [].slice.call(message, 1) || '',
                'Execution Time' : executionTime
              });
            }
            clearTimeout(module.performance.timer);
            module.performance.timer = setTimeout(module.performance.display, 100);
          },
          display: function() {
            var
              title = settings.name + ':',
              totalTime = 0
            ;
            time = false;
            clearTimeout(module.performance.timer);
            $.each(performance, function(index, data) {
              totalTime += data['Execution Time'];
            });
            title += ' ' + totalTime + 'ms';
            if(moduleSelector) {
              title += ' \'' + moduleSelector + '\'';
            }
            if($allModules.size() > 1) {
              title += ' ' + '(' + $allModules.size() + ')';
            }
            if( (console.group !== undefined || console.table !== undefined) && performance.length > 0) {
              console.groupCollapsed(title);
              if(console.table) {
                console.table(performance);
              }
              else {
                $.each(performance, function(index, data) {
                  console.log(data['Name'] + ': ' + data['Execution Time']+'ms');
                });
              }
              console.groupEnd();
            }
            performance = [];
          }
        },
        invoke: function(query, passedArguments, context) {
          var
            object = instance,
            maxDepth,
            found,
            response
          ;
          passedArguments = passedArguments || queryArguments;
          context         = element         || context;
          if(typeof query == 'string' && object !== undefined) {
            query    = query.split(/[\. ]/);
            maxDepth = query.length - 1;
            $.each(query, function(depth, value) {
              var camelCaseValue = (depth != maxDepth)
                ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1)
                : query
              ;
              if( $.isPlainObject( object[camelCaseValue] ) && (depth != maxDepth) ) {
                object = object[camelCaseValue];
              }
              else if( object[camelCaseValue] !== undefined ) {
                found = object[camelCaseValue];
                return false;
              }
              else if( $.isPlainObject( object[value] ) && (depth != maxDepth) ) {
                object = object[value];
              }
              else if( object[value] !== undefined ) {
                found = object[value];
                return false;
              }
              else {
                return false;
              }
            });
          }
          if ( $.isFunction( found ) ) {
            response = found.apply(context, passedArguments);
          }
          else if(found !== undefined) {
            response = found;
          }
          if($.isArray(returnedValue)) {
            returnedValue.push(response);
          }
          else if(returnedValue !== undefined) {
            returnedValue = [returnedValue, response];
          }
          else if(response !== undefined) {
            returnedValue = response;
          }
          return found;
        }
      };
      if(methodInvoked) {
        if(instance === undefined) {
          module.initialize();
        }
        module.invoke(query);
      }
      else {
        if(instance !== undefined) {
          module.destroy();
        }
        module.initialize();
      }

    })
  ;

  return (returnedValue !== undefined)
    ? returnedValue
    : this
  ;
};

$.fn.search.settings = {

  name           : 'Search Module',
  namespace      : 'search',

  debug          : false,
  verbose        : true,
  performance    : true,

  // onSelect default action is defined in module
  onSelect       : 'default',
  onResultsAdd   : 'default',

  onSearchQuery  : function(){},
  onResults      : function(response){},

  onResultsOpen  : function(){},
  onResultsClose : function(){},

  automatic      : 'true',
  type           : 'simple',
  minCharacters  : 3,
  searchThrottle : 300,
  maxResults     : 7,
  cache          : true,

  searchFields    : [
    'title',
    'description'
  ],

  // api config
  apiSettings: {

  },

  className: {
    active  : 'active',
    down    : 'down',
    focus   : 'focus',
    empty   : 'empty',
    loading : 'loading'
  },

  error : {
    noResults   : 'Your search returned no results',
    logging     : 'Error in debug logging, exiting.',
    noTemplate  : 'A valid template name was not specified.',
    serverError : 'There was an issue with querying the server.',
    method      : 'The method you called is not defined.'
  },

  selector : {
    prompt       : '.prompt',
    searchButton : '.search.button',
    results      : '.results',
    category     : '.category',
    result       : '.result'
  },

  templates: {
    message: function(message, type) {
      var
        html = ''
      ;
      if(message !== undefined && type !== undefined) {
        html +=  ''
          + '<div class="message ' + type +'">'
        ;
        // message type
        if(type == 'empty') {
          html += ''
            + '<div class="header">No Results</div class="header">'
            + '<div class="description">' + message + '</div class="description">'
          ;
        }
        else {
          html += ' <div class="description">' + message + '</div>';
        }
        html += '</div>';
      }
      return html;
    },
    categories: function(response) {
      var
        html = ''
      ;
      if(response.results !== undefined) {
        // each category
        $.each(response.results, function(index, category) {
          if(category.results !== undefined && category.results.length > 0) {
            html  += ''
              + '<div class="category">'
              + '<div class="name">' + category.name + '</div>'
            ;
            // each item inside category
            $.each(category.results, function(index, result) {
              html  += '<div class="result">';
              html  += '<a href="' + result.url + '"></a>';
              if(result.image !== undefined) {
                html+= ''
                  + '<div class="image">'
                  + ' <img src="' + result.image + '">'
                  + '</div>'
                ;
              }
              html += '<div class="info">';
              if(result.price !== undefined) {
                html+= '<div class="price">' + result.price + '</div>';
              }
              if(result.title !== undefined) {
                html+= '<div class="title">' + result.title + '</div>';
              }
              if(result.description !== undefined) {
                html+= '<div class="description">' + result.description + '</div>';
              }
              html  += ''
                + '</div>'
                + '</div>'
              ;
            });
            html  += ''
              + '</div>'
            ;
          }
        });
        if(response.resultPage) {
          html += ''
          + '<a href="' + response.resultPage.url + '" class="all">'
          +   response.resultPage.text
          + '</a>';
        }
        return html;
      }
      return false;
    },
    simple: function(response) {
      var
        html = ''
      ;
      if(response.results !== undefined) {

        // each result
        $.each(response.results, function(index, result) {
          html  += '<a class="result" href="' + result.url + '">';
          if(result.image !== undefined) {
            html+= ''
              + '<div class="image">'
              + ' <img src="' + result.image + '">'
              + '</div>'
            ;
          }
          html += '<div class="info">';
          if(result.price !== undefined) {
            html+= '<div class="price">' + result.price + '</div>';
          }
          if(result.title !== undefined) {
            html+= '<div class="title">' + result.title + '</div>';
          }
          if(result.description !== undefined) {
            html+= '<div class="description">' + result.description + '</div>';
          }
          html  += ''
            + '</div>'
            + '</a>'
          ;
        });

        if(response.resultPage) {
          html += ''
          + '<a href="' + response.resultPage.url + '" class="all">'
          +   response.resultPage.text
          + '</a>';
        }
        return html;
      }
      return false;
    }
  }
};

})( jQuery, window , document );
/*
 * # Semantic - Shape
 * http://github.com/jlukic/semantic-ui/
 *
 *
 * Copyright 2013 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */

;(function ( $, window, document, undefined ) {

$.fn.shape = function(parameters) {
  var
    $allModules     = $(this),
    $body           = $('body'),

    time            = new Date().getTime(),
    performance     = [],

    query           = arguments[0],
    methodInvoked   = (typeof query == 'string'),
    queryArguments  = [].slice.call(arguments, 1),
    returnedValue
  ;

  $allModules
    .each(function() {
      var
        moduleSelector  = $allModules.selector || '',
        settings        = $.extend(true, {}, $.fn.shape.settings, parameters),

        // internal aliases
        namespace     = settings.namespace,
        selector      = settings.selector,
        error         = settings.error,
        className     = settings.className,

        // define namespaces for modules
        eventNamespace  = '.' + namespace,
        moduleNamespace = 'module-' + namespace,

        // selector cache
        $module       = $(this),
        $sides        = $module.find(selector.sides),
        $side         = $module.find(selector.side),

        // private variables
        nextSelector = false,
        $activeSide,
        $nextSide,

        // standard module
        element       = this,
        instance      = $module.data(moduleNamespace),
        module
      ;

      module = {

        initialize: function() {
          module.verbose('Initializing module for', element);
          module.set.defaultSide();
          module.instantiate();
        },

        instantiate: function() {
          module.verbose('Storing instance of module', module);
          instance = module;
          $module
            .data(moduleNamespace, instance)
          ;
        },

        destroy: function() {
          module.verbose('Destroying previous module for', element);
          $module
            .removeData(moduleNamespace)
            .off(eventNamespace)
          ;
        },

        refresh: function() {
          module.verbose('Refreshing selector cache for', element);
          $module = $(element);
          $sides  = $(this).find(selector.shape);
          $side   = $(this).find(selector.side);
        },

        repaint: function() {
          module.verbose('Forcing repaint event');
          var
            shape          = $sides.get(0) || document.createElement('div'),
            fakeAssignment = shape.offsetWidth
          ;
        },

        animate: function(propertyObject, callback) {
          module.verbose('Animating box with properties', propertyObject);
          callback = callback || function(event) {
            module.verbose('Executing animation callback');
            if(event !== undefined) {
              event.stopPropagation();
            }
            module.reset();
            module.set.active();
          };
          $.proxy(settings.beforeChange, $nextSide[0])();
          if(module.get.transitionEvent()) {
            module.verbose('Starting CSS animation');
            $module
              .addClass(className.animating)
            ;
            module.repaint();
            $module
              .addClass(className.animating)
            ;
            $activeSide
              .addClass(className.hidden)
            ;
            $sides
              .css(propertyObject)
              .one(module.get.transitionEvent(), callback)
            ;
            module.set.duration(settings.duration);
          }
          else {
            callback();
          }
        },

        queue: function(method) {
          module.debug('Queueing animation of', method);
          $sides
            .one(module.get.transitionEvent(), function() {
              module.debug('Executing queued animation');
              setTimeout(function(){
                $module.shape(method);
              }, 0);
            })
          ;
        },

        reset: function() {
          module.verbose('Animating states reset');
          $module
            .removeClass(className.animating)
            .attr('style', '')
            .removeAttr('style')
          ;
          // removeAttr style does not consistently work in safari
          $sides
            .attr('style', '')
            .removeAttr('style')
          ;
          $side
            .attr('style', '')
            .removeAttr('style')
            .removeClass(className.hidden)
          ;
          $nextSide
            .removeClass(className.animating)
            .attr('style', '')
            .removeAttr('style')
          ;
        },

        is: {
          animating: function() {
            return $module.hasClass(className.animating);
          }
        },

        set: {

          defaultSide: function() {
            $activeSide = $module.find('.' + settings.className.active);
            $nextSide   = ( $activeSide.next(selector.side).size() > 0 )
              ? $activeSide.next(selector.side)
              : $module.find(selector.side).first()
            ;
            nextSelector = false;
            module.verbose('Active side set to', $activeSide);
            module.verbose('Next side set to', $nextSide);
          },

          duration: function(duration) {
            duration = duration || settings.duration;
            duration = (typeof duration == 'number')
              ? duration + 'ms'
              : duration
            ;
            module.verbose('Setting animation duration', duration);
            $sides.add($side)
              .css({
                '-webkit-transition-duration': duration,
                '-moz-transition-duration': duration,
                '-ms-transition-duration': duration,
                '-o-transition-duration': duration,
                'transition-duration': duration
              })
            ;
          },

          stageSize: function() {
            var
              $clone      = $module.clone().addClass(className.loading),
              $activeSide = $clone.find('.' + settings.className.active),
              $nextSide   = (nextSelector)
                ? $clone.find(nextSelector)
                : ( $activeSide.next(selector.side).size() > 0 )
                  ? $activeSide.next(selector.side)
                  : $clone.find(selector.side).first(),
              newSize = {}
            ;
            $activeSide.removeClass(className.active);
            $nextSide.addClass(className.active);
            $clone.prependTo($body);
            newSize = {
              width  : $nextSide.outerWidth(),
              height : $nextSide.outerHeight()
            };
            $clone.remove();
            $module
              .css(newSize)
            ;
            module.verbose('Resizing stage to fit new content', newSize);
          },

          nextSide: function(selector) {
            nextSelector = selector;
            $nextSide = $module.find(selector);
            if($nextSide.size() === 0) {
              module.error(error.side);
            }
            module.verbose('Next side manually set to', $nextSide);
          },

          active: function() {
            module.verbose('Setting new side to active', $nextSide);
            $side
              .removeClass(className.active)
            ;
            $nextSide
              .addClass(className.active)
            ;
            $.proxy(settings.onChange, $nextSide[0])();
            module.set.defaultSide();
          }
        },

        flip: {

          up: function() {
            module.debug('Flipping up', $nextSide);
            if( !module.is.animating() ) {
              module.set.stageSize();
              module.stage.above();
              module.animate( module.get.transform.up() );
            }
            else {
              module.queue('flip up');
            }
          },

          down: function() {
            module.debug('Flipping down', $nextSide);
            if( !module.is.animating() ) {
              module.set.stageSize();
              module.stage.below();
              module.animate( module.get.transform.down() );
            }
            else {
              module.queue('flip down');
            }
          },

          left: function() {
            module.debug('Flipping left', $nextSide);
            if( !module.is.animating() ) {
              module.set.stageSize();
              module.stage.left();
              module.animate(module.get.transform.left() );
            }
            else {
              module.queue('flip left');
            }
          },

          right: function() {
            module.debug('Flipping right', $nextSide);
            if( !module.is.animating() ) {
              module.set.stageSize();
              module.stage.right();
              module.animate(module.get.transform.right() );
            }
            else {
              module.queue('flip right');
            }
          },

          over: function() {
            module.debug('Flipping over', $nextSide);
            if( !module.is.animating() ) {
              module.set.stageSize();
              module.stage.behind();
              module.animate(module.get.transform.over() );
            }
            else {
              module.queue('flip over');
            }
          },

          back: function() {
            module.debug('Flipping back', $nextSide);
            if( !module.is.animating() ) {
              module.set.stageSize();
              module.stage.behind();
              module.animate(module.get.transform.back() );
            }
            else {
              module.queue('flip back');
            }
          }

        },

        get: {

          transform: {
            up: function() {
              var
                translate = {
                  y: -(($activeSide.outerHeight() - $nextSide.outerHeight()) / 2),
                  z: -($activeSide.outerHeight() / 2)
                }
              ;
              return {
                transform: 'translateY(' + translate.y + 'px) translateZ('+ translate.z + 'px) rotateX(-90deg)'
              };
            },

            down: function() {
              var
                translate = {
                  y: -(($activeSide.outerHeight() - $nextSide.outerHeight()) / 2),
                  z: -($activeSide.outerHeight() / 2)
                }
              ;
              return {
                transform: 'translateY(' + translate.y + 'px) translateZ('+ translate.z + 'px) rotateX(90deg)'
              };
            },

            left: function() {
              var
                translate = {
                  x : -(($activeSide.outerWidth() - $nextSide.outerWidth()) / 2),
                  z : -($activeSide.outerWidth() / 2)
                }
              ;
              return {
                transform: 'translateX(' + translate.x + 'px) translateZ(' + translate.z + 'px) rotateY(90deg)'
              };
            },

            right: function() {
              var
                translate = {
                  x : -(($activeSide.outerWidth() - $nextSide.outerWidth()) / 2),
                  z : -($activeSide.outerWidth() / 2)
                }
              ;
              return {
                transform: 'translateX(' + translate.x + 'px) translateZ(' + translate.z + 'px) rotateY(-90deg)'
              };
            },

            over: function() {
              var
                translate = {
                  x : -(($activeSide.outerWidth() - $nextSide.outerWidth()) / 2)
                }
              ;
              return {
                transform: 'translateX(' + translate.x + 'px) rotateY(180deg)'
              };
            },

            back: function() {
              var
                translate = {
                  x : -(($activeSide.outerWidth() - $nextSide.outerWidth()) / 2)
                }
              ;
              return {
                transform: 'translateX(' + translate.x + 'px) rotateY(-180deg)'
              };
            }
          },

          transitionEvent: function() {
            var
              element     = document.createElement('element'),
              transitions = {
                'transition'       :'transitionend',
                'OTransition'      :'oTransitionEnd',
                'MozTransition'    :'transitionend',
                'WebkitTransition' :'webkitTransitionEnd'
              },
              transition
            ;
            for(transition in transitions){
              if( element.style[transition] !== undefined ){
                return transitions[transition];
              }
            }
          },

          nextSide: function() {
            return ( $activeSide.next(selector.side).size() > 0 )
              ? $activeSide.next(selector.side)
              : $module.find(selector.side).first()
            ;
          }

        },

        stage: {

          above: function() {
            var
              box = {
                origin : (($activeSide.outerHeight() - $nextSide.outerHeight()) / 2),
                depth  : {
                  active : ($nextSide.outerHeight() / 2),
                  next   : ($activeSide.outerHeight() / 2)
                }
              }
            ;
            module.verbose('Setting the initial animation position as above', $nextSide, box);
            $activeSide
              .css({
                'transform' : 'rotateY(0deg) translateZ(' + box.depth.active + 'px)'
              })
            ;
            $nextSide
              .addClass(className.animating)
              .css({
                'display'   : 'block',
                'top'       : box.origin + 'px',
                'transform' : 'rotateX(90deg) translateZ(' + box.depth.next + 'px)'
              })
            ;
          },

          below: function() {
            var
              box = {
                origin : (($activeSide.outerHeight() - $nextSide.outerHeight()) / 2),
                depth  : {
                  active : ($nextSide.outerHeight() / 2),
                  next   : ($activeSide.outerHeight() / 2)
                }
              }
            ;
            module.verbose('Setting the initial animation position as below', $nextSide, box);
            $activeSide
              .css({
                'transform' : 'rotateY(0deg) translateZ(' + box.depth.active + 'px)'
              })
            ;
            $nextSide
              .addClass(className.animating)
              .css({
                'display'   : 'block',
                'top'       : box.origin + 'px',
                'transform' : 'rotateX(-90deg) translateZ(' + box.depth.next + 'px)'
              })
            ;
          },

          left: function() {
            var
              box = {
                origin : ( ( $activeSide.outerWidth() - $nextSide.outerWidth() ) / 2),
                depth  : {
                  active : ($nextSide.outerWidth() / 2),
                  next   : ($activeSide.outerWidth() / 2)
                }
              }
            ;
            module.verbose('Setting the initial animation position as left', $nextSide, box);
            $activeSide
              .css({
                'transform' : 'rotateY(0deg) translateZ(' + box.depth.active + 'px)'
              })
            ;
            $nextSide
              .addClass(className.animating)
              .css({
                'display'   : 'block',
                'left'      : box.origin + 'px',
                'transform' : 'rotateY(-90deg) translateZ(' + box.depth.next + 'px)'
              })
            ;
          },

          right: function() {
            var
              box = {
                origin : ( ( $activeSide.outerWidth() - $nextSide.outerWidth() ) / 2),
                depth  : {
                  active : ($nextSide.outerWidth() / 2),
                  next   : ($activeSide.outerWidth() / 2)
                }
              }
            ;
            module.verbose('Setting the initial animation position as left', $nextSide, box);
            $activeSide
              .css({
                'transform' : 'rotateY(0deg) translateZ(' + box.depth.active + 'px)'
              })
            ;
            $nextSide
              .addClass(className.animating)
              .css({
                'display'   : 'block',
                'left'      : box.origin + 'px',
                'transform' : 'rotateY(90deg) translateZ(' + box.depth.next + 'px)'
              })
            ;
          },

          behind: function() {
            var
              box = {
                origin : ( ( $activeSide.outerWidth() - $nextSide.outerWidth() ) / 2),
                depth  : {
                  active : ($nextSide.outerWidth() / 2),
                  next   : ($activeSide.outerWidth() / 2)
                }
              }
            ;
            module.verbose('Setting the initial animation position as behind', $nextSide, box);
            $activeSide
              .css({
                'transform' : 'rotateY(0deg)'
              })
            ;
            $nextSide
              .addClass(className.animating)
              .css({
                'display'   : 'block',
                'left'      : box.origin + 'px',
                'transform' : 'rotateY(-180deg)'
              })
            ;
          }
        },
        setting: function(name, value) {
          if( $.isPlainObject(name) ) {
            $.extend(true, settings, name);
          }
          else if(value !== undefined) {
            settings[name] = value;
          }
          else {
            return settings[name];
          }
        },
        internal: function(name, value) {
          if( $.isPlainObject(name) ) {
            $.extend(true, module, name);
          }
          else if(value !== undefined) {
            module[name] = value;
          }
          else {
            return module[name];
          }
        },
        debug: function() {
          if(settings.debug) {
            if(settings.performance) {
              module.performance.log(arguments);
            }
            else {
              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');
              module.debug.apply(console, arguments);
            }
          }
        },
        verbose: function() {
          if(settings.verbose && settings.debug) {
            if(settings.performance) {
              module.performance.log(arguments);
            }
            else {
              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');
              module.verbose.apply(console, arguments);
            }
          }
        },
        error: function() {
          module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');
          module.error.apply(console, arguments);
        },
        performance: {
          log: function(message) {
            var
              currentTime,
              executionTime,
              previousTime
            ;
            if(settings.performance) {
              currentTime   = new Date().getTime();
              previousTime  = time || currentTime;
              executionTime = currentTime - previousTime;
              time          = currentTime;
              performance.push({
                'Element'        : element,
                'Name'           : message[0],
                'Arguments'      : [].slice.call(message, 1) || '',
                'Execution Time' : executionTime
              });
            }
            clearTimeout(module.performance.timer);
            module.performance.timer = setTimeout(module.performance.display, 100);
          },
          display: function() {
            var
              title = settings.name + ':',
              totalTime = 0
            ;
            time = false;
            clearTimeout(module.performance.timer);
            $.each(performance, function(index, data) {
              totalTime += data['Execution Time'];
            });
            title += ' ' + totalTime + 'ms';
            if(moduleSelector) {
              title += ' \'' + moduleSelector + '\'';
            }
            if($allModules.size() > 1) {
              title += ' ' + '(' + $allModules.size() + ')';
            }
            if( (console.group !== undefined || console.table !== undefined) && performance.length > 0) {
              console.groupCollapsed(title);
              if(console.table) {
                console.table(performance);
              }
              else {
                $.each(performance, function(index, data) {
                  console.log(data['Name'] + ': ' + data['Execution Time']+'ms');
                });
              }
              console.groupEnd();
            }
            performance = [];
          }
        },
        invoke: function(query, passedArguments, context) {
          var
            object = instance,
            maxDepth,
            found,
            response
          ;
          passedArguments = passedArguments || queryArguments;
          context         = element         || context;
          if(typeof query == 'string' && object !== undefined) {
            query    = query.split(/[\. ]/);
            maxDepth = query.length - 1;
            $.each(query, function(depth, value) {
              var camelCaseValue = (depth != maxDepth)
                ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1)
                : query
              ;
              if( $.isPlainObject( object[camelCaseValue] ) && (depth != maxDepth) ) {
                object = object[camelCaseValue];
              }
              else if( object[camelCaseValue] !== undefined ) {
                found = object[camelCaseValue];
                return false;
              }
              else if( $.isPlainObject( object[value] ) && (depth != maxDepth) ) {
                object = object[value];
              }
              else if( object[value] !== undefined ) {
                found = object[value];
                return false;
              }
              else {
                return false;
              }
            });
          }
          if ( $.isFunction( found ) ) {
            response = found.apply(context, passedArguments);
          }
          else if(found !== undefined) {
            response = found;
          }
          if($.isArray(returnedValue)) {
            returnedValue.push(response);
          }
          else if(returnedValue !== undefined) {
            returnedValue = [returnedValue, response];
          }
          else if(response !== undefined) {
            returnedValue = response;
          }
          return found;
        }
      };

      if(methodInvoked) {
        if(instance === undefined) {
          module.initialize();
        }
        module.invoke(query);
      }
      else {
        if(instance !== undefined) {
          module.destroy();
        }
        module.initialize();
      }
    })
  ;

  return (returnedValue !== undefined)
    ? returnedValue
    : this
  ;
};

$.fn.shape.settings = {

  // module info
  name : 'Shape',

  // debug content outputted to console
  debug      : false,

  // verbose debug output
  verbose    : true,

  // performance data output
  performance: true,

  // event namespace
  namespace  : 'shape',

  // callback occurs on side change
  beforeChange : function() {},
  onChange     : function() {},

  // animation duration
  duration   : 700,

  // possible errors
  error: {
    side   : 'You tried to switch to a side that does not exist.',
    method : 'The method you called is not defined'
  },

  // classnames used
  className   : {
    animating : 'animating',
    hidden    : 'hidden',
    loading   : 'loading',
    active    : 'active'
  },

  // selectors used
  selector    : {
    sides : '.sides',
    side  : '.side'
  }

};


})( jQuery, window , document );
/*
 * # Semantic - Sidebar
 * http://github.com/jlukic/semantic-ui/
 *
 *
 * Copyright 2013 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */

;(function ( $, window, document, undefined ) {

$.fn.sidebar = function(parameters) {
  var
    $allModules    = $(this),
    $body          = $('body'),
    $head          = $('head'),

    moduleSelector = $allModules.selector || '',

    time           = new Date().getTime(),
    performance    = [],

    query          = arguments[0],
    methodInvoked  = (typeof query == 'string'),
    queryArguments = [].slice.call(arguments, 1),
    returnedValue
  ;

  $allModules
    .each(function() {
      var
        settings        = ( $.isPlainObject(parameters) )
          ? $.extend(true, {}, $.fn.sidebar.settings, parameters)
          : $.extend({}, $.fn.sidebar.settings),

        selector        = settings.selector,
        className       = settings.className,
        namespace       = settings.namespace,
        error           = settings.error,

        eventNamespace  = '.' + namespace,
        moduleNamespace = 'module-' + namespace,

        $module         = $(this),
        $style          = $('style[title=' + namespace + ']'),

        element         = this,
        instance        = $module.data(moduleNamespace),
        module
      ;

      module      = {

        initialize: function() {
          module.debug('Initializing sidebar', $module);
          module.instantiate();
        },

        instantiate: function() {
          module.verbose('Storing instance of module', module);
          instance = module;
          $module
            .data(moduleNamespace, module)
          ;
        },

        destroy: function() {
          module.verbose('Destroying previous module for', $module);
          $module
            .off(eventNamespace)
            .removeData(moduleNamespace)
          ;
        },

        refresh: function() {
          module.verbose('Refreshing selector cache');
          $style  = $('style[title=' + namespace + ']');
        },

        attachEvents: function(selector, event) {
          var
            $toggle = $(selector)
          ;
          event = $.isFunction(module[event])
            ? module[event]
            : module.toggle
          ;
          if($toggle.size() > 0) {
            module.debug('Attaching sidebar events to element', selector, event);
            $toggle
              .off(eventNamespace)
              .on('click' + eventNamespace, event)
            ;
          }
          else {
            module.error(error.notFound);
          }
        },

        show: function(callback) {
          callback = $.isFunction(callback)
            ? callback
            : function(){}
          ;
          module.debug('Showing sidebar', callback);
          if(module.is.closed()) {
            if(!settings.overlay) {
              if(settings.exclusive) {
                module.hideAll();
              }
              module.pushPage();
            }
            module.set.active();
            callback();
            $.proxy(settings.onChange, element)();
            $.proxy(settings.onShow, element)();
          }
          else {
            module.debug('Sidebar is already visible');
          }
        },

        hide: function(callback) {
          callback = $.isFunction(callback)
            ? callback
            : function(){}
          ;
          module.debug('Hiding sidebar', callback);
          if(module.is.open()) {
            if(!settings.overlay) {
              module.pullPage();
              module.remove.pushed();
            }
            module.remove.active();
            callback();
            $.proxy(settings.onChange, element)();
            $.proxy(settings.onHide, element)();
          }
        },

        hideAll: function() {
          $(selector.sidebar)
            .filter(':visible')
              .sidebar('hide')
          ;
        },

        toggle: function() {
          if(module.is.closed()) {
            module.show();
          }
          else {
            module.hide();
          }
        },

        pushPage: function() {
          var
            direction = module.get.direction(),
            distance  = (module.is.vertical())
              ? $module.outerHeight()
              : $module.outerWidth()
          ;
          if(settings.useCSS) {
            module.debug('Using CSS to animate body');
            module.add.bodyCSS(direction, distance);
            module.set.pushed();
          }
          else {
            module.animatePage(direction, distance, module.set.pushed);
          }
        },

        pullPage: function() {
          var
            direction = module.get.direction()
          ;
          if(settings.useCSS) {
            module.debug('Resetting body position css');
            module.remove.bodyCSS();
          }
          else {
            module.debug('Resetting body position using javascript');
            module.animatePage(direction, 0);
          }
          module.remove.pushed();
        },

        animatePage: function(direction, distance) {
          var
            animateSettings = {}
          ;
          animateSettings['padding-' + direction] = distance;
          module.debug('Using javascript to animate body', animateSettings);
          $body
            .animate(animateSettings, settings.duration, module.set.pushed)
          ;
        },

        add: {
          bodyCSS: function(direction, distance) {
            var
              style
            ;
            if(direction !== className.bottom) {
              style = ''
                + '<style title="' + namespace + '">'
                + 'body.pushed {'
                + '  margin-' + direction + ': ' + distance + 'px !important;'
                + '}'
                + '</style>'
              ;
            }
            $head.append(style);
            module.debug('Adding body css to head', $style);
          }
        },


        remove: {
          bodyCSS: function() {
            module.debug('Removing body css styles', $style);
            module.refresh();
            $style.remove();
          },
          active: function() {
            $module.removeClass(className.active);
          },
          pushed: function() {
            module.verbose('Removing body push state', module.get.direction());
            $body
              .removeClass(className[ module.get.direction() ])
              .removeClass(className.pushed)
            ;
          }
        },

        set: {
          active: function() {
            $module.addClass(className.active);
          },
          pushed: function() {
            module.verbose('Adding body push state', module.get.direction());
            $body
              .addClass(className[ module.get.direction() ])
              .addClass(className.pushed)
            ;
          }
        },

        get: {
          direction: function() {
            if($module.hasClass(className.top)) {
              return className.top;
            }
            else if($module.hasClass(className.right)) {
              return className.right;
            }
            else if($module.hasClass(className.bottom)) {
              return className.bottom;
            }
            else {
              return className.left;
            }
          },
          transitionEvent: function() {
            var
              element     = document.createElement('element'),
              transitions = {
                'transition'       :'transitionend',
                'OTransition'      :'oTransitionEnd',
                'MozTransition'    :'transitionend',
                'WebkitTransition' :'webkitTransitionEnd'
              },
              transition
            ;
            for(transition in transitions){
              if( element.style[transition] !== undefined ){
                return transitions[transition];
              }
            }
          }
        },

        is: {
          open: function() {
            return $module.is(':animated') || $module.hasClass(className.active);
          },
          closed: function() {
            return !module.is.open();
          },
          vertical: function() {
            return $module.hasClass(className.top);
          }
        },

        setting: function(name, value) {
          if( $.isPlainObject(name) ) {
            $.extend(true, settings, name);
          }
          else if(value !== undefined) {
            settings[name] = value;
          }
          else {
            return settings[name];
          }
        },
        internal: function(name, value) {
          if( $.isPlainObject(name) ) {
            $.extend(true, module, name);
          }
          else if(value !== undefined) {
            module[name] = value;
          }
          else {
            return module[name];
          }
        },
        debug: function() {
          if(settings.debug) {
            if(settings.performance) {
              module.performance.log(arguments);
            }
            else {
              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');
              module.debug.apply(console, arguments);
            }
          }
        },
        verbose: function() {
          if(settings.verbose && settings.debug) {
            if(settings.performance) {
              module.performance.log(arguments);
            }
            else {
              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');
              module.verbose.apply(console, arguments);
            }
          }
        },
        error: function() {
          module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');
          module.error.apply(console, arguments);
        },
        performance: {
          log: function(message) {
            var
              currentTime,
              executionTime,
              previousTime
            ;
            if(settings.performance) {
              currentTime   = new Date().getTime();
              previousTime  = time || currentTime;
              executionTime = currentTime - previousTime;
              time          = currentTime;
              performance.push({
                'Element'        : element,
                'Name'           : message[0],
                'Arguments'      : [].slice.call(message, 1) || '',
                'Execution Time' : executionTime
              });
            }
            clearTimeout(module.performance.timer);
            module.performance.timer = setTimeout(module.performance.display, 100);
          },
          display: function() {
            var
              title = settings.name + ':',
              totalTime = 0
            ;
            time = false;
            clearTimeout(module.performance.timer);
            $.each(performance, function(index, data) {
              totalTime += data['Execution Time'];
            });
            title += ' ' + totalTime + 'ms';
            if(moduleSelector) {
              title += ' \'' + moduleSelector + '\'';
            }
            if($allModules.size() > 1) {
              title += ' ' + '(' + $allModules.size() + ')';
            }
            if( (console.group !== undefined || console.table !== undefined) && performance.length > 0) {
              console.groupCollapsed(title);
              if(console.table) {
                console.table(performance);
              }
              else {
                $.each(performance, function(index, data) {
                  console.log(data['Name'] + ': ' + data['Execution Time']+'ms');
                });
              }
              console.groupEnd();
            }
            performance = [];
          }
        },
        invoke: function(query, passedArguments, context) {
          var
            object = instance,
            maxDepth,
            found,
            response
          ;
          passedArguments = passedArguments || queryArguments;
          context         = element         || context;
          if(typeof query == 'string' && object !== undefined) {
            query    = query.split(/[\. ]/);
            maxDepth = query.length - 1;
            $.each(query, function(depth, value) {
              var camelCaseValue = (depth != maxDepth)
                ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1)
                : query
              ;
              if( $.isPlainObject( object[camelCaseValue] ) && (depth != maxDepth) ) {
                object = object[camelCaseValue];
              }
              else if( object[camelCaseValue] !== undefined ) {
                found = object[camelCaseValue];
                return false;
              }
              else if( $.isPlainObject( object[value] ) && (depth != maxDepth) ) {
                object = object[value];
              }
              else if( object[value] !== undefined ) {
                found = object[value];
                return false;
              }
              else {
                return false;
              }
            });
          }
          if ( $.isFunction( found ) ) {
            response = found.apply(context, passedArguments);
          }
          else if(found !== undefined) {
            response = found;
          }
          if($.isArray(returnedValue)) {
            returnedValue.push(response);
          }
          else if(returnedValue !== undefined) {
            returnedValue = [returnedValue, response];
          }
          else if(response !== undefined) {
            returnedValue = response;
          }
          return found;
        }
      };
      if(methodInvoked) {
        if(instance === undefined) {
          module.initialize();
        }
        module.invoke(query);
      }
      else {
        if(instance !== undefined) {
          module.destroy();
        }
        module.initialize();
      }
    })
  ;

  return (returnedValue !== undefined)
    ? returnedValue
    : this
  ;
};

$.fn.sidebar.settings = {

  name        : 'Sidebar',
  namespace   : 'sidebar',

  debug       : false,
  verbose     : true,
  performance : true,

  useCSS      : true,
  exclusive   : true,
  overlay     : false,
  duration    : 300,

  onChange     : function(){},
  onShow       : function(){},
  onHide       : function(){},

  className: {
    active : 'active',
    pushed : 'pushed',
    top    : 'top',
    left   : 'left',
    right  : 'right',
    bottom : 'bottom'
  },

  selector: {
    sidebar: '.ui.sidebar'
  },

  error   : {
    method   : 'The method you called is not defined.',
    notFound : 'There were no elements that matched the specified selector'
  }

};

})( jQuery, window , document );

/*
 * # Semantic - Tab
 * http://github.com/jlukic/semantic-ui/
 *
 * Copyright 2013 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */


;(function ($, window, document, undefined) {

  $.fn.tab = function(parameters) {

    var
      settings        = $.extend(true, {}, $.fn.tab.settings, parameters),

      $module         = $(this),
      $tabs           = $(settings.context).find(settings.selector.tabs),

      moduleSelector  = $module.selector || '',

      cache           = {},
      firstLoad       = true,
      recursionDepth  = 0,

      activeTabPath,
      parameterArray,
      historyEvent,

      element         = this,
      time            = new Date().getTime(),
      performance     = [],

      className       = settings.className,
      metadata        = settings.metadata,
      error           = settings.error,

      eventNamespace  = '.' + settings.namespace,
      moduleNamespace = 'module-' + settings.namespace,

      instance        = $module.data(moduleNamespace),

      query           = arguments[0],
      methodInvoked   = (instance !== undefined && typeof query == 'string'),
      queryArguments  = [].slice.call(arguments, 1),

      module,
      returnedValue
    ;

    module = {

      initialize: function() {
        module.debug('Initializing Tabs', $module);

        // set up automatic routing
        if(settings.auto) {
          module.verbose('Setting up automatic tab retrieval from server');
          settings.apiSettings = {
            url: settings.path + '/{$tab}'
          };
        }

        // attach history events
        if(settings.history) {
          module.debug('Initializing page state');
          if( $.address === undefined ) {
            module.error(error.state);
            return false;
          }
          else {
            if(settings.historyType == 'hash') {
              module.debug('Using hash state change to manage state');
            }
            if(settings.historyType == 'html5') {
              module.debug('Using HTML5 to manage state');
              if(settings.path !== false) {
                $.address
                  .history(true)
                  .state(settings.path)
                ;
              }
              else {
                module.error(error.path);
                return false;
              }
            }
            $.address
              .unbind('change')
              .bind('change', module.event.history.change)
            ;
          }
        }

        // attach events if navigation wasn't set to window
        if( !$.isWindow( element ) ) {
          module.debug('Attaching tab activation events to element', $module);
          $module
            .on('click' + eventNamespace, module.event.click)
          ;
        }
        module.instantiate();
      },

      instantiate: function () {
        module.verbose('Storing instance of module', module);
        $module
          .data(moduleNamespace, module)
        ;
      },

      destroy: function() {
        module.debug('Destroying tabs', $module);
        $module
          .removeData(moduleNamespace)
          .off(eventNamespace)
        ;
      },

      event: {
        click: function(event) {
          var
            tabPath = $(this).data(metadata.tab)
          ;
          if(tabPath !== undefined) {
            if(settings.history) {
              module.verbose('Updating page state', event);
              $.address.value(tabPath);
            }
            else {
              module.verbose('Changing tab without state management', event);
              module.changeTab(tabPath);
            }
            event.preventDefault();
          }
          else {
            module.debug('No tab specified');
          }
        },
        history: {
          change: function(event) {
            var
              tabPath   = event.pathNames.join('/') || module.get.initialPath(),
              pageTitle = settings.templates.determineTitle(tabPath) || false
            ;
            module.debug('History change event', tabPath, event);
            historyEvent = event;
            if(tabPath !== undefined) {
              module.changeTab(tabPath);
            }
            if(pageTitle) {
              $.address.title(pageTitle);
            }
          }
        }
      },

      refresh: function() {
        if(activeTabPath) {
          module.debug('Refreshing tab', activeTabPath);
          module.changeTab(activeTabPath);
        }
      },

      cache: {

        read: function(cacheKey) {
          return (cacheKey !== undefined)
            ? cache[cacheKey]
            : false
          ;
        },
        add: function(cacheKey, content) {
          cacheKey = cacheKey || activeTabPath;
          module.debug('Adding cached content for', cacheKey);
          cache[cacheKey] = content;
        },
        remove: function(cacheKey) {
          cacheKey = cacheKey || activeTabPath;
          module.debug('Removing cached content for', cacheKey);
          delete cache[cacheKey];
        }
      },

      set: {
        state: function(url) {
          $.address.value(url);
        }
      },

      changeTab: function(tabPath) {
        var
          pushStateAvailable = (window.history && window.history.pushState),
          shouldIgnoreLoad   = (pushStateAvailable && settings.ignoreFirstLoad && firstLoad),
          remoteContent      = (settings.auto || $.isPlainObject(settings.apiSettings) ),
          // only get default path if not remote content
          pathArray = (remoteContent && !shouldIgnoreLoad)
            ? module.utilities.pathToArray(tabPath)
            : module.get.defaultPathArray(tabPath)
        ;
        tabPath = module.utilities.arrayToPath(pathArray);
        module.deactivate.all();
        $.each(pathArray, function(index, tab) {
          var
            currentPathArray   = pathArray.slice(0, index + 1),
            currentPath        = module.utilities.arrayToPath(currentPathArray),

            isTab              = module.is.tab(currentPath),
            isLastIndex        = (index + 1 == pathArray.length),

            $tab               = module.get.tabElement(currentPath),
            nextPathArray,
            nextPath,
            isLastTab
          ;
          module.verbose('Looking for tab', tab);
          if(isTab) {
            module.verbose('Tab was found', tab);

            // scope up
            activeTabPath = currentPath;
            parameterArray = module.utilities.filterArray(pathArray, currentPathArray);

            if(isLastIndex) {
              isLastTab = true;
            }
            else {
              nextPathArray = pathArray.slice(0, index + 2);
              nextPath      = module.utilities.arrayToPath(nextPathArray);
              isLastTab     = ( !module.is.tab(nextPath) );
              if(isLastTab) {
                module.verbose('Tab parameters found', nextPathArray);
              }
            }
            if(isLastTab && remoteContent) {
              if(!shouldIgnoreLoad) {
                module.activate.navigation(currentPath);
                module.content.fetch(currentPath, tabPath);
              }
              else {
                module.debug('Ignoring remote content on first tab load', currentPath);
                firstLoad = false;
                module.cache.add(tabPath, $tab.html());
                module.activate.all(currentPath);
                $.proxy(settings.onTabInit, $tab)(currentPath, parameterArray, historyEvent);
                $.proxy(settings.onTabLoad, $tab)(currentPath, parameterArray, historyEvent);
              }
              return false;
            }
            else {
              module.debug('Opened local tab', currentPath);
              module.activate.all(currentPath);
              if( !module.cache.read(currentPath) ) {
                module.cache.add(currentPath, true);
                module.debug('First time tab loaded calling tab init');
                $.proxy(settings.onTabInit, $tab)(currentPath, parameterArray, historyEvent);
              }
              $.proxy(settings.onTabLoad, $tab)(currentPath, parameterArray, historyEvent);
            }
          }
          else {
            module.error(error.missingTab, tab);
            return false;
          }
        });
      },

      content: {

        fetch: function(tabPath, fullTabPath) {
          var
            $tab             = module.get.tabElement(tabPath),
            apiSettings      = {
              dataType     : 'html',
              stateContext : $tab,
              success      : function(response) {
                module.cache.add(fullTabPath, response);
                module.content.update(tabPath, response);
                if(tabPath == activeTabPath) {
                  module.debug('Content loaded', tabPath);
                  module.activate.tab(tabPath);
                }
                else {
                  module.debug('Content loaded in background', tabPath);
                }
                $.proxy(settings.onTabInit, $tab)(tabPath, parameterArray, historyEvent);
                $.proxy(settings.onTabLoad, $tab)(tabPath, parameterArray, historyEvent);
              },
              urlData: { tab: fullTabPath }
            },
            request         = $tab.data(metadata.promise) || false,
            existingRequest = ( request && request.state() === 'pending' ),
            requestSettings,
            cachedContent
          ;

          fullTabPath   = fullTabPath || tabPath;
          cachedContent = module.cache.read(fullTabPath);

          if(settings.cache && cachedContent) {
            module.debug('Showing existing content', fullTabPath);
            module.content.update(tabPath, cachedContent);
            module.activate.tab(tabPath);
            $.proxy(settings.onTabLoad, $tab)(tabPath, parameterArray, historyEvent);
          }
          else if(existingRequest) {
            module.debug('Content is already loading', fullTabPath);
            $tab
              .addClass(className.loading)
            ;
          }
          else if($.api !== undefined) {
            console.log(settings.apiSettings);
            requestSettings = $.extend(true, { headers: { 'X-Remote': true } }, settings.apiSettings, apiSettings);
            module.debug('Retrieving remote content', fullTabPath, requestSettings);
            $.api( requestSettings );
          }
          else {
            module.error(error.api);
          }
        },

        update: function(tabPath, html) {
          module.debug('Updating html for', tabPath);
          var
            $tab = module.get.tabElement(tabPath)
          ;
          $tab
            .html(html)
          ;
        }
      },

      activate: {
        all: function(tabPath) {
          module.activate.tab(tabPath);
          module.activate.navigation(tabPath);
        },
        tab: function(tabPath) {
          var
            $tab = module.get.tabElement(tabPath)
          ;
          module.verbose('Showing tab content for', $tab);
          $tab.addClass(className.active);
        },
        navigation: function(tabPath) {
          var
            $navigation = module.get.navElement(tabPath)
          ;
          module.verbose('Activating tab navigation for', $navigation, tabPath);
          $navigation.addClass(className.active);
        }
      },

      deactivate: {
        all: function() {
          module.deactivate.navigation();
          module.deactivate.tabs();
        },
        navigation: function() {
          $module
            .removeClass(className.active)
          ;
        },
        tabs: function() {
          $tabs
            .removeClass(className.active + ' ' + className.loading)
          ;
        }
      },

      is: {
        tab: function(tabName) {
          return (tabName !== undefined)
            ? ( module.get.tabElement(tabName).size() > 0 )
            : false
          ;
        }
      },

      get: {
        initialPath: function() {
          return $module.eq(0).data(metadata.tab) || $tabs.eq(0).data(metadata.tab);
        },
        path: function() {
          return $.address.value();
        },
        // adds default tabs to tab path
        defaultPathArray: function(tabPath) {
          return module.utilities.pathToArray( module.get.defaultPath(tabPath) );
        },
        defaultPath: function(tabPath) {
          var
            $defaultNav = $module.filter('[data-' + metadata.tab + '^="' + tabPath + '/"]').eq(0),
            defaultTab  = $defaultNav.data(metadata.tab) || false
          ;
          if( defaultTab ) {
            module.debug('Found default tab', defaultTab);
            if(recursionDepth < settings.maxDepth) {
              recursionDepth++;
              return module.get.defaultPath(defaultTab);
            }
            module.error(error.recursion);
          }
          else {
            module.debug('No default tabs found for', tabPath, $tabs);
          }
          recursionDepth = 0;
          return tabPath;
        },
        navElement: function(tabPath) {
          tabPath = tabPath || activeTabPath;
          return $module.filter('[data-' + metadata.tab + '="' + tabPath + '"]');
        },
        tabElement: function(tabPath) {
          var
            $fullPathTab,
            $simplePathTab,
            tabPathArray,
            lastTab
          ;
          tabPath        = tabPath || activeTabPath;
          tabPathArray   = module.utilities.pathToArray(tabPath);
          lastTab        = module.utilities.last(tabPathArray);
          $fullPathTab   = $tabs.filter('[data-' + metadata.tab + '="' + lastTab + '"]');
          $simplePathTab = $tabs.filter('[data-' + metadata.tab + '="' + tabPath + '"]');
          return ($fullPathTab.size() > 0)
            ? $fullPathTab
            : $simplePathTab
          ;
        },
        tab: function() {
          return activeTabPath;
        }
      },

      utilities: {
        filterArray: function(keepArray, removeArray) {
          return $.grep(keepArray, function(keepValue) {
            return ( $.inArray(keepValue, removeArray) == -1);
          });
        },
        last: function(array) {
          return $.isArray(array)
            ? array[ array.length - 1]
            : false
          ;
        },
        pathToArray: function(pathName) {
          if(pathName === undefined) {
            pathName = activeTabPath;
          }
          return typeof pathName == 'string'
            ? pathName.split('/')
            : [pathName]
          ;
        },
        arrayToPath: function(pathArray) {
          return $.isArray(pathArray)
            ? pathArray.join('/')
            : false
          ;
        }
      },

      setting: function(name, value) {
        if( $.isPlainObject(name) ) {
          $.extend(true, settings, name);
        }
        else if(value !== undefined) {
          settings[name] = value;
        }
        else {
          return settings[name];
        }
      },
      internal: function(name, value) {
        if( $.isPlainObject(name) ) {
          $.extend(true, module, name);
        }
        else if(value !== undefined) {
          module[name] = value;
        }
        else {
          return module[name];
        }
      },
      debug: function() {
        if(settings.debug) {
          if(settings.performance) {
            module.performance.log(arguments);
          }
          else {
            module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');
            module.debug.apply(console, arguments);
          }
        }
      },
      verbose: function() {
        if(settings.verbose && settings.debug) {
          if(settings.performance) {
            module.performance.log(arguments);
          }
          else {
            module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');
            module.verbose.apply(console, arguments);
          }
        }
      },
      error: function() {
        module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');
        module.error.apply(console, arguments);
      },
      performance: {
        log: function(message) {
          var
            currentTime,
            executionTime,
            previousTime
          ;
          if(settings.performance) {
            currentTime   = new Date().getTime();
            previousTime  = time || currentTime;
            executionTime = currentTime - previousTime;
            time          = currentTime;
            performance.push({
              'Element'        : element,
              'Name'           : message[0],
              'Arguments'      : [].slice.call(message, 1) || '',
              'Execution Time' : executionTime
            });
          }
          clearTimeout(module.performance.timer);
          module.performance.timer = setTimeout(module.performance.display, 100);
        },
        display: function() {
          var
            title = settings.name + ':',
            totalTime = 0
          ;
          time = false;
          clearTimeout(module.performance.timer);
          $.each(performance, function(index, data) {
            totalTime += data['Execution Time'];
          });
          title += ' ' + totalTime + 'ms';
          if(moduleSelector) {
            title += ' \'' + moduleSelector + '\'';
          }
          if( (console.group !== undefined || console.table !== undefined) && performance.length > 0) {
            console.groupCollapsed(title);
            if(console.table) {
              console.table(performance);
            }
            else {
              $.each(performance, function(index, data) {
                console.log(data['Name'] + ': ' + data['Execution Time']+'ms');
              });
            }
            console.groupEnd();
          }
          performance = [];
        }
      },
      invoke: function(query, passedArguments, context) {
        var
          object = instance,
          maxDepth,
          found,
          response
        ;
        passedArguments = passedArguments || queryArguments;
        context         = element         || context;
        if(typeof query == 'string' && object !== undefined) {
          query    = query.split(/[\. ]/);
          maxDepth = query.length - 1;
          $.each(query, function(depth, value) {
            var camelCaseValue = (depth != maxDepth)
              ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1)
              : query
            ;
            if( $.isPlainObject( object[camelCaseValue] ) && (depth != maxDepth) ) {
              object = object[camelCaseValue];
            }
            else if( object[camelCaseValue] !== undefined ) {
              found = object[camelCaseValue];
              return false;
            }
            else if( $.isPlainObject( object[value] ) && (depth != maxDepth) ) {
              object = object[value];
            }
            else if( object[value] !== undefined ) {
              found = object[value];
              return false;
            }
            else {
              return false;
            }
          });
        }
        if ( $.isFunction( found ) ) {
          response = found.apply(context, passedArguments);
        }
        else if(found !== undefined) {
          response = found;
        }
        if($.isArray(returnedValue)) {
          returnedValue.push(response);
        }
        else if(returnedValue !== undefined) {
          returnedValue = [returnedValue, response];
        }
        else if(response !== undefined) {
          returnedValue = response;
        }
        return found;
      }
    };

    if(methodInvoked) {
      if(instance === undefined) {
        module.initialize();
      }
      module.invoke(query);
    }
    else {
      if(instance !== undefined) {
        module.destroy();
      }
      module.initialize();
    }

    return (returnedValue !== undefined)
      ? returnedValue
      : this
    ;

  };

  // shortcut for tabbed content with no defined navigation
  $.tab = function(settings) {
    $(window).tab(settings);
  };

  $.fn.tab.settings = {

    name        : 'Tab',
    debug       : false,
    verbose     : true,
    performance : true,
    namespace   : 'tab',

    // only called first time a tab's content is loaded (when remote source)
    onTabInit   : function(tabPath, parameterArray, historyEvent) {},
    // called on every load
    onTabLoad   : function(tabPath, parameterArray, historyEvent) {},

    templates   : {
      determineTitle: function(tabArray) {}
    },

    // uses pjax style endpoints fetching content from same url with remote-content headers
    auto            : false,
    history         : true,
    historyType     : 'hash',
    path            : false,

    context         : 'body',

    // max depth a tab can be nested
    maxDepth        : 25,
    // dont load content on first load
    ignoreFirstLoad : false,
    // load tab content new every tab click
    alwaysRefresh   : false,
    // cache the content requests to pull locally
    cache           : true,
    // settings for api call
    apiSettings     : false,

    error: {
      api        : 'You attempted to load content without API module',
      method     : 'The method you called is not defined',
      missingTab : 'Tab cannot be found',
      noContent  : 'The tab you specified is missing a content url.',
      path       : 'History enabled, but no path was specified',
      recursion  : 'Max recursive depth reached',
      state      : 'The state library has not been initialized'
    },

    metadata : {
      tab    : 'tab',
      loaded : 'loaded',
      promise: 'promise'
    },

    className   : {
      loading : 'loading',
      active  : 'active'
    },

    selector    : {
      tabs : '.ui.tab'
    }

  };

})( jQuery, window , document );

/*
 * # Semantic - Transition
 * http://github.com/jlukic/semantic-ui/
 *
 *
 * Copyright 2013 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */

;(function ( $, window, document, undefined ) {

$.fn.transition = function() {
  var
    $allModules     = $(this),
    moduleSelector  = $allModules.selector || '',

    time            = new Date().getTime(),
    performance     = [],

    moduleArguments = arguments,
    query           = moduleArguments[0],
    queryArguments  = [].slice.call(arguments, 1),
    methodInvoked   = (typeof query === 'string'),

    requestAnimationFrame = window.requestAnimationFrame
      || window.mozRequestAnimationFrame
      || window.webkitRequestAnimationFrame
      || window.msRequestAnimationFrame
      || function(callback) { setTimeout(callback, 0); },

    returnedValue
  ;
  $allModules
    .each(function() {
      var
        $module  = $(this),
        element  = this,

        // set at run time
        settings,
        instance,

        error,
        className,
        metadata,
        animationEnd,
        animationName,

        namespace,
        moduleNamespace,
        module
      ;

      module = {

        initialize: function() {
          // get settings
          settings        = module.get.settings.apply(element, moduleArguments);
          module.verbose('Converted arguments into settings object', settings);

          // set shortcuts
          error           = settings.error;
          className       = settings.className;
          namespace       = settings.namespace;
          metadata        = settings.metadata;
          moduleNamespace = 'module-' + namespace;

          animationEnd    = module.get.animationEvent();
          animationName   = module.get.animationName();

          instance        = $module.data(moduleNamespace) || module;

          if(methodInvoked) {
            methodInvoked = module.invoke(query);
          }
          // no internal method was found matching query or query not made
          if(methodInvoked === false) {
            module.animate();
          }
          module.instantiate();
        },

        instantiate: function() {
          module.verbose('Storing instance of module', module);
          $module
            .data(moduleNamespace, instance)
          ;
        },

        destroy: function() {
          module.verbose('Destroying previous module for', element);
          $module
            .removeData(moduleNamespace)
          ;
        },

        refresh: function() {
          module.verbose('Refreshing display type on next animation');
          delete instance.displayType;
        },

        forceRepaint: function() {
          module.verbose('Forcing element repaint');
          var
            $parentElement = $module.parent(),
            $nextElement = $module.next()
          ;
          if($nextElement.size() === 0) {
            $module.detach().appendTo($parentElement);
          }
          else {
            $module.detach().insertBefore($nextElement);
          }
        },

        repaint: function() {
          module.verbose('Repainting element');
          var
            fakeAssignment = element.offsetWidth
          ;
        },

        animate: function(overrideSettings) {
          settings = overrideSettings || settings;
          if(!module.is.supported()) {
            module.error(error.support);
            return false;
          }
          module.debug('Preparing animation', settings.animation);
          if(module.is.animating() && settings.queue) {
            if(!settings.allowRepeats && module.has.direction() && module.is.occuring() && instance.queuing !== true) {
              module.error(error.repeated);
            }
            else {
              module.queue(settings.animation);
            }
            return false;
          }
          if(module.can.animate) {
            module.set.animating(settings.animation);
          }
          else {
            module.error(error.noAnimation, settings.animation);
          }
        },

        reset: function() {
          module.debug('Resetting animation to beginning conditions');
          $module.off(animationEnd);
          module.restore.conditions();
          module.hide();
          module.remove.animating();
        },

        queue: function(animation) {
          module.debug('Queueing animation of', animation);
          instance.queuing = true;
          $module
            .one(animationEnd, function() {
              instance.queuing = false;
              module.repaint();
              module.animate.apply(this, settings);
            })
          ;
        },

        complete: function () {
          module.verbose('CSS animation complete', settings.animation);
          if(!module.is.looping()) {
            if( module.is.outward() ) {
              module.verbose('Animation is outward, hiding element');
              module.restore.conditions();
              module.remove.display();
              module.hide();
              $.proxy(settings.onHide, this)();
            }
            else if( module.is.inward() ) {
              module.verbose('Animation is outward, showing element');
              module.restore.conditions();
              module.show();
              $.proxy(settings.onShow, this)();
            }
            else {
              module.restore.conditions();
            }
            module.remove.duration();
            module.remove.animating();
          }
          $.proxy(settings.complete, this)();
        },

        has: {
          direction: function(animation) {
            animation = animation || settings.animation;
            if( animation.search(className.inward) !== -1 || animation.search(className.outward) !== -1) {
              module.debug('Direction already set in animation');
              return true;
            }
            return false;
          }
        },

        set: {

          animating: function(animation) {
            animation = animation || settings.animation;
            module.save.conditions();
            if(module.can.transition() && !module.has.direction()) {
              module.set.direction();
            }
            module.remove.hidden();
            module.set.display();
            $module
              .addClass(className.animating)
              .addClass(className.transition)
              .addClass(animation)
              .one(animationEnd, module.complete)
            ;
            module.set.duration(settings.duration);
            module.debug('Starting tween', settings.animation, $module.attr('class'));
          },

          display: function() {
            var
              displayType = module.get.displayType()
            ;
            if(displayType !== 'block') {
              module.verbose('Setting final visibility to', displayType);
              $module
                .css({
                  display: displayType
                })
              ;
            }
          },

          direction: function() {
            if($module.is(':visible')) {
              module.debug('Automatically determining the direction of animation', 'Outward');
              $module
                .removeClass(className.inward)
                .addClass(className.outward)
              ;
            }
            else {
              module.debug('Automatically determining the direction of animation', 'Inward');
              $module
                .removeClass(className.outward)
                .addClass(className.inward)
              ;
            }
          },

          looping: function() {
            module.debug('Transition set to loop');
            $module
              .addClass(className.looping)
            ;
          },

          duration: function(duration) {
            duration = duration || settings.duration;
            duration = (typeof duration == 'number')
              ? duration + 'ms'
              : duration
            ;
            module.verbose('Setting animation duration', duration);
            $module
              .css({
                '-webkit-animation-duration': duration,
                '-moz-animation-duration': duration,
                '-ms-animation-duration': duration,
                '-o-animation-duration': duration,
                'animation-duration': duration
              })
            ;
          },

          hidden: function() {
            $module
              .addClass(className.transition)
              .addClass(className.hidden)
            ;
          },

          visible: function() {
            $module
              .addClass(className.transition)
              .addClass(className.visible)
            ;
          }
        },

        save: {
          displayType: function(displayType) {
            instance.displayType = displayType;
          },
          transitionExists: function(animation, exists) {
            $.fn.transition.exists[animation] = exists;
            module.verbose('Saving existence of transition', animation, exists);
          },
          conditions: function() {
            instance.cache = {
              className : $module.attr('class'),
              style     : $module.attr('style')
            };
            module.verbose('Saving original attributes', instance.cache);
          }
        },

        restore: {
          conditions: function() {
            if(instance.cache === undefined) {
              return false;
            }
            if(instance.cache.className) {
              $module.attr('class', instance.cache.className);
            }
            else {
              $module.removeAttr('class');
            }
            if(instance.cache.style) {
              $module.attr('style', instance.cache.style);
            }
            else {
              if(module.get.displayType() === 'block') {
                $module.removeAttr('style');
              }
            }
            if(module.is.looping()) {
              module.remove.looping();
            }
            module.verbose('Restoring original attributes', instance.cache);
          }
        },

        remove: {

          animating: function() {
            $module.removeClass(className.animating);
          },

          display: function() {
            if(instance.displayType !== undefined) {
              $module.css('display', '');
            }
          },

          duration: function() {
            $module
              .css({
                '-webkit-animation-duration' : '',
                '-moz-animation-duration'    : '',
                '-ms-animation-duration'     : '',
                '-o-animation-duration'      : '',
                'animation-duration'         : ''
              })
            ;
          },

          hidden: function() {
            $module.removeClass(className.hidden);
          },

          visible: function() {
            $module.removeClass(className.visible);
          },

          looping: function() {
            module.debug('Transitions are no longer looping');
            $module
              .removeClass(className.looping)
            ;
            module.forceRepaint();
          }

        },

        get: {

          settings: function(animation, duration, complete) {
            // single settings object
            if(typeof animation == 'object') {
              return $.extend(true, {}, $.fn.transition.settings, animation);
            }
            // all arguments provided
            else if(typeof complete == 'function') {
              return $.extend({}, $.fn.transition.settings, {
                animation : animation,
                complete  : complete,
                duration  : duration
              });
            }
            // only duration provided
            else if(typeof duration == 'string' || typeof duration == 'number') {
              return $.extend({}, $.fn.transition.settings, {
                animation : animation,
                duration  : duration
              });
            }
            // duration is actually settings object
            else if(typeof duration == 'object') {
              return $.extend({}, $.fn.transition.settings, duration, {
                animation : animation
              });
            }
            // duration is actually callback
            else if(typeof duration == 'function') {
              return $.extend({}, $.fn.transition.settings, {
                animation : animation,
                complete  : duration
              });
            }
            // only animation provided
            else {
              return $.extend({}, $.fn.transition.settings, {
                animation : animation
              });
            }
            return $.fn.transition.settings;
          },

          displayType: function() {
            if(instance.displayType === undefined) {
              // create fake element to determine display state
              module.can.transition();
            }
            return instance.displayType;
          },

          transitionExists: function(animation) {
            return $.fn.transition.exists[animation];
          },

          animationName: function() {
            var
              element     = document.createElement('div'),
              animations  = {
                'animation'       :'animationName',
                'OAnimation'      :'oAnimationName',
                'MozAnimation'    :'mozAnimationName',
                'WebkitAnimation' :'webkitAnimationName'
              },
              animation
            ;
            for(animation in animations){
              if( element.style[animation] !== undefined ){
                module.verbose('Determined animation vendor name property', animations[animation]);
                return animations[animation];
              }
            }
            return false;
          },

          animationEvent: function() {
            var
              element     = document.createElement('div'),
              animations  = {
                'animation'       :'animationend',
                'OAnimation'      :'oAnimationEnd',
                'MozAnimation'    :'mozAnimationEnd',
                'WebkitAnimation' :'webkitAnimationEnd'
              },
              animation
            ;
            for(animation in animations){
              if( element.style[animation] !== undefined ){
                module.verbose('Determined animation vendor end event', animations[animation]);
                return animations[animation];
              }
            }
            return false;
          }

        },

        can: {
          animate: function() {
            if($module.css(settings.animation) !== 'none') {
              module.debug('CSS definition found',  $module.css(settings.animation));
              return true;
            }
            else {
              module.debug('Unable to find css definition', $module.attr('class'));
              return false;
            }
          },
          transition: function() {
            var
              elementClass     = $module.attr('class'),
              animation        = settings.animation,
              transitionExists = module.get.transitionExists(settings.animation),
              $clone,
              currentAnimation,
              inAnimation,
              displayType
            ;
            if( transitionExists === undefined || instance.displayType === undefined) {
              module.verbose('Determining whether animation exists');
              $clone = $('<div>').addClass( elementClass ).appendTo($('body'));
              currentAnimation = $clone
                .removeClass(className.inward)
                .removeClass(className.outward)
                .addClass(className.animating)
                .addClass(className.transition)
                .addClass(animation)
                .css(animationName)
              ;
              inAnimation = $clone
                .addClass(className.inward)
                .css(animationName)
              ;
              displayType = $clone
                .attr('class', elementClass)
                .show()
                .css('display')
              ;
              module.verbose('Determining final display state', displayType);
              if(currentAnimation != inAnimation) {
                module.debug('Transition exists for animation', animation);
                transitionExists = true;
              }
              else {
                module.debug('Static animation found', animation, displayType);
                transitionExists = false;
              }
              $clone.remove();
              module.save.displayType(displayType);
              module.save.transitionExists(animation, transitionExists);
            }
            return transitionExists;
          }
        },

        is: {
          animating: function() {
            return $module.hasClass(className.animating);
          },
          inward: function() {
            return $module.hasClass(className.inward);
          },
          outward: function() {
            return $module.hasClass(className.outward);
          },
          looping: function() {
            return $module.hasClass(className.looping);
          },
          occuring: function(animation) {
            animation = animation || settings.animation;
            return ( $module.hasClass(animation) );
          },
          visible: function() {
            return $module.is(':visible');
          },
          supported: function() {
            return(animationName !== false && animationEnd !== false);
          }
        },

        hide: function() {
          module.verbose('Hiding element');
          module.remove.visible();
          module.set.hidden();
          module.repaint();
        },

        show: function(display) {
          module.verbose('Showing element', display);
          module.remove.hidden();
          module.set.visible();
          module.repaint();
        },

        start: function() {
          module.verbose('Starting animation');
          $module.removeClass(className.disabled);
        },

        stop: function() {
          module.debug('Stopping animation');
          $module.addClass(className.disabled);
        },

        toggle: function() {
          module.debug('Toggling play status');
          $module.toggleClass(className.disabled);
        },

        setting: function(name, value) {
          if( $.isPlainObject(name) ) {
            $.extend(true, settings, name);
          }
          else if(value !== undefined) {
            settings[name] = value;
          }
          else {
            return settings[name];
          }
        },
        internal: function(name, value) {
          if( $.isPlainObject(name) ) {
            $.extend(true, module, name);
          }
          else if(value !== undefined) {
            module[name] = value;
          }
          else {
            return module[name];
          }
        },
        debug: function() {
          if(settings.debug) {
            if(settings.performance) {
              module.performance.log(arguments);
            }
            else {
              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');
              module.debug.apply(console, arguments);
            }
          }
        },
        verbose: function() {
          if(settings.verbose && settings.debug) {
            if(settings.performance) {
              module.performance.log(arguments);
            }
            else {
              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');
              module.verbose.apply(console, arguments);
            }
          }
        },
        error: function() {
          module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');
          module.error.apply(console, arguments);
        },
        performance: {
          log: function(message) {
            var
              currentTime,
              executionTime,
              previousTime
            ;
            if(settings.performance) {
              currentTime   = new Date().getTime();
              previousTime  = time || currentTime;
              executionTime = currentTime - previousTime;
              time          = currentTime;
              performance.push({
                'Element'        : element,
                'Name'           : message[0],
                'Arguments'      : [].slice.call(message, 1) || '',
                'Execution Time' : executionTime
              });
            }
            clearTimeout(module.performance.timer);
            module.performance.timer = setTimeout(module.performance.display, 100);
          },
          display: function() {
            var
              title = settings.name + ':',
              totalTime = 0
            ;
            time = false;
            clearTimeout(module.performance.timer);
            $.each(performance, function(index, data) {
              totalTime += data['Execution Time'];
            });
            title += ' ' + totalTime + 'ms';
            if(moduleSelector) {
              title += ' \'' + moduleSelector + '\'';
            }
            if($allModules.size() > 1) {
              title += ' ' + '(' + $allModules.size() + ')';
            }
            if( (console.group !== undefined || console.table !== undefined) && performance.length > 0) {
              console.groupCollapsed(title);
              if(console.table) {
                console.table(performance);
              }
              else {
                $.each(performance, function(index, data) {
                  console.log(data['Name'] + ': ' + data['Execution Time']+'ms');
                });
              }
              console.groupEnd();
            }
            performance = [];
          }
        },
        invoke: function(query, passedArguments, context) {
          var
            object = instance,
            maxDepth,
            found,
            response
          ;
          passedArguments = passedArguments || queryArguments;
          context         = element         || context;
          if(typeof query == 'string' && object !== undefined) {
            query    = query.split(/[\. ]/);
            maxDepth = query.length - 1;
            $.each(query, function(depth, value) {
              var camelCaseValue = (depth != maxDepth)
                ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1)
                : query
              ;
              if( $.isPlainObject( object[camelCaseValue] ) && (depth != maxDepth) ) {
                object = object[camelCaseValue];
              }
              else if( object[camelCaseValue] !== undefined ) {
                found = object[camelCaseValue];
                return false;
              }
              else if( $.isPlainObject( object[value] ) && (depth != maxDepth) ) {
                object = object[value];
              }
              else if( object[value] !== undefined ) {
                found = object[value];
                return false;
              }
              else {
                return false;
              }
            });
          }
          if ( $.isFunction( found ) ) {
            response = found.apply(context, passedArguments);
          }
          else if(found !== undefined) {
            response = found;
          }
          if($.isArray(returnedValue)) {
            returnedValue.push(response);
          }
          else if(returnedValue !== undefined) {
            returnedValue = [returnedValue, response];
          }
          else if(response !== undefined) {
            returnedValue = response;
          }
          return found || false;
        }
      };
      module.initialize();
    })
  ;
  return (returnedValue !== undefined)
    ? returnedValue
    : this
  ;
};

$.fn.transition.exists = {};

$.fn.transition.settings = {

  // module info
  name        : 'Transition',

  // debug content outputted to console
  debug       : false,

  // verbose debug output
  verbose     : true,

  // performance data output
  performance : true,

  // event namespace
  namespace   : 'transition',

  // animation complete event
  complete    : function() {},
  onShow      : function() {},
  onHide      : function() {},

  // whether animation can occur twice in a row
  allowRepeats : false,

  // animation duration
  animation  : 'fade',
  duration   : '700ms',

  // new animations will occur after previous ones
  queue       : true,

  className   : {
    animating  : 'animating',
    disabled   : 'disabled',
    hidden     : 'hidden',
    inward     : 'in',
    loading    : 'loading',
    looping    : 'looping',
    outward    : 'out',
    transition : 'ui transition',
    visible    : 'visible'
  },

  // possible errors
  error: {
    noAnimation : 'There is no css animation matching the one you specified.',
    repeated    : 'That animation is already occurring, cancelling repeated animation',
    method      : 'The method you called is not defined',
    support     : 'This browser does not support CSS animations'
  }

};


})( jQuery, window , document );

/*  ******************************
  Module - Video
  Author: Jack Lukic

  This is a video playlist and video embed plugin which helps
  provide helpers for adding embed code for vimeo and youtube and
  abstracting event handlers for each library

******************************  */

;(function ($, window, document, undefined) {

$.fn.video = function(parameters) {

  var
    $allModules     = $(this),

    moduleSelector  = $allModules.selector || '',

    time            = new Date().getTime(),
    performance     = [],

    query           = arguments[0],
    methodInvoked   = (typeof query == 'string'),
    queryArguments  = [].slice.call(arguments, 1),

    returnedValue
  ;

  $allModules
    .each(function() {
      var
        settings        = ( $.isPlainObject(parameters) )
          ? $.extend(true, {}, $.fn.video.settings, parameters)
          : $.extend({}, $.fn.video.settings),

        selector        = settings.selector,
        className       = settings.className,
        error           = settings.error,
        metadata        = settings.metadata,
        namespace       = settings.namespace,

        eventNamespace  = '.' + namespace,
        moduleNamespace = 'module-' + namespace,

        $module         = $(this),
        $placeholder    = $module.find(selector.placeholder),
        $playButton     = $module.find(selector.playButton),
        $embed          = $module.find(selector.embed),

        element         = this,
        instance        = $module.data(moduleNamespace),
        module
      ;

      module = {

        initialize: function() {
          module.debug('Initializing video');
          $placeholder
            .on('click' + eventNamespace, module.play)
          ;
          $playButton
            .on('click' + eventNamespace, module.play)
          ;
          module.instantiate();
        },

        instantiate: function() {
          module.verbose('Storing instance of module', module);
          instance = module;
          $module
            .data(moduleNamespace, module)
          ;
        },

        destroy: function() {
          module.verbose('Destroying previous instance of video');
          $module
            .removeData(moduleNamespace)
            .off(eventNamespace)
          ;
          $placeholder
            .off(eventNamespace)
          ;
          $playButton
            .off(eventNamespace)
          ;
        },

        // sets new video
        change: function(source, id, url) {
          module.debug('Changing video to ', source, id, url);
          $module
            .data(metadata.source, source)
            .data(metadata.id, id)
            .data(metadata.url, url)
          ;
          settings.onChange();
        },

        // clears video embed
        reset: function() {
          module.debug('Clearing video embed and showing placeholder');
          $module
            .removeClass(className.active)
          ;
          $embed
            .html(' ')
          ;
          $placeholder
            .show()
          ;
          settings.onReset();
        },

        // plays current video
        play: function() {
          module.debug('Playing video');
          var
            source = $module.data(metadata.source) || false,
            url    = $module.data(metadata.url)    || false,
            id     = $module.data(metadata.id)     || false
          ;
          $embed
            .html( module.generate.html(source, id, url) )
          ;
          $module
            .addClass(className.active)
          ;
          settings.onPlay();
        },

        generate: {
          // generates iframe html
          html: function(source, id, url) {
            module.debug('Generating embed html');
            var
              width = (settings.width == 'auto')
                ? $module.width()
                : settings.width,
              height = (settings.height == 'auto')
                ? $module.height()
                : settings.height,
              html
            ;
            if(source && id) {
              if(source == 'vimeo') {
                html = ''
                  + '<iframe src="http://player.vimeo.com/video/' + id + '?=' + module.generate.url(source) + '"'
                  + ' width="' + width + '" height="' + height + '"'
                  + ' frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'
                ;
              }
              else if(source == 'youtube') {
                html = ''
                  + '<iframe src="http://www.youtube.com/embed/' + id + '?=' + module.generate.url(source) + '"'
                  + ' width="' + width + '" height="' + height + '"'
                  + ' frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'
                ;
              }
            }
            else if(url) {
              html = ''
                + '<iframe src="' + url + '"'
                + ' width="' + width + '" height="' + height + '"'
                + ' frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'
              ;
            }
            else {
              module.error(error.noVideo);
            }
            return html;
          },

          // generate url parameters
          url: function(source) {
            var
              api      = (settings.api)
                ? 1
                : 0,
              autoplay = (settings.autoplay)
                ? 1
                : 0,
              hd       = (settings.hd)
                ? 1
                : 0,
              showUI   = (settings.showUI)
                ? 1
                : 0,
              // opposite used for some params
              hideUI   = !(settings.showUI)
                ? 1
                : 0,
              url = ''
            ;
            if(source == 'vimeo') {
              url = ''
                +      'api='      + api
                + '&amp;title='    + showUI
                + '&amp;byline='   + showUI
                + '&amp;portrait=' + showUI
                + '&amp;autoplay=' + autoplay
              ;
              if(settings.color) {
                url += '&amp;color=' + settings.color;
              }
            }
            if(source == 'ustream') {
              url = ''
                + 'autoplay=' + autoplay
              ;
              if(settings.color) {
                url += '&amp;color=' + settings.color;
              }
            }
            else if(source == 'youtube') {
              url = ''
                +      'enablejsapi=' + api
                + '&amp;autoplay='    + autoplay
                + '&amp;autohide='    + hideUI
                + '&amp;hq='          + hd
                + '&amp;modestbranding=1'
              ;
              if(settings.color) {
                url += '&amp;color=' + settings.color;
              }
            }
            return url;
          }
        },

        setting: function(name, value) {
          if( $.isPlainObject(name) ) {
            $.extend(true, settings, name);
          }
          else if(value !== undefined) {
            settings[name] = value;
          }
          else {
            return settings[name];
          }
        },
        internal: function(name, value) {
          if( $.isPlainObject(name) ) {
            $.extend(true, module, name);
          }
          else if(value !== undefined) {
            module[name] = value;
          }
          else {
            return module[name];
          }
        },
        debug: function() {
          if(settings.debug) {
            if(settings.performance) {
              module.performance.log(arguments);
            }
            else {
              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');
              module.debug.apply(console, arguments);
            }
          }
        },
        verbose: function() {
          if(settings.verbose && settings.debug) {
            if(settings.performance) {
              module.performance.log(arguments);
            }
            else {
              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');
              module.verbose.apply(console, arguments);
            }
          }
        },
        error: function() {
          module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');
          module.error.apply(console, arguments);
        },
        performance: {
          log: function(message) {
            var
              currentTime,
              executionTime,
              previousTime
            ;
            if(settings.performance) {
              currentTime   = new Date().getTime();
              previousTime  = time || currentTime;
              executionTime = currentTime - previousTime;
              time          = currentTime;
              performance.push({
                'Element'        : element,
                'Name'           : message[0],
                'Arguments'      : [].slice.call(message, 1) || '',
                'Execution Time' : executionTime
              });
            }
            clearTimeout(module.performance.timer);
            module.performance.timer = setTimeout(module.performance.display, 100);
          },
          display: function() {
            var
              title = settings.name + ':',
              totalTime = 0
            ;
            time = false;
            clearTimeout(module.performance.timer);
            $.each(performance, function(index, data) {
              totalTime += data['Execution Time'];
            });
            title += ' ' + totalTime + 'ms';
            if(moduleSelector) {
              title += ' \'' + moduleSelector + '\'';
            }
            if($allModules.size() > 1) {
              title += ' ' + '(' + $allModules.size() + ')';
            }
            if( (console.group !== undefined || console.table !== undefined) && performance.length > 0) {
              console.groupCollapsed(title);
              if(console.table) {
                console.table(performance);
              }
              else {
                $.each(performance, function(index, data) {
                  console.log(data['Name'] + ': ' + data['Execution Time']+'ms');
                });
              }
              console.groupEnd();
            }
            performance = [];
          }
        },
        invoke: function(query, passedArguments, context) {
          var
            object = instance,
            maxDepth,
            found,
            response
          ;
          passedArguments = passedArguments || queryArguments;
          context         = element         || context;
          if(typeof query == 'string' && object !== undefined) {
            query    = query.split(/[\. ]/);
            maxDepth = query.length - 1;
            $.each(query, function(depth, value) {
              var camelCaseValue = (depth != maxDepth)
                ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1)
                : query
              ;
              if( $.isPlainObject( object[camelCaseValue] ) && (depth != maxDepth) ) {
                object = object[camelCaseValue];
              }
              else if( object[camelCaseValue] !== undefined ) {
                found = object[camelCaseValue];
                return false;
              }
              else if( $.isPlainObject( object[value] ) && (depth != maxDepth) ) {
                object = object[value];
              }
              else if( object[value] !== undefined ) {
                found = object[value];
                return false;
              }
              else {
                return false;
              }
            });
          }
          if ( $.isFunction( found ) ) {
            response = found.apply(context, passedArguments);
          }
          else if(found !== undefined) {
            response = found;
          }
          if($.isArray(returnedValue)) {
            returnedValue.push(response);
          }
          else if(returnedValue !== undefined) {
            returnedValue = [returnedValue, response];
          }
          else if(response !== undefined) {
            returnedValue = response;
          }
          return found;
        }
      };

      if(methodInvoked) {
        if(instance === undefined) {
          module.initialize();
        }
        module.invoke(query);
      }
      else {
        if(instance !== undefined) {
          module.destroy();
        }
        module.initialize();
      }
    })
  ;
  return (returnedValue !== undefined)
    ? returnedValue
    : this
  ;
};

$.fn.video.settings = {

  name        : 'Video',
  namespace   : 'video',

  debug       : false,
  verbose     : true,
  performance : true,

  metadata    : {
    source : 'source',
    id     : 'id',
    url    : 'url'
  },

  onPlay   : function(){},
  onReset  : function(){},
  onChange : function(){},

  // callbacks not coded yet (needs to use jsapi)
  onPause  : function() {},
  onStop   : function() {},

  width    : 'auto',
  height   : 'auto',

  autoplay : false,
  color    : '#442359',
  hd       : true,
  showUI   : false,
  api      : true,

  error      : {
    noVideo     : 'No video specified',
    method      : 'The method you called is not defined'
  },

  className   : {
    active      : 'active'
  },

  selector    : {
    embed       : '.embed',
    placeholder : '.placeholder',
    playButton  : '.play'
  }
};


})( jQuery, window , document );
         20190128165852         |                        L             g     / * 
   *   #   S e m a n t i c   -   A c c o r d i o n 
   *   h t t p : / / g i t h u b . c o m / j l u k i c / s e m a n t i c - u i / 
   * 
   * 
   *   C o p y r i g h t   2 0 1 3   C o n t r i b u t o r s 
   *   R e l e a s e d   u n d e r   t h e   M I T   l i c e n s e 
   *   h t t p : / / o p e n s o u r c e . o r g / l i c e n s e s / M I T 
   * 
   * / 
 
 ; ( f u n c t i o n   ( $ ,   w i n d o w ,   d o c u m e n t ,   u n d e f i n e d )   { 
 
 $ . f n . a c c o r d i o n   =   f u n c t i o n ( p a r a m e t e r s )   { 
     v a r 
         $ a l l M o d u l e s           =   $ ( t h i s ) , 
 
         t i m e                         =   n e w   D a t e ( ) . g e t T i m e ( ) , 
         p e r f o r m a n c e           =   [ ] , 
 
         q u e r y                       =   a r g u m e n t s [ 0 ] , 
         m e t h o d I n v o k e d       =   ( t y p e o f   q u e r y   = =   ' s t r i n g ' ) , 
         q u e r y A r g u m e n t s     =   [ ] . s l i c e . c a l l ( a r g u m e n t s ,   1 ) , 
         r e t u r n e d V a l u e 
     ; 
     $ a l l M o d u l e s 
         . e a c h ( f u n c t i o n ( )   { 
             v a r 
                 s e t t i n g s                 =   (   $ . i s P l a i n O b j e c t ( p a r a m e t e r s )   ) 
                     ?   $ . e x t e n d ( t r u e ,   { } ,   $ . f n . a c c o r d i o n . s e t t i n g s ,   p a r a m e t e r s ) 
                     :   $ . e x t e n d ( { } ,   $ . f n . a c c o r d i o n . s e t t i n g s ) , 
 
                 c l a s s N a m e               =   s e t t i n g s . c l a s s N a m e , 
                 n a m e s p a c e               =   s e t t i n g s . n a m e s p a c e , 
                 s e l e c t o r                 =   s e t t i n g s . s e l e c t o r , 
                 e r r o r                       =   s e t t i n g s . e r r o r , 
 
                 e v e n t N a m e s p a c e     =   ' . '   +   n a m e s p a c e , 
                 m o d u l e N a m e s p a c e   =   ' m o d u l e - '   +   n a m e s p a c e , 
                 m o d u l e S e l e c t o r     =   $ a l l M o d u l e s . s e l e c t o r   | |   ' ' , 
 
                 $ m o d u l e     =   $ ( t h i s ) , 
                 $ t i t l e       =   $ m o d u l e . f i n d ( s e l e c t o r . t i t l e ) , 
                 $ c o n t e n t   =   $ m o d u l e . f i n d ( s e l e c t o r . c o n t e n t ) , 
 
                 e l e m e n t     =   t h i s , 
                 i n s t a n c e   =   $ m o d u l e . d a t a ( m o d u l e N a m e s p a c e ) , 
                 m o d u l e 
             ; 
 
             m o d u l e   =   { 
 
                 i n i t i a l i z e :   f u n c t i o n ( )   { 
                     m o d u l e . d e b u g ( ' I n i t i a l i z i n g   a c c o r d i o n   w i t h   b o u n d   e v e n t s ' ,   $ m o d u l e ) ; 
                     / /   i n i t i a l i z i n g 
                     $ t i t l e 
                         . o n ( ' c l i c k '   +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . c l i c k ) 
                     ; 
                     m o d u l e . i n s t a n t i a t e ( ) ; 
                 } , 
 
                 i n s t a n t i a t e :   f u n c t i o n ( )   { 
                     i n s t a n c e   =   m o d u l e ; 
                     $ m o d u l e 
                         . d a t a ( m o d u l e N a m e s p a c e ,   m o d u l e ) 
                     ; 
                 } , 
 
                 d e s t r o y :   f u n c t i o n ( )   { 
                     m o d u l e . d e b u g ( ' D e s t r o y i n g   p r e v i o u s   a c c o r d i o n   f o r ' ,   $ m o d u l e ) ; 
                     $ m o d u l e 
                         . r e m o v e D a t a ( m o d u l e N a m e s p a c e ) 
                     ; 
                     $ t i t l e 
                         . o f f ( e v e n t N a m e s p a c e ) 
                     ; 
                 } , 
 
                 e v e n t :   { 
                     c l i c k :   f u n c t i o n ( )   { 
                         m o d u l e . v e r b o s e ( ' T i t l e   c l i c k e d ' ,   t h i s ) ; 
                         v a r 
                             $ a c t i v e T i t l e   =   $ ( t h i s ) , 
                             i n d e x                 =   $ t i t l e . i n d e x ( $ a c t i v e T i t l e ) 
                         ; 
                         m o d u l e . t o g g l e ( i n d e x ) ; 
                     } , 
                     r e s e t D i s p l a y :   f u n c t i o n ( )   { 
                         $ ( t h i s ) . c s s ( ' d i s p l a y ' ,   ' ' ) ; 
                         i f (   $ ( t h i s ) . a t t r ( ' s t y l e ' )   = =   ' ' )   { 
                             $ ( t h i s ) 
                                 . a t t r ( ' s t y l e ' ,   ' ' ) 
                                 . r e m o v e A t t r ( ' s t y l e ' ) 
                             ; 
                         } 
                     } , 
                     r e s e t O p a c i t y :   f u n c t i o n ( )   { 
                         $ ( t h i s ) . c s s ( ' o p a c i t y ' ,   ' ' ) ; 
                         i f (   $ ( t h i s ) . a t t r ( ' s t y l e ' )   = =   ' ' )   { 
                             $ ( t h i s ) 
                                 . a t t r ( ' s t y l e ' ,   ' ' ) 
                                 . r e m o v e A t t r ( ' s t y l e ' ) 
                             ; 
                         } 
                     } 
                 } , 
 
                 t o g g l e :   f u n c t i o n ( i n d e x )   { 
                     m o d u l e . d e b u g ( ' T o g g l i n g   c o n t e n t   c o n t e n t   a t   i n d e x ' ,   i n d e x ) ; 
                     v a r 
                         $ a c t i v e T i t l e       =   $ t i t l e . e q ( i n d e x ) , 
                         $ a c t i v e C o n t e n t   =   $ a c t i v e T i t l e . n e x t ( $ c o n t e n t ) , 
                         c o n t e n t I s O p e n     =   $ a c t i v e C o n t e n t . i s ( ' : v i s i b l e ' ) 
                     ; 
                     i f ( c o n t e n t I s O p e n )   { 
                         i f ( s e t t i n g s . c o l l a p s i b l e )   { 
                             m o d u l e . c l o s e ( i n d e x ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . d e b u g ( ' C a n n o t   c l o s e   a c c o r d i o n   c o n t e n t   c o l l a p s i n g   i s   d i s a b l e d ' ) ; 
                         } 
                     } 
                     e l s e   { 
                         m o d u l e . o p e n ( i n d e x ) ; 
                     } 
                 } , 
 
                 o p e n :   f u n c t i o n ( i n d e x )   { 
                     v a r 
                         $ a c t i v e T i t l e           =   $ t i t l e . e q ( i n d e x ) , 
                         $ a c t i v e C o n t e n t       =   $ a c t i v e T i t l e . n e x t ( $ c o n t e n t ) , 
                         $ p r e v i o u s T i t l e       =   $ a c t i v e T i t l e . s i b l i n g s ( s e l e c t o r . t i t l e ) . f i l t e r ( ' . '   +   c l a s s N a m e . a c t i v e ) , 
                         $ p r e v i o u s C o n t e n t   =   $ p r e v i o u s T i t l e . n e x t ( $ t i t l e ) , 
                         c o n t e n t I s O p e n         =     ( $ p r e v i o u s T i t l e . s i z e ( )   >   0 ) 
                     ; 
                     i f (   ! $ a c t i v e C o n t e n t . i s ( ' : a n i m a t e d ' )   )   { 
                         m o d u l e . d e b u g ( ' O p e n i n g   a c c o r d i o n   c o n t e n t ' ,   $ a c t i v e T i t l e ) ; 
                         i f ( s e t t i n g s . e x c l u s i v e   & &   c o n t e n t I s O p e n )   { 
                             $ p r e v i o u s T i t l e 
                                 . r e m o v e C l a s s ( c l a s s N a m e . a c t i v e ) 
                             ; 
                             $ p r e v i o u s C o n t e n t 
                                 . s t o p ( ) 
                                 . c h i l d r e n ( ) 
                                     . s t o p ( ) 
                                     . a n i m a t e ( { 
                                         o p a c i t y :   0 
                                     } ,   s e t t i n g s . d u r a t i o n ,   m o d u l e . e v e n t . r e s e t O p a c i t y ) 
                                     . e n d ( ) 
                                 . s l i d e U p ( s e t t i n g s . d u r a t i o n   ,   s e t t i n g s . e a s i n g ,   f u n c t i o n ( )   { 
                                     $ p r e v i o u s C o n t e n t 
                                         . r e m o v e C l a s s ( c l a s s N a m e . a c t i v e ) 
                                         . c h i l d r e n ( ) 
                                     ; 
                                     $ . p r o x y ( m o d u l e . e v e n t . r e s e t D i s p l a y ,   t h i s ) ( ) ; 
                                 } ) 
                             ; 
                         } 
                         $ a c t i v e T i t l e 
                             . a d d C l a s s ( c l a s s N a m e . a c t i v e ) 
                         ; 
                         $ a c t i v e C o n t e n t 
                             . s t o p ( ) 
                             . c h i l d r e n ( ) 
                                 . s t o p ( ) 
                                 . a n i m a t e ( { 
                                     o p a c i t y :   1 
                                 } ,   s e t t i n g s . d u r a t i o n ) 
                                 . e n d ( ) 
                             . s l i d e D o w n ( s e t t i n g s . d u r a t i o n ,   s e t t i n g s . e a s i n g ,   f u n c t i o n ( )   { 
                                 $ a c t i v e C o n t e n t 
                                     . a d d C l a s s ( c l a s s N a m e . a c t i v e ) 
                                 ; 
                                 $ . p r o x y ( m o d u l e . e v e n t . r e s e t D i s p l a y ,   t h i s ) ( ) ; 
                                 $ . p r o x y ( s e t t i n g s . o n O p e n ,   $ a c t i v e C o n t e n t ) ( ) ; 
                                 $ . p r o x y ( s e t t i n g s . o n C h a n g e ,   $ a c t i v e C o n t e n t ) ( ) ; 
                             } ) 
                         ; 
                     } 
                 } , 
 
                 c l o s e :   f u n c t i o n ( i n d e x )   { 
                     v a r 
                         $ a c t i v e T i t l e       =   $ t i t l e . e q ( i n d e x ) , 
                         $ a c t i v e C o n t e n t   =   $ a c t i v e T i t l e . n e x t ( $ c o n t e n t ) 
                     ; 
                     m o d u l e . d e b u g ( ' C l o s i n g   a c c o r d i o n   c o n t e n t ' ,   $ a c t i v e C o n t e n t ) ; 
                     $ a c t i v e T i t l e 
                         . r e m o v e C l a s s ( c l a s s N a m e . a c t i v e ) 
                     ; 
                     $ a c t i v e C o n t e n t 
                         . r e m o v e C l a s s ( c l a s s N a m e . a c t i v e ) 
                         . s h o w ( ) 
                         . s t o p ( ) 
                         . c h i l d r e n ( ) 
                             . s t o p ( ) 
                             . a n i m a t e ( { 
                                 o p a c i t y :   0 
                             } ,   s e t t i n g s . d u r a t i o n ,   m o d u l e . e v e n t . r e s e t O p a c i t y ) 
                             . e n d ( ) 
                         . s l i d e U p ( s e t t i n g s . d u r a t i o n ,   s e t t i n g s . e a s i n g ,   f u n c t i o n ( ) { 
                             $ . p r o x y ( m o d u l e . e v e n t . r e s e t D i s p l a y ,   t h i s ) ( ) ; 
                             $ . p r o x y ( s e t t i n g s . o n C l o s e ,   $ a c t i v e C o n t e n t ) ( ) ; 
                             $ . p r o x y ( s e t t i n g s . o n C h a n g e ,   $ a c t i v e C o n t e n t ) ( ) ; 
                         } ) 
                     ; 
                 } , 
 
                 s e t t i n g :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                     i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                         $ . e x t e n d ( t r u e ,   s e t t i n g s ,   n a m e ) ; 
                     } 
                     e l s e   i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                         s e t t i n g s [ n a m e ]   =   v a l u e ; 
                     } 
                     e l s e   { 
                         r e t u r n   s e t t i n g s [ n a m e ] ; 
                     } 
                 } , 
                 i n t e r n a l :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                     m o d u l e . d e b u g ( ' C h a n g i n g   i n t e r n a l ' ,   n a m e ,   v a l u e ) ; 
                     i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                         i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                             $ . e x t e n d ( t r u e ,   m o d u l e ,   n a m e ) ; 
                         } 
                         e l s e   { 
                             m o d u l e [ n a m e ]   =   v a l u e ; 
                         } 
                     } 
                     e l s e   { 
                         r e t u r n   m o d u l e [ n a m e ] ; 
                     } 
                 } , 
                 d e b u g :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . d e b u g )   { 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . d e b u g   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                             m o d u l e . d e b u g . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                         } 
                     } 
                 } , 
                 v e r b o s e :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . v e r b o s e   & &   s e t t i n g s . d e b u g )   { 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . v e r b o s e   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                             m o d u l e . v e r b o s e . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                         } 
                     } 
                 } , 
                 e r r o r :   f u n c t i o n ( )   { 
                     m o d u l e . e r r o r   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . e r r o r ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                     m o d u l e . e r r o r . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                 } , 
                 p e r f o r m a n c e :   { 
                     l o g :   f u n c t i o n ( m e s s a g e )   { 
                         v a r 
                             c u r r e n t T i m e , 
                             e x e c u t i o n T i m e , 
                             p r e v i o u s T i m e 
                         ; 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             c u r r e n t T i m e       =   n e w   D a t e ( ) . g e t T i m e ( ) ; 
                             p r e v i o u s T i m e     =   t i m e   | |   c u r r e n t T i m e ; 
                             e x e c u t i o n T i m e   =   c u r r e n t T i m e   -   p r e v i o u s T i m e ; 
                             t i m e                     =   c u r r e n t T i m e ; 
                             p e r f o r m a n c e . p u s h ( { 
                                 ' E l e m e n t '                 :   e l e m e n t , 
                                 ' N a m e '                       :   m e s s a g e [ 0 ] , 
                                 ' A r g u m e n t s '             :   [ ] . s l i c e . c a l l ( m e s s a g e ,   1 )   | |   ' ' , 
                                 ' E x e c u t i o n   T i m e '   :   e x e c u t i o n T i m e 
                             } ) ; 
                         } 
                         c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                         m o d u l e . p e r f o r m a n c e . t i m e r   =   s e t T i m e o u t ( m o d u l e . p e r f o r m a n c e . d i s p l a y ,   1 0 0 ) ; 
                     } , 
                     d i s p l a y :   f u n c t i o n ( )   { 
                         v a r 
                             t i t l e   =   s e t t i n g s . n a m e   +   ' : ' , 
                             t o t a l T i m e   =   0 
                         ; 
                         t i m e   =   f a l s e ; 
                         c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                         $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                             t o t a l T i m e   + =   d a t a [ ' E x e c u t i o n   T i m e ' ] ; 
                         } ) ; 
                         t i t l e   + =   '   '   +   t o t a l T i m e   +   ' m s ' ; 
                         i f ( m o d u l e S e l e c t o r )   { 
                             t i t l e   + =   '   \ ' '   +   m o d u l e S e l e c t o r   +   ' \ ' ' ; 
                         } 
                         i f (   ( c o n s o l e . g r o u p   ! = =   u n d e f i n e d   | |   c o n s o l e . t a b l e   ! = =   u n d e f i n e d )   & &   p e r f o r m a n c e . l e n g t h   >   0 )   { 
                             c o n s o l e . g r o u p C o l l a p s e d ( t i t l e ) ; 
                             i f ( c o n s o l e . t a b l e )   { 
                                 c o n s o l e . t a b l e ( p e r f o r m a n c e ) ; 
                             } 
                             e l s e   { 
                                 $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                                     c o n s o l e . l o g ( d a t a [ ' N a m e ' ]   +   ' :   '   +   d a t a [ ' E x e c u t i o n   T i m e ' ] + ' m s ' ) ; 
                                 } ) ; 
                             } 
                             c o n s o l e . g r o u p E n d ( ) ; 
                         } 
                         p e r f o r m a n c e   =   [ ] ; 
                     } 
                 } , 
                 i n v o k e :   f u n c t i o n ( q u e r y ,   p a s s e d A r g u m e n t s ,   c o n t e x t )   { 
                     v a r 
                         o b j e c t   =   i n s t a n c e , 
                         m a x D e p t h , 
                         f o u n d , 
                         r e s p o n s e 
                     ; 
                     p a s s e d A r g u m e n t s   =   p a s s e d A r g u m e n t s   | |   q u e r y A r g u m e n t s ; 
                     c o n t e x t                   =   e l e m e n t                   | |   c o n t e x t ; 
                     i f ( t y p e o f   q u e r y   = =   ' s t r i n g '   & &   o b j e c t   ! = =   u n d e f i n e d )   { 
                         q u e r y         =   q u e r y . s p l i t ( / [ \ .   ] / ) ; 
                         m a x D e p t h   =   q u e r y . l e n g t h   -   1 ; 
                         $ . e a c h ( q u e r y ,   f u n c t i o n ( d e p t h ,   v a l u e )   { 
                             v a r   c a m e l C a s e V a l u e   =   ( d e p t h   ! =   m a x D e p t h ) 
                                 ?   v a l u e   +   q u e r y [ d e p t h   +   1 ] . c h a r A t ( 0 ) . t o U p p e r C a s e ( )   +   q u e r y [ d e p t h   +   1 ] . s l i c e ( 1 ) 
                                 :   q u e r y 
                             ; 
                             i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ c a m e l C a s e V a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                                 o b j e c t   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                             } 
                             e l s e   i f (   o b j e c t [ c a m e l C a s e V a l u e ]   ! = =   u n d e f i n e d   )   { 
                                 f o u n d   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                                 r e t u r n   f a l s e ; 
                             } 
                             e l s e   i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ v a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                                 o b j e c t   =   o b j e c t [ v a l u e ] ; 
                             } 
                             e l s e   i f (   o b j e c t [ v a l u e ]   ! = =   u n d e f i n e d   )   { 
                                 f o u n d   =   o b j e c t [ v a l u e ] ; 
                                 r e t u r n   f a l s e ; 
                             } 
                             e l s e   { 
                                 r e t u r n   f a l s e ; 
                             } 
                         } ) ; 
                     } 
                     i f   (   $ . i s F u n c t i o n (   f o u n d   )   )   { 
                         r e s p o n s e   =   f o u n d . a p p l y ( c o n t e x t ,   p a s s e d A r g u m e n t s ) ; 
                     } 
                     e l s e   i f ( f o u n d   ! = =   u n d e f i n e d )   { 
                         r e s p o n s e   =   f o u n d ; 
                     } 
                     i f ( $ . i s A r r a y ( r e t u r n e d V a l u e ) )   { 
                         r e t u r n e d V a l u e . p u s h ( r e s p o n s e ) ; 
                     } 
                     e l s e   i f ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d )   { 
                         r e t u r n e d V a l u e   =   [ r e t u r n e d V a l u e ,   r e s p o n s e ] ; 
                     } 
                     e l s e   i f ( r e s p o n s e   ! = =   u n d e f i n e d )   { 
                         r e t u r n e d V a l u e   =   r e s p o n s e ; 
                     } 
                     r e t u r n   f o u n d ; 
                 } 
             } ; 
             i f ( m e t h o d I n v o k e d )   { 
                 i f ( i n s t a n c e   = = =   u n d e f i n e d )   { 
                     m o d u l e . i n i t i a l i z e ( ) ; 
                 } 
                 m o d u l e . i n v o k e ( q u e r y ) ; 
             } 
             e l s e   { 
                 i f ( i n s t a n c e   ! = =   u n d e f i n e d )   { 
                     m o d u l e . d e s t r o y ( ) ; 
                 } 
                 m o d u l e . i n i t i a l i z e ( ) ; 
             } 
         } ) 
     ; 
     r e t u r n   ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d ) 
         ?   r e t u r n e d V a l u e 
         :   t h i s 
     ; 
 } ; 
 
 $ . f n . a c c o r d i o n . s e t t i n g s   =   { 
     n a m e                 :   ' A c c o r d i o n ' , 
     n a m e s p a c e       :   ' a c c o r d i o n ' , 
 
     d e b u g               :   f a l s e , 
     v e r b o s e           :   t r u e , 
     p e r f o r m a n c e   :   t r u e , 
 
     e x c l u s i v e       :   t r u e , 
     c o l l a p s i b l e   :   t r u e , 
 
     d u r a t i o n         :   5 0 0 , 
     e a s i n g             :   ' e a s e I n O u t Q u i n t ' , 
 
     o n O p e n             :   f u n c t i o n ( ) { } , 
     o n C l o s e           :   f u n c t i o n ( ) { } , 
     o n C h a n g e         :   f u n c t i o n ( ) { } , 
 
     e r r o r :   { 
         m e t h o d         :   ' T h e   m e t h o d   y o u   c a l l e d   i s   n o t   d e f i n e d ' 
     } , 
 
     c l a s s N a m e       :   { 
         a c t i v e   :   ' a c t i v e ' 
     } , 
 
     s e l e c t o r         :   { 
         t i t l e       :   ' . t i t l e ' , 
         c o n t e n t   :   ' . c o n t e n t ' 
     } 
 
 
 } ; 
 
 / /   A d d s   e a s i n g 
 $ . e x t e n d (   $ . e a s i n g ,   { 
     e a s e I n O u t Q u i n t :   f u n c t i o n   ( x ,   t ,   b ,   c ,   d )   { 
         i f   ( ( t / = d / 2 )   <   1 )   r e t u r n   c / 2 * t * t * t * t * t   +   b ; 
         r e t u r n   c / 2 * ( ( t - = 2 ) * t * t * t * t   +   2 )   +   b ; 
     } 
 } ) ; 
 
 } ) (   j Q u e r y ,   w i n d o w   ,   d o c u m e n t   ) ; 
 
 
 / * 
   *   #   S e m a n t i c   -   A P I 
   *   h t t p : / / g i t h u b . c o m / j l u k i c / s e m a n t i c - u i / 
   * 
   * 
   *   C o p y r i g h t   2 0 1 3   C o n t r i b u t o r s 
   *   R e l e a s e d   u n d e r   t h e   M I T   l i c e n s e 
   *   h t t p : / / o p e n s o u r c e . o r g / l i c e n s e s / M I T 
   * 
   * / 
 
 ; ( f u n c t i o n   (   $ ,   w i n d o w ,   d o c u m e n t ,   u n d e f i n e d   )   { 
 
     $ . a p i   =   $ . f n . a p i   =   f u n c t i o n ( p a r a m e t e r s )   { 
 
         v a r 
             s e t t i n g s               =   $ . e x t e n d ( t r u e ,   { } ,   $ . a p i . s e t t i n g s ,   p a r a m e t e r s ) , 
 
             / /   i f   t h i s   k e y w o r d   i s n ' t   a   j Q u e r y   o b j e c t ,   c r e a t e   o n e 
             c o n t e x t                 =   ( t y p e o f   t h i s   ! =   ' f u n c t i o n ' ) 
                 ?   t h i s 
                 :   $ ( ' < d i v / > ' ) , 
             / /   c o n t e x t   d e f i n e s   t h e   e l e m e n t   u s e d   f o r   l o a d i n g / e r r o r   s t a t e 
             $ c o n t e x t               =   ( s e t t i n g s . s t a t e C o n t e x t ) 
                 ?   $ ( s e t t i n g s . s t a t e C o n t e x t ) 
                 :   $ ( c o n t e x t ) , 
             / /   m o d u l e   i s   t h e   t h i n g   t h a t   i n i t i a t e s   t h e   a p i   a c t i o n ,   c a n   b e   i n d e p e n d e n t   o f   c o n t e x t 
             $ m o d u l e   =   t y p e o f   t h i s   = =   ' o b j e c t ' 
                 ?   $ ( c o n t e x t ) 
                 :   $ c o n t e x t , 
 
             e l e m e n t                   =   t h i s , 
             t i m e                         =   n e w   D a t e ( ) . g e t T i m e ( ) , 
             p e r f o r m a n c e           =   [ ] , 
 
             m o d u l e S e l e c t o r     =   $ m o d u l e . s e l e c t o r   | |   ' ' , 
             m o d u l e N a m e s p a c e   =   s e t t i n g s . n a m e s p a c e   +   ' - m o d u l e ' , 
 
             c l a s s N a m e               =   s e t t i n g s . c l a s s N a m e , 
             m e t a d a t a                 =   s e t t i n g s . m e t a d a t a , 
             e r r o r                       =   s e t t i n g s . e r r o r , 
 
             i n s t a n c e                 =   $ m o d u l e . d a t a ( m o d u l e N a m e s p a c e ) , 
 
             q u e r y                       =   a r g u m e n t s [ 0 ] , 
             m e t h o d I n v o k e d       =   ( i n s t a n c e   ! = =   u n d e f i n e d   & &   t y p e o f   q u e r y   = =   ' s t r i n g ' ) , 
             q u e r y A r g u m e n t s     =   [ ] . s l i c e . c a l l ( a r g u m e n t s ,   1 ) , 
 
             m o d u l e , 
             r e t u r n e d V a l u e 
         ; 
 
         m o d u l e   =   { 
             i n i t i a l i z e :   f u n c t i o n ( )   { 
                 v a r 
                     r u n S e t t i n g s , 
 
                     l o a d i n g T i m e r       =   n e w   D a t e ( ) . g e t T i m e ( ) , 
                     l o a d i n g D e l a y , 
 
                     p r o m i s e , 
                     u r l , 
 
                     f o r m D a t a               =   { } , 
                     d a t a , 
 
                     a j a x S e t t i n g s       =   { } , 
                     x h r 
                 ; 
 
                 / /   s e r i a l i z e   p a r e n t   f o r m   i f   r e q u e s t e d ! 
                 i f ( s e t t i n g s . s e r i a l i z e F o r m   & &   $ ( t h i s ) . t o J S O N ( )   ! = =   u n d e f i n e d )   { 
                     f o r m D a t a   =   m o d u l e . g e t . f o r m D a t a ( ) ; 
                     m o d u l e . d e b u g ( ' A d d i n g   f o r m   d a t a   t o   A P I   R e q u e s t ' ,   f o r m D a t a ) ; 
                     $ . e x t e n d ( t r u e ,   s e t t i n g s . d a t a ,   f o r m D a t a ) ; 
                 } 
 
                 / /   l e t   b e f o r e S e n d   c h a n g e   s e t t i n g s   o b j e c t 
                 r u n S e t t i n g s   =   $ . p r o x y ( s e t t i n g s . b e f o r e S e n d ,   $ m o d u l e ) ( s e t t i n g s ) ; 
 
                 / /   c h e c k   f o r   e x i t   c o n d i t i o n s 
                 i f ( r u n S e t t i n g s   ! = =   u n d e f i n e d   & &   ! r u n S e t t i n g s )   { 
                     m o d u l e . e r r o r ( e r r o r . b e f o r e S e n d ) ; 
                     m o d u l e . r e s e t ( ) ; 
                     r e t u r n ; 
                 } 
 
                 / /   g e t   r e a l   u r l   f r o m   t e m p l a t e 
                 u r l   =   m o d u l e . g e t . u r l (   m o d u l e . g e t . t e m p l a t e U R L ( )   ) ; 
 
                 / /   e x i t   c o n d i t i o n s   r e a c h e d   f r o m   m i s s i n g   u r l   p a r a m e t e r s 
                 i f (   ! u r l   )   { 
                     m o d u l e . e r r o r ( e r r o r . m i s s i n g U R L ) ; 
                     m o d u l e . r e s e t ( ) ; 
                     r e t u r n ; 
                 } 
 
                 / /   p r o m i s e   h a n d l e s   n o t i f i c a t i o n   o n   a p i   r e q u e s t ,   s o   l o a d i n g   m i n .   d e l a y   c a n   o c c u r   f o r   a l l   n o t i f i c a t i o n s 
                 p r o m i s e   = 
                     $ . D e f e r r e d ( ) 
                         . a l w a y s ( f u n c t i o n ( )   { 
                             i f ( s e t t i n g s . s t a t e C o n t e x t )   { 
                                 $ c o n t e x t 
                                     . r e m o v e C l a s s ( c l a s s N a m e . l o a d i n g ) 
                                 ; 
                             } 
                             $ . p r o x y ( s e t t i n g s . c o m p l e t e ,   $ m o d u l e ) ( ) ; 
                         } ) 
                         . d o n e ( f u n c t i o n ( r e s p o n s e )   { 
                             m o d u l e . d e b u g ( ' A P I   r e q u e s t   s u c c e s s f u l ' ) ; 
                             / /   t a k e   a   s t a b   a t   f i n d i n g   s u c c e s s   s t a t e   i f   j s o n 
                             i f ( s e t t i n g s . d a t a T y p e   = =   ' j s o n ' )   { 
                                 i f   ( r e s p o n s e . e r r o r   ! = =   u n d e f i n e d )   { 
                                     $ . p r o x y ( s e t t i n g s . f a i l u r e ,   $ c o n t e x t ) ( r e s p o n s e . e r r o r ,   s e t t i n g s ,   $ m o d u l e ) ; 
                                 } 
                                 e l s e   i f   ( $ . i s A r r a y ( r e s p o n s e . e r r o r s ) )   { 
                                     $ . p r o x y ( s e t t i n g s . f a i l u r e ,   $ c o n t e x t ) ( r e s p o n s e . e r r o r s [ 0 ] ,   s e t t i n g s ,   $ m o d u l e ) ; 
                                 } 
                                 e l s e   { 
                                     $ . p r o x y ( s e t t i n g s . s u c c e s s ,   $ c o n t e x t ) ( r e s p o n s e ,   s e t t i n g s ,   $ m o d u l e ) ; 
                                 } 
                             } 
                             / /   o t h e r w i s e 
                             e l s e   { 
                                 $ . p r o x y ( s e t t i n g s . s u c c e s s ,   $ c o n t e x t ) ( r e s p o n s e ,   s e t t i n g s ,   $ m o d u l e ) ; 
                             } 
                         } ) 
                         . f a i l ( f u n c t i o n ( x h r ,   s t a t u s ,   h t t p M e s s a g e )   { 
                             v a r 
                                 e r r o r M e s s a g e   =   ( s e t t i n g s . e r r o r [ s t a t u s ]   ! = =   u n d e f i n e d ) 
                                     ?   s e t t i n g s . e r r o r [ s t a t u s ] 
                                     :   h t t p M e s s a g e , 
                                 r e s p o n s e 
                             ; 
                             / /   l e t   e m   k n o w   u n l e s s   r e q u e s t   a b o r t e d 
                             i f ( x h r   ! = =   u n d e f i n e d )   { 
                                 / /   r e a d y S t a t e   4   =   d o n e ,   a n y t h i n g   l e s s   i s   n o t   r e a l l y   s e n t 
                                 i f ( x h r . r e a d y S t a t e   ! = =   u n d e f i n e d   & &   x h r . r e a d y S t a t e   = =   4 )   { 
 
                                     / /   i f   h t t p   s t a t u s   c o d e   r e t u r n e d   a n d   j s o n   r e t u r n e d   e r r o r ,   l o o k   f o r   i t 
                                     i f (   x h r . s t a t u s   ! =   2 0 0   & &   h t t p M e s s a g e   ! = =   u n d e f i n e d   & &   h t t p M e s s a g e   ! = =   ' ' )   { 
                                         m o d u l e . e r r o r ( e r r o r . s t a t u s M e s s a g e   +   h t t p M e s s a g e ) ; 
                                     } 
                                     e l s e   { 
                                         i f ( s t a t u s   = =   ' e r r o r '   & &   s e t t i n g s . d a t a T y p e   = =   ' j s o n ' )   { 
                                             t r y   { 
                                                 r e s p o n s e   =   $ . p a r s e J S O N ( x h r . r e s p o n s e T e x t ) ; 
                                                 i f ( r e s p o n s e   & &   r e s p o n s e . e r r o r   ! = =   u n d e f i n e d )   { 
                                                     e r r o r M e s s a g e   =   r e s p o n s e . e r r o r ; 
                                                 } 
                                             } 
                                             c a t c h ( e r r o r )   { 
                                                 m o d u l e . e r r o r ( e r r o r . J S O N P a r s e ) ; 
                                             } 
                                         } 
                                     } 
                                     $ c o n t e x t 
                                         . r e m o v e C l a s s ( c l a s s N a m e . l o a d i n g ) 
                                         . a d d C l a s s ( c l a s s N a m e . e r r o r ) 
                                     ; 
                                     / /   s h o w   e r r o r   s t a t e   o n l y   f o r   d u r a t i o n   s p e c i f i e d   i n   s e t t i n g s 
                                     i f ( s e t t i n g s . e r r o r L e n g t h   >   0 )   { 
                                         s e t T i m e o u t ( f u n c t i o n ( ) { 
                                             $ c o n t e x t 
                                                 . r e m o v e C l a s s ( c l a s s N a m e . e r r o r ) 
                                             ; 
                                         } ,   s e t t i n g s . e r r o r L e n g t h ) ; 
                                     } 
                                     m o d u l e . d e b u g ( ' A P I   R e q u e s t   e r r o r : ' ,   e r r o r M e s s a g e ) ; 
                                     $ . p r o x y ( s e t t i n g s . f a i l u r e ,   $ c o n t e x t ) ( e r r o r M e s s a g e ,   s e t t i n g s ,   t h i s ) ; 
                                 } 
                                 e l s e   { 
                                     m o d u l e . d e b u g ( ' R e q u e s t   A b o r t e d   ( M o s t   l i k e l y   c a u s e d   b y   p a g e   c h a n g e ) ' ) ; 
                                 } 
                             } 
                         } ) 
                 ; 
 
                 / /   l o o k   f o r   p a r a m s   i n   d a t a 
                 $ . e x t e n d ( t r u e ,   a j a x S e t t i n g s ,   s e t t i n g s ,   { 
                     s u c c e s s         :   f u n c t i o n ( ) { } , 
                     f a i l u r e         :   f u n c t i o n ( ) { } , 
                     c o m p l e t e       :   f u n c t i o n ( ) { } , 
                     t y p e               :   s e t t i n g s . m e t h o d   | |   s e t t i n g s . t y p e , 
                     d a t a               :   d a t a , 
                     u r l                 :   u r l , 
                     b e f o r e S e n d   :   s e t t i n g s . b e f o r e X H R 
                 } ) ; 
 
                 i f ( s e t t i n g s . s t a t e C o n t e x t )   { 
                     $ c o n t e x t 
                         . a d d C l a s s ( c l a s s N a m e . l o a d i n g ) 
                     ; 
                 } 
 
                 i f ( s e t t i n g s . p r o g r e s s )   { 
                     m o d u l e . v e r b o s e ( ' A d d i n g   p r o g r e s s   e v e n t s ' ) ; 
                     $ . e x t e n d ( t r u e ,   a j a x S e t t i n g s ,   { 
                         x h r :   f u n c t i o n ( )   { 
                             v a r 
                                 x h r   =   n e w   w i n d o w . X M L H t t p R e q u e s t ( ) 
                             ; 
                             x h r . u p l o a d . a d d E v e n t L i s t e n e r ( ' p r o g r e s s ' ,   f u n c t i o n ( e v e n t )   { 
                                 v a r 
                                     p e r c e n t C o m p l e t e 
                                 ; 
                                 i f   ( e v e n t . l e n g t h C o m p u t a b l e )   { 
                                     p e r c e n t C o m p l e t e   =   M a t h . r o u n d ( e v e n t . l o a d e d   /   e v e n t . t o t a l   *   1 0 0 0 0 )   /   1 0 0   +   ' % ' ; 
                                     $ . p r o x y ( s e t t i n g s . p r o g r e s s ,   $ c o n t e x t ) ( p e r c e n t C o m p l e t e ,   e v e n t ) ; 
                                 } 
                             } ,   f a l s e ) ; 
                             x h r . a d d E v e n t L i s t e n e r ( ' p r o g r e s s ' ,   f u n c t i o n ( e v e n t )   { 
                                 v a r 
                                     p e r c e n t C o m p l e t e 
                                 ; 
                                 i f   ( e v e n t . l e n g t h C o m p u t a b l e )   { 
                                     p e r c e n t C o m p l e t e   =   M a t h . r o u n d ( e v e n t . l o a d e d   /   e v e n t . t o t a l   *   1 0 0 0 0 )   /   1 0 0   +   ' % ' ; 
                                     $ . p r o x y ( s e t t i n g s . p r o g r e s s ,   $ c o n t e x t ) ( p e r c e n t C o m p l e t e ,   e v e n t ) ; 
                                 } 
                             } ,   f a l s e ) ; 
                             r e t u r n   x h r ; 
                         } 
                     } ) ; 
                 } 
 
                 m o d u l e . v e r b o s e ( ' C r e a t i n g   A J A X   r e q u e s t   w i t h   s e t t i n g s :   ' ,   a j a x S e t t i n g s ) ; 
                 x h r   = 
                     $ . a j a x ( a j a x S e t t i n g s ) 
                         . a l w a y s ( f u n c t i o n ( )   { 
                             / /   c a l c u l a t e   i f   l o a d i n g   t i m e   w a s   b e l o w   m i n i m u m   t h r e s h o l d 
                             l o a d i n g D e l a y   =   (   s e t t i n g s . l o a d i n g L e n g t h   -   ( n e w   D a t e ( ) . g e t T i m e ( )   -   l o a d i n g T i m e r )   ) ; 
                             s e t t i n g s . l o a d i n g D e l a y   =   l o a d i n g D e l a y   <   0 
                                 ?   0 
                                 :   l o a d i n g D e l a y 
                             ; 
                         } ) 
                         . d o n e ( f u n c t i o n ( r e s p o n s e )   { 
                             v a r 
                                 c o n t e x t   =   t h i s 
                             ; 
                             s e t T i m e o u t ( f u n c t i o n ( ) { 
                                 p r o m i s e . r e s o l v e W i t h ( c o n t e x t ,   [ r e s p o n s e ] ) ; 
                             } ,   s e t t i n g s . l o a d i n g D e l a y ) ; 
                         } ) 
                         . f a i l ( f u n c t i o n ( x h r ,   s t a t u s ,   h t t p M e s s a g e )   { 
                             v a r 
                                 c o n t e x t   =   t h i s 
                             ; 
                             / /   p a g e   t r i g g e r s   a b o r t   o n   n a v i g a t i o n ,   d o n t   s h o w   e r r o r 
                             i f ( s t a t u s   ! =   ' a b o r t ' )   { 
                                 s e t T i m e o u t ( f u n c t i o n ( ) { 
                                     p r o m i s e . r e j e c t W i t h ( c o n t e x t ,   [ x h r ,   s t a t u s ,   h t t p M e s s a g e ] ) ; 
                                 } ,   s e t t i n g s . l o a d i n g D e l a y ) ; 
                             } 
                             e l s e   { 
                                 $ c o n t e x t 
                                     . r e m o v e C l a s s ( c l a s s N a m e . e r r o r ) 
                                     . r e m o v e C l a s s ( c l a s s N a m e . l o a d i n g ) 
                                 ; 
                             } 
                         } ) 
                 ; 
                 i f ( s e t t i n g s . s t a t e C o n t e x t )   { 
                     $ m o d u l e 
                         . d a t a ( m e t a d a t a . p r o m i s e ,   p r o m i s e ) 
                         . d a t a ( m e t a d a t a . x h r ,   x h r ) 
                     ; 
                 } 
             } , 
 
             g e t :   { 
                 f o r m D a t a :   f u n c t i o n ( )   { 
                     r e t u r n   $ m o d u l e 
                         . c l o s e s t ( ' f o r m ' ) 
                             . t o J S O N ( ) 
                     ; 
                 } , 
                 t e m p l a t e U R L :   f u n c t i o n ( )   { 
                     v a r 
                         a c t i o n   =   $ m o d u l e . d a t a ( s e t t i n g s . m e t a d a t a . a c t i o n )   | |   s e t t i n g s . a c t i o n   | |   f a l s e , 
                         u r l 
                     ; 
                     i f ( a c t i o n )   { 
                         m o d u l e . d e b u g ( ' C r e a t i n g   u r l   f o r :   ' ,   a c t i o n ) ; 
                         i f ( s e t t i n g s . a p i [ a c t i o n ]   ! = =   u n d e f i n e d )   { 
                             u r l   =   s e t t i n g s . a p i [ a c t i o n ] ; 
                         } 
                         e l s e   { 
                             m o d u l e . e r r o r ( e r r o r . m i s s i n g A c t i o n ) ; 
                         } 
                     } 
                     / /   o v e r r i d e   w i t h   u r l   i f   s p e c i f i e d 
                     i f ( s e t t i n g s . u r l )   { 
                         u r l   =   s e t t i n g s . u r l ; 
                         m o d u l e . d e b u g ( ' G e t t i n g   u r l ' ,   u r l ) ; 
                     } 
                     r e t u r n   u r l ; 
                 } , 
                 u r l :   f u n c t i o n ( u r l ,   u r l D a t a )   { 
                     v a r 
                         u r l V a r i a b l e s 
                     ; 
                     i f ( u r l )   { 
                         u r l V a r i a b l e s   =   u r l . m a t c h ( s e t t i n g s . r e g E x p T e m p l a t e ) ; 
                         u r l D a t a             =   u r l D a t a   | |   s e t t i n g s . u r l D a t a ; 
 
                         i f ( u r l V a r i a b l e s )   { 
                             m o d u l e . d e b u g ( ' L o o k i n g   f o r   U R L   v a r i a b l e s ' ,   u r l V a r i a b l e s ) ; 
                             $ . e a c h ( u r l V a r i a b l e s ,   f u n c t i o n ( i n d e x ,   t e m p l a t e V a l u e ) { 
                                 v a r 
                                     t e r m             =   t e m p l a t e V a l u e . s u b s t r (   2 ,   t e m p l a t e V a l u e . l e n g t h   -   3 ) , 
                                     t e r m V a l u e   =   ( $ . i s P l a i n O b j e c t ( u r l D a t a )   & &   u r l D a t a [ t e r m ]   ! = =   u n d e f i n e d ) 
                                         ?   u r l D a t a [ t e r m ] 
                                         :   ( $ m o d u l e . d a t a ( t e r m )   ! = =   u n d e f i n e d ) 
                                             ?   $ m o d u l e . d a t a ( t e r m ) 
                                             :   u r l D a t a [ t e r m ] 
                                 ; 
                                 m o d u l e . v e r b o s e ( ' L o o k i n g   f o r   v a r i a b l e ' ,   t e r m ,   $ m o d u l e ,   $ m o d u l e . d a t a ( t e r m ) ,   u r l D a t a [ t e r m ] ) ; 
                                 / /   r e m o v e   o p t i o n a l   v a l u e 
                                 i f ( t e r m V a l u e   = = =   f a l s e )   { 
                                     m o d u l e . d e b u g ( ' R e m o v i n g   v a r i a b l e   f r o m   U R L ' ,   u r l V a r i a b l e s ) ; 
                                     u r l   =   u r l . r e p l a c e ( ' / '   +   t e m p l a t e V a l u e ,   ' ' ) ; 
                                 } 
                                 / /   u n d e f i n e d   c o n d i t i o n 
                                 e l s e   i f ( t e r m V a l u e   = = =   u n d e f i n e d   | |   ! t e r m V a l u e )   { 
                                     m o d u l e . e r r o r ( e r r o r . m i s s i n g P a r a m e t e r   +   t e r m ) ; 
                                     u r l   =   f a l s e ; 
                                     r e t u r n   f a l s e ; 
                                 } 
                                 e l s e   { 
                                     u r l   =   u r l . r e p l a c e ( t e m p l a t e V a l u e ,   t e r m V a l u e ) ; 
                                 } 
                             } ) ; 
                         } 
                     } 
                     r e t u r n   u r l ; 
                 } 
             } , 
 
             / /   r e s e t   a p i   r e q u e s t 
             r e s e t :   f u n c t i o n ( )   { 
                 $ m o d u l e 
                     . d a t a ( m e t a d a t a . p r o m i s e ,   f a l s e ) 
                     . d a t a ( m e t a d a t a . x h r ,   f a l s e ) 
                 ; 
                 $ c o n t e x t 
                     . r e m o v e C l a s s ( c l a s s N a m e . e r r o r ) 
                     . r e m o v e C l a s s ( c l a s s N a m e . l o a d i n g ) 
                 ; 
             } , 
 
             s e t t i n g :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                 i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                     $ . e x t e n d ( t r u e ,   s e t t i n g s ,   n a m e ) ; 
                 } 
                 e l s e   i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                     s e t t i n g s [ n a m e ]   =   v a l u e ; 
                 } 
                 e l s e   { 
                     r e t u r n   s e t t i n g s [ n a m e ] ; 
                 } 
             } , 
             i n t e r n a l :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                 i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                     $ . e x t e n d ( t r u e ,   m o d u l e ,   n a m e ) ; 
                 } 
                 e l s e   i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                     m o d u l e [ n a m e ]   =   v a l u e ; 
                 } 
                 e l s e   { 
                     r e t u r n   m o d u l e [ n a m e ] ; 
                 } 
             } , 
             d e b u g :   f u n c t i o n ( )   { 
                 i f ( s e t t i n g s . d e b u g )   { 
                     i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                         m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                     } 
                     e l s e   { 
                         m o d u l e . d e b u g   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                         m o d u l e . d e b u g . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                     } 
                 } 
             } , 
             v e r b o s e :   f u n c t i o n ( )   { 
                 i f ( s e t t i n g s . v e r b o s e   & &   s e t t i n g s . d e b u g )   { 
                     i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                         m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                     } 
                     e l s e   { 
                         m o d u l e . v e r b o s e   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                         m o d u l e . v e r b o s e . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                     } 
                 } 
             } , 
             e r r o r :   f u n c t i o n ( )   { 
                 m o d u l e . e r r o r   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . e r r o r ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                 m o d u l e . e r r o r . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
             } , 
             p e r f o r m a n c e :   { 
                 l o g :   f u n c t i o n ( m e s s a g e )   { 
                     v a r 
                         c u r r e n t T i m e , 
                         e x e c u t i o n T i m e , 
                         p r e v i o u s T i m e 
                     ; 
                     i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                         c u r r e n t T i m e       =   n e w   D a t e ( ) . g e t T i m e ( ) ; 
                         p r e v i o u s T i m e     =   t i m e   | |   c u r r e n t T i m e ; 
                         e x e c u t i o n T i m e   =   c u r r e n t T i m e   -   p r e v i o u s T i m e ; 
                         t i m e                     =   c u r r e n t T i m e ; 
                         p e r f o r m a n c e . p u s h ( { 
                             ' E l e m e n t '                 :   e l e m e n t , 
                             ' N a m e '                       :   m e s s a g e [ 0 ] , 
                             ' A r g u m e n t s '             :   [ ] . s l i c e . c a l l ( m e s s a g e ,   1 )   | |   ' ' , 
                             ' E x e c u t i o n   T i m e '   :   e x e c u t i o n T i m e 
                         } ) ; 
                     } 
                     c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                     m o d u l e . p e r f o r m a n c e . t i m e r   =   s e t T i m e o u t ( m o d u l e . p e r f o r m a n c e . d i s p l a y ,   1 0 0 ) ; 
                 } , 
                 d i s p l a y :   f u n c t i o n ( )   { 
                     v a r 
                         t i t l e   =   s e t t i n g s . n a m e   +   ' : ' , 
                         t o t a l T i m e   =   0 
                     ; 
                     t i m e   =   f a l s e ; 
                     c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                     $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                         t o t a l T i m e   + =   d a t a [ ' E x e c u t i o n   T i m e ' ] ; 
                     } ) ; 
                     t i t l e   + =   '   '   +   t o t a l T i m e   +   ' m s ' ; 
                     i f ( m o d u l e S e l e c t o r )   { 
                         t i t l e   + =   '   \ ' '   +   m o d u l e S e l e c t o r   +   ' \ ' ' ; 
                     } 
                     i f (   ( c o n s o l e . g r o u p   ! = =   u n d e f i n e d   | |   c o n s o l e . t a b l e   ! = =   u n d e f i n e d )   & &   p e r f o r m a n c e . l e n g t h   >   0 )   { 
                         c o n s o l e . g r o u p C o l l a p s e d ( t i t l e ) ; 
                         i f ( c o n s o l e . t a b l e )   { 
                             c o n s o l e . t a b l e ( p e r f o r m a n c e ) ; 
                         } 
                         e l s e   { 
                             $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                                 c o n s o l e . l o g ( d a t a [ ' N a m e ' ]   +   ' :   '   +   d a t a [ ' E x e c u t i o n   T i m e ' ] + ' m s ' ) ; 
                             } ) ; 
                         } 
                         c o n s o l e . g r o u p E n d ( ) ; 
                     } 
                     p e r f o r m a n c e   =   [ ] ; 
                 } 
             } , 
             i n v o k e :   f u n c t i o n ( q u e r y ,   p a s s e d A r g u m e n t s ,   c o n t e x t )   { 
                 v a r 
                     o b j e c t   =   i n s t a n c e , 
                     m a x D e p t h , 
                     f o u n d , 
                     r e s p o n s e 
                 ; 
                 p a s s e d A r g u m e n t s   =   p a s s e d A r g u m e n t s   | |   q u e r y A r g u m e n t s ; 
                 c o n t e x t                   =   e l e m e n t                   | |   c o n t e x t ; 
                 i f ( t y p e o f   q u e r y   = =   ' s t r i n g '   & &   o b j e c t   ! = =   u n d e f i n e d )   { 
                     q u e r y         =   q u e r y . s p l i t ( / [ \ .   ] / ) ; 
                     m a x D e p t h   =   q u e r y . l e n g t h   -   1 ; 
                     $ . e a c h ( q u e r y ,   f u n c t i o n ( d e p t h ,   v a l u e )   { 
                         v a r   c a m e l C a s e V a l u e   =   ( d e p t h   ! =   m a x D e p t h ) 
                             ?   v a l u e   +   q u e r y [ d e p t h   +   1 ] . c h a r A t ( 0 ) . t o U p p e r C a s e ( )   +   q u e r y [ d e p t h   +   1 ] . s l i c e ( 1 ) 
                             :   q u e r y 
                         ; 
                         i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ c a m e l C a s e V a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                             o b j e c t   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                         } 
                         e l s e   i f (   o b j e c t [ c a m e l C a s e V a l u e ]   ! = =   u n d e f i n e d   )   { 
                             f o u n d   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                             r e t u r n   f a l s e ; 
                         } 
                         e l s e   i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ v a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                             o b j e c t   =   o b j e c t [ v a l u e ] ; 
                         } 
                         e l s e   i f (   o b j e c t [ v a l u e ]   ! = =   u n d e f i n e d   )   { 
                             f o u n d   =   o b j e c t [ v a l u e ] ; 
                             r e t u r n   f a l s e ; 
                         } 
                         e l s e   { 
                             r e t u r n   f a l s e ; 
                         } 
                     } ) ; 
                 } 
                 i f   (   $ . i s F u n c t i o n (   f o u n d   )   )   { 
                     r e s p o n s e   =   f o u n d . a p p l y ( c o n t e x t ,   p a s s e d A r g u m e n t s ) ; 
                 } 
                 e l s e   i f ( f o u n d   ! = =   u n d e f i n e d )   { 
                     r e s p o n s e   =   f o u n d ; 
                 } 
                 i f ( $ . i s A r r a y ( r e t u r n e d V a l u e ) )   { 
                     r e t u r n e d V a l u e . p u s h ( r e s p o n s e ) ; 
                 } 
                 e l s e   i f ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d )   { 
                     r e t u r n e d V a l u e   =   [ r e t u r n e d V a l u e ,   r e s p o n s e ] ; 
                 } 
                 e l s e   i f ( r e s p o n s e   ! = =   u n d e f i n e d )   { 
                     r e t u r n e d V a l u e   =   r e s p o n s e ; 
                 } 
                 r e t u r n   f o u n d ; 
             } 
         } ; 
 
         i f ( m e t h o d I n v o k e d )   { 
             i f ( i n s t a n c e   = = =   u n d e f i n e d )   { 
                 m o d u l e . i n i t i a l i z e ( ) ; 
             } 
             m o d u l e . i n v o k e ( q u e r y ) ; 
         } 
         e l s e   { 
             i f ( i n s t a n c e   ! = =   u n d e f i n e d )   { 
                 m o d u l e . d e s t r o y ( ) ; 
             } 
             m o d u l e . i n i t i a l i z e ( ) ; 
         } 
 
         r e t u r n   ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d ) 
             ?   r e t u r n e d V a l u e 
             :   t h i s 
         ; 
     } ; 
 
     / /   h a n d l e   D O M   a t t a c h m e n t   t o   A P I   f u n c t i o n a l i t y 
     $ . f n . a p i B u t t o n   =   f u n c t i o n ( p a r a m e t e r s )   { 
         $ ( t h i s ) 
             . e a c h ( f u n c t i o n ( ) { 
                 v a r 
                     / /   i f   o n l y   f u n c t i o n   p a s s e d   i t   i s   s u c c e s s   c a l l b a c k 
                     $ m o d u l e     =   $ ( t h i s ) , 
                     s e l e c t o r   =   $ ( t h i s ) . s e l e c t o r   | |   ' ' , 
 
                     s e t t i n g s   =   (   $ . i s F u n c t i o n ( p a r a m e t e r s )   ) 
                         ?   $ . e x t e n d ( t r u e ,   { } ,   $ . a p i . s e t t i n g s ,   $ . f n . a p i B u t t o n . s e t t i n g s ,   {   s t a t e C o n t e x t :   t h i s ,   s u c c e s s :   p a r a m e t e r s   } ) 
                         :   $ . e x t e n d ( t r u e ,   { } ,   $ . a p i . s e t t i n g s ,   $ . f n . a p i B u t t o n . s e t t i n g s ,   {   s t a t e C o n t e x t :   t h i s } ,   p a r a m e t e r s ) , 
                     m o d u l e 
                 ; 
                 m o d u l e   =   { 
                     i n i t i a l i z e :   f u n c t i o n ( )   { 
                         i f ( s e t t i n g s . c o n t e x t   & &   s e l e c t o r   ! = =   ' ' )   { 
                             $ ( s e t t i n g s . c o n t e x t ) 
                                 . o n ( s e l e c t o r ,   ' c l i c k . '   +   s e t t i n g s . n a m e s p a c e ,   m o d u l e . c l i c k ) 
                             ; 
                         } 
                         e l s e   { 
                             $ m o d u l e 
                                 . o n ( ' c l i c k . '   +   s e t t i n g s . n a m e s p a c e ,   m o d u l e . c l i c k ) 
                             ; 
                         } 
                     } , 
                     c l i c k :   f u n c t i o n ( )   { 
                         i f ( ! s e t t i n g s . f i l t e r   | |   $ ( t h i s ) . f i l t e r ( s e t t i n g s . f i l t e r ) . s i z e ( )   = = =   0 )   { 
                             $ . p r o x y (   $ . a p i ,   t h i s   ) ( s e t t i n g s ) ; 
                         } 
                     } 
                 } ; 
                 m o d u l e . i n i t i a l i z e ( ) ; 
             } ) 
         ; 
         r e t u r n   t h i s ; 
     } ; 
 
     $ . a p i . s e t t i n g s   =   { 
 
         n a m e                 :   ' A P I ' , 
         n a m e s p a c e       :   ' a p i ' , 
 
         d e b u g               :   t r u e , 
         v e r b o s e           :   t r u e , 
         p e r f o r m a n c e   :   t r u e , 
 
         a p i                   :   { } , 
 
         b e f o r e S e n d     :   f u n c t i o n ( s e t t i n g s )   { 
             r e t u r n   s e t t i n g s ; 
         } , 
         b e f o r e X H R       :   f u n c t i o n ( x h r )   { } , 
         s u c c e s s           :   f u n c t i o n ( r e s p o n s e )   { } , 
         c o m p l e t e         :   f u n c t i o n ( r e s p o n s e )   { } , 
         f a i l u r e           :   f u n c t i o n ( e r r o r C o d e )   { } , 
         p r o g r e s s         :   f a l s e , 
 
         e r r o r   :   { 
             m i s s i n g A c t i o n         :   ' A P I   a c t i o n   u s e d   b u t   n o   u r l   w a s   d e f i n e d ' , 
             m i s s i n g U R L               :   ' U R L   n o t   s p e c i f i e d   f o r   t h e   A P I   a c t i o n ' , 
             m i s s i n g P a r a m e t e r   :   ' M i s s i n g   a n   e s s e n t i a l   U R L   p a r a m e t e r :   ' , 
 
             t i m e o u t                     :   ' Y o u r   r e q u e s t   t i m e d   o u t ' , 
             e r r o r                         :   ' T h e r e   w a s   a n   e r r o r   w i t h   y o u r   r e q u e s t ' , 
             p a r s e E r r o r               :   ' T h e r e   w a s   a n   e r r o r   p a r s i n g   y o u r   r e q u e s t ' , 
             J S O N P a r s e                 :   ' J S O N   c o u l d   n o t   b e   p a r s e d   d u r i n g   e r r o r   h a n d l i n g ' , 
             s t a t u s M e s s a g e         :   ' S e r v e r   g a v e   a n   e r r o r :   ' , 
             b e f o r e S e n d               :   ' T h e   b e f o r e   s e n d   f u n c t i o n   h a s   a b o r t e d   t h e   r e q u e s t ' , 
             e x i t C o n d i t i o n s       :   ' A P I   R e q u e s t   A b o r t e d .   E x i t   c o n d i t i o n s   m e t ' 
         } , 
 
         c l a s s N a m e :   { 
             l o a d i n g   :   ' l o a d i n g ' , 
             e r r o r       :   ' e r r o r ' 
         } , 
 
         m e t a d a t a :   { 
             a c t i o n     :   ' a c t i o n ' , 
             p r o m i s e   :   ' p r o m i s e ' , 
             x h r           :   ' x h r ' 
         } , 
 
         r e g E x p T e m p l a t e :   / \ { \ $ ( [ A - z ] + ) \ } / g , 
 
         a c t i o n                 :   f a l s e , 
         u r l                       :   f a l s e , 
         u r l D a t a               :   f a l s e , 
         s e r i a l i z e F o r m   :   f a l s e , 
 
         s t a t e C o n t e x t     :   f a l s e , 
 
         m e t h o d                 :   ' g e t ' , 
         d a t a                     :   { } , 
         d a t a T y p e             :   ' j s o n ' , 
         c a c h e                   :   t r u e , 
 
         l o a d i n g L e n g t h   :   2 0 0 , 
         e r r o r L e n g t h       :   2 0 0 0 
 
     } ; 
 
     $ . f n . a p i B u t t o n . s e t t i n g s   =   { 
         f i l t e r               :   ' . d i s a b l e d ,   . l o a d i n g ' , 
         c o n t e x t             :   f a l s e , 
         s t a t e C o n t e x t   :   f a l s e 
     } ; 
 
 } ) (   j Q u e r y ,   w i n d o w   ,   d o c u m e n t   ) ; 
 / * 
   *   #   S e m a n t i c   -   C o l o r i z e 
   *   h t t p : / / g i t h u b . c o m / j l u k i c / s e m a n t i c - u i / 
   * 
   * 
   *   C o p y r i g h t   2 0 1 3   C o n t r i b u t o r s 
   *   R e l e a s e d   u n d e r   t h e   M I T   l i c e n s e 
   *   h t t p : / / o p e n s o u r c e . o r g / l i c e n s e s / M I T 
   * 
   * / 
 
 ; ( f u n c t i o n   (   $ ,   w i n d o w ,   d o c u m e n t ,   u n d e f i n e d   )   { 
 
     $ . f n . c o l o r i z e   =   f u n c t i o n ( p a r a m e t e r s )   { 
         v a r 
             s e t t i n g s                 =   $ . e x t e n d ( t r u e ,   { } ,   $ . f n . c o l o r i z e . s e t t i n g s ,   p a r a m e t e r s ) , 
             / /   h o i s t   a r g u m e n t s 
             m o d u l e A r g u m e n t s   =   a r g u m e n t s   | |   f a l s e 
         ; 
         $ ( t h i s ) 
             . e a c h ( f u n c t i o n ( i n s t a n c e I n d e x )   { 
 
                 v a r 
                     $ m o d u l e                   =   $ ( t h i s ) , 
 
                     m a i n C a n v a s             =   $ ( ' < c a n v a s   / > ' ) [ 0 ] , 
                     i m a g e C a n v a s           =   $ ( ' < c a n v a s   / > ' ) [ 0 ] , 
                     o v e r l a y C a n v a s       =   $ ( ' < c a n v a s   / > ' ) [ 0 ] , 
 
                     b a c k g r o u n d I m a g e   =   n e w   I m a g e ( ) , 
 
                     / /   d e f s 
                     m a i n C o n t e x t , 
                     i m a g e C o n t e x t , 
                     o v e r l a y C o n t e x t , 
 
                     i m a g e , 
                     i m a g e N a m e , 
 
                     w i d t h , 
                     h e i g h t , 
 
                     / /   s h o r t u c t s 
                     c o l o r s         =   s e t t i n g s . c o l o r s , 
                     p a t h s           =   s e t t i n g s . p a t h s , 
                     n a m e s p a c e   =   s e t t i n g s . n a m e s p a c e , 
                     e r r o r           =   s e t t i n g s . e r r o r , 
 
                     / /   b o i l e r p l a t e 
                     i n s t a n c e       =   $ m o d u l e . d a t a ( ' m o d u l e - '   +   n a m e s p a c e ) , 
                     m o d u l e 
                 ; 
 
                 m o d u l e   =   { 
 
                     c h e c k P r e c o n d i t i o n s :   f u n c t i o n ( )   { 
                         m o d u l e . d e b u g ( ' C h e c k i n g   p r e - c o n d i t i o n s ' ) ; 
 
                         i f (   ! $ . i s P l a i n O b j e c t ( c o l o r s )   | |   $ . i s E m p t y O b j e c t ( c o l o r s )   )   { 
                             m o d u l e . e r r o r ( e r r o r . u n d e f i n e d C o l o r s ) ; 
                             r e t u r n   f a l s e ; 
                         } 
                         r e t u r n   t r u e ; 
                     } , 
 
                     a s y n c :   f u n c t i o n ( c a l l b a c k )   { 
                         i f ( s e t t i n g s . a s y n c )   { 
                             s e t T i m e o u t ( c a l l b a c k ,   0 ) ; 
                         } 
                         e l s e   { 
                             c a l l b a c k ( ) ; 
                         } 
                     } , 
 
                     g e t M e t a d a t a :   f u n c t i o n ( )   { 
                         m o d u l e . d e b u g ( ' G r a b b i n g   m e t a d a t a ' ) ; 
                         i m a g e           =   $ m o d u l e . d a t a ( ' i m a g e ' )   | |   s e t t i n g s . i m a g e   | |   u n d e f i n e d ; 
                         i m a g e N a m e   =   $ m o d u l e . d a t a ( ' n a m e ' )     | |   s e t t i n g s . n a m e     | |   i n s t a n c e I n d e x ; 
                         w i d t h           =   s e t t i n g s . w i d t h                 | |   $ m o d u l e . w i d t h ( ) ; 
                         h e i g h t         =   s e t t i n g s . h e i g h t               | |   $ m o d u l e . h e i g h t ( ) ; 
                         i f ( w i d t h   = = =   0   | |   h e i g h t   = = =   0 )   { 
                             m o d u l e . e r r o r ( e r r o r . u n d e f i n e d S i z e ) ; 
                         } 
                     } , 
 
                     i n i t i a l i z e :   f u n c t i o n ( )   { 
                         m o d u l e . d e b u g ( ' I n i t i a l i z i n g   w i t h   c o l o r s ' ,   c o l o r s ) ; 
                         i f (   m o d u l e . c h e c k P r e c o n d i t i o n s ( )   )   { 
 
                             m o d u l e . a s y n c ( f u n c t i o n ( )   { 
                                 m o d u l e . g e t M e t a d a t a ( ) ; 
                                 m o d u l e . c a n v a s . c r e a t e ( ) ; 
 
                                 m o d u l e . d r a w . i m a g e ( f u n c t i o n ( )   { 
                                     m o d u l e . d r a w . c o l o r s ( ) ; 
                                     m o d u l e . c a n v a s . m e r g e ( ) ; 
                                 } ) ; 
                                 $ m o d u l e 
                                     . d a t a ( ' m o d u l e - '   +   n a m e s p a c e ,   m o d u l e ) 
                                 ; 
                             } ) ; 
                         } 
                     } , 
 
                     r e d r a w :   f u n c t i o n ( )   { 
                         m o d u l e . d e b u g ( ' R e d r a w i n g   i m a g e ' ) ; 
                         m o d u l e . a s y n c ( f u n c t i o n ( )   { 
                             m o d u l e . c a n v a s . c l e a r ( ) ; 
                             m o d u l e . d r a w . c o l o r s ( ) ; 
                             m o d u l e . c a n v a s . m e r g e ( ) ; 
                         } ) ; 
                     } , 
 
                     c h a n g e :   { 
                         c o l o r :   f u n c t i o n ( c o l o r N a m e ,   c o l o r )   { 
                             m o d u l e . d e b u g ( ' C h a n g i n g   c o l o r ' ,   c o l o r N a m e ) ; 
                             i f ( c o l o r s [ c o l o r N a m e ]   = = =   u n d e f i n e d )   { 
                                 m o d u l e . e r r o r ( e r r o r . m i s s i n g C o l o r ) ; 
                                 r e t u r n   f a l s e ; 
                             } 
                             c o l o r s [ c o l o r N a m e ]   =   c o l o r ; 
                             m o d u l e . r e d r a w ( ) ; 
                         } 
                     } , 
 
                     c a n v a s :   { 
                         c r e a t e :   f u n c t i o n ( )   { 
                             m o d u l e . d e b u g ( ' C r e a t i n g   c a n v a s e s ' ) ; 
 
                             m a i n C a n v a s . w i d t h           =   w i d t h ; 
                             m a i n C a n v a s . h e i g h t         =   h e i g h t ; 
                             i m a g e C a n v a s . w i d t h         =   w i d t h ; 
                             i m a g e C a n v a s . h e i g h t       =   h e i g h t ; 
                             o v e r l a y C a n v a s . w i d t h     =   w i d t h ; 
                             o v e r l a y C a n v a s . h e i g h t   =   h e i g h t ; 
 
                             m a i n C o n t e x t         =   m a i n C a n v a s . g e t C o n t e x t ( ' 2 d ' ) ; 
                             i m a g e C o n t e x t       =   i m a g e C a n v a s . g e t C o n t e x t ( ' 2 d ' ) ; 
                             o v e r l a y C o n t e x t   =   o v e r l a y C a n v a s . g e t C o n t e x t ( ' 2 d ' ) ; 
 
                             $ m o d u l e 
                                 . a p p e n d (   m a i n C a n v a s   ) 
                             ; 
                             m a i n C o n t e x t         =   $ m o d u l e . c h i l d r e n ( ' c a n v a s ' ) [ 0 ] . g e t C o n t e x t ( ' 2 d ' ) ; 
                         } , 
                         c l e a r :   f u n c t i o n ( c o n t e x t )   { 
                             m o d u l e . d e b u g ( ' C l e a r i n g   c a n v a s ' ) ; 
                             o v e r l a y C o n t e x t . f i l l S t y l e   =   ' # F F F F F F ' ; 
                             o v e r l a y C o n t e x t . f i l l R e c t ( 0 ,   0 ,   w i d t h ,   h e i g h t ) ; 
                         } , 
                         m e r g e :   f u n c t i o n ( )   { 
                             i f (   ! $ . i s F u n c t i o n ( m a i n C o n t e x t . b l e n d O n t o )   )   { 
                                 m o d u l e . e r r o r ( e r r o r . m i s s i n g P l u g i n ) ; 
                                 r e t u r n ; 
                             } 
                             m a i n C o n t e x t . p u t I m a g e D a t a (   i m a g e C o n t e x t . g e t I m a g e D a t a ( 0 ,   0 ,   w i d t h ,   h e i g h t ) ,   0 ,   0 ) ; 
                             o v e r l a y C o n t e x t . b l e n d O n t o ( m a i n C o n t e x t ,   ' m u l t i p l y ' ) ; 
                         } 
                     } , 
 
                     d r a w :   { 
 
                         i m a g e :   f u n c t i o n ( c a l l b a c k )   { 
                             m o d u l e . d e b u g ( ' D r a w i n g   i m a g e ' ) ; 
                             c a l l b a c k   =   c a l l b a c k   | |   f u n c t i o n ( ) { } ; 
                             i f ( i m a g e )   { 
                                 b a c k g r o u n d I m a g e . s r c         =   i m a g e ; 
                                 b a c k g r o u n d I m a g e . o n l o a d   =   f u n c t i o n ( )   { 
                                     i m a g e C o n t e x t . d r a w I m a g e ( b a c k g r o u n d I m a g e ,   0 ,   0 ) ; 
                                     c a l l b a c k ( ) ; 
                                 } ; 
                             } 
                             e l s e   { 
                                 m o d u l e . e r r o r ( e r r o r . n o I m a g e ) ; 
                                 c a l l b a c k ( ) ; 
                             } 
                         } , 
 
                         c o l o r s :   f u n c t i o n ( )   { 
                             m o d u l e . d e b u g ( ' D r a w i n g   c o l o r   o v e r l a y s ' ,   c o l o r s ) ; 
                             $ . e a c h ( c o l o r s ,   f u n c t i o n ( c o l o r N a m e ,   c o l o r )   { 
                                 s e t t i n g s . o n D r a w ( o v e r l a y C o n t e x t ,   i m a g e N a m e ,   c o l o r N a m e ,   c o l o r ) ; 
                             } ) ; 
                         } 
 
                     } , 
 
                     d e b u g :   f u n c t i o n ( m e s s a g e ,   v a r i a b l e N a m e )   { 
                         i f ( s e t t i n g s . d e b u g )   { 
                             i f ( v a r i a b l e N a m e   ! = =   u n d e f i n e d )   { 
                                 c o n s o l e . i n f o ( s e t t i n g s . n a m e   +   ' :   '   +   m e s s a g e ,   v a r i a b l e N a m e ) ; 
                             } 
                             e l s e   { 
                                 c o n s o l e . i n f o ( s e t t i n g s . n a m e   +   ' :   '   +   m e s s a g e ) ; 
                             } 
                         } 
                     } , 
                     e r r o r :   f u n c t i o n ( e r r o r M e s s a g e )   { 
                         c o n s o l e . w a r n ( s e t t i n g s . n a m e   +   ' :   '   +   e r r o r M e s s a g e ) ; 
                     } , 
                     i n v o k e :   f u n c t i o n ( m e t h o d N a m e ,   c o n t e x t ,   m e t h o d A r g u m e n t s )   { 
                         v a r 
                             m e t h o d 
                         ; 
                         m e t h o d A r g u m e n t s   =   m e t h o d A r g u m e n t s   | |   A r r a y . p r o t o t y p e . s l i c e . c a l l (   a r g u m e n t s ,   2   ) ; 
 
                         i f ( t y p e o f   m e t h o d N a m e   = =   ' s t r i n g '   & &   i n s t a n c e   ! = =   u n d e f i n e d )   { 
                             m e t h o d N a m e   =   m e t h o d N a m e . s p l i t ( ' . ' ) ; 
                             $ . e a c h ( m e t h o d N a m e ,   f u n c t i o n ( i n d e x ,   n a m e )   { 
                                 i f (   $ . i s P l a i n O b j e c t (   i n s t a n c e [ n a m e ]   )   )   { 
                                     i n s t a n c e   =   i n s t a n c e [ n a m e ] ; 
                                     r e t u r n   t r u e ; 
                                 } 
                                 e l s e   i f (   $ . i s F u n c t i o n (   i n s t a n c e [ n a m e ]   )   )   { 
                                     m e t h o d   =   i n s t a n c e [ n a m e ] ; 
                                     r e t u r n   t r u e ; 
                                 } 
                                 m o d u l e . e r r o r ( s e t t i n g s . e r r o r . m e t h o d ) ; 
                                 r e t u r n   f a l s e ; 
                             } ) ; 
                         } 
                         r e t u r n   (   $ . i s F u n c t i o n (   m e t h o d   )   ) 
                             ?   m e t h o d . a p p l y ( c o n t e x t ,   m e t h o d A r g u m e n t s ) 
                             :   f a l s e 
                         ; 
                     } 
 
                 } ; 
                 i f ( i n s t a n c e   ! = =   u n d e f i n e d   & &   m o d u l e A r g u m e n t s )   { 
                     / /   s i m p l e r   t h a n   i n v o k e   r e a l i z i n g   t o   i n v o k e   i t s e l f   ( a n d   l o s i n g   s c o p e   d u e   p r o t o t y p e . c a l l ( ) 
                     i f ( m o d u l e A r g u m e n t s [ 0 ]   = =   ' i n v o k e ' )   { 
                         m o d u l e A r g u m e n t s   =   A r r a y . p r o t o t y p e . s l i c e . c a l l (   m o d u l e A r g u m e n t s ,   1   ) ; 
                     } 
                     r e t u r n   m o d u l e . i n v o k e ( m o d u l e A r g u m e n t s [ 0 ] ,   t h i s ,   A r r a y . p r o t o t y p e . s l i c e . c a l l (   m o d u l e A r g u m e n t s ,   1   )   ) ; 
                 } 
                 / /   i n i t i a l i z i n g 
                 m o d u l e . i n i t i a l i z e ( ) ; 
             } ) 
         ; 
         r e t u r n   t h i s ; 
     } ; 
 
     $ . f n . c o l o r i z e . s e t t i n g s   =   { 
         n a m e             :   ' I m a g e   C o l o r i z e r ' , 
         d e b u g           :   t r u e , 
         n a m e s p a c e   :   ' c o l o r i z e ' , 
 
         o n D r a w         :   f u n c t i o n ( o v e r l a y C o n t e x t ,   i m a g e N a m e ,   c o l o r N a m e ,   c o l o r )   { } , 
 
         / /   w h e t h e r   t o   b l o c k   e x e c u t i o n   w h i l e   u p d a t i n g   c a n v a s 
         a s y n c           :   t r u e , 
         / /   o b j e c t   c o n t a i n i n g   n a m e s   a n d   d e f a u l t   v a l u e s   o f   c o l o r   r e g i o n s 
         c o l o r s         :   { } , 
 
         m e t a d a t a :   { 
             i m a g e   :   ' i m a g e ' , 
             n a m e     :   ' n a m e ' 
         } , 
 
         e r r o r :   { 
             n o I m a g e                   :   ' N o   t r a c i n g   i m a g e   s p e c i f i e d ' , 
             u n d e f i n e d C o l o r s   :   ' N o   d e f a u l t   c o l o r s   s p e c i f i e d . ' , 
             m i s s i n g C o l o r         :   ' A t t e m p t e d   t o   c h a n g e   c o l o r   t h a t   d o e s   n o t   e x i s t ' , 
             m i s s i n g P l u g i n       :   ' B l e n d   o n t o   p l u g - i n   m u s t   b e   i n c l u d e d ' , 
             u n d e f i n e d H e i g h t   :   ' T h e   w i d t h   o r   h e i g h t   o f   i m a g e   c a n v a s   c o u l d   n o t   b e   a u t o m a t i c a l l y   d e t e r m i n e d .   P l e a s e   s p e c i f y   a   h e i g h t . ' 
         } 
 
     } ; 
 
 } ) (   j Q u e r y ,   w i n d o w   ,   d o c u m e n t   ) ; 
 
 / * 
   *   #   S e m a n t i c   -   F o r m   V a l i d a t i o n 
   *   h t t p : / / g i t h u b . c o m / j l u k i c / s e m a n t i c - u i / 
   * 
   * 
   *   C o p y r i g h t   2 0 1 3   C o n t r i b u t o r s 
   *   R e l e a s e d   u n d e r   t h e   M I T   l i c e n s e 
   *   h t t p : / / o p e n s o u r c e . o r g / l i c e n s e s / M I T 
   * 
   * / 
 
 ; ( f u n c t i o n   (   $ ,   w i n d o w ,   d o c u m e n t ,   u n d e f i n e d   )   { 
 
 $ . f n . f o r m   =   f u n c t i o n ( f i e l d s ,   p a r a m e t e r s )   { 
     v a r 
         $ a l l M o d u l e s           =   $ ( t h i s ) , 
 
         s e t t i n g s                 =   $ . e x t e n d ( t r u e ,   { } ,   $ . f n . f o r m . s e t t i n g s ,   p a r a m e t e r s ) , 
         v a l i d a t i o n             =   $ . e x t e n d ( { } ,   $ . f n . f o r m . s e t t i n g s . d e f a u l t s ,   f i e l d s ) , 
 
         n a m e s p a c e               =   s e t t i n g s . n a m e s p a c e , 
         m e t a d a t a                 =   s e t t i n g s . m e t a d a t a , 
         s e l e c t o r                 =   s e t t i n g s . s e l e c t o r , 
         c l a s s N a m e               =   s e t t i n g s . c l a s s N a m e , 
         e r r o r                       =   s e t t i n g s . e r r o r , 
 
         e v e n t N a m e s p a c e     =   ' . '   +   n a m e s p a c e , 
         m o d u l e N a m e s p a c e   =   ' m o d u l e - '   +   n a m e s p a c e , 
 
         m o d u l e S e l e c t o r     =   $ a l l M o d u l e s . s e l e c t o r   | |   ' ' , 
 
         t i m e                         =   n e w   D a t e ( ) . g e t T i m e ( ) , 
         p e r f o r m a n c e           =   [ ] , 
 
         q u e r y                       =   a r g u m e n t s [ 0 ] , 
         m e t h o d I n v o k e d       =   ( t y p e o f   q u e r y   = =   ' s t r i n g ' ) , 
         q u e r y A r g u m e n t s     =   [ ] . s l i c e . c a l l ( a r g u m e n t s ,   1 ) , 
         r e t u r n e d V a l u e 
     ; 
     $ a l l M o d u l e s 
         . e a c h ( f u n c t i o n ( )   { 
             v a r 
                 $ m o d u l e         =   $ ( t h i s ) , 
                 $ f i e l d           =   $ ( t h i s ) . f i n d ( s e l e c t o r . f i e l d ) , 
                 $ g r o u p           =   $ ( t h i s ) . f i n d ( s e l e c t o r . g r o u p ) , 
                 $ m e s s a g e       =   $ ( t h i s ) . f i n d ( s e l e c t o r . m e s s a g e ) , 
                 $ p r o m p t         =   $ ( t h i s ) . f i n d ( s e l e c t o r . p r o m p t ) , 
                 $ s u b m i t         =   $ ( t h i s ) . f i n d ( s e l e c t o r . s u b m i t ) , 
 
                 f o r m E r r o r s   =   [ ] , 
 
                 e l e m e n t         =   t h i s , 
                 i n s t a n c e       =   $ m o d u l e . d a t a ( m o d u l e N a m e s p a c e ) , 
                 m o d u l e 
             ; 
 
             m o d u l e             =   { 
 
                 i n i t i a l i z e :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' I n i t i a l i z i n g   f o r m   v a l i d a t i o n ' ,   $ m o d u l e ,   v a l i d a t i o n ,   s e t t i n g s ) ; 
                     m o d u l e . b i n d E v e n t s ( ) ; 
                     m o d u l e . i n s t a n t i a t e ( ) ; 
                 } , 
 
                 i n s t a n t i a t e :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' S t o r i n g   i n s t a n c e   o f   m o d u l e ' ,   m o d u l e ) ; 
                     i n s t a n c e   =   m o d u l e ; 
                     $ m o d u l e 
                         . d a t a ( m o d u l e N a m e s p a c e ,   m o d u l e ) 
                     ; 
                 } , 
 
                 d e s t r o y :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' D e s t r o y i n g   p r e v i o u s   m o d u l e ' ,   i n s t a n c e ) ; 
                     m o d u l e . r e m o v e E v e n t s ( ) ; 
                     $ m o d u l e 
                         . r e m o v e D a t a ( m o d u l e N a m e s p a c e ) 
                     ; 
                 } , 
 
                 r e f r e s h :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' R e f r e s h i n g   s e l e c t o r   c a c h e ' ) ; 
                     $ f i e l d   =   $ m o d u l e . f i n d ( s e l e c t o r . f i e l d ) ; 
                 } , 
 
                 s u b m i t :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' S u b m i t t i n g   f o r m ' ,   $ m o d u l e ) ; 
                     $ m o d u l e 
                         . s u b m i t ( ) 
                     ; 
                 } , 
 
                 b i n d E v e n t s :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . k e y b o a r d S h o r t c u t s )   { 
                         $ f i e l d 
                             . o n ( ' k e y d o w n '   +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . f i e l d . k e y d o w n ) 
                         ; 
                     } 
                     $ m o d u l e 
                         . o n ( ' s u b m i t '   +   e v e n t N a m e s p a c e ,   m o d u l e . v a l i d a t e . f o r m ) 
                     ; 
                     $ f i e l d 
                         . o n ( ' b l u r '   +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . f i e l d . b l u r ) 
                     ; 
                     $ s u b m i t 
                         . o n ( ' c l i c k '   +   e v e n t N a m e s p a c e ,   m o d u l e . s u b m i t ) 
                     ; 
                     $ f i e l d 
                         . e a c h ( f u n c t i o n ( )   { 
                             v a r 
                                 t y p e               =   $ ( t h i s ) . p r o p ( ' t y p e ' ) , 
                                 i n p u t E v e n t   =   m o d u l e . g e t . c h a n g e E v e n t ( t y p e ) 
                             ; 
                             $ ( t h i s ) 
                                 . o n ( i n p u t E v e n t   +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . f i e l d . c h a n g e ) 
                             ; 
                         } ) 
                     ; 
                 } , 
 
                 r e m o v e E v e n t s :   f u n c t i o n ( )   { 
                     $ m o d u l e 
                         . o f f ( e v e n t N a m e s p a c e ) 
                     ; 
                     $ f i e l d 
                         . o f f ( e v e n t N a m e s p a c e ) 
                     ; 
                     $ s u b m i t 
                         . o f f ( e v e n t N a m e s p a c e ) 
                     ; 
                     $ f i e l d 
                         . o f f ( e v e n t N a m e s p a c e ) 
                     ; 
                 } , 
 
                 e v e n t :   { 
                     f i e l d :   { 
                         k e y d o w n :   f u n c t i o n ( e v e n t )   { 
                             v a r 
                                 $ f i e l d     =   $ ( t h i s ) , 
                                 k e y           =   e v e n t . w h i c h , 
                                 k e y C o d e   =   { 
                                     e n t e r     :   1 3 , 
                                     e s c a p e   :   2 7 
                                 } 
                             ; 
                             i f (   k e y   = =   k e y C o d e . e s c a p e )   { 
                                 m o d u l e . v e r b o s e ( ' E s c a p e   k e y   p r e s s e d   b l u r r i n g   f i e l d ' ) ; 
                                 $ f i e l d 
                                     . b l u r ( ) 
                                 ; 
                             } 
                             i f ( ! e v e n t . c t r l K e y   & &   k e y   = =   k e y C o d e . e n t e r   & &   $ f i e l d . i s ( s e l e c t o r . i n p u t )   )   { 
                                 m o d u l e . d e b u g ( ' E n t e r   k e y   p r e s s e d ,   s u b m i t t i n g   f o r m ' ) ; 
                                 $ s u b m i t 
                                     . a d d C l a s s ( c l a s s N a m e . d o w n ) 
                                 ; 
                                 $ f i e l d 
                                     . o n e ( ' k e y u p '   +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . f i e l d . k e y u p ) 
                                 ; 
                                 e v e n t . p r e v e n t D e f a u l t ( ) ; 
                                 r e t u r n   f a l s e ; 
                             } 
                         } , 
                         k e y u p :   f u n c t i o n ( )   { 
                             m o d u l e . v e r b o s e ( ' D o i n g   k e y b o a r d   s h o r t c u t   f o r m   s u b m i t ' ) ; 
                             $ s u b m i t . r e m o v e C l a s s ( c l a s s N a m e . d o w n ) ; 
                             m o d u l e . s u b m i t ( ) ; 
                         } , 
                         b l u r :   f u n c t i o n ( )   { 
                             v a r 
                                 $ f i e l d             =   $ ( t h i s ) , 
                                 $ f i e l d G r o u p   =   $ f i e l d . c l o s e s t ( $ g r o u p ) 
                             ; 
                             i f (   $ f i e l d G r o u p . h a s C l a s s ( c l a s s N a m e . e r r o r )   )   { 
                                 m o d u l e . d e b u g ( ' R e v a l i d a t i n g   f i e l d ' ,   $ f i e l d ,     m o d u l e . g e t . v a l i d a t i o n ( $ f i e l d ) ) ; 
                                 m o d u l e . v a l i d a t e . f i e l d (   m o d u l e . g e t . v a l i d a t i o n ( $ f i e l d )   ) ; 
                             } 
                             e l s e   i f ( s e t t i n g s . o n   = =   ' b l u r '   | |   s e t t i n g s . o n   = =   ' c h a n g e ' )   { 
                                 m o d u l e . v a l i d a t e . f i e l d (   m o d u l e . g e t . v a l i d a t i o n ( $ f i e l d )   ) ; 
                             } 
                         } , 
                         c h a n g e :   f u n c t i o n ( )   { 
                             v a r 
                                 $ f i e l d             =   $ ( t h i s ) , 
                                 $ f i e l d G r o u p   =   $ f i e l d . c l o s e s t ( $ g r o u p ) 
                             ; 
                             i f ( s e t t i n g s . o n   = =   ' c h a n g e '   | |   (   $ f i e l d G r o u p . h a s C l a s s ( c l a s s N a m e . e r r o r )   & &   s e t t i n g s . r e v a l i d a t e )   )   { 
                                 c l e a r T i m e o u t ( m o d u l e . t i m e r ) ; 
                                 m o d u l e . t i m e r   =   s e t T i m e o u t ( f u n c t i o n ( )   { 
                                     m o d u l e . d e b u g ( ' R e v a l i d a t i n g   f i e l d ' ,   $ f i e l d ,     m o d u l e . g e t . v a l i d a t i o n ( $ f i e l d ) ) ; 
                                     m o d u l e . v a l i d a t e . f i e l d (   m o d u l e . g e t . v a l i d a t i o n ( $ f i e l d )   ) ; 
                                 } ,   s e t t i n g s . d e l a y ) ; 
                             } 
                         } 
                     } 
 
                 } , 
 
                 g e t :   { 
                     c h a n g e E v e n t :   f u n c t i o n ( t y p e )   { 
                         i f ( t y p e   = =   ' c h e c k b o x '   | |   t y p e   = =   ' r a d i o '   | |   t y p e   = =   ' h i d d e n ' )   { 
                             r e t u r n   ' c h a n g e ' ; 
                         } 
                         e l s e   { 
                             r e t u r n   ( d o c u m e n t . c r e a t e E l e m e n t ( ' i n p u t ' ) . o n i n p u t   ! = =   u n d e f i n e d ) 
                                 ?   ' i n p u t ' 
                                 :   ( d o c u m e n t . c r e a t e E l e m e n t ( ' i n p u t ' ) . o n p r o p e r t y c h a n g e   ! = =   u n d e f i n e d ) 
                                     ?   ' p r o p e r t y c h a n g e ' 
                                     :   ' k e y u p ' 
                             ; 
                         } 
                     } , 
                     f i e l d :   f u n c t i o n ( i d e n t i f i e r )   { 
                         m o d u l e . v e r b o s e ( ' F i n d i n g   f i e l d   w i t h   i d e n t i f i e r ' ,   i d e n t i f i e r ) ; 
                         i f (   $ f i e l d . f i l t e r ( ' # '   +   i d e n t i f i e r ) . s i z e ( )   >   0   )   { 
                             r e t u r n   $ f i e l d . f i l t e r ( ' # '   +   i d e n t i f i e r ) ; 
                         } 
                         e l s e   i f (   $ f i e l d . f i l t e r ( ' [ n a m e = " '   +   i d e n t i f i e r   + ' " ] ' ) . s i z e ( )   >   0   )   { 
                             r e t u r n   $ f i e l d . f i l t e r ( ' [ n a m e = " '   +   i d e n t i f i e r   + ' " ] ' ) ; 
                         } 
                         e l s e   i f (   $ f i e l d . f i l t e r ( ' [ d a t a - '   +   m e t a d a t a . v a l i d a t e   +   ' = " ' +   i d e n t i f i e r   + ' " ] ' ) . s i z e ( )   >   0   )   { 
                             r e t u r n   $ f i e l d . f i l t e r ( ' [ d a t a - '   +   m e t a d a t a . v a l i d a t e   +   ' = " ' +   i d e n t i f i e r   + ' " ] ' ) ; 
                         } 
                         r e t u r n   $ ( ' < i n p u t / > ' ) ; 
                     } , 
                     v a l i d a t i o n :   f u n c t i o n ( $ f i e l d )   { 
                         v a r 
                             r u l e s 
                         ; 
                         $ . e a c h ( v a l i d a t i o n ,   f u n c t i o n ( f i e l d N a m e ,   f i e l d )   { 
                             i f (   m o d u l e . g e t . f i e l d ( f i e l d . i d e n t i f i e r ) . g e t ( 0 )   = =   $ f i e l d . g e t ( 0 )   )   { 
                                 r u l e s   =   f i e l d ; 
                             } 
                         } ) ; 
                         r e t u r n   r u l e s   | |   f a l s e ; 
                     } 
                 } , 
 
                 h a s :   { 
 
                     f i e l d :   f u n c t i o n ( i d e n t i f i e r )   { 
                         m o d u l e . v e r b o s e ( ' C h e c k i n g   f o r   e x i s t e n c e   o f   a   f i e l d   w i t h   i d e n t i f i e r ' ,   i d e n t i f i e r ) ; 
                         i f (   $ f i e l d . f i l t e r ( ' # '   +   i d e n t i f i e r ) . s i z e ( )   >   0   )   { 
                             r e t u r n   t r u e ; 
                         } 
                         e l s e   i f (   $ f i e l d . f i l t e r ( ' [ n a m e = " '   +   i d e n t i f i e r   + ' " ] ' ) . s i z e ( )   >   0   )   { 
                             r e t u r n   t r u e ; 
                         } 
                         e l s e   i f (   $ f i e l d . f i l t e r ( ' [ d a t a - '   +   m e t a d a t a . v a l i d a t e   +   ' = " ' +   i d e n t i f i e r   + ' " ] ' ) . s i z e ( )   >   0   )   { 
                             r e t u r n   t r u e ; 
                         } 
                         r e t u r n   f a l s e ; 
                     } 
 
                 } , 
 
                 a d d :   { 
                     p r o m p t :   f u n c t i o n ( i d e n t i f i e r ,   e r r o r s )   { 
                         v a r 
                             $ f i e l d               =   m o d u l e . g e t . f i e l d ( i d e n t i f i e r ) , 
                             $ f i e l d G r o u p     =   $ f i e l d . c l o s e s t ( $ g r o u p ) , 
                             $ p r o m p t             =   $ f i e l d G r o u p . f i n d ( s e l e c t o r . p r o m p t ) , 
                             p r o m p t E x i s t s   =   ( $ p r o m p t . s i z e ( )   ! = =   0 ) 
                         ; 
                         e r r o r s   =   ( t y p e o f   e r r o r s   = =   ' s t r i n g ' ) 
                             ?   [ e r r o r s ] 
                             :   e r r o r s 
                         ; 
                         m o d u l e . v e r b o s e ( ' A d d i n g   f i e l d   e r r o r   s t a t e ' ,   i d e n t i f i e r ) ; 
                         $ f i e l d G r o u p 
                             . a d d C l a s s ( c l a s s N a m e . e r r o r ) 
                         ; 
                         i f ( s e t t i n g s . i n l i n e )   { 
                             i f ( ! p r o m p t E x i s t s )   { 
                                 $ p r o m p t   =   s e t t i n g s . t e m p l a t e s . p r o m p t ( e r r o r s ) ; 
                                 $ p r o m p t 
                                     . a p p e n d T o ( $ f i e l d G r o u p ) 
                                 ; 
                             } 
                             $ p r o m p t 
                                 . h t m l ( e r r o r s [ 0 ] ) 
                             ; 
                             i f ( ! p r o m p t E x i s t s )   { 
                                 i f ( s e t t i n g s . t r a n s i t i o n   & &   $ . f n . t r a n s i t i o n   ! = =   u n d e f i n e d   & &   $ m o d u l e . t r a n s i t i o n ( ' i s   s u p p o r t e d ' ) )   { 
                                     m o d u l e . v e r b o s e ( ' D i s p l a y i n g   e r r o r   w i t h   c s s   t r a n s i t i o n ' ,   s e t t i n g s . t r a n s i t i o n ) ; 
                                     $ p r o m p t . t r a n s i t i o n ( s e t t i n g s . t r a n s i t i o n   +   '   i n ' ,   s e t t i n g s . d u r a t i o n ) ; 
                                 } 
                                 e l s e   { 
                                     m o d u l e . v e r b o s e ( ' D i s p l a y i n g   e r r o r   w i t h   f a l l b a c k   j a v a s c r i p t   a n i m a t i o n ' ) ; 
                                     $ p r o m p t 
                                         . f a d e I n ( s e t t i n g s . d u r a t i o n ) 
                                     ; 
                                 } 
                             } 
                             e l s e   { 
                                 m o d u l e . v e r b o s e ( ' I n l i n e   e r r o r s   a r e   d i s a b l e d ,   n o   i n l i n e   e r r o r   a d d e d ' ,   i d e n t i f i e r ) ; 
                             } 
                         } 
                     } , 
                     e r r o r s :   f u n c t i o n ( e r r o r s )   { 
                         m o d u l e . d e b u g ( ' A d d i n g   f o r m   e r r o r   m e s s a g e s ' ,   e r r o r s ) ; 
                         $ m e s s a g e 
                             . h t m l (   s e t t i n g s . t e m p l a t e s . e r r o r ( e r r o r s )   ) 
                         ; 
                     } 
                 } , 
 
                 r e m o v e :   { 
                     p r o m p t :   f u n c t i o n ( f i e l d )   { 
                         v a r 
                             $ f i e l d             =   m o d u l e . g e t . f i e l d ( f i e l d . i d e n t i f i e r ) , 
                             $ f i e l d G r o u p   =   $ f i e l d . c l o s e s t ( $ g r o u p ) , 
                             $ p r o m p t           =   $ f i e l d G r o u p . f i n d ( s e l e c t o r . p r o m p t ) 
                         ; 
                         $ f i e l d G r o u p 
                             . r e m o v e C l a s s ( c l a s s N a m e . e r r o r ) 
                         ; 
                         i f ( s e t t i n g s . i n l i n e   & &   $ p r o m p t . i s ( ' : v i s i b l e ' ) )   { 
                             m o d u l e . v e r b o s e ( ' R e m o v i n g   p r o m p t   f o r   f i e l d ' ,   f i e l d ) ; 
                             i f ( s e t t i n g s . t r a n s i t i o n   & &   $ . f n . t r a n s i t i o n   ! = =   u n d e f i n e d   & &   $ m o d u l e . t r a n s i t i o n ( ' i s   s u p p o r t e d ' ) )   { 
                                 $ p r o m p t . t r a n s i t i o n ( s e t t i n g s . t r a n s i t i o n   +   '   o u t ' ,   s e t t i n g s . d u r a t i o n ,   f u n c t i o n ( )   { 
                                     $ p r o m p t . r e m o v e ( ) ; 
                                 } ) ; 
                             } 
                             e l s e   { 
                                 $ p r o m p t 
                                     . f a d e O u t ( s e t t i n g s . d u r a t i o n ,   f u n c t i o n ( ) { 
                                         $ p r o m p t . r e m o v e ( ) ; 
                                     } ) 
                                 ; 
                             } 
                         } 
                     } 
                 } , 
 
                 v a l i d a t e :   { 
 
                     f o r m :   f u n c t i o n ( e v e n t )   { 
                         v a r 
                             a l l V a l i d   =   t r u e 
                         ; 
                         / /   r e s e t   e r r o r s 
                         f o r m E r r o r s   =   [ ] ; 
                         $ . e a c h ( v a l i d a t i o n ,   f u n c t i o n ( f i e l d N a m e ,   f i e l d )   { 
                             i f (   ! (   m o d u l e . v a l i d a t e . f i e l d ( f i e l d )   )   )   { 
                                 a l l V a l i d   =   f a l s e ; 
                             } 
                         } ) ; 
                         i f ( a l l V a l i d )   { 
                             m o d u l e . d e b u g ( ' F o r m   h a s   n o   v a l i d a t i o n   e r r o r s ,   s u b m i t t i n g ' ) ; 
                             $ m o d u l e 
                                 . r e m o v e C l a s s ( c l a s s N a m e . e r r o r ) 
                                 . a d d C l a s s ( c l a s s N a m e . s u c c e s s ) 
                             ; 
                             r e t u r n   $ . p r o x y ( s e t t i n g s . o n S u c c e s s ,   t h i s ) ( e v e n t ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . d e b u g ( ' F o r m   h a s   e r r o r s ' ) ; 
                             $ m o d u l e . a d d C l a s s ( c l a s s N a m e . e r r o r ) ; 
                             i f ( ! s e t t i n g s . i n l i n e )   { 
                                 m o d u l e . a d d . e r r o r s ( f o r m E r r o r s ) ; 
                             } 
                             r e t u r n   $ . p r o x y ( s e t t i n g s . o n F a i l u r e ,   t h i s ) ( f o r m E r r o r s ) ; 
                         } 
                     } , 
 
                     / /   t a k e s   a   v a l i d a t i o n   o b j e c t   a n d   r e t u r n s   w h e t h e r   f i e l d   p a s s e s   v a l i d a t i o n 
                     f i e l d :   f u n c t i o n ( f i e l d )   { 
                         v a r 
                             $ f i e l d             =   m o d u l e . g e t . f i e l d ( f i e l d . i d e n t i f i e r ) , 
                             f i e l d V a l i d     =   t r u e , 
                             f i e l d E r r o r s   =   [ ] 
                         ; 
                         i f ( f i e l d . r u l e s   ! = =   u n d e f i n e d )   { 
                             $ . e a c h ( f i e l d . r u l e s ,   f u n c t i o n ( i n d e x ,   r u l e )   { 
                                 i f (   m o d u l e . h a s . f i e l d ( f i e l d . i d e n t i f i e r )   & &   ! (   m o d u l e . v a l i d a t e . r u l e ( f i e l d ,   r u l e )   )   )   { 
                                     m o d u l e . d e b u g ( ' F i e l d   i s   i n v a l i d ' ,   f i e l d . i d e n t i f i e r ,   r u l e . t y p e ) ; 
                                     f i e l d E r r o r s . p u s h ( r u l e . p r o m p t ) ; 
                                     f i e l d V a l i d   =   f a l s e ; 
                                 } 
                             } ) ; 
                         } 
                         i f ( f i e l d V a l i d )   { 
                             m o d u l e . r e m o v e . p r o m p t ( f i e l d ,   f i e l d E r r o r s ) ; 
                             $ . p r o x y ( s e t t i n g s . o n V a l i d ,   $ f i e l d ) ( ) ; 
                         } 
                         e l s e   { 
                             f o r m E r r o r s   =   f o r m E r r o r s . c o n c a t ( f i e l d E r r o r s ) ; 
                             m o d u l e . a d d . p r o m p t ( f i e l d . i d e n t i f i e r ,   f i e l d E r r o r s ) ; 
                             $ . p r o x y ( s e t t i n g s . o n I n v a l i d ,   $ f i e l d ) ( f i e l d E r r o r s ) ; 
                             r e t u r n   f a l s e ; 
                         } 
                         r e t u r n   t r u e ; 
                     } , 
 
                     / /   t a k e s   v a l i d a t i o n   r u l e   a n d   r e t u r n s   w h e t h e r   f i e l d   p a s s e s   r u l e 
                     r u l e :   f u n c t i o n ( f i e l d ,   v a l i d a t i o n )   { 
                         v a r 
                             $ f i e l d                 =   m o d u l e . g e t . f i e l d ( f i e l d . i d e n t i f i e r ) , 
                             t y p e                     =   v a l i d a t i o n . t y p e , 
                             v a l u e                   =   $ . t r i m ( $ f i e l d . v a l ( )   +   ' ' ) , 
 
                             b r a c k e t R e g E x p   =   / \ [ ( . * ) \ ] / i , 
                             b r a c k e t               =   b r a c k e t R e g E x p . e x e c ( t y p e ) , 
                             i s V a l i d               =   t r u e , 
                             a n c i l l a r y , 
                             f u n c t i o n T y p e 
                         ; 
                         / /   i f   b r a c k e t   n o t a t i o n   i s   u s e d ,   p a s s   i n   e x t r a   p a r a m e t e r s 
                         i f ( b r a c k e t   ! = =   u n d e f i n e d   & &   b r a c k e t   ! = =   n u l l )   { 
                             a n c i l l a r y         =   ' '   +   b r a c k e t [ 1 ] ; 
                             f u n c t i o n T y p e   =   t y p e . r e p l a c e ( b r a c k e t [ 0 ] ,   ' ' ) ; 
                             i s V a l i d             =   $ . p r o x y ( s e t t i n g s . r u l e s [ f u n c t i o n T y p e ] ,   $ m o d u l e ) ( v a l u e ,   a n c i l l a r y ) ; 
                         } 
                         / /   n o r m a l   n o t a t i o n 
                         e l s e   { 
                             i s V a l i d   =   $ . p r o x y ( s e t t i n g s . r u l e s [ t y p e ] ,   $ f i e l d ) ( v a l u e ) ; 
                         } 
                         r e t u r n   i s V a l i d ; 
                     } 
                 } , 
 
                 s e t t i n g :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                     i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                         $ . e x t e n d ( t r u e ,   s e t t i n g s ,   n a m e ) ; 
                     } 
                     e l s e   i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                         s e t t i n g s [ n a m e ]   =   v a l u e ; 
                     } 
                     e l s e   { 
                         r e t u r n   s e t t i n g s [ n a m e ] ; 
                     } 
                 } , 
                 i n t e r n a l :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                     i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                         $ . e x t e n d ( t r u e ,   m o d u l e ,   n a m e ) ; 
                     } 
                     e l s e   i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                         m o d u l e [ n a m e ]   =   v a l u e ; 
                     } 
                     e l s e   { 
                         r e t u r n   m o d u l e [ n a m e ] ; 
                     } 
                 } , 
                 d e b u g :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . d e b u g )   { 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . d e b u g   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                             m o d u l e . d e b u g . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                         } 
                     } 
                 } , 
                 v e r b o s e :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . v e r b o s e   & &   s e t t i n g s . d e b u g )   { 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . v e r b o s e   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                             m o d u l e . v e r b o s e . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                         } 
                     } 
                 } , 
                 e r r o r :   f u n c t i o n ( )   { 
                     m o d u l e . e r r o r   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . e r r o r ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                     m o d u l e . e r r o r . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                 } , 
                 p e r f o r m a n c e :   { 
                     l o g :   f u n c t i o n ( m e s s a g e )   { 
                         v a r 
                             c u r r e n t T i m e , 
                             e x e c u t i o n T i m e , 
                             p r e v i o u s T i m e 
                         ; 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             c u r r e n t T i m e       =   n e w   D a t e ( ) . g e t T i m e ( ) ; 
                             p r e v i o u s T i m e     =   t i m e   | |   c u r r e n t T i m e ; 
                             e x e c u t i o n T i m e   =   c u r r e n t T i m e   -   p r e v i o u s T i m e ; 
                             t i m e                     =   c u r r e n t T i m e ; 
                             p e r f o r m a n c e . p u s h ( { 
                                 ' E l e m e n t '                 :   e l e m e n t , 
                                 ' N a m e '                       :   m e s s a g e [ 0 ] , 
                                 ' A r g u m e n t s '             :   [ ] . s l i c e . c a l l ( m e s s a g e ,   1 )   | |   ' ' , 
                                 ' E x e c u t i o n   T i m e '   :   e x e c u t i o n T i m e 
                             } ) ; 
                         } 
                         c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                         m o d u l e . p e r f o r m a n c e . t i m e r   =   s e t T i m e o u t ( m o d u l e . p e r f o r m a n c e . d i s p l a y ,   1 0 0 ) ; 
                     } , 
                     d i s p l a y :   f u n c t i o n ( )   { 
                         v a r 
                             t i t l e   =   s e t t i n g s . n a m e   +   ' : ' , 
                             t o t a l T i m e   =   0 
                         ; 
                         t i m e   =   f a l s e ; 
                         c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                         $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                             t o t a l T i m e   + =   d a t a [ ' E x e c u t i o n   T i m e ' ] ; 
                         } ) ; 
                         t i t l e   + =   '   '   +   t o t a l T i m e   +   ' m s ' ; 
                         i f ( m o d u l e S e l e c t o r )   { 
                             t i t l e   + =   '   \ ' '   +   m o d u l e S e l e c t o r   +   ' \ ' ' ; 
                         } 
                         i f ( $ a l l M o d u l e s . s i z e ( )   >   1 )   { 
                             t i t l e   + =   '   '   +   ' ( '   +   $ a l l M o d u l e s . s i z e ( )   +   ' ) ' ; 
                         } 
                         i f (   ( c o n s o l e . g r o u p   ! = =   u n d e f i n e d   | |   c o n s o l e . t a b l e   ! = =   u n d e f i n e d )   & &   p e r f o r m a n c e . l e n g t h   >   0 )   { 
                             c o n s o l e . g r o u p C o l l a p s e d ( t i t l e ) ; 
                             i f ( c o n s o l e . t a b l e )   { 
                                 c o n s o l e . t a b l e ( p e r f o r m a n c e ) ; 
                             } 
                             e l s e   { 
                                 $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                                     c o n s o l e . l o g ( d a t a [ ' N a m e ' ]   +   ' :   '   +   d a t a [ ' E x e c u t i o n   T i m e ' ] + ' m s ' ) ; 
                                 } ) ; 
                             } 
                             c o n s o l e . g r o u p E n d ( ) ; 
                         } 
                         p e r f o r m a n c e   =   [ ] ; 
                     } 
                 } , 
                 i n v o k e :   f u n c t i o n ( q u e r y ,   p a s s e d A r g u m e n t s ,   c o n t e x t )   { 
                     v a r 
                         o b j e c t   =   i n s t a n c e , 
                         m a x D e p t h , 
                         f o u n d , 
                         r e s p o n s e 
                     ; 
                     p a s s e d A r g u m e n t s   =   p a s s e d A r g u m e n t s   | |   q u e r y A r g u m e n t s ; 
                     c o n t e x t                   =   e l e m e n t                   | |   c o n t e x t ; 
                     i f ( t y p e o f   q u e r y   = =   ' s t r i n g '   & &   o b j e c t   ! = =   u n d e f i n e d )   { 
                         q u e r y         =   q u e r y . s p l i t ( / [ \ .   ] / ) ; 
                         m a x D e p t h   =   q u e r y . l e n g t h   -   1 ; 
                         $ . e a c h ( q u e r y ,   f u n c t i o n ( d e p t h ,   v a l u e )   { 
                             v a r   c a m e l C a s e V a l u e   =   ( d e p t h   ! =   m a x D e p t h ) 
                                 ?   v a l u e   +   q u e r y [ d e p t h   +   1 ] . c h a r A t ( 0 ) . t o U p p e r C a s e ( )   +   q u e r y [ d e p t h   +   1 ] . s l i c e ( 1 ) 
                                 :   q u e r y 
                             ; 
                             i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ c a m e l C a s e V a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                                 o b j e c t   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                             } 
                             e l s e   i f (   o b j e c t [ c a m e l C a s e V a l u e ]   ! = =   u n d e f i n e d   )   { 
                                 f o u n d   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                                 r e t u r n   f a l s e ; 
                             } 
                             e l s e   i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ v a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                                 o b j e c t   =   o b j e c t [ v a l u e ] ; 
                             } 
                             e l s e   i f (   o b j e c t [ v a l u e ]   ! = =   u n d e f i n e d   )   { 
                                 f o u n d   =   o b j e c t [ v a l u e ] ; 
                                 r e t u r n   f a l s e ; 
                             } 
                             e l s e   { 
                                 r e t u r n   f a l s e ; 
                             } 
                         } ) ; 
                     } 
                     i f   (   $ . i s F u n c t i o n (   f o u n d   )   )   { 
                         r e s p o n s e   =   f o u n d . a p p l y ( c o n t e x t ,   p a s s e d A r g u m e n t s ) ; 
                     } 
                     e l s e   i f ( f o u n d   ! = =   u n d e f i n e d )   { 
                         r e s p o n s e   =   f o u n d ; 
                     } 
                     i f ( $ . i s A r r a y ( r e t u r n e d V a l u e ) )   { 
                         r e t u r n e d V a l u e . p u s h ( r e s p o n s e ) ; 
                     } 
                     e l s e   i f ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d )   { 
                         r e t u r n e d V a l u e   =   [ r e t u r n e d V a l u e ,   r e s p o n s e ] ; 
                     } 
                     e l s e   i f ( r e s p o n s e   ! = =   u n d e f i n e d )   { 
                         r e t u r n e d V a l u e   =   r e s p o n s e ; 
                     } 
                     r e t u r n   f o u n d ; 
                 } 
             } ; 
             i f ( m e t h o d I n v o k e d )   { 
                 i f ( i n s t a n c e   = = =   u n d e f i n e d )   { 
                     m o d u l e . i n i t i a l i z e ( ) ; 
                 } 
                 m o d u l e . i n v o k e ( q u e r y ) ; 
             } 
             e l s e   { 
                 i f ( i n s t a n c e   ! = =   u n d e f i n e d )   { 
                     m o d u l e . d e s t r o y ( ) ; 
                 } 
                 m o d u l e . i n i t i a l i z e ( ) ; 
             } 
 
         } ) 
     ; 
 
     r e t u r n   ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d ) 
         ?   r e t u r n e d V a l u e 
         :   t h i s 
     ; 
 } ; 
 
 $ . f n . f o r m . s e t t i n g s   =   { 
 
     n a m e                             :   ' F o r m ' , 
     n a m e s p a c e                   :   ' f o r m ' , 
 
     d e b u g                           :   t r u e , 
     v e r b o s e                       :   t r u e , 
     p e r f o r m a n c e               :   t r u e , 
 
 
     k e y b o a r d S h o r t c u t s   :   t r u e , 
     o n                                 :   ' s u b m i t ' , 
     i n l i n e                         :   f a l s e , 
 
     d e l a y                           :   2 0 0 , 
     r e v a l i d a t e                 :   t r u e , 
 
     t r a n s i t i o n                 :   ' s c a l e ' , 
     d u r a t i o n                     :   1 5 0 , 
 
 
     o n V a l i d                       :   f u n c t i o n ( )   { } , 
     o n I n v a l i d                   :   f u n c t i o n ( )   { } , 
     o n S u c c e s s                   :   f u n c t i o n ( )   {   r e t u r n   t r u e ;   } , 
     o n F a i l u r e                   :   f u n c t i o n ( )   {   r e t u r n   f a l s e ;   } , 
 
     m e t a d a t a   :   { 
         v a l i d a t e :   ' v a l i d a t e ' 
     } , 
 
     s e l e c t o r   :   { 
         m e s s a g e   :   ' . e r r o r . m e s s a g e ' , 
         f i e l d       :   ' i n p u t ,   t e x t a r e a ,   s e l e c t ' , 
         g r o u p       :   ' . f i e l d ' , 
         i n p u t       :   ' i n p u t ' , 
         p r o m p t     :   ' . p r o m p t ' , 
         s u b m i t     :   ' . s u b m i t ' 
     } , 
 
     c l a s s N a m e   :   { 
         e r r o r       :   ' e r r o r ' , 
         s u c c e s s   :   ' s u c c e s s ' , 
         d o w n         :   ' d o w n ' , 
         l a b e l       :   ' u i   l a b e l   p r o m p t ' 
     } , 
 
     / /   e r r o r s 
     e r r o r :   { 
         m e t h o d       :   ' T h e   m e t h o d   y o u   c a l l e d   i s   n o t   d e f i n e d . ' 
     } , 
 
 
     t e m p l a t e s :   { 
         e r r o r :   f u n c t i o n ( e r r o r s )   { 
             v a r 
                 h t m l   =   ' < u l   c l a s s = " l i s t " > ' 
             ; 
             $ . e a c h ( e r r o r s ,   f u n c t i o n ( i n d e x ,   v a l u e )   { 
                 h t m l   + =   ' < l i > '   +   v a l u e   +   ' < / l i > ' ; 
             } ) ; 
             h t m l   + =   ' < / u l > ' ; 
             r e t u r n   $ ( h t m l ) ; 
         } , 
         p r o m p t :   f u n c t i o n ( e r r o r s )   { 
             r e t u r n   $ ( ' < d i v / > ' ) 
                 . a d d C l a s s ( ' u i   r e d   p o i n t i n g   p r o m p t   l a b e l ' ) 
                 . h t m l ( e r r o r s [ 0 ] ) 
             ; 
         } 
     } , 
 
     r u l e s :   { 
         c h e c k e d :   f u n c t i o n ( )   { 
             r e t u r n   ( $ ( t h i s ) . f i l t e r ( ' : c h e c k e d ' ) . s i z e ( )   >   0 ) ; 
         } , 
         e m p t y :   f u n c t i o n ( v a l u e )   { 
             r e t u r n   ! ( v a l u e   = = =   u n d e f i n e d   | |   ' '   = = =   v a l u e ) ; 
         } , 
         e m a i l :   f u n c t i o n ( v a l u e ) { 
             v a r 
                 e m a i l R e g E x p   =   n e w   R e g E x p ( " [ a - z 0 - 9 ! # $ % & ' * + / = ? ^ _ ` { | } ~ - ] + ( ? : \ \ . [ a - z 0 - 9 ! # $ % & ' * + / = ? ^ _ ` { | } ~ - ] + ) * @ ( ? : [ a - z 0 - 9 ] ( ? : [ a - z 0 - 9 - ] * [ a - z 0 - 9 ] ) ? \ \ . ) + [ a - z 0 - 9 ] ( ? : [ a - z 0 - 9 - ] * [ a - z 0 - 9 ] ) ? " ,   " i " ) 
             ; 
             r e t u r n   e m a i l R e g E x p . t e s t ( v a l u e ) ; 
         } , 
         l e n g t h :   f u n c t i o n ( v a l u e ,   r e q u i r e d L e n g t h )   { 
             r e t u r n   ( v a l u e   ! = =   u n d e f i n e d ) 
                 ?   ( v a l u e . l e n g t h   > =   r e q u i r e d L e n g t h ) 
                 :   f a l s e 
             ; 
         } , 
         n o t :   f u n c t i o n ( v a l u e ,   n o t V a l u e )   { 
             r e t u r n   ( v a l u e   ! =   n o t V a l u e ) ; 
         } , 
         c o n t a i n s :   f u n c t i o n ( v a l u e ,   t e x t )   { 
             t e x t   =   t e x t . r e p l a c e ( / [ \ - \ [ \ ] \ / \ { \ } \ ( \ ) \ * \ + \ ? \ . \ \ \ ^ \ $ \ | ] / g ,   " \ \ $ & " ) ; 
             r e t u r n   ( v a l u e . s e a r c h ( t e x t )   ! = =   - 1 ) ; 
         } , 
         i s :   f u n c t i o n ( v a l u e ,   t e x t )   { 
             r e t u r n   ( v a l u e   = =   t e x t ) ; 
         } , 
         m a x L e n g t h :   f u n c t i o n ( v a l u e ,   m a x L e n g t h )   { 
             r e t u r n   ( v a l u e   ! = =   u n d e f i n e d ) 
                 ?   ( v a l u e . l e n g t h   < =   m a x L e n g t h ) 
                 :   f a l s e 
             ; 
         } , 
         m a t c h :   f u n c t i o n ( v a l u e ,   f i e l d I d e n t i f i e r )   { 
             / /   u s e   e i t h e r   i d   o r   n a m e   o f   f i e l d 
             v a r 
                 $ f o r m   =   $ ( t h i s ) , 
                 m a t c h i n g V a l u e 
             ; 
             i f ( $ f o r m . f i n d ( ' # '   +   f i e l d I d e n t i f i e r ) . s i z e ( )   >   0 )   { 
                 m a t c h i n g V a l u e   =   $ f o r m . f i n d ( ' # '   +   f i e l d I d e n t i f i e r ) . v a l ( ) ; 
             } 
             e l s e   i f ( $ f o r m . f i n d ( ' [ n a m e = '   +   f i e l d I d e n t i f i e r   + ' ] ' ) . s i z e ( )   >   0 )   { 
                 m a t c h i n g V a l u e   =   $ f o r m . f i n d ( ' [ n a m e = '   +   f i e l d I d e n t i f i e r   +   ' ] ' ) . v a l ( ) ; 
             } 
             e l s e   i f (   $ f o r m . f i n d ( ' [ d a t a - v a l i d a t e = " ' +   f i e l d I d e n t i f i e r   + ' " ] ' ) . s i z e ( )   >   0   )   { 
                 m a t c h i n g V a l u e   =   $ f o r m . f i n d ( ' [ d a t a - v a l i d a t e = " ' +   f i e l d I d e n t i f i e r   + ' " ] ' ) . v a l ( ) ; 
             } 
             r e t u r n   ( m a t c h i n g V a l u e   ! = =   u n d e f i n e d ) 
                 ?   (   v a l u e . t o S t r i n g ( )   = =   m a t c h i n g V a l u e . t o S t r i n g ( )   ) 
                 :   f a l s e 
             ; 
         } , 
         u r l :   f u n c t i o n ( v a l u e )   { 
             v a r 
                 u r l R e g E x p   =   / ( f t p | h t t p | h t t p s ) : \ / \ / ( \ w + : { 0 , 1 } \ w * @ ) ? ( \ S + ) ( : [ 0 - 9 ] + ) ? ( \ / | \ / ( [ \ w # ! : . ? + = & % @ ! \ - \ / ] ) ) ? / 
             ; 
             r e t u r n   u r l R e g E x p . t e s t ( v a l u e ) ; 
         } 
     } 
 
 } ; 
 
 } ) (   j Q u e r y ,   w i n d o w   ,   d o c u m e n t   ) ; 
 
 / * 
   *   #   S e m a n t i c   -   S t a t e 
   *   h t t p : / / g i t h u b . c o m / j l u k i c / s e m a n t i c - u i / 
   * 
   * 
   *   C o p y r i g h t   2 0 1 3   C o n t r i b u t o r s 
   *   R e l e a s e d   u n d e r   t h e   M I T   l i c e n s e 
   *   h t t p : / / o p e n s o u r c e . o r g / l i c e n s e s / M I T 
   * 
   * / 
 
 ; ( f u n c t i o n   (   $ ,   w i n d o w ,   d o c u m e n t ,   u n d e f i n e d   )   { 
 
 $ . f n . s t a t e   =   f u n c t i o n ( p a r a m e t e r s )   { 
     v a r 
         $ a l l M o d u l e s           =   $ ( t h i s ) , 
         s e t t i n g s                 =   $ . e x t e n d ( t r u e ,   { } ,   $ . f n . s t a t e . s e t t i n g s ,   p a r a m e t e r s ) , 
 
         m o d u l e S e l e c t o r     =   $ a l l M o d u l e s . s e l e c t o r   | |   ' ' , 
 
         t i m e                         =   n e w   D a t e ( ) . g e t T i m e ( ) , 
         p e r f o r m a n c e           =   [ ] , 
 
         q u e r y                       =   a r g u m e n t s [ 0 ] , 
         m e t h o d I n v o k e d       =   ( t y p e o f   q u e r y   = =   ' s t r i n g ' ) , 
         q u e r y A r g u m e n t s     =   [ ] . s l i c e . c a l l ( a r g u m e n t s ,   1 ) , 
 
         / /   s h o r t c u t s 
         e r r o r                   =   s e t t i n g s . e r r o r , 
         m e t a d a t a             =   s e t t i n g s . m e t a d a t a , 
         c l a s s N a m e           =   s e t t i n g s . c l a s s N a m e , 
         n a m e s p a c e           =   s e t t i n g s . n a m e s p a c e , 
         s t a t e s                 =   s e t t i n g s . s t a t e s , 
         t e x t                     =   s e t t i n g s . t e x t , 
 
         e v e n t N a m e s p a c e     =   ' . '   +   n a m e s p a c e , 
         m o d u l e N a m e s p a c e   =   n a m e s p a c e   +   ' - m o d u l e ' , 
 
 
         r e t u r n e d V a l u e 
     ; 
     $ a l l M o d u l e s 
         . e a c h ( f u n c t i o n ( )   { 
             v a r 
                 $ m o d u l e               =   $ ( t h i s ) , 
 
                 e l e m e n t               =   t h i s , 
                 i n s t a n c e             =   $ m o d u l e . d a t a ( m o d u l e N a m e s p a c e ) , 
 
                 m o d u l e 
             ; 
             m o d u l e   =   { 
 
                 i n i t i a l i z e :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' I n i t i a l i z i n g   m o d u l e ' ) ; 
 
                     / /   a l l o w   m o d u l e   t o   g u e s s   d e s i r e d   s t a t e   b a s e d   o n   e l e m e n t 
                     i f ( s e t t i n g s . a u t o m a t i c )   { 
                         m o d u l e . a d d . d e f a u l t s ( ) ; 
                     } 
 
                     / /   b i n d   e v e n t s   w i t h   d e l e g a t e d   e v e n t s 
                     i f ( s e t t i n g s . c o n t e x t   & &   m o d u l e S e l e c t o r   ! = =   ' ' )   { 
                         i f (   m o d u l e . a l l o w s ( ' h o v e r ' )   )   { 
                             $ ( e l e m e n t ,   s e t t i n g s . c o n t e x t ) 
                                 . o n ( m o d u l e S e l e c t o r ,   ' m o u s e e n t e r '   +   e v e n t N a m e s p a c e ,   m o d u l e . e n a b l e . h o v e r ) 
                                 . o n ( m o d u l e S e l e c t o r ,   ' m o u s e l e a v e '   +   e v e n t N a m e s p a c e ,   m o d u l e . d i s a b l e . h o v e r ) 
                             ; 
                         } 
                         i f (   m o d u l e . a l l o w s ( ' d o w n ' )   )   { 
                             $ ( e l e m e n t ,   s e t t i n g s . c o n t e x t ) 
                                 . o n ( m o d u l e S e l e c t o r ,   ' m o u s e d o w n '   +   e v e n t N a m e s p a c e ,   m o d u l e . e n a b l e . d o w n ) 
                                 . o n ( m o d u l e S e l e c t o r ,   ' m o u s e u p '       +   e v e n t N a m e s p a c e ,   m o d u l e . d i s a b l e . d o w n ) 
                             ; 
                         } 
                         i f (   m o d u l e . a l l o w s ( ' f o c u s ' )   )   { 
                             $ ( e l e m e n t ,   s e t t i n g s . c o n t e x t ) 
                                 . o n ( m o d u l e S e l e c t o r ,   ' f o c u s '   +   e v e n t N a m e s p a c e ,   m o d u l e . e n a b l e . f o c u s ) 
                                 . o n ( m o d u l e S e l e c t o r ,   ' b l u r '     +   e v e n t N a m e s p a c e ,   m o d u l e . d i s a b l e . f o c u s ) 
                             ; 
                         } 
                         $ ( s e t t i n g s . c o n t e x t ) 
                             . o n ( m o d u l e S e l e c t o r ,   ' m o u s e e n t e r '   +   e v e n t N a m e s p a c e ,   m o d u l e . c h a n g e . t e x t ) 
                             . o n ( m o d u l e S e l e c t o r ,   ' m o u s e l e a v e '   +   e v e n t N a m e s p a c e ,   m o d u l e . r e s e t . t e x t ) 
                             . o n ( m o d u l e S e l e c t o r ,   ' c l i c k '             +   e v e n t N a m e s p a c e ,   m o d u l e . t o g g l e . s t a t e ) 
                         ; 
                     } 
                     e l s e   { 
                         i f (   m o d u l e . a l l o w s ( ' h o v e r ' )   )   { 
                             $ m o d u l e 
                                 . o n ( ' m o u s e e n t e r '   +   e v e n t N a m e s p a c e ,   m o d u l e . e n a b l e . h o v e r ) 
                                 . o n ( ' m o u s e l e a v e '   +   e v e n t N a m e s p a c e ,   m o d u l e . d i s a b l e . h o v e r ) 
                             ; 
                         } 
                         i f (   m o d u l e . a l l o w s ( ' d o w n ' )   )   { 
                             $ m o d u l e 
                                 . o n ( ' m o u s e d o w n '   +   e v e n t N a m e s p a c e ,   m o d u l e . e n a b l e . d o w n ) 
                                 . o n ( ' m o u s e u p '       +   e v e n t N a m e s p a c e ,   m o d u l e . d i s a b l e . d o w n ) 
                             ; 
                         } 
                         i f (   m o d u l e . a l l o w s ( ' f o c u s ' )   )   { 
                             $ m o d u l e 
                                 . o n ( ' f o c u s '   +   e v e n t N a m e s p a c e ,   m o d u l e . e n a b l e . f o c u s ) 
                                 . o n ( ' b l u r '     +   e v e n t N a m e s p a c e ,   m o d u l e . d i s a b l e . f o c u s ) 
                             ; 
                         } 
                         $ m o d u l e 
                             . o n ( ' m o u s e e n t e r '   +   e v e n t N a m e s p a c e ,   m o d u l e . c h a n g e . t e x t ) 
                             . o n ( ' m o u s e l e a v e '   +   e v e n t N a m e s p a c e ,   m o d u l e . r e s e t . t e x t ) 
                             . o n ( ' c l i c k '             +   e v e n t N a m e s p a c e ,   m o d u l e . t o g g l e . s t a t e ) 
                         ; 
                     } 
                     m o d u l e . i n s t a n t i a t e ( ) ; 
                 } , 
 
                 i n s t a n t i a t e :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' S t o r i n g   i n s t a n c e   o f   m o d u l e ' ,   m o d u l e ) ; 
                     i n s t a n c e   =   m o d u l e ; 
                     $ m o d u l e 
                         . d a t a ( m o d u l e N a m e s p a c e ,   m o d u l e ) 
                     ; 
                 } , 
 
                 d e s t r o y :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' D e s t r o y i n g   p r e v i o u s   m o d u l e ' ,   i n s t a n c e ) ; 
                     $ m o d u l e 
                         . o f f ( e v e n t N a m e s p a c e ) 
                         . r e m o v e D a t a ( m o d u l e N a m e s p a c e ) 
                     ; 
                 } , 
 
                 r e f r e s h :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' R e f r e s h i n g   s e l e c t o r   c a c h e ' ) ; 
                     $ m o d u l e   =   $ ( e l e m e n t ) ; 
                 } , 
 
                 a d d :   { 
                     d e f a u l t s :   f u n c t i o n ( )   { 
                         v a r 
                             u s e r S t a t e s   =   p a r a m e t e r s   & &   $ . i s P l a i n O b j e c t ( p a r a m e t e r s . s t a t e s ) 
                                 ?   p a r a m e t e r s . s t a t e s 
                                 :   { } 
                         ; 
                         $ . e a c h ( s e t t i n g s . d e f a u l t s ,   f u n c t i o n ( t y p e ,   t y p e S t a t e s )   { 
                             i f (   m o d u l e . i s [ t y p e ]   ! = =   u n d e f i n e d   & &   m o d u l e . i s [ t y p e ] ( )   )   { 
                                 m o d u l e . v e r b o s e ( ' A d d i n g   d e f a u l t   s t a t e s ' ,   t y p e ,   e l e m e n t ) ; 
                                 $ . e x t e n d ( s e t t i n g s . s t a t e s ,   t y p e S t a t e s ,   u s e r S t a t e s ) ; 
                             } 
                         } ) ; 
                     } 
                 } , 
 
                 i s :   { 
 
                     a c t i v e :   f u n c t i o n ( )   { 
                         r e t u r n   $ m o d u l e . h a s C l a s s ( c l a s s N a m e . a c t i v e ) ; 
                     } , 
                     l o a d i n g :   f u n c t i o n ( )   { 
                         r e t u r n   $ m o d u l e . h a s C l a s s ( c l a s s N a m e . l o a d i n g ) ; 
                     } , 
                     i n a c t i v e :   f u n c t i o n ( )   { 
                         r e t u r n   ! (   $ m o d u l e . h a s C l a s s ( c l a s s N a m e . a c t i v e )   ) ; 
                     } , 
 
                     e n a b l e d :   f u n c t i o n ( )   { 
                         r e t u r n   ! (   $ m o d u l e . i s ( s e t t i n g s . f i l t e r . a c t i v e )   ) ; 
                     } , 
                     d i s a b l e d :   f u n c t i o n ( )   { 
                         r e t u r n   (   $ m o d u l e . i s ( s e t t i n g s . f i l t e r . a c t i v e )   ) ; 
                     } , 
                     t e x t E n a b l e d :   f u n c t i o n ( )   { 
                         r e t u r n   ! (   $ m o d u l e . i s ( s e t t i n g s . f i l t e r . t e x t )   ) ; 
                     } , 
 
                     / /   d e f i n i t i o n s   f o r   a u t o m a t i c   t y p e   d e t e c t i o n 
                     b u t t o n :   f u n c t i o n ( )   { 
                         r e t u r n   $ m o d u l e . i s ( ' . b u t t o n : n o t ( a ,   . s u b m i t ) ' ) ; 
                     } , 
                     i n p u t :   f u n c t i o n ( )   { 
                         r e t u r n   $ m o d u l e . i s ( ' i n p u t ' ) ; 
                     } 
                 } , 
 
                 a l l o w :   f u n c t i o n ( s t a t e )   { 
                     m o d u l e . d e b u g ( ' N o w   a l l o w i n g   s t a t e ' ,   s t a t e ) ; 
                     s t a t e s [ s t a t e ]   =   t r u e ; 
                 } , 
                 d i s a l l o w :   f u n c t i o n ( s t a t e )   { 
                     m o d u l e . d e b u g ( ' N o   l o n g e r   a l l o w i n g ' ,   s t a t e ) ; 
                     s t a t e s [ s t a t e ]   =   f a l s e ; 
                 } , 
 
                 a l l o w s :   f u n c t i o n ( s t a t e )   { 
                     r e t u r n   s t a t e s [ s t a t e ]   | |   f a l s e ; 
                 } , 
 
                 e n a b l e :   { 
                     s t a t e :   f u n c t i o n ( s t a t e )   { 
                         i f ( m o d u l e . a l l o w s ( s t a t e ) )   { 
                             $ m o d u l e . a d d C l a s s (   c l a s s N a m e [ s t a t e ]   ) ; 
                         } 
                     } , 
                     / /   c o n v e n i e n c e 
                     f o c u s :   f u n c t i o n ( )   { 
                         $ m o d u l e . a d d C l a s s ( c l a s s N a m e . f o c u s ) ; 
                     } , 
                     h o v e r :   f u n c t i o n ( )   { 
                         $ m o d u l e . a d d C l a s s ( c l a s s N a m e . h o v e r ) ; 
                     } , 
                     d o w n :   f u n c t i o n ( )   { 
                         $ m o d u l e . a d d C l a s s ( c l a s s N a m e . d o w n ) ; 
                     } , 
                 } , 
 
                 d i s a b l e :   { 
                     s t a t e :   f u n c t i o n ( s t a t e )   { 
                         i f ( m o d u l e . a l l o w s ( s t a t e ) )   { 
                             $ m o d u l e . r e m o v e C l a s s (   c l a s s N a m e [ s t a t e ]   ) ; 
                         } 
                     } , 
                     / /   c o n v e n i e n c e 
                     f o c u s :   f u n c t i o n ( )   { 
                         $ m o d u l e . r e m o v e C l a s s ( c l a s s N a m e . f o c u s ) ; 
                     } , 
                     h o v e r :   f u n c t i o n ( )   { 
                         $ m o d u l e . r e m o v e C l a s s ( c l a s s N a m e . h o v e r ) ; 
                     } , 
                     d o w n :   f u n c t i o n ( )   { 
                         $ m o d u l e . r e m o v e C l a s s ( c l a s s N a m e . d o w n ) ; 
                     } , 
                 } , 
 
                 t o g g l e :   { 
                     s t a t e :   f u n c t i o n ( )   { 
                         v a r 
                             a p i R e q u e s t   =   $ m o d u l e . d a t a ( m e t a d a t a . p r o m i s e ) 
                         ; 
                         i f (   m o d u l e . a l l o w s ( ' a c t i v e ' )   & &   m o d u l e . i s . e n a b l e d ( )   )   { 
                             m o d u l e . r e f r e s h ( ) ; 
                             i f ( a p i R e q u e s t   ! = =   u n d e f i n e d )   { 
                                 m o d u l e . l i s t e n T o ( a p i R e q u e s t ) ; 
                             } 
                             e l s e   { 
                                 m o d u l e . c h a n g e . s t a t e ( ) ; 
                             } 
                         } 
                     } 
                 } , 
 
                 l i s t e n T o :   f u n c t i o n ( a p i R e q u e s t )   { 
                     m o d u l e . d e b u g ( ' A P I   r e q u e s t   d e t e c t e d ,   w a i t i n g   f o r   s t a t e   s i g n a l ' ,   a p i R e q u e s t ) ; 
                     i f ( a p i R e q u e s t )   { 
                         i f ( t e x t . l o a d i n g )   { 
                             m o d u l e . u p d a t e . t e x t ( t e x t . l o a d i n g ) ; 
                         } 
                         $ . w h e n ( a p i R e q u e s t ) 
                             . t h e n ( f u n c t i o n ( )   { 
                                 i f ( a p i R e q u e s t . s t a t e ( )   = =   ' r e s o l v e d ' )   { 
                                     m o d u l e . d e b u g ( ' A P I   r e q u e s t   s u c c e e d e d ' ) ; 
                                     s e t t i n g s . a c t i v a t e T e s t       =   f u n c t i o n ( ) {   r e t u r n   t r u e ;   } ; 
                                     s e t t i n g s . d e a c t i v a t e T e s t   =   f u n c t i o n ( ) {   r e t u r n   t r u e ;   } ; 
                                 } 
                                 e l s e   { 
                                     m o d u l e . d e b u g ( ' A P I   r e q u e s t   f a i l e d ' ) ; 
                                     s e t t i n g s . a c t i v a t e T e s t       =   f u n c t i o n ( ) {   r e t u r n   f a l s e ;   } ; 
                                     s e t t i n g s . d e a c t i v a t e T e s t   =   f u n c t i o n ( ) {   r e t u r n   f a l s e ;   } ; 
                                 } 
                                 m o d u l e . c h a n g e . s t a t e ( ) ; 
                             } ) 
                         ; 
                     } 
                     / /   x h r   e x i s t s   b u t   s e t   t o   f a l s e ,   b e f o r e S e n d   k i l l e d   t h e   x h r 
                     e l s e   { 
                         s e t t i n g s . a c t i v a t e T e s t       =   f u n c t i o n ( ) {   r e t u r n   f a l s e ;   } ; 
                         s e t t i n g s . d e a c t i v a t e T e s t   =   f u n c t i o n ( ) {   r e t u r n   f a l s e ;   } ; 
                     } 
                 } , 
 
                 / /   c h e c k s   w h e t h e r   a c t i v e / i n a c t i v e   s t a t e   c a n   b e   g i v e n 
                 c h a n g e :   { 
 
                     s t a t e :   f u n c t i o n ( )   { 
                         m o d u l e . d e b u g ( ' D e t e r m i n i n g   s t a t e   c h a n g e   d i r e c t i o n ' ) ; 
                         / /   i n a c t i v e   t o   a c t i v e   c h a n g e 
                         i f (   m o d u l e . i s . i n a c t i v e ( )   )   { 
                             m o d u l e . a c t i v a t e ( ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . d e a c t i v a t e ( ) ; 
                         } 
                         i f ( s e t t i n g s . s y n c )   { 
                             m o d u l e . s y n c ( ) ; 
                         } 
                         $ . p r o x y ( s e t t i n g s . o n C h a n g e ,   e l e m e n t ) ( ) ; 
                     } , 
 
                     t e x t :   f u n c t i o n ( )   { 
                         i f (   m o d u l e . i s . t e x t E n a b l e d ( )   )   { 
                             i f (   m o d u l e . i s . a c t i v e ( )   )   { 
                                 i f ( t e x t . h o v e r )   { 
                                     m o d u l e . v e r b o s e ( ' C h a n g i n g   t e x t   t o   h o v e r   t e x t ' ,   t e x t . h o v e r ) ; 
                                     m o d u l e . u p d a t e . t e x t ( t e x t . h o v e r ) ; 
                                 } 
                                 e l s e   i f ( t e x t . d i s a b l e )   { 
                                     m o d u l e . v e r b o s e ( ' C h a n g i n g   t e x t   t o   d i s a b l e   t e x t ' ,   t e x t . d i s a b l e ) ; 
                                     m o d u l e . u p d a t e . t e x t ( t e x t . d i s a b l e ) ; 
                                 } 
                             } 
                             e l s e   { 
                                 i f ( t e x t . h o v e r )   { 
                                     m o d u l e . v e r b o s e ( ' C h a n g i n g   t e x t   t o   h o v e r   t e x t ' ,   t e x t . d i s a b l e ) ; 
                                     m o d u l e . u p d a t e . t e x t ( t e x t . h o v e r ) ; 
                                 } 
                                 e l s e   i f ( t e x t . e n a b l e ) { 
                                     m o d u l e . v e r b o s e ( ' C h a n g i n g   t e x t   t o   e n a b l e   t e x t ' ,   t e x t . e n a b l e ) ; 
                                     m o d u l e . u p d a t e . t e x t ( t e x t . e n a b l e ) ; 
                                 } 
                             } 
                         } 
                     } 
 
                 } , 
 
                 a c t i v a t e :   f u n c t i o n ( )   { 
                     i f (   $ . p r o x y ( s e t t i n g s . a c t i v a t e T e s t ,   e l e m e n t ) ( )   )   { 
                         m o d u l e . d e b u g ( ' S e t t i n g   s t a t e   t o   a c t i v e ' ) ; 
                         $ m o d u l e 
                             . a d d C l a s s ( c l a s s N a m e . a c t i v e ) 
                         ; 
                         m o d u l e . u p d a t e . t e x t ( t e x t . a c t i v e ) ; 
                     } 
                     $ . p r o x y ( s e t t i n g s . o n A c t i v a t e ,   e l e m e n t ) ( ) ; 
                 } , 
 
                 d e a c t i v a t e :   f u n c t i o n ( )   { 
                     i f ( $ . p r o x y ( s e t t i n g s . d e a c t i v a t e T e s t ,   e l e m e n t ) ( )   )   { 
                         m o d u l e . d e b u g ( ' S e t t i n g   s t a t e   t o   i n a c t i v e ' ) ; 
                         $ m o d u l e 
                             . r e m o v e C l a s s ( c l a s s N a m e . a c t i v e ) 
                         ; 
                         m o d u l e . u p d a t e . t e x t ( t e x t . i n a c t i v e ) ; 
                     } 
                     $ . p r o x y ( s e t t i n g s . o n D e a c t i v a t e ,   e l e m e n t ) ( ) ; 
                 } , 
 
                 s y n c :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' S y n c i n g   o t h e r   b u t t o n s   t o   c u r r e n t   s t a t e ' ) ; 
                     i f (   m o d u l e . i s . a c t i v e ( )   )   { 
                         $ a l l M o d u l e s 
                             . n o t ( $ m o d u l e ) 
                                 . s t a t e ( ' a c t i v a t e ' ) ; 
                     } 
                     e l s e   { 
                         $ a l l M o d u l e s 
                             . n o t ( $ m o d u l e ) 
                                 . s t a t e ( ' d e a c t i v a t e ' ) 
                         ; 
                     } 
                 } , 
 
                 g e t :   { 
                     t e x t :   f u n c t i o n ( )   { 
                         r e t u r n   ( s e t t i n g s . s e l e c t o r . t e x t ) 
                             ?   $ m o d u l e . f i n d ( s e t t i n g s . s e l e c t o r . t e x t ) . t e x t ( ) 
                             :   $ m o d u l e . h t m l ( ) 
                         ; 
                     } , 
                     t e x t F o r :   f u n c t i o n ( s t a t e )   { 
                         r e t u r n   t e x t [ s t a t e ]   | |   f a l s e ; 
                     } 
                 } , 
 
                 f l a s h :   { 
                     t e x t :   f u n c t i o n ( t e x t ,   d u r a t i o n )   { 
                         v a r 
                             p r e v i o u s T e x t   =   m o d u l e . g e t . t e x t ( ) 
                         ; 
                         m o d u l e . d e b u g ( ' F l a s h i n g   t e x t   m e s s a g e ' ,   t e x t ,   d u r a t i o n ) ; 
                         t e x t           =   t e x t           | |   s e t t i n g s . t e x t . f l a s h ; 
                         d u r a t i o n   =   d u r a t i o n   | |   s e t t i n g s . f l a s h D u r a t i o n ; 
                         m o d u l e . u p d a t e . t e x t ( t e x t ) ; 
                         s e t T i m e o u t ( f u n c t i o n ( ) { 
                             m o d u l e . u p d a t e . t e x t ( p r e v i o u s T e x t ) ; 
                         } ,   d u r a t i o n ) ; 
                     } 
                 } , 
 
                 r e s e t :   { 
                     / /   o n   m o u s e o u t   s e t s   t e x t   t o   p r e v i o u s   v a l u e 
                     t e x t :   f u n c t i o n ( )   { 
                         v a r 
                             a c t i v e T e x t       =   t e x t . a c t i v e       | |   $ m o d u l e . d a t a ( m e t a d a t a . s t o r e d T e x t ) , 
                             i n a c t i v e T e x t   =   t e x t . i n a c t i v e   | |   $ m o d u l e . d a t a ( m e t a d a t a . s t o r e d T e x t ) 
                         ; 
                         i f (   m o d u l e . i s . t e x t E n a b l e d ( )   )   { 
                             i f (   m o d u l e . i s . a c t i v e ( )   & &   a c t i v e T e x t )   { 
                                 m o d u l e . v e r b o s e ( ' R e s e t t i n g   a c t i v e   t e x t ' ,   a c t i v e T e x t ) ; 
                                 m o d u l e . u p d a t e . t e x t ( a c t i v e T e x t ) ; 
                             } 
                             e l s e   i f ( i n a c t i v e T e x t )   { 
                                 m o d u l e . v e r b o s e ( ' R e s e t t i n g   i n a c t i v e   t e x t ' ,   a c t i v e T e x t ) ; 
                                 m o d u l e . u p d a t e . t e x t ( i n a c t i v e T e x t ) ; 
                             } 
                         } 
                     } 
                 } , 
 
                 u p d a t e :   { 
                     t e x t :   f u n c t i o n ( t e x t )   { 
                         v a r 
                             c u r r e n t T e x t   =   m o d u l e . g e t . t e x t ( ) 
                         ; 
                         i f ( t e x t   & &   t e x t   ! = =   c u r r e n t T e x t )   { 
                             m o d u l e . d e b u g ( ' U p d a t i n g   t e x t ' ,   t e x t ) ; 
                             i f ( s e t t i n g s . s e l e c t o r . t e x t )   { 
                                 $ m o d u l e 
                                     . d a t a ( m e t a d a t a . s t o r e d T e x t ,   t e x t ) 
                                     . f i n d ( s e t t i n g s . s e l e c t o r . t e x t ) 
                                         . t e x t ( t e x t ) 
                                 ; 
                             } 
                             e l s e   { 
                                 $ m o d u l e 
                                     . d a t a ( m e t a d a t a . s t o r e d T e x t ,   t e x t ) 
                                     . h t m l ( t e x t ) 
                                 ; 
                             } 
                         } 
                         e l s e   { 
                             m o d u l e . d e b u g ( ' T e x t   i s   a l r e a d y   s a n e ,   i g n o r i n g   u p d a t e ' ,   t e x t ) ; 
                         } 
                     } 
                 } , 
 
                 s e t t i n g :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                     m o d u l e . d e b u g ( ' C h a n g i n g   s e t t i n g ' ,   n a m e ,   v a l u e ) ; 
                     i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                         i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                             $ . e x t e n d ( t r u e ,   s e t t i n g s ,   n a m e ) ; 
                         } 
                         e l s e   { 
                             s e t t i n g s [ n a m e ]   =   v a l u e ; 
                         } 
                     } 
                     e l s e   { 
                         r e t u r n   s e t t i n g s [ n a m e ] ; 
                     } 
                 } , 
                 i n t e r n a l :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                     m o d u l e . d e b u g ( ' C h a n g i n g   i n t e r n a l ' ,   n a m e ,   v a l u e ) ; 
                     i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                         i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                             $ . e x t e n d ( t r u e ,   m o d u l e ,   n a m e ) ; 
                         } 
                         e l s e   { 
                             m o d u l e [ n a m e ]   =   v a l u e ; 
                         } 
                     } 
                     e l s e   { 
                         r e t u r n   m o d u l e [ n a m e ] ; 
                     } 
                 } , 
                 d e b u g :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . d e b u g )   { 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . d e b u g   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                             m o d u l e . d e b u g . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                         } 
                     } 
                 } , 
                 v e r b o s e :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . v e r b o s e   & &   s e t t i n g s . d e b u g )   { 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . v e r b o s e   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                             m o d u l e . v e r b o s e . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                         } 
                     } 
                 } , 
                 e r r o r :   f u n c t i o n ( )   { 
                     m o d u l e . e r r o r   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . e r r o r ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                     m o d u l e . e r r o r . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                 } , 
                 p e r f o r m a n c e :   { 
                     l o g :   f u n c t i o n ( m e s s a g e )   { 
                         v a r 
                             c u r r e n t T i m e , 
                             e x e c u t i o n T i m e , 
                             p r e v i o u s T i m e 
                         ; 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             c u r r e n t T i m e       =   n e w   D a t e ( ) . g e t T i m e ( ) ; 
                             p r e v i o u s T i m e     =   t i m e   | |   c u r r e n t T i m e ; 
                             e x e c u t i o n T i m e   =   c u r r e n t T i m e   -   p r e v i o u s T i m e ; 
                             t i m e                     =   c u r r e n t T i m e ; 
                             p e r f o r m a n c e . p u s h ( { 
                                 ' E l e m e n t '                 :   e l e m e n t , 
                                 ' N a m e '                       :   m e s s a g e [ 0 ] , 
                                 ' A r g u m e n t s '             :   [ ] . s l i c e . c a l l ( m e s s a g e ,   1 )   | |   ' ' , 
                                 ' E x e c u t i o n   T i m e '   :   e x e c u t i o n T i m e 
                             } ) ; 
                         } 
                         c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                         m o d u l e . p e r f o r m a n c e . t i m e r   =   s e t T i m e o u t ( m o d u l e . p e r f o r m a n c e . d i s p l a y ,   1 0 0 ) ; 
                     } , 
                     d i s p l a y :   f u n c t i o n ( )   { 
                         v a r 
                             t i t l e   =   s e t t i n g s . n a m e   +   ' : ' , 
                             t o t a l T i m e   =   0 
                         ; 
                         t i m e   =   f a l s e ; 
                         c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                         $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                             t o t a l T i m e   + =   d a t a [ ' E x e c u t i o n   T i m e ' ] ; 
                         } ) ; 
                         t i t l e   + =   '   '   +   t o t a l T i m e   +   ' m s ' ; 
                         i f ( m o d u l e S e l e c t o r )   { 
                             t i t l e   + =   '   \ ' '   +   m o d u l e S e l e c t o r   +   ' \ ' ' ; 
                         } 
                         i f ( $ a l l M o d u l e s . s i z e ( )   >   1 )   { 
                             t i t l e   + =   '   '   +   ' ( '   +   $ a l l M o d u l e s . s i z e ( )   +   ' ) ' ; 
                         } 
                         i f (   ( c o n s o l e . g r o u p   ! = =   u n d e f i n e d   | |   c o n s o l e . t a b l e   ! = =   u n d e f i n e d )   & &   p e r f o r m a n c e . l e n g t h   >   0 )   { 
                             c o n s o l e . g r o u p C o l l a p s e d ( t i t l e ) ; 
                             i f ( c o n s o l e . t a b l e )   { 
                                 c o n s o l e . t a b l e ( p e r f o r m a n c e ) ; 
                             } 
                             e l s e   { 
                                 $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                                     c o n s o l e . l o g ( d a t a [ ' N a m e ' ]   +   ' :   '   +   d a t a [ ' E x e c u t i o n   T i m e ' ] + ' m s ' ) ; 
                                 } ) ; 
                             } 
                             c o n s o l e . g r o u p E n d ( ) ; 
                         } 
                         p e r f o r m a n c e   =   [ ] ; 
                     } 
                 } , 
                 i n v o k e :   f u n c t i o n ( q u e r y ,   p a s s e d A r g u m e n t s ,   c o n t e x t )   { 
                     v a r 
                         o b j e c t   =   i n s t a n c e , 
                         m a x D e p t h , 
                         f o u n d , 
                         r e s p o n s e 
                     ; 
                     p a s s e d A r g u m e n t s   =   p a s s e d A r g u m e n t s   | |   q u e r y A r g u m e n t s ; 
                     c o n t e x t                   =   e l e m e n t                   | |   c o n t e x t ; 
                     i f ( t y p e o f   q u e r y   = =   ' s t r i n g '   & &   o b j e c t   ! = =   u n d e f i n e d )   { 
                         q u e r y         =   q u e r y . s p l i t ( / [ \ .   ] / ) ; 
                         m a x D e p t h   =   q u e r y . l e n g t h   -   1 ; 
                         $ . e a c h ( q u e r y ,   f u n c t i o n ( d e p t h ,   v a l u e )   { 
                             v a r   c a m e l C a s e V a l u e   =   ( d e p t h   ! =   m a x D e p t h ) 
                                 ?   v a l u e   +   q u e r y [ d e p t h   +   1 ] . c h a r A t ( 0 ) . t o U p p e r C a s e ( )   +   q u e r y [ d e p t h   +   1 ] . s l i c e ( 1 ) 
                                 :   q u e r y 
                             ; 
                             i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ c a m e l C a s e V a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                                 o b j e c t   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                             } 
                             e l s e   i f (   o b j e c t [ c a m e l C a s e V a l u e ]   ! = =   u n d e f i n e d   )   { 
                                 f o u n d   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                                 r e t u r n   f a l s e ; 
                             } 
                             e l s e   i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ v a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                                 o b j e c t   =   o b j e c t [ v a l u e ] ; 
                             } 
                             e l s e   i f (   o b j e c t [ v a l u e ]   ! = =   u n d e f i n e d   )   { 
                                 f o u n d   =   o b j e c t [ v a l u e ] ; 
                                 r e t u r n   f a l s e ; 
                             } 
                             e l s e   { 
                                 r e t u r n   f a l s e ; 
                             } 
                         } ) ; 
                     } 
                     i f   (   $ . i s F u n c t i o n (   f o u n d   )   )   { 
                         r e s p o n s e   =   f o u n d . a p p l y ( c o n t e x t ,   p a s s e d A r g u m e n t s ) ; 
                     } 
                     e l s e   i f ( f o u n d   ! = =   u n d e f i n e d )   { 
                         r e s p o n s e   =   f o u n d ; 
                     } 
                     i f ( $ . i s A r r a y ( r e t u r n e d V a l u e ) )   { 
                         r e t u r n e d V a l u e . p u s h ( r e s p o n s e ) ; 
                     } 
                     e l s e   i f ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d )   { 
                         r e t u r n e d V a l u e   =   [ r e t u r n e d V a l u e ,   r e s p o n s e ] ; 
                     } 
                     e l s e   i f ( r e s p o n s e   ! = =   u n d e f i n e d )   { 
                         r e t u r n e d V a l u e   =   r e s p o n s e ; 
                     } 
                     r e t u r n   f o u n d ; 
                 } 
             } ; 
             i f ( m e t h o d I n v o k e d )   { 
                 i f ( i n s t a n c e   = = =   u n d e f i n e d )   { 
                     m o d u l e . i n i t i a l i z e ( ) ; 
                 } 
                 m o d u l e . i n v o k e ( q u e r y ) ; 
             } 
             e l s e   { 
                 i f ( i n s t a n c e   ! = =   u n d e f i n e d )   { 
                     m o d u l e . d e s t r o y ( ) ; 
                 } 
                 m o d u l e . i n i t i a l i z e ( ) ; 
             } 
 
         } ) 
     ; 
 
     r e t u r n   ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d ) 
         ?   r e t u r n e d V a l u e 
         :   t h i s 
     ; 
 } ; 
 
 $ . f n . s t a t e . s e t t i n g s   =   { 
 
     / /   m o d u l e   i n f o 
     n a m e   :   ' S t a t e ' , 
 
     / /   d e b u g   o u t p u t 
     d e b u g             :   t r u e , 
 
     / /   v e r b o s e   d e b u g   o u t p u t 
     v e r b o s e         :   t r u e , 
 
     / /   n a m e s p a c e   f o r   e v e n t s 
     n a m e s p a c e     :   ' s t a t e ' , 
 
     / /   d e b u g   d a t a   i n c l u d e s   p e r f o r m a n c e 
     p e r f o r m a n c e :   t r u e , 
 
     / /   c a l l b a c k   o c c u r s   o n   s t a t e   c h a n g e 
     o n A c t i v a t e       :   f u n c t i o n ( )   { } , 
     o n D e a c t i v a t e   :   f u n c t i o n ( )   { } , 
     o n C h a n g e           :   f u n c t i o n ( )   { } , 
 
     / /   s t a t e   t e s t   f u n c t i o n s 
     a c t i v a t e T e s t       :   f u n c t i o n ( )   {   r e t u r n   t r u e ;   } , 
     d e a c t i v a t e T e s t   :   f u n c t i o n ( )   {   r e t u r n   t r u e ;   } , 
 
     / /   w h e t h e r   t o   a u t o m a t i c a l l y   m a p   d e f a u l t   s t a t e s 
     a u t o m a t i c           :   t r u e , 
 
     / /   a c t i v a t e   /   d e a c t i v a t e   c h a n g e s   a l l   e l e m e n t s   i n s t a n t i a t e d   a t   s a m e   t i m e 
     s y n c                     :   f a l s e , 
 
     / /   d e f a u l t   f l a s h   t e x t   d u r a t i o n ,   u s e d   f o r   t e m p o r a r i l y   c h a n g i n g   t e x t   o f   a n   e l e m e n t 
     f l a s h D u r a t i o n   :   3 0 0 0 , 
 
     / /   s e l e c t o r   f i l t e r 
     f i l t e r           :   { 
         t e x t       :   ' . l o a d i n g ,   . d i s a b l e d ' , 
         a c t i v e   :   ' . d i s a b l e d ' 
     } , 
 
     c o n t e x t         :   f a l s e , 
 
     / /   e r r o r 
     e r r o r :   { 
         m e t h o d   :   ' T h e   m e t h o d   y o u   c a l l e d   i s   n o t   d e f i n e d . ' 
     } , 
 
     / /   m e t a d a t a 
     m e t a d a t a :   { 
         p r o m i s e         :   ' p r o m i s e ' , 
         s t o r e d T e x t   :   ' s t o r e d - t e x t ' 
     } , 
 
     / /   c h a n g e   c l a s s   o n   s t a t e 
     c l a s s N a m e :   { 
         f o c u s       :   ' f o c u s ' , 
         h o v e r       :   ' h o v e r ' , 
         d o w n         :   ' d o w n ' , 
         a c t i v e     :   ' a c t i v e ' , 
         l o a d i n g   :   ' l o a d i n g ' 
     } , 
 
     s e l e c t o r :   { 
         / /   s e l e c t o r   f o r   t e x t   n o d e 
         t e x t :   f a l s e 
     } , 
 
     d e f a u l t s   :   { 
         i n p u t :   { 
             h o v e r       :   t r u e , 
             f o c u s       :   t r u e , 
             d o w n         :   t r u e , 
             l o a d i n g   :   f a l s e , 
             a c t i v e     :   f a l s e 
         } , 
         b u t t o n :   { 
             h o v e r       :   t r u e , 
             f o c u s       :   f a l s e , 
             d o w n         :   t r u e , 
             a c t i v e     :   t r u e , 
             l o a d i n g   :   t r u e 
         } 
     } , 
 
     s t a t e s           :   { 
         h o v e r       :   t r u e , 
         f o c u s       :   t r u e , 
         d o w n         :   t r u e , 
         l o a d i n g   :   f a l s e , 
         a c t i v e     :   f a l s e 
     } , 
 
     t e x t           :   { 
         f l a s h         :   f a l s e , 
         h o v e r         :   f a l s e , 
         a c t i v e       :   f a l s e , 
         i n a c t i v e   :   f a l s e , 
         e n a b l e       :   f a l s e , 
         d i s a b l e     :   f a l s e 
     } 
 
 } ; 
 
 
 
 } ) (   j Q u e r y ,   w i n d o w   ,   d o c u m e n t   ) ; 
 
 / * 
   *   #   S e m a n t i c   -   C h a t r o o m 
   *   h t t p : / / g i t h u b . c o m / j l u k i c / s e m a n t i c - u i / 
   * 
   * 
   *   C o p y r i g h t   2 0 1 3   C o n t r i b u t o r s 
   *   R e l e a s e d   u n d e r   t h e   M I T   l i c e n s e 
   *   h t t p : / / o p e n s o u r c e . o r g / l i c e n s e s / M I T 
   * 
   * / 
 
 ; ( f u n c t i o n   ( $ ,   w i n d o w ,   d o c u m e n t ,   u n d e f i n e d )   { 
 
 $ . f n . c h a t r o o m   =   f u n c t i o n ( p a r a m e t e r s )   { 
     v a r 
         $ a l l M o d u l e s         =   $ ( t h i s ) , 
         m o d u l e S e l e c t o r   =   $ a l l M o d u l e s . s e l e c t o r   | |   ' ' , 
 
         t i m e                       =   n e w   D a t e ( ) . g e t T i m e ( ) , 
         p e r f o r m a n c e         =   [ ] , 
 
         q u e r y                     =   a r g u m e n t s [ 0 ] , 
         m e t h o d I n v o k e d     =   ( t y p e o f   q u e r y   = =   ' s t r i n g ' ) , 
         q u e r y A r g u m e n t s   =   [ ] . s l i c e . c a l l ( a r g u m e n t s ,   1 ) , 
         r e t u r n e d V a l u e 
     ; 
     $ ( t h i s ) 
         . e a c h ( f u n c t i o n ( )   { 
             v a r 
                 s e t t i n g s     =   $ . e x t e n d ( t r u e ,   { } ,   $ . f n . c h a t r o o m . s e t t i n g s ,   p a r a m e t e r s ) , 
 
                 c l a s s N a m e   =   s e t t i n g s . c l a s s N a m e , 
                 n a m e s p a c e   =   s e t t i n g s . n a m e s p a c e , 
                 s e l e c t o r     =   s e t t i n g s . s e l e c t o r , 
                 e r r o r           =   s e t t i n g s . e r r o r , 
 
                 $ m o d u l e                   =   $ ( t h i s ) , 
 
                 $ e x p a n d B u t t o n       =   $ m o d u l e . f i n d ( s e l e c t o r . e x p a n d B u t t o n ) , 
                 $ u s e r L i s t B u t t o n   =   $ m o d u l e . f i n d ( s e l e c t o r . u s e r L i s t B u t t o n ) , 
 
                 $ u s e r L i s t               =   $ m o d u l e . f i n d ( s e l e c t o r . u s e r L i s t ) , 
                 $ r o o m                       =   $ m o d u l e . f i n d ( s e l e c t o r . r o o m ) , 
                 $ u s e r C o u n t             =   $ m o d u l e . f i n d ( s e l e c t o r . u s e r C o u n t ) , 
 
                 $ l o g                         =   $ m o d u l e . f i n d ( s e l e c t o r . l o g ) , 
                 $ m e s s a g e                 =   $ m o d u l e . f i n d ( s e l e c t o r . m e s s a g e ) , 
 
                 $ m e s s a g e I n p u t       =   $ m o d u l e . f i n d ( s e l e c t o r . m e s s a g e I n p u t ) , 
                 $ m e s s a g e B u t t o n     =   $ m o d u l e . f i n d ( s e l e c t o r . m e s s a g e B u t t o n ) , 
 
                 i n s t a n c e                 =   $ m o d u l e . d a t a ( ' m o d u l e ' ) , 
                 e l e m e n t                   =   t h i s , 
 
                 h t m l                         =   ' ' , 
                 u s e r s                       =   { } , 
 
                 c h a n n e l , 
                 l o g g e d I n U s e r , 
 
                 m e s s a g e , 
                 c o u n t , 
 
                 h e i g h t , 
 
                 p u s h e r , 
                 m o d u l e 
             ; 
 
             m o d u l e   =   { 
 
                 w i d t h :   { 
                     l o g             :   $ l o g . w i d t h ( ) , 
                     u s e r L i s t   :   $ u s e r L i s t . o u t e r W i d t h ( ) 
                 } , 
 
                 i n i t i a l i z e :   f u n c t i o n ( )   { 
 
                     / /   c h e c k   e r r o r   c o n d i t i o n s 
                     i f ( P u s h e r   = = =   u n d e f i n e d )   { 
                         m o d u l e . e r r o r ( e r r o r . p u s h e r ) ; 
                     } 
                     i f ( s e t t i n g s . k e y   = = =   u n d e f i n e d   | |   s e t t i n g s . c h a n n e l N a m e   = = =   u n d e f i n e d )   { 
                         m o d u l e . e r r o r ( e r r o r . k e y ) ; 
                         r e t u r n   f a l s e ; 
                     } 
                     e l s e   i f (   ! ( s e t t i n g s . e n d p o i n t . m e s s a g e   | |   s e t t i n g s . e n d p o i n t . a u t h e n t i c a t i o n )   )   { 
                         m o d u l e . e r r o r ( e r r o r . e n d p o i n t ) ; 
                         r e t u r n   f a l s e ; 
                     } 
 
                     / /   d e f i n e   p u s h e r 
                     p u s h e r                                               =   n e w   P u s h e r ( s e t t i n g s . k e y ) ; 
                     P u s h e r . c h a n n e l _ a u t h _ e n d p o i n t   =   s e t t i n g s . e n d p o i n t . a u t h e n t i c a t i o n ; 
 
                     c h a n n e l   =   p u s h e r . s u b s c r i b e ( s e t t i n g s . c h a n n e l N a m e ) ; 
 
                     c h a n n e l . b i n d ( ' p u s h e r : s u b s c r i p t i o n _ s u c c e e d e d ' ,   m o d u l e . u s e r . l i s t . c r e a t e ) ; 
                     c h a n n e l . b i n d ( ' p u s h e r : s u b s c r i p t i o n _ e r r o r ' ,   m o d u l e . e r r o r ) ; 
                     c h a n n e l . b i n d ( ' p u s h e r : m e m b e r _ a d d e d ' ,   m o d u l e . u s e r . j o i n e d ) ; 
                     c h a n n e l . b i n d ( ' p u s h e r : m e m b e r _ r e m o v e d ' ,   m o d u l e . u s e r . l e f t ) ; 
                     c h a n n e l . b i n d ( ' u p d a t e _ m e s s a g e s ' ,   m o d u l e . m e s s a g e . r e c e i v e ) ; 
 
                     $ . e a c h ( s e t t i n g s . c u s t o m E v e n t s ,   f u n c t i o n ( l a b e l ,   v a l u e )   { 
                         c h a n n e l . b i n d ( l a b e l ,   v a l u e ) ; 
                     } ) ; 
 
                     / /   b i n d   m o d u l e   e v e n t s 
                     $ u s e r L i s t B u t t o n 
                         . o n ( ' c l i c k . '   +     n a m e s p a c e ,   m o d u l e . e v e n t . t o g g l e U s e r L i s t ) 
                     ; 
                     $ e x p a n d B u t t o n 
                         . o n ( ' c l i c k . '       +     n a m e s p a c e ,   m o d u l e . e v e n t . t o g g l e E x p a n d ) 
                     ; 
                     $ m e s s a g e I n p u t 
                         . o n ( ' k e y d o w n . '   +     n a m e s p a c e ,   m o d u l e . e v e n t . i n p u t . k e y d o w n ) 
                         . o n ( ' k e y u p . '       +     n a m e s p a c e ,   m o d u l e . e v e n t . i n p u t . k e y u p ) 
                     ; 
                     $ m e s s a g e B u t t o n 
                         . o n ( ' m o u s e e n t e r . '   +     n a m e s p a c e ,   m o d u l e . e v e n t . h o v e r ) 
                         . o n ( ' m o u s e l e a v e . '   +     n a m e s p a c e ,   m o d u l e . e v e n t . h o v e r ) 
                         . o n ( ' c l i c k . '   +     n a m e s p a c e ,   m o d u l e . e v e n t . s u b m i t ) 
                     ; 
                     / /   s c r o l l   t o   b o t t o m   o f   c h a t   l o g 
                     $ l o g 
                         . a n i m a t e ( { 
                             s c r o l l T o p :   $ l o g . p r o p ( ' s c r o l l H e i g h t ' ) 
                         } ,   4 0 0 ) 
                     ; 
                     $ m o d u l e 
                         . d a t a ( ' m o d u l e ' ,   m o d u l e ) 
                         . a d d C l a s s ( c l a s s N a m e . l o a d i n g ) 
                     ; 
 
                 } , 
 
                 / /   r e f r e s h   m o d u l e 
                 r e f r e s h :   f u n c t i o n ( )   { 
                     / /   r e s e t   w i d t h   c a l c u l a t i o n s 
                     $ u s e r L i s t B u t t o n 
                         . r e m o v e C l a s s ( c l a s s N a m e . a c t i v e ) 
                     ; 
                     m o d u l e . w i d t h   =   { 
                         l o g             :   $ l o g . w i d t h ( ) , 
                         u s e r L i s t   :   $ u s e r L i s t . o u t e r W i d t h ( ) 
                     } ; 
                     i f (   $ u s e r L i s t B u t t o n . h a s C l a s s ( c l a s s N a m e . a c t i v e )   )   { 
                         m o d u l e . u s e r . l i s t . h i d e ( ) ; 
                     } 
                     $ m o d u l e . d a t a ( ' m o d u l e ' ,   m o d u l e ) ; 
                 } , 
 
                 u s e r :   { 
 
                     u p d a t e C o u n t :   f u n c t i o n ( )   { 
                         i f ( s e t t i n g s . u s e r C o u n t )   { 
                             u s e r s   =   $ m o d u l e . d a t a ( ' u s e r s ' ) ; 
                             c o u n t   =   0 ; 
                             $ . e a c h ( u s e r s ,   f u n c t i o n ( )   { 
                                 c o u n t + + ; 
                             } ) ; 
                             $ u s e r C o u n t 
                                 . h t m l (   s e t t i n g s . t e m p l a t e s . u s e r C o u n t ( c o u n t )   ) 
                             ; 
                         } 
                     } , 
 
                     / /   a d d   u s e r   t o   u s e r   l i s t 
                     j o i n e d :   f u n c t i o n ( m e m b e r )   { 
                         u s e r s   =   $ m o d u l e . d a t a ( ' u s e r s ' ) ; 
                         i f ( m e m b e r . i d   ! =   ' a n o n y m o u s '   & &   u s e r s [   m e m b e r . i d   ]   = = =   u n d e f i n e d   )   { 
                             u s e r s [   m e m b e r . i d   ]   =   m e m b e r . i n f o ; 
                             i f ( s e t t i n g s . r a n d o m C o l o r   & &   m e m b e r . i n f o . c o l o r   = = =   u n d e f i n e d )   { 
                                 m e m b e r . i n f o . c o l o r   =   s e t t i n g s . t e m p l a t e s . c o l o r ( m e m b e r . i d ) ; 
                             } 
                             h t m l   =   s e t t i n g s . t e m p l a t e s . u s e r L i s t ( m e m b e r . i n f o ) ; 
                             i f ( m e m b e r . i n f o . i s A d m i n )   { 
                                 $ ( h t m l ) 
                                     . p r e p e n d T o ( $ u s e r L i s t ) 
                                 ; 
                             } 
                             e l s e   { 
                                 $ ( h t m l ) 
                                     . a p p e n d T o ( $ u s e r L i s t ) 
                                 ; 
                             } 
                             i f ( s e t t i n g s . p a r t i n g M e s s a g e s )   { 
                                 $ l o g 
                                     . a p p e n d (   s e t t i n g s . t e m p l a t e s . j o i n e d ( m e m b e r . i n f o )   ) 
                                 ; 
                                 m o d u l e . m e s s a g e . s c r o l l . t e s t ( ) ; 
                             } 
                             m o d u l e . u s e r . u p d a t e C o u n t ( ) ; 
                         } 
                     } , 
 
                     / /   r e m o v e   u s e r   f r o m   u s e r   l i s t 
                     l e f t :   f u n c t i o n ( m e m b e r )   { 
                         u s e r s   =   $ m o d u l e . d a t a ( ' u s e r s ' ) ; 
                         i f ( m e m b e r   ! = =   u n d e f i n e d   & &   m e m b e r . i d   ! = =   ' a n o n y m o u s ' )   { 
                             d e l e t e   u s e r s [   m e m b e r . i d   ] ; 
                             $ m o d u l e 
                                 . d a t a ( ' u s e r s ' ,   u s e r s ) 
                             ; 
                             $ u s e r L i s t 
                                 . f i n d ( ' [ d a t a - i d = ' +   m e m b e r . i d   +   ' ] ' ) 
                                     . r e m o v e ( ) 
                             ; 
                             i f ( s e t t i n g s . p a r t i n g M e s s a g e s )   { 
                                 $ l o g 
                                     . a p p e n d (   s e t t i n g s . t e m p l a t e s . l e f t ( m e m b e r . i n f o )   ) 
                                 ; 
                                 m o d u l e . m e s s a g e . s c r o l l . t e s t ( ) ; 
                             } 
                             m o d u l e . u s e r . u p d a t e C o u n t ( ) ; 
                         } 
                     } , 
 
                     l i s t :   { 
 
                         / /   r e c e i v e s   l i s t   o f   m e m b e r s   a n d   g e n e r a t e s   u s e r   l i s t 
                         c r e a t e :   f u n c t i o n ( m e m b e r s )   { 
                             u s e r s   =   { } ; 
                             m e m b e r s . e a c h ( f u n c t i o n ( m e m b e r )   { 
                                 i f ( m e m b e r . i d   ! = =   ' a n o n y m o u s '   & &   m e m b e r . i d   ! = =   ' u n d e f i n e d ' )   { 
                                     i f ( s e t t i n g s . r a n d o m C o l o r   & &   m e m b e r . i n f o . c o l o r   = = =   u n d e f i n e d )   { 
                                         m e m b e r . i n f o . c o l o r   =   s e t t i n g s . t e m p l a t e s . c o l o r ( m e m b e r . i d ) ; 
                                     } 
                                     / /   s o r t   l i s t   w i t h   a d m i n   f i r s t 
                                     h t m l   =   ( m e m b e r . i n f o . i s A d m i n ) 
                                         ?   s e t t i n g s . t e m p l a t e s . u s e r L i s t ( m e m b e r . i n f o )   +   h t m l 
                                         :   h t m l   +   s e t t i n g s . t e m p l a t e s . u s e r L i s t ( m e m b e r . i n f o ) 
                                     ; 
                                     u s e r s [   m e m b e r . i d   ]   =   m e m b e r . i n f o ; 
                                 } 
                             } ) ; 
                             $ m o d u l e 
                                 . d a t a ( ' u s e r s ' ,   u s e r s ) 
                                 . d a t a ( ' u s e r ' ,   u s e r s [ m e m b e r s . m e . i d ]   ) 
                                 . r e m o v e C l a s s ( c l a s s N a m e . l o a d i n g ) 
                             ; 
                             $ u s e r L i s t 
                                 . h t m l ( h t m l ) 
                             ; 
                             m o d u l e . u s e r . u p d a t e C o u n t ( ) ; 
                             $ . p r o x y ( s e t t i n g s . o n J o i n ,   $ u s e r L i s t . c h i l d r e n ( ) ) ( ) ; 
                         } , 
 
                         / /   s h o w s   u s e r   l i s t 
                         s h o w :   f u n c t i o n ( )   { 
                             $ l o g 
                                 . a n i m a t e ( { 
                                     w i d t h :   ( m o d u l e . w i d t h . l o g   -   m o d u l e . w i d t h . u s e r L i s t ) 
                                 } ,   { 
                                     d u r a t i o n   :   s e t t i n g s . s p e e d , 
                                     e a s i n g       :   s e t t i n g s . e a s i n g , 
                                     c o m p l e t e   :   m o d u l e . m e s s a g e . s c r o l l . m o v e 
                                 } ) 
                             ; 
                         } , 
 
                         / /   h i d e s   u s e r   l i s t 
                         h i d e :   f u n c t i o n ( )   { 
                             $ l o g 
                                 . s t o p ( ) 
                                 . a n i m a t e ( { 
                                     w i d t h :   ( m o d u l e . w i d t h . l o g ) 
                                 } ,   { 
                                     d u r a t i o n   :   s e t t i n g s . s p e e d , 
                                     e a s i n g       :   s e t t i n g s . e a s i n g , 
                                     c o m p l e t e   :   m o d u l e . m e s s a g e . s c r o l l . m o v e 
                                 } ) 
                             ; 
                         } 
 
                     } 
 
                 } , 
 
                 m e s s a g e :   { 
 
                     / /   h a n d l e s   s c r o l l i n g   o f   c h a t   l o g 
                     s c r o l l :   { 
                         t e s t :   f u n c t i o n ( )   { 
                             h e i g h t   =   $ l o g . p r o p ( ' s c r o l l H e i g h t ' )   -   $ l o g . h e i g h t ( ) ; 
                             i f (   M a t h . a b s ( $ l o g . s c r o l l T o p ( )   -   h e i g h t )   <   s e t t i n g s . s c r o l l A r e a )   { 
                                 m o d u l e . m e s s a g e . s c r o l l . m o v e ( ) ; 
                             } 
                         } , 
 
                         m o v e :   f u n c t i o n ( )   { 
                             h e i g h t   =   $ l o g . p r o p ( ' s c r o l l H e i g h t ' )   -   $ l o g . h e i g h t ( ) ; 
                             $ l o g 
                                 . s c r o l l T o p ( h e i g h t ) 
                             ; 
                         } 
                     } , 
 
                     / /   s e n d s   c h a t   m e s s a g e 
                     s e n d :   f u n c t i o n ( m e s s a g e )   { 
                         i f (   ! m o d u l e . u t i l s . e m p t y S t r i n g ( m e s s a g e )   )   { 
                             $ . a p i ( { 
                                 u r l         :   s e t t i n g s . e n d p o i n t . m e s s a g e , 
                                 m e t h o d   :   ' P O S T ' , 
                                 d a t a       :   { 
                                     ' m e s s a g e ' :   { 
                                         c o n t e n t       :   m e s s a g e , 
                                         t i m e s t a m p   :   n e w   D a t e ( ) . g e t T i m e ( ) 
                                     } 
                                 } 
                             } ) ; 
                         } 
                     } , 
 
                     / /   r e c e i v e s   c h a t   r e s p o n s e   a n d   p r o c e s s e s 
                     r e c e i v e :   f u n c t i o n ( r e s p o n s e )   { 
                         m e s s a g e             =   r e s p o n s e . d a t a ; 
                         u s e r s                 =   $ m o d u l e . d a t a ( ' u s e r s ' ) ; 
                         l o g g e d I n U s e r   =   $ m o d u l e . d a t a ( ' u s e r ' ) ; 
                         i f ( u s e r s [   m e s s a g e . u s e r I D ]   ! = =   u n d e f i n e d )   { 
                             / /   l o g g e d   i n   u s e r ' s   m e s s a g e s   a l r e a d y   p u s h e d   i n s t a n t l y 
                             i f ( l o g g e d I n U s e r   = = =   u n d e f i n e d   | |   l o g g e d I n U s e r . i d   ! =   m e s s a g e . u s e r I D )   { 
                                 m e s s a g e . u s e r   =   u s e r s [   m e s s a g e . u s e r I D   ] ; 
                                 m o d u l e . m e s s a g e . d i s p l a y ( m e s s a g e ) ; 
                             } 
                         } 
                     } , 
 
                     / /   d i s p l a y s   m e s s a g e   i n   c h a t   l o g 
                     d i s p l a y :   f u n c t i o n ( m e s s a g e )   { 
                         $ l o g 
                             . a p p e n d (   s e t t i n g s . t e m p l a t e s . m e s s a g e ( m e s s a g e )   ) 
                         ; 
                         m o d u l e . m e s s a g e . s c r o l l . t e s t ( ) ; 
                         $ . p r o x y ( s e t t i n g s . o n M e s s a g e ,   $ l o g . c h i l d r e n ( ) . l a s t ( )   ) ( ) ; 
                     } 
 
                 } , 
 
                 e x p a n d :   f u n c t i o n ( )   { 
                     $ m o d u l e 
                         . a d d C l a s s ( c l a s s N a m e . e x p a n d ) 
                     ; 
                     $ . p r o x y ( s e t t i n g s . o n E x p a n d ,   $ m o d u l e   ) ( ) ; 
                     m o d u l e . r e f r e s h ( ) ; 
                 } , 
 
                 c o n t r a c t :   f u n c t i o n ( )   { 
                     $ m o d u l e 
                         . r e m o v e C l a s s ( c l a s s N a m e . e x p a n d ) 
                     ; 
                     $ . p r o x y ( s e t t i n g s . o n C o n t r a c t ,   $ m o d u l e   ) ( ) ; 
                     m o d u l e . r e f r e s h ( ) ; 
                 } , 
 
                 e v e n t :   { 
 
                     i n p u t :   { 
 
                         k e y d o w n :   f u n c t i o n ( e v e n t )   { 
                             i f ( e v e n t . w h i c h   = =   1 3 )   { 
                                 $ m e s s a g e B u t t o n 
                                     . a d d C l a s s ( c l a s s N a m e . d o w n ) 
                                 ; 
                             } 
                         } , 
 
                         k e y u p :   f u n c t i o n ( e v e n t )   { 
                             i f ( e v e n t . w h i c h   = =   1 3 )   { 
                                 $ m e s s a g e B u t t o n 
                                     . r e m o v e C l a s s ( c l a s s N a m e . d o w n ) 
                                 ; 
                                 m o d u l e . e v e n t . s u b m i t ( ) ; 
                             } 
                         } 
 
                     } , 
 
                     / /   h a n d l e s   m e s s a g e   f o r m   s u b m i t 
                     s u b m i t :   f u n c t i o n ( )   { 
                         v a r 
                             m e s s a g e             =   $ m e s s a g e I n p u t . v a l ( ) , 
                             l o g g e d I n U s e r   =   $ m o d u l e . d a t a ( ' u s e r ' ) 
                         ; 
                         i f ( l o g g e d I n U s e r   ! = =   u n d e f i n e d   & &   ! m o d u l e . u t i l s . e m p t y S t r i n g ( m e s s a g e ) )   { 
                             m o d u l e . m e s s a g e . s e n d ( m e s s a g e ) ; 
                             / /   d i s p l a y   i m m e d i a t e l y 
                             m o d u l e . m e s s a g e . d i s p l a y ( { 
                                 u s e r :   l o g g e d I n U s e r , 
                                 t e x t :   m e s s a g e 
                             } ) ; 
                             m o d u l e . m e s s a g e . s c r o l l . m o v e ( ) ; 
                             $ m e s s a g e I n p u t 
                                 . v a l ( ' ' ) 
                             ; 
 
                         } 
                     } , 
 
                     / /   h a n d l e s   b u t t o n   c l i c k   o n   e x p a n d   b u t t o n 
                     t o g g l e E x p a n d :   f u n c t i o n ( )   { 
                         i f (   ! $ m o d u l e . h a s C l a s s ( c l a s s N a m e . e x p a n d )   )   { 
                             $ e x p a n d B u t t o n 
                                 . a d d C l a s s ( c l a s s N a m e . a c t i v e ) 
                             ; 
                             m o d u l e . e x p a n d ( ) ; 
                         } 
                         e l s e   { 
                             $ e x p a n d B u t t o n 
                                 . r e m o v e C l a s s ( c l a s s N a m e . a c t i v e ) 
                             ; 
                             m o d u l e . c o n t r a c t ( ) ; 
                         } 
                     } , 
 
                     / /   h a n d l e s   b u t t o n   c l i c k   o n   u s e r   l i s t   b u t t o n 
                     t o g g l e U s e r L i s t :   f u n c t i o n ( )   { 
                         i f (   ! $ l o g . i s ( ' : a n i m a t e d ' )   )   { 
                             i f (   ! $ u s e r L i s t B u t t o n . h a s C l a s s ( c l a s s N a m e . a c t i v e )   )   { 
                                 $ u s e r L i s t B u t t o n 
                                     . a d d C l a s s ( c l a s s N a m e . a c t i v e ) 
                                 ; 
                                 m o d u l e . u s e r . l i s t . s h o w ( ) ; 
                             } 
                             e l s e   { 
                                 $ u s e r L i s t B u t t o n 
                                     . r e m o v e C l a s s ( ' a c t i v e ' ) 
                                 ; 
                                 m o d u l e . u s e r . l i s t . h i d e ( ) ; 
                             } 
                         } 
 
                     } 
                 } , 
 
                 u t i l s :   { 
 
                     e m p t y S t r i n g :   f u n c t i o n ( s t r i n g )   { 
                         i f ( t y p e o f   s t r i n g   = =   ' s t r i n g ' )   { 
                             r e t u r n   ( s t r i n g . s e a r c h ( / \ S / )   = =   - 1 ) ; 
                         } 
                         r e t u r n   f a l s e ; 
                     } 
 
                 } , 
 
             s e t t i n g :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                 i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                     i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                         $ . e x t e n d ( t r u e ,   s e t t i n g s ,   n a m e ) ; 
                     } 
                     e l s e   { 
                         s e t t i n g s [ n a m e ]   =   v a l u e ; 
                     } 
                 } 
                 e l s e   { 
                     r e t u r n   s e t t i n g s [ n a m e ] ; 
                 } 
             } , 
             i n t e r n a l :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                 i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                     $ . e x t e n d ( t r u e ,   m o d u l e ,   n a m e ) ; 
                 } 
                 e l s e   i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                     m o d u l e [ n a m e ]   =   v a l u e ; 
                 } 
                 e l s e   { 
                     r e t u r n   m o d u l e [ n a m e ] ; 
                 } 
             } , 
             d e b u g :   f u n c t i o n ( )   { 
                 i f ( s e t t i n g s . d e b u g )   { 
                     i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                         m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                     } 
                     e l s e   { 
                         m o d u l e . d e b u g   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                         m o d u l e . d e b u g . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                     } 
                 } 
             } , 
             v e r b o s e :   f u n c t i o n ( )   { 
                 i f ( s e t t i n g s . v e r b o s e   & &   s e t t i n g s . d e b u g )   { 
                     i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                         m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                     } 
                     e l s e   { 
                         m o d u l e . v e r b o s e   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                         m o d u l e . v e r b o s e . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                     } 
                 } 
             } , 
             e r r o r :   f u n c t i o n ( )   { 
                 m o d u l e . e r r o r   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . e r r o r ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                 m o d u l e . e r r o r . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
             } , 
             p e r f o r m a n c e :   { 
                 l o g :   f u n c t i o n ( m e s s a g e )   { 
                     v a r 
                         c u r r e n t T i m e , 
                         e x e c u t i o n T i m e , 
                         p r e v i o u s T i m e 
                     ; 
                     i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                         c u r r e n t T i m e       =   n e w   D a t e ( ) . g e t T i m e ( ) ; 
                         p r e v i o u s T i m e     =   t i m e   | |   c u r r e n t T i m e ; 
                         e x e c u t i o n T i m e   =   c u r r e n t T i m e   -   p r e v i o u s T i m e ; 
                         t i m e                     =   c u r r e n t T i m e ; 
                         p e r f o r m a n c e . p u s h ( { 
                             ' E l e m e n t '                 :   e l e m e n t , 
                             ' N a m e '                       :   m e s s a g e [ 0 ] , 
                             ' A r g u m e n t s '             :   [ ] . s l i c e . c a l l ( m e s s a g e ,   1 )   | |   ' ' , 
                             ' E x e c u t i o n   T i m e '   :   e x e c u t i o n T i m e 
                         } ) ; 
                     } 
                     c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                     m o d u l e . p e r f o r m a n c e . t i m e r   =   s e t T i m e o u t ( m o d u l e . p e r f o r m a n c e . d i s p l a y ,   1 0 0 ) ; 
                 } , 
                 d i s p l a y :   f u n c t i o n ( )   { 
                     v a r 
                         t i t l e   =   s e t t i n g s . n a m e   +   ' : ' , 
                         t o t a l T i m e   =   0 
                     ; 
                     t i m e   =   f a l s e ; 
                     c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                     $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                         t o t a l T i m e   + =   d a t a [ ' E x e c u t i o n   T i m e ' ] ; 
                     } ) ; 
                     t i t l e   + =   '   '   +   t o t a l T i m e   +   ' m s ' ; 
                     i f ( m o d u l e S e l e c t o r )   { 
                         t i t l e   + =   '   \ ' '   +   m o d u l e S e l e c t o r   +   ' \ ' ' ; 
                     } 
                     i f (   ( c o n s o l e . g r o u p   ! = =   u n d e f i n e d   | |   c o n s o l e . t a b l e   ! = =   u n d e f i n e d )   & &   p e r f o r m a n c e . l e n g t h   >   0 )   { 
                         c o n s o l e . g r o u p C o l l a p s e d ( t i t l e ) ; 
                         i f ( c o n s o l e . t a b l e )   { 
                             c o n s o l e . t a b l e ( p e r f o r m a n c e ) ; 
                         } 
                         e l s e   { 
                             $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                                 c o n s o l e . l o g ( d a t a [ ' N a m e ' ]   +   ' :   '   +   d a t a [ ' E x e c u t i o n   T i m e ' ] + ' m s ' ) ; 
                             } ) ; 
                         } 
                         c o n s o l e . g r o u p E n d ( ) ; 
                     } 
                     p e r f o r m a n c e   =   [ ] ; 
                 } 
             } , 
             i n v o k e :   f u n c t i o n ( q u e r y ,   p a s s e d A r g u m e n t s ,   c o n t e x t )   { 
                 v a r 
                     m a x D e p t h , 
                     f o u n d 
                 ; 
                 p a s s e d A r g u m e n t s   =   p a s s e d A r g u m e n t s   | |   q u e r y A r g u m e n t s ; 
                 c o n t e x t                   =   e l e m e n t                   | |   c o n t e x t ; 
                 i f ( t y p e o f   q u e r y   = =   ' s t r i n g '   & &   i n s t a n c e   ! = =   u n d e f i n e d )   { 
                     q u e r y         =   q u e r y . s p l i t ( / [ \ .   ] / ) ; 
                     m a x D e p t h   =   q u e r y . l e n g t h   -   1 ; 
                     $ . e a c h ( q u e r y ,   f u n c t i o n ( d e p t h ,   v a l u e )   { 
                         i f (   $ . i s P l a i n O b j e c t (   i n s t a n c e [ v a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                             i n s t a n c e   =   i n s t a n c e [ v a l u e ] ; 
                         } 
                         e l s e   i f (   i n s t a n c e [ v a l u e ]   ! = =   u n d e f i n e d   )   { 
                             f o u n d   =   i n s t a n c e [ v a l u e ] ; 
                         } 
                         e l s e   { 
                             m o d u l e . e r r o r ( e r r o r . m e t h o d ,   q u e r y ) ; 
                         } 
                     } ) ; 
                 } 
                 i f   (   $ . i s F u n c t i o n (   f o u n d   )   )   { 
                     r e t u r n   f o u n d . a p p l y ( c o n t e x t ,   p a s s e d A r g u m e n t s ) ; 
                 } 
                 r e t u r n   f o u n d   | |   f a l s e ; 
             } 
         } ; 
 
         i f ( m e t h o d I n v o k e d )   { 
             i f ( i n s t a n c e   = = =   u n d e f i n e d )   { 
                 m o d u l e . i n i t i a l i z e ( ) ; 
             } 
             m o d u l e . i n v o k e ( q u e r y ) ; 
         } 
         e l s e   { 
             i f ( i n s t a n c e   ! = =   u n d e f i n e d )   { 
                 m o d u l e . d e s t r o y ( ) ; 
             } 
             m o d u l e . i n i t i a l i z e ( ) ; 
         } 
     } ) 
 ; 
     r e t u r n   ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d ) 
         ?   r e t u r n e d V a l u e 
         :   t h i s 
     ; 
 } ; 
 
     $ . f n . c h a t r o o m . s e t t i n g s   =   { 
 
         n a m e                         :   ' C h a t ' , 
         d e b u g                       :   f a l s e , 
         n a m e s p a c e               :   ' c h a t ' , 
 
         c h a n n e l                   :   ' p r e s e n t - c h a t ' , 
 
         o n J o i n                     :   f u n c t i o n ( ) { } , 
         o n M e s s a g e               :   f u n c t i o n ( ) { } , 
         o n E x p a n d                 :   f u n c t i o n ( ) { } , 
         o n C o n t r a c t             :   f u n c t i o n ( ) { } , 
 
         c u s t o m E v e n t s         :   { } , 
 
         p a r t i n g M e s s a g e s   :   f a l s e , 
         u s e r C o u n t               :   t r u e , 
         r a n d o m C o l o r           :   t r u e , 
 
         s p e e d                       :   3 0 0 , 
         e a s i n g                     :   ' e a s e O u t Q u i n t ' , 
 
         / /   p i x e l s   f r o m   b o t t o m   o f   c h a t   l o g   t h a t   s h o u l d   t r i g g e r   a u t o   s c r o l l   t o   b o t t o m 
         s c r o l l A r e a             :   9 9 9 9 , 
 
         e n d p o i n t                 :   { 
             m e s s a g e                 :   f a l s e , 
             a u t h e n t i c a t i o n   :   f a l s e 
         } , 
 
         e r r o r :   { 
             m e t h o d       :   ' T h e   m e t h o d   y o u   c a l l e d   i s   n o t   d e f i n e d ' , 
             e n d p o i n t   :   ' P l e a s e   d e f i n e   a   m e s s a g e   a n d   a u t h e n t i c a t i o n   e n d p o i n t . ' , 
             k e y             :   ' Y o u   m u s t   s p e c i f y   a   p u s h e r   k e y   a n d   c h a n n e l . ' , 
             p u s h e r       :   ' Y o u   m u s t   i n c l u d e   t h e   P u s h e r   l i b r a r y . ' 
         } , 
 
         c l a s s N a m e       :   { 
             e x p a n d     :   ' e x p a n d ' , 
             a c t i v e     :   ' a c t i v e ' , 
             h o v e r       :   ' h o v e r ' , 
             d o w n         :   ' d o w n ' , 
             l o a d i n g   :   ' l o a d i n g ' 
         } , 
 
         s e l e c t o r         :   { 
             u s e r C o u n t             :   ' . a c t i o n s   . m e s s a g e ' , 
             u s e r L i s t B u t t o n   :   ' . a c t i o n s   . l i s t . b u t t o n ' , 
             e x p a n d B u t t o n       :   ' . a c t i o n s   . e x p a n d . b u t t o n ' , 
             r o o m                       :   ' . r o o m ' , 
             u s e r L i s t               :   ' . r o o m   . l i s t ' , 
             l o g                         :   ' . r o o m   . l o g ' , 
             m e s s a g e                 :   ' . r o o m   . l o g   . m e s s a g e ' , 
             a u t h o r                   :   ' . r o o m   l o g   . m e s s a g e   . a u t h o r ' , 
             m e s s a g e I n p u t       :   ' . t a l k   i n p u t ' , 
             m e s s a g e B u t t o n     :   ' . t a l k   . s e n d . b u t t o n ' 
         } , 
 
         t e m p l a t e s :   { 
 
             u s e r C o u n t :   f u n c t i o n ( n u m b e r )   { 
                 r e t u r n   n u m b e r   +   '   u s e r s   i n   c h a t ' ; 
             } , 
 
             c o l o r :   f u n c t i o n ( u s e r I D )   { 
                 v a r 
                     c o l o r s   =   [ 
                         ' # 0 0 0 0 0 0 ' , 
                         ' # 3 3 3 3 3 3 ' , 
                         ' # 6 6 6 6 6 6 ' , 
                         ' # 9 9 9 9 9 9 ' , 
                         ' # C C 9 9 9 9 ' , 
                         ' # C C 6 6 6 6 ' , 
                         ' # C C 3 3 3 3 ' , 
                         ' # 9 9 3 3 3 3 ' , 
                         ' # 6 6 3 3 3 3 ' , 
                         ' # C C 6 6 3 3 ' , 
                         ' # C C 9 9 6 6 ' , 
                         ' # C C 9 9 3 3 ' , 
                         ' # 9 9 9 9 6 6 ' , 
                         ' # C C C C 6 6 ' , 
                         ' # 9 9 C C 6 6 ' , 
                         ' # 6 6 9 9 3 3 ' , 
                         ' # 6 6 9 9 6 6 ' , 
                         ' # 3 3 A 3 C C ' , 
                         ' # 3 3 6 6 3 3 ' , 
                         ' # 3 3 C C C C ' , 
                         ' # 3 3 9 9 9 9 ' , 
                         ' # 3 3 6 6 6 6 ' , 
                         ' # 3 3 6 6 9 9 ' , 
                         ' # 6 6 6 6 C C ' , 
                         ' # 9 9 6 6 C C ' , 
                         ' # 3 3 3 3 9 9 ' , 
                         ' # 6 6 3 3 6 6 ' , 
                         ' # 9 9 6 6 9 9 ' , 
                         ' # 9 9 3 3 6 6 ' , 
                         ' # C C 6 6 9 9 ' 
                     ] 
                 ; 
                 r e t u r n   c o l o r s [   M a t h . f l o o r (   M a t h . r a n d o m ( )   *   c o l o r s . l e n g t h )   ] ; 
             } , 
 
             m e s s a g e :   f u n c t i o n ( m e s s a g e )   { 
                 v a r 
                     h t m l   =   ' ' 
                 ; 
                 i f ( m e s s a g e . u s e r . i s A d m i n )   { 
                     m e s s a g e . u s e r . c o l o r   =   ' # 5 5 3 5 6 A ' ; 
                     h t m l   + =   ' < d i v   c l a s s = " a d m i n   m e s s a g e " > ' ; 
                     h t m l   + =   ' < s p a n   c l a s s = " q u i r k y   u i   f l a g   t e a m " > < / s p a n > ' ; 
                 } 
                 / * 
                 e l s e   i f ( m e s s a g e . u s e r . i s P r o )   { 
                     h t m l   + =   ' < d i v   c l a s s = " i n d e n t   m e s s a g e " > ' ; 
                     h t m l   + =   ' < s p a n   c l a s s = " q u i r k y   u i   f l a g   p r o " > < / s p a n > ' ; 
                 } 
                 * / 
                 e l s e   { 
                     h t m l   + =   ' < d i v   c l a s s = " m e s s a g e " > ' ; 
                 } 
                 h t m l   + =   ' < p > ' ; 
                 i f ( m e s s a g e . u s e r . c o l o r   ! = =   u n d e f i n e d )   { 
                     h t m l   + =   ' < s p a n   c l a s s = " a u t h o r "   s t y l e = " c o l o r :   '   +   m e s s a g e . u s e r . c o l o r   +   ' ; " > '   +   m e s s a g e . u s e r . n a m e   +   ' < / s p a n > :   ' ; 
                 } 
                 e l s e   { 
                     h t m l   + =   ' < s p a n   c l a s s = " a u t h o r " > '   +   m e s s a g e . u s e r . n a m e   +   ' < / s p a n > :   ' ; 
                 } 
                 h t m l   + =   ' ' 
                     +       m e s s a g e . t e x t 
                     +   '   < / p > ' 
                     +   ' < / d i v > ' 
                 ; 
                 r e t u r n   h t m l ; 
             } , 
 
             j o i n e d :   f u n c t i o n ( m e m b e r )   { 
                 r e t u r n   ( t y p e o f   m e m b e r . n a m e   ! = =   u n d e f i n e d ) 
                     ?   ' < d i v   c l a s s = " s t a t u s " > '   +   m e m b e r . n a m e   +   '   h a s   j o i n e d   t h e   c h a t . < / d i v > ' 
                     :   f a l s e 
                 ; 
             } , 
             l e f t :   f u n c t i o n ( m e m b e r )   { 
                 r e t u r n   ( t y p e o f   m e m b e r . n a m e   ! = =   u n d e f i n e d ) 
                     ?   ' < d i v   c l a s s = " s t a t u s " > '   +   m e m b e r . n a m e   +   '   h a s   l e f t   t h e   c h a t . < / d i v > ' 
                     :   f a l s e 
                 ; 
             } , 
 
             u s e r L i s t :   f u n c t i o n ( m e m b e r )   { 
                 v a r 
                     h t m l   =   ' ' 
                 ; 
                 i f ( m e m b e r . i s A d m i n )   { 
                     m e m b e r . c o l o r   =   ' # 5 5 3 5 6 A ' ; 
                 } 
                 h t m l   + =     ' ' 
                     +   ' < d i v   c l a s s = " u s e r "   d a t a - i d = " '   +   m e m b e r . i d   +   ' " > ' 
                     +   '   < d i v   c l a s s = " i m a g e " > ' 
                     +   '       < i m g   s r c = " '   +   m e m b e r . a v a t a r U R L   +   ' " > ' 
                     +   '   < / d i v > ' 
                 ; 
                 i f ( m e m b e r . c o l o r   ! = =   u n d e f i n e d )   { 
                     h t m l   + =   '   < p > < a   h r e f = " / u s e r s / '   +   m e m b e r . i d   +   ' "   t a r g e t = " _ b l a n k "   s t y l e = " c o l o r :   '   +   m e m b e r . c o l o r   +   ' ; " > '   +   m e m b e r . n a m e   +   ' < / a > < / p > ' ; 
                 } 
                 e l s e   { 
                     h t m l   + =   '   < p > < a   h r e f = " / u s e r s / '   +   m e m b e r . i d   +   ' "   t a r g e t = " _ b l a n k " > '   +   m e m b e r . n a m e   +   ' < / a > < / p > ' ; 
                 } 
                 h t m l   + =   ' < / d i v > ' ; 
                 r e t u r n   h t m l ; 
             } 
 
         } 
 
     } ; 
 
 } ) (   j Q u e r y ,   w i n d o w   ,   d o c u m e n t   ) ; 
 
 / * 
   *   #   S e m a n t i c   -   C h e c k b o x 
   *   h t t p : / / g i t h u b . c o m / j l u k i c / s e m a n t i c - u i / 
   * 
   * 
   *   C o p y r i g h t   2 0 1 3   C o n t r i b u t o r s 
   *   R e l e a s e d   u n d e r   t h e   M I T   l i c e n s e 
   *   h t t p : / / o p e n s o u r c e . o r g / l i c e n s e s / M I T 
   * 
   * / 
 
 ; ( f u n c t i o n   (   $ ,   w i n d o w ,   d o c u m e n t ,   u n d e f i n e d   )   { 
 
 $ . f n . c h e c k b o x   =   f u n c t i o n ( p a r a m e t e r s )   { 
     v a r 
         $ a l l M o d u l e s         =   $ ( t h i s ) , 
         m o d u l e S e l e c t o r   =   $ a l l M o d u l e s . s e l e c t o r   | |   ' ' , 
 
         t i m e                       =   n e w   D a t e ( ) . g e t T i m e ( ) , 
         p e r f o r m a n c e         =   [ ] , 
 
         q u e r y                     =   a r g u m e n t s [ 0 ] , 
         m e t h o d I n v o k e d     =   ( t y p e o f   q u e r y   = =   ' s t r i n g ' ) , 
         q u e r y A r g u m e n t s   =   [ ] . s l i c e . c a l l ( a r g u m e n t s ,   1 ) , 
         r e t u r n e d V a l u e 
     ; 
 
     $ a l l M o d u l e s 
         . e a c h ( f u n c t i o n ( )   { 
             v a r 
                 s e t t i n g s                 =   $ . e x t e n d ( t r u e ,   { } ,   $ . f n . c h e c k b o x . s e t t i n g s ,   p a r a m e t e r s ) , 
 
                 c l a s s N a m e               =   s e t t i n g s . c l a s s N a m e , 
                 n a m e s p a c e               =   s e t t i n g s . n a m e s p a c e , 
                 e r r o r                       =   s e t t i n g s . e r r o r , 
 
                 e v e n t N a m e s p a c e     =   ' . '   +   n a m e s p a c e , 
                 m o d u l e N a m e s p a c e   =   ' m o d u l e - '   +   n a m e s p a c e , 
 
                 $ m o d u l e                   =   $ ( t h i s ) , 
                 $ l a b e l                     =   $ ( t h i s ) . n e x t ( s e t t i n g s . s e l e c t o r . l a b e l ) . f i r s t ( ) , 
                 $ i n p u t                     =   $ ( t h i s ) . f i n d ( s e t t i n g s . s e l e c t o r . i n p u t ) , 
 
                 s e l e c t o r                 =   $ m o d u l e . s e l e c t o r   | |   ' ' , 
                 i n s t a n c e                 =   $ m o d u l e . d a t a ( m o d u l e N a m e s p a c e ) , 
 
                 e l e m e n t                   =   t h i s , 
                 m o d u l e 
             ; 
 
             m o d u l e             =   { 
 
                 i n i t i a l i z e :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' I n i t i a l i z i n g   c h e c k b o x ' ,   s e t t i n g s ) ; 
                     i f ( s e t t i n g s . c o n t e x t   & &   s e l e c t o r   ! = =   ' ' )   { 
                         m o d u l e . v e r b o s e ( ' A d d i n g   d e l e g a t e d   e v e n t s ' ) ; 
                         $ ( e l e m e n t ,   s e t t i n g s . c o n t e x t ) 
                             . o n ( s e l e c t o r ,   ' c l i c k '   +   e v e n t N a m e s p a c e ,   m o d u l e . t o g g l e ) 
                             . o n ( s e l e c t o r   +   '   +   '   +   s e t t i n g s . s e l e c t o r . l a b e l ,   ' c l i c k '   +   e v e n t N a m e s p a c e ,   m o d u l e . t o g g l e ) 
                         ; 
                     } 
                     e l s e   { 
                         $ m o d u l e 
                             . o n ( ' c l i c k '   +   e v e n t N a m e s p a c e ,   m o d u l e . t o g g l e ) 
                             . d a t a ( m o d u l e N a m e s p a c e ,   m o d u l e ) 
                         ; 
                         $ l a b e l 
                             . o n ( ' c l i c k '   +   e v e n t N a m e s p a c e ,   m o d u l e . t o g g l e ) 
                         ; 
                     } 
                     m o d u l e . i n s t a n t i a t e ( ) ; 
                 } , 
 
                 i n s t a n t i a t e :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' S t o r i n g   i n s t a n c e   o f   m o d u l e ' ,   m o d u l e ) ; 
                     i n s t a n c e   =   m o d u l e ; 
                     $ m o d u l e 
                         . d a t a ( m o d u l e N a m e s p a c e ,   m o d u l e ) 
                     ; 
                 } , 
 
                 d e s t r o y :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' D e s t r o y i n g   p r e v i o u s   m o d u l e ' ) ; 
                     $ m o d u l e 
                         . o f f ( e v e n t N a m e s p a c e ) 
                         . r e m o v e D a t a ( m o d u l e N a m e s p a c e ) 
                     ; 
                 } , 
 
                 i s :   { 
                     r a d i o :   f u n c t i o n ( )   { 
                         r e t u r n   $ m o d u l e . h a s C l a s s ( c l a s s N a m e . r a d i o ) ; 
                     } , 
                     e n a b l e d :   f u n c t i o n ( )   { 
                         r e t u r n   $ i n p u t . p r o p ( ' c h e c k e d ' )   ! = =   u n d e f i n e d   & &   $ i n p u t . p r o p ( ' c h e c k e d ' ) ; 
                     } , 
                     d i s a b l e d :   f u n c t i o n ( )   { 
                         r e t u r n   ! m o d u l e . i s . e n a b l e d ( ) ; 
                     } 
                 } , 
 
                 c a n :   { 
                     d i s a b l e :   f u n c t i o n ( )   { 
                         r e t u r n   ( t y p e o f   s e t t i n g s . r e q u i r e d   = = =   ' b o o l e a n ' ) 
                             ?   s e t t i n g s . r e q u i r e d 
                             :   ! m o d u l e . i s . r a d i o ( ) 
                         ; 
                     } 
                 } , 
 
                 e n a b l e :   f u n c t i o n ( )   { 
                     m o d u l e . d e b u g ( ' E n a b l i n g   c h e c k b o x ' ,   $ i n p u t ) ; 
                     $ i n p u t 
                         . p r o p ( ' c h e c k e d ' ,   t r u e ) 
                         . t r i g g e r ( ' c h a n g e ' ) 
                     ; 
                     $ . p r o x y ( s e t t i n g s . o n C h a n g e ,   $ i n p u t . g e t ( ) ) ( ) ; 
                     $ . p r o x y ( s e t t i n g s . o n E n a b l e ,   $ i n p u t . g e t ( ) ) ( ) ; 
                 } , 
 
                 d i s a b l e :   f u n c t i o n ( )   { 
                     m o d u l e . d e b u g ( ' D i s a b l i n g   c h e c k b o x ' ) ; 
                     $ i n p u t 
                         . p r o p ( ' c h e c k e d ' ,   f a l s e ) 
                         . t r i g g e r ( ' c h a n g e ' ) 
                     ; 
                     $ . p r o x y ( s e t t i n g s . o n C h a n g e ,   $ i n p u t . g e t ( ) ) ( ) ; 
                     $ . p r o x y ( s e t t i n g s . o n D i s a b l e ,   $ i n p u t . g e t ( ) ) ( ) ; 
                 } , 
 
                 t o g g l e :   f u n c t i o n ( e v e n t )   { 
                     m o d u l e . v e r b o s e ( ' D e t e r m i n i n g   n e w   c h e c k b o x   s t a t e ' ) ; 
                     i f (   m o d u l e . i s . d i s a b l e d ( )   )   { 
                         m o d u l e . e n a b l e ( ) ; 
                     } 
                     e l s e   i f (   m o d u l e . i s . e n a b l e d ( )   & &   m o d u l e . c a n . d i s a b l e ( )   )   { 
                         m o d u l e . d i s a b l e ( ) ; 
                     } 
                 } , 
                 s e t t i n g :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                     i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                         $ . e x t e n d ( t r u e ,   s e t t i n g s ,   n a m e ) ; 
                     } 
                     e l s e   i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                         s e t t i n g s [ n a m e ]   =   v a l u e ; 
                     } 
                     e l s e   { 
                         r e t u r n   s e t t i n g s [ n a m e ] ; 
                     } 
                 } , 
                 i n t e r n a l :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                     i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                         $ . e x t e n d ( t r u e ,   m o d u l e ,   n a m e ) ; 
                     } 
                     e l s e   i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                         m o d u l e [ n a m e ]   =   v a l u e ; 
                     } 
                     e l s e   { 
                         r e t u r n   m o d u l e [ n a m e ] ; 
                     } 
                 } , 
                 d e b u g :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . d e b u g )   { 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . d e b u g   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                             m o d u l e . d e b u g . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                         } 
                     } 
                 } , 
                 v e r b o s e :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . v e r b o s e   & &   s e t t i n g s . d e b u g )   { 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . v e r b o s e   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                             m o d u l e . v e r b o s e . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                         } 
                     } 
                 } , 
                 e r r o r :   f u n c t i o n ( )   { 
                     m o d u l e . e r r o r   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . e r r o r ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                     m o d u l e . e r r o r . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                 } , 
                 p e r f o r m a n c e :   { 
                     l o g :   f u n c t i o n ( m e s s a g e )   { 
                         v a r 
                             c u r r e n t T i m e , 
                             e x e c u t i o n T i m e , 
                             p r e v i o u s T i m e 
                         ; 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             c u r r e n t T i m e       =   n e w   D a t e ( ) . g e t T i m e ( ) ; 
                             p r e v i o u s T i m e     =   t i m e   | |   c u r r e n t T i m e ; 
                             e x e c u t i o n T i m e   =   c u r r e n t T i m e   -   p r e v i o u s T i m e ; 
                             t i m e                     =   c u r r e n t T i m e ; 
                             p e r f o r m a n c e . p u s h ( { 
                                 ' E l e m e n t '                 :   e l e m e n t , 
                                 ' N a m e '                       :   m e s s a g e [ 0 ] , 
                                 ' A r g u m e n t s '             :   [ ] . s l i c e . c a l l ( m e s s a g e ,   1 )   | |   ' ' , 
                                 ' E x e c u t i o n   T i m e '   :   e x e c u t i o n T i m e 
                             } ) ; 
                         } 
                         c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                         m o d u l e . p e r f o r m a n c e . t i m e r   =   s e t T i m e o u t ( m o d u l e . p e r f o r m a n c e . d i s p l a y ,   1 0 0 ) ; 
                     } , 
                     d i s p l a y :   f u n c t i o n ( )   { 
                         v a r 
                             t i t l e   =   s e t t i n g s . n a m e   +   ' : ' , 
                             t o t a l T i m e   =   0 
                         ; 
                         t i m e   =   f a l s e ; 
                         c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                         $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                             t o t a l T i m e   + =   d a t a [ ' E x e c u t i o n   T i m e ' ] ; 
                         } ) ; 
                         t i t l e   + =   '   '   +   t o t a l T i m e   +   ' m s ' ; 
                         i f ( m o d u l e S e l e c t o r )   { 
                             t i t l e   + =   '   \ ' '   +   m o d u l e S e l e c t o r   +   ' \ ' ' ; 
                         } 
                         i f (   ( c o n s o l e . g r o u p   ! = =   u n d e f i n e d   | |   c o n s o l e . t a b l e   ! = =   u n d e f i n e d )   & &   p e r f o r m a n c e . l e n g t h   >   0 )   { 
                             c o n s o l e . g r o u p C o l l a p s e d ( t i t l e ) ; 
                             i f ( c o n s o l e . t a b l e )   { 
                                 c o n s o l e . t a b l e ( p e r f o r m a n c e ) ; 
                             } 
                             e l s e   { 
                                 $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                                     c o n s o l e . l o g ( d a t a [ ' N a m e ' ]   +   ' :   '   +   d a t a [ ' E x e c u t i o n   T i m e ' ] + ' m s ' ) ; 
                                 } ) ; 
                             } 
                             c o n s o l e . g r o u p E n d ( ) ; 
                         } 
                         p e r f o r m a n c e   =   [ ] ; 
                     } 
                 } , 
                 i n v o k e :   f u n c t i o n ( q u e r y ,   p a s s e d A r g u m e n t s ,   c o n t e x t )   { 
                     v a r 
                         o b j e c t   =   i n s t a n c e , 
                         m a x D e p t h , 
                         f o u n d , 
                         r e s p o n s e 
                     ; 
                     p a s s e d A r g u m e n t s   =   p a s s e d A r g u m e n t s   | |   q u e r y A r g u m e n t s ; 
                     c o n t e x t                   =   e l e m e n t                   | |   c o n t e x t ; 
                     i f ( t y p e o f   q u e r y   = =   ' s t r i n g '   & &   o b j e c t   ! = =   u n d e f i n e d )   { 
                         q u e r y         =   q u e r y . s p l i t ( / [ \ .   ] / ) ; 
                         m a x D e p t h   =   q u e r y . l e n g t h   -   1 ; 
                         $ . e a c h ( q u e r y ,   f u n c t i o n ( d e p t h ,   v a l u e )   { 
                             v a r   c a m e l C a s e V a l u e   =   ( d e p t h   ! =   m a x D e p t h ) 
                                 ?   v a l u e   +   q u e r y [ d e p t h   +   1 ] . c h a r A t ( 0 ) . t o U p p e r C a s e ( )   +   q u e r y [ d e p t h   +   1 ] . s l i c e ( 1 ) 
                                 :   q u e r y 
                             ; 
                             i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ c a m e l C a s e V a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                                 o b j e c t   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                             } 
                             e l s e   i f (   o b j e c t [ c a m e l C a s e V a l u e ]   ! = =   u n d e f i n e d   )   { 
                                 f o u n d   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                                 r e t u r n   f a l s e ; 
                             } 
                             e l s e   i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ v a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                                 o b j e c t   =   o b j e c t [ v a l u e ] ; 
                             } 
                             e l s e   i f (   o b j e c t [ v a l u e ]   ! = =   u n d e f i n e d   )   { 
                                 f o u n d   =   o b j e c t [ v a l u e ] ; 
                                 r e t u r n   f a l s e ; 
                             } 
                             e l s e   { 
                                 r e t u r n   f a l s e ; 
                             } 
                         } ) ; 
                     } 
                     i f   (   $ . i s F u n c t i o n (   f o u n d   )   )   { 
                         r e s p o n s e   =   f o u n d . a p p l y ( c o n t e x t ,   p a s s e d A r g u m e n t s ) ; 
                     } 
                     e l s e   i f ( f o u n d   ! = =   u n d e f i n e d )   { 
                         r e s p o n s e   =   f o u n d ; 
                     } 
                     i f ( $ . i s A r r a y ( r e t u r n e d V a l u e ) )   { 
                         r e t u r n e d V a l u e . p u s h ( r e s p o n s e ) ; 
                     } 
                     e l s e   i f ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d )   { 
                         r e t u r n e d V a l u e   =   [ r e t u r n e d V a l u e ,   r e s p o n s e ] ; 
                     } 
                     e l s e   i f ( r e s p o n s e   ! = =   u n d e f i n e d )   { 
                         r e t u r n e d V a l u e   =   r e s p o n s e ; 
                     } 
                     r e t u r n   f o u n d ; 
                 } 
             } ; 
 
             i f ( m e t h o d I n v o k e d )   { 
                 i f ( i n s t a n c e   = = =   u n d e f i n e d )   { 
                     m o d u l e . i n i t i a l i z e ( ) ; 
                 } 
                 m o d u l e . i n v o k e ( q u e r y ) ; 
             } 
             e l s e   { 
                 i f ( i n s t a n c e   ! = =   u n d e f i n e d )   { 
                     m o d u l e . d e s t r o y ( ) ; 
                 } 
                 m o d u l e . i n i t i a l i z e ( ) ; 
             } 
         } ) 
     ; 
 
     r e t u r n   ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d ) 
         ?   r e t u r n e d V a l u e 
         :   t h i s 
     ; 
 } ; 
 
 $ . f n . c h e c k b o x . s e t t i n g s   =   { 
 
     n a m e                 :   ' C h e c k b o x ' , 
     n a m e s p a c e       :   ' c h e c k b o x ' , 
 
     d e b u g               :   f a l s e , 
     v e r b o s e           :   t r u e , 
     p e r f o r m a n c e   :   t r u e , 
 
     / /   d e l e g a t e d   e v e n t   c o n t e x t 
     c o n t e x t           :   f a l s e , 
     r e q u i r e d         :   ' a u t o ' , 
 
     o n C h a n g e         :   f u n c t i o n ( ) { } , 
     o n E n a b l e         :   f u n c t i o n ( ) { } , 
     o n D i s a b l e       :   f u n c t i o n ( ) { } , 
 
     e r r o r           :   { 
         m e t h o d       :   ' T h e   m e t h o d   y o u   c a l l e d   i s   n o t   d e f i n e d . ' 
     } , 
 
     s e l e c t o r   :   { 
         i n p u t     :   ' i n p u t [ t y p e = c h e c k b o x ] ,   i n p u t [ t y p e = r a d i o ] ' , 
         l a b e l     :   ' l a b e l ' 
     } , 
 
     c l a s s N a m e   :   { 
         r a d i o     :   ' r a d i o ' 
     } 
 
 } ; 
 
 } ) (   j Q u e r y ,   w i n d o w   ,   d o c u m e n t   ) ; 
 
 / * 
   *   #   S e m a n t i c   -   D i m m e r 
   *   h t t p : / / g i t h u b . c o m / j l u k i c / s e m a n t i c - u i / 
   * 
   * 
   *   C o p y r i g h t   2 0 1 3   C o n t r i b u t o r s 
   *   R e l e a s e d   u n d e r   t h e   M I T   l i c e n s e 
   *   h t t p : / / o p e n s o u r c e . o r g / l i c e n s e s / M I T 
   * 
   * / 
 
 ; ( f u n c t i o n   (   $ ,   w i n d o w ,   d o c u m e n t ,   u n d e f i n e d   )   { 
 
 $ . f n . d i m m e r   =   f u n c t i o n ( p a r a m e t e r s )   { 
     v a r 
         $ a l l M o d u l e s           =   $ ( t h i s ) , 
 
         t i m e                         =   n e w   D a t e ( ) . g e t T i m e ( ) , 
         p e r f o r m a n c e           =   [ ] , 
 
         q u e r y                       =   a r g u m e n t s [ 0 ] , 
         m e t h o d I n v o k e d       =   ( t y p e o f   q u e r y   = =   ' s t r i n g ' ) , 
         q u e r y A r g u m e n t s     =   [ ] . s l i c e . c a l l ( a r g u m e n t s ,   1 ) , 
 
         r e t u r n e d V a l u e 
     ; 
 
     $ a l l M o d u l e s 
         . e a c h ( f u n c t i o n ( )   { 
             v a r 
                 s e t t i n g s                 =   (   $ . i s P l a i n O b j e c t ( p a r a m e t e r s )   ) 
                     ?   $ . e x t e n d ( t r u e ,   { } ,   $ . f n . d i m m e r . s e t t i n g s ,   p a r a m e t e r s ) 
                     :   $ . e x t e n d ( { } ,   $ . f n . d i m m e r . s e t t i n g s ) , 
 
                 s e l e c t o r                 =   s e t t i n g s . s e l e c t o r , 
                 n a m e s p a c e               =   s e t t i n g s . n a m e s p a c e , 
                 c l a s s N a m e               =   s e t t i n g s . c l a s s N a m e , 
                 e r r o r                       =   s e t t i n g s . e r r o r , 
 
                 e v e n t N a m e s p a c e     =   ' . '   +   n a m e s p a c e , 
                 m o d u l e N a m e s p a c e   =   ' m o d u l e - '   +   n a m e s p a c e , 
                 m o d u l e S e l e c t o r     =   $ a l l M o d u l e s . s e l e c t o r   | |   ' ' , 
 
                 c l i c k E v e n t             =   ( ' o n t o u c h s t a r t '   i n   d o c u m e n t . d o c u m e n t E l e m e n t ) 
                     ?   ' t o u c h s t a r t ' 
                     :   ' c l i c k ' , 
 
                 $ m o d u l e   =   $ ( t h i s ) , 
                 $ d i m m e r , 
                 $ d i m m a b l e , 
 
                 e l e m e n t       =   t h i s , 
                 i n s t a n c e     =   $ m o d u l e . d a t a ( m o d u l e N a m e s p a c e ) , 
                 m o d u l e 
             ; 
 
             m o d u l e   =   { 
 
                 p r e i n i t i a l i z e :   f u n c t i o n ( )   { 
                     i f (   m o d u l e . i s . d i m m e r ( )   )   { 
                         $ d i m m a b l e   =   $ m o d u l e . p a r e n t ( ) ; 
                         $ d i m m e r       =   $ m o d u l e ; 
                     } 
                     e l s e   { 
                         $ d i m m a b l e   =   $ m o d u l e ; 
                         i f (   m o d u l e . h a s . d i m m e r ( )   )   { 
                             $ d i m m e r   =   $ d i m m a b l e . c h i l d r e n ( s e l e c t o r . d i m m e r ) . f i r s t ( ) ; 
                         } 
                         e l s e   { 
                             $ d i m m e r   =   m o d u l e . c r e a t e ( ) ; 
                         } 
                     } 
                 } , 
 
                 i n i t i a l i z e :   f u n c t i o n ( )   { 
                     m o d u l e . d e b u g ( ' I n i t i a l i z i n g   d i m m e r ' ,   s e t t i n g s ) ; 
                     i f ( s e t t i n g s . o n   = =   ' h o v e r ' )   { 
                         $ d i m m a b l e 
                             . o n ( ' m o u s e e n t e r '   +   e v e n t N a m e s p a c e ,   m o d u l e . s h o w ) 
                             . o n ( ' m o u s e l e a v e '   +   e v e n t N a m e s p a c e ,   m o d u l e . h i d e ) 
                         ; 
                     } 
                     e l s e   i f ( s e t t i n g s . o n   = =   ' c l i c k ' )   { 
                         $ d i m m a b l e 
                             . o n ( c l i c k E v e n t   +   e v e n t N a m e s p a c e ,   m o d u l e . t o g g l e ) 
                         ; 
                     } 
 
                     i f (   m o d u l e . i s . p a g e ( )   )   { 
                         m o d u l e . d e b u g ( ' S e t t i n g   a s   a   p a g e   d i m m e r ' ,   $ d i m m a b l e ) ; 
                         m o d u l e . s e t . p a g e D i m m e r ( ) ; 
                     } 
 
                     i f ( s e t t i n g s . c l o s a b l e )   { 
                         m o d u l e . v e r b o s e ( ' A d d i n g   d i m m e r   c l o s e   e v e n t ' ,   $ d i m m e r ) ; 
                         $ d i m m e r 
                             . o n ( c l i c k E v e n t   +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . c l i c k ) 
                         ; 
                     } 
                     m o d u l e . s e t . d i m m a b l e ( ) ; 
                     m o d u l e . i n s t a n t i a t e ( ) ; 
                 } , 
 
                 i n s t a n t i a t e :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' S t o r i n g   i n s t a n c e   o f   m o d u l e ' ,   m o d u l e ) ; 
                     i n s t a n c e   =   m o d u l e ; 
                     $ m o d u l e 
                         . d a t a ( m o d u l e N a m e s p a c e ,   i n s t a n c e ) 
                     ; 
                 } , 
 
                 d e s t r o y :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' D e s t r o y i n g   p r e v i o u s   m o d u l e ' ,   $ d i m m e r ) ; 
                     $ m o d u l e 
                         . r e m o v e D a t a ( m o d u l e N a m e s p a c e ) 
                     ; 
                     $ d i m m a b l e 
                         . o f f ( e v e n t N a m e s p a c e ) 
                     ; 
                     $ d i m m e r 
                         . o f f ( e v e n t N a m e s p a c e ) 
                     ; 
                 } , 
 
                 e v e n t :   { 
 
                     c l i c k :   f u n c t i o n ( e v e n t )   { 
                         m o d u l e . v e r b o s e ( ' D e t e r m i n i n g   i f   e v e n t   o c c u r e d   o n   d i m m e r ' ,   e v e n t ) ; 
                         i f (   $ d i m m e r . f i n d ( e v e n t . t a r g e t ) . s i z e ( )   = = =   0   | |   $ ( e v e n t . t a r g e t ) . i s ( s e l e c t o r . c o n t e n t )   )   { 
                             m o d u l e . h i d e ( ) ; 
                             e v e n t . s t o p I m m e d i a t e P r o p a g a t i o n ( ) ; 
                         } 
                     } 
 
                 } , 
 
                 a d d C o n t e n t :   f u n c t i o n ( e l e m e n t )   { 
                     v a r 
                         $ c o n t e n t   =   $ ( e l e m e n t ) 
                     ; 
                     m o d u l e . d e b u g ( ' A d d   c o n t e n t   t o   d i m m e r ' ,   $ c o n t e n t ) ; 
                     i f ( $ c o n t e n t . p a r e n t ( ) [ 0 ]   ! = =   $ d i m m e r [ 0 ] )   { 
                         $ c o n t e n t . d e t a c h ( ) . a p p e n d T o ( $ d i m m e r ) ; 
                     } 
                 } , 
 
                 c r e a t e :   f u n c t i o n ( )   { 
                     r e t u r n   $ (   s e t t i n g s . t e m p l a t e . d i m m e r ( )   ) . a p p e n d T o ( $ d i m m a b l e ) ; 
                 } , 
 
                 a n i m a t e :   { 
                     s h o w :   f u n c t i o n ( c a l l b a c k )   { 
                         c a l l b a c k   =   $ . i s F u n c t i o n ( c a l l b a c k ) 
                             ?   c a l l b a c k 
                             :   f u n c t i o n ( ) { } 
                         ; 
                         m o d u l e . s e t . d i m m e d ( ) ; 
                         i f ( s e t t i n g s . o n   ! =   ' h o v e r '   & &   s e t t i n g s . u s e C S S   & &   $ . f n . t r a n s i t i o n   ! = =   u n d e f i n e d   & &   $ d i m m e r . t r a n s i t i o n ( ' i s   s u p p o r t e d ' ) )   { 
                             $ d i m m e r 
                                 . t r a n s i t i o n ( { 
                                     a n i m a t i o n   :   s e t t i n g s . t r a n s i t i o n   +   '   i n ' , 
                                     q u e u e           :   t r u e , 
                                     d u r a t i o n     :   m o d u l e . g e t . d u r a t i o n ( ) , 
                                     c o m p l e t e     :   f u n c t i o n ( )   { 
                                         m o d u l e . s e t . a c t i v e ( ) ; 
                                         c a l l b a c k ( ) ; 
                                     } 
                                 } ) 
                             ; 
                         } 
                         e l s e   { 
                             m o d u l e . v e r b o s e ( ' S h o w i n g   d i m m e r   a n i m a t i o n   w i t h   j a v a s c r i p t ' ) ; 
                             $ d i m m e r 
                                 . s t o p ( ) 
                                 . c s s ( { 
                                     o p a c i t y   :   0 , 
                                     w i d t h       :   ' 1 0 0 % ' , 
                                     h e i g h t     :   ' 1 0 0 % ' 
                                 } ) 
                                 . f a d e T o ( m o d u l e . g e t . d u r a t i o n ( ) ,   1 ,   f u n c t i o n ( )   { 
                                     $ d i m m e r . r e m o v e A t t r ( ' s t y l e ' ) ; 
                                     m o d u l e . s e t . a c t i v e ( ) ; 
                                     c a l l b a c k ( ) ; 
                                 } ) 
                             ; 
                         } 
                     } , 
                     h i d e :   f u n c t i o n ( c a l l b a c k )   { 
                         c a l l b a c k   =   $ . i s F u n c t i o n ( c a l l b a c k ) 
                             ?   c a l l b a c k 
                             :   f u n c t i o n ( ) { } 
                         ; 
                         i f ( s e t t i n g s . o n   ! =   ' h o v e r '   & &   s e t t i n g s . u s e C S S   & &   $ . f n . t r a n s i t i o n   ! = =   u n d e f i n e d   & &   $ d i m m e r . t r a n s i t i o n ( ' i s   s u p p o r t e d ' ) )   { 
                             m o d u l e . v e r b o s e ( ' H i d i n g   d i m m e r   w i t h   c s s ' ) ; 
                             $ d i m m e r 
                                 . t r a n s i t i o n ( { 
                                     a n i m a t i o n   :   s e t t i n g s . t r a n s i t i o n   +   '   o u t ' , 
                                     d u r a t i o n     :   m o d u l e . g e t . d u r a t i o n ( ) , 
                                     q u e u e           :   t r u e , 
                                     c o m p l e t e     :   f u n c t i o n ( )   { 
                                         m o d u l e . r e m o v e . d i m m e d ( ) ; 
                                         m o d u l e . r e m o v e . a c t i v e ( ) ; 
                                         c a l l b a c k ( ) ; 
                                     } 
                                 } ) 
                             ; 
                         } 
                         e l s e   { 
                             m o d u l e . v e r b o s e ( ' H i d i n g   d i m m e r   w i t h   j a v a s c r i p t ' ) ; 
                             $ d i m m e r 
                                 . s t o p ( ) 
                                 . f a d e O u t ( m o d u l e . g e t . d u r a t i o n ( ) ,   f u n c t i o n ( )   { 
                                     $ d i m m e r . r e m o v e A t t r ( ' s t y l e ' ) ; 
                                     m o d u l e . r e m o v e . d i m m e d ( ) ; 
                                     m o d u l e . r e m o v e . a c t i v e ( ) ; 
                                     c a l l b a c k ( ) ; 
                                 } ) 
                             ; 
                         } 
                     } 
                 } , 
 
                 g e t :   { 
                     d i m m e r :   f u n c t i o n ( )   { 
                         r e t u r n   $ d i m m e r ; 
                     } , 
                     d u r a t i o n :   f u n c t i o n ( )   { 
                         i f ( t y p e o f   s e t t i n g s . d u r a t i o n   = =   ' o b j e c t ' )   { 
                             i f (   m o d u l e . i s . a c t i v e ( )   )   { 
                                 r e t u r n   s e t t i n g s . d u r a t i o n . h i d e ; 
                             } 
                             e l s e   { 
                                 r e t u r n   s e t t i n g s . d u r a t i o n . s h o w ; 
                             } 
                         } 
                         r e t u r n   s e t t i n g s . d u r a t i o n ; 
                     } 
                 } , 
 
                 h a s :   { 
                     d i m m e r :   f u n c t i o n ( )   { 
                         r e t u r n   (   $ m o d u l e . c h i l d r e n ( s e l e c t o r . d i m m e r ) . s i z e ( )   >   0   ) ; 
                     } 
                 } , 
 
                 i s :   { 
                     a c t i v e :   f u n c t i o n ( )   { 
                         r e t u r n   $ d i m m e r . h a s C l a s s ( c l a s s N a m e . a c t i v e ) ; 
                     } , 
                     a n i m a t i n g :   f u n c t i o n ( )   { 
                         r e t u r n   (   $ d i m m e r . i s ( ' : a n i m a t e d ' )   | |   $ d i m m e r . h a s C l a s s ( c l a s s N a m e . t r a n s i t i o n )   ) ; 
                     } , 
                     d i m m e r :   f u n c t i o n ( )   { 
                         r e t u r n   $ m o d u l e . i s ( s e l e c t o r . d i m m e r ) ; 
                     } , 
                     d i m m a b l e :   f u n c t i o n ( )   { 
                         r e t u r n   $ m o d u l e . i s ( s e l e c t o r . d i m m a b l e ) ; 
                     } , 
                     d i m m e d :   f u n c t i o n ( )   { 
                         r e t u r n   $ d i m m a b l e . h a s C l a s s ( c l a s s N a m e . d i m m e d ) ; 
                     } , 
                     d i s a b l e d :   f u n c t i o n ( )   { 
                         r e t u r n   $ d i m m a b l e . h a s C l a s s ( c l a s s N a m e . d i s a b l e d ) ; 
                     } , 
                     e n a b l e d :   f u n c t i o n ( )   { 
                         r e t u r n   ! m o d u l e . i s . d i s a b l e d ( ) ; 
                     } , 
                     p a g e :   f u n c t i o n   ( )   { 
                         r e t u r n   $ d i m m a b l e . i s ( ' b o d y ' ) ; 
                     } , 
                     p a g e D i m m e r :   f u n c t i o n ( )   { 
                         r e t u r n   $ d i m m e r . h a s C l a s s ( c l a s s N a m e . p a g e D i m m e r ) ; 
                     } 
                 } , 
 
                 c a n :   { 
                     s h o w :   f u n c t i o n ( )   { 
                         r e t u r n   ! $ d i m m e r . h a s C l a s s ( c l a s s N a m e . d i s a b l e d ) ; 
                     } 
                 } , 
 
                 s e t :   { 
                     a c t i v e :   f u n c t i o n ( )   { 
                         m o d u l e . s e t . d i m m e d ( ) ; 
                         $ d i m m e r 
                             . r e m o v e C l a s s ( c l a s s N a m e . t r a n s i t i o n ) 
                             . a d d C l a s s ( c l a s s N a m e . a c t i v e ) 
                         ; 
                     } , 
                     d i m m a b l e :   f u n c t i o n ( )   { 
                         $ d i m m a b l e . a d d C l a s s ( c l a s s N a m e . d i m m a b l e ) ; 
                     } , 
                     d i m m e d :   f u n c t i o n ( )   { 
                         $ d i m m a b l e . a d d C l a s s ( c l a s s N a m e . d i m m e d ) ; 
                     } , 
                     p a g e D i m m e r :   f u n c t i o n ( )   { 
                         $ d i m m e r . a d d C l a s s ( c l a s s N a m e . p a g e D i m m e r ) ; 
                     } , 
                     d i s a b l e d :   f u n c t i o n ( )   { 
                         $ d i m m e r . a d d C l a s s ( c l a s s N a m e . d i s a b l e d ) ; 
                     } 
                 } , 
 
                 r e m o v e :   { 
                     a c t i v e :   f u n c t i o n ( )   { 
                         $ d i m m e r 
                             . r e m o v e C l a s s ( c l a s s N a m e . t r a n s i t i o n ) 
                             . r e m o v e C l a s s ( c l a s s N a m e . a c t i v e ) 
                         ; 
                     } , 
                     d i m m e d :   f u n c t i o n ( )   { 
                         $ d i m m a b l e . r e m o v e C l a s s ( c l a s s N a m e . d i m m e d ) ; 
                     } , 
                     d i s a b l e d :   f u n c t i o n ( )   { 
                         $ d i m m e r . r e m o v e C l a s s ( c l a s s N a m e . d i s a b l e d ) ; 
                     } 
                 } , 
 
                 s h o w :   f u n c t i o n ( c a l l b a c k )   { 
                     c a l l b a c k   =   $ . i s F u n c t i o n ( c a l l b a c k ) 
                         ?   c a l l b a c k 
                         :   f u n c t i o n ( ) { } 
                     ; 
                     m o d u l e . d e b u g ( ' S h o w i n g   d i m m e r ' ,   $ d i m m e r ,   s e t t i n g s ) ; 
                     i f (   ! m o d u l e . i s . a c t i v e ( )   & &   m o d u l e . i s . e n a b l e d ( )   )   { 
                         m o d u l e . a n i m a t e . s h o w ( c a l l b a c k ) ; 
                         $ . p r o x y ( s e t t i n g s . o n S h o w ,   e l e m e n t ) ( ) ; 
                         $ . p r o x y ( s e t t i n g s . o n C h a n g e ,   e l e m e n t ) ( ) ; 
                     } 
                     e l s e   { 
                         m o d u l e . d e b u g ( ' D i m m e r   i s   a l r e a d y   s h o w n   o r   d i s a b l e d ' ) ; 
                     } 
                 } , 
 
                 h i d e :   f u n c t i o n ( c a l l b a c k )   { 
                     c a l l b a c k   =   $ . i s F u n c t i o n ( c a l l b a c k ) 
                         ?   c a l l b a c k 
                         :   f u n c t i o n ( ) { } 
                     ; 
                     i f (   m o d u l e . i s . a c t i v e ( )   | |   m o d u l e . i s . a n i m a t i n g ( )   )   { 
                         m o d u l e . d e b u g ( ' H i d i n g   d i m m e r ' ,   $ d i m m e r ) ; 
                         m o d u l e . a n i m a t e . h i d e ( c a l l b a c k ) ; 
                         $ . p r o x y ( s e t t i n g s . o n H i d e ,   e l e m e n t ) ( ) ; 
                         $ . p r o x y ( s e t t i n g s . o n C h a n g e ,   e l e m e n t ) ( ) ; 
                     } 
                     e l s e   { 
                         m o d u l e . d e b u g ( ' D i m m e r   i s   n o t   v i s i b l e ' ) ; 
                     } 
                 } , 
 
                 t o g g l e :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' T o g g l i n g   d i m m e r   v i s i b i l i t y ' ,   $ d i m m e r ) ; 
                     i f (   ! m o d u l e . i s . d i m m e d ( )   )   { 
                         m o d u l e . s h o w ( ) ; 
                     } 
                     e l s e   { 
                         m o d u l e . h i d e ( ) ; 
                     } 
                 } , 
 
                 s e t t i n g :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                     i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                         $ . e x t e n d ( t r u e ,   s e t t i n g s ,   n a m e ) ; 
                     } 
                     e l s e   i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                         s e t t i n g s [ n a m e ]   =   v a l u e ; 
                     } 
                     e l s e   { 
                         r e t u r n   s e t t i n g s [ n a m e ] ; 
                     } 
                 } , 
                 i n t e r n a l :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                     i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                         $ . e x t e n d ( t r u e ,   m o d u l e ,   n a m e ) ; 
                     } 
                     e l s e   i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                         m o d u l e [ n a m e ]   =   v a l u e ; 
                     } 
                     e l s e   { 
                         r e t u r n   m o d u l e [ n a m e ] ; 
                     } 
                 } , 
                 d e b u g :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . d e b u g )   { 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . d e b u g   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                             m o d u l e . d e b u g . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                         } 
                     } 
                 } , 
                 v e r b o s e :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . v e r b o s e   & &   s e t t i n g s . d e b u g )   { 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . v e r b o s e   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                             m o d u l e . v e r b o s e . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                         } 
                     } 
                 } , 
                 e r r o r :   f u n c t i o n ( )   { 
                     m o d u l e . e r r o r   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . e r r o r ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                     m o d u l e . e r r o r . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                 } , 
                 p e r f o r m a n c e :   { 
                     l o g :   f u n c t i o n ( m e s s a g e )   { 
                         v a r 
                             c u r r e n t T i m e , 
                             e x e c u t i o n T i m e , 
                             p r e v i o u s T i m e 
                         ; 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             c u r r e n t T i m e       =   n e w   D a t e ( ) . g e t T i m e ( ) ; 
                             p r e v i o u s T i m e     =   t i m e   | |   c u r r e n t T i m e ; 
                             e x e c u t i o n T i m e   =   c u r r e n t T i m e   -   p r e v i o u s T i m e ; 
                             t i m e                     =   c u r r e n t T i m e ; 
                             p e r f o r m a n c e . p u s h ( { 
                                 ' E l e m e n t '                 :   e l e m e n t , 
                                 ' N a m e '                       :   m e s s a g e [ 0 ] , 
                                 ' A r g u m e n t s '             :   [ ] . s l i c e . c a l l ( m e s s a g e ,   1 )   | |   ' ' , 
                                 ' E x e c u t i o n   T i m e '   :   e x e c u t i o n T i m e 
                             } ) ; 
                         } 
                         c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                         m o d u l e . p e r f o r m a n c e . t i m e r   =   s e t T i m e o u t ( m o d u l e . p e r f o r m a n c e . d i s p l a y ,   1 0 0 ) ; 
                     } , 
                     d i s p l a y :   f u n c t i o n ( )   { 
                         v a r 
                             t i t l e   =   s e t t i n g s . n a m e   +   ' : ' , 
                             t o t a l T i m e   =   0 
                         ; 
                         t i m e   =   f a l s e ; 
                         c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                         $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                             t o t a l T i m e   + =   d a t a [ ' E x e c u t i o n   T i m e ' ] ; 
                         } ) ; 
                         t i t l e   + =   '   '   +   t o t a l T i m e   +   ' m s ' ; 
                         i f ( m o d u l e S e l e c t o r )   { 
                             t i t l e   + =   '   \ ' '   +   m o d u l e S e l e c t o r   +   ' \ ' ' ; 
                         } 
                         i f ( $ a l l M o d u l e s . s i z e ( )   >   1 )   { 
                             t i t l e   + =   '   '   +   ' ( '   +   $ a l l M o d u l e s . s i z e ( )   +   ' ) ' ; 
                         } 
                         i f (   ( c o n s o l e . g r o u p   ! = =   u n d e f i n e d   | |   c o n s o l e . t a b l e   ! = =   u n d e f i n e d )   & &   p e r f o r m a n c e . l e n g t h   >   0 )   { 
                             c o n s o l e . g r o u p C o l l a p s e d ( t i t l e ) ; 
                             i f ( c o n s o l e . t a b l e )   { 
                                 c o n s o l e . t a b l e ( p e r f o r m a n c e ) ; 
                             } 
                             e l s e   { 
                                 $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                                     c o n s o l e . l o g ( d a t a [ ' N a m e ' ]   +   ' :   '   +   d a t a [ ' E x e c u t i o n   T i m e ' ] + ' m s ' ) ; 
                                 } ) ; 
                             } 
                             c o n s o l e . g r o u p E n d ( ) ; 
                         } 
                         p e r f o r m a n c e   =   [ ] ; 
                     } 
                 } , 
                 i n v o k e :   f u n c t i o n ( q u e r y ,   p a s s e d A r g u m e n t s ,   c o n t e x t )   { 
                     v a r 
                         o b j e c t   =   i n s t a n c e , 
                         m a x D e p t h , 
                         f o u n d , 
                         r e s p o n s e 
                     ; 
                     p a s s e d A r g u m e n t s   =   p a s s e d A r g u m e n t s   | |   q u e r y A r g u m e n t s ; 
                     c o n t e x t                   =   e l e m e n t                   | |   c o n t e x t ; 
                     i f ( t y p e o f   q u e r y   = =   ' s t r i n g '   & &   o b j e c t   ! = =   u n d e f i n e d )   { 
                         q u e r y         =   q u e r y . s p l i t ( / [ \ .   ] / ) ; 
                         m a x D e p t h   =   q u e r y . l e n g t h   -   1 ; 
                         $ . e a c h ( q u e r y ,   f u n c t i o n ( d e p t h ,   v a l u e )   { 
                             v a r   c a m e l C a s e V a l u e   =   ( d e p t h   ! =   m a x D e p t h ) 
                                 ?   v a l u e   +   q u e r y [ d e p t h   +   1 ] . c h a r A t ( 0 ) . t o U p p e r C a s e ( )   +   q u e r y [ d e p t h   +   1 ] . s l i c e ( 1 ) 
                                 :   q u e r y 
                             ; 
                             i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ c a m e l C a s e V a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                                 o b j e c t   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                             } 
                             e l s e   i f (   o b j e c t [ c a m e l C a s e V a l u e ]   ! = =   u n d e f i n e d   )   { 
                                 f o u n d   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                                 r e t u r n   f a l s e ; 
                             } 
                             e l s e   i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ v a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                                 o b j e c t   =   o b j e c t [ v a l u e ] ; 
                             } 
                             e l s e   i f (   o b j e c t [ v a l u e ]   ! = =   u n d e f i n e d   )   { 
                                 f o u n d   =   o b j e c t [ v a l u e ] ; 
                                 r e t u r n   f a l s e ; 
                             } 
                             e l s e   { 
                                 r e t u r n   f a l s e ; 
                             } 
                         } ) ; 
                     } 
                     i f   (   $ . i s F u n c t i o n (   f o u n d   )   )   { 
                         r e s p o n s e   =   f o u n d . a p p l y ( c o n t e x t ,   p a s s e d A r g u m e n t s ) ; 
                     } 
                     e l s e   i f ( f o u n d   ! = =   u n d e f i n e d )   { 
                         r e s p o n s e   =   f o u n d ; 
                     } 
                     i f ( $ . i s A r r a y ( r e t u r n e d V a l u e ) )   { 
                         r e t u r n e d V a l u e . p u s h ( r e s p o n s e ) ; 
                     } 
                     e l s e   i f ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d )   { 
                         r e t u r n e d V a l u e   =   [ r e t u r n e d V a l u e ,   r e s p o n s e ] ; 
                     } 
                     e l s e   i f ( r e s p o n s e   ! = =   u n d e f i n e d )   { 
                         r e t u r n e d V a l u e   =   r e s p o n s e ; 
                     } 
                     r e t u r n   f o u n d ; 
                 } 
             } ; 
 
             m o d u l e . p r e i n i t i a l i z e ( ) ; 
 
             i f ( m e t h o d I n v o k e d )   { 
                 i f ( i n s t a n c e   = = =   u n d e f i n e d )   { 
                     m o d u l e . i n i t i a l i z e ( ) ; 
                 } 
                 m o d u l e . i n v o k e ( q u e r y ) ; 
             } 
             e l s e   { 
                 i f ( i n s t a n c e   ! = =   u n d e f i n e d )   { 
                     m o d u l e . d e s t r o y ( ) ; 
                 } 
                 m o d u l e . i n i t i a l i z e ( ) ; 
             } 
         } ) 
     ; 
 
     r e t u r n   ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d ) 
         ?   r e t u r n e d V a l u e 
         :   t h i s 
     ; 
 } ; 
 
 $ . f n . d i m m e r . s e t t i n g s   =   { 
 
     n a m e                 :   ' D i m m e r ' , 
     n a m e s p a c e       :   ' d i m m e r ' , 
 
     d e b u g               :   f a l s e , 
     v e r b o s e           :   t r u e , 
     p e r f o r m a n c e   :   t r u e , 
 
     t r a n s i t i o n     :   ' f a d e ' , 
     u s e C S S             :   t r u e , 
     o n                     :   f a l s e , 
     c l o s a b l e         :   t r u e , 
 
     d u r a t i o n         :   { 
         s h o w   :   5 0 0 , 
         h i d e   :   5 0 0 
     } , 
 
     o n C h a n g e         :   f u n c t i o n ( ) { } , 
     o n S h o w             :   f u n c t i o n ( ) { } , 
     o n H i d e             :   f u n c t i o n ( ) { } , 
 
     e r r o r       :   { 
         m e t h o d       :   ' T h e   m e t h o d   y o u   c a l l e d   i s   n o t   d e f i n e d . ' 
     } , 
 
     s e l e c t o r :   { 
         d i m m a b l e   :   ' . u i . d i m m a b l e ' , 
         d i m m e r       :   ' . u i . d i m m e r ' , 
         c o n t e n t     :   ' . u i . d i m m e r   >   . c o n t e n t ,   . u i . d i m m e r   >   . c o n t e n t   >   . c e n t e r ' 
     } , 
 
     t e m p l a t e :   { 
         d i m m e r :   f u n c t i o n ( )   { 
           r e t u r n   $ ( ' < d i v   / > ' ) . a t t r ( ' c l a s s ' ,   ' u i   d i m m e r ' ) ; 
         } 
     } , 
 
     c l a s s N a m e   :   { 
         a c t i v e           :   ' a c t i v e ' , 
         d i m m a b l e       :   ' u i   d i m m a b l e ' , 
         d i m m e d           :   ' d i m m e d ' , 
         d i s a b l e d       :   ' d i s a b l e d ' , 
         p a g e D i m m e r   :   ' p a g e ' , 
         h i d e               :   ' h i d e ' , 
         s h o w               :   ' s h o w ' , 
         t r a n s i t i o n   :   ' t r a n s i t i o n ' 
     } 
 
 } ; 
 
 } ) (   j Q u e r y ,   w i n d o w   ,   d o c u m e n t   ) ; 
 / * 
   *   #   S e m a n t i c   -   D r o p d o w n 
   *   h t t p : / / g i t h u b . c o m / j l u k i c / s e m a n t i c - u i / 
   * 
   * 
   *   C o p y r i g h t   2 0 1 3   C o n t r i b u t o r s 
   *   R e l e a s e d   u n d e r   t h e   M I T   l i c e n s e 
   *   h t t p : / / o p e n s o u r c e . o r g / l i c e n s e s / M I T 
   * 
   * / 
 ; ( f u n c t i o n   (   $ ,   w i n d o w ,   d o c u m e n t ,   u n d e f i n e d   )   { 
 
 $ . f n . d r o p d o w n   =   f u n c t i o n ( p a r a m e t e r s )   { 
         v a r 
         $ a l l M o d u l e s         =   $ ( t h i s ) , 
         $ d o c u m e n t             =   $ ( d o c u m e n t ) , 
 
         m o d u l e S e l e c t o r   =   $ a l l M o d u l e s . s e l e c t o r   | |   ' ' , 
 
         h a s T o u c h               =   ( ' o n t o u c h s t a r t '   i n   d o c u m e n t . d o c u m e n t E l e m e n t ) , 
         t i m e                       =   n e w   D a t e ( ) . g e t T i m e ( ) , 
         p e r f o r m a n c e         =   [ ] , 
 
         q u e r y                     =   a r g u m e n t s [ 0 ] , 
         m e t h o d I n v o k e d     =   ( t y p e o f   q u e r y   = =   ' s t r i n g ' ) , 
         q u e r y A r g u m e n t s   =   [ ] . s l i c e . c a l l ( a r g u m e n t s ,   1 ) , 
         r e t u r n e d V a l u e 
     ; 
 
     $ a l l M o d u l e s 
         . e a c h ( f u n c t i o n ( )   { 
             v a r 
                 s e t t i n g s                     =   (   $ . i s P l a i n O b j e c t ( p a r a m e t e r s )   ) 
                     ?   $ . e x t e n d ( t r u e ,   { } ,   $ . f n . d r o p d o w n . s e t t i n g s ,   p a r a m e t e r s ) 
                     :   $ . e x t e n d ( { } ,   $ . f n . d r o p d o w n . s e t t i n g s ) , 
 
                 c l a s s N a m e               =   s e t t i n g s . c l a s s N a m e , 
                 m e t a d a t a                 =   s e t t i n g s . m e t a d a t a , 
                 n a m e s p a c e               =   s e t t i n g s . n a m e s p a c e , 
                 s e l e c t o r                 =   s e t t i n g s . s e l e c t o r , 
                 e r r o r                       =   s e t t i n g s . e r r o r , 
 
                 e v e n t N a m e s p a c e     =   ' . '   +   n a m e s p a c e , 
                 m o d u l e N a m e s p a c e   =   ' m o d u l e - '   +   n a m e s p a c e , 
 
                 $ m o d u l e                   =   $ ( t h i s ) , 
                 $ i t e m                       =   $ m o d u l e . f i n d ( s e l e c t o r . i t e m ) , 
                 $ t e x t                       =   $ m o d u l e . f i n d ( s e l e c t o r . t e x t ) , 
                 $ i n p u t                     =   $ m o d u l e . f i n d ( s e l e c t o r . i n p u t ) , 
 
                 $ m e n u                       =   $ m o d u l e . c h i l d r e n ( s e l e c t o r . m e n u ) , 
 
 
                 e l e m e n t                   =   t h i s , 
                 i n s t a n c e                 =   $ m o d u l e . d a t a ( m o d u l e N a m e s p a c e ) , 
                 m o d u l e 
             ; 
 
             m o d u l e   =   { 
 
                 i n i t i a l i z e :   f u n c t i o n ( )   { 
                     m o d u l e . d e b u g ( ' I n i t i a l i z i n g   d r o p d o w n ' ,   s e t t i n g s ) ; 
 
                     m o d u l e . s a v e . d e f a u l t s ( ) ; 
                     m o d u l e . s e t . s e l e c t e d ( ) ; 
 
                     i f ( h a s T o u c h )   { 
                         m o d u l e . b i n d . t o u c h E v e n t s ( ) ; 
                     } 
                     m o d u l e . b i n d . m o u s e E v e n t s ( ) ; 
                     m o d u l e . i n s t a n t i a t e ( ) ; 
                 } , 
 
                 i n s t a n t i a t e :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' S t o r i n g   i n s t a n c e   o f   d r o p d o w n ' ,   m o d u l e ) ; 
                     i n s t a n c e   =   m o d u l e ; 
                     $ m o d u l e 
                         . d a t a ( m o d u l e N a m e s p a c e ,   m o d u l e ) 
                     ; 
                 } , 
 
                 d e s t r o y :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' D e s t r o y i n g   p r e v i o u s   d r o p d o w n   f o r ' ,   $ m o d u l e ) ; 
                     $ i t e m 
                         . o f f ( e v e n t N a m e s p a c e ) 
                     ; 
                     $ m o d u l e 
                         . o f f ( e v e n t N a m e s p a c e ) 
                         . r e m o v e D a t a ( m o d u l e N a m e s p a c e ) 
                     ; 
                 } , 
 
                 b i n d :   { 
                     t o u c h E v e n t s :   f u n c t i o n ( )   { 
                         m o d u l e . d e b u g ( ' T o u c h   d e v i c e   d e t e c t e d   b i n d i n g   t o u c h   e v e n t s ' ) ; 
                         $ m o d u l e 
                             . o n ( ' t o u c h s t a r t '   +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . t e s t . t o g g l e ) 
                         ; 
                         $ i t e m 
                             . o n ( ' t o u c h s t a r t '   +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . i t e m . m o u s e e n t e r ) 
                             . o n ( ' t o u c h s t a r t '   +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . i t e m . c l i c k ) 
                         ; 
                     } , 
                     m o u s e E v e n t s :   f u n c t i o n ( )   { 
                         m o d u l e . v e r b o s e ( ' M o u s e   d e t e c t e d   b i n d i n g   m o u s e   e v e n t s ' ) ; 
                         i f ( s e t t i n g s . o n   = =   ' c l i c k ' )   { 
                             $ m o d u l e 
                                 . o n ( ' c l i c k '   +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . t e s t . t o g g l e ) 
                             ; 
                         } 
                         e l s e   i f ( s e t t i n g s . o n   = =   ' h o v e r ' )   { 
                             $ m o d u l e 
                                 . o n ( ' m o u s e e n t e r '   +   e v e n t N a m e s p a c e ,   m o d u l e . d e l a y . s h o w ) 
                                 . o n ( ' m o u s e l e a v e '   +   e v e n t N a m e s p a c e ,   m o d u l e . d e l a y . h i d e ) 
                             ; 
                         } 
                         e l s e   { 
                             $ m o d u l e 
                                 . o n ( s e t t i n g s . o n   +   e v e n t N a m e s p a c e ,   m o d u l e . t o g g l e ) 
                             ; 
                         } 
                         $ i t e m 
                             . o n ( ' m o u s e e n t e r '   +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . i t e m . m o u s e e n t e r ) 
                             . o n ( ' m o u s e l e a v e '   +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . i t e m . m o u s e l e a v e ) 
                             . o n ( ' c l i c k '             +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . i t e m . c l i c k ) 
                         ; 
                     } , 
                     i n t e n t :   f u n c t i o n ( )   { 
                         m o d u l e . v e r b o s e ( ' B i n d i n g   h i d e   i n t e n t   e v e n t   t o   d o c u m e n t ' ) ; 
                         i f ( h a s T o u c h )   { 
                             $ d o c u m e n t 
                                 . o n ( ' t o u c h s t a r t '   +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . t e s t . t o u c h ) 
                                 . o n ( ' t o u c h m o v e '     +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . t e s t . t o u c h ) 
                             ; 
                         } 
                         $ d o c u m e n t 
                             . o n ( ' c l i c k '   +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . t e s t . h i d e ) 
                         ; 
                     } 
                 } , 
 
                 u n b i n d :   { 
                     i n t e n t :   f u n c t i o n ( )   { 
                         m o d u l e . v e r b o s e ( ' R e m o v i n g   h i d e   i n t e n t   e v e n t   f r o m   d o c u m e n t ' ) ; 
                         i f ( h a s T o u c h )   { 
                             $ d o c u m e n t 
                                 . o f f ( ' t o u c h s t a r t '   +   e v e n t N a m e s p a c e ) 
                                 . o f f ( ' t o u c h m o v e '   +   e v e n t N a m e s p a c e ) 
                             ; 
                         } 
                         $ d o c u m e n t 
                             . o f f ( ' c l i c k '   +   e v e n t N a m e s p a c e ) 
                         ; 
                     } 
                 } , 
 
                 e v e n t :   { 
                     t e s t :   { 
                         t o g g l e :   f u n c t i o n ( e v e n t )   { 
                             i f (   m o d u l e . d e t e r m i n e . i n t e n t ( e v e n t ,   m o d u l e . t o g g l e )   )   { 
                                 e v e n t . p r e v e n t D e f a u l t ( ) ; 
                             } 
                         } , 
                         t o u c h :   f u n c t i o n ( e v e n t )   { 
                             m o d u l e . d e t e r m i n e . i n t e n t ( e v e n t ,   f u n c t i o n ( )   { 
                                 i f ( e v e n t . t y p e   = =   ' t o u c h s t a r t ' )   { 
                                     m o d u l e . t i m e r   =   s e t T i m e o u t ( m o d u l e . h i d e ,   s e t t i n g s . d e l a y . t o u c h ) ; 
                                 } 
                                 e l s e   i f ( e v e n t . t y p e   = =   ' t o u c h m o v e ' )   { 
                                     c l e a r T i m e o u t ( m o d u l e . t i m e r ) ; 
                                 } 
                             } ) ; 
                             e v e n t . s t o p P r o p a g a t i o n ( ) ; 
                         } , 
                         h i d e :   f u n c t i o n ( e v e n t )   { 
                             m o d u l e . d e t e r m i n e . i n t e n t ( e v e n t ,   m o d u l e . h i d e ) ; 
                         } 
                     } , 
 
                     i t e m :   { 
 
                         m o u s e e n t e r :   f u n c t i o n ( e v e n t )   { 
                             v a r 
                                 $ c u r r e n t M e n u   =   $ ( t h i s ) . f i n d ( s e l e c t o r . m e n u ) , 
                                 $ o t h e r M e n u s     =   $ ( t h i s ) . s i b l i n g s ( s e l e c t o r . i t e m ) . c h i l d r e n ( s e l e c t o r . m e n u ) 
                             ; 
                             i f (   $ c u r r e n t M e n u . s i z e ( )   >   0   )   { 
                                 c l e a r T i m e o u t ( m o d u l e . i t e m T i m e r ) ; 
                                 m o d u l e . i t e m T i m e r   =   s e t T i m e o u t ( f u n c t i o n ( )   { 
                                     m o d u l e . a n i m a t e . h i d e ( f a l s e ,   $ o t h e r M e n u s ) ; 
                                     m o d u l e . v e r b o s e ( ' S h o w i n g   s u b - m e n u ' ,   $ c u r r e n t M e n u ) ; 
                                     m o d u l e . a n i m a t e . s h o w ( f a l s e ,     $ c u r r e n t M e n u ) ; 
                                 } ,   s e t t i n g s . d e l a y . s h o w   *   2 ) ; 
                                 e v e n t . p r e v e n t D e f a u l t ( ) ; 
                             } 
                         } , 
 
                         m o u s e l e a v e :   f u n c t i o n ( e v e n t )   { 
                             v a r 
                                 $ c u r r e n t M e n u   =   $ ( t h i s ) . f i n d ( s e l e c t o r . m e n u ) 
                             ; 
                             i f ( $ c u r r e n t M e n u . s i z e ( )   >   0 )   { 
                                 c l e a r T i m e o u t ( m o d u l e . i t e m T i m e r ) ; 
                                 m o d u l e . i t e m T i m e r   =   s e t T i m e o u t ( f u n c t i o n ( )   { 
                                     m o d u l e . v e r b o s e ( ' H i d i n g   s u b - m e n u ' ,   $ c u r r e n t M e n u ) ; 
                                     m o d u l e . a n i m a t e . h i d e ( f a l s e ,     $ c u r r e n t M e n u ) ; 
                                 } ,   s e t t i n g s . d e l a y . h i d e ) ; 
                             } 
                         } , 
 
                         c l i c k :   f u n c t i o n   ( e v e n t )   { 
                             v a r 
                                 $ c h o i c e   =   $ ( t h i s ) , 
                                 t e x t         =   (   $ c h o i c e . d a t a ( m e t a d a t a . t e x t )   ! = =   u n d e f i n e d   ) 
                                     ?   $ c h o i c e . d a t a ( m e t a d a t a . t e x t ) 
                                     :   $ c h o i c e . t e x t ( ) , 
                                 v a l u e       =   (   $ c h o i c e . d a t a ( m e t a d a t a . v a l u e )   ! = =   u n d e f i n e d ) 
                                     ?   $ c h o i c e . d a t a ( m e t a d a t a . v a l u e ) 
                                     :   ( t y p e o f   t e x t   = = =   ' s t r i n g ' ) 
                                             ?   t e x t . t o L o w e r C a s e ( ) 
                                             :   t e x t , 
                                 c a l l b a c k   =   f u n c t i o n ( )   { 
                                     m o d u l e . d e t e r m i n e . s e l e c t A c t i o n ( t e x t ,   v a l u e ) ; 
                                     $ . p r o x y ( s e t t i n g s . o n C h a n g e ,   e l e m e n t ) ( v a l u e ,   t e x t ) ; 
                                 } 
                             ; 
                             i f (   $ c h o i c e . f i n d ( s e l e c t o r . m e n u ) . s i z e ( )   = = =   0   )   { 
                                 i f ( e v e n t . t y p e   = =   ' t o u c h s t a r t ' )   { 
                                     $ c h o i c e . o n e ( ' c l i c k ' ,   c a l l b a c k ) ; 
                                 } 
                                 e l s e   { 
                                     c a l l b a c k ( ) ; 
                                 } 
                             } 
                         } 
 
                     } , 
 
                     r e s e t S t y l e :   f u n c t i o n ( )   { 
                         $ ( t h i s ) . r e m o v e A t t r ( ' s t y l e ' ) ; 
                     } 
 
                 } , 
 
                 d e t e r m i n e :   { 
                     s e l e c t A c t i o n :   f u n c t i o n ( t e x t ,   v a l u e )   { 
                         m o d u l e . v e r b o s e ( ' D e t e r m i n i n g   a c t i o n ' ,   s e t t i n g s . a c t i o n ) ; 
                         i f (   $ . i s F u n c t i o n (   m o d u l e . a c t i o n [ s e t t i n g s . a c t i o n ]   )   )   { 
                             m o d u l e . v e r b o s e ( ' T r i g g e r i n g   p r e s e t   a c t i o n ' ,   s e t t i n g s . a c t i o n ,   t e x t ,   v a l u e ) ; 
                             m o d u l e . a c t i o n [   s e t t i n g s . a c t i o n   ] ( t e x t ,   v a l u e ) ; 
                         } 
                         e l s e   i f (   $ . i s F u n c t i o n ( s e t t i n g s . a c t i o n )   )   { 
                             m o d u l e . v e r b o s e ( ' T r i g g e r i n g   u s e r   a c t i o n ' ,   s e t t i n g s . a c t i o n ,   t e x t ,   v a l u e ) ; 
                             s e t t i n g s . a c t i o n ( t e x t ,   v a l u e ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . e r r o r ( e r r o r . a c t i o n ,   s e t t i n g s . a c t i o n ) ; 
                         } 
                     } , 
                     i n t e n t :   f u n c t i o n ( e v e n t ,   c a l l b a c k )   { 
                         m o d u l e . d e b u g ( ' D e t e r m i n i n g   w h e t h e r   e v e n t   o c c u r r e d   i n   d r o p d o w n ' ,   e v e n t . t a r g e t ) ; 
                         c a l l b a c k   =   c a l l b a c k   | |   f u n c t i o n ( ) { } ; 
                         i f (   $ ( e v e n t . t a r g e t ) . c l o s e s t ( $ m e n u ) . s i z e ( )   = = =   0   )   { 
                             m o d u l e . v e r b o s e ( ' T r i g g e r i n g   e v e n t ' ,   c a l l b a c k ) ; 
                             c a l l b a c k ( ) ; 
                             r e t u r n   t r u e ; 
                         } 
                         e l s e   { 
                             m o d u l e . v e r b o s e ( ' E v e n t   o c c u r r e d   i n   d r o p d o w n ,   c a n c e l i n g   c a l l b a c k ' ) ; 
                             r e t u r n   f a l s e ; 
                         } 
                     } 
                 } , 
 
                 a c t i o n :   { 
 
                     n o t h i n g :   f u n c t i o n ( )   { } , 
 
                     h i d e :   f u n c t i o n ( )   { 
                         m o d u l e . h i d e ( ) ; 
                     } , 
 
                     a c t i v a t e :   f u n c t i o n ( t e x t ,   v a l u e )   { 
                         v a l u e   =   ( v a l u e   ! = =   u n d e f i n e d ) 
                             ?   v a l u e 
                             :   t e x t 
                         ; 
                         m o d u l e . s e t . s e l e c t e d ( v a l u e ) ; 
                         m o d u l e . s e t . v a l u e ( v a l u e ) ; 
                         m o d u l e . h i d e ( ) ; 
                     } , 
 
                     / *   D e p r e c a t e d   * / 
                     a u t o :   f u n c t i o n ( t e x t ,   v a l u e )   { 
                         v a l u e   =   ( v a l u e   ! = =   u n d e f i n e d ) 
                             ?   v a l u e 
                             :   t e x t 
                         ; 
                         m o d u l e . s e t . s e l e c t e d ( v a l u e ) ; 
                         m o d u l e . s e t . v a l u e ( v a l u e ) ; 
                         m o d u l e . h i d e ( ) ; 
                     } , 
 
                     / *   D e p r e c a t e d   * / 
                     c h a n g e T e x t :   f u n c t i o n ( t e x t ,   v a l u e )   { 
                         v a l u e   =   ( v a l u e   ! = =   u n d e f i n e d ) 
                             ?   v a l u e 
                             :   t e x t 
                         ; 
                         m o d u l e . s e t . s e l e c t e d ( v a l u e ) ; 
                         m o d u l e . h i d e ( ) ; 
                     } , 
 
                     / *   D e p r e c a t e d   * / 
                     u p d a t e F o r m :   f u n c t i o n ( t e x t ,   v a l u e )   { 
                         v a l u e   =   ( v a l u e   ! = =   u n d e f i n e d ) 
                             ?   v a l u e 
                             :   t e x t 
                         ; 
                         m o d u l e . s e t . s e l e c t e d ( v a l u e ) ; 
                         m o d u l e . s e t . v a l u e ( v a l u e ) ; 
                         m o d u l e . h i d e ( ) ; 
                     } 
 
                 } , 
 
                 g e t :   { 
                     t e x t :   f u n c t i o n ( )   { 
                         r e t u r n   $ t e x t . t e x t ( ) ; 
                     } , 
                     v a l u e :   f u n c t i o n ( )   { 
                         r e t u r n   ( $ i n p u t . s i z e ( )   >   0 ) 
                             ?   $ i n p u t . v a l ( ) 
                             :   $ m o d u l e . d a t a ( m e t a d a t a . v a l u e ) 
                         ; 
                     } , 
                     i t e m :   f u n c t i o n ( v a l u e ,   s t r i c t )   { 
                         v a r 
                             $ s e l e c t e d I t e m   =   f a l s e 
                         ; 
                         v a l u e   =   ( v a l u e   ! = =   u n d e f i n e d ) 
                             ?   v a l u e 
                             :   (   m o d u l e . g e t . v a l u e ( )   ! = =   u n d e f i n e d ) 
                                 ?   m o d u l e . g e t . v a l u e ( ) 
                                 :   m o d u l e . g e t . t e x t ( ) 
                         ; 
                         i f ( s t r i c t   = = =   u n d e f i n e d   & &   v a l u e   = = =   ' ' )   { 
                             m o d u l e . d e b u g ( ' A m b i g u o u s   d r o p d o w n   v a l u e   u s i n g   s t r i c t   t y p e   c h e c k ' ,   v a l u e ) ; 
                             s t r i c t   =   t r u e ; 
                         } 
                         e l s e   { 
                             s t r i c t   =   s t r i c t   | |   f a l s e ; 
                         } 
                         i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                             $ i t e m 
                                 . e a c h ( f u n c t i o n ( )   { 
                                     v a r 
                                         $ c h o i c e               =   $ ( t h i s ) , 
                                         o p t i o n T e x t         =   (   $ c h o i c e . d a t a ( m e t a d a t a . t e x t )   ! = =   u n d e f i n e d   ) 
                                             ?   $ c h o i c e . d a t a ( m e t a d a t a . t e x t ) 
                                             :   $ c h o i c e . t e x t ( ) , 
                                         o p t i o n V a l u e       =   (   $ c h o i c e . d a t a ( m e t a d a t a . v a l u e )   ! = =   u n d e f i n e d   ) 
                                             ?   $ c h o i c e . d a t a ( m e t a d a t a . v a l u e ) 
                                             :   ( t y p e o f   o p t i o n T e x t   = = =   ' s t r i n g ' ) 
                                                 ?   o p t i o n T e x t . t o L o w e r C a s e ( ) 
                                                 :   o p t i o n T e x t 
                                     ; 
                                     i f ( s t r i c t )   { 
                                         i f (   o p t i o n V a l u e   = = =   v a l u e   )   { 
                                             $ s e l e c t e d I t e m   =   $ ( t h i s ) ; 
                                         } 
                                         e l s e   i f (   ! $ s e l e c t e d I t e m   & &   o p t i o n T e x t   = = =   v a l u e   )   { 
                                             $ s e l e c t e d I t e m   =   $ ( t h i s ) ; 
                                         } 
                                     } 
                                     e l s e   { 
                                         i f (   o p t i o n V a l u e   = =   v a l u e   )   { 
                                             $ s e l e c t e d I t e m   =   $ ( t h i s ) ; 
                                         } 
                                         e l s e   i f (   ! $ s e l e c t e d I t e m   & &   o p t i o n T e x t   = =   v a l u e   )   { 
                                             $ s e l e c t e d I t e m   =   $ ( t h i s ) ; 
                                         } 
                                     } 
                                 } ) 
                             ; 
                         } 
                         e l s e   { 
                             v a l u e   =   m o d u l e . g e t . t e x t ( ) ; 
                         } 
                         r e t u r n   $ s e l e c t e d I t e m   | |   f a l s e ; 
                     } 
                 } , 
 
                 r e s t o r e :   { 
                     d e f a u l t s :   f u n c t i o n ( )   { 
                         m o d u l e . r e s t o r e . d e f a u l t T e x t ( ) ; 
                         m o d u l e . r e s t o r e . d e f a u l t V a l u e ( ) ; 
                     } , 
                     d e f a u l t T e x t :   f u n c t i o n ( )   { 
                         v a r 
                             d e f a u l t T e x t   =   $ m o d u l e . d a t a ( m e t a d a t a . d e f a u l t T e x t ) 
                         ; 
                         m o d u l e . d e b u g ( ' R e s t o r i n g   d e f a u l t   t e x t ' ,   d e f a u l t T e x t ) ; 
                         m o d u l e . s e t . t e x t ( d e f a u l t T e x t ) ; 
                     } , 
                     d e f a u l t V a l u e :   f u n c t i o n ( )   { 
                         v a r 
                             d e f a u l t V a l u e   =   $ m o d u l e . d a t a ( m e t a d a t a . d e f a u l t V a l u e ) 
                         ; 
                         i f ( d e f a u l t V a l u e   ! = =   u n d e f i n e d )   { 
                             m o d u l e . d e b u g ( ' R e s t o r i n g   d e f a u l t   v a l u e ' ,   d e f a u l t V a l u e ) ; 
                             m o d u l e . s e t . s e l e c t e d ( d e f a u l t V a l u e ) ; 
                             m o d u l e . s e t . v a l u e ( d e f a u l t V a l u e ) ; 
                         } 
                     } 
                 } , 
 
                 s a v e :   { 
                     d e f a u l t s :   f u n c t i o n ( )   { 
                         m o d u l e . s a v e . d e f a u l t T e x t ( ) ; 
                         m o d u l e . s a v e . d e f a u l t V a l u e ( ) ; 
                     } , 
                     d e f a u l t V a l u e :   f u n c t i o n ( )   { 
                         $ m o d u l e . d a t a ( m e t a d a t a . d e f a u l t V a l u e ,   m o d u l e . g e t . v a l u e ( )   ) ; 
                     } , 
                     d e f a u l t T e x t :   f u n c t i o n ( )   { 
                         $ m o d u l e . d a t a ( m e t a d a t a . d e f a u l t T e x t ,   $ t e x t . t e x t ( )   ) ; 
                     } 
                 } , 
 
                 s e t :   { 
                     t e x t :   f u n c t i o n ( t e x t )   { 
                         m o d u l e . d e b u g ( ' C h a n g i n g   t e x t ' ,   t e x t ,   $ t e x t ) ; 
                         $ t e x t . r e m o v e C l a s s ( c l a s s N a m e . p l a c e h o l d e r ) ; 
                         $ t e x t . t e x t ( t e x t ) ; 
                     } , 
                     v a l u e :   f u n c t i o n ( v a l u e )   { 
                         m o d u l e . d e b u g ( ' A d d i n g   s e l e c t e d   v a l u e   t o   h i d d e n   i n p u t ' ,   v a l u e ,   $ i n p u t ) ; 
                         i f ( $ i n p u t . s i z e ( )   >   0 )   { 
                             $ i n p u t 
                                 . v a l ( v a l u e ) 
                                 . t r i g g e r ( ' c h a n g e ' ) 
                             ; 
                         } 
                         e l s e   { 
                             $ m o d u l e . d a t a ( m e t a d a t a . v a l u e ,   v a l u e ) ; 
                         } 
                     } , 
                     a c t i v e :   f u n c t i o n ( )   { 
                         $ m o d u l e . a d d C l a s s ( c l a s s N a m e . a c t i v e ) ; 
                     } , 
                     v i s i b l e :   f u n c t i o n ( )   { 
                         $ m o d u l e . a d d C l a s s ( c l a s s N a m e . v i s i b l e ) ; 
                     } , 
                     s e l e c t e d :   f u n c t i o n ( v a l u e )   { 
                         v a r 
                             $ s e l e c t e d I t e m   =   m o d u l e . g e t . i t e m ( v a l u e ) , 
                             s e l e c t e d T e x t 
                         ; 
                         i f ( $ s e l e c t e d I t e m )   { 
                             m o d u l e . d e b u g ( ' S e t t i n g   s e l e c t e d   m e n u   i t e m   t o ' ,   $ s e l e c t e d I t e m ) ; 
                             s e l e c t e d T e x t   =   ( $ s e l e c t e d I t e m . d a t a ( m e t a d a t a . t e x t )   ! = =   u n d e f i n e d ) 
                                 ?   $ s e l e c t e d I t e m . d a t a ( m e t a d a t a . t e x t ) 
                                 :   $ s e l e c t e d I t e m . t e x t ( ) 
                             ; 
                             $ i t e m 
                                 . r e m o v e C l a s s ( c l a s s N a m e . a c t i v e ) 
                             ; 
                             $ s e l e c t e d I t e m 
                                 . a d d C l a s s ( c l a s s N a m e . a c t i v e ) 
                             ; 
                             m o d u l e . s e t . t e x t ( s e l e c t e d T e x t ) ; 
                         } 
                     } 
                 } , 
 
                 r e m o v e :   { 
                     a c t i v e :   f u n c t i o n ( )   { 
                         $ m o d u l e . r e m o v e C l a s s ( c l a s s N a m e . a c t i v e ) ; 
                     } , 
                     v i s i b l e :   f u n c t i o n ( )   { 
                         $ m o d u l e . r e m o v e C l a s s ( c l a s s N a m e . v i s i b l e ) ; 
                     } 
                 } , 
 
                 i s :   { 
                     s e l e c t i o n :   f u n c t i o n ( )   { 
                         r e t u r n   $ m o d u l e . h a s C l a s s ( c l a s s N a m e . s e l e c t i o n ) ; 
                     } , 
                     a n i m a t e d :   f u n c t i o n ( $ s u b M e n u )   { 
                         r e t u r n   ( $ s u b M e n u ) 
                             ?   $ s u b M e n u . i s ( ' : a n i m a t e d ' )   | |   $ s u b M e n u . t r a n s i t i o n ( ' i s   a n i m a t i n g ' ) 
                             :   $ m e n u . i s ( ' : a n i m a t e d ' )   | |   $ m e n u . t r a n s i t i o n ( ' i s   a n i m a t i n g ' ) 
                         ; 
                     } , 
                     v i s i b l e :   f u n c t i o n ( $ s u b M e n u )   { 
                         r e t u r n   ( $ s u b M e n u ) 
                             ?   $ s u b M e n u . i s ( ' : v i s i b l e ' ) 
                             :   $ m e n u . i s ( ' : v i s i b l e ' ) 
                         ; 
                     } , 
                     h i d d e n :   f u n c t i o n ( $ s u b M e n u )   { 
                         r e t u r n   ( $ s u b M e n u ) 
                             ?   $ s u b M e n u . i s ( ' : n o t ( : v i s i b l e ) ' ) 
                             :   $ m e n u . i s ( ' : n o t ( : v i s i b l e ) ' ) 
                         ; 
                     } 
                 } , 
 
                 c a n :   { 
                     c l i c k :   f u n c t i o n ( )   { 
                         r e t u r n   ( h a s T o u c h   | |   s e t t i n g s . o n   = =   ' c l i c k ' ) ; 
                     } , 
                     s h o w :   f u n c t i o n ( )   { 
                         r e t u r n   ! $ m o d u l e . h a s C l a s s ( c l a s s N a m e . d i s a b l e d ) ; 
                     } 
                 } , 
 
                 a n i m a t e :   { 
                     s h o w :   f u n c t i o n ( c a l l b a c k ,   $ s u b M e n u )   { 
                         v a r 
                             $ c u r r e n t M e n u   =   $ s u b M e n u   | |   $ m e n u 
                         ; 
                         c a l l b a c k   =   c a l l b a c k   | |   f u n c t i o n ( ) { } ; 
                         i f (   m o d u l e . i s . h i d d e n ( $ c u r r e n t M e n u )   )   { 
                             m o d u l e . v e r b o s e ( ' D o i n g   m e n u   s h o w   a n i m a t i o n ' ,   $ c u r r e n t M e n u ) ; 
                             i f ( s e t t i n g s . t r a n s i t i o n   = =   ' n o n e ' )   { 
                                 c a l l b a c k ( ) ; 
                             } 
                             e l s e   i f ( $ . f n . t r a n s i t i o n   ! = =   u n d e f i n e d   & &   $ m o d u l e . t r a n s i t i o n ( ' i s   s u p p o r t e d ' ) )   { 
                                 $ c u r r e n t M e n u 
                                     . t r a n s i t i o n ( { 
                                         a n i m a t i o n   :   s e t t i n g s . t r a n s i t i o n   +   '   i n ' , 
                                         d u r a t i o n     :   s e t t i n g s . d u r a t i o n , 
                                         c o m p l e t e     :   c a l l b a c k , 
                                         q u e u e           :   f a l s e 
                                     } ) 
                                 ; 
                             } 
                             e l s e   i f ( s e t t i n g s . t r a n s i t i o n   = =   ' s l i d e   d o w n ' )   { 
                                 $ c u r r e n t M e n u 
                                     . h i d e ( ) 
                                     . c l e a r Q u e u e ( ) 
                                     . c h i l d r e n ( ) 
                                         . c l e a r Q u e u e ( ) 
                                         . c s s ( ' o p a c i t y ' ,   0 ) 
                                         . d e l a y ( 5 0 ) 
                                         . a n i m a t e ( { 
                                             o p a c i t y   :   1 
                                         } ,   s e t t i n g s . d u r a t i o n ,   ' e a s e O u t Q u a d ' ,   m o d u l e . e v e n t . r e s e t S t y l e ) 
                                         . e n d ( ) 
                                     . s l i d e D o w n ( 1 0 0 ,   ' e a s e O u t Q u a d ' ,   f u n c t i o n ( )   { 
                                         $ . p r o x y ( m o d u l e . e v e n t . r e s e t S t y l e ,   t h i s ) ( ) ; 
                                         c a l l b a c k ( ) ; 
                                     } ) 
                                 ; 
                             } 
                             e l s e   i f ( s e t t i n g s . t r a n s i t i o n   = =   ' f a d e ' )   { 
                                 $ c u r r e n t M e n u 
                                     . h i d e ( ) 
                                     . c l e a r Q u e u e ( ) 
                                     . f a d e I n ( s e t t i n g s . d u r a t i o n ,   f u n c t i o n ( )   { 
                                         $ . p r o x y ( m o d u l e . e v e n t . r e s e t S t y l e ,   t h i s ) ( ) ; 
                                         c a l l b a c k ( ) ; 
                                     } ) 
                                 ; 
                             } 
                             e l s e   { 
                                 m o d u l e . e r r o r ( e r r o r . t r a n s i t i o n ,   s e t t i n g s . t r a n s i t i o n ) ; 
                             } 
                         } 
                     } , 
                     h i d e :   f u n c t i o n ( c a l l b a c k ,   $ s u b M e n u )   { 
                         v a r 
                             $ c u r r e n t M e n u   =   $ s u b M e n u   | |   $ m e n u 
                         ; 
                         c a l l b a c k   =   c a l l b a c k   | |   f u n c t i o n ( ) { } ; 
                         i f ( m o d u l e . i s . v i s i b l e ( $ c u r r e n t M e n u )   )   { 
                             m o d u l e . v e r b o s e ( ' D o i n g   m e n u   h i d e   a n i m a t i o n ' ,   $ c u r r e n t M e n u ) ; 
                             i f ( $ . f n . t r a n s i t i o n   ! = =   u n d e f i n e d   & &   $ m o d u l e . t r a n s i t i o n ( ' i s   s u p p o r t e d ' ) )   { 
                                 $ c u r r e n t M e n u 
                                     . t r a n s i t i o n ( { 
                                         a n i m a t i o n   :   s e t t i n g s . t r a n s i t i o n   +   '   o u t ' , 
                                         d u r a t i o n     :   s e t t i n g s . d u r a t i o n , 
                                         c o m p l e t e     :   c a l l b a c k , 
                                         q u e u e           :   f a l s e 
                                     } ) 
                                 ; 
                             } 
                             e l s e   i f ( s e t t i n g s . t r a n s i t i o n   = =   ' n o n e ' )   { 
                                 c a l l b a c k ( ) ; 
                             } 
                             e l s e   i f ( s e t t i n g s . t r a n s i t i o n   = =   ' s l i d e   d o w n ' )   { 
                                 $ c u r r e n t M e n u 
                                     . s h o w ( ) 
                                     . c l e a r Q u e u e ( ) 
                                     . c h i l d r e n ( ) 
                                         . c l e a r Q u e u e ( ) 
                                         . c s s ( ' o p a c i t y ' ,   1 ) 
                                         . a n i m a t e ( { 
                                             o p a c i t y   :   0 
                                         } ,   1 0 0 ,   ' e a s e O u t Q u a d ' ,   m o d u l e . e v e n t . r e s e t S t y l e ) 
                                         . e n d ( ) 
                                     . d e l a y ( 5 0 ) 
                                     . s l i d e U p ( 1 0 0 ,   ' e a s e O u t Q u a d ' ,   f u n c t i o n ( )   { 
                                         $ . p r o x y ( m o d u l e . e v e n t . r e s e t S t y l e ,   t h i s ) ( ) ; 
                                         c a l l b a c k ( ) ; 
                                     } ) 
                                 ; 
                             } 
                             e l s e   i f ( s e t t i n g s . t r a n s i t i o n   = =   ' f a d e ' )   { 
                                 $ c u r r e n t M e n u 
                                     . s h o w ( ) 
                                     . c l e a r Q u e u e ( ) 
                                     . f a d e O u t ( 1 5 0 ,   f u n c t i o n ( )   { 
                                         $ . p r o x y ( m o d u l e . e v e n t . r e s e t S t y l e ,   t h i s ) ( ) ; 
                                         c a l l b a c k ( ) ; 
                                     } ) 
                                 ; 
                             } 
                             e l s e   { 
                                 m o d u l e . e r r o r ( e r r o r . t r a n s i t i o n ) ; 
                             } 
                         } 
                     } 
                 } , 
 
                 s h o w :   f u n c t i o n ( )   { 
                     m o d u l e . d e b u g ( ' C h e c k i n g   i f   d r o p d o w n   c a n   s h o w ' ) ; 
                     i f (   m o d u l e . i s . h i d d e n ( )   )   { 
                         m o d u l e . h i d e O t h e r s ( ) ; 
                         m o d u l e . s e t . a c t i v e ( ) ; 
                         m o d u l e . a n i m a t e . s h o w ( f u n c t i o n ( )   { 
                             i f (   m o d u l e . c a n . c l i c k ( )   )   { 
                                 m o d u l e . b i n d . i n t e n t ( ) ; 
                             } 
                             m o d u l e . s e t . v i s i b l e ( ) ; 
                         } ) ; 
                         $ . p r o x y ( s e t t i n g s . o n S h o w ,   e l e m e n t ) ( ) ; 
                     } 
                 } , 
 
                 h i d e :   f u n c t i o n ( )   { 
                     i f (   ! m o d u l e . i s . a n i m a t e d ( )   & &   m o d u l e . i s . v i s i b l e ( )   )   { 
                         m o d u l e . d e b u g ( ' H i d i n g   d r o p d o w n ' ) ; 
                         i f (   m o d u l e . c a n . c l i c k ( )   )   { 
                             m o d u l e . u n b i n d . i n t e n t ( ) ; 
                         } 
                         m o d u l e . r e m o v e . a c t i v e ( ) ; 
                         m o d u l e . a n i m a t e . h i d e ( m o d u l e . r e m o v e . v i s i b l e ) ; 
                         $ . p r o x y ( s e t t i n g s . o n H i d e ,   e l e m e n t ) ( ) ; 
                     } 
                 } , 
 
                 d e l a y :   { 
                     s h o w :   f u n c t i o n ( )   { 
                         m o d u l e . v e r b o s e ( ' D e l a y i n g   s h o w   e v e n t   t o   e n s u r e   u s e r   i n t e n t ' ) ; 
                         c l e a r T i m e o u t ( m o d u l e . t i m e r ) ; 
                         m o d u l e . t i m e r   =   s e t T i m e o u t ( m o d u l e . s h o w ,   s e t t i n g s . d e l a y . s h o w ) ; 
                     } , 
                     h i d e :   f u n c t i o n ( )   { 
                         m o d u l e . v e r b o s e ( ' D e l a y i n g   h i d e   e v e n t   t o   e n s u r e   u s e r   i n t e n t ' ) ; 
                         c l e a r T i m e o u t ( m o d u l e . t i m e r ) ; 
                         m o d u l e . t i m e r   =   s e t T i m e o u t ( m o d u l e . h i d e ,   s e t t i n g s . d e l a y . h i d e ) ; 
                     } 
                 } , 
 
                 h i d e O t h e r s :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' F i n d i n g   o t h e r   d r o p d o w n s   t o   h i d e ' ) ; 
                     $ a l l M o d u l e s 
                         . n o t ( $ m o d u l e ) 
                             . h a s ( s e l e c t o r . m e n u   +   ' : v i s i b l e ' ) 
                             . d r o p d o w n ( ' h i d e ' ) 
                     ; 
                 } , 
 
                 t o g g l e :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' T o g g l i n g   m e n u   v i s i b i l i t y ' ) ; 
                     i f (   m o d u l e . i s . h i d d e n ( )   )   { 
                         m o d u l e . s h o w ( ) ; 
                     } 
                     e l s e   { 
                         m o d u l e . h i d e ( ) ; 
                     } 
                 } , 
 
                 s e t t i n g :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                     i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                         $ . e x t e n d ( t r u e ,   s e t t i n g s ,   n a m e ) ; 
                     } 
                     e l s e   i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                         s e t t i n g s [ n a m e ]   =   v a l u e ; 
                     } 
                     e l s e   { 
                         r e t u r n   s e t t i n g s [ n a m e ] ; 
                     } 
                 } , 
                 i n t e r n a l :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                     i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                         $ . e x t e n d ( t r u e ,   m o d u l e ,   n a m e ) ; 
                     } 
                     e l s e   i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                         m o d u l e [ n a m e ]   =   v a l u e ; 
                     } 
                     e l s e   { 
                         r e t u r n   m o d u l e [ n a m e ] ; 
                     } 
                 } , 
                 d e b u g :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . d e b u g )   { 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . d e b u g   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                             m o d u l e . d e b u g . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                         } 
                     } 
                 } , 
                 v e r b o s e :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . v e r b o s e   & &   s e t t i n g s . d e b u g )   { 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . v e r b o s e   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                             m o d u l e . v e r b o s e . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                         } 
                     } 
                 } , 
                 e r r o r :   f u n c t i o n ( )   { 
                     m o d u l e . e r r o r   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . e r r o r ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                     m o d u l e . e r r o r . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                 } , 
                 p e r f o r m a n c e :   { 
                     l o g :   f u n c t i o n ( m e s s a g e )   { 
                         v a r 
                             c u r r e n t T i m e , 
                             e x e c u t i o n T i m e , 
                             p r e v i o u s T i m e 
                         ; 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             c u r r e n t T i m e       =   n e w   D a t e ( ) . g e t T i m e ( ) ; 
                             p r e v i o u s T i m e     =   t i m e   | |   c u r r e n t T i m e ; 
                             e x e c u t i o n T i m e   =   c u r r e n t T i m e   -   p r e v i o u s T i m e ; 
                             t i m e                     =   c u r r e n t T i m e ; 
                             p e r f o r m a n c e . p u s h ( { 
                                 ' E l e m e n t '                 :   e l e m e n t , 
                                 ' N a m e '                       :   m e s s a g e [ 0 ] , 
                                 ' A r g u m e n t s '             :   [ ] . s l i c e . c a l l ( m e s s a g e ,   1 )   | |   ' ' , 
                                 ' E x e c u t i o n   T i m e '   :   e x e c u t i o n T i m e 
                             } ) ; 
                         } 
                         c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                         m o d u l e . p e r f o r m a n c e . t i m e r   =   s e t T i m e o u t ( m o d u l e . p e r f o r m a n c e . d i s p l a y ,   1 0 0 ) ; 
                     } , 
                     d i s p l a y :   f u n c t i o n ( )   { 
                         v a r 
                             t i t l e   =   s e t t i n g s . n a m e   +   ' : ' , 
                             t o t a l T i m e   =   0 
                         ; 
                         t i m e   =   f a l s e ; 
                         c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                         $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                             t o t a l T i m e   + =   d a t a [ ' E x e c u t i o n   T i m e ' ] ; 
                         } ) ; 
                         t i t l e   + =   '   '   +   t o t a l T i m e   +   ' m s ' ; 
                         i f ( m o d u l e S e l e c t o r )   { 
                             t i t l e   + =   '   \ ' '   +   m o d u l e S e l e c t o r   +   ' \ ' ' ; 
                         } 
                         i f (   ( c o n s o l e . g r o u p   ! = =   u n d e f i n e d   | |   c o n s o l e . t a b l e   ! = =   u n d e f i n e d )   & &   p e r f o r m a n c e . l e n g t h   >   0 )   { 
                             c o n s o l e . g r o u p C o l l a p s e d ( t i t l e ) ; 
                             i f ( c o n s o l e . t a b l e )   { 
                                 c o n s o l e . t a b l e ( p e r f o r m a n c e ) ; 
                             } 
                             e l s e   { 
                                 $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                                     c o n s o l e . l o g ( d a t a [ ' N a m e ' ]   +   ' :   '   +   d a t a [ ' E x e c u t i o n   T i m e ' ] + ' m s ' ) ; 
                                 } ) ; 
                             } 
                             c o n s o l e . g r o u p E n d ( ) ; 
                         } 
                         p e r f o r m a n c e   =   [ ] ; 
                     } 
                 } , 
                 i n v o k e :   f u n c t i o n ( q u e r y ,   p a s s e d A r g u m e n t s ,   c o n t e x t )   { 
                     v a r 
                         o b j e c t   =   i n s t a n c e , 
                         m a x D e p t h , 
                         f o u n d , 
                         r e s p o n s e 
                     ; 
                     p a s s e d A r g u m e n t s   =   p a s s e d A r g u m e n t s   | |   q u e r y A r g u m e n t s ; 
                     c o n t e x t                   =   e l e m e n t                   | |   c o n t e x t ; 
                     i f ( t y p e o f   q u e r y   = =   ' s t r i n g '   & &   o b j e c t   ! = =   u n d e f i n e d )   { 
                         q u e r y         =   q u e r y . s p l i t ( / [ \ .   ] / ) ; 
                         m a x D e p t h   =   q u e r y . l e n g t h   -   1 ; 
                         $ . e a c h ( q u e r y ,   f u n c t i o n ( d e p t h ,   v a l u e )   { 
                             v a r   c a m e l C a s e V a l u e   =   ( d e p t h   ! =   m a x D e p t h ) 
                                 ?   v a l u e   +   q u e r y [ d e p t h   +   1 ] . c h a r A t ( 0 ) . t o U p p e r C a s e ( )   +   q u e r y [ d e p t h   +   1 ] . s l i c e ( 1 ) 
                                 :   q u e r y 
                             ; 
                             i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ c a m e l C a s e V a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                                 o b j e c t   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                             } 
                             e l s e   i f (   o b j e c t [ c a m e l C a s e V a l u e ]   ! = =   u n d e f i n e d   )   { 
                                 f o u n d   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                                 r e t u r n   f a l s e ; 
                             } 
                             e l s e   i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ v a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                                 o b j e c t   =   o b j e c t [ v a l u e ] ; 
                             } 
                             e l s e   i f (   o b j e c t [ v a l u e ]   ! = =   u n d e f i n e d   )   { 
                                 f o u n d   =   o b j e c t [ v a l u e ] ; 
                                 r e t u r n   f a l s e ; 
                             } 
                             e l s e   { 
                                 m o d u l e . e r r o r ( e r r o r . m e t h o d ,   q u e r y ) ; 
                                 r e t u r n   f a l s e ; 
                             } 
                         } ) ; 
                     } 
                     i f   (   $ . i s F u n c t i o n (   f o u n d   )   )   { 
                         r e s p o n s e   =   f o u n d . a p p l y ( c o n t e x t ,   p a s s e d A r g u m e n t s ) ; 
                     } 
                     e l s e   i f ( f o u n d   ! = =   u n d e f i n e d )   { 
                         r e s p o n s e   =   f o u n d ; 
                     } 
                     i f ( $ . i s A r r a y ( r e t u r n e d V a l u e ) )   { 
                         r e t u r n e d V a l u e . p u s h ( r e s p o n s e ) ; 
                     } 
                     e l s e   i f ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d )   { 
                         r e t u r n e d V a l u e   =   [ r e t u r n e d V a l u e ,   r e s p o n s e ] ; 
                     } 
                     e l s e   i f ( r e s p o n s e   ! = =   u n d e f i n e d )   { 
                         r e t u r n e d V a l u e   =   r e s p o n s e ; 
                     } 
                     r e t u r n   f o u n d ; 
                 } 
             } ; 
 
             i f ( m e t h o d I n v o k e d )   { 
                 i f ( i n s t a n c e   = = =   u n d e f i n e d )   { 
                     m o d u l e . i n i t i a l i z e ( ) ; 
                 } 
                 m o d u l e . i n v o k e ( q u e r y ) ; 
             } 
             e l s e   { 
                 i f ( i n s t a n c e   ! = =   u n d e f i n e d )   { 
                     m o d u l e . d e s t r o y ( ) ; 
                 } 
                 m o d u l e . i n i t i a l i z e ( ) ; 
             } 
         } ) 
     ; 
 
     r e t u r n   ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d ) 
         ?   r e t u r n e d V a l u e 
         :   t h i s 
     ; 
 } ; 
 
 $ . f n . d r o p d o w n . s e t t i n g s   =   { 
 
     n a m e                 :   ' D r o p d o w n ' , 
     n a m e s p a c e       :   ' d r o p d o w n ' , 
 
     d e b u g               :   f a l s e , 
     v e r b o s e           :   t r u e , 
     p e r f o r m a n c e   :   t r u e , 
 
     o n                     :   ' c l i c k ' , 
     a c t i o n             :   ' a c t i v a t e ' , 
 
     d e l a y :   { 
         s h o w     :   2 0 0 , 
         h i d e     :   3 0 0 , 
         t o u c h   :   5 0 
     } , 
 
     t r a n s i t i o n   :   ' s l i d e   d o w n ' , 
     d u r a t i o n       :   2 5 0 , 
 
     o n C h a n g e   :   f u n c t i o n ( v a l u e ,   t e x t ) { } , 
     o n S h o w       :   f u n c t i o n ( ) { } , 
     o n H i d e       :   f u n c t i o n ( ) { } , 
 
     e r r o r       :   { 
         a c t i o n         :   ' Y o u   c a l l e d   a   d r o p d o w n   a c t i o n   t h a t   w a s   n o t   d e f i n e d ' , 
         m e t h o d         :   ' T h e   m e t h o d   y o u   c a l l e d   i s   n o t   d e f i n e d . ' , 
         t r a n s i t i o n   :   ' T h e   r e q u e s t e d   t r a n s i t i o n   w a s   n o t   f o u n d ' 
     } , 
 
     m e t a d a t a :   { 
         d e f a u l t T e x t     :   ' d e f a u l t T e x t ' , 
         d e f a u l t V a l u e   :   ' d e f a u l t V a l u e ' , 
         t e x t                   :   ' t e x t ' , 
         v a l u e                 :   ' v a l u e ' 
     } , 
 
     s e l e c t o r   :   { 
         m e n u     :   ' . m e n u ' , 
         i t e m     :   ' . m e n u   >   . i t e m ' , 
         t e x t     :   ' >   . t e x t ' , 
         i n p u t   :   ' >   i n p u t [ t y p e = " h i d d e n " ] ' 
     } , 
 
     c l a s s N a m e   :   { 
         a c t i v e             :   ' a c t i v e ' , 
         p l a c e h o l d e r   :   ' d e f a u l t ' , 
         d i s a b l e d         :   ' d i s a b l e d ' , 
         v i s i b l e           :   ' v i s i b l e ' , 
         s e l e c t i o n       :   ' s e l e c t i o n ' 
     } 
 
 } ; 
 
 / /   A d d s   e a s i n g 
 $ . e x t e n d (   $ . e a s i n g ,   { 
     e a s e O u t Q u a d :   f u n c t i o n   ( x ,   t ,   b ,   c ,   d )   { 
         r e t u r n   - c   * ( t / = d ) * ( t - 2 )   +   b ; 
     } , 
 } ) ; 
 
 
 } ) (   j Q u e r y ,   w i n d o w   ,   d o c u m e n t   ) ; 
 / * 
   *   #   S e m a n t i c   -   M o d a l 
   *   h t t p : / / g i t h u b . c o m / s e m a n t i c - o r g / s e m a n t i c - u i / 
   * 
   * 
   *   C o p y r i g h t   2 0 1 3   C o n t r i b u t o r s 
   *   R e l e a s e d   u n d e r   t h e   M I T   l i c e n s e 
   *   h t t p : / / o p e n s o u r c e . o r g / l i c e n s e s / M I T 
   * 
   * / 
 
 ; ( f u n c t i o n   (   $ ,   w i n d o w ,   d o c u m e n t ,   u n d e f i n e d   )   { 
 
 $ . f n . m o d a l   =   f u n c t i o n ( p a r a m e t e r s )   { 
     v a r 
         $ a l l M o d u l e s   =   $ ( t h i s ) , 
         $ w i n d o w           =   $ ( w i n d o w ) , 
         $ d o c u m e n t       =   $ ( d o c u m e n t ) , 
         $ b o d y               =   $ ( ' b o d y ' ) , 
 
         t i m e                         =   n e w   D a t e ( ) . g e t T i m e ( ) , 
         p e r f o r m a n c e           =   [ ] , 
 
         q u e r y                       =   a r g u m e n t s [ 0 ] , 
         m e t h o d I n v o k e d       =   ( t y p e o f   q u e r y   = =   ' s t r i n g ' ) , 
         q u e r y A r g u m e n t s     =   [ ] . s l i c e . c a l l ( a r g u m e n t s ,   1 ) , 
 
         r e q u e s t A n i m a t i o n F r a m e   =   w i n d o w . r e q u e s t A n i m a t i o n F r a m e 
             | |   w i n d o w . m o z R e q u e s t A n i m a t i o n F r a m e 
             | |   w i n d o w . w e b k i t R e q u e s t A n i m a t i o n F r a m e 
             | |   w i n d o w . m s R e q u e s t A n i m a t i o n F r a m e 
             | |   f u n c t i o n ( c a l l b a c k )   {   s e t T i m e o u t ( c a l l b a c k ,   0 ) ;   } , 
 
         r e t u r n e d V a l u e 
     ; 
 
 
     $ a l l M o d u l e s 
         . e a c h ( f u n c t i o n ( )   { 
             v a r 
                 s e t t i n g s         =   (   $ . i s P l a i n O b j e c t ( p a r a m e t e r s )   ) 
                     ?   $ . e x t e n d ( t r u e ,   { } ,   $ . f n . m o d a l . s e t t i n g s ,   p a r a m e t e r s ) 
                     :   $ . e x t e n d ( { } ,   $ . f n . m o d a l . s e t t i n g s ) , 
 
                 s e l e c t o r                 =   s e t t i n g s . s e l e c t o r , 
                 c l a s s N a m e               =   s e t t i n g s . c l a s s N a m e , 
                 n a m e s p a c e               =   s e t t i n g s . n a m e s p a c e , 
                 e r r o r                       =   s e t t i n g s . e r r o r , 
 
                 e v e n t N a m e s p a c e     =   ' . '   +   n a m e s p a c e , 
                 m o d u l e N a m e s p a c e   =   ' m o d u l e - '   +   n a m e s p a c e , 
                 m o d u l e S e l e c t o r     =   $ a l l M o d u l e s . s e l e c t o r   | |   ' ' , 
 
                 $ m o d u l e             =   $ ( t h i s ) , 
                 $ c o n t e x t           =   $ ( s e t t i n g s . c o n t e x t ) , 
                 $ c l o s e               =   $ m o d u l e . f i n d ( s e l e c t o r . c l o s e ) , 
 
                 $ a l l M o d a l s , 
                 $ o t h e r M o d a l s , 
                 $ f o c u s e d E l e m e n t , 
                 $ d i m m a b l e , 
                 $ d i m m e r , 
 
                 e l e m e n t             =   t h i s , 
                 i n s t a n c e           =   $ m o d u l e . d a t a ( m o d u l e N a m e s p a c e ) , 
                 m o d u l e 
             ; 
 
             m o d u l e     =   { 
 
                 i n i t i a l i z e :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' I n i t i a l i z i n g   d i m m e r ' ,   $ c o n t e x t ) ; 
 
                     i f ( $ . f n . d i m m e r   = = =   u n d e f i n e d )   { 
                         m o d u l e . e r r o r ( e r r o r . d i m m e r ) ; 
                         r e t u r n ; 
                     } 
                     $ d i m m a b l e   =   $ c o n t e x t 
                         . d i m m e r ( { 
                             c l o s a b l e   :   f a l s e , 
                             u s e C S S       :   t r u e , 
                             d u r a t i o n   :   { 
                                 s h o w           :   s e t t i n g s . d u r a t i o n   *   0 . 9 , 
                                 h i d e           :   s e t t i n g s . d u r a t i o n   *   1 . 1 
                             } 
                         } ) 
                     ; 
 
                     i f ( s e t t i n g s . d e t a c h a b l e )   { 
                         $ d i m m a b l e . d i m m e r ( ' a d d   c o n t e n t ' ,   $ m o d u l e ) ; 
                     } 
 
                     $ d i m m e r   =   $ d i m m a b l e 
                         . d i m m e r ( ' g e t   d i m m e r ' ) 
                     ; 
 
                     $ o t h e r M o d a l s   =   $ m o d u l e . s i b l i n g s ( s e l e c t o r . m o d a l ) ; 
                     $ a l l M o d a l s       =   $ o t h e r M o d a l s . a d d ( $ m o d u l e ) ; 
 
                     m o d u l e . v e r b o s e ( ' A t t a c h i n g   c l o s e   e v e n t s ' ,   $ c l o s e ) ; 
                     $ c l o s e 
                         . o n ( ' c l i c k '   +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . c l o s e ) 
                     ; 
                     $ w i n d o w 
                         . o n ( ' r e s i z e '   +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . r e s i z e ) 
                     ; 
                     m o d u l e . i n s t a n t i a t e ( ) ; 
                 } , 
 
                 i n s t a n t i a t e :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' S t o r i n g   i n s t a n c e   o f   m o d a l ' ) ; 
                     i n s t a n c e   =   m o d u l e ; 
                     $ m o d u l e 
                         . d a t a ( m o d u l e N a m e s p a c e ,   i n s t a n c e ) 
                     ; 
                 } , 
 
                 d e s t r o y :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' D e s t r o y i n g   p r e v i o u s   m o d a l ' ) ; 
                     $ m o d u l e 
                         . r e m o v e D a t a ( m o d u l e N a m e s p a c e ) 
                         . o f f ( e v e n t N a m e s p a c e ) 
                     ; 
                     $ c l o s e 
                         . o f f ( e v e n t N a m e s p a c e ) 
                     ; 
                     $ c o n t e x t 
                         . d i m m e r ( ' d e s t r o y ' ) 
                     ; 
                 } , 
 
                 r e f r e s h :   f u n c t i o n ( )   { 
                     m o d u l e . r e m o v e . s c r o l l i n g ( ) ; 
                     m o d u l e . c a c h e S i z e s ( ) ; 
                     m o d u l e . s e t . s c r e e n H e i g h t ( ) ; 
                     m o d u l e . s e t . t y p e ( ) ; 
                     m o d u l e . s e t . p o s i t i o n ( ) ; 
                 } , 
 
                 a t t a c h E v e n t s :   f u n c t i o n ( s e l e c t o r ,   e v e n t )   { 
                     v a r 
                         $ t o g g l e   =   $ ( s e l e c t o r ) 
                     ; 
                     e v e n t   =   $ . i s F u n c t i o n ( m o d u l e [ e v e n t ] ) 
                         ?   m o d u l e [ e v e n t ] 
                         :   m o d u l e . t o g g l e 
                     ; 
                     i f ( $ t o g g l e . s i z e ( )   >   0 )   { 
                         m o d u l e . d e b u g ( ' A t t a c h i n g   m o d a l   e v e n t s   t o   e l e m e n t ' ,   s e l e c t o r ,   e v e n t ) ; 
                         $ t o g g l e 
                             . o f f ( e v e n t N a m e s p a c e ) 
                             . o n ( ' c l i c k '   +   e v e n t N a m e s p a c e ,   e v e n t ) 
                         ; 
                     } 
                     e l s e   { 
                         m o d u l e . e r r o r ( e r r o r . n o t F o u n d ) ; 
                     } 
                 } , 
 
                 e v e n t :   { 
                     c l o s e :   f u n c t i o n ( )   { 
                         m o d u l e . v e r b o s e ( ' C l o s i n g   e l e m e n t   p r e s s e d ' ) ; 
                         i f (   $ ( t h i s ) . i s ( s e l e c t o r . a p p r o v e )   )   { 
                             i f ( $ . p r o x y ( s e t t i n g s . o n A p p r o v e ,   e l e m e n t ) ( )   ! = =   f a l s e )   { 
                                 m o d u l e . h i d e ( ) ; 
                             } 
                             e l s e   { 
                                 m o d u l e . v e r b o s e ( ' A p p r o v e   c a l l b a c k   r e t u r n e d   f a l s e   c a n c e l l i n g   h i d e ' ) ; 
                             } 
                         } 
                         e l s e   i f (   $ ( t h i s ) . i s ( s e l e c t o r . d e n y )   )   { 
                             i f ( $ . p r o x y ( s e t t i n g s . o n D e n y ,   e l e m e n t ) ( )   ! = =   f a l s e )   { 
                                 m o d u l e . h i d e ( ) ; 
                             } 
                             e l s e   { 
                                 m o d u l e . v e r b o s e ( ' D e n y   c a l l b a c k   r e t u r n e d   f a l s e   c a n c e l l i n g   h i d e ' ) ; 
                             } 
                         } 
                         e l s e   { 
                             m o d u l e . h i d e ( ) ; 
                         } 
                     } , 
                     c l i c k :   f u n c t i o n ( e v e n t )   { 
                         i f (   $ ( e v e n t . t a r g e t ) . c l o s e s t ( s e l e c t o r . m o d a l ) . s i z e ( )   = = =   0   )   { 
                             m o d u l e . d e b u g ( ' D i m m e r   c l i c k e d ,   h i d i n g   a l l   m o d a l s ' ) ; 
                             i f ( s e t t i n g s . a l l o w M u l t i p l e )   { 
                                 m o d u l e . h i d e ( ) ; 
                             } 
                             e l s e   { 
                                 m o d u l e . h i d e A l l ( ) ; 
                             } 
                             e v e n t . s t o p I m m e d i a t e P r o p a g a t i o n ( ) ; 
                         } 
                     } , 
                     d e b o u n c e :   f u n c t i o n ( m e t h o d ,   d e l a y )   { 
                         c l e a r T i m e o u t ( m o d u l e . t i m e r ) ; 
                         m o d u l e . t i m e r   =   s e t T i m e o u t ( m e t h o d ,   d e l a y ) ; 
                     } , 
                     k e y b o a r d :   f u n c t i o n ( e v e n t )   { 
                         v a r 
                             k e y C o d e       =   e v e n t . w h i c h , 
                             e s c a p e K e y   =   2 7 
                         ; 
                         i f ( k e y C o d e   = =   e s c a p e K e y )   { 
                             i f ( s e t t i n g s . c l o s a b l e )   { 
                                 m o d u l e . d e b u g ( ' E s c a p e   k e y   p r e s s e d   h i d i n g   m o d a l ' ) ; 
                                 m o d u l e . h i d e ( ) ; 
                             } 
                             e l s e   { 
                                 m o d u l e . d e b u g ( ' E s c a p e   k e y   p r e s s e d ,   b u t   c l o s a b l e   i s   s e t   t o   f a l s e ' ) ; 
                             } 
                             e v e n t . p r e v e n t D e f a u l t ( ) ; 
                         } 
                     } , 
                     r e s i z e :   f u n c t i o n ( )   { 
                         i f (   $ d i m m a b l e . d i m m e r ( ' i s   a c t i v e ' )   )   { 
                             r e q u e s t A n i m a t i o n F r a m e ( m o d u l e . r e f r e s h ) ; 
                         } 
                     } 
                 } , 
 
                 t o g g l e :   f u n c t i o n ( )   { 
                     i f (   m o d u l e . i s . a c t i v e ( )   )   { 
                         m o d u l e . h i d e ( ) ; 
                     } 
                     e l s e   { 
                         m o d u l e . s h o w ( ) ; 
                     } 
                 } , 
 
                 s h o w :   f u n c t i o n ( c a l l b a c k )   { 
                     c a l l b a c k   =   $ . i s F u n c t i o n ( c a l l b a c k ) 
                         ?   c a l l b a c k 
                         :   f u n c t i o n ( ) { } 
                     ; 
                     m o d u l e . s h o w D i m m e r ( ) ; 
                     m o d u l e . s h o w M o d a l ( c a l l b a c k ) ; 
                 } , 
 
                 s h o w M o d a l :   f u n c t i o n ( c a l l b a c k )   { 
                     c a l l b a c k   =   $ . i s F u n c t i o n ( c a l l b a c k ) 
                         ?   c a l l b a c k 
                         :   f u n c t i o n ( ) { } 
                     ; 
                     i f (   ! m o d u l e . i s . a c t i v e ( )   )   { 
                         m o d u l e . c a c h e S i z e s ( ) ; 
                         m o d u l e . s e t . p o s i t i o n ( ) ; 
                         m o d u l e . s e t . s c r e e n H e i g h t ( ) ; 
                         m o d u l e . s e t . t y p e ( ) ; 
 
                         i f (   $ o t h e r M o d a l s . f i l t e r ( ' : v i s i b l e ' ) . s i z e ( )   >   0   & &   ! s e t t i n g s . a l l o w M u l t i p l e )   { 
                             m o d u l e . d e b u g ( ' O t h e r   m o d a l s   v i s i b l e ,   q u e u e i n g   s h o w   a n i m a t i o n ' ) ; 
                             m o d u l e . h i d e O t h e r s ( m o d u l e . s h o w M o d a l ) ; 
                         } 
                         e l s e   { 
                             $ . p r o x y ( s e t t i n g s . o n S h o w ,   e l e m e n t ) ( ) ; 
                             i f ( s e t t i n g s . t r a n s i t i o n   & &   $ . f n . t r a n s i t i o n   ! = =   u n d e f i n e d   & &   $ m o d u l e . t r a n s i t i o n ( ' i s   s u p p o r t e d ' ) )   { 
                                 m o d u l e . d e b u g ( ' S h o w i n g   m o d a l   w i t h   c s s   a n i m a t i o n s ' ) ; 
                                 $ m o d u l e 
                                     . t r a n s i t i o n ( s e t t i n g s . t r a n s i t i o n   +   '   i n ' ,   s e t t i n g s . d u r a t i o n ,   f u n c t i o n ( )   { 
                                         $ . p r o x y ( s e t t i n g s . o n V i s i b l e ,   e l e m e n t ) ( ) ; 
                                         m o d u l e . s e t . a c t i v e ( ) ; 
                                         c a l l b a c k ( ) ; 
                                     } ) 
                                 ; 
                             } 
                             e l s e   { 
                                 m o d u l e . d e b u g ( ' S h o w i n g   m o d a l   w i t h   j a v a s c r i p t ' ) ; 
                                 $ m o d u l e 
                                     . f a d e I n ( s e t t i n g s . d u r a t i o n ,   s e t t i n g s . e a s i n g ,   f u n c t i o n ( )   { 
                                         $ . p r o x y ( s e t t i n g s . o n V i s i b l e ,   e l e m e n t ) ( ) ; 
                                         m o d u l e . s e t . a c t i v e ( ) ; 
                                         c a l l b a c k ( ) ; 
                                     } ) 
                                 ; 
                             } 
                         } 
                     } 
                     e l s e   { 
                         m o d u l e . d e b u g ( ' M o d a l   i s   a l r e a d y   v i s i b l e ' ) ; 
                     } 
                 } , 
 
                 s h o w D i m m e r :   f u n c t i o n ( )   { 
                     i f (   ! $ d i m m a b l e . d i m m e r ( ' i s   a c t i v e ' )   )   { 
                         m o d u l e . d e b u g ( ' S h o w i n g   d i m m e r ' ) ; 
                         $ d i m m a b l e . d i m m e r ( ' s h o w ' ) ; 
                     } 
                     e l s e   { 
                         m o d u l e . d e b u g ( ' D i m m e r   a l r e a d y   v i s i b l e ' ) ; 
                     } 
                 } , 
 
                 h i d e :   f u n c t i o n ( c a l l b a c k )   { 
                     c a l l b a c k   =   $ . i s F u n c t i o n ( c a l l b a c k ) 
                         ?   c a l l b a c k 
                         :   f u n c t i o n ( ) { } 
                     ; 
                     i f ( $ a l l M o d a l s . f i l t e r ( ' : v i s i b l e ' ) . s i z e ( )   < =   1 )   { 
                         m o d u l e . h i d e D i m m e r ( ) ; 
                     } 
                     m o d u l e . h i d e M o d a l ( c a l l b a c k ) ; 
                 } , 
 
                 h i d e D i m m e r :   f u n c t i o n ( )   { 
                     i f (   ! m o d u l e . i s . a c t i v e ( )   )   { 
                         m o d u l e . d e b u g ( ' D i m m e r   i s   n o t   v i s i b l e   c a n n o t   h i d e ' ) ; 
                         r e t u r n ; 
                     } 
                     m o d u l e . d e b u g ( ' H i d i n g   d i m m e r ' ) ; 
                     i f ( s e t t i n g s . c l o s a b l e )   { 
                         $ d i m m e r 
                             . o f f ( ' c l i c k '   +   e v e n t N a m e s p a c e ) 
                         ; 
                     } 
                     $ d i m m a b l e . d i m m e r ( ' h i d e ' ,   f u n c t i o n ( )   { 
                         i f ( s e t t i n g s . t r a n s i t i o n   & &   $ . f n . t r a n s i t i o n   ! = =   u n d e f i n e d   & &   $ m o d u l e . t r a n s i t i o n ( ' i s   s u p p o r t e d ' ) )   { 
                             $ m o d u l e 
                                 . t r a n s i t i o n ( ' r e s e t ' ) 
                             ; 
                             m o d u l e . r e m o v e . s c r e e n H e i g h t ( ) ; 
                         } 
                         m o d u l e . r e m o v e . a c t i v e ( ) ; 
                     } ) ; 
                 } , 
 
                 h i d e M o d a l :   f u n c t i o n ( c a l l b a c k )   { 
                     c a l l b a c k   =   $ . i s F u n c t i o n ( c a l l b a c k ) 
                         ?   c a l l b a c k 
                         :   f u n c t i o n ( ) { } 
                     ; 
                     i f (   ! m o d u l e . i s . a c t i v e ( )   )   { 
                         m o d u l e . d e b u g ( ' C a n n o t   h i d e   m o d a l   i t   i s   n o t   a c t i v e ' ) ; 
                         r e t u r n ; 
                     } 
                     m o d u l e . d e b u g ( ' H i d i n g   m o d a l ' ) ; 
                     m o d u l e . r e m o v e . k e y b o a r d S h o r t c u t s ( ) ; 
                     $ . p r o x y ( s e t t i n g s . o n H i d e ,   e l e m e n t ) ( ) ; 
                     i f ( s e t t i n g s . t r a n s i t i o n   & &   $ . f n . t r a n s i t i o n   ! = =   u n d e f i n e d   & &   $ m o d u l e . t r a n s i t i o n ( ' i s   s u p p o r t e d ' ) )   { 
                         $ m o d u l e 
                             . t r a n s i t i o n ( s e t t i n g s . t r a n s i t i o n   +   '   o u t ' ,   s e t t i n g s . d u r a t i o n ,   f u n c t i o n ( )   { 
                                 $ . p r o x y ( s e t t i n g s . o n H i d d e n ,   e l e m e n t ) ( ) ; 
                                 m o d u l e . r e m o v e . a c t i v e ( ) ; 
                                 m o d u l e . r e s t o r e . f o c u s ( ) ; 
                                 c a l l b a c k ( ) ; 
                             } ) 
                         ; 
                     } 
                     e l s e   { 
                         $ m o d u l e 
                             . f a d e O u t ( s e t t i n g s . d u r a t i o n ,   s e t t i n g s . e a s i n g ,   f u n c t i o n ( )   { 
                                 $ . p r o x y ( s e t t i n g s . o n H i d d e n ,   e l e m e n t ) ( ) ; 
                                 m o d u l e . r e m o v e . a c t i v e ( ) ; 
                                 m o d u l e . r e s t o r e . f o c u s ( ) ; 
                                 c a l l b a c k ( ) ; 
                             } ) 
                         ; 
                     } 
                 } , 
 
                 h i d e A l l :   f u n c t i o n ( c a l l b a c k )   { 
                     c a l l b a c k   =   $ . i s F u n c t i o n ( c a l l b a c k ) 
                         ?   c a l l b a c k 
                         :   f u n c t i o n ( ) { } 
                     ; 
                     i f (   $ a l l M o d a l s . i s ( ' : v i s i b l e ' )   )   { 
                         m o d u l e . d e b u g ( ' H i d i n g   a l l   v i s i b l e   m o d a l s ' ) ; 
                         m o d u l e . h i d e D i m m e r ( ) ; 
                         $ a l l M o d a l s 
                             . f i l t e r ( ' : v i s i b l e ' ) 
                                 . m o d a l ( ' h i d e   m o d a l ' ,   c a l l b a c k ) 
                         ; 
                     } 
                 } , 
 
                 h i d e O t h e r s :   f u n c t i o n ( c a l l b a c k )   { 
                     c a l l b a c k   =   $ . i s F u n c t i o n ( c a l l b a c k ) 
                         ?   c a l l b a c k 
                         :   f u n c t i o n ( ) { } 
                     ; 
                     i f (   $ o t h e r M o d a l s . i s ( ' : v i s i b l e ' )   )   { 
                         m o d u l e . d e b u g ( ' H i d i n g   o t h e r   m o d a l s ' ) ; 
                         $ o t h e r M o d a l s 
                             . f i l t e r ( ' : v i s i b l e ' ) 
                                 . m o d a l ( ' h i d e   m o d a l ' ,   c a l l b a c k ) 
                         ; 
                     } 
                 } , 
 
                 a d d :   { 
                     k e y b o a r d S h o r t c u t s :   f u n c t i o n ( )   { 
                         m o d u l e . v e r b o s e ( ' A d d i n g   k e y b o a r d   s h o r t c u t s ' ) ; 
                         $ d o c u m e n t 
                             . o n ( ' k e y u p '   +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . k e y b o a r d ) 
                         ; 
                     } 
                 } , 
 
                 s a v e :   { 
                     f o c u s :   f u n c t i o n ( )   { 
                         $ f o c u s e d E l e m e n t   =   $ ( d o c u m e n t . a c t i v e E l e m e n t ) . b l u r ( ) ; 
                     } 
                 } , 
 
                 r e s t o r e :   { 
                     f o c u s :   f u n c t i o n ( )   { 
                         i f ( $ f o c u s e d E l e m e n t   & &   $ f o c u s e d E l e m e n t . s i z e ( )   >   0 )   { 
                             $ f o c u s e d E l e m e n t . f o c u s ( ) ; 
                         } 
                     } 
                 } , 
 
                 r e m o v e :   { 
                     a c t i v e :   f u n c t i o n ( )   { 
                         $ m o d u l e . r e m o v e C l a s s ( c l a s s N a m e . a c t i v e ) ; 
                     } , 
                     s c r e e n H e i g h t :   f u n c t i o n ( )   { 
                         i f ( m o d u l e . c a c h e . h e i g h t   >   m o d u l e . c a c h e . p a g e H e i g h t )   { 
                             m o d u l e . d e b u g ( ' R e m o v i n g   p a g e   h e i g h t ' ) ; 
                             $ b o d y 
                                 . c s s ( ' h e i g h t ' ,   ' ' ) 
                             ; 
                         } 
                     } , 
                     k e y b o a r d S h o r t c u t s :   f u n c t i o n ( )   { 
                         m o d u l e . v e r b o s e ( ' R e m o v i n g   k e y b o a r d   s h o r t c u t s ' ) ; 
                         $ d o c u m e n t 
                             . o f f ( ' k e y u p '   +   e v e n t N a m e s p a c e ) 
                         ; 
                     } , 
                     s c r o l l i n g :   f u n c t i o n ( )   { 
                         $ d i m m a b l e . r e m o v e C l a s s ( c l a s s N a m e . s c r o l l i n g ) ; 
                         $ m o d u l e . r e m o v e C l a s s ( c l a s s N a m e . s c r o l l i n g ) ; 
                     } 
                 } , 
 
                 c a c h e S i z e s :   f u n c t i o n ( )   { 
                     m o d u l e . c a c h e   =   { 
                         p a g e H e i g h t         :   $ b o d y . o u t e r H e i g h t ( ) , 
                         h e i g h t                 :   $ m o d u l e . o u t e r H e i g h t ( )   +   s e t t i n g s . o f f s e t , 
                         c o n t e x t H e i g h t   :   ( s e t t i n g s . c o n t e x t   = =   ' b o d y ' ) 
                             ?   $ ( w i n d o w ) . h e i g h t ( ) 
                             :   $ d i m m a b l e . h e i g h t ( ) 
                     } ; 
                     m o d u l e . d e b u g ( ' C a c h i n g   m o d a l   a n d   c o n t a i n e r   s i z e s ' ,   m o d u l e . c a c h e ) ; 
                 } , 
 
                 c a n :   { 
                     f i t :   f u n c t i o n ( )   { 
                         r e t u r n   ( m o d u l e . c a c h e . h e i g h t   <   m o d u l e . c a c h e . c o n t e x t H e i g h t ) ; 
                     } 
                 } , 
 
                 i s :   { 
                     a c t i v e :   f u n c t i o n ( )   { 
                         r e t u r n   $ m o d u l e . h a s C l a s s ( c l a s s N a m e . a c t i v e ) ; 
                     } , 
                     m o d e r n B r o w s e r :   f u n c t i o n ( )   { 
                         / /   a p p N a m e   f o r   I E 1 1   r e p o r t s   ' N e t s c a p e '   c a n   n o   l o n g e r   u s e 
                         r e t u r n   ! ( w i n d o w . A c t i v e X O b j e c t   | |   " A c t i v e X O b j e c t "   i n   w i n d o w ) ; 
                     } 
                 } , 
 
                 s e t :   { 
                     s c r e e n H e i g h t :   f u n c t i o n ( )   { 
                         i f ( m o d u l e . c a c h e . h e i g h t   >   m o d u l e . c a c h e . p a g e H e i g h t )   { 
                             m o d u l e . d e b u g ( ' M o d a l   i s   t a l l e r   t h a n   p a g e   c o n t e n t ,   r e s i z i n g   p a g e   h e i g h t ' ) ; 
                             $ b o d y 
                                 . c s s ( ' h e i g h t ' ,   m o d u l e . c a c h e . h e i g h t   +   s e t t i n g s . p a d d i n g ) 
                             ; 
                         } 
                     } , 
                     a c t i v e :   f u n c t i o n ( )   { 
                         m o d u l e . a d d . k e y b o a r d S h o r t c u t s ( ) ; 
                         m o d u l e . s a v e . f o c u s ( ) ; 
                         $ m o d u l e 
                             . a d d C l a s s ( c l a s s N a m e . a c t i v e ) 
                         ; 
                         i f ( s e t t i n g s . c l o s a b l e )   { 
                             $ d i m m e r 
                                 . o f f ( ' c l i c k '   +   e v e n t N a m e s p a c e ) 
                                 . o n ( ' c l i c k '   +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . c l i c k ) 
                             ; 
                         } 
                     } , 
                     s c r o l l i n g :   f u n c t i o n ( )   { 
                         $ d i m m a b l e . a d d C l a s s ( c l a s s N a m e . s c r o l l i n g ) ; 
                         $ m o d u l e . a d d C l a s s ( c l a s s N a m e . s c r o l l i n g ) ; 
                     } , 
                     t y p e :   f u n c t i o n ( )   { 
                         i f ( m o d u l e . c a n . f i t ( ) )   { 
                             m o d u l e . v e r b o s e ( ' M o d a l   f i t s   o n   s c r e e n ' ) ; 
                             m o d u l e . r e m o v e . s c r o l l i n g ( ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . v e r b o s e ( ' M o d a l   c a n n o t   f i t   o n   s c r e e n   s e t t i n g   t o   s c r o l l i n g ' ) ; 
                             m o d u l e . s e t . s c r o l l i n g ( ) ; 
                         } 
                     } , 
                     p o s i t i o n :   f u n c t i o n ( )   { 
                         m o d u l e . v e r b o s e ( ' C e n t e r i n g   m o d a l   o n   p a g e ' ,   m o d u l e . c a c h e ) ; 
                         i f ( m o d u l e . c a n . f i t ( ) )   { 
                             $ m o d u l e 
                                 . c s s ( { 
                                     t o p :   ' ' , 
                                     m a r g i n T o p :   - ( m o d u l e . c a c h e . h e i g h t   /   2 ) 
                                 } ) 
                             ; 
                         } 
                         e l s e   { 
                             $ m o d u l e 
                                 . c s s ( { 
                                     m a r g i n T o p   :   ' 1 e m ' , 
                                     t o p               :   $ d o c u m e n t . s c r o l l T o p ( ) 
                                 } ) 
                             ; 
                         } 
                     } 
                 } , 
 
                 s e t t i n g :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                     i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                         $ . e x t e n d ( t r u e ,   s e t t i n g s ,   n a m e ) ; 
                     } 
                     e l s e   i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                         s e t t i n g s [ n a m e ]   =   v a l u e ; 
                     } 
                     e l s e   { 
                         r e t u r n   s e t t i n g s [ n a m e ] ; 
                     } 
                 } , 
                 i n t e r n a l :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                     i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                         $ . e x t e n d ( t r u e ,   m o d u l e ,   n a m e ) ; 
                     } 
                     e l s e   i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                         m o d u l e [ n a m e ]   =   v a l u e ; 
                     } 
                     e l s e   { 
                         r e t u r n   m o d u l e [ n a m e ] ; 
                     } 
                 } , 
                 d e b u g :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . d e b u g )   { 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . d e b u g   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                             m o d u l e . d e b u g . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                         } 
                     } 
                 } , 
                 v e r b o s e :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . v e r b o s e   & &   s e t t i n g s . d e b u g )   { 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . v e r b o s e   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                             m o d u l e . v e r b o s e . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                         } 
                     } 
                 } , 
                 e r r o r :   f u n c t i o n ( )   { 
                     m o d u l e . e r r o r   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . e r r o r ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                     m o d u l e . e r r o r . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                 } , 
                 p e r f o r m a n c e :   { 
                     l o g :   f u n c t i o n ( m e s s a g e )   { 
                         v a r 
                             c u r r e n t T i m e , 
                             e x e c u t i o n T i m e , 
                             p r e v i o u s T i m e 
                         ; 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             c u r r e n t T i m e       =   n e w   D a t e ( ) . g e t T i m e ( ) ; 
                             p r e v i o u s T i m e     =   t i m e   | |   c u r r e n t T i m e ; 
                             e x e c u t i o n T i m e   =   c u r r e n t T i m e   -   p r e v i o u s T i m e ; 
                             t i m e                     =   c u r r e n t T i m e ; 
                             p e r f o r m a n c e . p u s h ( { 
                                 ' E l e m e n t '                 :   e l e m e n t , 
                                 ' N a m e '                       :   m e s s a g e [ 0 ] , 
                                 ' A r g u m e n t s '             :   [ ] . s l i c e . c a l l ( m e s s a g e ,   1 )   | |   ' ' , 
                                 ' E x e c u t i o n   T i m e '   :   e x e c u t i o n T i m e 
                             } ) ; 
                         } 
                         c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                         m o d u l e . p e r f o r m a n c e . t i m e r   =   s e t T i m e o u t ( m o d u l e . p e r f o r m a n c e . d i s p l a y ,   1 0 0 ) ; 
                     } , 
                     d i s p l a y :   f u n c t i o n ( )   { 
                         v a r 
                             t i t l e   =   s e t t i n g s . n a m e   +   ' : ' , 
                             t o t a l T i m e   =   0 
                         ; 
                         t i m e   =   f a l s e ; 
                         c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                         $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                             t o t a l T i m e   + =   d a t a [ ' E x e c u t i o n   T i m e ' ] ; 
                         } ) ; 
                         t i t l e   + =   '   '   +   t o t a l T i m e   +   ' m s ' ; 
                         i f ( m o d u l e S e l e c t o r )   { 
                             t i t l e   + =   '   \ ' '   +   m o d u l e S e l e c t o r   +   ' \ ' ' ; 
                         } 
                         i f (   ( c o n s o l e . g r o u p   ! = =   u n d e f i n e d   | |   c o n s o l e . t a b l e   ! = =   u n d e f i n e d )   & &   p e r f o r m a n c e . l e n g t h   >   0 )   { 
                             c o n s o l e . g r o u p C o l l a p s e d ( t i t l e ) ; 
                             i f ( c o n s o l e . t a b l e )   { 
                                 c o n s o l e . t a b l e ( p e r f o r m a n c e ) ; 
                             } 
                             e l s e   { 
                                 $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                                     c o n s o l e . l o g ( d a t a [ ' N a m e ' ]   +   ' :   '   +   d a t a [ ' E x e c u t i o n   T i m e ' ] + ' m s ' ) ; 
                                 } ) ; 
                             } 
                             c o n s o l e . g r o u p E n d ( ) ; 
                         } 
                         p e r f o r m a n c e   =   [ ] ; 
                     } 
                 } , 
                 i n v o k e :   f u n c t i o n ( q u e r y ,   p a s s e d A r g u m e n t s ,   c o n t e x t )   { 
                     v a r 
                         o b j e c t   =   i n s t a n c e , 
                         m a x D e p t h , 
                         f o u n d , 
                         r e s p o n s e 
                     ; 
                     p a s s e d A r g u m e n t s   =   p a s s e d A r g u m e n t s   | |   q u e r y A r g u m e n t s ; 
                     c o n t e x t                   =   e l e m e n t                   | |   c o n t e x t ; 
                     i f ( t y p e o f   q u e r y   = =   ' s t r i n g '   & &   o b j e c t   ! = =   u n d e f i n e d )   { 
                         q u e r y         =   q u e r y . s p l i t ( / [ \ .   ] / ) ; 
                         m a x D e p t h   =   q u e r y . l e n g t h   -   1 ; 
                         $ . e a c h ( q u e r y ,   f u n c t i o n ( d e p t h ,   v a l u e )   { 
                             v a r   c a m e l C a s e V a l u e   =   ( d e p t h   ! =   m a x D e p t h ) 
                                 ?   v a l u e   +   q u e r y [ d e p t h   +   1 ] . c h a r A t ( 0 ) . t o U p p e r C a s e ( )   +   q u e r y [ d e p t h   +   1 ] . s l i c e ( 1 ) 
                                 :   q u e r y 
                             ; 
                             i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ c a m e l C a s e V a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                                 o b j e c t   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                             } 
                             e l s e   i f (   o b j e c t [ c a m e l C a s e V a l u e ]   ! = =   u n d e f i n e d   )   { 
                                 f o u n d   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                                 r e t u r n   f a l s e ; 
                             } 
                             e l s e   i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ v a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                                 o b j e c t   =   o b j e c t [ v a l u e ] ; 
                             } 
                             e l s e   i f (   o b j e c t [ v a l u e ]   ! = =   u n d e f i n e d   )   { 
                                 f o u n d   =   o b j e c t [ v a l u e ] ; 
                                 r e t u r n   f a l s e ; 
                             } 
                             e l s e   { 
                                 r e t u r n   f a l s e ; 
                             } 
                         } ) ; 
                     } 
                     i f   (   $ . i s F u n c t i o n (   f o u n d   )   )   { 
                         r e s p o n s e   =   f o u n d . a p p l y ( c o n t e x t ,   p a s s e d A r g u m e n t s ) ; 
                     } 
                     e l s e   i f ( f o u n d   ! = =   u n d e f i n e d )   { 
                         r e s p o n s e   =   f o u n d ; 
                     } 
                     i f ( $ . i s A r r a y ( r e t u r n e d V a l u e ) )   { 
                         r e t u r n e d V a l u e . p u s h ( r e s p o n s e ) ; 
                     } 
                     e l s e   i f ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d )   { 
                         r e t u r n e d V a l u e   =   [ r e t u r n e d V a l u e ,   r e s p o n s e ] ; 
                     } 
                     e l s e   i f ( r e s p o n s e   ! = =   u n d e f i n e d )   { 
                         r e t u r n e d V a l u e   =   r e s p o n s e ; 
                     } 
                     r e t u r n   f o u n d ; 
                 } 
             } ; 
 
             i f ( m e t h o d I n v o k e d )   { 
                 i f ( i n s t a n c e   = = =   u n d e f i n e d )   { 
                     m o d u l e . i n i t i a l i z e ( ) ; 
                 } 
                 m o d u l e . i n v o k e ( q u e r y ) ; 
             } 
             e l s e   { 
                 i f ( i n s t a n c e   ! = =   u n d e f i n e d )   { 
                     m o d u l e . d e s t r o y ( ) ; 
                 } 
                 m o d u l e . i n i t i a l i z e ( ) ; 
             } 
         } ) 
     ; 
 
     r e t u r n   ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d ) 
         ?   r e t u r n e d V a l u e 
         :   t h i s 
     ; 
 } ; 
 
 $ . f n . m o d a l . s e t t i n g s   =   { 
 
     n a m e                     :   ' M o d a l ' , 
     n a m e s p a c e           :   ' m o d a l ' , 
 
     d e b u g                   :   f a l s e , 
     v e r b o s e               :   t r u e , 
     p e r f o r m a n c e       :   t r u e , 
 
     a l l o w M u l t i p l e   :   t r u e , 
     d e t a c h a b l e         :   t r u e , 
     c l o s a b l e             :   t r u e , 
     c o n t e x t               :   ' b o d y ' , 
 
     d u r a t i o n             :   5 0 0 , 
     e a s i n g                 :   ' e a s e O u t E x p o ' , 
     o f f s e t                 :   0 , 
     t r a n s i t i o n         :   ' s c a l e ' , 
 
     p a d d i n g               :   3 0 , 
 
     o n S h o w                 :   f u n c t i o n ( ) { } , 
     o n H i d e                 :   f u n c t i o n ( ) { } , 
 
     o n V i s i b l e           :   f u n c t i o n ( ) { } , 
     o n H i d d e n             :   f u n c t i o n ( ) { } , 
 
     o n A p p r o v e           :   f u n c t i o n ( ) {   r e t u r n   t r u e ;   } , 
     o n D e n y                 :   f u n c t i o n ( ) {   r e t u r n   t r u e ;   } , 
 
     s e l e c t o r         :   { 
         c l o s e         :   ' . c l o s e ,   . a c t i o n s   . b u t t o n ' , 
         a p p r o v e     :   ' . a c t i o n s   . p o s i t i v e ,   . a c t i o n s   . a p p r o v e ,   . a c t i o n s   . o k ' , 
         d e n y           :   ' . a c t i o n s   . n e g a t i v e ,   . a c t i o n s   . d e n y ,   . a c t i o n s   . c a n c e l ' , 
         m o d a l         :   ' . u i . m o d a l ' 
     } , 
     e r r o r   :   { 
         d i m m e r         :   ' U I   D i m m e r ,   a   r e q u i r e d   c o m p o n e n t   i s   n o t   i n c l u d e d   i n   t h i s   p a g e ' , 
         m e t h o d         :   ' T h e   m e t h o d   y o u   c a l l e d   i s   n o t   d e f i n e d . ' 
     } , 
     c l a s s N a m e   :   { 
         a c t i v e         :   ' a c t i v e ' , 
         s c r o l l i n g   :   ' s c r o l l i n g ' 
     } 
 } ; 
 
 
 } ) (   j Q u e r y ,   w i n d o w   ,   d o c u m e n t   ) ; 
 / * 
   *   #   S e m a n t i c   -   N a g 
   *   h t t p : / / g i t h u b . c o m / j l u k i c / s e m a n t i c - u i / 
   * 
   * 
   *   C o p y r i g h t   2 0 1 3   C o n t r i b u t o r s 
   *   R e l e a s e d   u n d e r   t h e   M I T   l i c e n s e 
   *   h t t p : / / o p e n s o u r c e . o r g / l i c e n s e s / M I T 
   * 
   * / 
 
 ; ( f u n c t i o n   ( $ ,   w i n d o w ,   d o c u m e n t ,   u n d e f i n e d )   { 
 
 $ . f n . n a g   =   f u n c t i o n ( p a r a m e t e r s )   { 
     v a r 
         $ a l l M o d u l e s           =   $ ( t h i s ) , 
         m o d u l e S e l e c t o r     =   $ a l l M o d u l e s . s e l e c t o r   | |   ' ' , 
 
         t i m e                         =   n e w   D a t e ( ) . g e t T i m e ( ) , 
         p e r f o r m a n c e           =   [ ] , 
 
         q u e r y                       =   a r g u m e n t s [ 0 ] , 
         m e t h o d I n v o k e d       =   ( t y p e o f   q u e r y   = =   ' s t r i n g ' ) , 
         q u e r y A r g u m e n t s     =   [ ] . s l i c e . c a l l ( a r g u m e n t s ,   1 ) , 
         r e t u r n e d V a l u e 
     ; 
     $ ( t h i s ) 
         . e a c h ( f u n c t i o n ( )   { 
             v a r 
                 s e t t i n g s                 =   $ . e x t e n d ( t r u e ,   { } ,   $ . f n . n a g . s e t t i n g s ,   p a r a m e t e r s ) , 
 
                 c l a s s N a m e               =   s e t t i n g s . c l a s s N a m e , 
                 s e l e c t o r                 =   s e t t i n g s . s e l e c t o r , 
                 e r r o r                       =   s e t t i n g s . e r r o r , 
                 n a m e s p a c e               =   s e t t i n g s . n a m e s p a c e , 
 
                 e v e n t N a m e s p a c e     =   ' . '   +   n a m e s p a c e , 
                 m o d u l e N a m e s p a c e   =   n a m e s p a c e   +   ' - m o d u l e ' , 
 
                 $ m o d u l e                   =   $ ( t h i s ) , 
 
                 $ c l o s e                     =   $ m o d u l e . f i n d ( s e l e c t o r . c l o s e ) , 
                 $ c o n t e x t                 =   $ ( s e t t i n g s . c o n t e x t ) , 
 
 
                 e l e m e n t                   =   t h i s , 
                 i n s t a n c e                 =   $ m o d u l e . d a t a ( m o d u l e N a m e s p a c e ) , 
 
                 m o d u l e O f f s e t , 
                 m o d u l e H e i g h t , 
 
                 c o n t e x t W i d t h , 
                 c o n t e x t H e i g h t , 
                 c o n t e x t O f f s e t , 
 
                 y O f f s e t , 
                 y P o s i t i o n , 
 
                 t i m e r , 
                 m o d u l e , 
 
                 r e q u e s t A n i m a t i o n F r a m e   =   w i n d o w . r e q u e s t A n i m a t i o n F r a m e 
                     | |   w i n d o w . m o z R e q u e s t A n i m a t i o n F r a m e 
                     | |   w i n d o w . w e b k i t R e q u e s t A n i m a t i o n F r a m e 
                     | |   w i n d o w . m s R e q u e s t A n i m a t i o n F r a m e 
                     | |   f u n c t i o n ( c a l l b a c k )   {   s e t T i m e o u t ( c a l l b a c k ,   0 ) ;   } 
             ; 
             m o d u l e   =   { 
 
                 i n i t i a l i z e :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' I n i t i a l i z i n g   e l e m e n t ' ) ; 
                     / /   c a l c u l a t e   m o d u l e   o f f s e t   o n c e 
                     m o d u l e O f f s e t     =   $ m o d u l e . o f f s e t ( ) ; 
                     m o d u l e H e i g h t     =   $ m o d u l e . o u t e r H e i g h t ( ) ; 
                     c o n t e x t W i d t h     =   $ c o n t e x t . o u t e r W i d t h ( ) ; 
                     c o n t e x t H e i g h t   =   $ c o n t e x t . o u t e r H e i g h t ( ) ; 
                     c o n t e x t O f f s e t   =   $ c o n t e x t . o f f s e t ( ) ; 
 
                     $ m o d u l e 
                         . d a t a ( m o d u l e N a m e s p a c e ,   m o d u l e ) 
                     ; 
                     $ c l o s e 
                         . o n ( ' c l i c k '   +   e v e n t N a m e s p a c e ,   m o d u l e . d i s m i s s ) 
                     ; 
                     / /   l e t s   a v o i d   j a v a s c r i p t   i f   w e   d o n t   n e e d   t o   r e p o s i t i o n 
                     i f ( s e t t i n g s . c o n t e x t   = =   w i n d o w   & &   s e t t i n g s . p o s i t i o n   = =   ' f i x e d ' )   { 
                         $ m o d u l e 
                             . a d d C l a s s ( c l a s s N a m e . f i x e d ) 
                         ; 
                     } 
                     i f ( s e t t i n g s . s t i c k y )   { 
                         m o d u l e . v e r b o s e ( ' A d d i n g   s c r o l l   e v e n t s ' ) ; 
                         / /   r e t r i g g e r   o n   s c r o l l   f o r   a b s o l u t e 
                         i f ( s e t t i n g s . p o s i t i o n   = =   ' a b s o l u t e ' )   { 
                             $ c o n t e x t 
                                 . o n ( ' s c r o l l '   +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . s c r o l l ) 
                                 . o n ( ' r e s i z e '   +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . s c r o l l ) 
                             ; 
                         } 
                         / /   f i x e d   i s   a l w a y s   r e l a t i v e   t o   w i n d o w 
                         e l s e   { 
                             $ ( w i n d o w ) 
                                 . o n ( ' s c r o l l '   +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . s c r o l l ) 
                                 . o n ( ' r e s i z e '   +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . s c r o l l ) 
                             ; 
                         } 
                         / /   f i r e   o n c e   t o   p o s i t i o n   o n   i n i t 
                         $ . p r o x y ( m o d u l e . e v e n t . s c r o l l ,   t h i s ) ( ) ; 
                     } 
 
                     i f ( s e t t i n g s . d i s p l a y T i m e   >   0 )   { 
                         s e t T i m e o u t ( m o d u l e . h i d e ,   s e t t i n g s . d i s p l a y T i m e ) ; 
                     } 
                     i f ( m o d u l e . s h o u l d . s h o w ( ) )   { 
                         i f (   ! $ m o d u l e . i s ( ' : v i s i b l e ' )   )   { 
                             m o d u l e . s h o w ( ) ; 
                         } 
                     } 
                     e l s e   { 
                         m o d u l e . h i d e ( ) ; 
                     } 
                 } , 
 
                 d e s t r o y :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' D e s t r o y i n g   i n s t a n c e ' ) ; 
                     $ m o d u l e 
                         . r e m o v e D a t a ( m o d u l e N a m e s p a c e ) 
                         . o f f ( e v e n t N a m e s p a c e ) 
                     ; 
                     i f ( s e t t i n g s . s t i c k y )   { 
                         $ c o n t e x t 
                             . o f f ( e v e n t N a m e s p a c e ) 
                         ; 
                     } 
                 } , 
 
                 r e f r e s h :   f u n c t i o n ( )   { 
                     m o d u l e . d e b u g ( ' R e f r e s h i n g   c a c h e d   c a l c u l a t i o n s ' ) ; 
                     m o d u l e O f f s e t     =   $ m o d u l e . o f f s e t ( ) ; 
                     m o d u l e H e i g h t     =   $ m o d u l e . o u t e r H e i g h t ( ) ; 
                     c o n t e x t W i d t h     =   $ c o n t e x t . o u t e r W i d t h ( ) ; 
                     c o n t e x t H e i g h t   =   $ c o n t e x t . o u t e r H e i g h t ( ) ; 
                     c o n t e x t O f f s e t   =   $ c o n t e x t . o f f s e t ( ) ; 
                 } , 
 
                 s h o w :   f u n c t i o n ( )   { 
                     m o d u l e . d e b u g ( ' S h o w i n g   n a g ' ,   s e t t i n g s . a n i m a t i o n . s h o w ) ; 
                     i f ( s e t t i n g s . a n i m a t i o n . s h o w   = =   ' f a d e ' )   { 
                         $ m o d u l e 
                             . f a d e I n ( s e t t i n g s . d u r a t i o n ,   s e t t i n g s . e a s i n g ) 
                         ; 
                     } 
                     e l s e   { 
                         $ m o d u l e 
                             . s l i d e D o w n ( s e t t i n g s . d u r a t i o n ,   s e t t i n g s . e a s i n g ) 
                         ; 
                     } 
                 } , 
 
                 h i d e :   f u n c t i o n ( )   { 
                     m o d u l e . d e b u g ( ' S h o w i n g   n a g ' ,   s e t t i n g s . a n i m a t i o n . h i d e ) ; 
                     i f ( s e t t i n g s . a n i m a t i o n . s h o w   = =   ' f a d e ' )   { 
                         $ m o d u l e 
                             . f a d e I n ( s e t t i n g s . d u r a t i o n ,   s e t t i n g s . e a s i n g ) 
                         ; 
                     } 
                     e l s e   { 
                         $ m o d u l e 
                             . s l i d e U p ( s e t t i n g s . d u r a t i o n ,   s e t t i n g s . e a s i n g ) 
                         ; 
                     } 
                 } , 
 
                 o n H i d e :   f u n c t i o n ( )   { 
                     m o d u l e . d e b u g ( ' R e m o v i n g   n a g ' ,   s e t t i n g s . a n i m a t i o n . h i d e ) ; 
                     $ m o d u l e . r e m o v e ( ) ; 
                     i f   ( s e t t i n g s . o n H i d e )   { 
                         s e t t i n g s . o n H i d e ( ) ; 
                     } 
                 } , 
 
                 s t i c k :   f u n c t i o n ( )   { 
                     m o d u l e . r e f r e s h ( ) ; 
 
                     i f ( s e t t i n g s . p o s i t i o n   = =   ' f i x e d ' )   { 
                         v a r 
                             w i n d o w S c r o l l   =   $ ( w i n d o w ) . p r o p ( ' p a g e Y O f f s e t ' )   | |   $ ( w i n d o w ) . s c r o l l T o p ( ) , 
                             f i x e d O f f s e t   =   (   $ m o d u l e . h a s C l a s s ( c l a s s N a m e . b o t t o m )   ) 
                                 ?   c o n t e x t O f f s e t . t o p   +   ( c o n t e x t H e i g h t   -   m o d u l e H e i g h t )   -   w i n d o w S c r o l l 
                                 :   c o n t e x t O f f s e t . t o p   -   w i n d o w S c r o l l 
                         ; 
                         $ m o d u l e 
                             . c s s ( { 
                                 p o s i t i o n   :   ' f i x e d ' , 
                                 t o p             :   f i x e d O f f s e t , 
                                 l e f t           :   c o n t e x t O f f s e t . l e f t , 
                                 w i d t h         :   c o n t e x t W i d t h   -   s e t t i n g s . s c r o l l B a r W i d t h 
                             } ) 
                         ; 
                     } 
                     e l s e   { 
                         $ m o d u l e 
                             . c s s ( { 
                                 t o p   :   y P o s i t i o n 
                             } ) 
                         ; 
                     } 
                 } , 
                 u n S t i c k :   f u n c t i o n ( )   { 
                     $ m o d u l e 
                         . c s s ( { 
                             t o p   :   ' ' 
                         } ) 
                     ; 
                 } , 
                 d i s m i s s :   f u n c t i o n ( e v e n t )   { 
                     i f ( s e t t i n g s . s t o r a g e M e t h o d )   { 
                         m o d u l e . s t o r a g e . s e t ( s e t t i n g s . s t o r e d K e y ,   s e t t i n g s . s t o r e d V a l u e ) ; 
                     } 
                     m o d u l e . h i d e ( ) ; 
                     e v e n t . s t o p I m m e d i a t e P r o p a g a t i o n ( ) ; 
                     e v e n t . p r e v e n t D e f a u l t ( ) ; 
                 } , 
 
                 s h o u l d :   { 
                     s h o w :   f u n c t i o n ( )   { 
                         i f ( s e t t i n g s . p e r s i s t )   { 
                             m o d u l e . d e b u g ( ' P e r s i s t e n t   n a g   i s   s e t ,   c a n   s h o w   n a g ' ) ; 
                             r e t u r n   t r u e ; 
                         } 
                         i f ( m o d u l e . s t o r a g e . g e t ( s e t t i n g s . s t o r e d K e y )   ! =   s e t t i n g s . s t o r e d V a l u e )   { 
                             m o d u l e . d e b u g ( ' S t o r e d   v a l u e   i s   n o t   s e t ,   c a n   s h o w   n a g ' ,   m o d u l e . s t o r a g e . g e t ( s e t t i n g s . s t o r e d K e y ) ) ; 
                             r e t u r n   t r u e ; 
                         } 
                         m o d u l e . d e b u g ( ' S t o r e d   v a l u e   i s   s e t ,   c a n n o t   s h o w   n a g ' ,   m o d u l e . s t o r a g e . g e t ( s e t t i n g s . s t o r e d K e y ) ) ; 
                         r e t u r n   f a l s e ; 
                     } , 
                     s t i c k :   f u n c t i o n ( )   { 
                         y O f f s e t       =   $ c o n t e x t . p r o p ( ' p a g e Y O f f s e t ' )   | |   $ c o n t e x t . s c r o l l T o p ( ) ; 
                         y P o s i t i o n   =   (   $ m o d u l e . h a s C l a s s ( c l a s s N a m e . b o t t o m )   ) 
                             ?   ( c o n t e x t H e i g h t   -   $ m o d u l e . o u t e r H e i g h t ( )   )   +   y O f f s e t 
                             :   y O f f s e t 
                         ; 
                         / /   a b s o l u t e   p o s i t i o n   c a l c u l a t e d   w h e n   y   o f f s e t   m e t 
                         i f ( y P o s i t i o n   >   m o d u l e O f f s e t . t o p )   { 
                             r e t u r n   t r u e ; 
                         } 
                         e l s e   i f ( s e t t i n g s . p o s i t i o n   = =   ' f i x e d ' )   { 
                             r e t u r n   t r u e ; 
                         } 
                         r e t u r n   f a l s e ; 
                     } 
                 } , 
 
                 s t o r a g e :   { 
 
                     s e t :   f u n c t i o n ( k e y ,   v a l u e )   { 
                         m o d u l e . d e b u g ( ' S e t t i n g   s t o r e d   v a l u e ' ,   k e y ,   v a l u e ,   s e t t i n g s . s t o r a g e M e t h o d ) ; 
                         i f ( s e t t i n g s . s t o r a g e M e t h o d   = =   ' l o c a l '   & &   w i n d o w . s t o r e   ! = =   u n d e f i n e d )   { 
                             w i n d o w . s t o r e . s e t ( k e y ,   v a l u e ) ; 
                         } 
                         / /   s t o r e   b y   c o o k i e 
                         e l s e   i f ( $ . c o o k i e   ! = =   u n d e f i n e d )   { 
                             $ . c o o k i e ( k e y ,   v a l u e ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . e r r o r ( e r r o r . n o S t o r a g e ) ; 
                         } 
                     } , 
                     g e t :   f u n c t i o n ( k e y )   { 
                         m o d u l e . d e b u g ( ' G e t t i n g   s t o r e d   v a l u e ' ,   k e y ,   s e t t i n g s . s t o r a g e M e t h o d ) ; 
                         i f ( s e t t i n g s . s t o r a g e M e t h o d   = =   ' l o c a l '   & &   w i n d o w . s t o r e   ! = =   u n d e f i n e d )   { 
                             r e t u r n   w i n d o w . s t o r e . g e t ( k e y ) ; 
                         } 
                         / /   g e t   b y   c o o k i e 
                         e l s e   i f ( $ . c o o k i e   ! = =   u n d e f i n e d )   { 
                             r e t u r n   $ . c o o k i e ( k e y ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . e r r o r ( e r r o r . n o S t o r a g e ) ; 
                         } 
                     } 
 
                 } , 
 
                 e v e n t :   { 
                     s c r o l l :   f u n c t i o n ( )   { 
                         i f ( t i m e r   ! = =   u n d e f i n e d )   { 
                             c l e a r T i m e o u t ( t i m e r ) ; 
                         } 
                         t i m e r   =   s e t T i m e o u t ( f u n c t i o n ( )   { 
                             i f ( m o d u l e . s h o u l d . s t i c k ( )   )   { 
                                 r e q u e s t A n i m a t i o n F r a m e ( m o d u l e . s t i c k ) ; 
                             } 
                             e l s e   { 
                                 m o d u l e . u n S t i c k ( ) ; 
                             } 
                         } ,   s e t t i n g s . l a g ) ; 
                     } 
                 } , 
                 s e t t i n g :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                     i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                         $ . e x t e n d ( t r u e ,   s e t t i n g s ,   n a m e ) ; 
                     } 
                     e l s e   i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                         s e t t i n g s [ n a m e ]   =   v a l u e ; 
                     } 
                     e l s e   { 
                         r e t u r n   s e t t i n g s [ n a m e ] ; 
                     } 
                 } , 
                 i n t e r n a l :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                     m o d u l e . d e b u g ( ' C h a n g i n g   i n t e r n a l ' ,   n a m e ,   v a l u e ) ; 
                     i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                         i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                             $ . e x t e n d ( t r u e ,   m o d u l e ,   n a m e ) ; 
                         } 
                         e l s e   { 
                             m o d u l e [ n a m e ]   =   v a l u e ; 
                         } 
                     } 
                     e l s e   { 
                         r e t u r n   m o d u l e [ n a m e ] ; 
                     } 
                 } , 
                 d e b u g :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . d e b u g )   { 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . d e b u g   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                             m o d u l e . d e b u g . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                         } 
                     } 
                 } , 
                 v e r b o s e :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . v e r b o s e   & &   s e t t i n g s . d e b u g )   { 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . v e r b o s e   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                             m o d u l e . v e r b o s e . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                         } 
                     } 
                 } , 
                 e r r o r :   f u n c t i o n ( )   { 
                     m o d u l e . e r r o r   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . e r r o r ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                     m o d u l e . e r r o r . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                 } , 
                 p e r f o r m a n c e :   { 
                     l o g :   f u n c t i o n ( m e s s a g e )   { 
                         v a r 
                             c u r r e n t T i m e , 
                             e x e c u t i o n T i m e , 
                             p r e v i o u s T i m e 
                         ; 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             c u r r e n t T i m e       =   n e w   D a t e ( ) . g e t T i m e ( ) ; 
                             p r e v i o u s T i m e     =   t i m e   | |   c u r r e n t T i m e ; 
                             e x e c u t i o n T i m e   =   c u r r e n t T i m e   -   p r e v i o u s T i m e ; 
                             t i m e                     =   c u r r e n t T i m e ; 
                             p e r f o r m a n c e . p u s h ( { 
                                 ' E l e m e n t '                 :   e l e m e n t , 
                                 ' N a m e '                       :   m e s s a g e [ 0 ] , 
                                 ' A r g u m e n t s '             :   [ ] . s l i c e . c a l l ( m e s s a g e ,   1 )   | |   ' ' , 
                                 ' E x e c u t i o n   T i m e '   :   e x e c u t i o n T i m e 
                             } ) ; 
                         } 
                         c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                         m o d u l e . p e r f o r m a n c e . t i m e r   =   s e t T i m e o u t ( m o d u l e . p e r f o r m a n c e . d i s p l a y ,   1 0 0 ) ; 
                     } , 
                     d i s p l a y :   f u n c t i o n ( )   { 
                         v a r 
                             t i t l e   =   s e t t i n g s . n a m e   +   ' : ' , 
                             t o t a l T i m e   =   0 
                         ; 
                         t i m e   =   f a l s e ; 
                         c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                         $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                             t o t a l T i m e   + =   d a t a [ ' E x e c u t i o n   T i m e ' ] ; 
                         } ) ; 
                         t i t l e   + =   '   '   +   t o t a l T i m e   +   ' m s ' ; 
                         i f ( m o d u l e S e l e c t o r )   { 
                             t i t l e   + =   '   \ ' '   +   m o d u l e S e l e c t o r   +   ' \ ' ' ; 
                         } 
                         i f ( $ a l l M o d u l e s . s i z e ( )   >   1 )   { 
                             t i t l e   + =   '   '   +   ' ( '   +   $ a l l M o d u l e s . s i z e ( )   +   ' ) ' ; 
                         } 
                         i f (   ( c o n s o l e . g r o u p   ! = =   u n d e f i n e d   | |   c o n s o l e . t a b l e   ! = =   u n d e f i n e d )   & &   p e r f o r m a n c e . l e n g t h   >   0 )   { 
                             c o n s o l e . g r o u p C o l l a p s e d ( t i t l e ) ; 
                             i f ( c o n s o l e . t a b l e )   { 
                                 c o n s o l e . t a b l e ( p e r f o r m a n c e ) ; 
                             } 
                             e l s e   { 
                                 $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                                     c o n s o l e . l o g ( d a t a [ ' N a m e ' ]   +   ' :   '   +   d a t a [ ' E x e c u t i o n   T i m e ' ] + ' m s ' ) ; 
                                 } ) ; 
                             } 
                             c o n s o l e . g r o u p E n d ( ) ; 
                         } 
                         p e r f o r m a n c e   =   [ ] ; 
                     } 
                 } , 
                 i n v o k e :   f u n c t i o n ( q u e r y ,   p a s s e d A r g u m e n t s ,   c o n t e x t )   { 
                     v a r 
                         o b j e c t   =   i n s t a n c e , 
                         m a x D e p t h , 
                         f o u n d , 
                         r e s p o n s e 
                     ; 
                     p a s s e d A r g u m e n t s   =   p a s s e d A r g u m e n t s   | |   q u e r y A r g u m e n t s ; 
                     c o n t e x t                   =   e l e m e n t                   | |   c o n t e x t ; 
                     i f ( t y p e o f   q u e r y   = =   ' s t r i n g '   & &   o b j e c t   ! = =   u n d e f i n e d )   { 
                         q u e r y         =   q u e r y . s p l i t ( / [ \ .   ] / ) ; 
                         m a x D e p t h   =   q u e r y . l e n g t h   -   1 ; 
                         $ . e a c h ( q u e r y ,   f u n c t i o n ( d e p t h ,   v a l u e )   { 
                             v a r   c a m e l C a s e V a l u e   =   ( d e p t h   ! =   m a x D e p t h ) 
                                 ?   v a l u e   +   q u e r y [ d e p t h   +   1 ] . c h a r A t ( 0 ) . t o U p p e r C a s e ( )   +   q u e r y [ d e p t h   +   1 ] . s l i c e ( 1 ) 
                                 :   q u e r y 
                             ; 
                             i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ c a m e l C a s e V a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                                 o b j e c t   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                             } 
                             e l s e   i f (   o b j e c t [ c a m e l C a s e V a l u e ]   ! = =   u n d e f i n e d   )   { 
                                 f o u n d   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                                 r e t u r n   f a l s e ; 
                             } 
                             e l s e   i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ v a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                                 o b j e c t   =   o b j e c t [ v a l u e ] ; 
                             } 
                             e l s e   i f (   o b j e c t [ v a l u e ]   ! = =   u n d e f i n e d   )   { 
                                 f o u n d   =   o b j e c t [ v a l u e ] ; 
                                 r e t u r n   f a l s e ; 
                             } 
                             e l s e   { 
                                 r e t u r n   f a l s e ; 
                             } 
                         } ) ; 
                     } 
                     i f   (   $ . i s F u n c t i o n (   f o u n d   )   )   { 
                         r e s p o n s e   =   f o u n d . a p p l y ( c o n t e x t ,   p a s s e d A r g u m e n t s ) ; 
                     } 
                     e l s e   i f ( f o u n d   ! = =   u n d e f i n e d )   { 
                         r e s p o n s e   =   f o u n d ; 
                     } 
                     i f ( $ . i s A r r a y ( r e t u r n e d V a l u e ) )   { 
                         r e t u r n e d V a l u e . p u s h ( r e s p o n s e ) ; 
                     } 
                     e l s e   i f ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d )   { 
                         r e t u r n e d V a l u e   =   [ r e t u r n e d V a l u e ,   r e s p o n s e ] ; 
                     } 
                     e l s e   i f ( r e s p o n s e   ! = =   u n d e f i n e d )   { 
                         r e t u r n e d V a l u e   =   r e s p o n s e ; 
                     } 
                     r e t u r n   f o u n d ; 
                 } 
             } ; 
             i f ( m e t h o d I n v o k e d )   { 
                 i f ( i n s t a n c e   = = =   u n d e f i n e d )   { 
                     m o d u l e . i n i t i a l i z e ( ) ; 
                 } 
                 m o d u l e . i n v o k e ( q u e r y ) ; 
             } 
             e l s e   { 
                 i f ( i n s t a n c e   ! = =   u n d e f i n e d )   { 
                     m o d u l e . d e s t r o y ( ) ; 
                 } 
                 m o d u l e . i n i t i a l i z e ( ) ; 
             } 
 
         } ) 
     ; 
     r e t u r n   ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d ) 
         ?   r e t u r n e d V a l u e 
         :   t h i s 
     ; 
 } ; 
 
 $ . f n . n a g . s e t t i n g s   =   { 
 
     n a m e                 :   ' N a g ' , 
 
     d e b u g               :   f a l s e , 
     v e r b o s e           :   t r u e , 
     p e r f o r m a n c e   :   t r u e , 
 
     n a m e s p a c e       :   ' N a g ' , 
 
     / /   a l l o w s   c o o k i e   t o   b e   o v e r r i d e n 
     p e r s i s t           :   f a l s e , 
 
     / /   s e t   t o   z e r o   t o   m a n u a l l y   d i s m i s s ,   o t h e r w i s e   h i d e s   o n   i t s   o w n 
     d i s p l a y T i m e   :   0 , 
 
     a n i m a t i o n       :   { 
         s h o w :   ' s l i d e ' , 
         h i d e :   ' s l i d e ' 
     } , 
 
     / /   m e t h o d   o f   s t i c k y n e s s 
     p o s i t i o n               :   ' f i x e d ' , 
     s c r o l l B a r W i d t h   :   1 8 , 
 
     / /   t y p e   o f   s t o r a g e   t o   u s e 
     s t o r a g e M e t h o d     :   ' c o o k i e ' , 
 
     / /   v a l u e   t o   s t o r e   i n   d i s m i s s e d   l o c a l s t o r a g e / c o o k i e 
     s t o r e d K e y             :   ' n a g ' , 
     s t o r e d V a l u e         :   ' d i s m i s s ' , 
 
     / /   n e e d   t o   c a l c u l a t e   s t i c k y n e s s   o n   s c r o l l 
     s t i c k y                   :   f a l s e , 
 
     / /   h o w   o f t e n   t o   c h e c k   s c r o l l   e v e n t 
     l a g                         :   0 , 
 
     / /   c o n t e x t   f o r   s c r o l l   e v e n t 
     c o n t e x t                 :   w i n d o w , 
 
     e r r o r :   { 
         n o S t o r a g e     :   ' N e i t h e r   $ . c o o k i e   o r   s t o r e   i s   d e f i n e d .   A   s t o r a g e   s o l u t i o n   i s   r e q u i r e d   f o r   s t o r i n g   s t a t e ' , 
         m e t h o d         :   ' T h e   m e t h o d   y o u   c a l l e d   i s   n o t   d e f i n e d . ' 
     } , 
 
     c l a s s N a m e           :   { 
         b o t t o m             :   ' b o t t o m ' , 
         f i x e d               :   ' f i x e d ' 
     } , 
 
     s e l e c t o r             :   { 
         c l o s e :   ' . i c o n . c l o s e ' 
     } , 
 
     s p e e d                   :   5 0 0 , 
     e a s i n g                 :   ' e a s e O u t Q u a d ' , 
 
     o n H i d e :   f u n c t i o n ( )   { } 
 
 } ; 
 
 } ) (   j Q u e r y ,   w i n d o w   ,   d o c u m e n t   ) ; 
 
 / * 
   *   #   S e m a n t i c   -   P o p u p 
   *   h t t p : / / g i t h u b . c o m / j l u k i c / s e m a n t i c - u i / 
   * 
   * 
   *   C o p y r i g h t   2 0 1 3   C o n t r i b u t o r s 
   *   R e l e a s e d   u n d e r   t h e   M I T   l i c e n s e 
   *   h t t p : / / o p e n s o u r c e . o r g / l i c e n s e s / M I T 
   * 
   * / 
 
 ; ( f u n c t i o n   ( $ ,   w i n d o w ,   d o c u m e n t ,   u n d e f i n e d )   { 
 
 $ . f n . p o p u p   =   f u n c t i o n ( p a r a m e t e r s )   { 
     v a r 
         $ a l l M o d u l e s           =   $ ( t h i s ) , 
         $ d o c u m e n t               =   $ ( d o c u m e n t ) , 
 
         m o d u l e S e l e c t o r     =   $ a l l M o d u l e s . s e l e c t o r   | |   ' ' , 
 
         t i m e                         =   n e w   D a t e ( ) . g e t T i m e ( ) , 
         p e r f o r m a n c e           =   [ ] , 
 
         q u e r y                       =   a r g u m e n t s [ 0 ] , 
         m e t h o d I n v o k e d       =   ( t y p e o f   q u e r y   = =   ' s t r i n g ' ) , 
         q u e r y A r g u m e n t s     =   [ ] . s l i c e . c a l l ( a r g u m e n t s ,   1 ) , 
 
         r e t u r n e d V a l u e 
     ; 
     $ a l l M o d u l e s 
         . e a c h ( f u n c t i o n ( )   { 
             v a r 
                 s e t t i n g s                 =   (   $ . i s P l a i n O b j e c t ( p a r a m e t e r s )   ) 
                     ?   $ . e x t e n d ( t r u e ,   { } ,   $ . f n . p o p u p . s e t t i n g s ,   p a r a m e t e r s ) 
                     :   $ . e x t e n d ( { } ,   $ . f n . p o p u p . s e t t i n g s ) , 
 
                 s e l e c t o r                 =   s e t t i n g s . s e l e c t o r , 
                 c l a s s N a m e               =   s e t t i n g s . c l a s s N a m e , 
                 e r r o r                       =   s e t t i n g s . e r r o r , 
                 m e t a d a t a                 =   s e t t i n g s . m e t a d a t a , 
                 n a m e s p a c e               =   s e t t i n g s . n a m e s p a c e , 
 
                 e v e n t N a m e s p a c e     =   ' . '   +   s e t t i n g s . n a m e s p a c e , 
                 m o d u l e N a m e s p a c e   =   ' m o d u l e - '   +   n a m e s p a c e , 
 
                 $ m o d u l e                   =   $ ( t h i s ) , 
                 $ c o n t e x t                 =   $ ( s e t t i n g s . c o n t e x t ) , 
                 $ t a r g e t                   =   ( s e t t i n g s . t a r g e t ) 
                     ?   $ ( s e t t i n g s . t a r g e t ) 
                     :   $ m o d u l e , 
 
                 $ w i n d o w                   =   $ ( w i n d o w ) , 
 
                 $ o f f s e t P a r e n t       =   ( s e t t i n g s . i n l i n e ) 
                     ?   $ t a r g e t . o f f s e t P a r e n t ( ) 
                     :   $ w i n d o w , 
                 $ p o p u p                     =   ( s e t t i n g s . i n l i n e ) 
                     ?   $ t a r g e t . n e x t ( s e t t i n g s . s e l e c t o r . p o p u p ) 
                     :   $ w i n d o w . c h i l d r e n ( s e t t i n g s . s e l e c t o r . p o p u p ) . l a s t ( ) , 
 
                 s e a r c h D e p t h           =   0 , 
 
                 e l e m e n t                   =   t h i s , 
                 i n s t a n c e                 =   $ m o d u l e . d a t a ( m o d u l e N a m e s p a c e ) , 
                 m o d u l e 
             ; 
 
             m o d u l e   =   { 
 
                 / /   b i n d s   e v e n t s 
                 i n i t i a l i z e :   f u n c t i o n ( )   { 
                     m o d u l e . d e b u g ( ' I n i t i a l i z i n g   m o d u l e ' ,   $ m o d u l e ) ; 
                     i f ( s e t t i n g s . o n   = =   ' c l i c k ' )   { 
                         $ m o d u l e 
                             . o n ( ' c l i c k ' ,   m o d u l e . t o g g l e ) 
                         ; 
                     } 
                     e l s e   { 
                         $ m o d u l e 
                             . o n ( m o d u l e . g e t . s t a r t E v e n t ( )   +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . s t a r t ) 
                             . o n ( m o d u l e . g e t . e n d E v e n t ( )   +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . e n d ) 
                         ; 
                     } 
                     i f ( s e t t i n g s . t a r g e t )   { 
                         m o d u l e . d e b u g ( ' T a r g e t   s e t   t o   e l e m e n t ' ,   $ t a r g e t ) ; 
                     } 
                     $ w i n d o w 
                         . o n ( ' r e s i z e '   +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . r e s i z e ) 
                     ; 
                     m o d u l e . i n s t a n t i a t e ( ) ; 
                 } , 
 
                 i n s t a n t i a t e :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' S t o r i n g   i n s t a n c e   o f   m o d u l e ' ,   m o d u l e ) ; 
                     i n s t a n c e   =   m o d u l e ; 
                     $ m o d u l e 
                         . d a t a ( m o d u l e N a m e s p a c e ,   i n s t a n c e ) 
                     ; 
                 } , 
 
                 r e f r e s h :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . i n l i n e )   { 
                         $ p o p u p   =   $ t a r g e t . n e x t ( s e l e c t o r . p o p u p ) ; 
                         $ o f f s e t P a r e n t   =   $ t a r g e t . o f f s e t P a r e n t ( ) ; 
                     } 
                     e l s e   { 
                         $ p o p u p   =   $ w i n d o w . c h i l d r e n ( s e l e c t o r . p o p u p ) . l a s t ( ) ; 
                     } 
                 } , 
 
                 d e s t r o y :   f u n c t i o n ( )   { 
                     m o d u l e . d e b u g ( ' D e s t r o y i n g   p r e v i o u s   m o d u l e ' ) ; 
                     $ w i n d o w 
                         . o f f ( e v e n t N a m e s p a c e ) 
                     ; 
                     $ p o p u p 
                         . r e m o v e ( ) 
                     ; 
                     $ m o d u l e 
                         . o f f ( e v e n t N a m e s p a c e ) 
                         . r e m o v e D a t a ( m o d u l e N a m e s p a c e ) 
                     ; 
                 } , 
 
                 e v e n t :   { 
                     s t a r t :     f u n c t i o n ( e v e n t )   { 
                         m o d u l e . t i m e r   =   s e t T i m e o u t ( f u n c t i o n ( )   { 
                             i f (   m o d u l e . i s . h i d d e n ( )   )   { 
                                 m o d u l e . s h o w ( ) ; 
                             } 
                         } ,   s e t t i n g s . d e l a y ) ; 
                     } , 
                     e n d :     f u n c t i o n ( )   { 
                         c l e a r T i m e o u t ( m o d u l e . t i m e r ) ; 
                         i f (   m o d u l e . i s . v i s i b l e ( )   )   { 
                             m o d u l e . h i d e ( ) ; 
                         } 
                     } , 
                     r e s i z e :   f u n c t i o n ( )   { 
                         i f (   m o d u l e . i s . v i s i b l e ( )   )   { 
                             m o d u l e . s e t . p o s i t i o n ( ) ; 
                         } 
                     } 
                 } , 
 
                 / /   g e n e r a t e s   p o p u p   h t m l   f r o m   m e t a d a t a 
                 c r e a t e :   f u n c t i o n ( )   { 
                     m o d u l e . d e b u g ( ' C r e a t i n g   p o p - u p   h t m l ' ) ; 
                     v a r 
                         h t m l             =   $ m o d u l e . d a t a ( m e t a d a t a . h t m l )             | |   s e t t i n g s . h t m l , 
                         v a r i a t i o n   =   $ m o d u l e . d a t a ( m e t a d a t a . v a r i a t i o n )   | |   s e t t i n g s . v a r i a t i o n , 
                         t i t l e           =   $ m o d u l e . d a t a ( m e t a d a t a . t i t l e )           | |   s e t t i n g s . t i t l e , 
                         c o n t e n t       =   $ m o d u l e . d a t a ( m e t a d a t a . c o n t e n t )       | |   $ m o d u l e . a t t r ( ' t i t l e ' )   | |   s e t t i n g s . c o n t e n t 
                     ; 
                     i f ( h t m l   | |   c o n t e n t   | |   t i t l e )   { 
                         i f ( ! h t m l )   { 
                             h t m l   =   s e t t i n g s . t e m p l a t e ( { 
                                 t i t l e       :   t i t l e , 
                                 c o n t e n t   :   c o n t e n t 
                             } ) ; 
                         } 
                         $ p o p u p   =   $ ( ' < d i v / > ' ) 
                             . a d d C l a s s ( c l a s s N a m e . p o p u p ) 
                             . a d d C l a s s ( v a r i a t i o n ) 
                             . h t m l ( h t m l ) 
                         ; 
                         i f ( s e t t i n g s . i n l i n e )   { 
                             m o d u l e . v e r b o s e ( ' I n s e r t i n g   p o p u p   e l e m e n t   i n l i n e ' ,   $ p o p u p ) ; 
                             $ p o p u p 
                                 . d a t a ( m o d u l e N a m e s p a c e ,   i n s t a n c e ) 
                                 . i n s e r t A f t e r ( $ m o d u l e ) 
                             ; 
                         } 
                         e l s e   { 
                             m o d u l e . v e r b o s e ( ' A p p e n d i n g   p o p u p   e l e m e n t   t o   b o d y ' ,   $ p o p u p ) ; 
                             $ p o p u p 
                                 . d a t a ( m o d u l e N a m e s p a c e ,   i n s t a n c e ) 
                                 . a p p e n d T o (   $ c o n t e x t   ) 
                             ; 
                         } 
                         $ . p r o x y ( s e t t i n g s . o n C r e a t e ,   $ p o p u p ) ( ) ; 
                     } 
                     e l s e   { 
                         m o d u l e . e r r o r ( e r r o r . c o n t e n t ) ; 
                     } 
                 } , 
 
                 / /   d e t e r m i n e s   p o p u p   s t a t e 
                 t o g g l e :   f u n c t i o n ( )   { 
                     m o d u l e . d e b u g ( ' T o g g l i n g   p o p - u p ' ) ; 
                     i f (   m o d u l e . i s . h i d d e n ( )   )   { 
                         m o d u l e . d e b u g ( ' P o p u p   i s   h i d d e n ,   s h o w i n g   p o p - u p ' ) ; 
                         m o d u l e . u n b i n d . c l o s e ( ) ; 
                         m o d u l e . h i d e A l l ( ) ; 
                         m o d u l e . s h o w ( ) ; 
                     } 
                     e l s e   { 
                         m o d u l e . d e b u g ( ' P o p u p   i s   v i s i b l e ,   h i d i n g   p o p - u p ' ) ; 
                         m o d u l e . h i d e ( ) ; 
                     } 
                 } , 
 
                 s h o w :   f u n c t i o n ( c a l l b a c k )   { 
                     c a l l b a c k   =   c a l l b a c k   | |   f u n c t i o n ( ) { } ; 
                     m o d u l e . d e b u g ( ' S h o w i n g   p o p - u p ' ,   s e t t i n g s . t r a n s i t i o n ) ; 
                     i f ( ! s e t t i n g s . p r e s e r v e )   { 
                         m o d u l e . r e f r e s h ( ) ; 
                     } 
                     i f (   ! m o d u l e . e x i s t s ( )   )   { 
                         m o d u l e . c r e a t e ( ) ; 
                     } 
                     m o d u l e . s a v e . c o n d i t i o n s ( ) ; 
                     m o d u l e . s e t . p o s i t i o n ( ) ; 
                     m o d u l e . a n i m a t e . s h o w ( c a l l b a c k ) ; 
                 } , 
 
 
                 h i d e :   f u n c t i o n ( c a l l b a c k )   { 
                     c a l l b a c k   =   c a l l b a c k   | |   f u n c t i o n ( ) { } ; 
                     $ m o d u l e 
                         . r e m o v e C l a s s ( c l a s s N a m e . v i s i b l e ) 
                     ; 
                     m o d u l e . r e s t o r e . c o n d i t i o n s ( ) ; 
                     m o d u l e . u n b i n d . c l o s e ( ) ; 
                     i f (   m o d u l e . i s . v i s i b l e ( )   )   { 
                         m o d u l e . a n i m a t e . h i d e ( c a l l b a c k ) ; 
                     } 
                 } , 
 
                 h i d e A l l :   f u n c t i o n ( )   { 
                     $ ( s e l e c t o r . p o p u p ) 
                         . f i l t e r ( ' : v i s i b l e ' ) 
                             . p o p u p ( ' h i d e ' ) 
                     ; 
                 } , 
 
                 h i d e G r a c e f u l l y :   f u n c t i o n ( e v e n t )   { 
                     / /   d o n ' t   c l o s e   o n   c l i c k s   i n s i d e   p o p u p 
                     i f ( e v e n t   & &   $ ( e v e n t . t a r g e t ) . c l o s e s t ( s e l e c t o r . p o p u p ) . s i z e ( )   = = =   0 )   { 
                         m o d u l e . d e b u g ( ' C l i c k   o c c u r r e d   o u t s i d e   p o p u p   h i d i n g   p o p u p ' ) ; 
                         m o d u l e . h i d e ( ) ; 
                     } 
                     e l s e   { 
                         m o d u l e . d e b u g ( ' C l i c k   w a s   i n s i d e   p o p u p ,   k e e p i n g   p o p u p   o p e n ' ) ; 
                     } 
                 } , 
 
                 e x i s t s :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . i n l i n e )   { 
                         r e t u r n   (   $ p o p u p . s i z e ( )   ! = =   0   ) ; 
                     } 
                     e l s e   { 
                         r e t u r n   (   $ p o p u p . p a r e n t ( $ c o n t e x t ) . s i z e ( )   ) ; 
                     } 
                 } , 
 
                 r e m o v e :   f u n c t i o n ( )   { 
                     m o d u l e . d e b u g ( ' R e m o v i n g   p o p u p ' ) ; 
                     $ p o p u p 
                         . r e m o v e ( ) 
                     ; 
                 } , 
 
                 s a v e :   { 
                     c o n d i t i o n s :   f u n c t i o n ( )   { 
                         m o d u l e . c a c h e   =   { 
                             t i t l e :   $ m o d u l e . a t t r ( ' t i t l e ' ) 
                         } ; 
                         i f   ( m o d u l e . c a c h e . t i t l e )   { 
                             $ m o d u l e . r e m o v e A t t r ( ' t i t l e ' ) ; 
                         } 
                         m o d u l e . v e r b o s e ( ' S a v i n g   o r i g i n a l   a t t r i b u t e s ' ,   m o d u l e . c a c h e . t i t l e ) ; 
                     } 
                 } , 
                 r e s t o r e :   { 
                     c o n d i t i o n s :   f u n c t i o n ( )   { 
                         i f ( m o d u l e . c a c h e   & &   m o d u l e . c a c h e . t i t l e )   { 
                             $ m o d u l e . a t t r ( ' t i t l e ' ,   m o d u l e . c a c h e . t i t l e ) ; 
                             m o d u l e . v e r b o s e ( ' R e s t o r i n g   o r i g i n a l   a t t r i b u t e s ' ,   m o d u l e . c a c h e . t i t l e ) ; 
                         } 
                         r e t u r n   t r u e ; 
                     } 
                 } , 
                 a n i m a t e :   { 
                     s h o w :   f u n c t i o n ( c a l l b a c k )   { 
                         c a l l b a c k   =   c a l l b a c k   | |   f u n c t i o n ( ) { } ; 
                         $ m o d u l e 
                             . a d d C l a s s ( c l a s s N a m e . v i s i b l e ) 
                         ; 
                         i f ( s e t t i n g s . t r a n s i t i o n   & &   $ . f n . t r a n s i t i o n   ! = =   u n d e f i n e d   & &   $ m o d u l e . t r a n s i t i o n ( ' i s   s u p p o r t e d ' ) )   { 
                             $ p o p u p 
                                 . t r a n s i t i o n ( s e t t i n g s . t r a n s i t i o n   +   '   i n ' ,   s e t t i n g s . d u r a t i o n ,   f u n c t i o n ( )   { 
                                     m o d u l e . b i n d . c l o s e ( ) ; 
                                     $ . p r o x y ( c a l l b a c k ,   e l e m e n t ) ( ) ; 
                                 } ) 
                             ; 
                         } 
                         e l s e   { 
                             $ p o p u p 
                                 . s t o p ( ) 
                                 . f a d e I n ( s e t t i n g s . d u r a t i o n ,   s e t t i n g s . e a s i n g ,   f u n c t i o n ( )   { 
                                     m o d u l e . b i n d . c l o s e ( ) ; 
                                     $ . p r o x y ( c a l l b a c k ,   e l e m e n t ) ( ) ; 
                                 } ) 
                             ; 
                         } 
                         $ . p r o x y ( s e t t i n g s . o n S h o w ,   e l e m e n t ) ( ) ; 
                     } , 
                     h i d e :   f u n c t i o n ( c a l l b a c k )   { 
                         c a l l b a c k   =   c a l l b a c k   | |   f u n c t i o n ( ) { } ; 
                         m o d u l e . d e b u g ( ' H i d i n g   p o p - u p ' ) ; 
                         i f ( s e t t i n g s . t r a n s i t i o n   & &   $ . f n . t r a n s i t i o n   ! = =   u n d e f i n e d   & &   $ m o d u l e . t r a n s i t i o n ( ' i s   s u p p o r t e d ' ) )   { 
                             $ p o p u p 
                                 . t r a n s i t i o n ( s e t t i n g s . t r a n s i t i o n   +   '   o u t ' ,   s e t t i n g s . d u r a t i o n ,   f u n c t i o n ( )   { 
                                     m o d u l e . r e s e t ( ) ; 
                                     c a l l b a c k ( ) ; 
                                 } ) 
                             ; 
                         } 
                         e l s e   { 
                             $ p o p u p 
                                 . s t o p ( ) 
                                 . f a d e O u t ( s e t t i n g s . d u r a t i o n ,   s e t t i n g s . e a s i n g ,   f u n c t i o n ( )   { 
                                     m o d u l e . r e s e t ( ) ; 
                                     c a l l b a c k ( ) ; 
                                 } ) 
                             ; 
                         } 
                         $ . p r o x y ( s e t t i n g s . o n H i d e ,   e l e m e n t ) ( ) ; 
                     } 
                 } , 
 
                 g e t :   { 
                     s t a r t E v e n t :   f u n c t i o n ( )   { 
                         i f ( s e t t i n g s . o n   = =   ' h o v e r ' )   { 
                             r e t u r n   ' m o u s e e n t e r ' ; 
                         } 
                         e l s e   i f ( s e t t i n g s . o n   = =   ' f o c u s ' )   { 
                             r e t u r n   ' f o c u s ' ; 
                         } 
                     } , 
                     e n d E v e n t :   f u n c t i o n ( )   { 
                         i f ( s e t t i n g s . o n   = =   ' h o v e r ' )   { 
                             r e t u r n   ' m o u s e l e a v e ' ; 
                         } 
                         e l s e   i f ( s e t t i n g s . o n   = =   ' f o c u s ' )   { 
                             r e t u r n   ' b l u r ' ; 
                         } 
                     } , 
                     o f f s t a g e P o s i t i o n :   f u n c t i o n ( )   { 
                         v a r 
                             b o u n d a r y     =   { 
                                 t o p         :   $ ( w i n d o w ) . s c r o l l T o p ( ) , 
                                 b o t t o m   :   $ ( w i n d o w ) . s c r o l l T o p ( )   +   $ ( w i n d o w ) . h e i g h t ( ) , 
                                 l e f t       :   0 , 
                                 r i g h t     :   $ ( w i n d o w ) . w i d t h ( ) 
                             } , 
                             p o p u p           =   { 
                                 w i d t h         :   $ p o p u p . w i d t h ( ) , 
                                 h e i g h t       :   $ p o p u p . o u t e r H e i g h t ( ) , 
                                 p o s i t i o n   :   $ p o p u p . o f f s e t ( ) 
                             } , 
                             o f f s t a g e     =   { } , 
                             o f f s t a g e P o s i t i o n s   =   [ ] 
                         ; 
                         i f ( p o p u p . p o s i t i o n )   { 
                             o f f s t a g e   =   { 
                                 t o p         :   ( p o p u p . p o s i t i o n . t o p   <   b o u n d a r y . t o p ) , 
                                 b o t t o m   :   ( p o p u p . p o s i t i o n . t o p   +   p o p u p . h e i g h t   >   b o u n d a r y . b o t t o m ) , 
                                 r i g h t     :   ( p o p u p . p o s i t i o n . l e f t   +   p o p u p . w i d t h   >   b o u n d a r y . r i g h t ) , 
                                 l e f t       :   ( p o p u p . p o s i t i o n . l e f t   <   b o u n d a r y . l e f t ) 
                             } ; 
                         } 
                         m o d u l e . v e r b o s e ( ' C h e c k i n g   i f   o u t s i d e   v i e w a b l e   a r e a ' ,   p o p u p . p o s i t i o n ) ; 
                         / /   r e t u r n   o n l y   b o u n d a r i e s   t h a t   h a v e   b e e n   s u r p a s s e d 
                         $ . e a c h ( o f f s t a g e ,   f u n c t i o n ( d i r e c t i o n ,   i s O f f s t a g e )   { 
                             i f ( i s O f f s t a g e )   { 
                                 o f f s t a g e P o s i t i o n s . p u s h ( d i r e c t i o n ) ; 
                             } 
                         } ) ; 
                         r e t u r n   ( o f f s t a g e P o s i t i o n s . l e n g t h   >   0 ) 
                             ?   o f f s t a g e P o s i t i o n s . j o i n ( '   ' ) 
                             :   f a l s e 
                         ; 
                     } , 
                     n e x t P o s i t i o n :   f u n c t i o n ( p o s i t i o n )   { 
                         s w i t c h ( p o s i t i o n )   { 
                             c a s e   ' t o p   l e f t ' : 
                                 p o s i t i o n   =   ' b o t t o m   l e f t ' ; 
                             b r e a k ; 
                             c a s e   ' b o t t o m   l e f t ' : 
                                 p o s i t i o n   =   ' t o p   r i g h t ' ; 
                             b r e a k ; 
                             c a s e   ' t o p   r i g h t ' : 
                                 p o s i t i o n   =   ' b o t t o m   r i g h t ' ; 
                             b r e a k ; 
                             c a s e   ' b o t t o m   r i g h t ' : 
                                 p o s i t i o n   =   ' t o p   c e n t e r ' ; 
                             b r e a k ; 
                             c a s e   ' t o p   c e n t e r ' : 
                                 p o s i t i o n   =   ' b o t t o m   c e n t e r ' ; 
                             b r e a k ; 
                             c a s e   ' b o t t o m   c e n t e r ' : 
                                 p o s i t i o n   =   ' r i g h t   c e n t e r ' ; 
                             b r e a k ; 
                             c a s e   ' r i g h t   c e n t e r ' : 
                                 p o s i t i o n   =   ' l e f t   c e n t e r ' ; 
                             b r e a k ; 
                             c a s e   ' l e f t   c e n t e r ' : 
                                 p o s i t i o n   =   ' t o p   c e n t e r ' ; 
                             b r e a k ; 
                         } 
                         r e t u r n   p o s i t i o n ; 
                     } 
                 } , 
 
                 s e t :   { 
                     p o s i t i o n :   f u n c t i o n ( p o s i t i o n ,   a r r o w O f f s e t )   { 
                         v a r 
                             w i n d o w W i d t h     =   $ ( w i n d o w ) . w i d t h ( ) , 
                             w i n d o w H e i g h t   =   $ ( w i n d o w ) . h e i g h t ( ) , 
 
                             w i d t h                 =   $ t a r g e t . o u t e r W i d t h ( ) , 
                             h e i g h t               =   $ t a r g e t . o u t e r H e i g h t ( ) , 
 
                             p o p u p W i d t h       =   $ p o p u p . w i d t h ( ) , 
                             p o p u p H e i g h t     =   $ p o p u p . o u t e r H e i g h t ( ) , 
 
                             p a r e n t W i d t h     =   $ o f f s e t P a r e n t . o u t e r W i d t h ( ) , 
                             p a r e n t H e i g h t   =   $ o f f s e t P a r e n t . o u t e r H e i g h t ( ) , 
 
                             d i s t a n c e A w a y   =   s e t t i n g s . d i s t a n c e A w a y , 
 
                             o f f s e t               =   ( s e t t i n g s . i n l i n e ) 
                                 ?   $ t a r g e t . p o s i t i o n ( ) 
                                 :   $ t a r g e t . o f f s e t ( ) , 
 
                             p o s i t i o n i n g , 
                             o f f s t a g e P o s i t i o n 
                         ; 
                         p o s i t i o n         =   p o s i t i o n         | |   $ m o d u l e . d a t a ( m e t a d a t a . p o s i t i o n )         | |   s e t t i n g s . p o s i t i o n ; 
                         a r r o w O f f s e t   =   a r r o w O f f s e t   | |   $ m o d u l e . d a t a ( m e t a d a t a . o f f s e t )             | |   s e t t i n g s . o f f s e t ; 
                         / /   a d j u s t   f o r   m a r g i n   w h e n   i n l i n e 
                         i f ( s e t t i n g s . i n l i n e )   { 
                             i f ( p o s i t i o n   = =   ' l e f t   c e n t e r '   | |   p o s i t i o n   = =   ' r i g h t   c e n t e r ' )   { 
                                 a r r o w O f f s e t     + =   p a r s e I n t (   w i n d o w . g e t C o m p u t e d S t y l e ( e l e m e n t ) . g e t P r o p e r t y V a l u e ( ' m a r g i n - t o p ' ) ,   1 0 ) ; 
                                 d i s t a n c e A w a y   + =   - p a r s e I n t (   w i n d o w . g e t C o m p u t e d S t y l e ( e l e m e n t ) . g e t P r o p e r t y V a l u e ( ' m a r g i n - l e f t ' ) ,   1 0 ) ; 
                             } 
                             e l s e   { 
                                 a r r o w O f f s e t     + =   p a r s e I n t (   w i n d o w . g e t C o m p u t e d S t y l e ( e l e m e n t ) . g e t P r o p e r t y V a l u e ( ' m a r g i n - l e f t ' ) ,   1 0 ) ; 
                                 d i s t a n c e A w a y   + =   p a r s e I n t (   w i n d o w . g e t C o m p u t e d S t y l e ( e l e m e n t ) . g e t P r o p e r t y V a l u e ( ' m a r g i n - t o p ' ) ,   1 0 ) ; 
                             } 
                         } 
                         m o d u l e . d e b u g ( ' C a l c u l a t i n g   o f f s e t   f o r   p o s i t i o n ' ,   p o s i t i o n ) ; 
                         s w i t c h ( p o s i t i o n )   { 
                             c a s e   ' t o p   l e f t ' : 
                                 p o s i t i o n i n g   =   { 
                                     b o t t o m   :     p a r e n t H e i g h t   -   o f f s e t . t o p   +   d i s t a n c e A w a y , 
                                     r i g h t     :     p a r e n t W i d t h   -   o f f s e t . l e f t   -   a r r o w O f f s e t , 
                                     t o p         :   ' a u t o ' , 
                                     l e f t       :   ' a u t o ' 
                                 } ; 
                             b r e a k ; 
                             c a s e   ' t o p   c e n t e r ' : 
                                 p o s i t i o n i n g   =   { 
                                     b o t t o m   :     p a r e n t H e i g h t   -   o f f s e t . t o p   +   d i s t a n c e A w a y , 
                                     l e f t       :   o f f s e t . l e f t   +   ( w i d t h   /   2 )   -   ( p o p u p W i d t h   /   2 )   +   a r r o w O f f s e t , 
                                     t o p         :   ' a u t o ' , 
                                     r i g h t     :   ' a u t o ' 
                                 } ; 
                             b r e a k ; 
                             c a s e   ' t o p   r i g h t ' : 
                                 p o s i t i o n i n g   =   { 
                                     t o p         :   ' a u t o ' , 
                                     b o t t o m   :     p a r e n t H e i g h t   -   o f f s e t . t o p   +   d i s t a n c e A w a y , 
                                     l e f t       :   o f f s e t . l e f t   +   w i d t h   +   a r r o w O f f s e t , 
                                     r i g h t     :   ' a u t o ' 
                                 } ; 
                             b r e a k ; 
                             c a s e   ' l e f t   c e n t e r ' : 
                                 p o s i t i o n i n g   =   { 
                                     t o p         :     o f f s e t . t o p   +   ( h e i g h t   /   2 )   -   ( p o p u p H e i g h t   /   2 )   +   a r r o w O f f s e t , 
                                     r i g h t     :   p a r e n t W i d t h   -   o f f s e t . l e f t   +   d i s t a n c e A w a y , 
                                     l e f t       :   ' a u t o ' , 
                                     b o t t o m   :   ' a u t o ' 
                                 } ; 
                             b r e a k ; 
                             c a s e   ' r i g h t   c e n t e r ' : 
                                 p o s i t i o n i n g   =   { 
                                     t o p         :     o f f s e t . t o p   +   ( h e i g h t   /   2 )   -   ( p o p u p H e i g h t   /   2 )   +   a r r o w O f f s e t , 
                                     l e f t       :   o f f s e t . l e f t   +   w i d t h   +   d i s t a n c e A w a y , 
                                     b o t t o m   :   ' a u t o ' , 
                                     r i g h t     :   ' a u t o ' 
                                 } ; 
                             b r e a k ; 
                             c a s e   ' b o t t o m   l e f t ' : 
                                 p o s i t i o n i n g   =   { 
                                     t o p         :     o f f s e t . t o p   +   h e i g h t   +   d i s t a n c e A w a y , 
                                     r i g h t     :   p a r e n t W i d t h   -   o f f s e t . l e f t   -   a r r o w O f f s e t , 
                                     l e f t       :   ' a u t o ' , 
                                     b o t t o m   :   ' a u t o ' 
                                 } ; 
                             b r e a k ; 
                             c a s e   ' b o t t o m   c e n t e r ' : 
                                 p o s i t i o n i n g   =   { 
                                     t o p         :     o f f s e t . t o p   +   h e i g h t   +   d i s t a n c e A w a y , 
                                     l e f t       :   o f f s e t . l e f t   +   ( w i d t h   /   2 )   -   ( p o p u p W i d t h   /   2 )   +   a r r o w O f f s e t , 
                                     b o t t o m   :   ' a u t o ' , 
                                     r i g h t     :   ' a u t o ' 
                                 } ; 
                             b r e a k ; 
                             c a s e   ' b o t t o m   r i g h t ' : 
                                 p o s i t i o n i n g   =   { 
                                     t o p         :     o f f s e t . t o p   +   h e i g h t   +   d i s t a n c e A w a y , 
                                     l e f t       :   o f f s e t . l e f t   +   w i d t h   +   a r r o w O f f s e t , 
                                     b o t t o m   :   ' a u t o ' , 
                                     r i g h t     :   ' a u t o ' 
                                 } ; 
                             b r e a k ; 
                         } 
                         / /   t e n t a t i v e l y   p l a c e   o n   s t a g e 
                         $ p o p u p 
                             . c s s ( p o s i t i o n i n g ) 
                             . r e m o v e C l a s s ( c l a s s N a m e . p o s i t i o n ) 
                             . a d d C l a s s ( p o s i t i o n ) 
                             . a d d C l a s s ( c l a s s N a m e . l o a d i n g ) 
                         ; 
                         / /   c h e c k   i f   i s   o f f s t a g e 
                         o f f s t a g e P o s i t i o n   =   m o d u l e . g e t . o f f s t a g e P o s i t i o n ( ) ; 
 
                         / /   r e c u r s i v e l y   f i n d   n e w   p o s i t i o n i n g 
                         i f ( o f f s t a g e P o s i t i o n )   { 
                             m o d u l e . d e b u g ( ' E l e m e n t   i s   o u t s i d e   b o u n d a r i e s ' ,   o f f s t a g e P o s i t i o n ) ; 
                             i f ( s e a r c h D e p t h   <   s e t t i n g s . m a x S e a r c h D e p t h )   { 
                                 p o s i t i o n   =   m o d u l e . g e t . n e x t P o s i t i o n ( p o s i t i o n ) ; 
                                 s e a r c h D e p t h + + ; 
                                 m o d u l e . d e b u g ( ' T r y i n g   n e w   p o s i t i o n ' ,   p o s i t i o n ) ; 
                                 r e t u r n   m o d u l e . s e t . p o s i t i o n ( p o s i t i o n ) ; 
                             } 
                             e l s e   { 
                                 m o d u l e . e r r o r ( e r r o r . r e c u r s i o n ) ; 
                                 s e a r c h D e p t h   =   0 ; 
                                 m o d u l e . r e s e t ( ) ; 
                                 $ p o p u p . r e m o v e C l a s s ( c l a s s N a m e . l o a d i n g ) ; 
                                 r e t u r n   f a l s e ; 
                             } 
                         } 
                         e l s e   { 
                             m o d u l e . d e b u g ( ' P o s i t i o n   i s   o n   s t a g e ' ,   p o s i t i o n ) ; 
                             s e a r c h D e p t h   =   0 ; 
                             $ p o p u p . r e m o v e C l a s s ( c l a s s N a m e . l o a d i n g ) ; 
                             r e t u r n   t r u e ; 
                         } 
                     } 
 
                 } , 
 
                 b i n d :   { 
                     c l o s e : f u n c t i o n ( )   { 
                         i f ( s e t t i n g s . o n   = =   ' c l i c k '   & &   s e t t i n g s . c l o s a b l e )   { 
                             m o d u l e . v e r b o s e ( ' B i n d i n g   p o p u p   c l o s e   e v e n t   t o   d o c u m e n t ' ) ; 
                             $ d o c u m e n t 
                                 . o n ( ' c l i c k '   +   e v e n t N a m e s p a c e ,   f u n c t i o n ( e v e n t )   { 
                                     m o d u l e . v e r b o s e ( ' P o p - u p   c l i c k a w a y   i n t e n t   d e t e c t e d ' ) ; 
                                     $ . p r o x y ( m o d u l e . h i d e G r a c e f u l l y ,   t h i s ) ( e v e n t ) ; 
                                 } ) 
                             ; 
                         } 
                     } 
                 } , 
 
                 u n b i n d :   { 
                     c l o s e :   f u n c t i o n ( )   { 
                         i f ( s e t t i n g s . o n   = =   ' c l i c k '   & &   s e t t i n g s . c l o s a b l e )   { 
                             m o d u l e . v e r b o s e ( ' R e m o v i n g   c l o s e   e v e n t   f r o m   d o c u m e n t ' ) ; 
                             $ d o c u m e n t 
                                 . o f f ( ' c l i c k '   +   e v e n t N a m e s p a c e ) 
                             ; 
                         } 
                     } 
                 } , 
 
                 i s :   { 
                     a n i m a t i n g :   f u n c t i o n ( )   { 
                         r e t u r n   (   $ p o p u p . i s ( ' : a n i m a t e d ' )   | |   $ p o p u p . h a s C l a s s ( c l a s s N a m e . a n i m a t i n g )   ) ; 
                     } , 
                     v i s i b l e :   f u n c t i o n ( )   { 
                         r e t u r n   $ p o p u p . i s ( ' : v i s i b l e ' ) ; 
                     } , 
                     h i d d e n :   f u n c t i o n ( )   { 
                         r e t u r n   ! m o d u l e . i s . v i s i b l e ( ) ; 
                     } 
                 } , 
 
                 r e s e t :   f u n c t i o n ( )   { 
                     $ p o p u p 
                         . a t t r ( ' s t y l e ' ,   ' ' ) 
                         . r e m o v e A t t r ( ' s t y l e ' ) 
                     ; 
                     i f ( ! s e t t i n g s . p r e s e r v e )   { 
                         m o d u l e . r e m o v e ( ) ; 
                     } 
                 } , 
 
                 s e t t i n g :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                     i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                         $ . e x t e n d ( t r u e ,   s e t t i n g s ,   n a m e ) ; 
                     } 
                     e l s e   i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                         s e t t i n g s [ n a m e ]   =   v a l u e ; 
                     } 
                     e l s e   { 
                         r e t u r n   s e t t i n g s [ n a m e ] ; 
                     } 
                 } , 
                 i n t e r n a l :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                     i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                         $ . e x t e n d ( t r u e ,   m o d u l e ,   n a m e ) ; 
                     } 
                     e l s e   i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                         m o d u l e [ n a m e ]   =   v a l u e ; 
                     } 
                     e l s e   { 
                         r e t u r n   m o d u l e [ n a m e ] ; 
                     } 
                 } , 
                 d e b u g :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . d e b u g )   { 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . d e b u g   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                             m o d u l e . d e b u g . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                         } 
                     } 
                 } , 
                 v e r b o s e :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . v e r b o s e   & &   s e t t i n g s . d e b u g )   { 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . v e r b o s e   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                             m o d u l e . v e r b o s e . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                         } 
                     } 
                 } , 
                 e r r o r :   f u n c t i o n ( )   { 
                     m o d u l e . e r r o r   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . e r r o r ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                     m o d u l e . e r r o r . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                 } , 
                 p e r f o r m a n c e :   { 
                     l o g :   f u n c t i o n ( m e s s a g e )   { 
                         v a r 
                             c u r r e n t T i m e , 
                             e x e c u t i o n T i m e , 
                             p r e v i o u s T i m e 
                         ; 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             c u r r e n t T i m e       =   n e w   D a t e ( ) . g e t T i m e ( ) ; 
                             p r e v i o u s T i m e     =   t i m e   | |   c u r r e n t T i m e ; 
                             e x e c u t i o n T i m e   =   c u r r e n t T i m e   -   p r e v i o u s T i m e ; 
                             t i m e                     =   c u r r e n t T i m e ; 
                             p e r f o r m a n c e . p u s h ( { 
                                 ' E l e m e n t '                 :   e l e m e n t , 
                                 ' N a m e '                       :   m e s s a g e [ 0 ] , 
                                 ' A r g u m e n t s '             :   [ ] . s l i c e . c a l l ( m e s s a g e ,   1 )   | |   ' ' , 
                                 ' E x e c u t i o n   T i m e '   :   e x e c u t i o n T i m e 
                             } ) ; 
                         } 
                         c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                         m o d u l e . p e r f o r m a n c e . t i m e r   =   s e t T i m e o u t ( m o d u l e . p e r f o r m a n c e . d i s p l a y ,   1 0 0 ) ; 
                     } , 
                     d i s p l a y :   f u n c t i o n ( )   { 
                         v a r 
                             t i t l e   =   s e t t i n g s . n a m e   +   ' : ' , 
                             t o t a l T i m e   =   0 
                         ; 
                         t i m e   =   f a l s e ; 
                         c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                         $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                             t o t a l T i m e   + =   d a t a [ ' E x e c u t i o n   T i m e ' ] ; 
                         } ) ; 
                         t i t l e   + =   '   '   +   t o t a l T i m e   +   ' m s ' ; 
                         i f ( m o d u l e S e l e c t o r )   { 
                             t i t l e   + =   '   \ ' '   +   m o d u l e S e l e c t o r   +   ' \ ' ' ; 
                         } 
                         i f (   ( c o n s o l e . g r o u p   ! = =   u n d e f i n e d   | |   c o n s o l e . t a b l e   ! = =   u n d e f i n e d )   & &   p e r f o r m a n c e . l e n g t h   >   0 )   { 
                             c o n s o l e . g r o u p C o l l a p s e d ( t i t l e ) ; 
                             i f ( c o n s o l e . t a b l e )   { 
                                 c o n s o l e . t a b l e ( p e r f o r m a n c e ) ; 
                             } 
                             e l s e   { 
                                 $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                                     c o n s o l e . l o g ( d a t a [ ' N a m e ' ]   +   ' :   '   +   d a t a [ ' E x e c u t i o n   T i m e ' ] + ' m s ' ) ; 
                                 } ) ; 
                             } 
                             c o n s o l e . g r o u p E n d ( ) ; 
                         } 
                         p e r f o r m a n c e   =   [ ] ; 
                     } 
                 } , 
                 i n v o k e :   f u n c t i o n ( q u e r y ,   p a s s e d A r g u m e n t s ,   c o n t e x t )   { 
                     v a r 
                         o b j e c t   =   i n s t a n c e , 
                         m a x D e p t h , 
                         f o u n d , 
                         r e s p o n s e 
                     ; 
                     p a s s e d A r g u m e n t s   =   p a s s e d A r g u m e n t s   | |   q u e r y A r g u m e n t s ; 
                     c o n t e x t                   =   e l e m e n t                   | |   c o n t e x t ; 
                     i f ( t y p e o f   q u e r y   = =   ' s t r i n g '   & &   o b j e c t   ! = =   u n d e f i n e d )   { 
                         q u e r y         =   q u e r y . s p l i t ( / [ \ .   ] / ) ; 
                         m a x D e p t h   =   q u e r y . l e n g t h   -   1 ; 
                         $ . e a c h ( q u e r y ,   f u n c t i o n ( d e p t h ,   v a l u e )   { 
                             v a r   c a m e l C a s e V a l u e   =   ( d e p t h   ! =   m a x D e p t h ) 
                                 ?   v a l u e   +   q u e r y [ d e p t h   +   1 ] . c h a r A t ( 0 ) . t o U p p e r C a s e ( )   +   q u e r y [ d e p t h   +   1 ] . s l i c e ( 1 ) 
                                 :   q u e r y 
                             ; 
                             i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ c a m e l C a s e V a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                                 o b j e c t   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                             } 
                             e l s e   i f (   o b j e c t [ c a m e l C a s e V a l u e ]   ! = =   u n d e f i n e d   )   { 
                                 f o u n d   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                                 r e t u r n   f a l s e ; 
                             } 
                             e l s e   i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ v a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                                 o b j e c t   =   o b j e c t [ v a l u e ] ; 
                             } 
                             e l s e   i f (   o b j e c t [ v a l u e ]   ! = =   u n d e f i n e d   )   { 
                                 f o u n d   =   o b j e c t [ v a l u e ] ; 
                                 r e t u r n   f a l s e ; 
                             } 
                             e l s e   { 
                                 r e t u r n   f a l s e ; 
                             } 
                         } ) ; 
                     } 
                     i f   (   $ . i s F u n c t i o n (   f o u n d   )   )   { 
                         r e s p o n s e   =   f o u n d . a p p l y ( c o n t e x t ,   p a s s e d A r g u m e n t s ) ; 
                     } 
                     e l s e   i f ( f o u n d   ! = =   u n d e f i n e d )   { 
                         r e s p o n s e   =   f o u n d ; 
                     } 
                     i f ( $ . i s A r r a y ( r e t u r n e d V a l u e ) )   { 
                         r e t u r n e d V a l u e . p u s h ( r e s p o n s e ) ; 
                     } 
                     e l s e   i f ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d )   { 
                         r e t u r n e d V a l u e   =   [ r e t u r n e d V a l u e ,   r e s p o n s e ] ; 
                     } 
                     e l s e   i f ( r e s p o n s e   ! = =   u n d e f i n e d )   { 
                         r e t u r n e d V a l u e   =   r e s p o n s e ; 
                     } 
                     r e t u r n   f o u n d ; 
                 } 
             } ; 
 
             i f ( m e t h o d I n v o k e d )   { 
                 i f ( i n s t a n c e   = = =   u n d e f i n e d )   { 
                     m o d u l e . i n i t i a l i z e ( ) ; 
                 } 
                 m o d u l e . i n v o k e ( q u e r y ) ; 
             } 
             e l s e   { 
                 i f ( i n s t a n c e   ! = =   u n d e f i n e d )   { 
                     m o d u l e . d e s t r o y ( ) ; 
                 } 
                 m o d u l e . i n i t i a l i z e ( ) ; 
             } 
         } ) 
     ; 
 
     r e t u r n   ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d ) 
         ?   r e t u r n e d V a l u e 
         :   t h i s 
     ; 
 } ; 
 
 $ . f n . p o p u p . s e t t i n g s   =   { 
 
     n a m e                       :   ' P o p u p ' , 
     d e b u g                     :   f a l s e , 
     v e r b o s e                 :   t r u e , 
     p e r f o r m a n c e         :   t r u e , 
     n a m e s p a c e             :   ' p o p u p ' , 
 
     o n C r e a t e               :   f u n c t i o n ( ) { } , 
     o n S h o w                   :   f u n c t i o n ( ) { } , 
     o n H i d e                   :   f u n c t i o n ( ) { } , 
 
     v a r i a t i o n             :   ' ' , 
     c o n t e n t                 :   f a l s e , 
     h t m l                       :   f a l s e , 
     t i t l e                     :   f a l s e , 
 
     o n                           :   ' h o v e r ' , 
     t a r g e t                   :   f a l s e , 
     c l o s a b l e               :   t r u e , 
 
     c o n t e x t                 :   ' b o d y ' , 
     p o s i t i o n               :   ' t o p   c e n t e r ' , 
     d e l a y                     :   1 5 0 , 
     i n l i n e                   :   f a l s e , 
     p r e s e r v e               :   f a l s e , 
 
     d u r a t i o n               :   2 5 0 , 
     e a s i n g                   :   ' e a s e O u t Q u i n t ' , 
     t r a n s i t i o n           :   ' s c a l e ' , 
 
     d i s t a n c e A w a y       :   0 , 
     o f f s e t                   :   0 , 
     m a x S e a r c h D e p t h   :   1 0 , 
 
     e r r o r :   { 
         c o n t e n t       :   ' Y o u r   p o p u p   h a s   n o   c o n t e n t   s p e c i f i e d ' , 
         m e t h o d         :   ' T h e   m e t h o d   y o u   c a l l e d   i s   n o t   d e f i n e d . ' , 
         r e c u r s i o n   :   ' P o p u p   a t t e m p t e d   t o   r e p o s i t i o n   e l e m e n t   t o   f i t ,   b u t   c o u l d   n o t   f i n d   a n   a d e q u a t e   p o s i t i o n . ' 
     } , 
 
     m e t a d a t a :   { 
         c o n t e n t       :   ' c o n t e n t ' , 
         h t m l             :   ' h t m l ' , 
         o f f s e t         :   ' o f f s e t ' , 
         p o s i t i o n     :   ' p o s i t i o n ' , 
         t i t l e           :   ' t i t l e ' , 
         v a r i a t i o n   :   ' v a r i a t i o n ' 
     } , 
 
     c l a s s N a m e       :   { 
         a n i m a t i n g       :   ' a n i m a t i n g ' , 
         l o a d i n g           :   ' l o a d i n g ' , 
         p o p u p               :   ' u i   p o p u p ' , 
         p o s i t i o n         :   ' t o p   l e f t   c e n t e r   b o t t o m   r i g h t ' , 
         v i s i b l e           :   ' v i s i b l e ' 
     } , 
 
     s e l e c t o r         :   { 
         p o p u p         :   ' . u i . p o p u p ' 
     } , 
 
     t e m p l a t e :   f u n c t i o n ( t e x t )   { 
         v a r   h t m l   =   ' ' ; 
         i f ( t y p e o f   t e x t   ! = =   u n d e f i n e d )   { 
             i f ( t y p e o f   t e x t . t i t l e   ! = =   u n d e f i n e d   & &   t e x t . t i t l e )   { 
                 h t m l   + =   ' < d i v   c l a s s = " h e a d e r " > '   +   t e x t . t i t l e   +   ' < / d i v   c l a s s = " h e a d e r " > ' ; 
             } 
             i f ( t y p e o f   t e x t . c o n t e n t   ! = =   u n d e f i n e d   & &   t e x t . c o n t e n t )   { 
                 h t m l   + =   ' < d i v   c l a s s = " c o n t e n t " > '   +   t e x t . c o n t e n t   +   ' < / d i v > ' ; 
             } 
         } 
         r e t u r n   h t m l ; 
     } 
 
 } ; 
 
 } ) (   j Q u e r y ,   w i n d o w   ,   d o c u m e n t   ) ; 
 
 / * 
   *   #   S e m a n t i c   -   R a t i n g 
   *   h t t p : / / g i t h u b . c o m / j l u k i c / s e m a n t i c - u i / 
   * 
   * 
   *   C o p y r i g h t   2 0 1 3   C o n t r i b u t o r s 
   *   R e l e a s e d   u n d e r   t h e   M I T   l i c e n s e 
   *   h t t p : / / o p e n s o u r c e . o r g / l i c e n s e s / M I T 
   * 
   * / 
 
 ; ( f u n c t i o n   ( $ ,   w i n d o w ,   d o c u m e n t ,   u n d e f i n e d )   { 
 
 $ . f n . r a t i n g   =   f u n c t i o n ( p a r a m e t e r s )   { 
     v a r 
         $ a l l M o d u l e s           =   $ ( t h i s ) , 
         m o d u l e S e l e c t o r     =   $ a l l M o d u l e s . s e l e c t o r   | |   ' ' , 
 
         t i m e                         =   n e w   D a t e ( ) . g e t T i m e ( ) , 
         p e r f o r m a n c e           =   [ ] , 
 
         q u e r y                       =   a r g u m e n t s [ 0 ] , 
         m e t h o d I n v o k e d       =   ( t y p e o f   q u e r y   = =   ' s t r i n g ' ) , 
         q u e r y A r g u m e n t s     =   [ ] . s l i c e . c a l l ( a r g u m e n t s ,   1 ) , 
         r e t u r n e d V a l u e 
     ; 
     $ a l l M o d u l e s 
         . e a c h ( f u n c t i o n ( )   { 
             v a r 
                 s e t t i n g s                 =   (   $ . i s P l a i n O b j e c t ( p a r a m e t e r s )   ) 
                     ?   $ . e x t e n d ( t r u e ,   { } ,   $ . f n . r a t i n g . s e t t i n g s ,   p a r a m e t e r s ) 
                     :   $ . e x t e n d ( { } ,   $ . f n . r a t i n g . s e t t i n g s ) , 
 
                 n a m e s p a c e               =   s e t t i n g s . n a m e s p a c e , 
                 c l a s s N a m e               =   s e t t i n g s . c l a s s N a m e , 
                 m e t a d a t a                 =   s e t t i n g s . m e t a d a t a , 
                 s e l e c t o r                 =   s e t t i n g s . s e l e c t o r , 
                 e r r o r                       =   s e t t i n g s . e r r o r , 
 
                 e v e n t N a m e s p a c e     =   ' . '   +   n a m e s p a c e , 
                 m o d u l e N a m e s p a c e   =   ' m o d u l e - '   +   n a m e s p a c e , 
 
                 e l e m e n t                   =   t h i s , 
                 i n s t a n c e                 =   $ ( t h i s ) . d a t a ( m o d u l e N a m e s p a c e ) , 
 
                 $ m o d u l e                   =   $ ( t h i s ) , 
                 $ i c o n                       =   $ m o d u l e . f i n d ( s e l e c t o r . i c o n ) , 
 
                 m o d u l e 
             ; 
 
             m o d u l e   =   { 
 
                 i n i t i a l i z e :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' I n i t i a l i z i n g   r a t i n g   m o d u l e ' ,   s e t t i n g s ) ; 
 
                     i f ( s e t t i n g s . i n t e r a c t i v e )   { 
                         m o d u l e . e n a b l e ( ) ; 
                     } 
                     e l s e   { 
                         m o d u l e . d i s a b l e ( ) ; 
                     } 
 
                     i f ( s e t t i n g s . i n i t i a l R a t i n g )   { 
                         m o d u l e . d e b u g ( ' S e t t i n g   i n i t i a l   r a t i n g ' ) ; 
                         m o d u l e . s e t R a t i n g ( s e t t i n g s . i n i t i a l R a t i n g ) ; 
                     } 
                     i f (   $ m o d u l e . d a t a ( m e t a d a t a . r a t i n g )   )   { 
                         m o d u l e . d e b u g ( ' R a t i n g   f o u n d   i n   m e t a d a t a ' ) ; 
                         m o d u l e . s e t R a t i n g (   $ m o d u l e . d a t a ( m e t a d a t a . r a t i n g )   ) ; 
                     } 
                     m o d u l e . i n s t a n t i a t e ( ) ; 
                 } , 
 
                 i n s t a n t i a t e :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' I n s t a n t i a t i n g   m o d u l e ' ,   s e t t i n g s ) ; 
                     i n s t a n c e   =   m o d u l e ; 
                     $ m o d u l e 
                         . d a t a ( m o d u l e N a m e s p a c e ,   m o d u l e ) 
                     ; 
                 } , 
 
                 d e s t r o y :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' D e s t r o y i n g   p r e v i o u s   i n s t a n c e ' ,   i n s t a n c e ) ; 
                     $ m o d u l e 
                         . r e m o v e D a t a ( m o d u l e N a m e s p a c e ) 
                     ; 
                     $ i c o n 
                         . o f f ( e v e n t N a m e s p a c e ) 
                     ; 
                 } , 
 
                 e v e n t :   { 
                     m o u s e e n t e r :   f u n c t i o n ( )   { 
                         v a r 
                             $ a c t i v e I c o n   =   $ ( t h i s ) 
                         ; 
                         $ a c t i v e I c o n 
                             . n e x t A l l ( ) 
                                 . r e m o v e C l a s s ( c l a s s N a m e . h o v e r ) 
                         ; 
                         $ m o d u l e 
                             . a d d C l a s s ( c l a s s N a m e . h o v e r ) 
                         ; 
                         $ a c t i v e I c o n 
                             . a d d C l a s s ( c l a s s N a m e . h o v e r ) 
                                 . p r e v A l l ( ) 
                                 . a d d C l a s s ( c l a s s N a m e . h o v e r ) 
                         ; 
                     } , 
                     m o u s e l e a v e :   f u n c t i o n ( )   { 
                         $ m o d u l e 
                             . r e m o v e C l a s s ( c l a s s N a m e . h o v e r ) 
                         ; 
                         $ i c o n 
                             . r e m o v e C l a s s ( c l a s s N a m e . h o v e r ) 
                         ; 
                     } , 
                     c l i c k :   f u n c t i o n ( )   { 
                         v a r 
                             $ a c t i v e I c o n       =   $ ( t h i s ) , 
                             c u r r e n t R a t i n g   =   m o d u l e . g e t R a t i n g ( ) , 
                             r a t i n g                 =   $ i c o n . i n d e x ( $ a c t i v e I c o n )   +   1 
                         ; 
                         i f ( s e t t i n g s . c l e a r a b l e   & &   c u r r e n t R a t i n g   = =   r a t i n g )   { 
                             m o d u l e . c l e a r R a t i n g ( ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . s e t R a t i n g (   r a t i n g   ) ; 
                         } 
                     } 
                 } , 
 
                 c l e a r R a t i n g :   f u n c t i o n ( )   { 
                     m o d u l e . d e b u g ( ' C l e a r i n g   c u r r e n t   r a t i n g ' ) ; 
                     m o d u l e . s e t R a t i n g ( 0 ) ; 
                 } , 
 
                 g e t R a t i n g :   f u n c t i o n ( )   { 
                     v a r 
                         c u r r e n t R a t i n g   =   $ i c o n . f i l t e r ( ' . '   +   c l a s s N a m e . a c t i v e ) . s i z e ( ) 
                     ; 
                     m o d u l e . v e r b o s e ( ' C u r r e n t   r a t i n g   r e t r i e v e d ' ,   c u r r e n t R a t i n g ) ; 
                     r e t u r n   c u r r e n t R a t i n g ; 
                 } , 
 
                 e n a b l e :   f u n c t i o n ( )   { 
                     m o d u l e . d e b u g ( ' S e t t i n g   r a t i n g   t o   i n t e r a c t i v e   m o d e ' ) ; 
                     $ i c o n 
                         . o n ( ' m o u s e e n t e r '   +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . m o u s e e n t e r ) 
                         . o n ( ' m o u s e l e a v e '   +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . m o u s e l e a v e ) 
                         . o n ( ' c l i c k '   +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . c l i c k ) 
                     ; 
                     $ m o d u l e 
                         . r e m o v e C l a s s ( c l a s s N a m e . d i s a b l e d ) 
                     ; 
                 } , 
 
                 d i s a b l e :   f u n c t i o n ( )   { 
                     m o d u l e . d e b u g ( ' S e t t i n g   r a t i n g   t o   r e a d - o n l y   m o d e ' ) ; 
                     $ i c o n 
                         . o f f ( e v e n t N a m e s p a c e ) 
                     ; 
                     $ m o d u l e 
                         . a d d C l a s s ( c l a s s N a m e . d i s a b l e d ) 
                     ; 
                 } , 
 
                 s e t R a t i n g :   f u n c t i o n ( r a t i n g )   { 
                     v a r 
                         r a t i n g I n d e x   =   ( r a t i n g   -   1   > =   0 ) 
                             ?   ( r a t i n g   -   1 ) 
                             :   0 , 
                         $ a c t i v e I c o n   =   $ i c o n . e q ( r a t i n g I n d e x ) 
                     ; 
                     $ m o d u l e 
                         . r e m o v e C l a s s ( c l a s s N a m e . h o v e r ) 
                     ; 
                     $ i c o n 
                         . r e m o v e C l a s s ( c l a s s N a m e . h o v e r ) 
                         . r e m o v e C l a s s ( c l a s s N a m e . a c t i v e ) 
                     ; 
                     i f ( r a t i n g   >   0 )   { 
                         m o d u l e . v e r b o s e ( ' S e t t i n g   c u r r e n t   r a t i n g   t o ' ,   r a t i n g ) ; 
                         $ a c t i v e I c o n 
                             . a d d C l a s s ( c l a s s N a m e . a c t i v e ) 
                                 . p r e v A l l ( ) 
                                 . a d d C l a s s ( c l a s s N a m e . a c t i v e ) 
                         ; 
                     } 
                     $ . p r o x y ( s e t t i n g s . o n R a t e ,   e l e m e n t ) ( r a t i n g ) ; 
                 } , 
 
                 s e t t i n g :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                     i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                         $ . e x t e n d ( t r u e ,   s e t t i n g s ,   n a m e ) ; 
                     } 
                     e l s e   i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                         s e t t i n g s [ n a m e ]   =   v a l u e ; 
                     } 
                     e l s e   { 
                         r e t u r n   s e t t i n g s [ n a m e ] ; 
                     } 
                 } , 
                 i n t e r n a l :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                     i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                         $ . e x t e n d ( t r u e ,   m o d u l e ,   n a m e ) ; 
                     } 
                     e l s e   i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                         m o d u l e [ n a m e ]   =   v a l u e ; 
                     } 
                     e l s e   { 
                         r e t u r n   m o d u l e [ n a m e ] ; 
                     } 
                 } , 
                 d e b u g :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . d e b u g )   { 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . d e b u g   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                             m o d u l e . d e b u g . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                         } 
                     } 
                 } , 
                 v e r b o s e :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . v e r b o s e   & &   s e t t i n g s . d e b u g )   { 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . v e r b o s e   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                             m o d u l e . v e r b o s e . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                         } 
                     } 
                 } , 
                 e r r o r :   f u n c t i o n ( )   { 
                     m o d u l e . e r r o r   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . e r r o r ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                     m o d u l e . e r r o r . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                 } , 
                 p e r f o r m a n c e :   { 
                     l o g :   f u n c t i o n ( m e s s a g e )   { 
                         v a r 
                             c u r r e n t T i m e , 
                             e x e c u t i o n T i m e , 
                             p r e v i o u s T i m e 
                         ; 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             c u r r e n t T i m e       =   n e w   D a t e ( ) . g e t T i m e ( ) ; 
                             p r e v i o u s T i m e     =   t i m e   | |   c u r r e n t T i m e ; 
                             e x e c u t i o n T i m e   =   c u r r e n t T i m e   -   p r e v i o u s T i m e ; 
                             t i m e                     =   c u r r e n t T i m e ; 
                             p e r f o r m a n c e . p u s h ( { 
                                 ' E l e m e n t '                 :   e l e m e n t , 
                                 ' N a m e '                       :   m e s s a g e [ 0 ] , 
                                 ' A r g u m e n t s '             :   [ ] . s l i c e . c a l l ( m e s s a g e ,   1 )   | |   ' ' , 
                                 ' E x e c u t i o n   T i m e '   :   e x e c u t i o n T i m e 
                             } ) ; 
                         } 
                         c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                         m o d u l e . p e r f o r m a n c e . t i m e r   =   s e t T i m e o u t ( m o d u l e . p e r f o r m a n c e . d i s p l a y ,   1 0 0 ) ; 
                     } , 
                     d i s p l a y :   f u n c t i o n ( )   { 
                         v a r 
                             t i t l e   =   s e t t i n g s . n a m e   +   ' : ' , 
                             t o t a l T i m e   =   0 
                         ; 
                         t i m e   =   f a l s e ; 
                         c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                         $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                             t o t a l T i m e   + =   d a t a [ ' E x e c u t i o n   T i m e ' ] ; 
                         } ) ; 
                         t i t l e   + =   '   '   +   t o t a l T i m e   +   ' m s ' ; 
                         i f ( m o d u l e S e l e c t o r )   { 
                             t i t l e   + =   '   \ ' '   +   m o d u l e S e l e c t o r   +   ' \ ' ' ; 
                         } 
                         i f ( $ a l l M o d u l e s . s i z e ( )   >   1 )   { 
                             t i t l e   + =   '   '   +   ' ( '   +   $ a l l M o d u l e s . s i z e ( )   +   ' ) ' ; 
                         } 
                         i f (   ( c o n s o l e . g r o u p   ! = =   u n d e f i n e d   | |   c o n s o l e . t a b l e   ! = =   u n d e f i n e d )   & &   p e r f o r m a n c e . l e n g t h   >   0 )   { 
                             c o n s o l e . g r o u p C o l l a p s e d ( t i t l e ) ; 
                             i f ( c o n s o l e . t a b l e )   { 
                                 c o n s o l e . t a b l e ( p e r f o r m a n c e ) ; 
                             } 
                             e l s e   { 
                                 $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                                     c o n s o l e . l o g ( d a t a [ ' N a m e ' ]   +   ' :   '   +   d a t a [ ' E x e c u t i o n   T i m e ' ] + ' m s ' ) ; 
                                 } ) ; 
                             } 
                             c o n s o l e . g r o u p E n d ( ) ; 
                         } 
                         p e r f o r m a n c e   =   [ ] ; 
                     } 
                 } , 
                 i n v o k e :   f u n c t i o n ( q u e r y ,   p a s s e d A r g u m e n t s ,   c o n t e x t )   { 
                     v a r 
                         o b j e c t   =   i n s t a n c e , 
                         m a x D e p t h , 
                         f o u n d , 
                         r e s p o n s e 
                     ; 
                     p a s s e d A r g u m e n t s   =   p a s s e d A r g u m e n t s   | |   q u e r y A r g u m e n t s ; 
                     c o n t e x t                   =   e l e m e n t                   | |   c o n t e x t ; 
                     i f ( t y p e o f   q u e r y   = =   ' s t r i n g '   & &   o b j e c t   ! = =   u n d e f i n e d )   { 
                         q u e r y         =   q u e r y . s p l i t ( / [ \ .   ] / ) ; 
                         m a x D e p t h   =   q u e r y . l e n g t h   -   1 ; 
                         $ . e a c h ( q u e r y ,   f u n c t i o n ( d e p t h ,   v a l u e )   { 
                             v a r   c a m e l C a s e V a l u e   =   ( d e p t h   ! =   m a x D e p t h ) 
                                 ?   v a l u e   +   q u e r y [ d e p t h   +   1 ] . c h a r A t ( 0 ) . t o U p p e r C a s e ( )   +   q u e r y [ d e p t h   +   1 ] . s l i c e ( 1 ) 
                                 :   q u e r y 
                             ; 
                             i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ c a m e l C a s e V a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                                 o b j e c t   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                             } 
                             e l s e   i f (   o b j e c t [ c a m e l C a s e V a l u e ]   ! = =   u n d e f i n e d   )   { 
                                 f o u n d   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                                 r e t u r n   f a l s e ; 
                             } 
                             e l s e   i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ v a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                                 o b j e c t   =   o b j e c t [ v a l u e ] ; 
                             } 
                             e l s e   i f (   o b j e c t [ v a l u e ]   ! = =   u n d e f i n e d   )   { 
                                 f o u n d   =   o b j e c t [ v a l u e ] ; 
                                 r e t u r n   f a l s e ; 
                             } 
                             e l s e   { 
                                 r e t u r n   f a l s e ; 
                             } 
                         } ) ; 
                     } 
                     i f   (   $ . i s F u n c t i o n (   f o u n d   )   )   { 
                         r e s p o n s e   =   f o u n d . a p p l y ( c o n t e x t ,   p a s s e d A r g u m e n t s ) ; 
                     } 
                     e l s e   i f ( f o u n d   ! = =   u n d e f i n e d )   { 
                         r e s p o n s e   =   f o u n d ; 
                     } 
                     i f ( $ . i s A r r a y ( r e t u r n e d V a l u e ) )   { 
                         r e t u r n e d V a l u e . p u s h ( r e s p o n s e ) ; 
                     } 
                     e l s e   i f ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d )   { 
                         r e t u r n e d V a l u e   =   [ r e t u r n e d V a l u e ,   r e s p o n s e ] ; 
                     } 
                     e l s e   i f ( r e s p o n s e   ! = =   u n d e f i n e d )   { 
                         r e t u r n e d V a l u e   =   r e s p o n s e ; 
                     } 
                     r e t u r n   f o u n d ; 
                 } 
             } ; 
             i f ( m e t h o d I n v o k e d )   { 
                 i f ( i n s t a n c e   = = =   u n d e f i n e d )   { 
                     m o d u l e . i n i t i a l i z e ( ) ; 
                 } 
                 m o d u l e . i n v o k e ( q u e r y ) ; 
             } 
             e l s e   { 
                 i f ( i n s t a n c e   ! = =   u n d e f i n e d )   { 
                     m o d u l e . d e s t r o y ( ) ; 
                 } 
                 m o d u l e . i n i t i a l i z e ( ) ; 
             } 
         } ) 
     ; 
 
     r e t u r n   ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d ) 
         ?   r e t u r n e d V a l u e 
         :   t h i s 
     ; 
 } ; 
 
 $ . f n . r a t i n g . s e t t i n g s   =   { 
 
     n a m e                     :   ' R a t i n g ' , 
     n a m e s p a c e           :   ' r a t i n g ' , 
 
     v e r b o s e               :   t r u e , 
     d e b u g                   :   f a l s e , 
     p e r f o r m a n c e       :   t r u e , 
 
     i n i t i a l R a t i n g   :   0 , 
     i n t e r a c t i v e       :   t r u e , 
     c l e a r a b l e           :   f a l s e , 
 
     o n R a t e                 :   f u n c t i o n ( r a t i n g ) { } , 
 
     e r r o r               :   { 
         m e t h o d   :   ' T h e   m e t h o d   y o u   c a l l e d   i s   n o t   d e f i n e d ' 
     } , 
 
     m e t a d a t a :   { 
         r a t i n g :   ' r a t i n g ' 
     } , 
 
     c l a s s N a m e   :   { 
         a c t i v e       :   ' a c t i v e ' , 
         d i s a b l e d   :   ' d i s a b l e d ' , 
         h o v e r         :   ' h o v e r ' , 
         l o a d i n g     :   ' l o a d i n g ' 
     } , 
 
     s e l e c t o r     :   { 
         i c o n   :   ' . i c o n ' 
     } 
 
 } ; 
 
 } ) (   j Q u e r y ,   w i n d o w   ,   d o c u m e n t   ) ; 
 
 / * 
   *   #   S e m a n t i c   -   S e a r c h 
   *   h t t p : / / g i t h u b . c o m / j l u k i c / s e m a n t i c - u i / 
   * 
   * 
   *   C o p y r i g h t   2 0 1 3   C o n t r i b u t o r s 
   *   R e l e a s e d   u n d e r   t h e   M I T   l i c e n s e 
   *   h t t p : / / o p e n s o u r c e . o r g / l i c e n s e s / M I T 
   * 
   * / 
 
 ; ( f u n c t i o n   ( $ ,   w i n d o w ,   d o c u m e n t ,   u n d e f i n e d )   { 
 
 $ . f n . s e a r c h   =   f u n c t i o n ( s o u r c e ,   p a r a m e t e r s )   { 
     v a r 
         $ a l l M o d u l e s           =   $ ( t h i s ) , 
         m o d u l e S e l e c t o r     =   $ a l l M o d u l e s . s e l e c t o r   | |   ' ' , 
 
         t i m e                         =   n e w   D a t e ( ) . g e t T i m e ( ) , 
         p e r f o r m a n c e           =   [ ] , 
 
         q u e r y                       =   a r g u m e n t s [ 0 ] , 
         m e t h o d I n v o k e d       =   ( t y p e o f   q u e r y   = =   ' s t r i n g ' ) , 
         q u e r y A r g u m e n t s     =   [ ] . s l i c e . c a l l ( a r g u m e n t s ,   1 ) , 
         r e t u r n e d V a l u e 
     ; 
     $ ( t h i s ) 
         . e a c h ( f u n c t i o n ( )   { 
             v a r 
                 s e t t i n g s                 =   $ . e x t e n d ( t r u e ,   { } ,   $ . f n . s e a r c h . s e t t i n g s ,   p a r a m e t e r s ) , 
 
                 c l a s s N a m e               =   s e t t i n g s . c l a s s N a m e , 
                 s e l e c t o r                 =   s e t t i n g s . s e l e c t o r , 
                 e r r o r                       =   s e t t i n g s . e r r o r , 
                 n a m e s p a c e               =   s e t t i n g s . n a m e s p a c e , 
 
                 e v e n t N a m e s p a c e     =   ' . '   +   n a m e s p a c e , 
                 m o d u l e N a m e s p a c e   =   n a m e s p a c e   +   ' - m o d u l e ' , 
 
                 $ m o d u l e                   =   $ ( t h i s ) , 
                 $ p r o m p t                   =   $ m o d u l e . f i n d ( s e l e c t o r . p r o m p t ) , 
                 $ s e a r c h B u t t o n       =   $ m o d u l e . f i n d ( s e l e c t o r . s e a r c h B u t t o n ) , 
                 $ r e s u l t s                 =   $ m o d u l e . f i n d ( s e l e c t o r . r e s u l t s ) , 
                 $ r e s u l t                   =   $ m o d u l e . f i n d ( s e l e c t o r . r e s u l t ) , 
                 $ c a t e g o r y               =   $ m o d u l e . f i n d ( s e l e c t o r . c a t e g o r y ) , 
 
                 e l e m e n t                   =   t h i s , 
                 i n s t a n c e                 =   $ m o d u l e . d a t a ( m o d u l e N a m e s p a c e ) , 
 
                 m o d u l e 
             ; 
             m o d u l e   =   { 
 
                 i n i t i a l i z e :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' I n i t i a l i z i n g   m o d u l e ' ) ; 
                     v a r 
                         p r o m p t   =   $ p r o m p t [ 0 ] , 
                         i n p u t E v e n t       =   ( p r o m p t . o n i n p u t   ! = =   u n d e f i n e d ) 
                             ?   ' i n p u t ' 
                             :   ( p r o m p t . o n p r o p e r t y c h a n g e   ! = =   u n d e f i n e d ) 
                                 ?   ' p r o p e r t y c h a n g e ' 
                                 :   ' k e y u p ' 
                     ; 
                     / /   a t t a c h   e v e n t s 
                     $ p r o m p t 
                         . o n ( ' f o c u s '   +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . f o c u s ) 
                         . o n ( ' b l u r '   +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . b l u r ) 
                         . o n ( ' k e y d o w n '   +   e v e n t N a m e s p a c e ,   m o d u l e . h a n d l e K e y b o a r d ) 
                     ; 
                     i f ( s e t t i n g s . a u t o m a t i c )   { 
                         $ p r o m p t 
                             . o n ( i n p u t E v e n t   +   e v e n t N a m e s p a c e ,   m o d u l e . s e a r c h . t h r o t t l e ) 
                         ; 
                     } 
                     $ s e a r c h B u t t o n 
                         . o n ( ' c l i c k '   +   e v e n t N a m e s p a c e ,   m o d u l e . s e a r c h . q u e r y ) 
                     ; 
                     $ r e s u l t s 
                         . o n ( ' c l i c k '   +   e v e n t N a m e s p a c e ,   s e l e c t o r . r e s u l t ,   m o d u l e . r e s u l t s . s e l e c t ) 
                     ; 
                     m o d u l e . i n s t a n t i a t e ( ) ; 
                 } , 
                 i n s t a n t i a t e :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' S t o r i n g   i n s t a n c e   o f   m o d u l e ' ,   m o d u l e ) ; 
                     i n s t a n c e   =   m o d u l e ; 
                     $ m o d u l e 
                         . d a t a ( m o d u l e N a m e s p a c e ,   m o d u l e ) 
                     ; 
                 } , 
                 d e s t r o y :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' D e s t r o y i n g   i n s t a n c e ' ) ; 
                     $ m o d u l e 
                         . r e m o v e D a t a ( m o d u l e N a m e s p a c e ) 
                     ; 
                 } , 
                 e v e n t :   { 
                     f o c u s :   f u n c t i o n ( )   { 
                         $ m o d u l e 
                             . a d d C l a s s ( c l a s s N a m e . f o c u s ) 
                         ; 
                         m o d u l e . r e s u l t s . s h o w ( ) ; 
                     } , 
                     b l u r :   f u n c t i o n ( )   { 
                         m o d u l e . s e a r c h . c a n c e l ( ) ; 
                         $ m o d u l e 
                             . r e m o v e C l a s s ( c l a s s N a m e . f o c u s ) 
                         ; 
                         m o d u l e . r e s u l t s . h i d e ( ) ; 
                     } 
                 } , 
                 h a n d l e K e y b o a r d :   f u n c t i o n ( e v e n t )   { 
                     v a r 
                         / /   f o r c e   l a t e s t   j q   d o m 
                         $ r e s u l t               =   $ m o d u l e . f i n d ( s e l e c t o r . r e s u l t ) , 
                         $ c a t e g o r y           =   $ m o d u l e . f i n d ( s e l e c t o r . c a t e g o r y ) , 
                         k e y C o d e               =   e v e n t . w h i c h , 
                         k e y s                     =   { 
                             b a c k s p a c e   :   8 , 
                             e n t e r           :   1 3 , 
                             e s c a p e         :   2 7 , 
                             u p A r r o w       :   3 8 , 
                             d o w n A r r o w   :   4 0 
                         } , 
                         a c t i v e C l a s s     =   c l a s s N a m e . a c t i v e , 
                         c u r r e n t I n d e x   =   $ r e s u l t . i n d e x (   $ r e s u l t . f i l t e r ( ' . '   +   a c t i v e C l a s s )   ) , 
                         r e s u l t S i z e       =   $ r e s u l t . s i z e ( ) , 
                         n e w I n d e x 
                     ; 
                     / /   s e a r c h   s h o r t c u t s 
                     i f ( k e y C o d e   = =   k e y s . e s c a p e )   { 
                         m o d u l e . v e r b o s e ( ' E s c a p e   k e y   p r e s s e d ,   b l u r r i n g   s e a r c h   f i e l d ' ) ; 
                         $ p r o m p t 
                             . t r i g g e r ( ' b l u r ' ) 
                         ; 
                     } 
                     / /   r e s u l t   s h o r t c u t s 
                     i f ( $ r e s u l t s . f i l t e r ( ' : v i s i b l e ' ) . s i z e ( )   >   0 )   { 
                         i f ( k e y C o d e   = =   k e y s . e n t e r )   { 
                             m o d u l e . v e r b o s e ( ' E n t e r   k e y   p r e s s e d ,   s e l e c t i n g   a c t i v e   r e s u l t ' ) ; 
                             i f (   $ r e s u l t . f i l t e r ( ' . '   +   a c t i v e C l a s s ) . e x i s t s ( )   )   { 
                                 $ . p r o x y ( m o d u l e . r e s u l t s . s e l e c t ,   $ r e s u l t . f i l t e r ( ' . '   +   a c t i v e C l a s s )   ) ( ) ; 
                                 e v e n t . p r e v e n t D e f a u l t ( ) ; 
                                 r e t u r n   f a l s e ; 
                             } 
                         } 
                         e l s e   i f ( k e y C o d e   = =   k e y s . u p A r r o w )   { 
                             m o d u l e . v e r b o s e ( ' U p   k e y   p r e s s e d ,   c h a n g i n g   a c t i v e   r e s u l t ' ) ; 
                             n e w I n d e x   =   ( c u r r e n t I n d e x   -   1   <   0 ) 
                                 ?   c u r r e n t I n d e x 
                                 :   c u r r e n t I n d e x   -   1 
                             ; 
                             $ c a t e g o r y 
                                 . r e m o v e C l a s s ( a c t i v e C l a s s ) 
                             ; 
                             $ r e s u l t 
                                 . r e m o v e C l a s s ( a c t i v e C l a s s ) 
                                 . e q ( n e w I n d e x ) 
                                     . a d d C l a s s ( a c t i v e C l a s s ) 
                                     . c l o s e s t ( $ c a t e g o r y ) 
                                         . a d d C l a s s ( a c t i v e C l a s s ) 
                             ; 
                             e v e n t . p r e v e n t D e f a u l t ( ) ; 
                         } 
                         e l s e   i f ( k e y C o d e   = =   k e y s . d o w n A r r o w )   { 
                             m o d u l e . v e r b o s e ( ' D o w n   k e y   p r e s s e d ,   c h a n g i n g   a c t i v e   r e s u l t ' ) ; 
                             n e w I n d e x   =   ( c u r r e n t I n d e x   +   1   > =   r e s u l t S i z e ) 
                                 ?   c u r r e n t I n d e x 
                                 :   c u r r e n t I n d e x   +   1 
                             ; 
                             $ c a t e g o r y 
                                 . r e m o v e C l a s s ( a c t i v e C l a s s ) 
                             ; 
                             $ r e s u l t 
                                 . r e m o v e C l a s s ( a c t i v e C l a s s ) 
                                 . e q ( n e w I n d e x ) 
                                     . a d d C l a s s ( a c t i v e C l a s s ) 
                                     . c l o s e s t ( $ c a t e g o r y ) 
                                         . a d d C l a s s ( a c t i v e C l a s s ) 
                             ; 
                             e v e n t . p r e v e n t D e f a u l t ( ) ; 
                         } 
                     } 
                     e l s e   { 
                         / /   q u e r y   s h o r t c u t s 
                         i f ( k e y C o d e   = =   k e y s . e n t e r )   { 
                             m o d u l e . v e r b o s e ( ' E n t e r   k e y   p r e s s e d ,   e x e c u t i n g   q u e r y ' ) ; 
                             m o d u l e . s e a r c h . q u e r y ( ) ; 
                             $ s e a r c h B u t t o n 
                                 . a d d C l a s s ( c l a s s N a m e . d o w n ) 
                             ; 
                             $ p r o m p t 
                                 . o n e ( ' k e y u p ' ,   f u n c t i o n ( ) { 
                                     $ s e a r c h B u t t o n 
                                         . r e m o v e C l a s s ( c l a s s N a m e . d o w n ) 
                                     ; 
                                 } ) 
                             ; 
                         } 
                     } 
                 } , 
                 s e a r c h :   { 
                     c a n c e l :   f u n c t i o n ( )   { 
                         v a r 
                             x h r   =   $ m o d u l e . d a t a ( ' x h r ' )   | |   f a l s e 
                         ; 
                         i f (   x h r   & &   x h r . s t a t e ( )   ! =   ' r e s o l v e d ' )   { 
                             m o d u l e . d e b u g ( ' C a n c e l l i n g   l a s t   s e a r c h ' ) ; 
                             x h r . a b o r t ( ) ; 
                         } 
                     } , 
                     t h r o t t l e :   f u n c t i o n ( )   { 
                         v a r 
                             s e a r c h T e r m         =   $ p r o m p t . v a l ( ) , 
                             n u m C h a r a c t e r s   =   s e a r c h T e r m . l e n g t h 
                         ; 
                         c l e a r T i m e o u t ( m o d u l e . t i m e r ) ; 
                         i f ( n u m C h a r a c t e r s   > =   s e t t i n g s . m i n C h a r a c t e r s )     { 
                             m o d u l e . t i m e r   =   s e t T i m e o u t ( m o d u l e . s e a r c h . q u e r y ,   s e t t i n g s . s e a r c h T h r o t t l e ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . r e s u l t s . h i d e ( ) ; 
                         } 
                     } , 
                     q u e r y :   f u n c t i o n ( )   { 
                         v a r 
                             s e a r c h T e r m   =   $ p r o m p t . v a l ( ) , 
                             c a c h e d H T M L   =   m o d u l e . s e a r c h . c a c h e . r e a d ( s e a r c h T e r m ) 
                         ; 
                         i f ( c a c h e d H T M L )   { 
                             m o d u l e . d e b u g ( " R e a d i n g   r e s u l t   f o r   ' "   +   s e a r c h T e r m   +   " '   f r o m   c a c h e " ) ; 
                             m o d u l e . r e s u l t s . a d d ( c a c h e d H T M L ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . d e b u g ( " Q u e r y i n g   f o r   ' "   +   s e a r c h T e r m   +   " ' " ) ; 
                             i f ( t y p e o f   s o u r c e   = =   ' o b j e c t ' )   { 
                                 m o d u l e . s e a r c h . l o c a l ( s e a r c h T e r m ) ; 
                             } 
                             e l s e   { 
                                 m o d u l e . s e a r c h . r e m o t e ( s e a r c h T e r m ) ; 
                             } 
                             $ . p r o x y ( s e t t i n g s . o n S e a r c h Q u e r y ,   $ m o d u l e ) ( s e a r c h T e r m ) ; 
                         } 
                     } , 
                     l o c a l :   f u n c t i o n ( s e a r c h T e r m )   { 
                         v a r 
                             r e s u l t s       =   [ ] , 
                             f u l l T e x t R e s u l t s   =   [ ] , 
                             s e a r c h F i e l d s         =   $ . i s A r r a y ( s e t t i n g s . s e a r c h F i e l d s ) 
                                 ?   s e t t i n g s . s e a r c h F i e l d s 
                                 :   [ s e t t i n g s . s e a r c h F i e l d s ] , 
 
                             s e a r c h R e g E x p       =   n e w   R e g E x p ( ' ( ? : \ s | ^ ) '   +   s e a r c h T e r m ,   ' i ' ) , 
                             f u l l T e x t R e g E x p   =   n e w   R e g E x p ( s e a r c h T e r m ,   ' i ' ) , 
                             s e a r c h H T M L 
                         ; 
                         $ m o d u l e 
                             . a d d C l a s s ( c l a s s N a m e . l o a d i n g ) 
                         ; 
                         / /   i t e r a t e   t h r o u g h   s e a r c h   f i e l d s   i n   a r r a y   o r d e r 
                         $ . e a c h ( s e a r c h F i e l d s ,   f u n c t i o n ( i n d e x ,   f i e l d )   { 
                             $ . e a c h ( s o u r c e ,   f u n c t i o n ( l a b e l ,   t h i n g )   { 
                                 i f ( t y p e o f   t h i n g [ f i e l d ]   = =   ' s t r i n g '   & &   ( $ . i n A r r a y ( t h i n g ,   r e s u l t s )   = =   - 1 )   & &   ( $ . i n A r r a y ( t h i n g ,   f u l l T e x t R e s u l t s )   = =   - 1 )   )   { 
                                     i f (   s e a r c h R e g E x p . t e s t (   t h i n g [ f i e l d ]   )   )   { 
                                         r e s u l t s . p u s h ( t h i n g ) ; 
                                     } 
                                     e l s e   i f (   f u l l T e x t R e g E x p . t e s t (   t h i n g [ f i e l d ]   )   )   { 
                                         f u l l T e x t R e s u l t s . p u s h ( t h i n g ) ; 
                                     } 
                                 } 
                             } ) ; 
                         } ) ; 
                         s e a r c h H T M L   =   m o d u l e . r e s u l t s . g e n e r a t e ( { 
                             r e s u l t s :   $ . m e r g e ( r e s u l t s ,   f u l l T e x t R e s u l t s ) 
                         } ) ; 
                         $ m o d u l e 
                             . r e m o v e C l a s s ( c l a s s N a m e . l o a d i n g ) 
                         ; 
                         m o d u l e . s e a r c h . c a c h e . w r i t e ( s e a r c h T e r m ,   s e a r c h H T M L ) ; 
                         m o d u l e . r e s u l t s . a d d ( s e a r c h H T M L ) ; 
                     } , 
                     r e m o t e :   f u n c t i o n ( s e a r c h T e r m )   { 
                         v a r 
                             a p i S e t t i n g s   =   { 
                                 s t a t e C o n t e x t     :   $ m o d u l e , 
                                 u r l                       :   s o u r c e , 
                                 u r l D a t a :   {   q u e r y :   s e a r c h T e r m   } , 
                                 s u c c e s s               :   f u n c t i o n ( r e s p o n s e )   { 
                                     s e a r c h H T M L   =   m o d u l e . r e s u l t s . g e n e r a t e ( r e s p o n s e ) ; 
                                     m o d u l e . s e a r c h . c a c h e . w r i t e ( s e a r c h T e r m ,   s e a r c h H T M L ) ; 
                                     m o d u l e . r e s u l t s . a d d ( s e a r c h H T M L ) ; 
                                 } , 
                                 f a i l u r e             :   m o d u l e . e r r o r 
                             } , 
                             s e a r c h H T M L 
                         ; 
                         m o d u l e . s e a r c h . c a n c e l ( ) ; 
                         m o d u l e . d e b u g ( ' E x e c u t i n g   s e a r c h ' ) ; 
                         $ . e x t e n d ( t r u e ,   a p i S e t t i n g s ,   s e t t i n g s . a p i S e t t i n g s ) ; 
                         $ . a p i ( a p i S e t t i n g s ) ; 
                     } , 
 
                     c a c h e :   { 
                         r e a d :   f u n c t i o n ( n a m e )   { 
                             v a r 
                                 c a c h e   =   $ m o d u l e . d a t a ( ' c a c h e ' ) 
                             ; 
                             r e t u r n   ( s e t t i n g s . c a c h e   & &   ( t y p e o f   c a c h e   = =   ' o b j e c t ' )   & &   ( c a c h e [ n a m e ]   ! = =   u n d e f i n e d )   ) 
                                 ?   c a c h e [ n a m e ] 
                                 :   f a l s e 
                             ; 
                         } , 
                         w r i t e :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                             v a r 
                                 c a c h e   =   ( $ m o d u l e . d a t a ( ' c a c h e ' )   ! = =   u n d e f i n e d ) 
                                     ?   $ m o d u l e . d a t a ( ' c a c h e ' ) 
                                     :   { } 
                             ; 
                             c a c h e [ n a m e ]   =   v a l u e ; 
                             $ m o d u l e 
                                 . d a t a ( ' c a c h e ' ,   c a c h e ) 
                             ; 
                         } 
                     } 
                 } , 
 
                 r e s u l t s :   { 
                     g e n e r a t e :   f u n c t i o n ( r e s p o n s e )   { 
                         m o d u l e . d e b u g ( ' G e n e r a t i n g   h t m l   f r o m   r e s p o n s e ' ,   r e s p o n s e ) ; 
                         v a r 
                             t e m p l a t e   =   s e t t i n g s . t e m p l a t e s [ s e t t i n g s . t y p e ] , 
                             h t m l           =   ' ' 
                         ; 
                         i f ( ( $ . i s P l a i n O b j e c t ( r e s p o n s e . r e s u l t s )   & &   ! $ . i s E m p t y O b j e c t ( r e s p o n s e . r e s u l t s ) )   | |   ( $ . i s A r r a y ( r e s p o n s e . r e s u l t s )   & &   r e s p o n s e . r e s u l t s . l e n g t h   >   0 )   )   { 
                             i f ( s e t t i n g s . m a x R e s u l t s   >   0 )   { 
                                 r e s p o n s e . r e s u l t s   =   $ . m a k e A r r a y ( r e s p o n s e . r e s u l t s ) . s l i c e ( 0 ,   s e t t i n g s . m a x R e s u l t s ) ; 
                             } 
                             i f ( r e s p o n s e . r e s u l t s . l e n g t h   >   0 )   { 
                                 i f ( $ . i s F u n c t i o n ( t e m p l a t e ) )   { 
                                     h t m l   =   t e m p l a t e ( r e s p o n s e ) ; 
                                 } 
                                 e l s e   { 
                                     m o d u l e . e r r o r ( e r r o r . n o T e m p l a t e ,   f a l s e ) ; 
                                 } 
                             } 
                         } 
                         e l s e   { 
                             h t m l   =   m o d u l e . m e s s a g e ( e r r o r . n o R e s u l t s ,   ' e m p t y ' ) ; 
                         } 
                         $ . p r o x y ( s e t t i n g s . o n R e s u l t s ,   $ m o d u l e ) ( r e s p o n s e ) ; 
                         r e t u r n   h t m l ; 
                     } , 
                     a d d :   f u n c t i o n ( h t m l )   { 
                         i f ( s e t t i n g s . o n R e s u l t s A d d   = =   ' d e f a u l t '   | |   $ . p r o x y ( s e t t i n g s . o n R e s u l t s A d d ,   $ r e s u l t s ) ( h t m l )   = =   ' d e f a u l t ' )   { 
                             $ r e s u l t s 
                                 . h t m l ( h t m l ) 
                             ; 
                         } 
                         m o d u l e . r e s u l t s . s h o w ( ) ; 
                     } , 
                     s h o w :   f u n c t i o n ( )   { 
                         i f (   ( $ r e s u l t s . f i l t e r ( ' : v i s i b l e ' ) . s i z e ( )   = = =   0 )   & &   ( $ p r o m p t . f i l t e r ( ' : f o c u s ' ) . s i z e ( )   >   0 )   & &   $ r e s u l t s . h t m l ( )   ! = =   ' ' )   { 
                             $ r e s u l t s 
                                 . s t o p ( ) 
                                 . f a d e I n ( 2 0 0 ) 
                             ; 
                             $ . p r o x y ( s e t t i n g s . o n R e s u l t s O p e n ,   $ r e s u l t s ) ( ) ; 
                         } 
                     } , 
                     h i d e :   f u n c t i o n ( )   { 
                         i f ( $ r e s u l t s . f i l t e r ( ' : v i s i b l e ' ) . s i z e ( )   >   0 )   { 
                             $ r e s u l t s 
                                 . s t o p ( ) 
                                 . f a d e O u t ( 2 0 0 ) 
                             ; 
                             $ . p r o x y ( s e t t i n g s . o n R e s u l t s C l o s e ,   $ r e s u l t s ) ( ) ; 
                         } 
                     } , 
                     s e l e c t :   f u n c t i o n ( e v e n t )   { 
                         m o d u l e . d e b u g ( ' S e a r c h   r e s u l t   s e l e c t e d ' ) ; 
                         v a r 
                             $ r e s u l t   =   $ ( t h i s ) , 
                             $ t i t l e     =   $ r e s u l t . f i n d ( ' . t i t l e ' ) , 
                             t i t l e       =   $ t i t l e . h t m l ( ) 
                         ; 
                         i f ( s e t t i n g s . o n S e l e c t   = =   ' d e f a u l t '   | |   $ . p r o x y ( s e t t i n g s . o n S e l e c t ,   t h i s ) ( e v e n t )   = =   ' d e f a u l t ' )   { 
                             v a r 
                                 $ l i n k     =   $ r e s u l t . f i n d ( ' a [ h r e f ] ' ) . e q ( 0 ) , 
                                 h r e f       =   $ l i n k . a t t r ( ' h r e f ' )   | |   f a l s e , 
                                 t a r g e t   =   $ l i n k . a t t r ( ' t a r g e t ' )   | |   f a l s e 
                             ; 
                             m o d u l e . r e s u l t s . h i d e ( ) ; 
                             $ p r o m p t 
                                 . v a l ( t i t l e ) 
                             ; 
                             i f ( h r e f )   { 
                                 i f ( t a r g e t   = =   ' _ b l a n k '   | |   e v e n t . c t r l K e y )   { 
                                     w i n d o w . o p e n ( h r e f ) ; 
                                 } 
                                 e l s e   { 
                                     w i n d o w . l o c a t i o n . h r e f   =   ( h r e f ) ; 
                                 } 
                             } 
                         } 
                     } 
                 } , 
 
                 s e t t i n g :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                     i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                         $ . e x t e n d ( t r u e ,   s e t t i n g s ,   n a m e ) ; 
                     } 
                     e l s e   i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                         s e t t i n g s [ n a m e ]   =   v a l u e ; 
                     } 
                     e l s e   { 
                         r e t u r n   s e t t i n g s [ n a m e ] ; 
                     } 
                 } , 
                 i n t e r n a l :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                     i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                         $ . e x t e n d ( t r u e ,   m o d u l e ,   n a m e ) ; 
                     } 
                     e l s e   i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                         m o d u l e [ n a m e ]   =   v a l u e ; 
                     } 
                     e l s e   { 
                         r e t u r n   m o d u l e [ n a m e ] ; 
                     } 
                 } , 
                 d e b u g :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . d e b u g )   { 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . d e b u g   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                             m o d u l e . d e b u g . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                         } 
                     } 
                 } , 
                 v e r b o s e :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . v e r b o s e   & &   s e t t i n g s . d e b u g )   { 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . v e r b o s e   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                             m o d u l e . v e r b o s e . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                         } 
                     } 
                 } , 
                 e r r o r :   f u n c t i o n ( )   { 
                     m o d u l e . e r r o r   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . e r r o r ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                     m o d u l e . e r r o r . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                 } , 
                 p e r f o r m a n c e :   { 
                     l o g :   f u n c t i o n ( m e s s a g e )   { 
                         v a r 
                             c u r r e n t T i m e , 
                             e x e c u t i o n T i m e , 
                             p r e v i o u s T i m e 
                         ; 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             c u r r e n t T i m e       =   n e w   D a t e ( ) . g e t T i m e ( ) ; 
                             p r e v i o u s T i m e     =   t i m e   | |   c u r r e n t T i m e ; 
                             e x e c u t i o n T i m e   =   c u r r e n t T i m e   -   p r e v i o u s T i m e ; 
                             t i m e                     =   c u r r e n t T i m e ; 
                             p e r f o r m a n c e . p u s h ( { 
                                 ' E l e m e n t '                 :   e l e m e n t , 
                                 ' N a m e '                       :   m e s s a g e [ 0 ] , 
                                 ' A r g u m e n t s '             :   [ ] . s l i c e . c a l l ( m e s s a g e ,   1 )   | |   ' ' , 
                                 ' E x e c u t i o n   T i m e '   :   e x e c u t i o n T i m e 
                             } ) ; 
                         } 
                         c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                         m o d u l e . p e r f o r m a n c e . t i m e r   =   s e t T i m e o u t ( m o d u l e . p e r f o r m a n c e . d i s p l a y ,   1 0 0 ) ; 
                     } , 
                     d i s p l a y :   f u n c t i o n ( )   { 
                         v a r 
                             t i t l e   =   s e t t i n g s . n a m e   +   ' : ' , 
                             t o t a l T i m e   =   0 
                         ; 
                         t i m e   =   f a l s e ; 
                         c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                         $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                             t o t a l T i m e   + =   d a t a [ ' E x e c u t i o n   T i m e ' ] ; 
                         } ) ; 
                         t i t l e   + =   '   '   +   t o t a l T i m e   +   ' m s ' ; 
                         i f ( m o d u l e S e l e c t o r )   { 
                             t i t l e   + =   '   \ ' '   +   m o d u l e S e l e c t o r   +   ' \ ' ' ; 
                         } 
                         i f ( $ a l l M o d u l e s . s i z e ( )   >   1 )   { 
                             t i t l e   + =   '   '   +   ' ( '   +   $ a l l M o d u l e s . s i z e ( )   +   ' ) ' ; 
                         } 
                         i f (   ( c o n s o l e . g r o u p   ! = =   u n d e f i n e d   | |   c o n s o l e . t a b l e   ! = =   u n d e f i n e d )   & &   p e r f o r m a n c e . l e n g t h   >   0 )   { 
                             c o n s o l e . g r o u p C o l l a p s e d ( t i t l e ) ; 
                             i f ( c o n s o l e . t a b l e )   { 
                                 c o n s o l e . t a b l e ( p e r f o r m a n c e ) ; 
                             } 
                             e l s e   { 
                                 $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                                     c o n s o l e . l o g ( d a t a [ ' N a m e ' ]   +   ' :   '   +   d a t a [ ' E x e c u t i o n   T i m e ' ] + ' m s ' ) ; 
                                 } ) ; 
                             } 
                             c o n s o l e . g r o u p E n d ( ) ; 
                         } 
                         p e r f o r m a n c e   =   [ ] ; 
                     } 
                 } , 
                 i n v o k e :   f u n c t i o n ( q u e r y ,   p a s s e d A r g u m e n t s ,   c o n t e x t )   { 
                     v a r 
                         o b j e c t   =   i n s t a n c e , 
                         m a x D e p t h , 
                         f o u n d , 
                         r e s p o n s e 
                     ; 
                     p a s s e d A r g u m e n t s   =   p a s s e d A r g u m e n t s   | |   q u e r y A r g u m e n t s ; 
                     c o n t e x t                   =   e l e m e n t                   | |   c o n t e x t ; 
                     i f ( t y p e o f   q u e r y   = =   ' s t r i n g '   & &   o b j e c t   ! = =   u n d e f i n e d )   { 
                         q u e r y         =   q u e r y . s p l i t ( / [ \ .   ] / ) ; 
                         m a x D e p t h   =   q u e r y . l e n g t h   -   1 ; 
                         $ . e a c h ( q u e r y ,   f u n c t i o n ( d e p t h ,   v a l u e )   { 
                             v a r   c a m e l C a s e V a l u e   =   ( d e p t h   ! =   m a x D e p t h ) 
                                 ?   v a l u e   +   q u e r y [ d e p t h   +   1 ] . c h a r A t ( 0 ) . t o U p p e r C a s e ( )   +   q u e r y [ d e p t h   +   1 ] . s l i c e ( 1 ) 
                                 :   q u e r y 
                             ; 
                             i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ c a m e l C a s e V a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                                 o b j e c t   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                             } 
                             e l s e   i f (   o b j e c t [ c a m e l C a s e V a l u e ]   ! = =   u n d e f i n e d   )   { 
                                 f o u n d   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                                 r e t u r n   f a l s e ; 
                             } 
                             e l s e   i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ v a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                                 o b j e c t   =   o b j e c t [ v a l u e ] ; 
                             } 
                             e l s e   i f (   o b j e c t [ v a l u e ]   ! = =   u n d e f i n e d   )   { 
                                 f o u n d   =   o b j e c t [ v a l u e ] ; 
                                 r e t u r n   f a l s e ; 
                             } 
                             e l s e   { 
                                 r e t u r n   f a l s e ; 
                             } 
                         } ) ; 
                     } 
                     i f   (   $ . i s F u n c t i o n (   f o u n d   )   )   { 
                         r e s p o n s e   =   f o u n d . a p p l y ( c o n t e x t ,   p a s s e d A r g u m e n t s ) ; 
                     } 
                     e l s e   i f ( f o u n d   ! = =   u n d e f i n e d )   { 
                         r e s p o n s e   =   f o u n d ; 
                     } 
                     i f ( $ . i s A r r a y ( r e t u r n e d V a l u e ) )   { 
                         r e t u r n e d V a l u e . p u s h ( r e s p o n s e ) ; 
                     } 
                     e l s e   i f ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d )   { 
                         r e t u r n e d V a l u e   =   [ r e t u r n e d V a l u e ,   r e s p o n s e ] ; 
                     } 
                     e l s e   i f ( r e s p o n s e   ! = =   u n d e f i n e d )   { 
                         r e t u r n e d V a l u e   =   r e s p o n s e ; 
                     } 
                     r e t u r n   f o u n d ; 
                 } 
             } ; 
             i f ( m e t h o d I n v o k e d )   { 
                 i f ( i n s t a n c e   = = =   u n d e f i n e d )   { 
                     m o d u l e . i n i t i a l i z e ( ) ; 
                 } 
                 m o d u l e . i n v o k e ( q u e r y ) ; 
             } 
             e l s e   { 
                 i f ( i n s t a n c e   ! = =   u n d e f i n e d )   { 
                     m o d u l e . d e s t r o y ( ) ; 
                 } 
                 m o d u l e . i n i t i a l i z e ( ) ; 
             } 
 
         } ) 
     ; 
 
     r e t u r n   ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d ) 
         ?   r e t u r n e d V a l u e 
         :   t h i s 
     ; 
 } ; 
 
 $ . f n . s e a r c h . s e t t i n g s   =   { 
 
     n a m e                       :   ' S e a r c h   M o d u l e ' , 
     n a m e s p a c e             :   ' s e a r c h ' , 
 
     d e b u g                     :   f a l s e , 
     v e r b o s e                 :   t r u e , 
     p e r f o r m a n c e         :   t r u e , 
 
     / /   o n S e l e c t   d e f a u l t   a c t i o n   i s   d e f i n e d   i n   m o d u l e 
     o n S e l e c t               :   ' d e f a u l t ' , 
     o n R e s u l t s A d d       :   ' d e f a u l t ' , 
 
     o n S e a r c h Q u e r y     :   f u n c t i o n ( ) { } , 
     o n R e s u l t s             :   f u n c t i o n ( r e s p o n s e ) { } , 
 
     o n R e s u l t s O p e n     :   f u n c t i o n ( ) { } , 
     o n R e s u l t s C l o s e   :   f u n c t i o n ( ) { } , 
 
     a u t o m a t i c             :   ' t r u e ' , 
     t y p e                       :   ' s i m p l e ' , 
     m i n C h a r a c t e r s     :   3 , 
     s e a r c h T h r o t t l e   :   3 0 0 , 
     m a x R e s u l t s           :   7 , 
     c a c h e                     :   t r u e , 
 
     s e a r c h F i e l d s         :   [ 
         ' t i t l e ' , 
         ' d e s c r i p t i o n ' 
     ] , 
 
     / /   a p i   c o n f i g 
     a p i S e t t i n g s :   { 
 
     } , 
 
     c l a s s N a m e :   { 
         a c t i v e     :   ' a c t i v e ' , 
         d o w n         :   ' d o w n ' , 
         f o c u s       :   ' f o c u s ' , 
         e m p t y       :   ' e m p t y ' , 
         l o a d i n g   :   ' l o a d i n g ' 
     } , 
 
     e r r o r   :   { 
         n o R e s u l t s       :   ' Y o u r   s e a r c h   r e t u r n e d   n o   r e s u l t s ' , 
         l o g g i n g           :   ' E r r o r   i n   d e b u g   l o g g i n g ,   e x i t i n g . ' , 
         n o T e m p l a t e     :   ' A   v a l i d   t e m p l a t e   n a m e   w a s   n o t   s p e c i f i e d . ' , 
         s e r v e r E r r o r   :   ' T h e r e   w a s   a n   i s s u e   w i t h   q u e r y i n g   t h e   s e r v e r . ' , 
         m e t h o d             :   ' T h e   m e t h o d   y o u   c a l l e d   i s   n o t   d e f i n e d . ' 
     } , 
 
     s e l e c t o r   :   { 
         p r o m p t               :   ' . p r o m p t ' , 
         s e a r c h B u t t o n   :   ' . s e a r c h . b u t t o n ' , 
         r e s u l t s             :   ' . r e s u l t s ' , 
         c a t e g o r y           :   ' . c a t e g o r y ' , 
         r e s u l t               :   ' . r e s u l t ' 
     } , 
 
     t e m p l a t e s :   { 
         m e s s a g e :   f u n c t i o n ( m e s s a g e ,   t y p e )   { 
             v a r 
                 h t m l   =   ' ' 
             ; 
             i f ( m e s s a g e   ! = =   u n d e f i n e d   & &   t y p e   ! = =   u n d e f i n e d )   { 
                 h t m l   + =     ' ' 
                     +   ' < d i v   c l a s s = " m e s s a g e   '   +   t y p e   + ' " > ' 
                 ; 
                 / /   m e s s a g e   t y p e 
                 i f ( t y p e   = =   ' e m p t y ' )   { 
                     h t m l   + =   ' ' 
                         +   ' < d i v   c l a s s = " h e a d e r " > N o   R e s u l t s < / d i v   c l a s s = " h e a d e r " > ' 
                         +   ' < d i v   c l a s s = " d e s c r i p t i o n " > '   +   m e s s a g e   +   ' < / d i v   c l a s s = " d e s c r i p t i o n " > ' 
                     ; 
                 } 
                 e l s e   { 
                     h t m l   + =   '   < d i v   c l a s s = " d e s c r i p t i o n " > '   +   m e s s a g e   +   ' < / d i v > ' ; 
                 } 
                 h t m l   + =   ' < / d i v > ' ; 
             } 
             r e t u r n   h t m l ; 
         } , 
         c a t e g o r i e s :   f u n c t i o n ( r e s p o n s e )   { 
             v a r 
                 h t m l   =   ' ' 
             ; 
             i f ( r e s p o n s e . r e s u l t s   ! = =   u n d e f i n e d )   { 
                 / /   e a c h   c a t e g o r y 
                 $ . e a c h ( r e s p o n s e . r e s u l t s ,   f u n c t i o n ( i n d e x ,   c a t e g o r y )   { 
                     i f ( c a t e g o r y . r e s u l t s   ! = =   u n d e f i n e d   & &   c a t e g o r y . r e s u l t s . l e n g t h   >   0 )   { 
                         h t m l     + =   ' ' 
                             +   ' < d i v   c l a s s = " c a t e g o r y " > ' 
                             +   ' < d i v   c l a s s = " n a m e " > '   +   c a t e g o r y . n a m e   +   ' < / d i v > ' 
                         ; 
                         / /   e a c h   i t e m   i n s i d e   c a t e g o r y 
                         $ . e a c h ( c a t e g o r y . r e s u l t s ,   f u n c t i o n ( i n d e x ,   r e s u l t )   { 
                             h t m l     + =   ' < d i v   c l a s s = " r e s u l t " > ' ; 
                             h t m l     + =   ' < a   h r e f = " '   +   r e s u l t . u r l   +   ' " > < / a > ' ; 
                             i f ( r e s u l t . i m a g e   ! = =   u n d e f i n e d )   { 
                                 h t m l + =   ' ' 
                                     +   ' < d i v   c l a s s = " i m a g e " > ' 
                                     +   '   < i m g   s r c = " '   +   r e s u l t . i m a g e   +   ' " > ' 
                                     +   ' < / d i v > ' 
                                 ; 
                             } 
                             h t m l   + =   ' < d i v   c l a s s = " i n f o " > ' ; 
                             i f ( r e s u l t . p r i c e   ! = =   u n d e f i n e d )   { 
                                 h t m l + =   ' < d i v   c l a s s = " p r i c e " > '   +   r e s u l t . p r i c e   +   ' < / d i v > ' ; 
                             } 
                             i f ( r e s u l t . t i t l e   ! = =   u n d e f i n e d )   { 
                                 h t m l + =   ' < d i v   c l a s s = " t i t l e " > '   +   r e s u l t . t i t l e   +   ' < / d i v > ' ; 
                             } 
                             i f ( r e s u l t . d e s c r i p t i o n   ! = =   u n d e f i n e d )   { 
                                 h t m l + =   ' < d i v   c l a s s = " d e s c r i p t i o n " > '   +   r e s u l t . d e s c r i p t i o n   +   ' < / d i v > ' ; 
                             } 
                             h t m l     + =   ' ' 
                                 +   ' < / d i v > ' 
                                 +   ' < / d i v > ' 
                             ; 
                         } ) ; 
                         h t m l     + =   ' ' 
                             +   ' < / d i v > ' 
                         ; 
                     } 
                 } ) ; 
                 i f ( r e s p o n s e . r e s u l t P a g e )   { 
                     h t m l   + =   ' ' 
                     +   ' < a   h r e f = " '   +   r e s p o n s e . r e s u l t P a g e . u r l   +   ' "   c l a s s = " a l l " > ' 
                     +       r e s p o n s e . r e s u l t P a g e . t e x t 
                     +   ' < / a > ' ; 
                 } 
                 r e t u r n   h t m l ; 
             } 
             r e t u r n   f a l s e ; 
         } , 
         s i m p l e :   f u n c t i o n ( r e s p o n s e )   { 
             v a r 
                 h t m l   =   ' ' 
             ; 
             i f ( r e s p o n s e . r e s u l t s   ! = =   u n d e f i n e d )   { 
 
                 / /   e a c h   r e s u l t 
                 $ . e a c h ( r e s p o n s e . r e s u l t s ,   f u n c t i o n ( i n d e x ,   r e s u l t )   { 
                     h t m l     + =   ' < a   c l a s s = " r e s u l t "   h r e f = " '   +   r e s u l t . u r l   +   ' " > ' ; 
                     i f ( r e s u l t . i m a g e   ! = =   u n d e f i n e d )   { 
                         h t m l + =   ' ' 
                             +   ' < d i v   c l a s s = " i m a g e " > ' 
                             +   '   < i m g   s r c = " '   +   r e s u l t . i m a g e   +   ' " > ' 
                             +   ' < / d i v > ' 
                         ; 
                     } 
                     h t m l   + =   ' < d i v   c l a s s = " i n f o " > ' ; 
                     i f ( r e s u l t . p r i c e   ! = =   u n d e f i n e d )   { 
                         h t m l + =   ' < d i v   c l a s s = " p r i c e " > '   +   r e s u l t . p r i c e   +   ' < / d i v > ' ; 
                     } 
                     i f ( r e s u l t . t i t l e   ! = =   u n d e f i n e d )   { 
                         h t m l + =   ' < d i v   c l a s s = " t i t l e " > '   +   r e s u l t . t i t l e   +   ' < / d i v > ' ; 
                     } 
                     i f ( r e s u l t . d e s c r i p t i o n   ! = =   u n d e f i n e d )   { 
                         h t m l + =   ' < d i v   c l a s s = " d e s c r i p t i o n " > '   +   r e s u l t . d e s c r i p t i o n   +   ' < / d i v > ' ; 
                     } 
                     h t m l     + =   ' ' 
                         +   ' < / d i v > ' 
                         +   ' < / a > ' 
                     ; 
                 } ) ; 
 
                 i f ( r e s p o n s e . r e s u l t P a g e )   { 
                     h t m l   + =   ' ' 
                     +   ' < a   h r e f = " '   +   r e s p o n s e . r e s u l t P a g e . u r l   +   ' "   c l a s s = " a l l " > ' 
                     +       r e s p o n s e . r e s u l t P a g e . t e x t 
                     +   ' < / a > ' ; 
                 } 
                 r e t u r n   h t m l ; 
             } 
             r e t u r n   f a l s e ; 
         } 
     } 
 } ; 
 
 } ) (   j Q u e r y ,   w i n d o w   ,   d o c u m e n t   ) ; 
 / * 
   *   #   S e m a n t i c   -   S h a p e 
   *   h t t p : / / g i t h u b . c o m / j l u k i c / s e m a n t i c - u i / 
   * 
   * 
   *   C o p y r i g h t   2 0 1 3   C o n t r i b u t o r s 
   *   R e l e a s e d   u n d e r   t h e   M I T   l i c e n s e 
   *   h t t p : / / o p e n s o u r c e . o r g / l i c e n s e s / M I T 
   * 
   * / 
 
 ; ( f u n c t i o n   (   $ ,   w i n d o w ,   d o c u m e n t ,   u n d e f i n e d   )   { 
 
 $ . f n . s h a p e   =   f u n c t i o n ( p a r a m e t e r s )   { 
     v a r 
         $ a l l M o d u l e s           =   $ ( t h i s ) , 
         $ b o d y                       =   $ ( ' b o d y ' ) , 
 
         t i m e                         =   n e w   D a t e ( ) . g e t T i m e ( ) , 
         p e r f o r m a n c e           =   [ ] , 
 
         q u e r y                       =   a r g u m e n t s [ 0 ] , 
         m e t h o d I n v o k e d       =   ( t y p e o f   q u e r y   = =   ' s t r i n g ' ) , 
         q u e r y A r g u m e n t s     =   [ ] . s l i c e . c a l l ( a r g u m e n t s ,   1 ) , 
         r e t u r n e d V a l u e 
     ; 
 
     $ a l l M o d u l e s 
         . e a c h ( f u n c t i o n ( )   { 
             v a r 
                 m o d u l e S e l e c t o r     =   $ a l l M o d u l e s . s e l e c t o r   | |   ' ' , 
                 s e t t i n g s                 =   $ . e x t e n d ( t r u e ,   { } ,   $ . f n . s h a p e . s e t t i n g s ,   p a r a m e t e r s ) , 
 
                 / /   i n t e r n a l   a l i a s e s 
                 n a m e s p a c e           =   s e t t i n g s . n a m e s p a c e , 
                 s e l e c t o r             =   s e t t i n g s . s e l e c t o r , 
                 e r r o r                   =   s e t t i n g s . e r r o r , 
                 c l a s s N a m e           =   s e t t i n g s . c l a s s N a m e , 
 
                 / /   d e f i n e   n a m e s p a c e s   f o r   m o d u l e s 
                 e v e n t N a m e s p a c e     =   ' . '   +   n a m e s p a c e , 
                 m o d u l e N a m e s p a c e   =   ' m o d u l e - '   +   n a m e s p a c e , 
 
                 / /   s e l e c t o r   c a c h e 
                 $ m o d u l e               =   $ ( t h i s ) , 
                 $ s i d e s                 =   $ m o d u l e . f i n d ( s e l e c t o r . s i d e s ) , 
                 $ s i d e                   =   $ m o d u l e . f i n d ( s e l e c t o r . s i d e ) , 
 
                 / /   p r i v a t e   v a r i a b l e s 
                 n e x t S e l e c t o r   =   f a l s e , 
                 $ a c t i v e S i d e , 
                 $ n e x t S i d e , 
 
                 / /   s t a n d a r d   m o d u l e 
                 e l e m e n t               =   t h i s , 
                 i n s t a n c e             =   $ m o d u l e . d a t a ( m o d u l e N a m e s p a c e ) , 
                 m o d u l e 
             ; 
 
             m o d u l e   =   { 
 
                 i n i t i a l i z e :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' I n i t i a l i z i n g   m o d u l e   f o r ' ,   e l e m e n t ) ; 
                     m o d u l e . s e t . d e f a u l t S i d e ( ) ; 
                     m o d u l e . i n s t a n t i a t e ( ) ; 
                 } , 
 
                 i n s t a n t i a t e :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' S t o r i n g   i n s t a n c e   o f   m o d u l e ' ,   m o d u l e ) ; 
                     i n s t a n c e   =   m o d u l e ; 
                     $ m o d u l e 
                         . d a t a ( m o d u l e N a m e s p a c e ,   i n s t a n c e ) 
                     ; 
                 } , 
 
                 d e s t r o y :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' D e s t r o y i n g   p r e v i o u s   m o d u l e   f o r ' ,   e l e m e n t ) ; 
                     $ m o d u l e 
                         . r e m o v e D a t a ( m o d u l e N a m e s p a c e ) 
                         . o f f ( e v e n t N a m e s p a c e ) 
                     ; 
                 } , 
 
                 r e f r e s h :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' R e f r e s h i n g   s e l e c t o r   c a c h e   f o r ' ,   e l e m e n t ) ; 
                     $ m o d u l e   =   $ ( e l e m e n t ) ; 
                     $ s i d e s     =   $ ( t h i s ) . f i n d ( s e l e c t o r . s h a p e ) ; 
                     $ s i d e       =   $ ( t h i s ) . f i n d ( s e l e c t o r . s i d e ) ; 
                 } , 
 
                 r e p a i n t :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' F o r c i n g   r e p a i n t   e v e n t ' ) ; 
                     v a r 
                         s h a p e                     =   $ s i d e s . g e t ( 0 )   | |   d o c u m e n t . c r e a t e E l e m e n t ( ' d i v ' ) , 
                         f a k e A s s i g n m e n t   =   s h a p e . o f f s e t W i d t h 
                     ; 
                 } , 
 
                 a n i m a t e :   f u n c t i o n ( p r o p e r t y O b j e c t ,   c a l l b a c k )   { 
                     m o d u l e . v e r b o s e ( ' A n i m a t i n g   b o x   w i t h   p r o p e r t i e s ' ,   p r o p e r t y O b j e c t ) ; 
                     c a l l b a c k   =   c a l l b a c k   | |   f u n c t i o n ( e v e n t )   { 
                         m o d u l e . v e r b o s e ( ' E x e c u t i n g   a n i m a t i o n   c a l l b a c k ' ) ; 
                         i f ( e v e n t   ! = =   u n d e f i n e d )   { 
                             e v e n t . s t o p P r o p a g a t i o n ( ) ; 
                         } 
                         m o d u l e . r e s e t ( ) ; 
                         m o d u l e . s e t . a c t i v e ( ) ; 
                     } ; 
                     $ . p r o x y ( s e t t i n g s . b e f o r e C h a n g e ,   $ n e x t S i d e [ 0 ] ) ( ) ; 
                     i f ( m o d u l e . g e t . t r a n s i t i o n E v e n t ( ) )   { 
                         m o d u l e . v e r b o s e ( ' S t a r t i n g   C S S   a n i m a t i o n ' ) ; 
                         $ m o d u l e 
                             . a d d C l a s s ( c l a s s N a m e . a n i m a t i n g ) 
                         ; 
                         m o d u l e . r e p a i n t ( ) ; 
                         $ m o d u l e 
                             . a d d C l a s s ( c l a s s N a m e . a n i m a t i n g ) 
                         ; 
                         $ a c t i v e S i d e 
                             . a d d C l a s s ( c l a s s N a m e . h i d d e n ) 
                         ; 
                         $ s i d e s 
                             . c s s ( p r o p e r t y O b j e c t ) 
                             . o n e ( m o d u l e . g e t . t r a n s i t i o n E v e n t ( ) ,   c a l l b a c k ) 
                         ; 
                         m o d u l e . s e t . d u r a t i o n ( s e t t i n g s . d u r a t i o n ) ; 
                     } 
                     e l s e   { 
                         c a l l b a c k ( ) ; 
                     } 
                 } , 
 
                 q u e u e :   f u n c t i o n ( m e t h o d )   { 
                     m o d u l e . d e b u g ( ' Q u e u e i n g   a n i m a t i o n   o f ' ,   m e t h o d ) ; 
                     $ s i d e s 
                         . o n e ( m o d u l e . g e t . t r a n s i t i o n E v e n t ( ) ,   f u n c t i o n ( )   { 
                             m o d u l e . d e b u g ( ' E x e c u t i n g   q u e u e d   a n i m a t i o n ' ) ; 
                             s e t T i m e o u t ( f u n c t i o n ( ) { 
                                 $ m o d u l e . s h a p e ( m e t h o d ) ; 
                             } ,   0 ) ; 
                         } ) 
                     ; 
                 } , 
 
                 r e s e t :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' A n i m a t i n g   s t a t e s   r e s e t ' ) ; 
                     $ m o d u l e 
                         . r e m o v e C l a s s ( c l a s s N a m e . a n i m a t i n g ) 
                         . a t t r ( ' s t y l e ' ,   ' ' ) 
                         . r e m o v e A t t r ( ' s t y l e ' ) 
                     ; 
                     / /   r e m o v e A t t r   s t y l e   d o e s   n o t   c o n s i s t e n t l y   w o r k   i n   s a f a r i 
                     $ s i d e s 
                         . a t t r ( ' s t y l e ' ,   ' ' ) 
                         . r e m o v e A t t r ( ' s t y l e ' ) 
                     ; 
                     $ s i d e 
                         . a t t r ( ' s t y l e ' ,   ' ' ) 
                         . r e m o v e A t t r ( ' s t y l e ' ) 
                         . r e m o v e C l a s s ( c l a s s N a m e . h i d d e n ) 
                     ; 
                     $ n e x t S i d e 
                         . r e m o v e C l a s s ( c l a s s N a m e . a n i m a t i n g ) 
                         . a t t r ( ' s t y l e ' ,   ' ' ) 
                         . r e m o v e A t t r ( ' s t y l e ' ) 
                     ; 
                 } , 
 
                 i s :   { 
                     a n i m a t i n g :   f u n c t i o n ( )   { 
                         r e t u r n   $ m o d u l e . h a s C l a s s ( c l a s s N a m e . a n i m a t i n g ) ; 
                     } 
                 } , 
 
                 s e t :   { 
 
                     d e f a u l t S i d e :   f u n c t i o n ( )   { 
                         $ a c t i v e S i d e   =   $ m o d u l e . f i n d ( ' . '   +   s e t t i n g s . c l a s s N a m e . a c t i v e ) ; 
                         $ n e x t S i d e       =   (   $ a c t i v e S i d e . n e x t ( s e l e c t o r . s i d e ) . s i z e ( )   >   0   ) 
                             ?   $ a c t i v e S i d e . n e x t ( s e l e c t o r . s i d e ) 
                             :   $ m o d u l e . f i n d ( s e l e c t o r . s i d e ) . f i r s t ( ) 
                         ; 
                         n e x t S e l e c t o r   =   f a l s e ; 
                         m o d u l e . v e r b o s e ( ' A c t i v e   s i d e   s e t   t o ' ,   $ a c t i v e S i d e ) ; 
                         m o d u l e . v e r b o s e ( ' N e x t   s i d e   s e t   t o ' ,   $ n e x t S i d e ) ; 
                     } , 
 
                     d u r a t i o n :   f u n c t i o n ( d u r a t i o n )   { 
                         d u r a t i o n   =   d u r a t i o n   | |   s e t t i n g s . d u r a t i o n ; 
                         d u r a t i o n   =   ( t y p e o f   d u r a t i o n   = =   ' n u m b e r ' ) 
                             ?   d u r a t i o n   +   ' m s ' 
                             :   d u r a t i o n 
                         ; 
                         m o d u l e . v e r b o s e ( ' S e t t i n g   a n i m a t i o n   d u r a t i o n ' ,   d u r a t i o n ) ; 
                         $ s i d e s . a d d ( $ s i d e ) 
                             . c s s ( { 
                                 ' - w e b k i t - t r a n s i t i o n - d u r a t i o n ' :   d u r a t i o n , 
                                 ' - m o z - t r a n s i t i o n - d u r a t i o n ' :   d u r a t i o n , 
                                 ' - m s - t r a n s i t i o n - d u r a t i o n ' :   d u r a t i o n , 
                                 ' - o - t r a n s i t i o n - d u r a t i o n ' :   d u r a t i o n , 
                                 ' t r a n s i t i o n - d u r a t i o n ' :   d u r a t i o n 
                             } ) 
                         ; 
                     } , 
 
                     s t a g e S i z e :   f u n c t i o n ( )   { 
                         v a r 
                             $ c l o n e             =   $ m o d u l e . c l o n e ( ) . a d d C l a s s ( c l a s s N a m e . l o a d i n g ) , 
                             $ a c t i v e S i d e   =   $ c l o n e . f i n d ( ' . '   +   s e t t i n g s . c l a s s N a m e . a c t i v e ) , 
                             $ n e x t S i d e       =   ( n e x t S e l e c t o r ) 
                                 ?   $ c l o n e . f i n d ( n e x t S e l e c t o r ) 
                                 :   (   $ a c t i v e S i d e . n e x t ( s e l e c t o r . s i d e ) . s i z e ( )   >   0   ) 
                                     ?   $ a c t i v e S i d e . n e x t ( s e l e c t o r . s i d e ) 
                                     :   $ c l o n e . f i n d ( s e l e c t o r . s i d e ) . f i r s t ( ) , 
                             n e w S i z e   =   { } 
                         ; 
                         $ a c t i v e S i d e . r e m o v e C l a s s ( c l a s s N a m e . a c t i v e ) ; 
                         $ n e x t S i d e . a d d C l a s s ( c l a s s N a m e . a c t i v e ) ; 
                         $ c l o n e . p r e p e n d T o ( $ b o d y ) ; 
                         n e w S i z e   =   { 
                             w i d t h     :   $ n e x t S i d e . o u t e r W i d t h ( ) , 
                             h e i g h t   :   $ n e x t S i d e . o u t e r H e i g h t ( ) 
                         } ; 
                         $ c l o n e . r e m o v e ( ) ; 
                         $ m o d u l e 
                             . c s s ( n e w S i z e ) 
                         ; 
                         m o d u l e . v e r b o s e ( ' R e s i z i n g   s t a g e   t o   f i t   n e w   c o n t e n t ' ,   n e w S i z e ) ; 
                     } , 
 
                     n e x t S i d e :   f u n c t i o n ( s e l e c t o r )   { 
                         n e x t S e l e c t o r   =   s e l e c t o r ; 
                         $ n e x t S i d e   =   $ m o d u l e . f i n d ( s e l e c t o r ) ; 
                         i f ( $ n e x t S i d e . s i z e ( )   = = =   0 )   { 
                             m o d u l e . e r r o r ( e r r o r . s i d e ) ; 
                         } 
                         m o d u l e . v e r b o s e ( ' N e x t   s i d e   m a n u a l l y   s e t   t o ' ,   $ n e x t S i d e ) ; 
                     } , 
 
                     a c t i v e :   f u n c t i o n ( )   { 
                         m o d u l e . v e r b o s e ( ' S e t t i n g   n e w   s i d e   t o   a c t i v e ' ,   $ n e x t S i d e ) ; 
                         $ s i d e 
                             . r e m o v e C l a s s ( c l a s s N a m e . a c t i v e ) 
                         ; 
                         $ n e x t S i d e 
                             . a d d C l a s s ( c l a s s N a m e . a c t i v e ) 
                         ; 
                         $ . p r o x y ( s e t t i n g s . o n C h a n g e ,   $ n e x t S i d e [ 0 ] ) ( ) ; 
                         m o d u l e . s e t . d e f a u l t S i d e ( ) ; 
                     } 
                 } , 
 
                 f l i p :   { 
 
                     u p :   f u n c t i o n ( )   { 
                         m o d u l e . d e b u g ( ' F l i p p i n g   u p ' ,   $ n e x t S i d e ) ; 
                         i f (   ! m o d u l e . i s . a n i m a t i n g ( )   )   { 
                             m o d u l e . s e t . s t a g e S i z e ( ) ; 
                             m o d u l e . s t a g e . a b o v e ( ) ; 
                             m o d u l e . a n i m a t e (   m o d u l e . g e t . t r a n s f o r m . u p ( )   ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . q u e u e ( ' f l i p   u p ' ) ; 
                         } 
                     } , 
 
                     d o w n :   f u n c t i o n ( )   { 
                         m o d u l e . d e b u g ( ' F l i p p i n g   d o w n ' ,   $ n e x t S i d e ) ; 
                         i f (   ! m o d u l e . i s . a n i m a t i n g ( )   )   { 
                             m o d u l e . s e t . s t a g e S i z e ( ) ; 
                             m o d u l e . s t a g e . b e l o w ( ) ; 
                             m o d u l e . a n i m a t e (   m o d u l e . g e t . t r a n s f o r m . d o w n ( )   ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . q u e u e ( ' f l i p   d o w n ' ) ; 
                         } 
                     } , 
 
                     l e f t :   f u n c t i o n ( )   { 
                         m o d u l e . d e b u g ( ' F l i p p i n g   l e f t ' ,   $ n e x t S i d e ) ; 
                         i f (   ! m o d u l e . i s . a n i m a t i n g ( )   )   { 
                             m o d u l e . s e t . s t a g e S i z e ( ) ; 
                             m o d u l e . s t a g e . l e f t ( ) ; 
                             m o d u l e . a n i m a t e ( m o d u l e . g e t . t r a n s f o r m . l e f t ( )   ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . q u e u e ( ' f l i p   l e f t ' ) ; 
                         } 
                     } , 
 
                     r i g h t :   f u n c t i o n ( )   { 
                         m o d u l e . d e b u g ( ' F l i p p i n g   r i g h t ' ,   $ n e x t S i d e ) ; 
                         i f (   ! m o d u l e . i s . a n i m a t i n g ( )   )   { 
                             m o d u l e . s e t . s t a g e S i z e ( ) ; 
                             m o d u l e . s t a g e . r i g h t ( ) ; 
                             m o d u l e . a n i m a t e ( m o d u l e . g e t . t r a n s f o r m . r i g h t ( )   ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . q u e u e ( ' f l i p   r i g h t ' ) ; 
                         } 
                     } , 
 
                     o v e r :   f u n c t i o n ( )   { 
                         m o d u l e . d e b u g ( ' F l i p p i n g   o v e r ' ,   $ n e x t S i d e ) ; 
                         i f (   ! m o d u l e . i s . a n i m a t i n g ( )   )   { 
                             m o d u l e . s e t . s t a g e S i z e ( ) ; 
                             m o d u l e . s t a g e . b e h i n d ( ) ; 
                             m o d u l e . a n i m a t e ( m o d u l e . g e t . t r a n s f o r m . o v e r ( )   ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . q u e u e ( ' f l i p   o v e r ' ) ; 
                         } 
                     } , 
 
                     b a c k :   f u n c t i o n ( )   { 
                         m o d u l e . d e b u g ( ' F l i p p i n g   b a c k ' ,   $ n e x t S i d e ) ; 
                         i f (   ! m o d u l e . i s . a n i m a t i n g ( )   )   { 
                             m o d u l e . s e t . s t a g e S i z e ( ) ; 
                             m o d u l e . s t a g e . b e h i n d ( ) ; 
                             m o d u l e . a n i m a t e ( m o d u l e . g e t . t r a n s f o r m . b a c k ( )   ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . q u e u e ( ' f l i p   b a c k ' ) ; 
                         } 
                     } 
 
                 } , 
 
                 g e t :   { 
 
                     t r a n s f o r m :   { 
                         u p :   f u n c t i o n ( )   { 
                             v a r 
                                 t r a n s l a t e   =   { 
                                     y :   - ( ( $ a c t i v e S i d e . o u t e r H e i g h t ( )   -   $ n e x t S i d e . o u t e r H e i g h t ( ) )   /   2 ) , 
                                     z :   - ( $ a c t i v e S i d e . o u t e r H e i g h t ( )   /   2 ) 
                                 } 
                             ; 
                             r e t u r n   { 
                                 t r a n s f o r m :   ' t r a n s l a t e Y ( '   +   t r a n s l a t e . y   +   ' p x )   t r a n s l a t e Z ( ' +   t r a n s l a t e . z   +   ' p x )   r o t a t e X ( - 9 0 d e g ) ' 
                             } ; 
                         } , 
 
                         d o w n :   f u n c t i o n ( )   { 
                             v a r 
                                 t r a n s l a t e   =   { 
                                     y :   - ( ( $ a c t i v e S i d e . o u t e r H e i g h t ( )   -   $ n e x t S i d e . o u t e r H e i g h t ( ) )   /   2 ) , 
                                     z :   - ( $ a c t i v e S i d e . o u t e r H e i g h t ( )   /   2 ) 
                                 } 
                             ; 
                             r e t u r n   { 
                                 t r a n s f o r m :   ' t r a n s l a t e Y ( '   +   t r a n s l a t e . y   +   ' p x )   t r a n s l a t e Z ( ' +   t r a n s l a t e . z   +   ' p x )   r o t a t e X ( 9 0 d e g ) ' 
                             } ; 
                         } , 
 
                         l e f t :   f u n c t i o n ( )   { 
                             v a r 
                                 t r a n s l a t e   =   { 
                                     x   :   - ( ( $ a c t i v e S i d e . o u t e r W i d t h ( )   -   $ n e x t S i d e . o u t e r W i d t h ( ) )   /   2 ) , 
                                     z   :   - ( $ a c t i v e S i d e . o u t e r W i d t h ( )   /   2 ) 
                                 } 
                             ; 
                             r e t u r n   { 
                                 t r a n s f o r m :   ' t r a n s l a t e X ( '   +   t r a n s l a t e . x   +   ' p x )   t r a n s l a t e Z ( '   +   t r a n s l a t e . z   +   ' p x )   r o t a t e Y ( 9 0 d e g ) ' 
                             } ; 
                         } , 
 
                         r i g h t :   f u n c t i o n ( )   { 
                             v a r 
                                 t r a n s l a t e   =   { 
                                     x   :   - ( ( $ a c t i v e S i d e . o u t e r W i d t h ( )   -   $ n e x t S i d e . o u t e r W i d t h ( ) )   /   2 ) , 
                                     z   :   - ( $ a c t i v e S i d e . o u t e r W i d t h ( )   /   2 ) 
                                 } 
                             ; 
                             r e t u r n   { 
                                 t r a n s f o r m :   ' t r a n s l a t e X ( '   +   t r a n s l a t e . x   +   ' p x )   t r a n s l a t e Z ( '   +   t r a n s l a t e . z   +   ' p x )   r o t a t e Y ( - 9 0 d e g ) ' 
                             } ; 
                         } , 
 
                         o v e r :   f u n c t i o n ( )   { 
                             v a r 
                                 t r a n s l a t e   =   { 
                                     x   :   - ( ( $ a c t i v e S i d e . o u t e r W i d t h ( )   -   $ n e x t S i d e . o u t e r W i d t h ( ) )   /   2 ) 
                                 } 
                             ; 
                             r e t u r n   { 
                                 t r a n s f o r m :   ' t r a n s l a t e X ( '   +   t r a n s l a t e . x   +   ' p x )   r o t a t e Y ( 1 8 0 d e g ) ' 
                             } ; 
                         } , 
 
                         b a c k :   f u n c t i o n ( )   { 
                             v a r 
                                 t r a n s l a t e   =   { 
                                     x   :   - ( ( $ a c t i v e S i d e . o u t e r W i d t h ( )   -   $ n e x t S i d e . o u t e r W i d t h ( ) )   /   2 ) 
                                 } 
                             ; 
                             r e t u r n   { 
                                 t r a n s f o r m :   ' t r a n s l a t e X ( '   +   t r a n s l a t e . x   +   ' p x )   r o t a t e Y ( - 1 8 0 d e g ) ' 
                             } ; 
                         } 
                     } , 
 
                     t r a n s i t i o n E v e n t :   f u n c t i o n ( )   { 
                         v a r 
                             e l e m e n t           =   d o c u m e n t . c r e a t e E l e m e n t ( ' e l e m e n t ' ) , 
                             t r a n s i t i o n s   =   { 
                                 ' t r a n s i t i o n '               : ' t r a n s i t i o n e n d ' , 
                                 ' O T r a n s i t i o n '             : ' o T r a n s i t i o n E n d ' , 
                                 ' M o z T r a n s i t i o n '         : ' t r a n s i t i o n e n d ' , 
                                 ' W e b k i t T r a n s i t i o n '   : ' w e b k i t T r a n s i t i o n E n d ' 
                             } , 
                             t r a n s i t i o n 
                         ; 
                         f o r ( t r a n s i t i o n   i n   t r a n s i t i o n s ) { 
                             i f (   e l e m e n t . s t y l e [ t r a n s i t i o n ]   ! = =   u n d e f i n e d   ) { 
                                 r e t u r n   t r a n s i t i o n s [ t r a n s i t i o n ] ; 
                             } 
                         } 
                     } , 
 
                     n e x t S i d e :   f u n c t i o n ( )   { 
                         r e t u r n   (   $ a c t i v e S i d e . n e x t ( s e l e c t o r . s i d e ) . s i z e ( )   >   0   ) 
                             ?   $ a c t i v e S i d e . n e x t ( s e l e c t o r . s i d e ) 
                             :   $ m o d u l e . f i n d ( s e l e c t o r . s i d e ) . f i r s t ( ) 
                         ; 
                     } 
 
                 } , 
 
                 s t a g e :   { 
 
                     a b o v e :   f u n c t i o n ( )   { 
                         v a r 
                             b o x   =   { 
                                 o r i g i n   :   ( ( $ a c t i v e S i d e . o u t e r H e i g h t ( )   -   $ n e x t S i d e . o u t e r H e i g h t ( ) )   /   2 ) , 
                                 d e p t h     :   { 
                                     a c t i v e   :   ( $ n e x t S i d e . o u t e r H e i g h t ( )   /   2 ) , 
                                     n e x t       :   ( $ a c t i v e S i d e . o u t e r H e i g h t ( )   /   2 ) 
                                 } 
                             } 
                         ; 
                         m o d u l e . v e r b o s e ( ' S e t t i n g   t h e   i n i t i a l   a n i m a t i o n   p o s i t i o n   a s   a b o v e ' ,   $ n e x t S i d e ,   b o x ) ; 
                         $ a c t i v e S i d e 
                             . c s s ( { 
                                 ' t r a n s f o r m '   :   ' r o t a t e Y ( 0 d e g )   t r a n s l a t e Z ( '   +   b o x . d e p t h . a c t i v e   +   ' p x ) ' 
                             } ) 
                         ; 
                         $ n e x t S i d e 
                             . a d d C l a s s ( c l a s s N a m e . a n i m a t i n g ) 
                             . c s s ( { 
                                 ' d i s p l a y '       :   ' b l o c k ' , 
                                 ' t o p '               :   b o x . o r i g i n   +   ' p x ' , 
                                 ' t r a n s f o r m '   :   ' r o t a t e X ( 9 0 d e g )   t r a n s l a t e Z ( '   +   b o x . d e p t h . n e x t   +   ' p x ) ' 
                             } ) 
                         ; 
                     } , 
 
                     b e l o w :   f u n c t i o n ( )   { 
                         v a r 
                             b o x   =   { 
                                 o r i g i n   :   ( ( $ a c t i v e S i d e . o u t e r H e i g h t ( )   -   $ n e x t S i d e . o u t e r H e i g h t ( ) )   /   2 ) , 
                                 d e p t h     :   { 
                                     a c t i v e   :   ( $ n e x t S i d e . o u t e r H e i g h t ( )   /   2 ) , 
                                     n e x t       :   ( $ a c t i v e S i d e . o u t e r H e i g h t ( )   /   2 ) 
                                 } 
                             } 
                         ; 
                         m o d u l e . v e r b o s e ( ' S e t t i n g   t h e   i n i t i a l   a n i m a t i o n   p o s i t i o n   a s   b e l o w ' ,   $ n e x t S i d e ,   b o x ) ; 
                         $ a c t i v e S i d e 
                             . c s s ( { 
                                 ' t r a n s f o r m '   :   ' r o t a t e Y ( 0 d e g )   t r a n s l a t e Z ( '   +   b o x . d e p t h . a c t i v e   +   ' p x ) ' 
                             } ) 
                         ; 
                         $ n e x t S i d e 
                             . a d d C l a s s ( c l a s s N a m e . a n i m a t i n g ) 
                             . c s s ( { 
                                 ' d i s p l a y '       :   ' b l o c k ' , 
                                 ' t o p '               :   b o x . o r i g i n   +   ' p x ' , 
                                 ' t r a n s f o r m '   :   ' r o t a t e X ( - 9 0 d e g )   t r a n s l a t e Z ( '   +   b o x . d e p t h . n e x t   +   ' p x ) ' 
                             } ) 
                         ; 
                     } , 
 
                     l e f t :   f u n c t i o n ( )   { 
                         v a r 
                             b o x   =   { 
                                 o r i g i n   :   (   (   $ a c t i v e S i d e . o u t e r W i d t h ( )   -   $ n e x t S i d e . o u t e r W i d t h ( )   )   /   2 ) , 
                                 d e p t h     :   { 
                                     a c t i v e   :   ( $ n e x t S i d e . o u t e r W i d t h ( )   /   2 ) , 
                                     n e x t       :   ( $ a c t i v e S i d e . o u t e r W i d t h ( )   /   2 ) 
                                 } 
                             } 
                         ; 
                         m o d u l e . v e r b o s e ( ' S e t t i n g   t h e   i n i t i a l   a n i m a t i o n   p o s i t i o n   a s   l e f t ' ,   $ n e x t S i d e ,   b o x ) ; 
                         $ a c t i v e S i d e 
                             . c s s ( { 
                                 ' t r a n s f o r m '   :   ' r o t a t e Y ( 0 d e g )   t r a n s l a t e Z ( '   +   b o x . d e p t h . a c t i v e   +   ' p x ) ' 
                             } ) 
                         ; 
                         $ n e x t S i d e 
                             . a d d C l a s s ( c l a s s N a m e . a n i m a t i n g ) 
                             . c s s ( { 
                                 ' d i s p l a y '       :   ' b l o c k ' , 
                                 ' l e f t '             :   b o x . o r i g i n   +   ' p x ' , 
                                 ' t r a n s f o r m '   :   ' r o t a t e Y ( - 9 0 d e g )   t r a n s l a t e Z ( '   +   b o x . d e p t h . n e x t   +   ' p x ) ' 
                             } ) 
                         ; 
                     } , 
 
                     r i g h t :   f u n c t i o n ( )   { 
                         v a r 
                             b o x   =   { 
                                 o r i g i n   :   (   (   $ a c t i v e S i d e . o u t e r W i d t h ( )   -   $ n e x t S i d e . o u t e r W i d t h ( )   )   /   2 ) , 
                                 d e p t h     :   { 
                                     a c t i v e   :   ( $ n e x t S i d e . o u t e r W i d t h ( )   /   2 ) , 
                                     n e x t       :   ( $ a c t i v e S i d e . o u t e r W i d t h ( )   /   2 ) 
                                 } 
                             } 
                         ; 
                         m o d u l e . v e r b o s e ( ' S e t t i n g   t h e   i n i t i a l   a n i m a t i o n   p o s i t i o n   a s   l e f t ' ,   $ n e x t S i d e ,   b o x ) ; 
                         $ a c t i v e S i d e 
                             . c s s ( { 
                                 ' t r a n s f o r m '   :   ' r o t a t e Y ( 0 d e g )   t r a n s l a t e Z ( '   +   b o x . d e p t h . a c t i v e   +   ' p x ) ' 
                             } ) 
                         ; 
                         $ n e x t S i d e 
                             . a d d C l a s s ( c l a s s N a m e . a n i m a t i n g ) 
                             . c s s ( { 
                                 ' d i s p l a y '       :   ' b l o c k ' , 
                                 ' l e f t '             :   b o x . o r i g i n   +   ' p x ' , 
                                 ' t r a n s f o r m '   :   ' r o t a t e Y ( 9 0 d e g )   t r a n s l a t e Z ( '   +   b o x . d e p t h . n e x t   +   ' p x ) ' 
                             } ) 
                         ; 
                     } , 
 
                     b e h i n d :   f u n c t i o n ( )   { 
                         v a r 
                             b o x   =   { 
                                 o r i g i n   :   (   (   $ a c t i v e S i d e . o u t e r W i d t h ( )   -   $ n e x t S i d e . o u t e r W i d t h ( )   )   /   2 ) , 
                                 d e p t h     :   { 
                                     a c t i v e   :   ( $ n e x t S i d e . o u t e r W i d t h ( )   /   2 ) , 
                                     n e x t       :   ( $ a c t i v e S i d e . o u t e r W i d t h ( )   /   2 ) 
                                 } 
                             } 
                         ; 
                         m o d u l e . v e r b o s e ( ' S e t t i n g   t h e   i n i t i a l   a n i m a t i o n   p o s i t i o n   a s   b e h i n d ' ,   $ n e x t S i d e ,   b o x ) ; 
                         $ a c t i v e S i d e 
                             . c s s ( { 
                                 ' t r a n s f o r m '   :   ' r o t a t e Y ( 0 d e g ) ' 
                             } ) 
                         ; 
                         $ n e x t S i d e 
                             . a d d C l a s s ( c l a s s N a m e . a n i m a t i n g ) 
                             . c s s ( { 
                                 ' d i s p l a y '       :   ' b l o c k ' , 
                                 ' l e f t '             :   b o x . o r i g i n   +   ' p x ' , 
                                 ' t r a n s f o r m '   :   ' r o t a t e Y ( - 1 8 0 d e g ) ' 
                             } ) 
                         ; 
                     } 
                 } , 
                 s e t t i n g :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                     i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                         $ . e x t e n d ( t r u e ,   s e t t i n g s ,   n a m e ) ; 
                     } 
                     e l s e   i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                         s e t t i n g s [ n a m e ]   =   v a l u e ; 
                     } 
                     e l s e   { 
                         r e t u r n   s e t t i n g s [ n a m e ] ; 
                     } 
                 } , 
                 i n t e r n a l :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                     i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                         $ . e x t e n d ( t r u e ,   m o d u l e ,   n a m e ) ; 
                     } 
                     e l s e   i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                         m o d u l e [ n a m e ]   =   v a l u e ; 
                     } 
                     e l s e   { 
                         r e t u r n   m o d u l e [ n a m e ] ; 
                     } 
                 } , 
                 d e b u g :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . d e b u g )   { 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . d e b u g   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                             m o d u l e . d e b u g . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                         } 
                     } 
                 } , 
                 v e r b o s e :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . v e r b o s e   & &   s e t t i n g s . d e b u g )   { 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . v e r b o s e   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                             m o d u l e . v e r b o s e . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                         } 
                     } 
                 } , 
                 e r r o r :   f u n c t i o n ( )   { 
                     m o d u l e . e r r o r   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . e r r o r ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                     m o d u l e . e r r o r . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                 } , 
                 p e r f o r m a n c e :   { 
                     l o g :   f u n c t i o n ( m e s s a g e )   { 
                         v a r 
                             c u r r e n t T i m e , 
                             e x e c u t i o n T i m e , 
                             p r e v i o u s T i m e 
                         ; 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             c u r r e n t T i m e       =   n e w   D a t e ( ) . g e t T i m e ( ) ; 
                             p r e v i o u s T i m e     =   t i m e   | |   c u r r e n t T i m e ; 
                             e x e c u t i o n T i m e   =   c u r r e n t T i m e   -   p r e v i o u s T i m e ; 
                             t i m e                     =   c u r r e n t T i m e ; 
                             p e r f o r m a n c e . p u s h ( { 
                                 ' E l e m e n t '                 :   e l e m e n t , 
                                 ' N a m e '                       :   m e s s a g e [ 0 ] , 
                                 ' A r g u m e n t s '             :   [ ] . s l i c e . c a l l ( m e s s a g e ,   1 )   | |   ' ' , 
                                 ' E x e c u t i o n   T i m e '   :   e x e c u t i o n T i m e 
                             } ) ; 
                         } 
                         c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                         m o d u l e . p e r f o r m a n c e . t i m e r   =   s e t T i m e o u t ( m o d u l e . p e r f o r m a n c e . d i s p l a y ,   1 0 0 ) ; 
                     } , 
                     d i s p l a y :   f u n c t i o n ( )   { 
                         v a r 
                             t i t l e   =   s e t t i n g s . n a m e   +   ' : ' , 
                             t o t a l T i m e   =   0 
                         ; 
                         t i m e   =   f a l s e ; 
                         c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                         $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                             t o t a l T i m e   + =   d a t a [ ' E x e c u t i o n   T i m e ' ] ; 
                         } ) ; 
                         t i t l e   + =   '   '   +   t o t a l T i m e   +   ' m s ' ; 
                         i f ( m o d u l e S e l e c t o r )   { 
                             t i t l e   + =   '   \ ' '   +   m o d u l e S e l e c t o r   +   ' \ ' ' ; 
                         } 
                         i f ( $ a l l M o d u l e s . s i z e ( )   >   1 )   { 
                             t i t l e   + =   '   '   +   ' ( '   +   $ a l l M o d u l e s . s i z e ( )   +   ' ) ' ; 
                         } 
                         i f (   ( c o n s o l e . g r o u p   ! = =   u n d e f i n e d   | |   c o n s o l e . t a b l e   ! = =   u n d e f i n e d )   & &   p e r f o r m a n c e . l e n g t h   >   0 )   { 
                             c o n s o l e . g r o u p C o l l a p s e d ( t i t l e ) ; 
                             i f ( c o n s o l e . t a b l e )   { 
                                 c o n s o l e . t a b l e ( p e r f o r m a n c e ) ; 
                             } 
                             e l s e   { 
                                 $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                                     c o n s o l e . l o g ( d a t a [ ' N a m e ' ]   +   ' :   '   +   d a t a [ ' E x e c u t i o n   T i m e ' ] + ' m s ' ) ; 
                                 } ) ; 
                             } 
                             c o n s o l e . g r o u p E n d ( ) ; 
                         } 
                         p e r f o r m a n c e   =   [ ] ; 
                     } 
                 } , 
                 i n v o k e :   f u n c t i o n ( q u e r y ,   p a s s e d A r g u m e n t s ,   c o n t e x t )   { 
                     v a r 
                         o b j e c t   =   i n s t a n c e , 
                         m a x D e p t h , 
                         f o u n d , 
                         r e s p o n s e 
                     ; 
                     p a s s e d A r g u m e n t s   =   p a s s e d A r g u m e n t s   | |   q u e r y A r g u m e n t s ; 
                     c o n t e x t                   =   e l e m e n t                   | |   c o n t e x t ; 
                     i f ( t y p e o f   q u e r y   = =   ' s t r i n g '   & &   o b j e c t   ! = =   u n d e f i n e d )   { 
                         q u e r y         =   q u e r y . s p l i t ( / [ \ .   ] / ) ; 
                         m a x D e p t h   =   q u e r y . l e n g t h   -   1 ; 
                         $ . e a c h ( q u e r y ,   f u n c t i o n ( d e p t h ,   v a l u e )   { 
                             v a r   c a m e l C a s e V a l u e   =   ( d e p t h   ! =   m a x D e p t h ) 
                                 ?   v a l u e   +   q u e r y [ d e p t h   +   1 ] . c h a r A t ( 0 ) . t o U p p e r C a s e ( )   +   q u e r y [ d e p t h   +   1 ] . s l i c e ( 1 ) 
                                 :   q u e r y 
                             ; 
                             i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ c a m e l C a s e V a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                                 o b j e c t   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                             } 
                             e l s e   i f (   o b j e c t [ c a m e l C a s e V a l u e ]   ! = =   u n d e f i n e d   )   { 
                                 f o u n d   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                                 r e t u r n   f a l s e ; 
                             } 
                             e l s e   i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ v a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                                 o b j e c t   =   o b j e c t [ v a l u e ] ; 
                             } 
                             e l s e   i f (   o b j e c t [ v a l u e ]   ! = =   u n d e f i n e d   )   { 
                                 f o u n d   =   o b j e c t [ v a l u e ] ; 
                                 r e t u r n   f a l s e ; 
                             } 
                             e l s e   { 
                                 r e t u r n   f a l s e ; 
                             } 
                         } ) ; 
                     } 
                     i f   (   $ . i s F u n c t i o n (   f o u n d   )   )   { 
                         r e s p o n s e   =   f o u n d . a p p l y ( c o n t e x t ,   p a s s e d A r g u m e n t s ) ; 
                     } 
                     e l s e   i f ( f o u n d   ! = =   u n d e f i n e d )   { 
                         r e s p o n s e   =   f o u n d ; 
                     } 
                     i f ( $ . i s A r r a y ( r e t u r n e d V a l u e ) )   { 
                         r e t u r n e d V a l u e . p u s h ( r e s p o n s e ) ; 
                     } 
                     e l s e   i f ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d )   { 
                         r e t u r n e d V a l u e   =   [ r e t u r n e d V a l u e ,   r e s p o n s e ] ; 
                     } 
                     e l s e   i f ( r e s p o n s e   ! = =   u n d e f i n e d )   { 
                         r e t u r n e d V a l u e   =   r e s p o n s e ; 
                     } 
                     r e t u r n   f o u n d ; 
                 } 
             } ; 
 
             i f ( m e t h o d I n v o k e d )   { 
                 i f ( i n s t a n c e   = = =   u n d e f i n e d )   { 
                     m o d u l e . i n i t i a l i z e ( ) ; 
                 } 
                 m o d u l e . i n v o k e ( q u e r y ) ; 
             } 
             e l s e   { 
                 i f ( i n s t a n c e   ! = =   u n d e f i n e d )   { 
                     m o d u l e . d e s t r o y ( ) ; 
                 } 
                 m o d u l e . i n i t i a l i z e ( ) ; 
             } 
         } ) 
     ; 
 
     r e t u r n   ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d ) 
         ?   r e t u r n e d V a l u e 
         :   t h i s 
     ; 
 } ; 
 
 $ . f n . s h a p e . s e t t i n g s   =   { 
 
     / /   m o d u l e   i n f o 
     n a m e   :   ' S h a p e ' , 
 
     / /   d e b u g   c o n t e n t   o u t p u t t e d   t o   c o n s o l e 
     d e b u g             :   f a l s e , 
 
     / /   v e r b o s e   d e b u g   o u t p u t 
     v e r b o s e         :   t r u e , 
 
     / /   p e r f o r m a n c e   d a t a   o u t p u t 
     p e r f o r m a n c e :   t r u e , 
 
     / /   e v e n t   n a m e s p a c e 
     n a m e s p a c e     :   ' s h a p e ' , 
 
     / /   c a l l b a c k   o c c u r s   o n   s i d e   c h a n g e 
     b e f o r e C h a n g e   :   f u n c t i o n ( )   { } , 
     o n C h a n g e           :   f u n c t i o n ( )   { } , 
 
     / /   a n i m a t i o n   d u r a t i o n 
     d u r a t i o n       :   7 0 0 , 
 
     / /   p o s s i b l e   e r r o r s 
     e r r o r :   { 
         s i d e       :   ' Y o u   t r i e d   t o   s w i t c h   t o   a   s i d e   t h a t   d o e s   n o t   e x i s t . ' , 
         m e t h o d   :   ' T h e   m e t h o d   y o u   c a l l e d   i s   n o t   d e f i n e d ' 
     } , 
 
     / /   c l a s s n a m e s   u s e d 
     c l a s s N a m e       :   { 
         a n i m a t i n g   :   ' a n i m a t i n g ' , 
         h i d d e n         :   ' h i d d e n ' , 
         l o a d i n g       :   ' l o a d i n g ' , 
         a c t i v e         :   ' a c t i v e ' 
     } , 
 
     / /   s e l e c t o r s   u s e d 
     s e l e c t o r         :   { 
         s i d e s   :   ' . s i d e s ' , 
         s i d e     :   ' . s i d e ' 
     } 
 
 } ; 
 
 
 } ) (   j Q u e r y ,   w i n d o w   ,   d o c u m e n t   ) ; 
 / * 
   *   #   S e m a n t i c   -   S i d e b a r 
   *   h t t p : / / g i t h u b . c o m / j l u k i c / s e m a n t i c - u i / 
   * 
   * 
   *   C o p y r i g h t   2 0 1 3   C o n t r i b u t o r s 
   *   R e l e a s e d   u n d e r   t h e   M I T   l i c e n s e 
   *   h t t p : / / o p e n s o u r c e . o r g / l i c e n s e s / M I T 
   * 
   * / 
 
 ; ( f u n c t i o n   (   $ ,   w i n d o w ,   d o c u m e n t ,   u n d e f i n e d   )   { 
 
 $ . f n . s i d e b a r   =   f u n c t i o n ( p a r a m e t e r s )   { 
     v a r 
         $ a l l M o d u l e s         =   $ ( t h i s ) , 
         $ b o d y                     =   $ ( ' b o d y ' ) , 
         $ h e a d                     =   $ ( ' h e a d ' ) , 
 
         m o d u l e S e l e c t o r   =   $ a l l M o d u l e s . s e l e c t o r   | |   ' ' , 
 
         t i m e                       =   n e w   D a t e ( ) . g e t T i m e ( ) , 
         p e r f o r m a n c e         =   [ ] , 
 
         q u e r y                     =   a r g u m e n t s [ 0 ] , 
         m e t h o d I n v o k e d     =   ( t y p e o f   q u e r y   = =   ' s t r i n g ' ) , 
         q u e r y A r g u m e n t s   =   [ ] . s l i c e . c a l l ( a r g u m e n t s ,   1 ) , 
         r e t u r n e d V a l u e 
     ; 
 
     $ a l l M o d u l e s 
         . e a c h ( f u n c t i o n ( )   { 
             v a r 
                 s e t t i n g s                 =   (   $ . i s P l a i n O b j e c t ( p a r a m e t e r s )   ) 
                     ?   $ . e x t e n d ( t r u e ,   { } ,   $ . f n . s i d e b a r . s e t t i n g s ,   p a r a m e t e r s ) 
                     :   $ . e x t e n d ( { } ,   $ . f n . s i d e b a r . s e t t i n g s ) , 
 
                 s e l e c t o r                 =   s e t t i n g s . s e l e c t o r , 
                 c l a s s N a m e               =   s e t t i n g s . c l a s s N a m e , 
                 n a m e s p a c e               =   s e t t i n g s . n a m e s p a c e , 
                 e r r o r                       =   s e t t i n g s . e r r o r , 
 
                 e v e n t N a m e s p a c e     =   ' . '   +   n a m e s p a c e , 
                 m o d u l e N a m e s p a c e   =   ' m o d u l e - '   +   n a m e s p a c e , 
 
                 $ m o d u l e                   =   $ ( t h i s ) , 
                 $ s t y l e                     =   $ ( ' s t y l e [ t i t l e = '   +   n a m e s p a c e   +   ' ] ' ) , 
 
                 e l e m e n t                   =   t h i s , 
                 i n s t a n c e                 =   $ m o d u l e . d a t a ( m o d u l e N a m e s p a c e ) , 
                 m o d u l e 
             ; 
 
             m o d u l e             =   { 
 
                 i n i t i a l i z e :   f u n c t i o n ( )   { 
                     m o d u l e . d e b u g ( ' I n i t i a l i z i n g   s i d e b a r ' ,   $ m o d u l e ) ; 
                     m o d u l e . i n s t a n t i a t e ( ) ; 
                 } , 
 
                 i n s t a n t i a t e :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' S t o r i n g   i n s t a n c e   o f   m o d u l e ' ,   m o d u l e ) ; 
                     i n s t a n c e   =   m o d u l e ; 
                     $ m o d u l e 
                         . d a t a ( m o d u l e N a m e s p a c e ,   m o d u l e ) 
                     ; 
                 } , 
 
                 d e s t r o y :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' D e s t r o y i n g   p r e v i o u s   m o d u l e   f o r ' ,   $ m o d u l e ) ; 
                     $ m o d u l e 
                         . o f f ( e v e n t N a m e s p a c e ) 
                         . r e m o v e D a t a ( m o d u l e N a m e s p a c e ) 
                     ; 
                 } , 
 
                 r e f r e s h :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' R e f r e s h i n g   s e l e c t o r   c a c h e ' ) ; 
                     $ s t y l e     =   $ ( ' s t y l e [ t i t l e = '   +   n a m e s p a c e   +   ' ] ' ) ; 
                 } , 
 
                 a t t a c h E v e n t s :   f u n c t i o n ( s e l e c t o r ,   e v e n t )   { 
                     v a r 
                         $ t o g g l e   =   $ ( s e l e c t o r ) 
                     ; 
                     e v e n t   =   $ . i s F u n c t i o n ( m o d u l e [ e v e n t ] ) 
                         ?   m o d u l e [ e v e n t ] 
                         :   m o d u l e . t o g g l e 
                     ; 
                     i f ( $ t o g g l e . s i z e ( )   >   0 )   { 
                         m o d u l e . d e b u g ( ' A t t a c h i n g   s i d e b a r   e v e n t s   t o   e l e m e n t ' ,   s e l e c t o r ,   e v e n t ) ; 
                         $ t o g g l e 
                             . o f f ( e v e n t N a m e s p a c e ) 
                             . o n ( ' c l i c k '   +   e v e n t N a m e s p a c e ,   e v e n t ) 
                         ; 
                     } 
                     e l s e   { 
                         m o d u l e . e r r o r ( e r r o r . n o t F o u n d ) ; 
                     } 
                 } , 
 
                 s h o w :   f u n c t i o n ( c a l l b a c k )   { 
                     c a l l b a c k   =   $ . i s F u n c t i o n ( c a l l b a c k ) 
                         ?   c a l l b a c k 
                         :   f u n c t i o n ( ) { } 
                     ; 
                     m o d u l e . d e b u g ( ' S h o w i n g   s i d e b a r ' ,   c a l l b a c k ) ; 
                     i f ( m o d u l e . i s . c l o s e d ( ) )   { 
                         i f ( ! s e t t i n g s . o v e r l a y )   { 
                             i f ( s e t t i n g s . e x c l u s i v e )   { 
                                 m o d u l e . h i d e A l l ( ) ; 
                             } 
                             m o d u l e . p u s h P a g e ( ) ; 
                         } 
                         m o d u l e . s e t . a c t i v e ( ) ; 
                         c a l l b a c k ( ) ; 
                         $ . p r o x y ( s e t t i n g s . o n C h a n g e ,   e l e m e n t ) ( ) ; 
                         $ . p r o x y ( s e t t i n g s . o n S h o w ,   e l e m e n t ) ( ) ; 
                     } 
                     e l s e   { 
                         m o d u l e . d e b u g ( ' S i d e b a r   i s   a l r e a d y   v i s i b l e ' ) ; 
                     } 
                 } , 
 
                 h i d e :   f u n c t i o n ( c a l l b a c k )   { 
                     c a l l b a c k   =   $ . i s F u n c t i o n ( c a l l b a c k ) 
                         ?   c a l l b a c k 
                         :   f u n c t i o n ( ) { } 
                     ; 
                     m o d u l e . d e b u g ( ' H i d i n g   s i d e b a r ' ,   c a l l b a c k ) ; 
                     i f ( m o d u l e . i s . o p e n ( ) )   { 
                         i f ( ! s e t t i n g s . o v e r l a y )   { 
                             m o d u l e . p u l l P a g e ( ) ; 
                             m o d u l e . r e m o v e . p u s h e d ( ) ; 
                         } 
                         m o d u l e . r e m o v e . a c t i v e ( ) ; 
                         c a l l b a c k ( ) ; 
                         $ . p r o x y ( s e t t i n g s . o n C h a n g e ,   e l e m e n t ) ( ) ; 
                         $ . p r o x y ( s e t t i n g s . o n H i d e ,   e l e m e n t ) ( ) ; 
                     } 
                 } , 
 
                 h i d e A l l :   f u n c t i o n ( )   { 
                     $ ( s e l e c t o r . s i d e b a r ) 
                         . f i l t e r ( ' : v i s i b l e ' ) 
                             . s i d e b a r ( ' h i d e ' ) 
                     ; 
                 } , 
 
                 t o g g l e :   f u n c t i o n ( )   { 
                     i f ( m o d u l e . i s . c l o s e d ( ) )   { 
                         m o d u l e . s h o w ( ) ; 
                     } 
                     e l s e   { 
                         m o d u l e . h i d e ( ) ; 
                     } 
                 } , 
 
                 p u s h P a g e :   f u n c t i o n ( )   { 
                     v a r 
                         d i r e c t i o n   =   m o d u l e . g e t . d i r e c t i o n ( ) , 
                         d i s t a n c e     =   ( m o d u l e . i s . v e r t i c a l ( ) ) 
                             ?   $ m o d u l e . o u t e r H e i g h t ( ) 
                             :   $ m o d u l e . o u t e r W i d t h ( ) 
                     ; 
                     i f ( s e t t i n g s . u s e C S S )   { 
                         m o d u l e . d e b u g ( ' U s i n g   C S S   t o   a n i m a t e   b o d y ' ) ; 
                         m o d u l e . a d d . b o d y C S S ( d i r e c t i o n ,   d i s t a n c e ) ; 
                         m o d u l e . s e t . p u s h e d ( ) ; 
                     } 
                     e l s e   { 
                         m o d u l e . a n i m a t e P a g e ( d i r e c t i o n ,   d i s t a n c e ,   m o d u l e . s e t . p u s h e d ) ; 
                     } 
                 } , 
 
                 p u l l P a g e :   f u n c t i o n ( )   { 
                     v a r 
                         d i r e c t i o n   =   m o d u l e . g e t . d i r e c t i o n ( ) 
                     ; 
                     i f ( s e t t i n g s . u s e C S S )   { 
                         m o d u l e . d e b u g ( ' R e s e t t i n g   b o d y   p o s i t i o n   c s s ' ) ; 
                         m o d u l e . r e m o v e . b o d y C S S ( ) ; 
                     } 
                     e l s e   { 
                         m o d u l e . d e b u g ( ' R e s e t t i n g   b o d y   p o s i t i o n   u s i n g   j a v a s c r i p t ' ) ; 
                         m o d u l e . a n i m a t e P a g e ( d i r e c t i o n ,   0 ) ; 
                     } 
                     m o d u l e . r e m o v e . p u s h e d ( ) ; 
                 } , 
 
                 a n i m a t e P a g e :   f u n c t i o n ( d i r e c t i o n ,   d i s t a n c e )   { 
                     v a r 
                         a n i m a t e S e t t i n g s   =   { } 
                     ; 
                     a n i m a t e S e t t i n g s [ ' p a d d i n g - '   +   d i r e c t i o n ]   =   d i s t a n c e ; 
                     m o d u l e . d e b u g ( ' U s i n g   j a v a s c r i p t   t o   a n i m a t e   b o d y ' ,   a n i m a t e S e t t i n g s ) ; 
                     $ b o d y 
                         . a n i m a t e ( a n i m a t e S e t t i n g s ,   s e t t i n g s . d u r a t i o n ,   m o d u l e . s e t . p u s h e d ) 
                     ; 
                 } , 
 
                 a d d :   { 
                     b o d y C S S :   f u n c t i o n ( d i r e c t i o n ,   d i s t a n c e )   { 
                         v a r 
                             s t y l e 
                         ; 
                         i f ( d i r e c t i o n   ! = =   c l a s s N a m e . b o t t o m )   { 
                             s t y l e   =   ' ' 
                                 +   ' < s t y l e   t i t l e = " '   +   n a m e s p a c e   +   ' " > ' 
                                 +   ' b o d y . p u s h e d   { ' 
                                 +   '     m a r g i n - '   +   d i r e c t i o n   +   ' :   '   +   d i s t a n c e   +   ' p x   ! i m p o r t a n t ; ' 
                                 +   ' } ' 
                                 +   ' < / s t y l e > ' 
                             ; 
                         } 
                         $ h e a d . a p p e n d ( s t y l e ) ; 
                         m o d u l e . d e b u g ( ' A d d i n g   b o d y   c s s   t o   h e a d ' ,   $ s t y l e ) ; 
                     } 
                 } , 
 
 
                 r e m o v e :   { 
                     b o d y C S S :   f u n c t i o n ( )   { 
                         m o d u l e . d e b u g ( ' R e m o v i n g   b o d y   c s s   s t y l e s ' ,   $ s t y l e ) ; 
                         m o d u l e . r e f r e s h ( ) ; 
                         $ s t y l e . r e m o v e ( ) ; 
                     } , 
                     a c t i v e :   f u n c t i o n ( )   { 
                         $ m o d u l e . r e m o v e C l a s s ( c l a s s N a m e . a c t i v e ) ; 
                     } , 
                     p u s h e d :   f u n c t i o n ( )   { 
                         m o d u l e . v e r b o s e ( ' R e m o v i n g   b o d y   p u s h   s t a t e ' ,   m o d u l e . g e t . d i r e c t i o n ( ) ) ; 
                         $ b o d y 
                             . r e m o v e C l a s s ( c l a s s N a m e [   m o d u l e . g e t . d i r e c t i o n ( )   ] ) 
                             . r e m o v e C l a s s ( c l a s s N a m e . p u s h e d ) 
                         ; 
                     } 
                 } , 
 
                 s e t :   { 
                     a c t i v e :   f u n c t i o n ( )   { 
                         $ m o d u l e . a d d C l a s s ( c l a s s N a m e . a c t i v e ) ; 
                     } , 
                     p u s h e d :   f u n c t i o n ( )   { 
                         m o d u l e . v e r b o s e ( ' A d d i n g   b o d y   p u s h   s t a t e ' ,   m o d u l e . g e t . d i r e c t i o n ( ) ) ; 
                         $ b o d y 
                             . a d d C l a s s ( c l a s s N a m e [   m o d u l e . g e t . d i r e c t i o n ( )   ] ) 
                             . a d d C l a s s ( c l a s s N a m e . p u s h e d ) 
                         ; 
                     } 
                 } , 
 
                 g e t :   { 
                     d i r e c t i o n :   f u n c t i o n ( )   { 
                         i f ( $ m o d u l e . h a s C l a s s ( c l a s s N a m e . t o p ) )   { 
                             r e t u r n   c l a s s N a m e . t o p ; 
                         } 
                         e l s e   i f ( $ m o d u l e . h a s C l a s s ( c l a s s N a m e . r i g h t ) )   { 
                             r e t u r n   c l a s s N a m e . r i g h t ; 
                         } 
                         e l s e   i f ( $ m o d u l e . h a s C l a s s ( c l a s s N a m e . b o t t o m ) )   { 
                             r e t u r n   c l a s s N a m e . b o t t o m ; 
                         } 
                         e l s e   { 
                             r e t u r n   c l a s s N a m e . l e f t ; 
                         } 
                     } , 
                     t r a n s i t i o n E v e n t :   f u n c t i o n ( )   { 
                         v a r 
                             e l e m e n t           =   d o c u m e n t . c r e a t e E l e m e n t ( ' e l e m e n t ' ) , 
                             t r a n s i t i o n s   =   { 
                                 ' t r a n s i t i o n '               : ' t r a n s i t i o n e n d ' , 
                                 ' O T r a n s i t i o n '             : ' o T r a n s i t i o n E n d ' , 
                                 ' M o z T r a n s i t i o n '         : ' t r a n s i t i o n e n d ' , 
                                 ' W e b k i t T r a n s i t i o n '   : ' w e b k i t T r a n s i t i o n E n d ' 
                             } , 
                             t r a n s i t i o n 
                         ; 
                         f o r ( t r a n s i t i o n   i n   t r a n s i t i o n s ) { 
                             i f (   e l e m e n t . s t y l e [ t r a n s i t i o n ]   ! = =   u n d e f i n e d   ) { 
                                 r e t u r n   t r a n s i t i o n s [ t r a n s i t i o n ] ; 
                             } 
                         } 
                     } 
                 } , 
 
                 i s :   { 
                     o p e n :   f u n c t i o n ( )   { 
                         r e t u r n   $ m o d u l e . i s ( ' : a n i m a t e d ' )   | |   $ m o d u l e . h a s C l a s s ( c l a s s N a m e . a c t i v e ) ; 
                     } , 
                     c l o s e d :   f u n c t i o n ( )   { 
                         r e t u r n   ! m o d u l e . i s . o p e n ( ) ; 
                     } , 
                     v e r t i c a l :   f u n c t i o n ( )   { 
                         r e t u r n   $ m o d u l e . h a s C l a s s ( c l a s s N a m e . t o p ) ; 
                     } 
                 } , 
 
                 s e t t i n g :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                     i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                         $ . e x t e n d ( t r u e ,   s e t t i n g s ,   n a m e ) ; 
                     } 
                     e l s e   i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                         s e t t i n g s [ n a m e ]   =   v a l u e ; 
                     } 
                     e l s e   { 
                         r e t u r n   s e t t i n g s [ n a m e ] ; 
                     } 
                 } , 
                 i n t e r n a l :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                     i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                         $ . e x t e n d ( t r u e ,   m o d u l e ,   n a m e ) ; 
                     } 
                     e l s e   i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                         m o d u l e [ n a m e ]   =   v a l u e ; 
                     } 
                     e l s e   { 
                         r e t u r n   m o d u l e [ n a m e ] ; 
                     } 
                 } , 
                 d e b u g :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . d e b u g )   { 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . d e b u g   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                             m o d u l e . d e b u g . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                         } 
                     } 
                 } , 
                 v e r b o s e :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . v e r b o s e   & &   s e t t i n g s . d e b u g )   { 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . v e r b o s e   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                             m o d u l e . v e r b o s e . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                         } 
                     } 
                 } , 
                 e r r o r :   f u n c t i o n ( )   { 
                     m o d u l e . e r r o r   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . e r r o r ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                     m o d u l e . e r r o r . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                 } , 
                 p e r f o r m a n c e :   { 
                     l o g :   f u n c t i o n ( m e s s a g e )   { 
                         v a r 
                             c u r r e n t T i m e , 
                             e x e c u t i o n T i m e , 
                             p r e v i o u s T i m e 
                         ; 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             c u r r e n t T i m e       =   n e w   D a t e ( ) . g e t T i m e ( ) ; 
                             p r e v i o u s T i m e     =   t i m e   | |   c u r r e n t T i m e ; 
                             e x e c u t i o n T i m e   =   c u r r e n t T i m e   -   p r e v i o u s T i m e ; 
                             t i m e                     =   c u r r e n t T i m e ; 
                             p e r f o r m a n c e . p u s h ( { 
                                 ' E l e m e n t '                 :   e l e m e n t , 
                                 ' N a m e '                       :   m e s s a g e [ 0 ] , 
                                 ' A r g u m e n t s '             :   [ ] . s l i c e . c a l l ( m e s s a g e ,   1 )   | |   ' ' , 
                                 ' E x e c u t i o n   T i m e '   :   e x e c u t i o n T i m e 
                             } ) ; 
                         } 
                         c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                         m o d u l e . p e r f o r m a n c e . t i m e r   =   s e t T i m e o u t ( m o d u l e . p e r f o r m a n c e . d i s p l a y ,   1 0 0 ) ; 
                     } , 
                     d i s p l a y :   f u n c t i o n ( )   { 
                         v a r 
                             t i t l e   =   s e t t i n g s . n a m e   +   ' : ' , 
                             t o t a l T i m e   =   0 
                         ; 
                         t i m e   =   f a l s e ; 
                         c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                         $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                             t o t a l T i m e   + =   d a t a [ ' E x e c u t i o n   T i m e ' ] ; 
                         } ) ; 
                         t i t l e   + =   '   '   +   t o t a l T i m e   +   ' m s ' ; 
                         i f ( m o d u l e S e l e c t o r )   { 
                             t i t l e   + =   '   \ ' '   +   m o d u l e S e l e c t o r   +   ' \ ' ' ; 
                         } 
                         i f ( $ a l l M o d u l e s . s i z e ( )   >   1 )   { 
                             t i t l e   + =   '   '   +   ' ( '   +   $ a l l M o d u l e s . s i z e ( )   +   ' ) ' ; 
                         } 
                         i f (   ( c o n s o l e . g r o u p   ! = =   u n d e f i n e d   | |   c o n s o l e . t a b l e   ! = =   u n d e f i n e d )   & &   p e r f o r m a n c e . l e n g t h   >   0 )   { 
                             c o n s o l e . g r o u p C o l l a p s e d ( t i t l e ) ; 
                             i f ( c o n s o l e . t a b l e )   { 
                                 c o n s o l e . t a b l e ( p e r f o r m a n c e ) ; 
                             } 
                             e l s e   { 
                                 $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                                     c o n s o l e . l o g ( d a t a [ ' N a m e ' ]   +   ' :   '   +   d a t a [ ' E x e c u t i o n   T i m e ' ] + ' m s ' ) ; 
                                 } ) ; 
                             } 
                             c o n s o l e . g r o u p E n d ( ) ; 
                         } 
                         p e r f o r m a n c e   =   [ ] ; 
                     } 
                 } , 
                 i n v o k e :   f u n c t i o n ( q u e r y ,   p a s s e d A r g u m e n t s ,   c o n t e x t )   { 
                     v a r 
                         o b j e c t   =   i n s t a n c e , 
                         m a x D e p t h , 
                         f o u n d , 
                         r e s p o n s e 
                     ; 
                     p a s s e d A r g u m e n t s   =   p a s s e d A r g u m e n t s   | |   q u e r y A r g u m e n t s ; 
                     c o n t e x t                   =   e l e m e n t                   | |   c o n t e x t ; 
                     i f ( t y p e o f   q u e r y   = =   ' s t r i n g '   & &   o b j e c t   ! = =   u n d e f i n e d )   { 
                         q u e r y         =   q u e r y . s p l i t ( / [ \ .   ] / ) ; 
                         m a x D e p t h   =   q u e r y . l e n g t h   -   1 ; 
                         $ . e a c h ( q u e r y ,   f u n c t i o n ( d e p t h ,   v a l u e )   { 
                             v a r   c a m e l C a s e V a l u e   =   ( d e p t h   ! =   m a x D e p t h ) 
                                 ?   v a l u e   +   q u e r y [ d e p t h   +   1 ] . c h a r A t ( 0 ) . t o U p p e r C a s e ( )   +   q u e r y [ d e p t h   +   1 ] . s l i c e ( 1 ) 
                                 :   q u e r y 
                             ; 
                             i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ c a m e l C a s e V a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                                 o b j e c t   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                             } 
                             e l s e   i f (   o b j e c t [ c a m e l C a s e V a l u e ]   ! = =   u n d e f i n e d   )   { 
                                 f o u n d   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                                 r e t u r n   f a l s e ; 
                             } 
                             e l s e   i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ v a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                                 o b j e c t   =   o b j e c t [ v a l u e ] ; 
                             } 
                             e l s e   i f (   o b j e c t [ v a l u e ]   ! = =   u n d e f i n e d   )   { 
                                 f o u n d   =   o b j e c t [ v a l u e ] ; 
                                 r e t u r n   f a l s e ; 
                             } 
                             e l s e   { 
                                 r e t u r n   f a l s e ; 
                             } 
                         } ) ; 
                     } 
                     i f   (   $ . i s F u n c t i o n (   f o u n d   )   )   { 
                         r e s p o n s e   =   f o u n d . a p p l y ( c o n t e x t ,   p a s s e d A r g u m e n t s ) ; 
                     } 
                     e l s e   i f ( f o u n d   ! = =   u n d e f i n e d )   { 
                         r e s p o n s e   =   f o u n d ; 
                     } 
                     i f ( $ . i s A r r a y ( r e t u r n e d V a l u e ) )   { 
                         r e t u r n e d V a l u e . p u s h ( r e s p o n s e ) ; 
                     } 
                     e l s e   i f ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d )   { 
                         r e t u r n e d V a l u e   =   [ r e t u r n e d V a l u e ,   r e s p o n s e ] ; 
                     } 
                     e l s e   i f ( r e s p o n s e   ! = =   u n d e f i n e d )   { 
                         r e t u r n e d V a l u e   =   r e s p o n s e ; 
                     } 
                     r e t u r n   f o u n d ; 
                 } 
             } ; 
             i f ( m e t h o d I n v o k e d )   { 
                 i f ( i n s t a n c e   = = =   u n d e f i n e d )   { 
                     m o d u l e . i n i t i a l i z e ( ) ; 
                 } 
                 m o d u l e . i n v o k e ( q u e r y ) ; 
             } 
             e l s e   { 
                 i f ( i n s t a n c e   ! = =   u n d e f i n e d )   { 
                     m o d u l e . d e s t r o y ( ) ; 
                 } 
                 m o d u l e . i n i t i a l i z e ( ) ; 
             } 
         } ) 
     ; 
 
     r e t u r n   ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d ) 
         ?   r e t u r n e d V a l u e 
         :   t h i s 
     ; 
 } ; 
 
 $ . f n . s i d e b a r . s e t t i n g s   =   { 
 
     n a m e                 :   ' S i d e b a r ' , 
     n a m e s p a c e       :   ' s i d e b a r ' , 
 
     d e b u g               :   f a l s e , 
     v e r b o s e           :   t r u e , 
     p e r f o r m a n c e   :   t r u e , 
 
     u s e C S S             :   t r u e , 
     e x c l u s i v e       :   t r u e , 
     o v e r l a y           :   f a l s e , 
     d u r a t i o n         :   3 0 0 , 
 
     o n C h a n g e           :   f u n c t i o n ( ) { } , 
     o n S h o w               :   f u n c t i o n ( ) { } , 
     o n H i d e               :   f u n c t i o n ( ) { } , 
 
     c l a s s N a m e :   { 
         a c t i v e   :   ' a c t i v e ' , 
         p u s h e d   :   ' p u s h e d ' , 
         t o p         :   ' t o p ' , 
         l e f t       :   ' l e f t ' , 
         r i g h t     :   ' r i g h t ' , 
         b o t t o m   :   ' b o t t o m ' 
     } , 
 
     s e l e c t o r :   { 
         s i d e b a r :   ' . u i . s i d e b a r ' 
     } , 
 
     e r r o r       :   { 
         m e t h o d       :   ' T h e   m e t h o d   y o u   c a l l e d   i s   n o t   d e f i n e d . ' , 
         n o t F o u n d   :   ' T h e r e   w e r e   n o   e l e m e n t s   t h a t   m a t c h e d   t h e   s p e c i f i e d   s e l e c t o r ' 
     } 
 
 } ; 
 
 } ) (   j Q u e r y ,   w i n d o w   ,   d o c u m e n t   ) ; 
 
 / * 
   *   #   S e m a n t i c   -   T a b 
   *   h t t p : / / g i t h u b . c o m / j l u k i c / s e m a n t i c - u i / 
   * 
   *   C o p y r i g h t   2 0 1 3   C o n t r i b u t o r s 
   *   R e l e a s e d   u n d e r   t h e   M I T   l i c e n s e 
   *   h t t p : / / o p e n s o u r c e . o r g / l i c e n s e s / M I T 
   * 
   * / 
 
 
 ; ( f u n c t i o n   ( $ ,   w i n d o w ,   d o c u m e n t ,   u n d e f i n e d )   { 
 
     $ . f n . t a b   =   f u n c t i o n ( p a r a m e t e r s )   { 
 
         v a r 
             s e t t i n g s                 =   $ . e x t e n d ( t r u e ,   { } ,   $ . f n . t a b . s e t t i n g s ,   p a r a m e t e r s ) , 
 
             $ m o d u l e                   =   $ ( t h i s ) , 
             $ t a b s                       =   $ ( s e t t i n g s . c o n t e x t ) . f i n d ( s e t t i n g s . s e l e c t o r . t a b s ) , 
 
             m o d u l e S e l e c t o r     =   $ m o d u l e . s e l e c t o r   | |   ' ' , 
 
             c a c h e                       =   { } , 
             f i r s t L o a d               =   t r u e , 
             r e c u r s i o n D e p t h     =   0 , 
 
             a c t i v e T a b P a t h , 
             p a r a m e t e r A r r a y , 
             h i s t o r y E v e n t , 
 
             e l e m e n t                   =   t h i s , 
             t i m e                         =   n e w   D a t e ( ) . g e t T i m e ( ) , 
             p e r f o r m a n c e           =   [ ] , 
 
             c l a s s N a m e               =   s e t t i n g s . c l a s s N a m e , 
             m e t a d a t a                 =   s e t t i n g s . m e t a d a t a , 
             e r r o r                       =   s e t t i n g s . e r r o r , 
 
             e v e n t N a m e s p a c e     =   ' . '   +   s e t t i n g s . n a m e s p a c e , 
             m o d u l e N a m e s p a c e   =   ' m o d u l e - '   +   s e t t i n g s . n a m e s p a c e , 
 
             i n s t a n c e                 =   $ m o d u l e . d a t a ( m o d u l e N a m e s p a c e ) , 
 
             q u e r y                       =   a r g u m e n t s [ 0 ] , 
             m e t h o d I n v o k e d       =   ( i n s t a n c e   ! = =   u n d e f i n e d   & &   t y p e o f   q u e r y   = =   ' s t r i n g ' ) , 
             q u e r y A r g u m e n t s     =   [ ] . s l i c e . c a l l ( a r g u m e n t s ,   1 ) , 
 
             m o d u l e , 
             r e t u r n e d V a l u e 
         ; 
 
         m o d u l e   =   { 
 
             i n i t i a l i z e :   f u n c t i o n ( )   { 
                 m o d u l e . d e b u g ( ' I n i t i a l i z i n g   T a b s ' ,   $ m o d u l e ) ; 
 
                 / /   s e t   u p   a u t o m a t i c   r o u t i n g 
                 i f ( s e t t i n g s . a u t o )   { 
                     m o d u l e . v e r b o s e ( ' S e t t i n g   u p   a u t o m a t i c   t a b   r e t r i e v a l   f r o m   s e r v e r ' ) ; 
                     s e t t i n g s . a p i S e t t i n g s   =   { 
                         u r l :   s e t t i n g s . p a t h   +   ' / { $ t a b } ' 
                     } ; 
                 } 
 
                 / /   a t t a c h   h i s t o r y   e v e n t s 
                 i f ( s e t t i n g s . h i s t o r y )   { 
                     m o d u l e . d e b u g ( ' I n i t i a l i z i n g   p a g e   s t a t e ' ) ; 
                     i f (   $ . a d d r e s s   = = =   u n d e f i n e d   )   { 
                         m o d u l e . e r r o r ( e r r o r . s t a t e ) ; 
                         r e t u r n   f a l s e ; 
                     } 
                     e l s e   { 
                         i f ( s e t t i n g s . h i s t o r y T y p e   = =   ' h a s h ' )   { 
                             m o d u l e . d e b u g ( ' U s i n g   h a s h   s t a t e   c h a n g e   t o   m a n a g e   s t a t e ' ) ; 
                         } 
                         i f ( s e t t i n g s . h i s t o r y T y p e   = =   ' h t m l 5 ' )   { 
                             m o d u l e . d e b u g ( ' U s i n g   H T M L 5   t o   m a n a g e   s t a t e ' ) ; 
                             i f ( s e t t i n g s . p a t h   ! = =   f a l s e )   { 
                                 $ . a d d r e s s 
                                     . h i s t o r y ( t r u e ) 
                                     . s t a t e ( s e t t i n g s . p a t h ) 
                                 ; 
                             } 
                             e l s e   { 
                                 m o d u l e . e r r o r ( e r r o r . p a t h ) ; 
                                 r e t u r n   f a l s e ; 
                             } 
                         } 
                         $ . a d d r e s s 
                             . u n b i n d ( ' c h a n g e ' ) 
                             . b i n d ( ' c h a n g e ' ,   m o d u l e . e v e n t . h i s t o r y . c h a n g e ) 
                         ; 
                     } 
                 } 
 
                 / /   a t t a c h   e v e n t s   i f   n a v i g a t i o n   w a s n ' t   s e t   t o   w i n d o w 
                 i f (   ! $ . i s W i n d o w (   e l e m e n t   )   )   { 
                     m o d u l e . d e b u g ( ' A t t a c h i n g   t a b   a c t i v a t i o n   e v e n t s   t o   e l e m e n t ' ,   $ m o d u l e ) ; 
                     $ m o d u l e 
                         . o n ( ' c l i c k '   +   e v e n t N a m e s p a c e ,   m o d u l e . e v e n t . c l i c k ) 
                     ; 
                 } 
                 m o d u l e . i n s t a n t i a t e ( ) ; 
             } , 
 
             i n s t a n t i a t e :   f u n c t i o n   ( )   { 
                 m o d u l e . v e r b o s e ( ' S t o r i n g   i n s t a n c e   o f   m o d u l e ' ,   m o d u l e ) ; 
                 $ m o d u l e 
                     . d a t a ( m o d u l e N a m e s p a c e ,   m o d u l e ) 
                 ; 
             } , 
 
             d e s t r o y :   f u n c t i o n ( )   { 
                 m o d u l e . d e b u g ( ' D e s t r o y i n g   t a b s ' ,   $ m o d u l e ) ; 
                 $ m o d u l e 
                     . r e m o v e D a t a ( m o d u l e N a m e s p a c e ) 
                     . o f f ( e v e n t N a m e s p a c e ) 
                 ; 
             } , 
 
             e v e n t :   { 
                 c l i c k :   f u n c t i o n ( e v e n t )   { 
                     v a r 
                         t a b P a t h   =   $ ( t h i s ) . d a t a ( m e t a d a t a . t a b ) 
                     ; 
                     i f ( t a b P a t h   ! = =   u n d e f i n e d )   { 
                         i f ( s e t t i n g s . h i s t o r y )   { 
                             m o d u l e . v e r b o s e ( ' U p d a t i n g   p a g e   s t a t e ' ,   e v e n t ) ; 
                             $ . a d d r e s s . v a l u e ( t a b P a t h ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . v e r b o s e ( ' C h a n g i n g   t a b   w i t h o u t   s t a t e   m a n a g e m e n t ' ,   e v e n t ) ; 
                             m o d u l e . c h a n g e T a b ( t a b P a t h ) ; 
                         } 
                         e v e n t . p r e v e n t D e f a u l t ( ) ; 
                     } 
                     e l s e   { 
                         m o d u l e . d e b u g ( ' N o   t a b   s p e c i f i e d ' ) ; 
                     } 
                 } , 
                 h i s t o r y :   { 
                     c h a n g e :   f u n c t i o n ( e v e n t )   { 
                         v a r 
                             t a b P a t h       =   e v e n t . p a t h N a m e s . j o i n ( ' / ' )   | |   m o d u l e . g e t . i n i t i a l P a t h ( ) , 
                             p a g e T i t l e   =   s e t t i n g s . t e m p l a t e s . d e t e r m i n e T i t l e ( t a b P a t h )   | |   f a l s e 
                         ; 
                         m o d u l e . d e b u g ( ' H i s t o r y   c h a n g e   e v e n t ' ,   t a b P a t h ,   e v e n t ) ; 
                         h i s t o r y E v e n t   =   e v e n t ; 
                         i f ( t a b P a t h   ! = =   u n d e f i n e d )   { 
                             m o d u l e . c h a n g e T a b ( t a b P a t h ) ; 
                         } 
                         i f ( p a g e T i t l e )   { 
                             $ . a d d r e s s . t i t l e ( p a g e T i t l e ) ; 
                         } 
                     } 
                 } 
             } , 
 
             r e f r e s h :   f u n c t i o n ( )   { 
                 i f ( a c t i v e T a b P a t h )   { 
                     m o d u l e . d e b u g ( ' R e f r e s h i n g   t a b ' ,   a c t i v e T a b P a t h ) ; 
                     m o d u l e . c h a n g e T a b ( a c t i v e T a b P a t h ) ; 
                 } 
             } , 
 
             c a c h e :   { 
 
                 r e a d :   f u n c t i o n ( c a c h e K e y )   { 
                     r e t u r n   ( c a c h e K e y   ! = =   u n d e f i n e d ) 
                         ?   c a c h e [ c a c h e K e y ] 
                         :   f a l s e 
                     ; 
                 } , 
                 a d d :   f u n c t i o n ( c a c h e K e y ,   c o n t e n t )   { 
                     c a c h e K e y   =   c a c h e K e y   | |   a c t i v e T a b P a t h ; 
                     m o d u l e . d e b u g ( ' A d d i n g   c a c h e d   c o n t e n t   f o r ' ,   c a c h e K e y ) ; 
                     c a c h e [ c a c h e K e y ]   =   c o n t e n t ; 
                 } , 
                 r e m o v e :   f u n c t i o n ( c a c h e K e y )   { 
                     c a c h e K e y   =   c a c h e K e y   | |   a c t i v e T a b P a t h ; 
                     m o d u l e . d e b u g ( ' R e m o v i n g   c a c h e d   c o n t e n t   f o r ' ,   c a c h e K e y ) ; 
                     d e l e t e   c a c h e [ c a c h e K e y ] ; 
                 } 
             } , 
 
             s e t :   { 
                 s t a t e :   f u n c t i o n ( u r l )   { 
                     $ . a d d r e s s . v a l u e ( u r l ) ; 
                 } 
             } , 
 
             c h a n g e T a b :   f u n c t i o n ( t a b P a t h )   { 
                 v a r 
                     p u s h S t a t e A v a i l a b l e   =   ( w i n d o w . h i s t o r y   & &   w i n d o w . h i s t o r y . p u s h S t a t e ) , 
                     s h o u l d I g n o r e L o a d       =   ( p u s h S t a t e A v a i l a b l e   & &   s e t t i n g s . i g n o r e F i r s t L o a d   & &   f i r s t L o a d ) , 
                     r e m o t e C o n t e n t             =   ( s e t t i n g s . a u t o   | |   $ . i s P l a i n O b j e c t ( s e t t i n g s . a p i S e t t i n g s )   ) , 
                     / /   o n l y   g e t   d e f a u l t   p a t h   i f   n o t   r e m o t e   c o n t e n t 
                     p a t h A r r a y   =   ( r e m o t e C o n t e n t   & &   ! s h o u l d I g n o r e L o a d ) 
                         ?   m o d u l e . u t i l i t i e s . p a t h T o A r r a y ( t a b P a t h ) 
                         :   m o d u l e . g e t . d e f a u l t P a t h A r r a y ( t a b P a t h ) 
                 ; 
                 t a b P a t h   =   m o d u l e . u t i l i t i e s . a r r a y T o P a t h ( p a t h A r r a y ) ; 
                 m o d u l e . d e a c t i v a t e . a l l ( ) ; 
                 $ . e a c h ( p a t h A r r a y ,   f u n c t i o n ( i n d e x ,   t a b )   { 
                     v a r 
                         c u r r e n t P a t h A r r a y       =   p a t h A r r a y . s l i c e ( 0 ,   i n d e x   +   1 ) , 
                         c u r r e n t P a t h                 =   m o d u l e . u t i l i t i e s . a r r a y T o P a t h ( c u r r e n t P a t h A r r a y ) , 
 
                         i s T a b                             =   m o d u l e . i s . t a b ( c u r r e n t P a t h ) , 
                         i s L a s t I n d e x                 =   ( i n d e x   +   1   = =   p a t h A r r a y . l e n g t h ) , 
 
                         $ t a b                               =   m o d u l e . g e t . t a b E l e m e n t ( c u r r e n t P a t h ) , 
                         n e x t P a t h A r r a y , 
                         n e x t P a t h , 
                         i s L a s t T a b 
                     ; 
                     m o d u l e . v e r b o s e ( ' L o o k i n g   f o r   t a b ' ,   t a b ) ; 
                     i f ( i s T a b )   { 
                         m o d u l e . v e r b o s e ( ' T a b   w a s   f o u n d ' ,   t a b ) ; 
 
                         / /   s c o p e   u p 
                         a c t i v e T a b P a t h   =   c u r r e n t P a t h ; 
                         p a r a m e t e r A r r a y   =   m o d u l e . u t i l i t i e s . f i l t e r A r r a y ( p a t h A r r a y ,   c u r r e n t P a t h A r r a y ) ; 
 
                         i f ( i s L a s t I n d e x )   { 
                             i s L a s t T a b   =   t r u e ; 
                         } 
                         e l s e   { 
                             n e x t P a t h A r r a y   =   p a t h A r r a y . s l i c e ( 0 ,   i n d e x   +   2 ) ; 
                             n e x t P a t h             =   m o d u l e . u t i l i t i e s . a r r a y T o P a t h ( n e x t P a t h A r r a y ) ; 
                             i s L a s t T a b           =   (   ! m o d u l e . i s . t a b ( n e x t P a t h )   ) ; 
                             i f ( i s L a s t T a b )   { 
                                 m o d u l e . v e r b o s e ( ' T a b   p a r a m e t e r s   f o u n d ' ,   n e x t P a t h A r r a y ) ; 
                             } 
                         } 
                         i f ( i s L a s t T a b   & &   r e m o t e C o n t e n t )   { 
                             i f ( ! s h o u l d I g n o r e L o a d )   { 
                                 m o d u l e . a c t i v a t e . n a v i g a t i o n ( c u r r e n t P a t h ) ; 
                                 m o d u l e . c o n t e n t . f e t c h ( c u r r e n t P a t h ,   t a b P a t h ) ; 
                             } 
                             e l s e   { 
                                 m o d u l e . d e b u g ( ' I g n o r i n g   r e m o t e   c o n t e n t   o n   f i r s t   t a b   l o a d ' ,   c u r r e n t P a t h ) ; 
                                 f i r s t L o a d   =   f a l s e ; 
                                 m o d u l e . c a c h e . a d d ( t a b P a t h ,   $ t a b . h t m l ( ) ) ; 
                                 m o d u l e . a c t i v a t e . a l l ( c u r r e n t P a t h ) ; 
                                 $ . p r o x y ( s e t t i n g s . o n T a b I n i t ,   $ t a b ) ( c u r r e n t P a t h ,   p a r a m e t e r A r r a y ,   h i s t o r y E v e n t ) ; 
                                 $ . p r o x y ( s e t t i n g s . o n T a b L o a d ,   $ t a b ) ( c u r r e n t P a t h ,   p a r a m e t e r A r r a y ,   h i s t o r y E v e n t ) ; 
                             } 
                             r e t u r n   f a l s e ; 
                         } 
                         e l s e   { 
                             m o d u l e . d e b u g ( ' O p e n e d   l o c a l   t a b ' ,   c u r r e n t P a t h ) ; 
                             m o d u l e . a c t i v a t e . a l l ( c u r r e n t P a t h ) ; 
                             i f (   ! m o d u l e . c a c h e . r e a d ( c u r r e n t P a t h )   )   { 
                                 m o d u l e . c a c h e . a d d ( c u r r e n t P a t h ,   t r u e ) ; 
                                 m o d u l e . d e b u g ( ' F i r s t   t i m e   t a b   l o a d e d   c a l l i n g   t a b   i n i t ' ) ; 
                                 $ . p r o x y ( s e t t i n g s . o n T a b I n i t ,   $ t a b ) ( c u r r e n t P a t h ,   p a r a m e t e r A r r a y ,   h i s t o r y E v e n t ) ; 
                             } 
                             $ . p r o x y ( s e t t i n g s . o n T a b L o a d ,   $ t a b ) ( c u r r e n t P a t h ,   p a r a m e t e r A r r a y ,   h i s t o r y E v e n t ) ; 
                         } 
                     } 
                     e l s e   { 
                         m o d u l e . e r r o r ( e r r o r . m i s s i n g T a b ,   t a b ) ; 
                         r e t u r n   f a l s e ; 
                     } 
                 } ) ; 
             } , 
 
             c o n t e n t :   { 
 
                 f e t c h :   f u n c t i o n ( t a b P a t h ,   f u l l T a b P a t h )   { 
                     v a r 
                         $ t a b                           =   m o d u l e . g e t . t a b E l e m e n t ( t a b P a t h ) , 
                         a p i S e t t i n g s             =   { 
                             d a t a T y p e           :   ' h t m l ' , 
                             s t a t e C o n t e x t   :   $ t a b , 
                             s u c c e s s             :   f u n c t i o n ( r e s p o n s e )   { 
                                 m o d u l e . c a c h e . a d d ( f u l l T a b P a t h ,   r e s p o n s e ) ; 
                                 m o d u l e . c o n t e n t . u p d a t e ( t a b P a t h ,   r e s p o n s e ) ; 
                                 i f ( t a b P a t h   = =   a c t i v e T a b P a t h )   { 
                                     m o d u l e . d e b u g ( ' C o n t e n t   l o a d e d ' ,   t a b P a t h ) ; 
                                     m o d u l e . a c t i v a t e . t a b ( t a b P a t h ) ; 
                                 } 
                                 e l s e   { 
                                     m o d u l e . d e b u g ( ' C o n t e n t   l o a d e d   i n   b a c k g r o u n d ' ,   t a b P a t h ) ; 
                                 } 
                                 $ . p r o x y ( s e t t i n g s . o n T a b I n i t ,   $ t a b ) ( t a b P a t h ,   p a r a m e t e r A r r a y ,   h i s t o r y E v e n t ) ; 
                                 $ . p r o x y ( s e t t i n g s . o n T a b L o a d ,   $ t a b ) ( t a b P a t h ,   p a r a m e t e r A r r a y ,   h i s t o r y E v e n t ) ; 
                             } , 
                             u r l D a t a :   {   t a b :   f u l l T a b P a t h   } 
                         } , 
                         r e q u e s t                   =   $ t a b . d a t a ( m e t a d a t a . p r o m i s e )   | |   f a l s e , 
                         e x i s t i n g R e q u e s t   =   (   r e q u e s t   & &   r e q u e s t . s t a t e ( )   = = =   ' p e n d i n g '   ) , 
                         r e q u e s t S e t t i n g s , 
                         c a c h e d C o n t e n t 
                     ; 
 
                     f u l l T a b P a t h       =   f u l l T a b P a t h   | |   t a b P a t h ; 
                     c a c h e d C o n t e n t   =   m o d u l e . c a c h e . r e a d ( f u l l T a b P a t h ) ; 
 
                     i f ( s e t t i n g s . c a c h e   & &   c a c h e d C o n t e n t )   { 
                         m o d u l e . d e b u g ( ' S h o w i n g   e x i s t i n g   c o n t e n t ' ,   f u l l T a b P a t h ) ; 
                         m o d u l e . c o n t e n t . u p d a t e ( t a b P a t h ,   c a c h e d C o n t e n t ) ; 
                         m o d u l e . a c t i v a t e . t a b ( t a b P a t h ) ; 
                         $ . p r o x y ( s e t t i n g s . o n T a b L o a d ,   $ t a b ) ( t a b P a t h ,   p a r a m e t e r A r r a y ,   h i s t o r y E v e n t ) ; 
                     } 
                     e l s e   i f ( e x i s t i n g R e q u e s t )   { 
                         m o d u l e . d e b u g ( ' C o n t e n t   i s   a l r e a d y   l o a d i n g ' ,   f u l l T a b P a t h ) ; 
                         $ t a b 
                             . a d d C l a s s ( c l a s s N a m e . l o a d i n g ) 
                         ; 
                     } 
                     e l s e   i f ( $ . a p i   ! = =   u n d e f i n e d )   { 
                         c o n s o l e . l o g ( s e t t i n g s . a p i S e t t i n g s ) ; 
                         r e q u e s t S e t t i n g s   =   $ . e x t e n d ( t r u e ,   {   h e a d e r s :   {   ' X - R e m o t e ' :   t r u e   }   } ,   s e t t i n g s . a p i S e t t i n g s ,   a p i S e t t i n g s ) ; 
                         m o d u l e . d e b u g ( ' R e t r i e v i n g   r e m o t e   c o n t e n t ' ,   f u l l T a b P a t h ,   r e q u e s t S e t t i n g s ) ; 
                         $ . a p i (   r e q u e s t S e t t i n g s   ) ; 
                     } 
                     e l s e   { 
                         m o d u l e . e r r o r ( e r r o r . a p i ) ; 
                     } 
                 } , 
 
                 u p d a t e :   f u n c t i o n ( t a b P a t h ,   h t m l )   { 
                     m o d u l e . d e b u g ( ' U p d a t i n g   h t m l   f o r ' ,   t a b P a t h ) ; 
                     v a r 
                         $ t a b   =   m o d u l e . g e t . t a b E l e m e n t ( t a b P a t h ) 
                     ; 
                     $ t a b 
                         . h t m l ( h t m l ) 
                     ; 
                 } 
             } , 
 
             a c t i v a t e :   { 
                 a l l :   f u n c t i o n ( t a b P a t h )   { 
                     m o d u l e . a c t i v a t e . t a b ( t a b P a t h ) ; 
                     m o d u l e . a c t i v a t e . n a v i g a t i o n ( t a b P a t h ) ; 
                 } , 
                 t a b :   f u n c t i o n ( t a b P a t h )   { 
                     v a r 
                         $ t a b   =   m o d u l e . g e t . t a b E l e m e n t ( t a b P a t h ) 
                     ; 
                     m o d u l e . v e r b o s e ( ' S h o w i n g   t a b   c o n t e n t   f o r ' ,   $ t a b ) ; 
                     $ t a b . a d d C l a s s ( c l a s s N a m e . a c t i v e ) ; 
                 } , 
                 n a v i g a t i o n :   f u n c t i o n ( t a b P a t h )   { 
                     v a r 
                         $ n a v i g a t i o n   =   m o d u l e . g e t . n a v E l e m e n t ( t a b P a t h ) 
                     ; 
                     m o d u l e . v e r b o s e ( ' A c t i v a t i n g   t a b   n a v i g a t i o n   f o r ' ,   $ n a v i g a t i o n ,   t a b P a t h ) ; 
                     $ n a v i g a t i o n . a d d C l a s s ( c l a s s N a m e . a c t i v e ) ; 
                 } 
             } , 
 
             d e a c t i v a t e :   { 
                 a l l :   f u n c t i o n ( )   { 
                     m o d u l e . d e a c t i v a t e . n a v i g a t i o n ( ) ; 
                     m o d u l e . d e a c t i v a t e . t a b s ( ) ; 
                 } , 
                 n a v i g a t i o n :   f u n c t i o n ( )   { 
                     $ m o d u l e 
                         . r e m o v e C l a s s ( c l a s s N a m e . a c t i v e ) 
                     ; 
                 } , 
                 t a b s :   f u n c t i o n ( )   { 
                     $ t a b s 
                         . r e m o v e C l a s s ( c l a s s N a m e . a c t i v e   +   '   '   +   c l a s s N a m e . l o a d i n g ) 
                     ; 
                 } 
             } , 
 
             i s :   { 
                 t a b :   f u n c t i o n ( t a b N a m e )   { 
                     r e t u r n   ( t a b N a m e   ! = =   u n d e f i n e d ) 
                         ?   (   m o d u l e . g e t . t a b E l e m e n t ( t a b N a m e ) . s i z e ( )   >   0   ) 
                         :   f a l s e 
                     ; 
                 } 
             } , 
 
             g e t :   { 
                 i n i t i a l P a t h :   f u n c t i o n ( )   { 
                     r e t u r n   $ m o d u l e . e q ( 0 ) . d a t a ( m e t a d a t a . t a b )   | |   $ t a b s . e q ( 0 ) . d a t a ( m e t a d a t a . t a b ) ; 
                 } , 
                 p a t h :   f u n c t i o n ( )   { 
                     r e t u r n   $ . a d d r e s s . v a l u e ( ) ; 
                 } , 
                 / /   a d d s   d e f a u l t   t a b s   t o   t a b   p a t h 
                 d e f a u l t P a t h A r r a y :   f u n c t i o n ( t a b P a t h )   { 
                     r e t u r n   m o d u l e . u t i l i t i e s . p a t h T o A r r a y (   m o d u l e . g e t . d e f a u l t P a t h ( t a b P a t h )   ) ; 
                 } , 
                 d e f a u l t P a t h :   f u n c t i o n ( t a b P a t h )   { 
                     v a r 
                         $ d e f a u l t N a v   =   $ m o d u l e . f i l t e r ( ' [ d a t a - '   +   m e t a d a t a . t a b   +   ' ^ = " '   +   t a b P a t h   +   ' / " ] ' ) . e q ( 0 ) , 
                         d e f a u l t T a b     =   $ d e f a u l t N a v . d a t a ( m e t a d a t a . t a b )   | |   f a l s e 
                     ; 
                     i f (   d e f a u l t T a b   )   { 
                         m o d u l e . d e b u g ( ' F o u n d   d e f a u l t   t a b ' ,   d e f a u l t T a b ) ; 
                         i f ( r e c u r s i o n D e p t h   <   s e t t i n g s . m a x D e p t h )   { 
                             r e c u r s i o n D e p t h + + ; 
                             r e t u r n   m o d u l e . g e t . d e f a u l t P a t h ( d e f a u l t T a b ) ; 
                         } 
                         m o d u l e . e r r o r ( e r r o r . r e c u r s i o n ) ; 
                     } 
                     e l s e   { 
                         m o d u l e . d e b u g ( ' N o   d e f a u l t   t a b s   f o u n d   f o r ' ,   t a b P a t h ,   $ t a b s ) ; 
                     } 
                     r e c u r s i o n D e p t h   =   0 ; 
                     r e t u r n   t a b P a t h ; 
                 } , 
                 n a v E l e m e n t :   f u n c t i o n ( t a b P a t h )   { 
                     t a b P a t h   =   t a b P a t h   | |   a c t i v e T a b P a t h ; 
                     r e t u r n   $ m o d u l e . f i l t e r ( ' [ d a t a - '   +   m e t a d a t a . t a b   +   ' = " '   +   t a b P a t h   +   ' " ] ' ) ; 
                 } , 
                 t a b E l e m e n t :   f u n c t i o n ( t a b P a t h )   { 
                     v a r 
                         $ f u l l P a t h T a b , 
                         $ s i m p l e P a t h T a b , 
                         t a b P a t h A r r a y , 
                         l a s t T a b 
                     ; 
                     t a b P a t h                 =   t a b P a t h   | |   a c t i v e T a b P a t h ; 
                     t a b P a t h A r r a y       =   m o d u l e . u t i l i t i e s . p a t h T o A r r a y ( t a b P a t h ) ; 
                     l a s t T a b                 =   m o d u l e . u t i l i t i e s . l a s t ( t a b P a t h A r r a y ) ; 
                     $ f u l l P a t h T a b       =   $ t a b s . f i l t e r ( ' [ d a t a - '   +   m e t a d a t a . t a b   +   ' = " '   +   l a s t T a b   +   ' " ] ' ) ; 
                     $ s i m p l e P a t h T a b   =   $ t a b s . f i l t e r ( ' [ d a t a - '   +   m e t a d a t a . t a b   +   ' = " '   +   t a b P a t h   +   ' " ] ' ) ; 
                     r e t u r n   ( $ f u l l P a t h T a b . s i z e ( )   >   0 ) 
                         ?   $ f u l l P a t h T a b 
                         :   $ s i m p l e P a t h T a b 
                     ; 
                 } , 
                 t a b :   f u n c t i o n ( )   { 
                     r e t u r n   a c t i v e T a b P a t h ; 
                 } 
             } , 
 
             u t i l i t i e s :   { 
                 f i l t e r A r r a y :   f u n c t i o n ( k e e p A r r a y ,   r e m o v e A r r a y )   { 
                     r e t u r n   $ . g r e p ( k e e p A r r a y ,   f u n c t i o n ( k e e p V a l u e )   { 
                         r e t u r n   (   $ . i n A r r a y ( k e e p V a l u e ,   r e m o v e A r r a y )   = =   - 1 ) ; 
                     } ) ; 
                 } , 
                 l a s t :   f u n c t i o n ( a r r a y )   { 
                     r e t u r n   $ . i s A r r a y ( a r r a y ) 
                         ?   a r r a y [   a r r a y . l e n g t h   -   1 ] 
                         :   f a l s e 
                     ; 
                 } , 
                 p a t h T o A r r a y :   f u n c t i o n ( p a t h N a m e )   { 
                     i f ( p a t h N a m e   = = =   u n d e f i n e d )   { 
                         p a t h N a m e   =   a c t i v e T a b P a t h ; 
                     } 
                     r e t u r n   t y p e o f   p a t h N a m e   = =   ' s t r i n g ' 
                         ?   p a t h N a m e . s p l i t ( ' / ' ) 
                         :   [ p a t h N a m e ] 
                     ; 
                 } , 
                 a r r a y T o P a t h :   f u n c t i o n ( p a t h A r r a y )   { 
                     r e t u r n   $ . i s A r r a y ( p a t h A r r a y ) 
                         ?   p a t h A r r a y . j o i n ( ' / ' ) 
                         :   f a l s e 
                     ; 
                 } 
             } , 
 
             s e t t i n g :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                 i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                     $ . e x t e n d ( t r u e ,   s e t t i n g s ,   n a m e ) ; 
                 } 
                 e l s e   i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                     s e t t i n g s [ n a m e ]   =   v a l u e ; 
                 } 
                 e l s e   { 
                     r e t u r n   s e t t i n g s [ n a m e ] ; 
                 } 
             } , 
             i n t e r n a l :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                 i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                     $ . e x t e n d ( t r u e ,   m o d u l e ,   n a m e ) ; 
                 } 
                 e l s e   i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                     m o d u l e [ n a m e ]   =   v a l u e ; 
                 } 
                 e l s e   { 
                     r e t u r n   m o d u l e [ n a m e ] ; 
                 } 
             } , 
             d e b u g :   f u n c t i o n ( )   { 
                 i f ( s e t t i n g s . d e b u g )   { 
                     i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                         m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                     } 
                     e l s e   { 
                         m o d u l e . d e b u g   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                         m o d u l e . d e b u g . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                     } 
                 } 
             } , 
             v e r b o s e :   f u n c t i o n ( )   { 
                 i f ( s e t t i n g s . v e r b o s e   & &   s e t t i n g s . d e b u g )   { 
                     i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                         m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                     } 
                     e l s e   { 
                         m o d u l e . v e r b o s e   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                         m o d u l e . v e r b o s e . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                     } 
                 } 
             } , 
             e r r o r :   f u n c t i o n ( )   { 
                 m o d u l e . e r r o r   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . e r r o r ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                 m o d u l e . e r r o r . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
             } , 
             p e r f o r m a n c e :   { 
                 l o g :   f u n c t i o n ( m e s s a g e )   { 
                     v a r 
                         c u r r e n t T i m e , 
                         e x e c u t i o n T i m e , 
                         p r e v i o u s T i m e 
                     ; 
                     i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                         c u r r e n t T i m e       =   n e w   D a t e ( ) . g e t T i m e ( ) ; 
                         p r e v i o u s T i m e     =   t i m e   | |   c u r r e n t T i m e ; 
                         e x e c u t i o n T i m e   =   c u r r e n t T i m e   -   p r e v i o u s T i m e ; 
                         t i m e                     =   c u r r e n t T i m e ; 
                         p e r f o r m a n c e . p u s h ( { 
                             ' E l e m e n t '                 :   e l e m e n t , 
                             ' N a m e '                       :   m e s s a g e [ 0 ] , 
                             ' A r g u m e n t s '             :   [ ] . s l i c e . c a l l ( m e s s a g e ,   1 )   | |   ' ' , 
                             ' E x e c u t i o n   T i m e '   :   e x e c u t i o n T i m e 
                         } ) ; 
                     } 
                     c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                     m o d u l e . p e r f o r m a n c e . t i m e r   =   s e t T i m e o u t ( m o d u l e . p e r f o r m a n c e . d i s p l a y ,   1 0 0 ) ; 
                 } , 
                 d i s p l a y :   f u n c t i o n ( )   { 
                     v a r 
                         t i t l e   =   s e t t i n g s . n a m e   +   ' : ' , 
                         t o t a l T i m e   =   0 
                     ; 
                     t i m e   =   f a l s e ; 
                     c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                     $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                         t o t a l T i m e   + =   d a t a [ ' E x e c u t i o n   T i m e ' ] ; 
                     } ) ; 
                     t i t l e   + =   '   '   +   t o t a l T i m e   +   ' m s ' ; 
                     i f ( m o d u l e S e l e c t o r )   { 
                         t i t l e   + =   '   \ ' '   +   m o d u l e S e l e c t o r   +   ' \ ' ' ; 
                     } 
                     i f (   ( c o n s o l e . g r o u p   ! = =   u n d e f i n e d   | |   c o n s o l e . t a b l e   ! = =   u n d e f i n e d )   & &   p e r f o r m a n c e . l e n g t h   >   0 )   { 
                         c o n s o l e . g r o u p C o l l a p s e d ( t i t l e ) ; 
                         i f ( c o n s o l e . t a b l e )   { 
                             c o n s o l e . t a b l e ( p e r f o r m a n c e ) ; 
                         } 
                         e l s e   { 
                             $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                                 c o n s o l e . l o g ( d a t a [ ' N a m e ' ]   +   ' :   '   +   d a t a [ ' E x e c u t i o n   T i m e ' ] + ' m s ' ) ; 
                             } ) ; 
                         } 
                         c o n s o l e . g r o u p E n d ( ) ; 
                     } 
                     p e r f o r m a n c e   =   [ ] ; 
                 } 
             } , 
             i n v o k e :   f u n c t i o n ( q u e r y ,   p a s s e d A r g u m e n t s ,   c o n t e x t )   { 
                 v a r 
                     o b j e c t   =   i n s t a n c e , 
                     m a x D e p t h , 
                     f o u n d , 
                     r e s p o n s e 
                 ; 
                 p a s s e d A r g u m e n t s   =   p a s s e d A r g u m e n t s   | |   q u e r y A r g u m e n t s ; 
                 c o n t e x t                   =   e l e m e n t                   | |   c o n t e x t ; 
                 i f ( t y p e o f   q u e r y   = =   ' s t r i n g '   & &   o b j e c t   ! = =   u n d e f i n e d )   { 
                     q u e r y         =   q u e r y . s p l i t ( / [ \ .   ] / ) ; 
                     m a x D e p t h   =   q u e r y . l e n g t h   -   1 ; 
                     $ . e a c h ( q u e r y ,   f u n c t i o n ( d e p t h ,   v a l u e )   { 
                         v a r   c a m e l C a s e V a l u e   =   ( d e p t h   ! =   m a x D e p t h ) 
                             ?   v a l u e   +   q u e r y [ d e p t h   +   1 ] . c h a r A t ( 0 ) . t o U p p e r C a s e ( )   +   q u e r y [ d e p t h   +   1 ] . s l i c e ( 1 ) 
                             :   q u e r y 
                         ; 
                         i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ c a m e l C a s e V a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                             o b j e c t   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                         } 
                         e l s e   i f (   o b j e c t [ c a m e l C a s e V a l u e ]   ! = =   u n d e f i n e d   )   { 
                             f o u n d   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                             r e t u r n   f a l s e ; 
                         } 
                         e l s e   i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ v a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                             o b j e c t   =   o b j e c t [ v a l u e ] ; 
                         } 
                         e l s e   i f (   o b j e c t [ v a l u e ]   ! = =   u n d e f i n e d   )   { 
                             f o u n d   =   o b j e c t [ v a l u e ] ; 
                             r e t u r n   f a l s e ; 
                         } 
                         e l s e   { 
                             r e t u r n   f a l s e ; 
                         } 
                     } ) ; 
                 } 
                 i f   (   $ . i s F u n c t i o n (   f o u n d   )   )   { 
                     r e s p o n s e   =   f o u n d . a p p l y ( c o n t e x t ,   p a s s e d A r g u m e n t s ) ; 
                 } 
                 e l s e   i f ( f o u n d   ! = =   u n d e f i n e d )   { 
                     r e s p o n s e   =   f o u n d ; 
                 } 
                 i f ( $ . i s A r r a y ( r e t u r n e d V a l u e ) )   { 
                     r e t u r n e d V a l u e . p u s h ( r e s p o n s e ) ; 
                 } 
                 e l s e   i f ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d )   { 
                     r e t u r n e d V a l u e   =   [ r e t u r n e d V a l u e ,   r e s p o n s e ] ; 
                 } 
                 e l s e   i f ( r e s p o n s e   ! = =   u n d e f i n e d )   { 
                     r e t u r n e d V a l u e   =   r e s p o n s e ; 
                 } 
                 r e t u r n   f o u n d ; 
             } 
         } ; 
 
         i f ( m e t h o d I n v o k e d )   { 
             i f ( i n s t a n c e   = = =   u n d e f i n e d )   { 
                 m o d u l e . i n i t i a l i z e ( ) ; 
             } 
             m o d u l e . i n v o k e ( q u e r y ) ; 
         } 
         e l s e   { 
             i f ( i n s t a n c e   ! = =   u n d e f i n e d )   { 
                 m o d u l e . d e s t r o y ( ) ; 
             } 
             m o d u l e . i n i t i a l i z e ( ) ; 
         } 
 
         r e t u r n   ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d ) 
             ?   r e t u r n e d V a l u e 
             :   t h i s 
         ; 
 
     } ; 
 
     / /   s h o r t c u t   f o r   t a b b e d   c o n t e n t   w i t h   n o   d e f i n e d   n a v i g a t i o n 
     $ . t a b   =   f u n c t i o n ( s e t t i n g s )   { 
         $ ( w i n d o w ) . t a b ( s e t t i n g s ) ; 
     } ; 
 
     $ . f n . t a b . s e t t i n g s   =   { 
 
         n a m e                 :   ' T a b ' , 
         d e b u g               :   f a l s e , 
         v e r b o s e           :   t r u e , 
         p e r f o r m a n c e   :   t r u e , 
         n a m e s p a c e       :   ' t a b ' , 
 
         / /   o n l y   c a l l e d   f i r s t   t i m e   a   t a b ' s   c o n t e n t   i s   l o a d e d   ( w h e n   r e m o t e   s o u r c e ) 
         o n T a b I n i t       :   f u n c t i o n ( t a b P a t h ,   p a r a m e t e r A r r a y ,   h i s t o r y E v e n t )   { } , 
         / /   c a l l e d   o n   e v e r y   l o a d 
         o n T a b L o a d       :   f u n c t i o n ( t a b P a t h ,   p a r a m e t e r A r r a y ,   h i s t o r y E v e n t )   { } , 
 
         t e m p l a t e s       :   { 
             d e t e r m i n e T i t l e :   f u n c t i o n ( t a b A r r a y )   { } 
         } , 
 
         / /   u s e s   p j a x   s t y l e   e n d p o i n t s   f e t c h i n g   c o n t e n t   f r o m   s a m e   u r l   w i t h   r e m o t e - c o n t e n t   h e a d e r s 
         a u t o                         :   f a l s e , 
         h i s t o r y                   :   t r u e , 
         h i s t o r y T y p e           :   ' h a s h ' , 
         p a t h                         :   f a l s e , 
 
         c o n t e x t                   :   ' b o d y ' , 
 
         / /   m a x   d e p t h   a   t a b   c a n   b e   n e s t e d 
         m a x D e p t h                 :   2 5 , 
         / /   d o n t   l o a d   c o n t e n t   o n   f i r s t   l o a d 
         i g n o r e F i r s t L o a d   :   f a l s e , 
         / /   l o a d   t a b   c o n t e n t   n e w   e v e r y   t a b   c l i c k 
         a l w a y s R e f r e s h       :   f a l s e , 
         / /   c a c h e   t h e   c o n t e n t   r e q u e s t s   t o   p u l l   l o c a l l y 
         c a c h e                       :   t r u e , 
         / /   s e t t i n g s   f o r   a p i   c a l l 
         a p i S e t t i n g s           :   f a l s e , 
 
         e r r o r :   { 
             a p i                 :   ' Y o u   a t t e m p t e d   t o   l o a d   c o n t e n t   w i t h o u t   A P I   m o d u l e ' , 
             m e t h o d           :   ' T h e   m e t h o d   y o u   c a l l e d   i s   n o t   d e f i n e d ' , 
             m i s s i n g T a b   :   ' T a b   c a n n o t   b e   f o u n d ' , 
             n o C o n t e n t     :   ' T h e   t a b   y o u   s p e c i f i e d   i s   m i s s i n g   a   c o n t e n t   u r l . ' , 
             p a t h               :   ' H i s t o r y   e n a b l e d ,   b u t   n o   p a t h   w a s   s p e c i f i e d ' , 
             r e c u r s i o n     :   ' M a x   r e c u r s i v e   d e p t h   r e a c h e d ' , 
             s t a t e             :   ' T h e   s t a t e   l i b r a r y   h a s   n o t   b e e n   i n i t i a l i z e d ' 
         } , 
 
         m e t a d a t a   :   { 
             t a b         :   ' t a b ' , 
             l o a d e d   :   ' l o a d e d ' , 
             p r o m i s e :   ' p r o m i s e ' 
         } , 
 
         c l a s s N a m e       :   { 
             l o a d i n g   :   ' l o a d i n g ' , 
             a c t i v e     :   ' a c t i v e ' 
         } , 
 
         s e l e c t o r         :   { 
             t a b s   :   ' . u i . t a b ' 
         } 
 
     } ; 
 
 } ) (   j Q u e r y ,   w i n d o w   ,   d o c u m e n t   ) ; 
 
 / * 
   *   #   S e m a n t i c   -   T r a n s i t i o n 
   *   h t t p : / / g i t h u b . c o m / j l u k i c / s e m a n t i c - u i / 
   * 
   * 
   *   C o p y r i g h t   2 0 1 3   C o n t r i b u t o r s 
   *   R e l e a s e d   u n d e r   t h e   M I T   l i c e n s e 
   *   h t t p : / / o p e n s o u r c e . o r g / l i c e n s e s / M I T 
   * 
   * / 
 
 ; ( f u n c t i o n   (   $ ,   w i n d o w ,   d o c u m e n t ,   u n d e f i n e d   )   { 
 
 $ . f n . t r a n s i t i o n   =   f u n c t i o n ( )   { 
     v a r 
         $ a l l M o d u l e s           =   $ ( t h i s ) , 
         m o d u l e S e l e c t o r     =   $ a l l M o d u l e s . s e l e c t o r   | |   ' ' , 
 
         t i m e                         =   n e w   D a t e ( ) . g e t T i m e ( ) , 
         p e r f o r m a n c e           =   [ ] , 
 
         m o d u l e A r g u m e n t s   =   a r g u m e n t s , 
         q u e r y                       =   m o d u l e A r g u m e n t s [ 0 ] , 
         q u e r y A r g u m e n t s     =   [ ] . s l i c e . c a l l ( a r g u m e n t s ,   1 ) , 
         m e t h o d I n v o k e d       =   ( t y p e o f   q u e r y   = = =   ' s t r i n g ' ) , 
 
         r e q u e s t A n i m a t i o n F r a m e   =   w i n d o w . r e q u e s t A n i m a t i o n F r a m e 
             | |   w i n d o w . m o z R e q u e s t A n i m a t i o n F r a m e 
             | |   w i n d o w . w e b k i t R e q u e s t A n i m a t i o n F r a m e 
             | |   w i n d o w . m s R e q u e s t A n i m a t i o n F r a m e 
             | |   f u n c t i o n ( c a l l b a c k )   {   s e t T i m e o u t ( c a l l b a c k ,   0 ) ;   } , 
 
         r e t u r n e d V a l u e 
     ; 
     $ a l l M o d u l e s 
         . e a c h ( f u n c t i o n ( )   { 
             v a r 
                 $ m o d u l e     =   $ ( t h i s ) , 
                 e l e m e n t     =   t h i s , 
 
                 / /   s e t   a t   r u n   t i m e 
                 s e t t i n g s , 
                 i n s t a n c e , 
 
                 e r r o r , 
                 c l a s s N a m e , 
                 m e t a d a t a , 
                 a n i m a t i o n E n d , 
                 a n i m a t i o n N a m e , 
 
                 n a m e s p a c e , 
                 m o d u l e N a m e s p a c e , 
                 m o d u l e 
             ; 
 
             m o d u l e   =   { 
 
                 i n i t i a l i z e :   f u n c t i o n ( )   { 
                     / /   g e t   s e t t i n g s 
                     s e t t i n g s                 =   m o d u l e . g e t . s e t t i n g s . a p p l y ( e l e m e n t ,   m o d u l e A r g u m e n t s ) ; 
                     m o d u l e . v e r b o s e ( ' C o n v e r t e d   a r g u m e n t s   i n t o   s e t t i n g s   o b j e c t ' ,   s e t t i n g s ) ; 
 
                     / /   s e t   s h o r t c u t s 
                     e r r o r                       =   s e t t i n g s . e r r o r ; 
                     c l a s s N a m e               =   s e t t i n g s . c l a s s N a m e ; 
                     n a m e s p a c e               =   s e t t i n g s . n a m e s p a c e ; 
                     m e t a d a t a                 =   s e t t i n g s . m e t a d a t a ; 
                     m o d u l e N a m e s p a c e   =   ' m o d u l e - '   +   n a m e s p a c e ; 
 
                     a n i m a t i o n E n d         =   m o d u l e . g e t . a n i m a t i o n E v e n t ( ) ; 
                     a n i m a t i o n N a m e       =   m o d u l e . g e t . a n i m a t i o n N a m e ( ) ; 
 
                     i n s t a n c e                 =   $ m o d u l e . d a t a ( m o d u l e N a m e s p a c e )   | |   m o d u l e ; 
 
                     i f ( m e t h o d I n v o k e d )   { 
                         m e t h o d I n v o k e d   =   m o d u l e . i n v o k e ( q u e r y ) ; 
                     } 
                     / /   n o   i n t e r n a l   m e t h o d   w a s   f o u n d   m a t c h i n g   q u e r y   o r   q u e r y   n o t   m a d e 
                     i f ( m e t h o d I n v o k e d   = = =   f a l s e )   { 
                         m o d u l e . a n i m a t e ( ) ; 
                     } 
                     m o d u l e . i n s t a n t i a t e ( ) ; 
                 } , 
 
                 i n s t a n t i a t e :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' S t o r i n g   i n s t a n c e   o f   m o d u l e ' ,   m o d u l e ) ; 
                     $ m o d u l e 
                         . d a t a ( m o d u l e N a m e s p a c e ,   i n s t a n c e ) 
                     ; 
                 } , 
 
                 d e s t r o y :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' D e s t r o y i n g   p r e v i o u s   m o d u l e   f o r ' ,   e l e m e n t ) ; 
                     $ m o d u l e 
                         . r e m o v e D a t a ( m o d u l e N a m e s p a c e ) 
                     ; 
                 } , 
 
                 r e f r e s h :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' R e f r e s h i n g   d i s p l a y   t y p e   o n   n e x t   a n i m a t i o n ' ) ; 
                     d e l e t e   i n s t a n c e . d i s p l a y T y p e ; 
                 } , 
 
                 f o r c e R e p a i n t :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' F o r c i n g   e l e m e n t   r e p a i n t ' ) ; 
                     v a r 
                         $ p a r e n t E l e m e n t   =   $ m o d u l e . p a r e n t ( ) , 
                         $ n e x t E l e m e n t   =   $ m o d u l e . n e x t ( ) 
                     ; 
                     i f ( $ n e x t E l e m e n t . s i z e ( )   = = =   0 )   { 
                         $ m o d u l e . d e t a c h ( ) . a p p e n d T o ( $ p a r e n t E l e m e n t ) ; 
                     } 
                     e l s e   { 
                         $ m o d u l e . d e t a c h ( ) . i n s e r t B e f o r e ( $ n e x t E l e m e n t ) ; 
                     } 
                 } , 
 
                 r e p a i n t :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' R e p a i n t i n g   e l e m e n t ' ) ; 
                     v a r 
                         f a k e A s s i g n m e n t   =   e l e m e n t . o f f s e t W i d t h 
                     ; 
                 } , 
 
                 a n i m a t e :   f u n c t i o n ( o v e r r i d e S e t t i n g s )   { 
                     s e t t i n g s   =   o v e r r i d e S e t t i n g s   | |   s e t t i n g s ; 
                     i f ( ! m o d u l e . i s . s u p p o r t e d ( ) )   { 
                         m o d u l e . e r r o r ( e r r o r . s u p p o r t ) ; 
                         r e t u r n   f a l s e ; 
                     } 
                     m o d u l e . d e b u g ( ' P r e p a r i n g   a n i m a t i o n ' ,   s e t t i n g s . a n i m a t i o n ) ; 
                     i f ( m o d u l e . i s . a n i m a t i n g ( )   & &   s e t t i n g s . q u e u e )   { 
                         i f ( ! s e t t i n g s . a l l o w R e p e a t s   & &   m o d u l e . h a s . d i r e c t i o n ( )   & &   m o d u l e . i s . o c c u r i n g ( )   & &   i n s t a n c e . q u e u i n g   ! = =   t r u e )   { 
                             m o d u l e . e r r o r ( e r r o r . r e p e a t e d ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . q u e u e ( s e t t i n g s . a n i m a t i o n ) ; 
                         } 
                         r e t u r n   f a l s e ; 
                     } 
                     i f ( m o d u l e . c a n . a n i m a t e )   { 
                         m o d u l e . s e t . a n i m a t i n g ( s e t t i n g s . a n i m a t i o n ) ; 
                     } 
                     e l s e   { 
                         m o d u l e . e r r o r ( e r r o r . n o A n i m a t i o n ,   s e t t i n g s . a n i m a t i o n ) ; 
                     } 
                 } , 
 
                 r e s e t :   f u n c t i o n ( )   { 
                     m o d u l e . d e b u g ( ' R e s e t t i n g   a n i m a t i o n   t o   b e g i n n i n g   c o n d i t i o n s ' ) ; 
                     $ m o d u l e . o f f ( a n i m a t i o n E n d ) ; 
                     m o d u l e . r e s t o r e . c o n d i t i o n s ( ) ; 
                     m o d u l e . h i d e ( ) ; 
                     m o d u l e . r e m o v e . a n i m a t i n g ( ) ; 
                 } , 
 
                 q u e u e :   f u n c t i o n ( a n i m a t i o n )   { 
                     m o d u l e . d e b u g ( ' Q u e u e i n g   a n i m a t i o n   o f ' ,   a n i m a t i o n ) ; 
                     i n s t a n c e . q u e u i n g   =   t r u e ; 
                     $ m o d u l e 
                         . o n e ( a n i m a t i o n E n d ,   f u n c t i o n ( )   { 
                             i n s t a n c e . q u e u i n g   =   f a l s e ; 
                             m o d u l e . r e p a i n t ( ) ; 
                             m o d u l e . a n i m a t e . a p p l y ( t h i s ,   s e t t i n g s ) ; 
                         } ) 
                     ; 
                 } , 
 
                 c o m p l e t e :   f u n c t i o n   ( )   { 
                     m o d u l e . v e r b o s e ( ' C S S   a n i m a t i o n   c o m p l e t e ' ,   s e t t i n g s . a n i m a t i o n ) ; 
                     i f ( ! m o d u l e . i s . l o o p i n g ( ) )   { 
                         i f (   m o d u l e . i s . o u t w a r d ( )   )   { 
                             m o d u l e . v e r b o s e ( ' A n i m a t i o n   i s   o u t w a r d ,   h i d i n g   e l e m e n t ' ) ; 
                             m o d u l e . r e s t o r e . c o n d i t i o n s ( ) ; 
                             m o d u l e . r e m o v e . d i s p l a y ( ) ; 
                             m o d u l e . h i d e ( ) ; 
                             $ . p r o x y ( s e t t i n g s . o n H i d e ,   t h i s ) ( ) ; 
                         } 
                         e l s e   i f (   m o d u l e . i s . i n w a r d ( )   )   { 
                             m o d u l e . v e r b o s e ( ' A n i m a t i o n   i s   o u t w a r d ,   s h o w i n g   e l e m e n t ' ) ; 
                             m o d u l e . r e s t o r e . c o n d i t i o n s ( ) ; 
                             m o d u l e . s h o w ( ) ; 
                             $ . p r o x y ( s e t t i n g s . o n S h o w ,   t h i s ) ( ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . r e s t o r e . c o n d i t i o n s ( ) ; 
                         } 
                         m o d u l e . r e m o v e . d u r a t i o n ( ) ; 
                         m o d u l e . r e m o v e . a n i m a t i n g ( ) ; 
                     } 
                     $ . p r o x y ( s e t t i n g s . c o m p l e t e ,   t h i s ) ( ) ; 
                 } , 
 
                 h a s :   { 
                     d i r e c t i o n :   f u n c t i o n ( a n i m a t i o n )   { 
                         a n i m a t i o n   =   a n i m a t i o n   | |   s e t t i n g s . a n i m a t i o n ; 
                         i f (   a n i m a t i o n . s e a r c h ( c l a s s N a m e . i n w a r d )   ! = =   - 1   | |   a n i m a t i o n . s e a r c h ( c l a s s N a m e . o u t w a r d )   ! = =   - 1 )   { 
                             m o d u l e . d e b u g ( ' D i r e c t i o n   a l r e a d y   s e t   i n   a n i m a t i o n ' ) ; 
                             r e t u r n   t r u e ; 
                         } 
                         r e t u r n   f a l s e ; 
                     } 
                 } , 
 
                 s e t :   { 
 
                     a n i m a t i n g :   f u n c t i o n ( a n i m a t i o n )   { 
                         a n i m a t i o n   =   a n i m a t i o n   | |   s e t t i n g s . a n i m a t i o n ; 
                         m o d u l e . s a v e . c o n d i t i o n s ( ) ; 
                         i f ( m o d u l e . c a n . t r a n s i t i o n ( )   & &   ! m o d u l e . h a s . d i r e c t i o n ( ) )   { 
                             m o d u l e . s e t . d i r e c t i o n ( ) ; 
                         } 
                         m o d u l e . r e m o v e . h i d d e n ( ) ; 
                         m o d u l e . s e t . d i s p l a y ( ) ; 
                         $ m o d u l e 
                             . a d d C l a s s ( c l a s s N a m e . a n i m a t i n g ) 
                             . a d d C l a s s ( c l a s s N a m e . t r a n s i t i o n ) 
                             . a d d C l a s s ( a n i m a t i o n ) 
                             . o n e ( a n i m a t i o n E n d ,   m o d u l e . c o m p l e t e ) 
                         ; 
                         m o d u l e . s e t . d u r a t i o n ( s e t t i n g s . d u r a t i o n ) ; 
                         m o d u l e . d e b u g ( ' S t a r t i n g   t w e e n ' ,   s e t t i n g s . a n i m a t i o n ,   $ m o d u l e . a t t r ( ' c l a s s ' ) ) ; 
                     } , 
 
                     d i s p l a y :   f u n c t i o n ( )   { 
                         v a r 
                             d i s p l a y T y p e   =   m o d u l e . g e t . d i s p l a y T y p e ( ) 
                         ; 
                         i f ( d i s p l a y T y p e   ! = =   ' b l o c k ' )   { 
                             m o d u l e . v e r b o s e ( ' S e t t i n g   f i n a l   v i s i b i l i t y   t o ' ,   d i s p l a y T y p e ) ; 
                             $ m o d u l e 
                                 . c s s ( { 
                                     d i s p l a y :   d i s p l a y T y p e 
                                 } ) 
                             ; 
                         } 
                     } , 
 
                     d i r e c t i o n :   f u n c t i o n ( )   { 
                         i f ( $ m o d u l e . i s ( ' : v i s i b l e ' ) )   { 
                             m o d u l e . d e b u g ( ' A u t o m a t i c a l l y   d e t e r m i n i n g   t h e   d i r e c t i o n   o f   a n i m a t i o n ' ,   ' O u t w a r d ' ) ; 
                             $ m o d u l e 
                                 . r e m o v e C l a s s ( c l a s s N a m e . i n w a r d ) 
                                 . a d d C l a s s ( c l a s s N a m e . o u t w a r d ) 
                             ; 
                         } 
                         e l s e   { 
                             m o d u l e . d e b u g ( ' A u t o m a t i c a l l y   d e t e r m i n i n g   t h e   d i r e c t i o n   o f   a n i m a t i o n ' ,   ' I n w a r d ' ) ; 
                             $ m o d u l e 
                                 . r e m o v e C l a s s ( c l a s s N a m e . o u t w a r d ) 
                                 . a d d C l a s s ( c l a s s N a m e . i n w a r d ) 
                             ; 
                         } 
                     } , 
 
                     l o o p i n g :   f u n c t i o n ( )   { 
                         m o d u l e . d e b u g ( ' T r a n s i t i o n   s e t   t o   l o o p ' ) ; 
                         $ m o d u l e 
                             . a d d C l a s s ( c l a s s N a m e . l o o p i n g ) 
                         ; 
                     } , 
 
                     d u r a t i o n :   f u n c t i o n ( d u r a t i o n )   { 
                         d u r a t i o n   =   d u r a t i o n   | |   s e t t i n g s . d u r a t i o n ; 
                         d u r a t i o n   =   ( t y p e o f   d u r a t i o n   = =   ' n u m b e r ' ) 
                             ?   d u r a t i o n   +   ' m s ' 
                             :   d u r a t i o n 
                         ; 
                         m o d u l e . v e r b o s e ( ' S e t t i n g   a n i m a t i o n   d u r a t i o n ' ,   d u r a t i o n ) ; 
                         $ m o d u l e 
                             . c s s ( { 
                                 ' - w e b k i t - a n i m a t i o n - d u r a t i o n ' :   d u r a t i o n , 
                                 ' - m o z - a n i m a t i o n - d u r a t i o n ' :   d u r a t i o n , 
                                 ' - m s - a n i m a t i o n - d u r a t i o n ' :   d u r a t i o n , 
                                 ' - o - a n i m a t i o n - d u r a t i o n ' :   d u r a t i o n , 
                                 ' a n i m a t i o n - d u r a t i o n ' :   d u r a t i o n 
                             } ) 
                         ; 
                     } , 
 
                     h i d d e n :   f u n c t i o n ( )   { 
                         $ m o d u l e 
                             . a d d C l a s s ( c l a s s N a m e . t r a n s i t i o n ) 
                             . a d d C l a s s ( c l a s s N a m e . h i d d e n ) 
                         ; 
                     } , 
 
                     v i s i b l e :   f u n c t i o n ( )   { 
                         $ m o d u l e 
                             . a d d C l a s s ( c l a s s N a m e . t r a n s i t i o n ) 
                             . a d d C l a s s ( c l a s s N a m e . v i s i b l e ) 
                         ; 
                     } 
                 } , 
 
                 s a v e :   { 
                     d i s p l a y T y p e :   f u n c t i o n ( d i s p l a y T y p e )   { 
                         i n s t a n c e . d i s p l a y T y p e   =   d i s p l a y T y p e ; 
                     } , 
                     t r a n s i t i o n E x i s t s :   f u n c t i o n ( a n i m a t i o n ,   e x i s t s )   { 
                         $ . f n . t r a n s i t i o n . e x i s t s [ a n i m a t i o n ]   =   e x i s t s ; 
                         m o d u l e . v e r b o s e ( ' S a v i n g   e x i s t e n c e   o f   t r a n s i t i o n ' ,   a n i m a t i o n ,   e x i s t s ) ; 
                     } , 
                     c o n d i t i o n s :   f u n c t i o n ( )   { 
                         i n s t a n c e . c a c h e   =   { 
                             c l a s s N a m e   :   $ m o d u l e . a t t r ( ' c l a s s ' ) , 
                             s t y l e           :   $ m o d u l e . a t t r ( ' s t y l e ' ) 
                         } ; 
                         m o d u l e . v e r b o s e ( ' S a v i n g   o r i g i n a l   a t t r i b u t e s ' ,   i n s t a n c e . c a c h e ) ; 
                     } 
                 } , 
 
                 r e s t o r e :   { 
                     c o n d i t i o n s :   f u n c t i o n ( )   { 
                         i f ( i n s t a n c e . c a c h e   = = =   u n d e f i n e d )   { 
                             r e t u r n   f a l s e ; 
                         } 
                         i f ( i n s t a n c e . c a c h e . c l a s s N a m e )   { 
                             $ m o d u l e . a t t r ( ' c l a s s ' ,   i n s t a n c e . c a c h e . c l a s s N a m e ) ; 
                         } 
                         e l s e   { 
                             $ m o d u l e . r e m o v e A t t r ( ' c l a s s ' ) ; 
                         } 
                         i f ( i n s t a n c e . c a c h e . s t y l e )   { 
                             $ m o d u l e . a t t r ( ' s t y l e ' ,   i n s t a n c e . c a c h e . s t y l e ) ; 
                         } 
                         e l s e   { 
                             i f ( m o d u l e . g e t . d i s p l a y T y p e ( )   = = =   ' b l o c k ' )   { 
                                 $ m o d u l e . r e m o v e A t t r ( ' s t y l e ' ) ; 
                             } 
                         } 
                         i f ( m o d u l e . i s . l o o p i n g ( ) )   { 
                             m o d u l e . r e m o v e . l o o p i n g ( ) ; 
                         } 
                         m o d u l e . v e r b o s e ( ' R e s t o r i n g   o r i g i n a l   a t t r i b u t e s ' ,   i n s t a n c e . c a c h e ) ; 
                     } 
                 } , 
 
                 r e m o v e :   { 
 
                     a n i m a t i n g :   f u n c t i o n ( )   { 
                         $ m o d u l e . r e m o v e C l a s s ( c l a s s N a m e . a n i m a t i n g ) ; 
                     } , 
 
                     d i s p l a y :   f u n c t i o n ( )   { 
                         i f ( i n s t a n c e . d i s p l a y T y p e   ! = =   u n d e f i n e d )   { 
                             $ m o d u l e . c s s ( ' d i s p l a y ' ,   ' ' ) ; 
                         } 
                     } , 
 
                     d u r a t i o n :   f u n c t i o n ( )   { 
                         $ m o d u l e 
                             . c s s ( { 
                                 ' - w e b k i t - a n i m a t i o n - d u r a t i o n '   :   ' ' , 
                                 ' - m o z - a n i m a t i o n - d u r a t i o n '         :   ' ' , 
                                 ' - m s - a n i m a t i o n - d u r a t i o n '           :   ' ' , 
                                 ' - o - a n i m a t i o n - d u r a t i o n '             :   ' ' , 
                                 ' a n i m a t i o n - d u r a t i o n '                   :   ' ' 
                             } ) 
                         ; 
                     } , 
 
                     h i d d e n :   f u n c t i o n ( )   { 
                         $ m o d u l e . r e m o v e C l a s s ( c l a s s N a m e . h i d d e n ) ; 
                     } , 
 
                     v i s i b l e :   f u n c t i o n ( )   { 
                         $ m o d u l e . r e m o v e C l a s s ( c l a s s N a m e . v i s i b l e ) ; 
                     } , 
 
                     l o o p i n g :   f u n c t i o n ( )   { 
                         m o d u l e . d e b u g ( ' T r a n s i t i o n s   a r e   n o   l o n g e r   l o o p i n g ' ) ; 
                         $ m o d u l e 
                             . r e m o v e C l a s s ( c l a s s N a m e . l o o p i n g ) 
                         ; 
                         m o d u l e . f o r c e R e p a i n t ( ) ; 
                     } 
 
                 } , 
 
                 g e t :   { 
 
                     s e t t i n g s :   f u n c t i o n ( a n i m a t i o n ,   d u r a t i o n ,   c o m p l e t e )   { 
                         / /   s i n g l e   s e t t i n g s   o b j e c t 
                         i f ( t y p e o f   a n i m a t i o n   = =   ' o b j e c t ' )   { 
                             r e t u r n   $ . e x t e n d ( t r u e ,   { } ,   $ . f n . t r a n s i t i o n . s e t t i n g s ,   a n i m a t i o n ) ; 
                         } 
                         / /   a l l   a r g u m e n t s   p r o v i d e d 
                         e l s e   i f ( t y p e o f   c o m p l e t e   = =   ' f u n c t i o n ' )   { 
                             r e t u r n   $ . e x t e n d ( { } ,   $ . f n . t r a n s i t i o n . s e t t i n g s ,   { 
                                 a n i m a t i o n   :   a n i m a t i o n , 
                                 c o m p l e t e     :   c o m p l e t e , 
                                 d u r a t i o n     :   d u r a t i o n 
                             } ) ; 
                         } 
                         / /   o n l y   d u r a t i o n   p r o v i d e d 
                         e l s e   i f ( t y p e o f   d u r a t i o n   = =   ' s t r i n g '   | |   t y p e o f   d u r a t i o n   = =   ' n u m b e r ' )   { 
                             r e t u r n   $ . e x t e n d ( { } ,   $ . f n . t r a n s i t i o n . s e t t i n g s ,   { 
                                 a n i m a t i o n   :   a n i m a t i o n , 
                                 d u r a t i o n     :   d u r a t i o n 
                             } ) ; 
                         } 
                         / /   d u r a t i o n   i s   a c t u a l l y   s e t t i n g s   o b j e c t 
                         e l s e   i f ( t y p e o f   d u r a t i o n   = =   ' o b j e c t ' )   { 
                             r e t u r n   $ . e x t e n d ( { } ,   $ . f n . t r a n s i t i o n . s e t t i n g s ,   d u r a t i o n ,   { 
                                 a n i m a t i o n   :   a n i m a t i o n 
                             } ) ; 
                         } 
                         / /   d u r a t i o n   i s   a c t u a l l y   c a l l b a c k 
                         e l s e   i f ( t y p e o f   d u r a t i o n   = =   ' f u n c t i o n ' )   { 
                             r e t u r n   $ . e x t e n d ( { } ,   $ . f n . t r a n s i t i o n . s e t t i n g s ,   { 
                                 a n i m a t i o n   :   a n i m a t i o n , 
                                 c o m p l e t e     :   d u r a t i o n 
                             } ) ; 
                         } 
                         / /   o n l y   a n i m a t i o n   p r o v i d e d 
                         e l s e   { 
                             r e t u r n   $ . e x t e n d ( { } ,   $ . f n . t r a n s i t i o n . s e t t i n g s ,   { 
                                 a n i m a t i o n   :   a n i m a t i o n 
                             } ) ; 
                         } 
                         r e t u r n   $ . f n . t r a n s i t i o n . s e t t i n g s ; 
                     } , 
 
                     d i s p l a y T y p e :   f u n c t i o n ( )   { 
                         i f ( i n s t a n c e . d i s p l a y T y p e   = = =   u n d e f i n e d )   { 
                             / /   c r e a t e   f a k e   e l e m e n t   t o   d e t e r m i n e   d i s p l a y   s t a t e 
                             m o d u l e . c a n . t r a n s i t i o n ( ) ; 
                         } 
                         r e t u r n   i n s t a n c e . d i s p l a y T y p e ; 
                     } , 
 
                     t r a n s i t i o n E x i s t s :   f u n c t i o n ( a n i m a t i o n )   { 
                         r e t u r n   $ . f n . t r a n s i t i o n . e x i s t s [ a n i m a t i o n ] ; 
                     } , 
 
                     a n i m a t i o n N a m e :   f u n c t i o n ( )   { 
                         v a r 
                             e l e m e n t           =   d o c u m e n t . c r e a t e E l e m e n t ( ' d i v ' ) , 
                             a n i m a t i o n s     =   { 
                                 ' a n i m a t i o n '               : ' a n i m a t i o n N a m e ' , 
                                 ' O A n i m a t i o n '             : ' o A n i m a t i o n N a m e ' , 
                                 ' M o z A n i m a t i o n '         : ' m o z A n i m a t i o n N a m e ' , 
                                 ' W e b k i t A n i m a t i o n '   : ' w e b k i t A n i m a t i o n N a m e ' 
                             } , 
                             a n i m a t i o n 
                         ; 
                         f o r ( a n i m a t i o n   i n   a n i m a t i o n s ) { 
                             i f (   e l e m e n t . s t y l e [ a n i m a t i o n ]   ! = =   u n d e f i n e d   ) { 
                                 m o d u l e . v e r b o s e ( ' D e t e r m i n e d   a n i m a t i o n   v e n d o r   n a m e   p r o p e r t y ' ,   a n i m a t i o n s [ a n i m a t i o n ] ) ; 
                                 r e t u r n   a n i m a t i o n s [ a n i m a t i o n ] ; 
                             } 
                         } 
                         r e t u r n   f a l s e ; 
                     } , 
 
                     a n i m a t i o n E v e n t :   f u n c t i o n ( )   { 
                         v a r 
                             e l e m e n t           =   d o c u m e n t . c r e a t e E l e m e n t ( ' d i v ' ) , 
                             a n i m a t i o n s     =   { 
                                 ' a n i m a t i o n '               : ' a n i m a t i o n e n d ' , 
                                 ' O A n i m a t i o n '             : ' o A n i m a t i o n E n d ' , 
                                 ' M o z A n i m a t i o n '         : ' m o z A n i m a t i o n E n d ' , 
                                 ' W e b k i t A n i m a t i o n '   : ' w e b k i t A n i m a t i o n E n d ' 
                             } , 
                             a n i m a t i o n 
                         ; 
                         f o r ( a n i m a t i o n   i n   a n i m a t i o n s ) { 
                             i f (   e l e m e n t . s t y l e [ a n i m a t i o n ]   ! = =   u n d e f i n e d   ) { 
                                 m o d u l e . v e r b o s e ( ' D e t e r m i n e d   a n i m a t i o n   v e n d o r   e n d   e v e n t ' ,   a n i m a t i o n s [ a n i m a t i o n ] ) ; 
                                 r e t u r n   a n i m a t i o n s [ a n i m a t i o n ] ; 
                             } 
                         } 
                         r e t u r n   f a l s e ; 
                     } 
 
                 } , 
 
                 c a n :   { 
                     a n i m a t e :   f u n c t i o n ( )   { 
                         i f ( $ m o d u l e . c s s ( s e t t i n g s . a n i m a t i o n )   ! = =   ' n o n e ' )   { 
                             m o d u l e . d e b u g ( ' C S S   d e f i n i t i o n   f o u n d ' ,     $ m o d u l e . c s s ( s e t t i n g s . a n i m a t i o n ) ) ; 
                             r e t u r n   t r u e ; 
                         } 
                         e l s e   { 
                             m o d u l e . d e b u g ( ' U n a b l e   t o   f i n d   c s s   d e f i n i t i o n ' ,   $ m o d u l e . a t t r ( ' c l a s s ' ) ) ; 
                             r e t u r n   f a l s e ; 
                         } 
                     } , 
                     t r a n s i t i o n :   f u n c t i o n ( )   { 
                         v a r 
                             e l e m e n t C l a s s           =   $ m o d u l e . a t t r ( ' c l a s s ' ) , 
                             a n i m a t i o n                 =   s e t t i n g s . a n i m a t i o n , 
                             t r a n s i t i o n E x i s t s   =   m o d u l e . g e t . t r a n s i t i o n E x i s t s ( s e t t i n g s . a n i m a t i o n ) , 
                             $ c l o n e , 
                             c u r r e n t A n i m a t i o n , 
                             i n A n i m a t i o n , 
                             d i s p l a y T y p e 
                         ; 
                         i f (   t r a n s i t i o n E x i s t s   = = =   u n d e f i n e d   | |   i n s t a n c e . d i s p l a y T y p e   = = =   u n d e f i n e d )   { 
                             m o d u l e . v e r b o s e ( ' D e t e r m i n i n g   w h e t h e r   a n i m a t i o n   e x i s t s ' ) ; 
                             $ c l o n e   =   $ ( ' < d i v > ' ) . a d d C l a s s (   e l e m e n t C l a s s   ) . a p p e n d T o ( $ ( ' b o d y ' ) ) ; 
                             c u r r e n t A n i m a t i o n   =   $ c l o n e 
                                 . r e m o v e C l a s s ( c l a s s N a m e . i n w a r d ) 
                                 . r e m o v e C l a s s ( c l a s s N a m e . o u t w a r d ) 
                                 . a d d C l a s s ( c l a s s N a m e . a n i m a t i n g ) 
                                 . a d d C l a s s ( c l a s s N a m e . t r a n s i t i o n ) 
                                 . a d d C l a s s ( a n i m a t i o n ) 
                                 . c s s ( a n i m a t i o n N a m e ) 
                             ; 
                             i n A n i m a t i o n   =   $ c l o n e 
                                 . a d d C l a s s ( c l a s s N a m e . i n w a r d ) 
                                 . c s s ( a n i m a t i o n N a m e ) 
                             ; 
                             d i s p l a y T y p e   =   $ c l o n e 
                                 . a t t r ( ' c l a s s ' ,   e l e m e n t C l a s s ) 
                                 . s h o w ( ) 
                                 . c s s ( ' d i s p l a y ' ) 
                             ; 
                             m o d u l e . v e r b o s e ( ' D e t e r m i n i n g   f i n a l   d i s p l a y   s t a t e ' ,   d i s p l a y T y p e ) ; 
                             i f ( c u r r e n t A n i m a t i o n   ! =   i n A n i m a t i o n )   { 
                                 m o d u l e . d e b u g ( ' T r a n s i t i o n   e x i s t s   f o r   a n i m a t i o n ' ,   a n i m a t i o n ) ; 
                                 t r a n s i t i o n E x i s t s   =   t r u e ; 
                             } 
                             e l s e   { 
                                 m o d u l e . d e b u g ( ' S t a t i c   a n i m a t i o n   f o u n d ' ,   a n i m a t i o n ,   d i s p l a y T y p e ) ; 
                                 t r a n s i t i o n E x i s t s   =   f a l s e ; 
                             } 
                             $ c l o n e . r e m o v e ( ) ; 
                             m o d u l e . s a v e . d i s p l a y T y p e ( d i s p l a y T y p e ) ; 
                             m o d u l e . s a v e . t r a n s i t i o n E x i s t s ( a n i m a t i o n ,   t r a n s i t i o n E x i s t s ) ; 
                         } 
                         r e t u r n   t r a n s i t i o n E x i s t s ; 
                     } 
                 } , 
 
                 i s :   { 
                     a n i m a t i n g :   f u n c t i o n ( )   { 
                         r e t u r n   $ m o d u l e . h a s C l a s s ( c l a s s N a m e . a n i m a t i n g ) ; 
                     } , 
                     i n w a r d :   f u n c t i o n ( )   { 
                         r e t u r n   $ m o d u l e . h a s C l a s s ( c l a s s N a m e . i n w a r d ) ; 
                     } , 
                     o u t w a r d :   f u n c t i o n ( )   { 
                         r e t u r n   $ m o d u l e . h a s C l a s s ( c l a s s N a m e . o u t w a r d ) ; 
                     } , 
                     l o o p i n g :   f u n c t i o n ( )   { 
                         r e t u r n   $ m o d u l e . h a s C l a s s ( c l a s s N a m e . l o o p i n g ) ; 
                     } , 
                     o c c u r i n g :   f u n c t i o n ( a n i m a t i o n )   { 
                         a n i m a t i o n   =   a n i m a t i o n   | |   s e t t i n g s . a n i m a t i o n ; 
                         r e t u r n   (   $ m o d u l e . h a s C l a s s ( a n i m a t i o n )   ) ; 
                     } , 
                     v i s i b l e :   f u n c t i o n ( )   { 
                         r e t u r n   $ m o d u l e . i s ( ' : v i s i b l e ' ) ; 
                     } , 
                     s u p p o r t e d :   f u n c t i o n ( )   { 
                         r e t u r n ( a n i m a t i o n N a m e   ! = =   f a l s e   & &   a n i m a t i o n E n d   ! = =   f a l s e ) ; 
                     } 
                 } , 
 
                 h i d e :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' H i d i n g   e l e m e n t ' ) ; 
                     m o d u l e . r e m o v e . v i s i b l e ( ) ; 
                     m o d u l e . s e t . h i d d e n ( ) ; 
                     m o d u l e . r e p a i n t ( ) ; 
                 } , 
 
                 s h o w :   f u n c t i o n ( d i s p l a y )   { 
                     m o d u l e . v e r b o s e ( ' S h o w i n g   e l e m e n t ' ,   d i s p l a y ) ; 
                     m o d u l e . r e m o v e . h i d d e n ( ) ; 
                     m o d u l e . s e t . v i s i b l e ( ) ; 
                     m o d u l e . r e p a i n t ( ) ; 
                 } , 
 
                 s t a r t :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' S t a r t i n g   a n i m a t i o n ' ) ; 
                     $ m o d u l e . r e m o v e C l a s s ( c l a s s N a m e . d i s a b l e d ) ; 
                 } , 
 
                 s t o p :   f u n c t i o n ( )   { 
                     m o d u l e . d e b u g ( ' S t o p p i n g   a n i m a t i o n ' ) ; 
                     $ m o d u l e . a d d C l a s s ( c l a s s N a m e . d i s a b l e d ) ; 
                 } , 
 
                 t o g g l e :   f u n c t i o n ( )   { 
                     m o d u l e . d e b u g ( ' T o g g l i n g   p l a y   s t a t u s ' ) ; 
                     $ m o d u l e . t o g g l e C l a s s ( c l a s s N a m e . d i s a b l e d ) ; 
                 } , 
 
                 s e t t i n g :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                     i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                         $ . e x t e n d ( t r u e ,   s e t t i n g s ,   n a m e ) ; 
                     } 
                     e l s e   i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                         s e t t i n g s [ n a m e ]   =   v a l u e ; 
                     } 
                     e l s e   { 
                         r e t u r n   s e t t i n g s [ n a m e ] ; 
                     } 
                 } , 
                 i n t e r n a l :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                     i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                         $ . e x t e n d ( t r u e ,   m o d u l e ,   n a m e ) ; 
                     } 
                     e l s e   i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                         m o d u l e [ n a m e ]   =   v a l u e ; 
                     } 
                     e l s e   { 
                         r e t u r n   m o d u l e [ n a m e ] ; 
                     } 
                 } , 
                 d e b u g :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . d e b u g )   { 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . d e b u g   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                             m o d u l e . d e b u g . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                         } 
                     } 
                 } , 
                 v e r b o s e :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . v e r b o s e   & &   s e t t i n g s . d e b u g )   { 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . v e r b o s e   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                             m o d u l e . v e r b o s e . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                         } 
                     } 
                 } , 
                 e r r o r :   f u n c t i o n ( )   { 
                     m o d u l e . e r r o r   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . e r r o r ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                     m o d u l e . e r r o r . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                 } , 
                 p e r f o r m a n c e :   { 
                     l o g :   f u n c t i o n ( m e s s a g e )   { 
                         v a r 
                             c u r r e n t T i m e , 
                             e x e c u t i o n T i m e , 
                             p r e v i o u s T i m e 
                         ; 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             c u r r e n t T i m e       =   n e w   D a t e ( ) . g e t T i m e ( ) ; 
                             p r e v i o u s T i m e     =   t i m e   | |   c u r r e n t T i m e ; 
                             e x e c u t i o n T i m e   =   c u r r e n t T i m e   -   p r e v i o u s T i m e ; 
                             t i m e                     =   c u r r e n t T i m e ; 
                             p e r f o r m a n c e . p u s h ( { 
                                 ' E l e m e n t '                 :   e l e m e n t , 
                                 ' N a m e '                       :   m e s s a g e [ 0 ] , 
                                 ' A r g u m e n t s '             :   [ ] . s l i c e . c a l l ( m e s s a g e ,   1 )   | |   ' ' , 
                                 ' E x e c u t i o n   T i m e '   :   e x e c u t i o n T i m e 
                             } ) ; 
                         } 
                         c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                         m o d u l e . p e r f o r m a n c e . t i m e r   =   s e t T i m e o u t ( m o d u l e . p e r f o r m a n c e . d i s p l a y ,   1 0 0 ) ; 
                     } , 
                     d i s p l a y :   f u n c t i o n ( )   { 
                         v a r 
                             t i t l e   =   s e t t i n g s . n a m e   +   ' : ' , 
                             t o t a l T i m e   =   0 
                         ; 
                         t i m e   =   f a l s e ; 
                         c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                         $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                             t o t a l T i m e   + =   d a t a [ ' E x e c u t i o n   T i m e ' ] ; 
                         } ) ; 
                         t i t l e   + =   '   '   +   t o t a l T i m e   +   ' m s ' ; 
                         i f ( m o d u l e S e l e c t o r )   { 
                             t i t l e   + =   '   \ ' '   +   m o d u l e S e l e c t o r   +   ' \ ' ' ; 
                         } 
                         i f ( $ a l l M o d u l e s . s i z e ( )   >   1 )   { 
                             t i t l e   + =   '   '   +   ' ( '   +   $ a l l M o d u l e s . s i z e ( )   +   ' ) ' ; 
                         } 
                         i f (   ( c o n s o l e . g r o u p   ! = =   u n d e f i n e d   | |   c o n s o l e . t a b l e   ! = =   u n d e f i n e d )   & &   p e r f o r m a n c e . l e n g t h   >   0 )   { 
                             c o n s o l e . g r o u p C o l l a p s e d ( t i t l e ) ; 
                             i f ( c o n s o l e . t a b l e )   { 
                                 c o n s o l e . t a b l e ( p e r f o r m a n c e ) ; 
                             } 
                             e l s e   { 
                                 $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                                     c o n s o l e . l o g ( d a t a [ ' N a m e ' ]   +   ' :   '   +   d a t a [ ' E x e c u t i o n   T i m e ' ] + ' m s ' ) ; 
                                 } ) ; 
                             } 
                             c o n s o l e . g r o u p E n d ( ) ; 
                         } 
                         p e r f o r m a n c e   =   [ ] ; 
                     } 
                 } , 
                 i n v o k e :   f u n c t i o n ( q u e r y ,   p a s s e d A r g u m e n t s ,   c o n t e x t )   { 
                     v a r 
                         o b j e c t   =   i n s t a n c e , 
                         m a x D e p t h , 
                         f o u n d , 
                         r e s p o n s e 
                     ; 
                     p a s s e d A r g u m e n t s   =   p a s s e d A r g u m e n t s   | |   q u e r y A r g u m e n t s ; 
                     c o n t e x t                   =   e l e m e n t                   | |   c o n t e x t ; 
                     i f ( t y p e o f   q u e r y   = =   ' s t r i n g '   & &   o b j e c t   ! = =   u n d e f i n e d )   { 
                         q u e r y         =   q u e r y . s p l i t ( / [ \ .   ] / ) ; 
                         m a x D e p t h   =   q u e r y . l e n g t h   -   1 ; 
                         $ . e a c h ( q u e r y ,   f u n c t i o n ( d e p t h ,   v a l u e )   { 
                             v a r   c a m e l C a s e V a l u e   =   ( d e p t h   ! =   m a x D e p t h ) 
                                 ?   v a l u e   +   q u e r y [ d e p t h   +   1 ] . c h a r A t ( 0 ) . t o U p p e r C a s e ( )   +   q u e r y [ d e p t h   +   1 ] . s l i c e ( 1 ) 
                                 :   q u e r y 
                             ; 
                             i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ c a m e l C a s e V a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                                 o b j e c t   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                             } 
                             e l s e   i f (   o b j e c t [ c a m e l C a s e V a l u e ]   ! = =   u n d e f i n e d   )   { 
                                 f o u n d   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                                 r e t u r n   f a l s e ; 
                             } 
                             e l s e   i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ v a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                                 o b j e c t   =   o b j e c t [ v a l u e ] ; 
                             } 
                             e l s e   i f (   o b j e c t [ v a l u e ]   ! = =   u n d e f i n e d   )   { 
                                 f o u n d   =   o b j e c t [ v a l u e ] ; 
                                 r e t u r n   f a l s e ; 
                             } 
                             e l s e   { 
                                 r e t u r n   f a l s e ; 
                             } 
                         } ) ; 
                     } 
                     i f   (   $ . i s F u n c t i o n (   f o u n d   )   )   { 
                         r e s p o n s e   =   f o u n d . a p p l y ( c o n t e x t ,   p a s s e d A r g u m e n t s ) ; 
                     } 
                     e l s e   i f ( f o u n d   ! = =   u n d e f i n e d )   { 
                         r e s p o n s e   =   f o u n d ; 
                     } 
                     i f ( $ . i s A r r a y ( r e t u r n e d V a l u e ) )   { 
                         r e t u r n e d V a l u e . p u s h ( r e s p o n s e ) ; 
                     } 
                     e l s e   i f ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d )   { 
                         r e t u r n e d V a l u e   =   [ r e t u r n e d V a l u e ,   r e s p o n s e ] ; 
                     } 
                     e l s e   i f ( r e s p o n s e   ! = =   u n d e f i n e d )   { 
                         r e t u r n e d V a l u e   =   r e s p o n s e ; 
                     } 
                     r e t u r n   f o u n d   | |   f a l s e ; 
                 } 
             } ; 
             m o d u l e . i n i t i a l i z e ( ) ; 
         } ) 
     ; 
     r e t u r n   ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d ) 
         ?   r e t u r n e d V a l u e 
         :   t h i s 
     ; 
 } ; 
 
 $ . f n . t r a n s i t i o n . e x i s t s   =   { } ; 
 
 $ . f n . t r a n s i t i o n . s e t t i n g s   =   { 
 
     / /   m o d u l e   i n f o 
     n a m e                 :   ' T r a n s i t i o n ' , 
 
     / /   d e b u g   c o n t e n t   o u t p u t t e d   t o   c o n s o l e 
     d e b u g               :   f a l s e , 
 
     / /   v e r b o s e   d e b u g   o u t p u t 
     v e r b o s e           :   t r u e , 
 
     / /   p e r f o r m a n c e   d a t a   o u t p u t 
     p e r f o r m a n c e   :   t r u e , 
 
     / /   e v e n t   n a m e s p a c e 
     n a m e s p a c e       :   ' t r a n s i t i o n ' , 
 
     / /   a n i m a t i o n   c o m p l e t e   e v e n t 
     c o m p l e t e         :   f u n c t i o n ( )   { } , 
     o n S h o w             :   f u n c t i o n ( )   { } , 
     o n H i d e             :   f u n c t i o n ( )   { } , 
 
     / /   w h e t h e r   a n i m a t i o n   c a n   o c c u r   t w i c e   i n   a   r o w 
     a l l o w R e p e a t s   :   f a l s e , 
 
     / /   a n i m a t i o n   d u r a t i o n 
     a n i m a t i o n     :   ' f a d e ' , 
     d u r a t i o n       :   ' 7 0 0 m s ' , 
 
     / /   n e w   a n i m a t i o n s   w i l l   o c c u r   a f t e r   p r e v i o u s   o n e s 
     q u e u e               :   t r u e , 
 
     c l a s s N a m e       :   { 
         a n i m a t i n g     :   ' a n i m a t i n g ' , 
         d i s a b l e d       :   ' d i s a b l e d ' , 
         h i d d e n           :   ' h i d d e n ' , 
         i n w a r d           :   ' i n ' , 
         l o a d i n g         :   ' l o a d i n g ' , 
         l o o p i n g         :   ' l o o p i n g ' , 
         o u t w a r d         :   ' o u t ' , 
         t r a n s i t i o n   :   ' u i   t r a n s i t i o n ' , 
         v i s i b l e         :   ' v i s i b l e ' 
     } , 
 
     / /   p o s s i b l e   e r r o r s 
     e r r o r :   { 
         n o A n i m a t i o n   :   ' T h e r e   i s   n o   c s s   a n i m a t i o n   m a t c h i n g   t h e   o n e   y o u   s p e c i f i e d . ' , 
         r e p e a t e d         :   ' T h a t   a n i m a t i o n   i s   a l r e a d y   o c c u r r i n g ,   c a n c e l l i n g   r e p e a t e d   a n i m a t i o n ' , 
         m e t h o d             :   ' T h e   m e t h o d   y o u   c a l l e d   i s   n o t   d e f i n e d ' , 
         s u p p o r t           :   ' T h i s   b r o w s e r   d o e s   n o t   s u p p o r t   C S S   a n i m a t i o n s ' 
     } 
 
 } ; 
 
 
 } ) (   j Q u e r y ,   w i n d o w   ,   d o c u m e n t   ) ; 
 
 / *     * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * 
     M o d u l e   -   V i d e o 
     A u t h o r :   J a c k   L u k i c 
 
     T h i s   i s   a   v i d e o   p l a y l i s t   a n d   v i d e o   e m b e d   p l u g i n   w h i c h   h e l p s 
     p r o v i d e   h e l p e r s   f o r   a d d i n g   e m b e d   c o d e   f o r   v i m e o   a n d   y o u t u b e   a n d 
     a b s t r a c t i n g   e v e n t   h a n d l e r s   f o r   e a c h   l i b r a r y 
 
 * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *     * / 
 
 ; ( f u n c t i o n   ( $ ,   w i n d o w ,   d o c u m e n t ,   u n d e f i n e d )   { 
 
 $ . f n . v i d e o   =   f u n c t i o n ( p a r a m e t e r s )   { 
 
     v a r 
         $ a l l M o d u l e s           =   $ ( t h i s ) , 
 
         m o d u l e S e l e c t o r     =   $ a l l M o d u l e s . s e l e c t o r   | |   ' ' , 
 
         t i m e                         =   n e w   D a t e ( ) . g e t T i m e ( ) , 
         p e r f o r m a n c e           =   [ ] , 
 
         q u e r y                       =   a r g u m e n t s [ 0 ] , 
         m e t h o d I n v o k e d       =   ( t y p e o f   q u e r y   = =   ' s t r i n g ' ) , 
         q u e r y A r g u m e n t s     =   [ ] . s l i c e . c a l l ( a r g u m e n t s ,   1 ) , 
 
         r e t u r n e d V a l u e 
     ; 
 
     $ a l l M o d u l e s 
         . e a c h ( f u n c t i o n ( )   { 
             v a r 
                 s e t t i n g s                 =   (   $ . i s P l a i n O b j e c t ( p a r a m e t e r s )   ) 
                     ?   $ . e x t e n d ( t r u e ,   { } ,   $ . f n . v i d e o . s e t t i n g s ,   p a r a m e t e r s ) 
                     :   $ . e x t e n d ( { } ,   $ . f n . v i d e o . s e t t i n g s ) , 
 
                 s e l e c t o r                 =   s e t t i n g s . s e l e c t o r , 
                 c l a s s N a m e               =   s e t t i n g s . c l a s s N a m e , 
                 e r r o r                       =   s e t t i n g s . e r r o r , 
                 m e t a d a t a                 =   s e t t i n g s . m e t a d a t a , 
                 n a m e s p a c e               =   s e t t i n g s . n a m e s p a c e , 
 
                 e v e n t N a m e s p a c e     =   ' . '   +   n a m e s p a c e , 
                 m o d u l e N a m e s p a c e   =   ' m o d u l e - '   +   n a m e s p a c e , 
 
                 $ m o d u l e                   =   $ ( t h i s ) , 
                 $ p l a c e h o l d e r         =   $ m o d u l e . f i n d ( s e l e c t o r . p l a c e h o l d e r ) , 
                 $ p l a y B u t t o n           =   $ m o d u l e . f i n d ( s e l e c t o r . p l a y B u t t o n ) , 
                 $ e m b e d                     =   $ m o d u l e . f i n d ( s e l e c t o r . e m b e d ) , 
 
                 e l e m e n t                   =   t h i s , 
                 i n s t a n c e                 =   $ m o d u l e . d a t a ( m o d u l e N a m e s p a c e ) , 
                 m o d u l e 
             ; 
 
             m o d u l e   =   { 
 
                 i n i t i a l i z e :   f u n c t i o n ( )   { 
                     m o d u l e . d e b u g ( ' I n i t i a l i z i n g   v i d e o ' ) ; 
                     $ p l a c e h o l d e r 
                         . o n ( ' c l i c k '   +   e v e n t N a m e s p a c e ,   m o d u l e . p l a y ) 
                     ; 
                     $ p l a y B u t t o n 
                         . o n ( ' c l i c k '   +   e v e n t N a m e s p a c e ,   m o d u l e . p l a y ) 
                     ; 
                     m o d u l e . i n s t a n t i a t e ( ) ; 
                 } , 
 
                 i n s t a n t i a t e :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' S t o r i n g   i n s t a n c e   o f   m o d u l e ' ,   m o d u l e ) ; 
                     i n s t a n c e   =   m o d u l e ; 
                     $ m o d u l e 
                         . d a t a ( m o d u l e N a m e s p a c e ,   m o d u l e ) 
                     ; 
                 } , 
 
                 d e s t r o y :   f u n c t i o n ( )   { 
                     m o d u l e . v e r b o s e ( ' D e s t r o y i n g   p r e v i o u s   i n s t a n c e   o f   v i d e o ' ) ; 
                     $ m o d u l e 
                         . r e m o v e D a t a ( m o d u l e N a m e s p a c e ) 
                         . o f f ( e v e n t N a m e s p a c e ) 
                     ; 
                     $ p l a c e h o l d e r 
                         . o f f ( e v e n t N a m e s p a c e ) 
                     ; 
                     $ p l a y B u t t o n 
                         . o f f ( e v e n t N a m e s p a c e ) 
                     ; 
                 } , 
 
                 / /   s e t s   n e w   v i d e o 
                 c h a n g e :   f u n c t i o n ( s o u r c e ,   i d ,   u r l )   { 
                     m o d u l e . d e b u g ( ' C h a n g i n g   v i d e o   t o   ' ,   s o u r c e ,   i d ,   u r l ) ; 
                     $ m o d u l e 
                         . d a t a ( m e t a d a t a . s o u r c e ,   s o u r c e ) 
                         . d a t a ( m e t a d a t a . i d ,   i d ) 
                         . d a t a ( m e t a d a t a . u r l ,   u r l ) 
                     ; 
                     s e t t i n g s . o n C h a n g e ( ) ; 
                 } , 
 
                 / /   c l e a r s   v i d e o   e m b e d 
                 r e s e t :   f u n c t i o n ( )   { 
                     m o d u l e . d e b u g ( ' C l e a r i n g   v i d e o   e m b e d   a n d   s h o w i n g   p l a c e h o l d e r ' ) ; 
                     $ m o d u l e 
                         . r e m o v e C l a s s ( c l a s s N a m e . a c t i v e ) 
                     ; 
                     $ e m b e d 
                         . h t m l ( '   ' ) 
                     ; 
                     $ p l a c e h o l d e r 
                         . s h o w ( ) 
                     ; 
                     s e t t i n g s . o n R e s e t ( ) ; 
                 } , 
 
                 / /   p l a y s   c u r r e n t   v i d e o 
                 p l a y :   f u n c t i o n ( )   { 
                     m o d u l e . d e b u g ( ' P l a y i n g   v i d e o ' ) ; 
                     v a r 
                         s o u r c e   =   $ m o d u l e . d a t a ( m e t a d a t a . s o u r c e )   | |   f a l s e , 
                         u r l         =   $ m o d u l e . d a t a ( m e t a d a t a . u r l )         | |   f a l s e , 
                         i d           =   $ m o d u l e . d a t a ( m e t a d a t a . i d )           | |   f a l s e 
                     ; 
                     $ e m b e d 
                         . h t m l (   m o d u l e . g e n e r a t e . h t m l ( s o u r c e ,   i d ,   u r l )   ) 
                     ; 
                     $ m o d u l e 
                         . a d d C l a s s ( c l a s s N a m e . a c t i v e ) 
                     ; 
                     s e t t i n g s . o n P l a y ( ) ; 
                 } , 
 
                 g e n e r a t e :   { 
                     / /   g e n e r a t e s   i f r a m e   h t m l 
                     h t m l :   f u n c t i o n ( s o u r c e ,   i d ,   u r l )   { 
                         m o d u l e . d e b u g ( ' G e n e r a t i n g   e m b e d   h t m l ' ) ; 
                         v a r 
                             w i d t h   =   ( s e t t i n g s . w i d t h   = =   ' a u t o ' ) 
                                 ?   $ m o d u l e . w i d t h ( ) 
                                 :   s e t t i n g s . w i d t h , 
                             h e i g h t   =   ( s e t t i n g s . h e i g h t   = =   ' a u t o ' ) 
                                 ?   $ m o d u l e . h e i g h t ( ) 
                                 :   s e t t i n g s . h e i g h t , 
                             h t m l 
                         ; 
                         i f ( s o u r c e   & &   i d )   { 
                             i f ( s o u r c e   = =   ' v i m e o ' )   { 
                                 h t m l   =   ' ' 
                                     +   ' < i f r a m e   s r c = " h t t p : / / p l a y e r . v i m e o . c o m / v i d e o / '   +   i d   +   ' ? = '   +   m o d u l e . g e n e r a t e . u r l ( s o u r c e )   +   ' " ' 
                                     +   '   w i d t h = " '   +   w i d t h   +   ' "   h e i g h t = " '   +   h e i g h t   +   ' " ' 
                                     +   '   f r a m e b o r d e r = " 0 "   w e b k i t A l l o w F u l l S c r e e n   m o z a l l o w f u l l s c r e e n   a l l o w F u l l S c r e e n > < / i f r a m e > ' 
                                 ; 
                             } 
                             e l s e   i f ( s o u r c e   = =   ' y o u t u b e ' )   { 
                                 h t m l   =   ' ' 
                                     +   ' < i f r a m e   s r c = " h t t p : / / w w w . y o u t u b e . c o m / e m b e d / '   +   i d   +   ' ? = '   +   m o d u l e . g e n e r a t e . u r l ( s o u r c e )   +   ' " ' 
                                     +   '   w i d t h = " '   +   w i d t h   +   ' "   h e i g h t = " '   +   h e i g h t   +   ' " ' 
                                     +   '   f r a m e b o r d e r = " 0 "   w e b k i t A l l o w F u l l S c r e e n   m o z a l l o w f u l l s c r e e n   a l l o w F u l l S c r e e n > < / i f r a m e > ' 
                                 ; 
                             } 
                         } 
                         e l s e   i f ( u r l )   { 
                             h t m l   =   ' ' 
                                 +   ' < i f r a m e   s r c = " '   +   u r l   +   ' " ' 
                                 +   '   w i d t h = " '   +   w i d t h   +   ' "   h e i g h t = " '   +   h e i g h t   +   ' " ' 
                                 +   '   f r a m e b o r d e r = " 0 "   w e b k i t A l l o w F u l l S c r e e n   m o z a l l o w f u l l s c r e e n   a l l o w F u l l S c r e e n > < / i f r a m e > ' 
                             ; 
                         } 
                         e l s e   { 
                             m o d u l e . e r r o r ( e r r o r . n o V i d e o ) ; 
                         } 
                         r e t u r n   h t m l ; 
                     } , 
 
                     / /   g e n e r a t e   u r l   p a r a m e t e r s 
                     u r l :   f u n c t i o n ( s o u r c e )   { 
                         v a r 
                             a p i             =   ( s e t t i n g s . a p i ) 
                                 ?   1 
                                 :   0 , 
                             a u t o p l a y   =   ( s e t t i n g s . a u t o p l a y ) 
                                 ?   1 
                                 :   0 , 
                             h d               =   ( s e t t i n g s . h d ) 
                                 ?   1 
                                 :   0 , 
                             s h o w U I       =   ( s e t t i n g s . s h o w U I ) 
                                 ?   1 
                                 :   0 , 
                             / /   o p p o s i t e   u s e d   f o r   s o m e   p a r a m s 
                             h i d e U I       =   ! ( s e t t i n g s . s h o w U I ) 
                                 ?   1 
                                 :   0 , 
                             u r l   =   ' ' 
                         ; 
                         i f ( s o u r c e   = =   ' v i m e o ' )   { 
                             u r l   =   ' ' 
                                 +             ' a p i = '             +   a p i 
                                 +   ' & a m p ; t i t l e = '         +   s h o w U I 
                                 +   ' & a m p ; b y l i n e = '       +   s h o w U I 
                                 +   ' & a m p ; p o r t r a i t = '   +   s h o w U I 
                                 +   ' & a m p ; a u t o p l a y = '   +   a u t o p l a y 
                             ; 
                             i f ( s e t t i n g s . c o l o r )   { 
                                 u r l   + =   ' & a m p ; c o l o r = '   +   s e t t i n g s . c o l o r ; 
                             } 
                         } 
                         i f ( s o u r c e   = =   ' u s t r e a m ' )   { 
                             u r l   =   ' ' 
                                 +   ' a u t o p l a y = '   +   a u t o p l a y 
                             ; 
                             i f ( s e t t i n g s . c o l o r )   { 
                                 u r l   + =   ' & a m p ; c o l o r = '   +   s e t t i n g s . c o l o r ; 
                             } 
                         } 
                         e l s e   i f ( s o u r c e   = =   ' y o u t u b e ' )   { 
                             u r l   =   ' ' 
                                 +             ' e n a b l e j s a p i = '   +   a p i 
                                 +   ' & a m p ; a u t o p l a y = '         +   a u t o p l a y 
                                 +   ' & a m p ; a u t o h i d e = '         +   h i d e U I 
                                 +   ' & a m p ; h q = '                     +   h d 
                                 +   ' & a m p ; m o d e s t b r a n d i n g = 1 ' 
                             ; 
                             i f ( s e t t i n g s . c o l o r )   { 
                                 u r l   + =   ' & a m p ; c o l o r = '   +   s e t t i n g s . c o l o r ; 
                             } 
                         } 
                         r e t u r n   u r l ; 
                     } 
                 } , 
 
                 s e t t i n g :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                     i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                         $ . e x t e n d ( t r u e ,   s e t t i n g s ,   n a m e ) ; 
                     } 
                     e l s e   i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                         s e t t i n g s [ n a m e ]   =   v a l u e ; 
                     } 
                     e l s e   { 
                         r e t u r n   s e t t i n g s [ n a m e ] ; 
                     } 
                 } , 
                 i n t e r n a l :   f u n c t i o n ( n a m e ,   v a l u e )   { 
                     i f (   $ . i s P l a i n O b j e c t ( n a m e )   )   { 
                         $ . e x t e n d ( t r u e ,   m o d u l e ,   n a m e ) ; 
                     } 
                     e l s e   i f ( v a l u e   ! = =   u n d e f i n e d )   { 
                         m o d u l e [ n a m e ]   =   v a l u e ; 
                     } 
                     e l s e   { 
                         r e t u r n   m o d u l e [ n a m e ] ; 
                     } 
                 } , 
                 d e b u g :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . d e b u g )   { 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . d e b u g   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                             m o d u l e . d e b u g . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                         } 
                     } 
                 } , 
                 v e r b o s e :   f u n c t i o n ( )   { 
                     i f ( s e t t i n g s . v e r b o s e   & &   s e t t i n g s . d e b u g )   { 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             m o d u l e . p e r f o r m a n c e . l o g ( a r g u m e n t s ) ; 
                         } 
                         e l s e   { 
                             m o d u l e . v e r b o s e   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . i n f o ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                             m o d u l e . v e r b o s e . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                         } 
                     } 
                 } , 
                 e r r o r :   f u n c t i o n ( )   { 
                     m o d u l e . e r r o r   =   F u n c t i o n . p r o t o t y p e . b i n d . c a l l ( c o n s o l e . e r r o r ,   c o n s o l e ,   s e t t i n g s . n a m e   +   ' : ' ) ; 
                     m o d u l e . e r r o r . a p p l y ( c o n s o l e ,   a r g u m e n t s ) ; 
                 } , 
                 p e r f o r m a n c e :   { 
                     l o g :   f u n c t i o n ( m e s s a g e )   { 
                         v a r 
                             c u r r e n t T i m e , 
                             e x e c u t i o n T i m e , 
                             p r e v i o u s T i m e 
                         ; 
                         i f ( s e t t i n g s . p e r f o r m a n c e )   { 
                             c u r r e n t T i m e       =   n e w   D a t e ( ) . g e t T i m e ( ) ; 
                             p r e v i o u s T i m e     =   t i m e   | |   c u r r e n t T i m e ; 
                             e x e c u t i o n T i m e   =   c u r r e n t T i m e   -   p r e v i o u s T i m e ; 
                             t i m e                     =   c u r r e n t T i m e ; 
                             p e r f o r m a n c e . p u s h ( { 
                                 ' E l e m e n t '                 :   e l e m e n t , 
                                 ' N a m e '                       :   m e s s a g e [ 0 ] , 
                                 ' A r g u m e n t s '             :   [ ] . s l i c e . c a l l ( m e s s a g e ,   1 )   | |   ' ' , 
                                 ' E x e c u t i o n   T i m e '   :   e x e c u t i o n T i m e 
                             } ) ; 
                         } 
                         c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                         m o d u l e . p e r f o r m a n c e . t i m e r   =   s e t T i m e o u t ( m o d u l e . p e r f o r m a n c e . d i s p l a y ,   1 0 0 ) ; 
                     } , 
                     d i s p l a y :   f u n c t i o n ( )   { 
                         v a r 
                             t i t l e   =   s e t t i n g s . n a m e   +   ' : ' , 
                             t o t a l T i m e   =   0 
                         ; 
                         t i m e   =   f a l s e ; 
                         c l e a r T i m e o u t ( m o d u l e . p e r f o r m a n c e . t i m e r ) ; 
                         $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                             t o t a l T i m e   + =   d a t a [ ' E x e c u t i o n   T i m e ' ] ; 
                         } ) ; 
                         t i t l e   + =   '   '   +   t o t a l T i m e   +   ' m s ' ; 
                         i f ( m o d u l e S e l e c t o r )   { 
                             t i t l e   + =   '   \ ' '   +   m o d u l e S e l e c t o r   +   ' \ ' ' ; 
                         } 
                         i f ( $ a l l M o d u l e s . s i z e ( )   >   1 )   { 
                             t i t l e   + =   '   '   +   ' ( '   +   $ a l l M o d u l e s . s i z e ( )   +   ' ) ' ; 
                         } 
                         i f (   ( c o n s o l e . g r o u p   ! = =   u n d e f i n e d   | |   c o n s o l e . t a b l e   ! = =   u n d e f i n e d )   & &   p e r f o r m a n c e . l e n g t h   >   0 )   { 
                             c o n s o l e . g r o u p C o l l a p s e d ( t i t l e ) ; 
                             i f ( c o n s o l e . t a b l e )   { 
                                 c o n s o l e . t a b l e ( p e r f o r m a n c e ) ; 
                             } 
                             e l s e   { 
                                 $ . e a c h ( p e r f o r m a n c e ,   f u n c t i o n ( i n d e x ,   d a t a )   { 
                                     c o n s o l e . l o g ( d a t a [ ' N a m e ' ]   +   ' :   '   +   d a t a [ ' E x e c u t i o n   T i m e ' ] + ' m s ' ) ; 
                                 } ) ; 
                             } 
                             c o n s o l e . g r o u p E n d ( ) ; 
                         } 
                         p e r f o r m a n c e   =   [ ] ; 
                     } 
                 } , 
                 i n v o k e :   f u n c t i o n ( q u e r y ,   p a s s e d A r g u m e n t s ,   c o n t e x t )   { 
                     v a r 
                         o b j e c t   =   i n s t a n c e , 
                         m a x D e p t h , 
                         f o u n d , 
                         r e s p o n s e 
                     ; 
                     p a s s e d A r g u m e n t s   =   p a s s e d A r g u m e n t s   | |   q u e r y A r g u m e n t s ; 
                     c o n t e x t                   =   e l e m e n t                   | |   c o n t e x t ; 
                     i f ( t y p e o f   q u e r y   = =   ' s t r i n g '   & &   o b j e c t   ! = =   u n d e f i n e d )   { 
                         q u e r y         =   q u e r y . s p l i t ( / [ \ .   ] / ) ; 
                         m a x D e p t h   =   q u e r y . l e n g t h   -   1 ; 
                         $ . e a c h ( q u e r y ,   f u n c t i o n ( d e p t h ,   v a l u e )   { 
                             v a r   c a m e l C a s e V a l u e   =   ( d e p t h   ! =   m a x D e p t h ) 
                                 ?   v a l u e   +   q u e r y [ d e p t h   +   1 ] . c h a r A t ( 0 ) . t o U p p e r C a s e ( )   +   q u e r y [ d e p t h   +   1 ] . s l i c e ( 1 ) 
                                 :   q u e r y 
                             ; 
                             i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ c a m e l C a s e V a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                                 o b j e c t   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                             } 
                             e l s e   i f (   o b j e c t [ c a m e l C a s e V a l u e ]   ! = =   u n d e f i n e d   )   { 
                                 f o u n d   =   o b j e c t [ c a m e l C a s e V a l u e ] ; 
                                 r e t u r n   f a l s e ; 
                             } 
                             e l s e   i f (   $ . i s P l a i n O b j e c t (   o b j e c t [ v a l u e ]   )   & &   ( d e p t h   ! =   m a x D e p t h )   )   { 
                                 o b j e c t   =   o b j e c t [ v a l u e ] ; 
                             } 
                             e l s e   i f (   o b j e c t [ v a l u e ]   ! = =   u n d e f i n e d   )   { 
                                 f o u n d   =   o b j e c t [ v a l u e ] ; 
                                 r e t u r n   f a l s e ; 
                             } 
                             e l s e   { 
                                 r e t u r n   f a l s e ; 
                             } 
                         } ) ; 
                     } 
                     i f   (   $ . i s F u n c t i o n (   f o u n d   )   )   { 
                         r e s p o n s e   =   f o u n d . a p p l y ( c o n t e x t ,   p a s s e d A r g u m e n t s ) ; 
                     } 
                     e l s e   i f ( f o u n d   ! = =   u n d e f i n e d )   { 
                         r e s p o n s e   =   f o u n d ; 
                     } 
                     i f ( $ . i s A r r a y ( r e t u r n e d V a l u e ) )   { 
                         r e t u r n e d V a l u e . p u s h ( r e s p o n s e ) ; 
                     } 
                     e l s e   i f ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d )   { 
                         r e t u r n e d V a l u e   =   [ r e t u r n e d V a l u e ,   r e s p o n s e ] ; 
                     } 
                     e l s e   i f ( r e s p o n s e   ! = =   u n d e f i n e d )   { 
                         r e t u r n e d V a l u e   =   r e s p o n s e ; 
                     } 
                     r e t u r n   f o u n d ; 
                 } 
             } ; 
 
             i f ( m e t h o d I n v o k e d )   { 
                 i f ( i n s t a n c e   = = =   u n d e f i n e d )   { 
                     m o d u l e . i n i t i a l i z e ( ) ; 
                 } 
                 m o d u l e . i n v o k e ( q u e r y ) ; 
             } 
             e l s e   { 
                 i f ( i n s t a n c e   ! = =   u n d e f i n e d )   { 
                     m o d u l e . d e s t r o y ( ) ; 
                 } 
                 m o d u l e . i n i t i a l i z e ( ) ; 
             } 
         } ) 
     ; 
     r e t u r n   ( r e t u r n e d V a l u e   ! = =   u n d e f i n e d ) 
         ?   r e t u r n e d V a l u e 
         :   t h i s 
     ; 
 } ; 
 
 $ . f n . v i d e o . s e t t i n g s   =   { 
 
     n a m e                 :   ' V i d e o ' , 
     n a m e s p a c e       :   ' v i d e o ' , 
 
     d e b u g               :   f a l s e , 
     v e r b o s e           :   t r u e , 
     p e r f o r m a n c e   :   t r u e , 
 
     m e t a d a t a         :   { 
         s o u r c e   :   ' s o u r c e ' , 
         i d           :   ' i d ' , 
         u r l         :   ' u r l ' 
     } , 
 
     o n P l a y       :   f u n c t i o n ( ) { } , 
     o n R e s e t     :   f u n c t i o n ( ) { } , 
     o n C h a n g e   :   f u n c t i o n ( ) { } , 
 
     / /   c a l l b a c k s   n o t   c o d e d   y e t   ( n e e d s   t o   u s e   j s a p i ) 
     o n P a u s e     :   f u n c t i o n ( )   { } , 
     o n S t o p       :   f u n c t i o n ( )   { } , 
 
     w i d t h         :   ' a u t o ' , 
     h e i g h t       :   ' a u t o ' , 
 
     a u t o p l a y   :   f a l s e , 
     c o l o r         :   ' # 4 4 2 3 5 9 ' , 
     h d               :   t r u e , 
     s h o w U I       :   f a l s e , 
     a p i             :   t r u e , 
 
     e r r o r             :   { 
         n o V i d e o           :   ' N o   v i d e o   s p e c i f i e d ' , 
         m e t h o d             :   ' T h e   m e t h o d   y o u   c a l l e d   i s   n o t   d e f i n e d ' 
     } , 
 
     c l a s s N a m e       :   { 
         a c t i v e             :   ' a c t i v e ' 
     } , 
 
     s e l e c t o r         :   { 
         e m b e d               :   ' . e m b e d ' , 
         p l a c e h o l d e r   :   ' . p l a c e h o l d e r ' , 
         p l a y B u t t o n     :   ' . p l a y ' 
     } 
 } ; 
 
 
 } ) (   j Q u e r y ,   w i n d o w   ,   d o c u m e n t   ) ; 
    1       https://www.campusinteraction.com/js/semantic.js     g     g                                  Q              Q              Q              Q              Q              Q              Q              Q              Q	              Q
              Q              Q              Q              Q              Q              Q              Q              Q              Q   '  3 5 3 B  B % 
 % 
  
   O   \  \  ?  K & K 2 E 2 R  R  7  D "6 D "B %I "B %U 'K %U 'X * 'X * -@ * -L / -L /    jQuery   window   document!!            +H!!        C          k       
                  
              1     1                    G   5        6   Q   5    5   [   =   ]   =   ]   B]   C]   C]   C]   C]	   X]
   =   ]      ]      ]      ]   [   =   ]   ]   [   =   ]   ]   [   =   ]   =   ]   ]   6   Q      
   5   [	      ]    Q        fn   accordion   Accordion	   name   namespace   debug   verbose   performance   exclusive   collapsible   duration   easeInOutQuint   easing   onOpen   onClose   onChangeI   The method you called is not defined   method   error   active   className   .title   title   .content   content   selector   settings   extend!!      $   window   document   undefined       +H!!          $.fn.accordionb   /     /                  parameters    $allModules 	   time    performance    query    methodInvoked    queryArguments    returnedValue   B  >  .  6  .                 settings    className    selector    eventNamespace    moduleNamespace    moduleSelector    $module    $title    $content    element    instance    module    B  X  H  P  H  5             5    B  h    `    >             5    B          E             5    B          P             5    B  	  	    	  X       "       5   B  
  
  	  
  a       "       5   B   X    X  l      P       5    B q    i          P          $activeContent !   $previousContent    B  3    +       F          5    B             E          5 5   B   b    b                   $activeContent   B    K    K     A          5 5   B ~    v          @       5   B               P       5    B  /    '          A       5   B                A       5   B  5    -                 5    B 	  "    "               5   B  :"  &  2"  &       `          totalTime    B #  j#  #  j#  !  (          5    B 5%  %  -%  %  .  ,          5 5   B 8&  -  0&  -  7               query    object    maxDepth    found    B (  o+  '  o+  C  "   `       5555!!          onOpenB  0   0  0   0              5 !!          onCloseB  :0  >0  20  >0              5!!          onChangeB  X0  \0  P0  \0              5 !!       !!   method!!    !!       !!   active!!    !!       !!   title!!!!   content!!    !!       !!	   name!!!!   namespace!!!!   debug!!!!   verbose!!!!   performance!!!!   exclusive!!!!   collapsible!!!!   duration!!!!   easing!!!!   onOpen!!!!   onClose!!!!   onChange!!!!   error!!!!   className!!!!   selector!!    !!           easeInOutQuintB b1  1  Y1  1              5 !!       !!   easeInOutQuint!!    ;5!!       C       9                            
           2  R  2  R                   G      5        6   6   Q   5       6   Q   5   [   =   ]   =   ]   C]   C]   C]   [   ]      ]	      ]
      ]      ]      ]   B]   [   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]	   =    ]!   ]   [	   ="   ]"   =   ]   ]#   [
   =$   ]$   =%   ]%   =&   ]&   ]'      ](   B]$   B])   B]*   B]+   B],   =-   ].   [   ]/   =0   ]1   C]2   X ]3   X]4   65   Q   5    5   [   =6   ]7   B]8   B],   65   Q      fn   api   apiButton   API	   name   namespace   debug   verbose   performance   beforeSend   beforeXHR   success   complete   failure   progressM   API action used but no url was defined   missingActionI   URL not specified for the API action   missingURLI   Missing an essential URL parameter: !   missingParameter-   Your request timed out   timeoutI   There was an error with your request   errorO   There was an error parsing your request   parseError]   JSON could not be parsed during error handling   JSONParse-   Server gave an error:    statusMessagea   The before send function has aborted the requestQ   API Request Aborted. Exit conditions met   exitConditions   loading   className   action   promise   xhr   metadata   regExpTemplate   url   urlData   serializeForm   stateContext   get   method	   data	   json   dataType   cache   loadingLength   errorLength   settings'   .disabled, .loading   filter   context!!      $   window   document   undefined       +H!!          $.fn.apib 2  t  2  t       3         settings    $context    $module    element 	   time    performance    moduleSelector    className    metadata    error    instance    queryArguments    module    returnedValue    B  7  kU  7  kU          
       loadingTimer    loadingDelay    promise    B  <  =  <  =               5   B =  A  =  A       `       5   B )A  TI  !A  TI  -              B  YG  G  QG  G  P  '          5 5   B  I  I  I  I  b            5    B  I  I  I  I  c            5    B  J  "J  J  "J  d            5    B  K  O  K  O  t               B qL  M  iL  M  x  >           5   B N  TO  M  TO    7           55   B  7P  kQ  /P  kQ              5    B Q  jR  Q  jR       2          response    context   B  Q  CR  Q  CR    !          5 5   B R  T  ~R  T       r          xhr    status    httpMessage    context   B  qS  S  iS  S    #          5 55   B  U  U  U  U              5    B  V  X  V  X       P       5    B X  ^  X  ^       `          url    urlData    urlVariables   B Y  V^  Y  V^    +   @       55   B  ^  _  ^  _              5    B _  `  _  `       @       5   B `  a  `  a       @       5   B  a  8c  a  8c  #     A       5   B  Qc  d  Ic  d  .     A       5   B  d  ge  d  ge  9            5    B e  h  e  h  >             5   B  h  >l  h  >l  S     `          totalTime    B li  i  di  i  Z  &          5    B mk  k  ek  k  g  *          5 5   B ^l  Ts  Vl  Ts  p               query    object    maxDepth    found    B n  Qq  	n  Qq  |      `       555!!          $.fn.apiButtonb t  y  t  y       "          parameters   B  #u  cy  u  cy       R          $module    selector    settings    module   B  w  wx  w  wx       0       5    B  x  3y  x  3y       "       555!!            !!          beforeSendB Ez  nz  =z  nz              5 !!          beforeXHRB z  z  z  z              5!!          successB z  z  z  z              5!!          completeB z  z  z  z              5 !!          failureB  {  {  z  {              5!!    
   !!   missingAction!!!!   missingURL!!!!!   missingParameter!!!!   timeout!!!!   error!!!!   parseError!!!!   JSONParse!!!!   statusMessage!!!!   beforeSend!!!!   exitConditions!!    !!       !!   loading!!!!   error!!    !!       !!   action!!!!   promise!!!!   xhr!!    !!   \{\$([A-z]+)\}   !!            !!       !!	   name!!!!   namespace!!!!   debug!!!!   verbose!!!!   performance!!!!   api!!!!   beforeSend!!!!   beforeXHR!!!!   success!!!!   complete!!!!   failure!!!!   progress!!!!   error!!!!   className!!!!   metadata!!!!   regExpTemplate!!!!   action!!!!   url!!!!   urlData!!!!   serializeForm!!!!   stateContext!!!!   method!!!!	   data!!!!   dataType!!!!   cache!!!!   loadingLength!!!!   errorLength!!    !!       !!   filter!!!!   context!!!!   stateContext!!    ;5!!       C           R                                    7    .    3                 G   5        6   Q   5    5   [   =   ]   C]   =   ]      ]   C]   [   ]   [   =	   ]	   =   ]   ]
   [   =   ]   =   ]   =   ]   =   ]   =   ]   ]   6   Q  5    fn   colorize   Image Colorizer	   name   debug   namespace   onDraw   async   colors   image   metadata5   No tracing image specified   noImage9   No default colors specified.   undefinedColors[   Attempted to change color that does not exist   missingColorG   Blend onto plug-in must be included   missingPlugin   The width or height of image canvas could not be automatically determined. Please specify a height.   undefinedHeight   error   settings!!      $   window   document   undefined       +H!!          $.fn.colorizeb w    o    5     3          settings    moduleArguments    B H  t  @  t  <     R         instanceIndex    $module    mainCanvas    imageCanvas    overlayCanvas    backgroundImage    mainContext    imageContext    overlayContext    image    imageName    width    height    colors    namespace    error    instance    module   B  O  S  G  S  _  &           5   B o    g    i     0       5    B  :    2    r             5   B  ,  7  $  7  }               B            #             B  A    9      *          5 55   B  T  5  L  5                 B    '    '    !          5 5   B g    _                 5   B                      5    B   V    V              5    B  s    k                 5   B              @          callback   B  _  c  W  c    -          5    B    U    U    1          5 5   B                         B i    a      %          5 5   B   V    V       @       5   B q    i                5    B              1          method    B G    ?      )   0       5 555!!          onDrawB   N    N              5 !!            !!       !!   image!!!!	   name!!    !!       !!   noImage!!!!   undefinedColors!!!!   missingColor!!!!   missingPlugin!!!!   undefinedHeight!!    !!       !!	   name!!!!   debug!!!!   namespace!!!!   onDraw!!!!   async!!!!   colors!!!!   metadata!!!!   error!!    ;5 !!       C       7                                         q    q  B                 G   5        6   Q   5    5   [   =   ]   =   ]   C]   C]   C]   C]   =	   ]
   B]   X ]   C]   =   ]   X ]      ]      ]      ]      ]   [   =   ]   ]   [   =   ]   =   ]   =   ]   =   ]   =   ]   =    ]	   ]!   [   ="   ]"   =#   ]#   =$   ]$   =%   ]&   ]'   [   =(   ])   ]"   [   	   ]"   
   ]   ]*   [      ]+      ],      ]-      ].      ]/      ]0      ]1      ]2      ]3      ]4   ]5   66   Q            fn	   form	   Form	   name   namespace   debug   verbose   performance#   keyboardShortcuts   submit   on   inline   delay   revalidate   scale   transition   duration   onValid   onInvalid   onSuccess   onFailure   validate   metadata   .error.message   message/   input, textarea, select   field   .field   group   input   .prompt   prompt   .submit   selector   error   success	   down   ui label prompt   label   classNameK   The method you called is not defined.   method   templates   checked   empty   email   length   not   contains   is   maxLength   match   url   rules   settings!!      $   window   document   undefined       +H!!           $.fn.formb         D              $allModules    settings    validation    metadata    selector    className    eventNamespace    moduleNamespace    moduleSelector 	   time    performance    query    methodInvoked    queryArguments    returnedValue   B          _               $module    $field    $group    $message    $submit    formErrors    element    instance    module    B          q            5    B    |    |  w            5    B    P    P              5    B  l    d                5    B    u    u              5    B                         B  {    s                5 5   B                      5    B     
         2       5    B    F    F              5    B  b    Z         2       5    B               2          $field    B            2          5 5   B )    !         0       5    B   w    w       @       5   B              0          $field    rules   B           '           55   B         (     @       5   B ?  m  7  m  9     p       5    B   :    :  c            5    B s    k    l     P          $prompt   B    "    "  x  \          5    B          ~  6          5 5   B L    D         R          allValid    B   ~    ~    '           55   B V  V  N  V       p          field    fieldValid    fieldErrors    B U    M      *           55   B   X    X       0       5    B ~    v         @       5   B              @       5   B    .    .       A       5   B  I    A         A       5   B    {    {  
            5    B                      5   B    *    *  $     p          totalTime   B         +  (          5    B K    C    ;  ,          5 5   B N    F    D               query    object    maxDepth    found    B         P  "   `       5555!!          onValidB                      5!!          onInvalidB                      5!!          onSuccessB                      5!!          onFailureB  0  D  (  D              5!!       !!   validate!!    !!       !!   message!!!!   field!!!!   group!!!!   input!!!!   prompt!!!!   submit!!    !!       !!   error!!!!   success!!!!	   down!!!!   label!!    !!       !!   method!!    !!           errorB &                     	   html    B     {                5 5!!          promptB                     5 !!       !!   error!!!!   prompt!!    !!           checkedB                      5!!          emptyB   L     L              5!!          emailB a  X  Y  X              5!!          lengthB n    f                5 !!          notB   A    A              5!!          containsB Y    Q                5 !!          isB   '    '              5 !!          maxLengthB @    8                5!!          matchB              B       5 !!          urlB   f    f              5!!    
   !!   checked!!!!   empty!!!!   email!!!!   length!!!!   not!!!!   contains!!!!   is!!!!   maxLength!!!!   match!!!!   url!!    !!       !!	   name!!!!   namespace!!!!   debug!!!!   verbose!!!!   performance!!!!#   keyboardShortcuts!!!!   on!!!!   inline!!!!   delay!!!!   revalidate!!!!   transition!!!!   duration!!!!   onValid!!!!   onInvalid!!!!   onSuccess!!!!   onFailure!!!!   metadata!!!!   selector!!!!   className!!!!   error!!!!   templates!!!!   rules!!    ;5 !!       C       ,                                       T  N K  N %                 G   5        6   Q   5    5   [   =   ]   C]   C]   =   ]   C]      ]      ]	      ]
      ]      ]   C]   B]   X]   [   =   ]   =   ]   ]   B]   [   =   ]   ]   [   =   ]   =   ]   ]   [	   =   ]   =   ]   =   ]   =   ]   =    ]    ]!   [
   B]   ]"   [   [   C]   C]   C]   B]    B]   ]#   [   C]   B]   C]   C]   C]    ]$   ]%   [   C]   C]   C]   B]    B]   ]&   [   B]'   B]   B]   B](   B])   B]*   ]   6+   Q 
 
    fn   state   State	   name   debug   verbose   namespace   performance   onActivate   onDeactivate   onChange   activateTest   deactivateTest   automatic	   sync   flashDuration'   .loading, .disabled	   text   .disabled   active   filter   contextK   The method you called is not defined.   method   error   promise   stored-text   storedText   metadata   focus   hover	   down   loading   className   selector   input   button   defaults   states   flash   inactive   enable   disable   settings!!      $   window   document   undefined       +H!!          $.fn.stateb   G   G '              parameters    $allModules    settings    moduleSelector 	   time    performance    query    methodInvoked    queryArguments    metadata    className    states 	   text    eventNamespace    moduleNamespace    returnedValue   B    CG   CG D        ,       $module    element    instance    module    B  `  &
 X  &
 O            5   B  F
 
 >
 
             5    B                  5    B   O  O             5    B  } g u g                 userStates   B S Y K Y   .           55   B                  5    B   I  I             5    B  g  _              5    B                  5    B  ;  3              5    B                  5    B  D  <              5    B                  5    B  m  m             5    B                 5    B  I  I             5    B w  o               5   B  ) h ! h             5    B    {              5    B                  5    B T  L               5   B  	 K  K             5    B  f  ^              5    B                  5    B  <  4  	     @       5   B  T  T 	     P          apiRequest    B  
 H  H 	     0          B      	  4          5    B      	  4          5    B      "	  4          5    B      #	  4          5 5   B      +	  .          5    B  * = " = ,	  .          5 5   B   S  S 3	     @       5   B  n " f " B	            5   B  # T$ # T$ ]	             5   B  s$ % k$ % h	             5   B  % ,' % ,' s	     0       5    B  V' ' N' ' 	            5    B ( V( ( V( 	            5    B ( @* ( @* 	                previousText   B  ) (* ) (* 	            5 5   B  * - * - 	     @       5   B U- 0 M- 0 	     P       5    B ?0 1 70 1 	     P       5    B 1 43 1 43 	     P       5    B  M3 4 E3 4 	     A       5   B  4 :6 4 :6 	     A       5   B  S6 6 K6 6 	            5    B '7 ;: 7 ;: 
             5   B  X: > P: > 
     p          totalTime   B 8; ; 0; ; 
  (          5    B = :> = :> /
  ,          5 5   B > (F > (F 8
               query    object    maxDepth    found    B @ D @ D D
  "   `       5555!!          onActivateB  H H H H 
            5 !!          onDeactivateB  H H H H 
            5 !!          onChangeB  I I I I 
            5 !!          activateTestB  VI iI NI iI 
            5 !!          deactivateTestB  I I ~I I 
            5 !!       !!	   text!!!!   active!!    !!       !!   method!!    !!       !!   promise!!!!   storedText!!    !!       !!   focus!!!!   hover!!!!	   down!!!!   active!!!!   loading!!    !!       !!	   text!!    !!       !!   hover!!!!   focus!!!!	   down!!!!   loading!!!!   active!!    !!       !!   hover!!!!   focus!!!!	   down!!!!   active!!!!   loading!!    !!       !!   input!!!!   button!!    !!       !!   hover!!!!   focus!!!!	   down!!!!   loading!!!!   active!!    !!       !!   flash!!!!   hover!!!!   active!!!!   inactive!!!!   enable!!!!   disable!!    !!       !!	   name!!!!   debug!!!!   verbose!!!!   namespace!!!!   performance!!!!   onActivate!!!!   onDeactivate!!!!   onChange!!!!   activateTest!!!!   deactivateTest!!!!   automatic!!!!	   sync!!!!   flashDuration!!!!   filter!!!!   context!!!!   error!!!!   metadata!!!!   className!!!!   selector!!!!   defaults!!!!   states!!!!	   text!!    ;5!!       C       >                                       O  O  
                 G   5        6   Q   5    5   [   =   ]   B]   =   ]   =   ]      ]	      ]
      ]      ]   [   ]   B]   C]   C]   X,]   =   ]   X']   [   B]   B]   ]   [   =   ]   =   ]   =   ]   =   ]   ]   [   =    ]    =!   ]!   ="   ]"   =#   ]#   =$   ]$   ]%   [	   =&   ]   ='   ](   =)   ]*   =+   ],   =-   ].   =/   ]0   =1   ]   =2   ]3   =4   ]5   =6   ]7   ]8   [   
   ]      ]9      ]      ]:      ];      ].   ]<   6=   Q D         fn   chatroom	   Chat	   name   debug	   chat   namespace   present-chat   channel   onJoin   onMessage   onExpand   onContract   customEvents   partingMessages   userCount   randomColor   speed   easeOutQuint   easing   scrollArea   message   authentication   endpointI   The method you called is not defined   methodi   Please define a message and authentication endpoint.U   You must specify a pusher key and channel.   keyI   You must include the Pusher library.   pusher   error   expand   active   hover	   down   loading   className#   .actions .message+   .actions .list.button   userListButton/   .actions .expand.button   expandButton   .room	   room   .room .list   userList   .room .log   log'   .room .log .message5   .room log .message .author   author   .talk input   messageInput%   .talk .send.button   messageButton   selector   color   joined	   left   templates   settings!!      $   window   document   undefined       +H!!          $.fn.chatroomb  P  P  
               parameters    moduleSelector 	   time    performance    query    methodInvoked    queryArguments   B  Q  zQ                className 	   $log    loggedInUser    users    $userList    settings    $messageButton    $userListButton    namespace    $userCount    $module    element    count    instance    channel    message    error 	   html    $expandButton    module    pusher    height    $messageInput    B  kV ^ cV ^ <     @         B Z Z Z Z W  0          5 5   B  ^ V` ^ V` y             5   B  ` a ` a                B  a Ja a Ja   $          5 5   B b e b e      `       5   B f ~h e ~h      0       5    B h m h m                B 9i k 1i k   #   0       5 5   B  @m n 8m n             5    B  n p n p             5    B  p q p q              5   B  q :r q :r             5    B r t yr t              5   B ht cv `t cv +     0       5    B v w v w 9            5    B  w Tx w Tx C            5    B  qx y ix y K            5    B ^y z Vy z W             5   B &z z z z _             5   B  M{ ~} E{ ~} k             5   B  } > } >       0       5    B   f  f   "   @       5   B  @  @              5   B e  ]       P       5    B          @       5   B           A       5   B   o  o      A       5   B   $ ~ $             5    B P < H <              5   B  W  O       `          totalTime    B ) u ! u   &          5    B *  "  
  *          5 5   B          `          query    maxDepth    found   B           @       5555!!          onJoinB      L            5 !!          onMessageB      M            5!!          onExpandB      N            5 !!          onContractB      O            5 !!            !!       !!   message!!!!   authentication!!    !!       !!   method!!!!   endpoint!!!!   key!!!!   pusher!!    !!       !!   expand!!!!   active!!!!   hover!!!!	   down!!!!   loading!!    !!    
   !!   userCount!!!!   userListButton!!!!   expandButton!!!!	   room!!!!   userList!!!!   log!!!!   message!!!!   author!!!!   messageInput!!!!   messageButton!!    !!          userCountB 5 q - q             5!!          colorB                 5!!          messageB          P       5!!          joinedB  N  N             5 !!       	   leftB d  \              5 !!          userListB .  &       @       5!!       !!   userCount!!!!   color!!!!   message!!!!   joined!!!!	   left!!!!   userList!!    !!       !!	   name!!!!   debug!!!!   namespace!!!!   channel!!!!   onJoin!!!!   onMessage!!!!   onExpand!!!!   onContract!!!!   customEvents!!!!   partingMessages!!!!   userCount!!!!   randomColor!!!!   speed!!!!   easing!!!!   scrollArea!!!!   endpoint!!!!   error!!!!   className!!!!   selector!!!!   templates!!    ;5!!       C           V                                                          G   5        6   Q   5    5   [   =   ]   =   ]   B]   C]   C]   B]   =	   ]
      ]      ]      ]   [   =   ]   ]   [   =   ]   =   ]   ]   [   =   ]   ]   6   Q / O    fn   checkbox   Checkbox	   name   namespace   debug   verbose   performance   context	   auto   required   onChange   onEnable   onDisableK   The method you called is not defined.   method   errorO   input[type=checkbox], input[type=radio]   input   label   selector   radio   className   settings!!      $   window   document   undefined       +H!!    	      $.fn.checkboxc           F                                     #                    	W  QW  Q  V  : W   QV   5    D   Q=      Q   A,  R     
:     QZ       QV  >7   Q   '=      QZ    5      
V  ?l    QV      
     Q 	    I    	  
   V   )    selector   	   Date   getTime   string   slice	   call	   each!!      parameters   $allModules   moduleSelector	   time   performance   query   methodInvoked   queryArguments   returnedValue   arguments   .this      +H!!           $.fn.checkbox/<b   G  G               settings    className    eventNamespace    moduleNamespace    $module    $label    $input    selector    instance    element    module    B  U  M  )     0       5    B  =  5  >            5    B      F            5    B   +  + O            5    B  H  @  R            5    B      U            5    B  9  1  [            5    B      c            5    B  ' 0  0 m            5    B K W C W w     0       5    B r  j       @       5   B          @       5   B   "  "      A       5   B  =  5       A       5   B   o  o             5    B                  5   B           `          totalTime    B         (          5    B  >  >   ,          5 5   B  ,  ,                query    object    maxDepth    found    B       "   `       555;5!!          onChangeB      <            5 !!          onEnableB      =            5 !!          onDisableB      >            5!!       !!   method!!    !!       !!   input!!!!   label!!    !!       !!   radio!!    !!       !!	   name!!!!   namespace!!!!   debug!!!!   verbose!!!!   performance!!!!   context!!!!   required!!!!   onChange!!!!   onEnable!!!!   onDisable!!!!   error!!!!   selector!!!!   className!!    ;5 !!       C  U     %                                           \                 G   5        6   Q   5    5   [
   =   ]   =   ]   B]   C]   C]   =   ]	   C]
   B]   C]   [   X]   X]   ]      ]      ]      ]   [   =   ]   ]   [   =   ]   =   ]   =   ]   ]   [      ]   ]   [	   =   ]   =   ]   =   ]   =    ]    =!   ]"   =   ]   =   ]   =	   ]	   ]#   6$   Q m      fn   dimmer   Dimmer	   name   namespace   debug   verbose   performance	   fade   transition   useCSS   on   closable	   show	   hide   duration   onChange   onShow   onHideK   The method you called is not defined.   method   error   .ui.dimmable   dimmable   .ui.dimmerm   .ui.dimmer > .content, .ui.dimmer > .content > .center   content   selector   template   active   ui dimmable   dimmed   disabled	   page   pageDimmer   className   settings!!      $   window   document   undefined       +H!!           $.fn.dimmerb     ^               parameters    $allModules 	   time    performance    query    methodInvoked    queryArguments    returnedValue    B      m     "  )       settings    selector    className    eventNamespace    moduleNamespace    moduleSelector    clickEvent    $module    $dimmer    $dimmable    element    instance    module   B  f  ^       P       5    B   s 
 s      P       5    B   I  I             5    B  e { ] {             5    B                  5   B                  5   B   `  `             5    B  <  <      @          callback   B                  5    B          &          5    B        :          5 5   B V  N       @          callback   B                  5    B    w    &          5    B      $  8          5 5   B   = 	 = 0            5    B  [  S  3     @       5   B      A            5    B  R  J  G            5    B   "  " J            5    B  > ~ 6 ~ M            5    B      P            5    B   C  C S            5    B  a  Y  V            5    B      Y            5    B   W  W \            5    B  w  o  _            5    B   @  @ e            5    B  v $ n $ k            5    B  B  :  r            5    B      u            5    B   H  H x            5    B  f  ^  {            5    B   q  q             5    B                  5    B   5  5             5    B X K P K      0          B                  5 5   B d A \ A      0          B                  5 5   B  \ 0 T 0      0       5    B L ^ D ^      @       5   B z  r       @       5   B           A       5   B           A       5   B   I  I             5    B y  q               5   B           p          totalTime   B           (          5    B       ,          5 5   B  z  z                query    object    maxDepth    found    B  S	  S	 +  "   `       5555!!       !!	   show!!!!	   hide!!    !!          onChangeB  G K ? K             5 !!          onShowB  e i ] i             5 !!          onHideB    {              5 !!       !!   method!!    !!       !!   dimmable!!!!   dimmer!!!!   content!!    !!           dimmerB                  5 !!       !!   dimmer!!    !!       !!   active!!!!   dimmable!!!!   dimmed!!!!   disabled!!!!   pageDimmer!!!!	   hide!!!!	   show!!!!   transition!!    !!       !!	   name!!!!   namespace!!!!   debug!!!!   verbose!!!!   performance!!!!   transition!!!!   useCSS!!!!   on!!!!   closable!!!!   duration!!!!   onChange!!!!   onShow!!!!   onHide!!!!   error!!!!   selector!!!!   template!!!!   className!!    ;5!!       C       3                            
            i  i                  G   5        6   Q   5    5   [	   =   ]   =   ]   B]   C]   C]   =   ]	   =
   ]   [   X ]   X,]   2]   ]   =   ]   X ]      ]      ]      ]   [   =   ]   =   ]   =   ]   ]   [   =   ]   =   ]   =   ]   =   ]   ]   [   =    ]!   ="   ]#   =$   ]   =%   ]&   ]'   [   =(   ](   =)   ]*   =+   ]+   =,   ],   =-   ]-   ].   6/   Q   0   
   51   [   
   ]2    Q   8 8 ?    fn   dropdown   Dropdown	   name   namespace   debug   verbose   performance   click   on   activate   action	   show	   hide   touch   delay   slide down   transition   duration   onChange   onShow   onHidec   You called a dropdown action that was not definedK   The method you called is not defined.   methodM   The requested transition was not found   error   defaultText   defaultValue	   text   value   metadata   .menu	   menu   .menu > .item	   item   > .text-   > input[type="hidden"]   input   selector   active   default   placeholder   disabled   visible   selection   className   settings   extend   easing   easeOutQuad!!      $   window   document   undefined       +H!!           $.fn.dropdownb  |  |                parameters    $allModules    $document    moduleSelector    hasTouch 	   time    performance    query    methodInvoked    queryArguments    returnedValue    B   o|  o|      B  <       settings    className    metadata    selector    error    eventNamespace    moduleNamespace    $module    $item    $text    $input    $menu    element    instance    module   B  a  Y               5   B   V  V             5    B  r l j l             5    B                  5    B  =  5  	     @       5   B   u!  u! !             5   B  ! # ! # 0             5   B [# # S# # @             5   B $ % $ % E                event    B  J$ f% B$ f% F  5   0       5 5   B % & % & P            5    B M& ( E& ( W      B          $currentMenu    $otherMenus    B  ' r( ' r( ^  6          5 5   B ( * ( * g      2          $currentMenu    B  ) * ) * m  6          5 5   B * . * . t     b       	   text    value    B  , `- , `-   #          5 5   B  . . . .             5    B 3/ 1 +/ 1       @       5   B 1 3 1 3      0          B  O2 S2 G2 S2   +          5 5   B  3 3 3 3             5    B  4 24 3 24             5    B Q4 75 I4 75             5    B m5 S6 e5 S6             5    B 6 P7 6 P7             5    B 7 r8 7 r8             5    B  8 8 8 8             5    B  8 9 8 9             5    B 9 OA 9 OA                value    strict    $selectedItem   B  < @ < @      r       5 5   B  A A A A ,            5    B  B B 	B B 0            5    B  C YD C YD 7              5   B  D D D D D            5    B  E iE E iE H             5    B  E E E E K            5    B F F F F Q            5    B F H F H V     0       5    B  5H uH -H uH b            5    B  H H H H e            5    B H K H K h             5   B  K K K K             5    B  L ^L L ^L             5    B  L L L L             5    B L M L M             5    B M N M N             5    B N CO N CO             5    B  xO O pO O             5    B  O %P O %P             5    B ]P W UP W                callback   B  P P P P   +          5    B  ^U U VU U   9          5    B  V 1W V 1W   5          5 5   B W :_ W :_                callback   B  X X yX X   +          5    B  \ X] \ X]   7          5    B  2^ ^ *^ ^   (          5 5   B  ]_ a U_ a                B  *` ` "` `   (           55   B  !a b a b $     0       5    B  b c b c 1            5    B  c id c id 6            5    B  d he d he =            5    B  e Kf {e Kf F     0       5    B gf yg _f yg P     @       5   B g h g h [     @       5   B  h j h j f     A       5   B  2j k *j k q     A       5   B  k dl k dl |            5    B l o l o              5   B  o s o s      `          totalTime    B p p p p   (          5    B r 3s r 3s   ,          5 5   B s T{ s T{                query    object    maxDepth    found    B u -y u -y   "   `       5555!!       !!	   show!!!!	   hide!!!!   touch!!    !!           onChangeB ~ +~ ~ +~             5 !!          onShowB  B~ F~ :~ F~             5 !!          onHideB  ]~ a~ U~ a~             5 !!       !!   action!!!!   method!!!!   transition!!    !!       !!   defaultText!!!!   defaultValue!!!!	   text!!!!   value!!    !!       !!	   menu!!!!	   item!!!!	   text!!!!   input!!    !!       !!   active!!!!   placeholder!!!!   disabled!!!!   visible!!!!   selection!!    !!       !!	   name!!!!   namespace!!!!   debug!!!!   verbose!!!!   performance!!!!   on!!!!   action!!!!   delay!!!!   transition!!!!   duration!!!!   onChange!!!!   onShow!!!!   onHide!!!!   error!!!!   metadata!!!!   selector!!!!   className!!    !!           easeOutQuadB * ` ! ` 9            5!!       !!   easeOutQuad!!    ;5 !!       C  F     +                                       Q  H  K                 G   5        6   Q   5    5   [
   =   ]   =   ]   B]   C]   C]   C]   C]	   C]
   =   ]   X]   =   ]   >]   =   ]   ]      ]      ]      ]      ]      ]      ]   [   =   ]   =   ]   =   ]   =    ]   ]!   [   ="   ]#   =$   ]%   ]&   [	   ='   ]'   =(   ](   ])   6*   Q  &    fn   modal   Modal	   name   namespace   debug   verbose   performance   allowMultiple   detachable   closable	   body   context   duration   easeOutExpo   easing   offset   scale   transition   padding   onShow   onHide   onVisible   onHidden   onApprove   onDeny1   .close, .actions .button   closeg   .actions .positive, .actions .approve, .actions .ok   approvei   .actions .negative, .actions .deny, .actions .cancel	   deny   .ui.modal   selectory   UI Dimmer, a required component is not included in this page   dimmerK   The method you called is not defined.   method   error   active   scrolling   className   settings!!      $   window   document   undefined       +H!!          $.fn.modalb  t  t M               parameters    $allModules    $window    $document    $body 	   time    performance    query    methodInvoked    queryArguments +   requestAnimationFrame    returnedValue   B     _            5    B   "  " f     r  +       settings    selector    className    error    eventNamespace    moduleNamespace    moduleSelector    $module    $context    $close    $allModals    $otherModals    $focusedElement    $dimmable    $dimmer    element    instance    module    B           0       5    B   t  t             5    B                  5    B                  5    B          0       5    B                  5   B  Q  Q      @       5   B o  g              5    B           @       5   B                   5   B   ?  ?      0       5    B X  P  &               B      )            5 5   B ; Z 3 Z /               callback   B      2            5    B   M  M C  V          5    B  #    M  F          5 5   B  y g q g [     0       5    B   x  e               B      h            5 5   B   9  9 p     0          B   -  - {  +           55   B W  O       P          callback    B                  5    B   a  a   S          5    B        C          5 5   B  c  c                B  C G ; G             5 5   B   z                 B                  5 5   B        %          5    B   R  R             5    B                   5   B  I  A              5    B                    5   B   J  J   %          5    B  i  a              5    B                  5    B                   5    B  ;  3              5    B   C  C 	  !          5    B    w                5   B   -  -              5   B  L  D  %            5    B      )     0       5    B  4 ' , ' 3     0       5    B M _ E _ H     @       5   B {  s  S     @       5   B      ^     A       5   B      i     A       5   B   J  J t            5    B z  r  y             5   B           `          totalTime    B       (          5    B       ,          5 5   B                    query    object    maxDepth    found    B t  l    "   `       5555!!          onShowB                  5 !!          onHideB  . 2 & 2             5 !!          onVisibleB  O S G S             5!!          onHiddenB  o s g s             5 !!          onApproveB                  5!!          onDenyB                  5 !!       !!   close!!!!   approve!!!!	   deny!!!!   modal!!    !!       !!   dimmer!!!!   method!!    !!       !!   active!!!!   scrolling!!    !!       !!	   name!!!!   namespace!!!!   debug!!!!   verbose!!!!   performance!!!!   allowMultiple!!!!   detachable!!!!   closable!!!!   context!!!!   duration!!!!   easing!!!!   offset!!!!   transition!!!!   padding!!!!   onShow!!!!   onHide!!!!   onVisible!!!!   onHidden!!!!   onApprove!!!!   onDeny!!!!   selector!!!!   error!!!!   className!!    ;5 !!       C  2     (                                         }  2                 G   5        6   Q   5    5   [   =   ]   B]   C]   C]   =   ]   B]   >]	   [   =
   ]   =
   ]   ]   =   ]   ]   =   ]   =   ]   =   ]   B]   >]      ]   [   =   ]   =   ]   ]   [   =   ]   =   ]   ]   [   =    ]!   ]"   X]#   =$   ]%      ]&   6'   Q     fn   nag   Nag	   name   debug   verbose   performance   namespace   persist   displayTime   slide	   show	   hide   animation   fixed   position   scrollBarWidth   cookie   storageMethod   storedKey   dismiss   storedValue   sticky   lag   context   Neither $.cookie or store is defined. A storage solution is required for storing state   noStorageK   The method you called is not defined.   method   error   bottom   className   .icon.close   close   selector   speed   easeOutQuad   easing   onHide   settings!!      $   window   document   undefined       +H!!          $.fn.nagb  u  u 4               parameters    $allModules    moduleSelector 	   time    performance    query    methodInvoked    queryArguments    returnedValue    B  & $  $ B              settings    className    error    eventNamespace    moduleNamespace    $module    $close    $context    element    instance    moduleOffset    moduleHeight    contextWidth    contextHeight    contextOffset    yOffset    yPosition    timer    module +   requestAnimationFrame   B  4  4 h            5    B  k X c X l            5    B  t  l               5   B                  5    B   [  [      0       5    B  t  l       0       5    B                   5   B           0       5    B   m   m             5    B                  5   B           0       5    B           0       5    B     '     @       5   B     4     @       5   B   X  X E               B  s < k < I  '   0       5 5   B }  u  S     @       5   B     ^     P       5    B  .  &  l     A       5   B        w     A       5   B  4    ,                5    B                   5   B  9  1       p          totalTime   B  i  i   (          5    B       ,          5 5   B  	  	                query    object    maxDepth    found    B v
  n
    "   `       5555!!       !!	   show!!!!	   hide!!    !!       !!   noStorage!!!!   method!!    !!       !!   bottom!!!!   fixed!!    !!       !!   close!!    !!           onHideB   
  
 A            5 !!       !!	   name!!!!   debug!!!!   verbose!!!!   performance!!!!   namespace!!!!   persist!!!!   displayTime!!!!   animation!!!!   position!!!!   scrollBarWidth!!!!   storageMethod!!!!   storedKey!!!!   storedValue!!!!   sticky!!!!   lag!!!!   context!!!!   error!!!!   className!!!!   selector!!!!   speed!!!!   easing!!!!   onHide!!    ;5 !!       C       4          
                              ~  ~ R                 G   5        6   Q   5    5   [	   =   ]   B]   C]   C]   =   ]      ]      ]	      ]
   =   ]   B]   B]   B]   =   ]   B]   C]   =   ]   =   ]   X ]   B]   B]   X ]   =   ]   =   ]   >]    >]!   
]"   [   =#   ]   =$   ]%   =&   ]'   ](   [   =   ]   =   ]   =!   ]!   =   ]   =   ]   =   ]   ])   [   =*   ]*   =+   ]+   =,   ]   =-   ]   =.   ].   ]/   [   =0   ]   ]1      ]2   63   Q R     fn   popup   Popup	   name   debug   verbose   performance   namespace   onCreate   onShow   onHide      variation   content	   html   title   hover   on   target   closable	   body   context   top center   position   delay   inline   preserve   duration   easeOutQuint   easing   scale   transition   distanceAway   offset   maxSearchDepthG   Your popup has no content specifiedK   The method you called is not defined.   method   Popup attempted to reposition element to fit, but could not find an adequate position.   recursion   error   metadata   animating   loading   ui popup9   top left center bottom right   visible   className   .ui.popup   selector   template   settings!!      $   window   document   undefined       +H!!          $.fn.popupb - w % w T               parameters    $document    moduleSelector 	   time    performance    query    methodInvoked    queryArguments    returnedValue    B   w  w e     b  &       settings    selector    className    error    metadata    eventNamespace    moduleNamespace    $module    $context    $target    $window    $offsetParent    $popup    searchDepth    element    instance    module    B  n  f       @       5   B                      5    B    !   !      0       5    B  ! # ! #             5    B J# 
$ B# 
$                B  # # z# #   .           55   B  $$ $ $ $              5   B  $ 6% $ 6%              5   B  % * % *      `       5   B  ++ , #+ ,      0       5    B , G. , G.      0          B  , , , ,   )          5 5   B a. / Y. /                 B  . . . . !  )          5 5   B  / $0 / $0 ,            5    B G0 1 ?0 1 3      0       5    B  1 2 1 2 >     0       5    B  2 3 2 3 G            5    B  73 K4 /3 K4 O             5   B  4 5 4 5 Z             5   B 5 8 5 8 c     @          callback   B  5 5 5 5 d  +          5    B  7 7 7 7 j  T          5    B  )8 8 !8 8 s  D          5 5   B 9 ; 9 ; {     @          callback   B  D9 H9 <9 H9 |  +          5    B  L: : D: :   U          5    B  G; ; ?; ;   E          5 5   B  3< < +< <      0       5    B  = = = =      0       5    B  = FC = FC   $   0       #   offstagePositions   B -B B %B B   %           55   B hC F `C F               5   B G h\  G h\             5    B  \ A^ \ A^ u               B v] ^ n] ^ y  6          5 5   B  y^ p_ q^ p_              5   B  _ ` _ `             5    B  ,` f` $` f`             5    B  ` ` z` `             5    B  ` a ` a              5   B a b a b      @       5   B b c b c      @       5   B  d be c be      A       5   B  }e f ue f      A       5   B  g g g g             5    B g j g j              5   B  k n k n      `          totalTime    B k @l k @l   (          5    B n ~n n ~n   ,          5 5   B o lv o lv                query    object    maxDepth    found    B p Et p Et   "   `       5555!!          onCreateB  x x x x Z            5 !!          onShowB  x x x x [            5 !!          onHideB  x x x x \            5 !!       !!   content!!!!   method!!!!   recursion!!    !!       !!   content!!!!	   html!!!!   offset!!!!   position!!!!   title!!!!   variation!!    !!       !!   animating!!!!   loading!!!!   popup!!!!   position!!!!   visible!!    !!       !!   popup!!    !!          templateB \} ~ T} ~      @       5!!       !!	   name!!!!   debug!!!!   verbose!!!!   performance!!!!   namespace!!!!   onCreate!!!!   onShow!!!!   onHide!!!!   variation!!!!   content!!!!	   html!!!!   title!!!!   on!!!!   target!!!!   closable!!!!   context!!!!   position!!!!   delay!!!!   inline!!!!   preserve!!!!   duration!!!!   easing!!!!   transition!!!!   distanceAway!!!!   offset!!!!   maxSearchDepth!!!!   error!!!!   metadata!!!!   className!!!!   selector!!!!   template!!    ;5 !!       C           `                                     @  @                  G   5        6   Q   5    5   [   =   ]   =   ]   C]   B]   C]   >]   C]	   B]
      ]   [   =   ]   ]   [   =   ]   ]   [   =   ]   =   ]   =   ]   =   ]   ]   [   =   ]   ]   6   Q  7    fn   rating   Rating	   name   namespace   verbose   debug   performance   initialRating   interactive   clearable   onRateI   The method you called is not defined   method   error   metadata   active   disabled   hover   loading   className   .icon	   icon   selector   settings!!      $   window   document   undefined       +H!!           $.fn.ratingb                    parameters    $allModules    moduleSelector 	   time    performance    query    methodInvoked    queryArguments    returnedValue   B  b  Z                 settings    className    metadata    eventNamespace    moduleNamespace    element    instance    $module    $icon    module   B  V  N       P       5    B   o  o             5    B   a  a             5    B   2  2             5    B  R  J              5    B           2       5    B        &            5    B  >  6  +            5    B  .  &  3            5    B      ?            5    B  _  _ I             5   B {  s  b     @       5   B     m     @       5   B   +  + x     A       5   B  F  >       A       5   B   x  x             5    B                  5   B   '  '      p          totalTime   B  	  	   (          5    B H  @    ,          5 5   B K  C                 query    object    maxDepth    found    B       "   `       5555!!          onRateB                    5 !!       !!   method!!    !!       !!   rating!!    !!       !!   active!!!!   disabled!!!!   hover!!!!   loading!!    !!       !!	   icon!!    !!       !!	   name!!!!   namespace!!!!   verbose!!!!   debug!!!!   performance!!!!   initialRating!!!!   interactive!!!!   clearable!!!!   onRate!!!!   error!!!!   metadata!!!!   className!!!!   selector!!    ;5 !!       C       ;                                       $    D                 G   5        6   Q   5    5   [   =   ]   =   ]   B]   C]   C]   =   ]	   =   ]
      ]      ]      ]      ]   =   ]   =   ]   ]   X,]   ]   C]   Z   =   `    =   `   ]   [   ]   [   =   ]   =   ]   =   ]   =   ]   =   ]   ]    [   =!   ]"   =#   ]$   =%   ]&   ='   ](   =)   ]*   ]+   [   =,   ]-   =.   ]/   =0   ]1   =2   ]3   =4   ]5   ]6   [   	   ]7   
   ]8      ]   ]9   6:   Q ! ! "	 "6    fn   search   Search Module	   name   namespace   debug   verbose   performance   default   onSelect   onResultsAdd   onSearchQuery   onResults   onResultsOpen   onResultsClose	   true   automatic   simple	   type   minCharacters   searchThrottle   maxResults   cache   title   description   searchFields   apiSettings   active	   down   focus   empty   loading   className?   Your search returned no results   noResultsA   Error in debug logging, exiting.   loggingQ   A valid template name was not specified.   noTemplateY   There was an issue with querying the server.   serverErrorK   The method you called is not defined.   method   error   .prompt   prompt   .search.button   searchButton   .results   results   .category   category   .result   result   selector   message   categories   templates   settings!!      $   window   document   undefined       +H!!          $.fn.searchb ^  V  F               source    parameters    $allModules    moduleSelector 	   time    performance    query    methodInvoked    queryArguments    returnedValue    B   U  U T     "         settings    className    selector    error    eventNamespace    moduleNamespace    $module    $prompt    $searchButton    $results    element    instance    module    B  )  !  n             5   B                  5    B   `  `             5    B   
  
             5    B  $                5    B                     B  4  ,    &          5 5   B    	                5   B  !          0       5    B            P       5    B  :  : ,      P          results    fullTextResults    searchRegExp    fullTextRegExp    B     <   )              field    B )  !  =   %   @       555   B V 5 N 5 Q      0          searchTerm    searchHTML    B <  4  W   (          5 5   B e u ] u g             5    B     p             5    B           p       5    B                   5   B   I  I               5   B  c S [ S               5   B o  g        R       5    B           @       5   B : F 2 F       @       5   B  _  W        A       5   B   L  L       A       5   B  e 	 ] 	              5    B 9 M 1 M  !             5   B  j  b  !     p          totalTime   B J  B  !  (          5    B  L  L ,!  ,          5 5   B  :  : 5!               query    object    maxDepth    found    B     A!  "   `       5555!!          onSearchQueryB      !            5!!          onResultsB  
  
 !            5!!          onResultsOpenB  ( ,   , !            5!!          onResultsCloseB  I M A M !            5 !!            !!       !!   active!!!!	   down!!!!   focus!!!!   empty!!!!   loading!!    !!       !!   noResults!!!!   logging!!!!   noTemplate!!!!   serverError!!!!   method!!    !!       !!   prompt!!!!   searchButton!!!!   results!!!!   category!!!!   result!!    !!           messageB  -  - !     @       5 !!          categoriesB G $ ? $ !     @       	   html   B  *  * !  )             B ,  $  !  -   P       5 55!!          simpleB : 
 2 
 	"     @       	   html   B  	  	 "  )   P       5 5!!       !!   message!!!!   categories!!!!   simple!!    !!       !!	   name!!!!   namespace!!!!   debug!!!!   verbose!!!!   performance!!!!   onSelect!!!!   onResultsAdd!!!!   onSearchQuery!!!!   onResults!!!!   onResultsOpen!!!!   onResultsClose!!!!   automatic!!!!	   type!!!!   minCharacters!!!!   searchThrottle!!!!   maxResults!!!!   cache!!!!   searchFields!!!!   apiSettings!!!!   className!!!!   error!!!!   selector!!!!   templates!!    ;5 !!       C           k                                     wi  wi B"                 G   5        6   Q   5    5   [   =   ]   B]   C]   C]   =   ]      ]      ]	   X]
   [   =   ]   =   ]   ]   [   =   ]   =   ]   =   ]   =   ]   ]   [   =   ]   =   ]   ]   6   Q % %I    fn   shape   Shape	   name   debug   verbose   performance   namespace   beforeChange   onChange   duratione   You tried to switch to a side that does not exist.	   sideI   The method you called is not defined   method   error   animating   hidden   loading   active   className   .sides   sides   .side   selector   settings!!      $   window   document   undefined       +H!!          $.fn.shapeb  Ef  Ef D"               parameters    $allModules    $body 	   time    performance    query    methodInvoked    queryArguments    returnedValue   B  { e s e S"     R  )       moduleSelector    settings    selector    error    className    eventNamespace    moduleNamespace    $module    $sides    $side    nextSelector    $activeSide    $nextSide    element    instance    module    B      t"            5    B      z"            5    B   \  \ "            5    B  x M p M "            5    B  i @ a @ "            5    B \ ~ T ~ "     0          B     "  )           55   B     "                method   B  $    "  7             B    |  "  !          5 55   B      "            5    B      "            5    B  9  1  "            5    B   p"    p" "            5    B  " (& " (& #            5    B G& W' ?& W' #             5   B  t' ( l' ( &#            5    B  ( @* ( @* 5#     0       5    B  [* + S* + A#     0       5    B  + - + - M#     0       5    B  0- . (- . Y#     0       5    B  . / . / e#     0       5    B  0 X1  0 X1 q#     0       5    B  1 *3 1 *3 #            5    B  G3 4 ?3 4 #            5    B  4 l6 4 l6 #            5    B  6 8 6 8 #            5    B  ,8 X9 $8 X9 #            5    B  u9 : m9 : #            5    B  : = : = #  #   0       5    B  9= = 1= = #            5    B  6> A .> A #            5    B  A 1E A 1E  $            5    B  LE H DE H $            5    B  H CL H CL 4$            5    B  `L O XL O N$            5    B O P O P h$     @       5   B P Q P Q s$     @       5   B  Q ZS Q ZS ~$     A       5   B  uS T mS T $     A       5   B  U U T U $            5    B U X U X $             5   B  Y V]  Y V] $     p          totalTime   B Y 8Z Y 8Z $  (          5    B w\ \ o\ \ $  ,          5 5   B z] d r] d $               query    object    maxDepth    found    B E_ b =_ b $  "   `       5555!!          beforeChangeB  g g g g ,%            5 !!          onChangeB  g g g g -%            5 !!       !!	   side!!!!   method!!    !!       !!   animating!!!!   hidden!!!!   loading!!!!   active!!    !!       !!   sides!!!!	   side!!    !!       !!	   name!!!!   debug!!!!   verbose!!!!   performance!!!!   namespace!!!!   beforeChange!!!!   onChange!!!!   duration!!!!   error!!!!   className!!!!   selector!!    ;5 !!       C          o                                    [j  Rj  U%                 G   5        6   Q   5    5   [   =   ]   =   ]   B]   C]   C]   C]   C]	   B]
   X,]      ]      ]      ]   [   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   ]   [   =   ]   ]   [   =   ]   =   ]   ]   6   Q '% 'K    fn   sidebar   Sidebar	   name   namespace   debug   verbose   performance   useCSS   exclusive   overlay   duration   onChange   onShow   onHide   active   pushed   top	   left   right   bottom   className   .ui.sidebar   selectorK   The method you called is not defined.   methodu   There were no elements that matched the specified selector   notFound   error   settings!!      $   window   document   undefined       +H!!          $.fn.sidebarb j  j  W%               parameters    $allModules    $body    $head    moduleSelector 	   time    performance    query    methodInvoked    queryArguments    returnedValue    B  @l  8l  i%              settings    selector    className    namespace    error    eventNamespace    moduleNamespace    $module    $style    element    instance    module    B  o |o o |o %            5    B  o Pp o Pp %            5    B  lp 'q dp 'q %            5    B  Cq q ;q q %            5    B q s q s %     0       5    B t v s v %     P          B  lt pt dt pt %            5 5   B v x v x %     0          B  w w v w %            5 5   B  x .y x .y %            5    B  Iy y Ay y %     0       5    B  y { y { %     0       5    B  | } { } %     0       5    B }  }  &            5    B 3 ( + ( &             5   B  c  [  (&            5    B   K   K -&            5    B  g T _ T 0&            5    B      :&            5    B      =&            5    B      G&     P       5    B      U&  #   0       5    B  8  0  i&            5    B      l&            5    B  
 N  N o&            5    B t  l  t&     @       5   B     &     @       5   B   $  $ &     A       5   B  ?  7  &     A       5   B   q  q &            5    B     &             5   B        &     p          totalTime   B     &  (          5    B A  9  &  ,          5 5   B D  <  &               query    object    maxDepth    found    B  {  { &  "   `       5555!!          onChangeB      3'            5 !!          onShowB  8 < 0 < 4'            5 !!          onHideB  W [ O [ 5'            5 !!       !!   active!!!!   pushed!!!!   top!!!!	   left!!!!   right!!!!   bottom!!    !!       !!   sidebar!!    !!       !!   method!!!!   notFound!!    !!       !!	   name!!!!   namespace!!!!   debug!!!!   verbose!!!!   performance!!!!   useCSS!!!!   exclusive!!!!   overlay!!!!   duration!!!!   onChange!!!!   onShow!!!!   onHide!!!!   className!!!!   selector!!!!   error!!    ;5 !!       C  ~     0                                        <  < X'                 G   5        6   Q      6   Q   5    5   [
   =   ]   B]   C]   C]   =   ]      ]      ]	   [      ]
   ]   B]   C]   =   ]   B]   =   ]   ]   B]   B]   C]   B]   [   =   ]   =   ]   =   ]   =   ]   =    ]   =!   ]"   =#   ]$   ]%   [   =   ]   =&   ]&   ='   ]'   ](   [   =)   ])   =*   ]*   ]+   [	   =,   ]-   ].   6/   Q ) *    fn   tab   Tab	   name   debug   verbose   performance   namespace   onTabInit   onTabLoad   determineTitle   templates	   auto   history	   hash   historyType	   path	   body   context   maxDepth   ignoreFirstLoad   alwaysRefresh   cache   apiSettingsa   You attempted to load content without API module   apiI   The method you called is not defined   method'   Tab cannot be found   missingTab_   The tab you specified is missing a content url.   noContentU   History enabled, but no path was specified7   Max recursive depth reached   recursionU   The state library has not been initialized   state   error   loaded   promise   metadata   loading   active   className   .ui.tab	   tabs   selector   settings!!      $   window   document   undefined       +H!!          $.fn.tabb     Z'       '       activeTabPath    className    moduleSelector    moduleNamespace    returnedValue    module    parameterArray    settings    element    $module    performance    firstLoad 	   time    instance    cache    historyEvent    error    queryArguments    recursionDepth    metadata    $tabs    eventNamespace   B      '            5   B  1  (  '            5    B   v  v '            5    B     '     R       5    B     '     0       5    B      '             5   B  L  L '            5    B c  [  '            5    B 0  (   (            5    B  9   9 (            5    B ]  U  (     P          tabPath !   shouldIgnoreLoad    remoteContent    pathArray   B     (  "          5 5   B  P  P \(               tabPath    fullTabPath 	   $tab   B  :  : b(  %   0       5 5   B k ; c ; (            5    B m  e  (            5    B     (            5    B     (            5    B   P  P (            5    B  n  f  (            5    B   L  L (            5    B x  p  (            5    B  G  ?  (            5    B      (            5    B A  9  (  "          5    B  b  b (     @       5   B   x  (            5    B 3  +  (            5    B      (            5    B      )                removeArray    B f  ^  )  +          5 5   B  ^  ^ 	)            5    B } ` u ` )             5   B   w  )            5    B       )     @       5   B 8 0 0 0 +)     @       5   B  G  ?  6)     A       5   B   
  
 A)     A       5   B  !    L)            5    B     Q)             5   B      f)     `          totalTime    B     m)  &          5    B  4  4 z)  *          5 5   B     )               query    object    maxDepth    found    B i  a  )      `       555!!          $.tabb P } H } )            5!!          onTabInitB |  t  )            5!!          onTabLoadB     )            5!!          determineTitleB = J 5 J )            5 !!       !!   determineTitle!!    !!       !!   api!!!!   method!!!!   missingTab!!!!   noContent!!!!	   path!!!!   recursion!!!!   state!!    !!       !!   tab!!!!   loaded!!!!   promise!!    !!       !!   loading!!!!   active!!    !!       !!	   tabs!!    !!       !!	   name!!!!   debug!!!!   verbose!!!!   performance!!!!   namespace!!!!   onTabInit!!!!   onTabLoad!!!!   templates!!!!	   auto!!!!   history!!!!   historyType!!!!	   path!!!!   context!!!!   maxDepth!!!!   ignoreFirstLoad!!!!   alwaysRefresh!!!!   cache!!!!   apiSettings!!!!   error!!!!   metadata!!!!   className!!!!   selector!!    ;5 !!       C  E     (                                       $ ]  ] *                 G   5        6   Q   5    5   [   6   Q   5    5   [   =   ]   B]   C]   C]   =   ]      ]	      ]
      ]   B]   =   ]   =   ]   C]   [   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   ]   [   =   ]   =    ]!   ="   ]#   =$   ]%   ]&   6'   Q - -@    fn   transition   exists   Transition	   name   debug   verbose   performance   namespace   complete   onShow   onHide   allowRepeats	   fade   animation   700ms   duration   queue   animating   disabled   hidden   in   inward   loading   looping   out   outward   ui transition   visible   classNames   There is no css animation matching the one you specified.   noAnimation   That animation is already occurring, cancelling repeated animation   repeatedI   The method you called is not defined   methodY   This browser does not support CSS animations   support   error   settings!!      $   window   document   undefined       +H!!           $.fn.transitionb  d X \ X !*               $allModules    moduleSelector 	   time    performance    moduleArguments    query    queryArguments    methodInvoked    returnedValue    B   y  2*            5    B   uX  uX 7*        7       $module    element    settings    instance    error    className    metadata    animationEnd    animationName    namespace    moduleNamespace    module   B  :  2  M*     0       5    B      h*            5    B   N  N o*            5    B  j  b  v*            5    B      {*     0       5    B   %  % *            5    B A o
 9 o
 *     p       5    B  
 h 
 h *            5    B   z  *               B  (     *  '          5 5   B   M  M *     R       5    B |  t  *             5   B     *             5   B      *             5   B  & O  O +     0       5    B  m  e  +            5    B  v  v +            5    B      ,+            5    B  ;  3  3+            5    B  M  M <+            5    B s  k  ?+  $          5    B  = & 5 & C+            5    B  d @" \ @" M+            5   B  }" " u" " h+            5    B  " ^# " ^# l+             5   B  }# $ u# $ r+            5    B  $ 3% $ 3% ~+            5    B  Q% % I% % +            5    B  % u& % u& +            5    B & , & , +     p       5    B  , - , - +             5   B - A. - A. +  $          5    B  e. 1 ]. 1 +  !   0       5    B  C1 3 ;1 3 +  "   0       5    B  ,4 5 $4 5 +     0       5    B  5 < 5 < +     @       5   B  < @= < @= -,            5    B  \= = T= = 0,            5    B  = > = > 3,            5    B  %> m> > m> 6,            5    B > ? > ? 9,            5    B  .? i? &? i? =,            5    B  ? ? ? ? @,            5    B  @ @ ? @ E,            5    B @ \A @ \A L,            5    B  vA A nA A S,            5    B   B lB A lB X,            5    B  B B B B ],            5    B C &D C &D b,     @       5   B BD NE :D NE m,     @       5   B  gE F _E F x,     A       5   B  F TH F TH ,     A       5   B  mH I eH I ,            5    B AI UL 9I UL ,             5   B  rL P jL P ,     p          totalTime   B RM M JM M ,  (          5    B O TP O TP ,  ,          5 5   B P KX P KX ,               query    object    maxDepth    found    B R V R V ,  "   `       5555!!            !!          completeB  DZ IZ <Z IZ -            5 !!          onShowB  cZ hZ [Z hZ -            5 !!          onHideB  Z Z zZ Z -            5 !!    	   !!   animating!!!!   disabled!!!!   hidden!!!!   inward!!!!   loading!!!!   looping!!!!   outward!!!!   transition!!!!   visible!!    !!       !!   noAnimation!!!!   repeated!!!!   method!!!!   support!!    !!       !!	   name!!!!   debug!!!!   verbose!!!!   performance!!!!   namespace!!!!   complete!!!!   onShow!!!!   onHide!!!!   allowRepeats!!!!   animation!!!!   duration!!!!   queue!!!!   className!!!!   error!!    ;5 !!       C  A     )                                       _ G _ G L-                 G   5        6   Q   5    5   [
   =   ]   =   ]   B]   C]   C]   [   =   ]   =	   ]	   =
   ]
   ]      ]      ]      ]      ]      ]   =   ]   =   ]   B]   =   ]   C]   B]   C]   [   =   ]   =   ]   ]   [   =   ]   ]    [	   =!   ]"   =#   ]$   =%   ]&   ]'   6(   Q . /    fn   video   Video	   name   namespace   debug   verbose   performance   source   id   url   metadata   onPlay   onReset   onChange   onPause   onStop	   auto   width   height   autoplay   #442359   color   hd   showUI   api%   No video specified   noVideoI   The method you called is not defined   method   error   active   className   .embed   embed   .placeholder   placeholder   .play   playButton   selector   settings!!      $   window   document   undefined       +H!!          $.fn.videob F_  >_  N-               parameters    $allModules    moduleSelector 	   time    performance    query    methodInvoked    queryArguments    returnedValue    B  `  `  `-     "         settings    className    error    metadata    eventNamespace    moduleNamespace    $module    $placeholder    $playButton    $embed    element    instance    module   B  $d 3e d 3e {-            5    B  Se f Ke f -            5    B  #f cg f cg -            5    B g h g h -            5    B  h j h j -            5    B  <j k 4j k -            5    B Pl r Hl r -     `       5   B r 1y r 1y -     p       5    B Wy iz Oy iz *.     @       5   B z { }z { 5.     @       5   B  { } { } @.     A       5   B  "} ~ } ~ K.     A       5   B  ~ T ~ T V.            5    B   |  [.             5   B      p.     p          totalTime   B     w.  (          5    B $    .  ,          5 5   B '    .               query    object    maxDepth    found    B  ^  ^ .  "   `       5555!!       !!   source!!!!   id!!!!   url!!    !!           onPlayB      .            5 !!          onResetB  	    .            5!!          onChangeB  $ (  ( .            5 !!          onPauseB  r w j w .            5!!          onStopB      .            5 !!       !!   noVideo!!!!   method!!    !!       !!   active!!    !!       !!   embed!!!!   placeholder!!!!   playButton!!    !!       !!	   name!!!!   namespace!!!!   debug!!!!   verbose!!!!   performance!!!!   metadata!!!!   onPlay!!!!   onReset!!!!   onChange!!!!   onPause!!!!   onStop!!!!   width!!!!   height!!!!   autoplay!!!!   color!!!!   hd!!!!   showUI!!!!   api!!!!   error!!!!   className!!!!   selector!!    ;5;\"oogL!>R     \l[\l[@d\l   1    :https://www.campusinteraction.com/js/semantic.js necko:classified 1 strongly-framed 1 security-info FnhllAKWRHGAlo+ESXykKAAAAAAAAAAAwAAAAAAAAEaphjojH6pBabDSgSnsfLHeAAgAAgAAAAAAAAAAAAAAAAAAAAEAMQFmCjImkVxP+7sgiYWmMt8FvcOXmlQiTNWFiWlrbpbqgwAAAAAAAAZaMIIGVjCCBT6gAwIBAgIIQPVmRmD4imAwDQYJKoZIhvcNAQELBQAwgbQxCzAJBgNVBAYTAlVTMRAwDgYDVQQIEwdBcml6b25hMRMwEQYDVQQHEwpTY290dHNkYWxlMRowGAYDVQQKExFHb0RhZGR5LmNvbSwgSW5jLjEtMCsGA1UECxMkaHR0cDovL2NlcnRzLmdvZGFkZHkuY29tL3JlcG9zaXRvcnkvMTMwMQYDVQQDEypHbyBEYWRkeSBTZWN1cmUgQ2VydGlmaWNhdGUgQXV0aG9yaXR5IC0gRzIwHhcNMTgxMTIzMTMxOTUzWhcNMTkwNDExMTAyOTAyWjBHMSEwHwYDVQQLExhEb21haW4gQ29udHJvbCBWYWxpZGF0ZWQxIjAgBgNVBAMTGXd3dy5jYW1wdXNpbnRlcmFjdGlvbi5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCuiXcFKCXU2i/3wDSccP39FMyqKycd8qY3taI33on3U/miHHHFTmM/Wup0q9A4JvFLBLwIuGVR7SzcgUIZ/SSzfIN7quVSOR+1wvxAB+MPqlUDX1r7SfFsssWaAv4GaWD9e/NXTXN9OcvsVqsz6muf0ZJUTHrGl5RaY+qWb3i6Lrn/0z/Pyn0ZTeyOCQNtfOYXJqHDzJlJhS/FIGXTfMHNjFktnbvhvIVl5RDuI67HbCOgbTNq2MSBM6QAc3+E3DhsaDE+9/s3Me3v/DntzO13O+RsrMHal5OpAr49z88GIdTHoub02lVNpfrCTY3HML84gYpPhRnGNLKpiUXlKaGNAgMBAAGjggLWMIIC0jAMBgNVHRMBAf8EAjAAMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAOBgNVHQ8BAf8EBAMCBaAwNwYDVR0fBDAwLjAsoCqgKIYmaHR0cDovL2NybC5nb2RhZGR5LmNvbS9nZGlnMnMxLTg5MS5jcmwwXQYDVR0gBFYwVDBIBgtghkgBhv1tAQcXATA5MDcGCCsGAQUFBwIBFitodHRwOi8vY2VydGlmaWNhdGVzLmdvZGFkZHkuY29tL3JlcG9zaXRvcnkvMAgGBmeBDAECATB2BggrBgEFBQcBAQRqMGgwJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmdvZGFkZHkuY29tLzBABggrBgEFBQcwAoY0aHR0cDovL2NlcnRpZmljYXRlcy5nb2RhZGR5LmNvbS9yZXBvc2l0b3J5L2dkaWcyLmNydDAfBgNVHSMEGDAWgBRAwr0njsw0gzCiM9f7bLPwtCyAzjA7BgNVHREENDAyghl3d3cuY2FtcHVzaW50ZXJhY3Rpb24uY29tghVjYW1wdXNpbnRlcmFjdGlvbi5jb20wHQYDVR0OBBYEFLOCgH8rU6WOSESEMNu/HPFRQDgWMIIBBAYKKwYBBAHWeQIEAgSB9QSB8gDwAHUApLkJkLQYWBSHuxOizGdwCjw1mAT5G9+443fNDsgN3BAAAAFnQLoLFQAABAMARjBEAiAfOrdNU3/7q/ADoEWRjuekPa5PkVOg8yn+mpEDkrm3yAIgQWgPQ13YLzWdF/K7I6Mfuu0S4Gs0b66+srZ7N1Zq6AEAdwB0ftqDMa0zEJEhnM4lT0Jwwr/9XkIgCMY3NXnmEHvMVgAAAWdAug+rAAAEAwBIMEYCIQCwlgNPmVMjeBMrb8cOgIHK0Nbx8d47ndzFla/n2V++uwIhAI1EwJ+bEo9FNXM6g5Za5+26oKnjyZMV/BWFIvrbC8tXMA0GCSqGSIb3DQEBCwUAA4IBAQBk8Y3jq3jQkxftRQ438cHgcrUFPDWHQvDTcPqZxFt/XjQ8ZJPaQumlB1PWNGQYJnVA14lAvu9OBau6JD6eUDfD8yBC/kSv+35IRSY58t5gM6Rz/byhWfk7lXnD+pSjPnvblq5DVAaESb+bsgOsk7MbxBEZ4Y1R6XpGjhipbToIrCFnlfo0B0YJmB3lQzxEe501Pk9wceD+HFEUVrxpVd/oEo5+5ccW9ikIzt7qy1faCgbe4HPKnfU7v6M65kVaI6Tfpfahh/bQWi2XSE+IDgebqrcRTdoCtDY61dG7AAwM2k3K7+qdHyocFeWzSQqylLbohu4X20bk7XfDzU9u/wcAwC8AAwAAAAABAQAAAAAAAARub25lAAAAEFJTQS1QS0NTMS1TSEEyNTYBlZ+xZWUXSH+rm9iRO+Uxl650zaXNL0c/lvXwt//2LGgAAAADZgoyJpFcT/u7IImFpjLfBb3Dl5pUIkzVhYlpa26W6oMAAAAAAAAGWjCCBlYwggU+oAMCAQICCED1ZkZg+IpgMA0GCSqGSIb3DQEBCwUAMIG0MQswCQYDVQQGEwJVUzEQMA4GA1UECBMHQXJpem9uYTETMBEGA1UEBxMKU2NvdHRzZGFsZTEaMBgGA1UEChMRR29EYWRkeS5jb20sIEluYy4xLTArBgNVBAsTJGh0dHA6Ly9jZXJ0cy5nb2RhZGR5LmNvbS9yZXBvc2l0b3J5LzEzMDEGA1UEAxMqR28gRGFkZHkgU2VjdXJlIENlcnRpZmljYXRlIEF1dGhvcml0eSAtIEcyMB4XDTE4MTEyMzEzMTk1M1oXDTE5MDQxMTEwMjkwMlowRzEhMB8GA1UECxMYRG9tYWluIENvbnRyb2wgVmFsaWRhdGVkMSIwIAYDVQQDExl3d3cuY2FtcHVzaW50ZXJhY3Rpb24uY29tMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEArol3BSgl1Nov98A0nHD9/RTMqisnHfKmN7WiN96J91P5ohxxxU5jP1rqdKvQOCbxSwS8CLhlUe0s3IFCGf0ks3yDe6rlUjkftcL8QAfjD6pVA19a+0nxbLLFmgL+Bmlg/XvzV01zfTnL7FarM+prn9GSVEx6xpeUWmPqlm94ui65/9M/z8p9GU3sjgkDbXzmFyahw8yZSYUvxSBl03zBzYxZLZ274byFZeUQ7iOux2wjoG0zatjEgTOkAHN/hNw4bGgxPvf7NzHt7/w57cztdzvkbKzB2peTqQK+Pc/PBiHUx6Lm9NpVTaX6wk2NxzC/OIGKT4UZxjSyqYlF5SmhjQIDAQABo4IC1jCCAtIwDAYDVR0TAQH/BAIwADAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwDgYDVR0PAQH/BAQDAgWgMDcGA1UdHwQwMC4wLKAqoCiGJmh0dHA6Ly9jcmwuZ29kYWRkeS5jb20vZ2RpZzJzMS04OTEuY3JsMF0GA1UdIARWMFQwSAYLYIZIAYb9bQEHFwEwOTA3BggrBgEFBQcCARYraHR0cDovL2NlcnRpZmljYXRlcy5nb2RhZGR5LmNvbS9yZXBvc2l0b3J5LzAIBgZngQwBAgEwdgYIKwYBBQUHAQEEajBoMCQGCCsGAQUFBzABhhhodHRwOi8vb2NzcC5nb2RhZGR5LmNvbS8wQAYIKwYBBQUHMAKGNGh0dHA6Ly9jZXJ0aWZpY2F0ZXMuZ29kYWRkeS5jb20vcmVwb3NpdG9yeS9nZGlnMi5jcnQwHwYDVR0jBBgwFoAUQMK9J47MNIMwojPX+2yz8LQsgM4wOwYDVR0RBDQwMoIZd3d3LmNhbXB1c2ludGVyYWN0aW9uLmNvbYIVY2FtcHVzaW50ZXJhY3Rpb24uY29tMB0GA1UdDgQWBBSzgoB/K1OljkhEhDDbvxzxUUA4FjCCAQQGCisGAQQB1nkCBAIEgfUEgfIA8AB1AKS5CZC0GFgUh7sTosxncAo8NZgE+RvfuON3zQ7IDdwQAAABZ0C6CxUAAAQDAEYwRAIgHzq3TVN/+6vwA6BFkY7npD2uT5FToPMp/pqRA5K5t8gCIEFoD0Nd2C81nRfyuyOjH7rtEuBrNG+uvrK2ezdWaugBAHcAdH7agzGtMxCRIZzOJU9CcMK//V5CIAjGNzV55hB7zFYAAAFnQLoPqwAABAMASDBGAiEAsJYDT5lTI3gTK2/HDoCBytDW8fHeO53cxZWv59lfvrsCIQCNRMCfmxKPRTVzOoOWWuftuqCp48mTFfwVhSL62wvLVzANBgkqhkiG9w0BAQsFAAOCAQEAZPGN46t40JMX7UUON/HB4HK1BTw1h0Lw03D6mcRbf140PGST2kLppQdT1jRkGCZ1QNeJQL7vTgWruiQ+nlA3w/MgQv5Er/t+SEUmOfLeYDOkc/28oVn5O5V5w/qUoz5725auQ1QGhEm/m7IDrJOzG8QRGeGNUel6Ro4YqW06CKwhZ5X6NAdGCZgd5UM8RHudNT5PcHHg/hxRFFa8aVXf6BKOfuXHFvYpCM7e6stX2goG3uBzyp31O7+jOuZFWiOk36X2oYf20Fotl0hPiA4Hm6q3EU3aArQ2OtXRuwAMDNpNyu/qnR8qHBXls0kKspS26IbuF9tG5O13w81Pbv8HAGYKMiaRXE/7uyCJhaYy3wW9w5eaVCJM1YWJaWtuluqDAAAAAAAABNQwggTQMIIDuKADAgECAgEHMA0GCSqGSIb3DQEBCwUAMIGDMQswCQYDVQQGEwJVUzEQMA4GA1UECBMHQXJpem9uYTETMBEGA1UEBxMKU2NvdHRzZGFsZTEaMBgGA1UEChMRR29EYWRkeS5jb20sIEluYy4xMTAvBgNVBAMTKEdvIERhZGR5IFJvb3QgQ2VydGlmaWNhdGUgQXV0aG9yaXR5IC0gRzIwHhcNMTEwNTAzMDcwMDAwWhcNMzEwNTAzMDcwMDAwWjCBtDELMAkGA1UEBhMCVVMxEDAOBgNVBAgTB0FyaXpvbmExEzARBgNVBAcTClNjb3R0c2RhbGUxGjAYBgNVBAoTEUdvRGFkZHkuY29tLCBJbmMuMS0wKwYDVQQLEyRodHRwOi8vY2VydHMuZ29kYWRkeS5jb20vcmVwb3NpdG9yeS8xMzAxBgNVBAMTKkdvIERhZGR5IFNlY3VyZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkgLSBHMjCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALngyxDUr3a91JNi6zBkuIEIbMME2WIXji//PmXPj85i5jxSHNoWRUtVq3hrY4NikM4PaWyZyBoUi0zMRTPqiNyeo68r/oBhnXlXxM8u9D8wPF1H/JoWvMM3lkFRjhFLVPgovtCMvvAwOB7zsCb4Zkdjbd5xJkePOEdT0UYdtOPcAOpFrL28cdmqbwDb280wOnlPX0xH+B3vW8LEnWA7sbJDkdikM07qs9YnT60liqXG9NXQpq50BWRXiLVEVdQtKjo++Li96TIKApRkxBY6UPFKrud5M68MIAd/6N8EOcJpAmxjUvp3wRvIdIfIuZMYUFQ1S2lOvDvTSS4f3MHSUvsCAwEAAaOCARowggEWMA8GA1UdEwEB/wQFMAMBAf8wDgYDVR0PAQH/BAQDAgEGMB0GA1UdDgQWBBRAwr0njsw0gzCiM9f7bLPwtCyAzjAfBgNVHSMEGDAWgBQ6moUHEGcotu/2vQVBbiDBlNoP3jA0BggrBgEFBQcBAQQoMCYwJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmdvZGFkZHkuY29tLzA1BgNVHR8ELjAsMCqgKKAmhiRodHRwOi8vY3JsLmdvZGFkZHkuY29tL2dkcm9vdC1nMi5jcmwwRgYDVR0gBD8wPTA7BgRVHSAAMDMwMQYIKwYBBQUHAgEWJWh0dHBzOi8vY2VydHMuZ29kYWRkeS5jb20vcmVwb3NpdG9yeS8wDQYJKoZIhvcNAQELBQADggEBAAh+bJMQyDi4lqmQS/+hX08E72w+nIgGyVCPpnP3VzEbvrzkL9v4utNb4LTn5nliDgyi12pjczG19ahIpDsILaJdkNe0fCVPEVYwxLZEnXssneVe5u8MYaq/5Cob7oSeuIN9wUPORKcTcA2RH/TIE62DYNnYcqhzJB61rCIOyheJYlhEG6uJJQEAD83EG2LbUbTTD1Eqm/S8c/x2zjakzdnYLOqum/UqspDRTXUYij+KQZAjfVtL/qQDWJtGssNgYIP4fVBBzsKhkMO77wIv0hVU7kQV2Qqup4oz7bEtdjYm3ATrn/dhHxXch2/uRpYoraEmfQoJpy4Eo428+LwEMAFmCjImkVxP+7sgiYWmMt8FvcOXmlQiTNWFiWlrbpbqgwAAAAAAAAPJMIIDxTCCAq2gAwIBAgIBADANBgkqhkiG9w0BAQsFADCBgzELMAkGA1UEBhMCVVMxEDAOBgNVBAgTB0FyaXpvbmExEzARBgNVBAcTClNjb3R0c2RhbGUxGjAYBgNVBAoTEUdvRGFkZHkuY29tLCBJbmMuMTEwLwYDVQQDEyhHbyBEYWRkeSBSb290IENlcnRpZmljYXRlIEF1dGhvcml0eSAtIEcyMB4XDTA5MDkwMTAwMDAwMFoXDTM3MTIzMTIzNTk1OVowgYMxCzAJBgNVBAYTAlVTMRAwDgYDVQQIEwdBcml6b25hMRMwEQYDVQQHEwpTY290dHNkYWxlMRowGAYDVQQKExFHb0RhZGR5LmNvbSwgSW5jLjExMC8GA1UEAxMoR28gRGFkZHkgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkgLSBHMjCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAL9xYgjx+lk09xvJGKP3gElY6SKDE6bFIEMBO4Tx5oVJnyfq9oQbTqC023CYxzIBsQU+B07u9PpPL1kwIuerGVZr4oAH/PMWdYA5UXvl+TW2dE6pjYIT5LY/qQOD+qK+ihVqf94Lw7YZFAXK6sOoBJQ7RnwyDfMAZiLIjWltNowRGLfTshxgtDj6AozO091GB94KPutdfMh8+7ArU6SSYmlRJQVhGkSBjCypQ5Yj36w6gZoOKcUcqeldHraenjAKOc7xiID7S13MMuyFYkMlNAJWJwGRtDtwKj9useiciAF9n9T521NtYJ2/LOdYq7hfRvzOxBsDPAnrSTFcaUaz4EcCAwEAAaNCMEAwDwYDVR0TAQH/BAUwAwEB/zAOBgNVHQ8BAf8EBAMCAQYwHQYDVR0OBBYEFDqahQcQZyi27/a9BUFuIMGU2g/eMA0GCSqGSIb3DQEBCwUAA4IBAQCZ21151fmXWWcDYfF+OwYxdS2hII5PZYe096acvNjpL9DbWu7PdIxztDhC2gV7+AJ1uP2lsdeu9tfeE8tTEH6KRtGX+rcuKxGrkLAngPnon1rpN5+r5N9ss4UXnT3ZJE95kTXWXwTrgIOrmgIttRD02JDHBHNA7XIloKmf7J6raBKZV8aPEjoJpL1E/QYVN8Gb5DKj7Tjo2GTzLH4U/ALqn83/B2gX2yKQOC16jdFU8WnjXzPKej17CuPKf1855eJ1usV2GDPOLPAvTK33sefOT6jEm0pUBsV/fdUID+Ic/n4XuKxe9tQWskMJDE32p2u0mYRlynqI4uJEvlz36hz1AA== request-method GET response-head HTTP/1.1 200 OK
Accept-Ranges: bytes
ETag: W/"365415-1539164304000"
Last-Modified: Wed, 10 Oct 2018 09:38:24 GMT
Content-Type: application/javascript;charset=ISO-8859-1
Content-Language: en-US
Content-Length: 365415
Date: Wed, 13 Feb 2019 07:04:40 GMT
Server: Apache-Coyote/1.1
 original-response-headers Date: Fri, 04 Jan 2019 11:35:13 GMT
Server: Apache-Coyote/1.1
Accept-Ranges: bytes
ETag: W/"365415-1539164304000"
Last-Modified: Wed, 10 Oct 2018 09:38:24 GMT
Content-Type: application/javascript;charset=ISO-8859-1
Content-Language: en-US
Content-Length: 365415
Connection: close
 uncompressed-len 0 net-response-time-onstart 99 net-response-time-onstop 2720 alt-data 1;365415,javascript/moz-bytecode-20190128165852 alt-data-from-child 1  