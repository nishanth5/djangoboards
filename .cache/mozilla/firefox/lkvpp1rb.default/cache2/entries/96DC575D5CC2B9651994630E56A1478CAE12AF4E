/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.effect.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function( $, undefined ) {

var uuid = 0,
	runiqueId = /^ui-id-\d+$/;

// $.ui might exist from components with no dependencies, e.g., $.ui.position
$.ui = $.ui || {};

$.extend( $.ui, {
	version: "1.10.3",

	keyCode: {
		BACKSPACE: 8,
		COMMA: 188,
		DELETE: 46,
		DOWN: 40,
		END: 35,
		ENTER: 13,
		ESCAPE: 27,
		HOME: 36,
		LEFT: 37,
		NUMPAD_ADD: 107,
		NUMPAD_DECIMAL: 110,
		NUMPAD_DIVIDE: 111,
		NUMPAD_ENTER: 108,
		NUMPAD_MULTIPLY: 106,
		NUMPAD_SUBTRACT: 109,
		PAGE_DOWN: 34,
		PAGE_UP: 33,
		PERIOD: 190,
		RIGHT: 39,
		SPACE: 32,
		TAB: 9,
		UP: 38
	}
});

// plugins
$.fn.extend({
	focus: (function( orig ) {
		return function( delay, fn ) {
			return typeof delay === "number" ?
				this.each(function() {
					var elem = this;
					setTimeout(function() {
						$( elem ).focus();
						if ( fn ) {
							fn.call( elem );
						}
					}, delay );
				}) :
				orig.apply( this, arguments );
		};
	})( $.fn.focus ),

	scrollParent: function() {
		var scrollParent;
		if (($.ui.ie && (/(static|relative)/).test(this.css("position"))) || (/absolute/).test(this.css("position"))) {
			scrollParent = this.parents().filter(function() {
				return (/(relative|absolute|fixed)/).test($.css(this,"position")) && (/(auto|scroll)/).test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"));
			}).eq(0);
		} else {
			scrollParent = this.parents().filter(function() {
				return (/(auto|scroll)/).test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"));
			}).eq(0);
		}

		return (/fixed/).test(this.css("position")) || !scrollParent.length ? $(document) : scrollParent;
	},

	zIndex: function( zIndex ) {
		if ( zIndex !== undefined ) {
			return this.css( "zIndex", zIndex );
		}

		if ( this.length ) {
			var elem = $( this[ 0 ] ), position, value;
			while ( elem.length && elem[ 0 ] !== document ) {
				// Ignore z-index if position is set to a value where z-index is ignored by the browser
				// This makes behavior of this function consistent across browsers
				// WebKit always returns auto if the element is positioned
				position = elem.css( "position" );
				if ( position === "absolute" || position === "relative" || position === "fixed" ) {
					// IE returns 0 when zIndex is not specified
					// other browsers return a string
					// we ignore the case of nested elements with an explicit value of 0
					// <div style="z-index: -10;"><div style="z-index: 0;"></div></div>
					value = parseInt( elem.css( "zIndex" ), 10 );
					if ( !isNaN( value ) && value !== 0 ) {
						return value;
					}
				}
				elem = elem.parent();
			}
		}

		return 0;
	},

	uniqueId: function() {
		return this.each(function() {
			if ( !this.id ) {
				this.id = "ui-id-" + (++uuid);
			}
		});
	},

	removeUniqueId: function() {
		return this.each(function() {
			if ( runiqueId.test( this.id ) ) {
				$( this ).removeAttr( "id" );
			}
		});
	}
});

// selectors
function focusable( element, isTabIndexNotNaN ) {
	var map, mapName, img,
		nodeName = element.nodeName.toLowerCase();
	if ( "area" === nodeName ) {
		map = element.parentNode;
		mapName = map.name;
		if ( !element.href || !mapName || map.nodeName.toLowerCase() !== "map" ) {
			return false;
		}
		img = $( "img[usemap=#" + mapName + "]" )[0];
		return !!img && visible( img );
	}
	return ( /input|select|textarea|button|object/.test( nodeName ) ?
		!element.disabled :
		"a" === nodeName ?
			element.href || isTabIndexNotNaN :
			isTabIndexNotNaN) &&
		// the element and all of its ancestors must be visible
		visible( element );
}

function visible( element ) {
	return $.expr.filters.visible( element ) &&
		!$( element ).parents().addBack().filter(function() {
			return $.css( this, "visibility" ) === "hidden";
		}).length;
}

$.extend( $.expr[ ":" ], {
	data: $.expr.createPseudo ?
		$.expr.createPseudo(function( dataName ) {
			return function( elem ) {
				return !!$.data( elem, dataName );
			};
		}) :
		// support: jQuery <1.8
		function( elem, i, match ) {
			return !!$.data( elem, match[ 3 ] );
		},

	focusable: function( element ) {
		return focusable( element, !isNaN( $.attr( element, "tabindex" ) ) );
	},

	tabbable: function( element ) {
		var tabIndex = $.attr( element, "tabindex" ),
			isTabIndexNaN = isNaN( tabIndex );
		return ( isTabIndexNaN || tabIndex >= 0 ) && focusable( element, !isTabIndexNaN );
	}
});

// support: jQuery <1.8
if ( !$( "<a>" ).outerWidth( 1 ).jquery ) {
	$.each( [ "Width", "Height" ], function( i, name ) {
		var side = name === "Width" ? [ "Left", "Right" ] : [ "Top", "Bottom" ],
			type = name.toLowerCase(),
			orig = {
				innerWidth: $.fn.innerWidth,
				innerHeight: $.fn.innerHeight,
				outerWidth: $.fn.outerWidth,
				outerHeight: $.fn.outerHeight
			};

		function reduce( elem, size, border, margin ) {
			$.each( side, function() {
				size -= parseFloat( $.css( elem, "padding" + this ) ) || 0;
				if ( border ) {
					size -= parseFloat( $.css( elem, "border" + this + "Width" ) ) || 0;
				}
				if ( margin ) {
					size -= parseFloat( $.css( elem, "margin" + this ) ) || 0;
				}
			});
			return size;
		}

		$.fn[ "inner" + name ] = function( size ) {
			if ( size === undefined ) {
				return orig[ "inner" + name ].call( this );
			}

			return this.each(function() {
				$( this ).css( type, reduce( this, size ) + "px" );
			});
		};

		$.fn[ "outer" + name] = function( size, margin ) {
			if ( typeof size !== "number" ) {
				return orig[ "outer" + name ].call( this, size );
			}

			return this.each(function() {
				$( this).css( type, reduce( this, size, true, margin ) + "px" );
			});
		};
	});
}

// support: jQuery <1.8
if ( !$.fn.addBack ) {
	$.fn.addBack = function( selector ) {
		return this.add( selector == null ?
			this.prevObject : this.prevObject.filter( selector )
		);
	};
}

// support: jQuery 1.6.1, 1.6.2 (http://bugs.jquery.com/ticket/9413)
if ( $( "<a>" ).data( "a-b", "a" ).removeData( "a-b" ).data( "a-b" ) ) {
	$.fn.removeData = (function( removeData ) {
		return function( key ) {
			if ( arguments.length ) {
				return removeData.call( this, $.camelCase( key ) );
			} else {
				return removeData.call( this );
			}
		};
	})( $.fn.removeData );
}





// deprecated
$.ui.ie = !!/msie [\w.]+/.exec( navigator.userAgent.toLowerCase() );

$.support.selectstart = "onselectstart" in document.createElement( "div" );
$.fn.extend({
	disableSelection: function() {
		return this.bind( ( $.support.selectstart ? "selectstart" : "mousedown" ) +
			".ui-disableSelection", function( event ) {
				event.preventDefault();
			});
	},

	enableSelection: function() {
		return this.unbind( ".ui-disableSelection" );
	}
});

$.extend( $.ui, {
	// $.ui.plugin is deprecated. Use $.widget() extensions instead.
	plugin: {
		add: function( module, option, set ) {
			var i,
				proto = $.ui[ module ].prototype;
			for ( i in set ) {
				proto.plugins[ i ] = proto.plugins[ i ] || [];
				proto.plugins[ i ].push( [ option, set[ i ] ] );
			}
		},
		call: function( instance, name, args ) {
			var i,
				set = instance.plugins[ name ];
			if ( !set || !instance.element[ 0 ].parentNode || instance.element[ 0 ].parentNode.nodeType === 11 ) {
				return;
			}

			for ( i = 0; i < set.length; i++ ) {
				if ( instance.options[ set[ i ][ 0 ] ] ) {
					set[ i ][ 1 ].apply( instance.element, args );
				}
			}
		}
	},

	// only used by resizable
	hasScroll: function( el, a ) {

		//If overflow is hidden, the element might have extra content, but the user wants to hide it
		if ( $( el ).css( "overflow" ) === "hidden") {
			return false;
		}

		var scroll = ( a && a === "left" ) ? "scrollLeft" : "scrollTop",
			has = false;

		if ( el[ scroll ] > 0 ) {
			return true;
		}

		// TODO: determine which cases actually cause this to happen
		// if the element doesn't have the scroll set, see if it's possible to
		// set the scroll
		el[ scroll ] = 1;
		has = ( el[ scroll ] > 0 );
		el[ scroll ] = 0;
		return has;
	}
});

})( jQuery );

(function( $, undefined ) {

var uuid = 0,
	slice = Array.prototype.slice,
	_cleanData = $.cleanData;
$.cleanData = function( elems ) {
	for ( var i = 0, elem; (elem = elems[i]) != null; i++ ) {
		try {
			$( elem ).triggerHandler( "remove" );
		// http://bugs.jquery.com/ticket/8235
		} catch( e ) {}
	}
	_cleanData( elems );
};

$.widget = function( name, base, prototype ) {
	var fullName, existingConstructor, constructor, basePrototype,
		// proxiedPrototype allows the provided prototype to remain unmodified
		// so that it can be used as a mixin for multiple widgets (#8876)
		proxiedPrototype = {},
		namespace = name.split( "." )[ 0 ];

	name = name.split( "." )[ 1 ];
	fullName = namespace + "-" + name;

	if ( !prototype ) {
		prototype = base;
		base = $.Widget;
	}

	// create selector for plugin
	$.expr[ ":" ][ fullName.toLowerCase() ] = function( elem ) {
		return !!$.data( elem, fullName );
	};

	$[ namespace ] = $[ namespace ] || {};
	existingConstructor = $[ namespace ][ name ];
	constructor = $[ namespace ][ name ] = function( options, element ) {
		// allow instantiation without "new" keyword
		if ( !this._createWidget ) {
			return new constructor( options, element );
		}

		// allow instantiation without initializing for simple inheritance
		// must use "new" keyword (the code above always passes args)
		if ( arguments.length ) {
			this._createWidget( options, element );
		}
	};
	// extend with the existing constructor to carry over any static properties
	$.extend( constructor, existingConstructor, {
		version: prototype.version,
		// copy the object used to create the prototype in case we need to
		// redefine the widget later
		_proto: $.extend( {}, prototype ),
		// track widgets that inherit from this widget in case this widget is
		// redefined after a widget inherits from it
		_childConstructors: []
	});

	basePrototype = new base();
	// we need to make the options hash a property directly on the new instance
	// otherwise we'll modify the options hash on the prototype that we're
	// inheriting from
	basePrototype.options = $.widget.extend( {}, basePrototype.options );
	$.each( prototype, function( prop, value ) {
		if ( !$.isFunction( value ) ) {
			proxiedPrototype[ prop ] = value;
			return;
		}
		proxiedPrototype[ prop ] = (function() {
			var _super = function() {
					return base.prototype[ prop ].apply( this, arguments );
				},
				_superApply = function( args ) {
					return base.prototype[ prop ].apply( this, args );
				};
			return function() {
				var __super = this._super,
					__superApply = this._superApply,
					returnValue;

				this._super = _super;
				this._superApply = _superApply;

				returnValue = value.apply( this, arguments );

				this._super = __super;
				this._superApply = __superApply;

				return returnValue;
			};
		})();
	});
	constructor.prototype = $.widget.extend( basePrototype, {
		// TODO: remove support for widgetEventPrefix
		// always use the name + a colon as the prefix, e.g., draggable:start
		// don't prefix for widgets that aren't DOM-based
		widgetEventPrefix: existingConstructor ? basePrototype.widgetEventPrefix : name
	}, proxiedPrototype, {
		constructor: constructor,
		namespace: namespace,
		widgetName: name,
		widgetFullName: fullName
	});

	// If this widget is being redefined then we need to find all widgets that
	// are inheriting from it and redefine all of them so that they inherit from
	// the new version of this widget. We're essentially trying to replace one
	// level in the prototype chain.
	if ( existingConstructor ) {
		$.each( existingConstructor._childConstructors, function( i, child ) {
			var childPrototype = child.prototype;

			// redefine the child widget using the same prototype that was
			// originally used, but inherit from the new version of the base
			$.widget( childPrototype.namespace + "." + childPrototype.widgetName, constructor, child._proto );
		});
		// remove the list of existing child constructors from the old constructor
		// so the old child constructors can be garbage collected
		delete existingConstructor._childConstructors;
	} else {
		base._childConstructors.push( constructor );
	}

	$.widget.bridge( name, constructor );
};

$.widget.extend = function( target ) {
	var input = slice.call( arguments, 1 ),
		inputIndex = 0,
		inputLength = input.length,
		key,
		value;
	for ( ; inputIndex < inputLength; inputIndex++ ) {
		for ( key in input[ inputIndex ] ) {
			value = input[ inputIndex ][ key ];
			if ( input[ inputIndex ].hasOwnProperty( key ) && value !== undefined ) {
				// Clone objects
				if ( $.isPlainObject( value ) ) {
					target[ key ] = $.isPlainObject( target[ key ] ) ?
						$.widget.extend( {}, target[ key ], value ) :
						// Don't extend strings, arrays, etc. with objects
						$.widget.extend( {}, value );
				// Copy everything else by reference
				} else {
					target[ key ] = value;
				}
			}
		}
	}
	return target;
};

$.widget.bridge = function( name, object ) {
	var fullName = object.prototype.widgetFullName || name;
	$.fn[ name ] = function( options ) {
		var isMethodCall = typeof options === "string",
			args = slice.call( arguments, 1 ),
			returnValue = this;

		// allow multiple hashes to be passed on init
		options = !isMethodCall && args.length ?
			$.widget.extend.apply( null, [ options ].concat(args) ) :
			options;

		if ( isMethodCall ) {
			this.each(function() {
				var methodValue,
					instance = $.data( this, fullName );
				if ( !instance ) {
					return $.error( "cannot call methods on " + name + " prior to initialization; " +
						"attempted to call method '" + options + "'" );
				}
				if ( !$.isFunction( instance[options] ) || options.charAt( 0 ) === "_" ) {
					return $.error( "no such method '" + options + "' for " + name + " widget instance" );
				}
				methodValue = instance[ options ].apply( instance, args );
				if ( methodValue !== instance && methodValue !== undefined ) {
					returnValue = methodValue && methodValue.jquery ?
						returnValue.pushStack( methodValue.get() ) :
						methodValue;
					return false;
				}
			});
		} else {
			this.each(function() {
				var instance = $.data( this, fullName );
				if ( instance ) {
					instance.option( options || {} )._init();
				} else {
					$.data( this, fullName, new object( options, this ) );
				}
			});
		}

		return returnValue;
	};
};

$.Widget = function( /* options, element */ ) {};
$.Widget._childConstructors = [];

$.Widget.prototype = {
	widgetName: "widget",
	widgetEventPrefix: "",
	defaultElement: "<div>",
	options: {
		disabled: false,

		// callbacks
		create: null
	},
	_createWidget: function( options, element ) {
		element = $( element || this.defaultElement || this )[ 0 ];
		this.element = $( element );
		this.uuid = uuid++;
		this.eventNamespace = "." + this.widgetName + this.uuid;
		this.options = $.widget.extend( {},
			this.options,
			this._getCreateOptions(),
			options );

		this.bindings = $();
		this.hoverable = $();
		this.focusable = $();

		if ( element !== this ) {
			$.data( element, this.widgetFullName, this );
			this._on( true, this.element, {
				remove: function( event ) {
					if ( event.target === element ) {
						this.destroy();
					}
				}
			});
			this.document = $( element.style ?
				// element within the document
				element.ownerDocument :
				// element is window or document
				element.document || element );
			this.window = $( this.document[0].defaultView || this.document[0].parentWindow );
		}

		this._create();
		this._trigger( "create", null, this._getCreateEventData() );
		this._init();
	},
	_getCreateOptions: $.noop,
	_getCreateEventData: $.noop,
	_create: $.noop,
	_init: $.noop,

	destroy: function() {
		this._destroy();
		// we can probably remove the unbind calls in 2.0
		// all event bindings should go through this._on()
		this.element
			.unbind( this.eventNamespace )
			// 1.9 BC for #7810
			// TODO remove dual storage
			.removeData( this.widgetName )
			.removeData( this.widgetFullName )
			// support: jquery <1.6.3
			// http://bugs.jquery.com/ticket/9413
			.removeData( $.camelCase( this.widgetFullName ) );
		this.widget()
			.unbind( this.eventNamespace )
			.removeAttr( "aria-disabled" )
			.removeClass(
				this.widgetFullName + "-disabled " +
				"ui-state-disabled" );

		// clean up events and states
		this.bindings.unbind( this.eventNamespace );
		this.hoverable.removeClass( "ui-state-hover" );
		this.focusable.removeClass( "ui-state-focus" );
	},
	_destroy: $.noop,

	widget: function() {
		return this.element;
	},

	option: function( key, value ) {
		var options = key,
			parts,
			curOption,
			i;

		if ( arguments.length === 0 ) {
			// don't return a reference to the internal hash
			return $.widget.extend( {}, this.options );
		}

		if ( typeof key === "string" ) {
			// handle nested keys, e.g., "foo.bar" => { foo: { bar: ___ } }
			options = {};
			parts = key.split( "." );
			key = parts.shift();
			if ( parts.length ) {
				curOption = options[ key ] = $.widget.extend( {}, this.options[ key ] );
				for ( i = 0; i < parts.length - 1; i++ ) {
					curOption[ parts[ i ] ] = curOption[ parts[ i ] ] || {};
					curOption = curOption[ parts[ i ] ];
				}
				key = parts.pop();
				if ( value === undefined ) {
					return curOption[ key ] === undefined ? null : curOption[ key ];
				}
				curOption[ key ] = value;
			} else {
				if ( value === undefined ) {
					return this.options[ key ] === undefined ? null : this.options[ key ];
				}
				options[ key ] = value;
			}
		}

		this._setOptions( options );

		return this;
	},
	_setOptions: function( options ) {
		var key;

		for ( key in options ) {
			this._setOption( key, options[ key ] );
		}

		return this;
	},
	_setOption: function( key, value ) {
		this.options[ key ] = value;

		if ( key === "disabled" ) {
			this.widget()
				.toggleClass( this.widgetFullName + "-disabled ui-state-disabled", !!value )
				.attr( "aria-disabled", value );
			this.hoverable.removeClass( "ui-state-hover" );
			this.focusable.removeClass( "ui-state-focus" );
		}

		return this;
	},

	enable: function() {
		return this._setOption( "disabled", false );
	},
	disable: function() {
		return this._setOption( "disabled", true );
	},

	_on: function( suppressDisabledCheck, element, handlers ) {
		var delegateElement,
			instance = this;

		// no suppressDisabledCheck flag, shuffle arguments
		if ( typeof suppressDisabledCheck !== "boolean" ) {
			handlers = element;
			element = suppressDisabledCheck;
			suppressDisabledCheck = false;
		}

		// no element argument, shuffle and use this.element
		if ( !handlers ) {
			handlers = element;
			element = this.element;
			delegateElement = this.widget();
		} else {
			// accept selectors, DOM elements
			element = delegateElement = $( element );
			this.bindings = this.bindings.add( element );
		}

		$.each( handlers, function( event, handler ) {
			function handlerProxy() {
				// allow widgets to customize the disabled handling
				// - disabled as an array instead of boolean
				// - disabled class as method for disabling individual parts
				if ( !suppressDisabledCheck &&
						( instance.options.disabled === true ||
							$( this ).hasClass( "ui-state-disabled" ) ) ) {
					return;
				}
				return ( typeof handler === "string" ? instance[ handler ] : handler )
					.apply( instance, arguments );
			}

			// copy the guid so direct unbinding works
			if ( typeof handler !== "string" ) {
				handlerProxy.guid = handler.guid =
					handler.guid || handlerProxy.guid || $.guid++;
			}

			var match = event.match( /^(\w+)\s*(.*)$/ ),
				eventName = match[1] + instance.eventNamespace,
				selector = match[2];
			if ( selector ) {
				delegateElement.delegate( selector, eventName, handlerProxy );
			} else {
				element.bind( eventName, handlerProxy );
			}
		});
	},

	_off: function( element, eventName ) {
		eventName = (eventName || "").split( " " ).join( this.eventNamespace + " " ) + this.eventNamespace;
		element.unbind( eventName ).undelegate( eventName );
	},

	_delay: function( handler, delay ) {
		function handlerProxy() {
			return ( typeof handler === "string" ? instance[ handler ] : handler )
				.apply( instance, arguments );
		}
		var instance = this;
		return setTimeout( handlerProxy, delay || 0 );
	},

	_hoverable: function( element ) {
		this.hoverable = this.hoverable.add( element );
		this._on( element, {
			mouseenter: function( event ) {
				$( event.currentTarget ).addClass( "ui-state-hover" );
			},
			mouseleave: function( event ) {
				$( event.currentTarget ).removeClass( "ui-state-hover" );
			}
		});
	},

	_focusable: function( element ) {
		this.focusable = this.focusable.add( element );
		this._on( element, {
			focusin: function( event ) {
				$( event.currentTarget ).addClass( "ui-state-focus" );
			},
			focusout: function( event ) {
				$( event.currentTarget ).removeClass( "ui-state-focus" );
			}
		});
	},

	_trigger: function( type, event, data ) {
		var prop, orig,
			callback = this.options[ type ];

		data = data || {};
		event = $.Event( event );
		event.type = ( type === this.widgetEventPrefix ?
			type :
			this.widgetEventPrefix + type ).toLowerCase();
		// the original event may come from any element
		// so we need to reset the target on the new event
		event.target = this.element[ 0 ];

		// copy original event properties over to the new event
		orig = event.originalEvent;
		if ( orig ) {
			for ( prop in orig ) {
				if ( !( prop in event ) ) {
					event[ prop ] = orig[ prop ];
				}
			}
		}

		this.element.trigger( event, data );
		return !( $.isFunction( callback ) &&
			callback.apply( this.element[0], [ event ].concat( data ) ) === false ||
			event.isDefaultPrevented() );
	}
};

$.each( { show: "fadeIn", hide: "fadeOut" }, function( method, defaultEffect ) {
	$.Widget.prototype[ "_" + method ] = function( element, options, callback ) {
		if ( typeof options === "string" ) {
			options = { effect: options };
		}
		var hasOptions,
			effectName = !options ?
				method :
				options === true || typeof options === "number" ?
					defaultEffect :
					options.effect || defaultEffect;
		options = options || {};
		if ( typeof options === "number" ) {
			options = { duration: options };
		}
		hasOptions = !$.isEmptyObject( options );
		options.complete = callback;
		if ( options.delay ) {
			element.delay( options.delay );
		}
		if ( hasOptions && $.effects && $.effects.effect[ effectName ] ) {
			element[ method ]( options );
		} else if ( effectName !== method && element[ effectName ] ) {
			element[ effectName ]( options.duration, options.easing, callback );
		} else {
			element.queue(function( next ) {
				$( this )[ method ]();
				if ( callback ) {
					callback.call( element[ 0 ] );
				}
				next();
			});
		}
	};
});

})( jQuery );

(function( $, undefined ) {

var mouseHandled = false;
$( document ).mouseup( function() {
	mouseHandled = false;
});

$.widget("ui.mouse", {
	version: "1.10.3",
	options: {
		cancel: "input,textarea,button,select,option",
		distance: 1,
		delay: 0
	},
	_mouseInit: function() {
		var that = this;

		this.element
			.bind("mousedown."+this.widgetName, function(event) {
				return that._mouseDown(event);
			})
			.bind("click."+this.widgetName, function(event) {
				if (true === $.data(event.target, that.widgetName + ".preventClickEvent")) {
					$.removeData(event.target, that.widgetName + ".preventClickEvent");
					event.stopImmediatePropagation();
					return false;
				}
			});

		this.started = false;
	},

	// TODO: make sure destroying one instance of mouse doesn't mess with
	// other instances of mouse
	_mouseDestroy: function() {
		this.element.unbind("."+this.widgetName);
		if ( this._mouseMoveDelegate ) {
			$(document)
				.unbind("mousemove."+this.widgetName, this._mouseMoveDelegate)
				.unbind("mouseup."+this.widgetName, this._mouseUpDelegate);
		}
	},

	_mouseDown: function(event) {
		// don't let more than one widget handle mouseStart
		if( mouseHandled ) { return; }

		// we may have missed mouseup (out of window)
		(this._mouseStarted && this._mouseUp(event));

		this._mouseDownEvent = event;

		var that = this,
			btnIsLeft = (event.which === 1),
			// event.target.nodeName works around a bug in IE 8 with
			// disabled inputs (#7620)
			elIsCancel = (typeof this.options.cancel === "string" && event.target.nodeName ? $(event.target).closest(this.options.cancel).length : false);
		if (!btnIsLeft || elIsCancel || !this._mouseCapture(event)) {
			return true;
		}

		this.mouseDelayMet = !this.options.delay;
		if (!this.mouseDelayMet) {
			this._mouseDelayTimer = setTimeout(function() {
				that.mouseDelayMet = true;
			}, this.options.delay);
		}

		if (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {
			this._mouseStarted = (this._mouseStart(event) !== false);
			if (!this._mouseStarted) {
				event.preventDefault();
				return true;
			}
		}

		// Click event may never have fired (Gecko & Opera)
		if (true === $.data(event.target, this.widgetName + ".preventClickEvent")) {
			$.removeData(event.target, this.widgetName + ".preventClickEvent");
		}

		// these delegates are required to keep context
		this._mouseMoveDelegate = function(event) {
			return that._mouseMove(event);
		};
		this._mouseUpDelegate = function(event) {
			return that._mouseUp(event);
		};
		$(document)
			.bind("mousemove."+this.widgetName, this._mouseMoveDelegate)
			.bind("mouseup."+this.widgetName, this._mouseUpDelegate);

		event.preventDefault();

		mouseHandled = true;
		return true;
	},

	_mouseMove: function(event) {
		// IE mouseup check - mouseup happened when mouse was out of window
		if ($.ui.ie && ( !document.documentMode || document.documentMode < 9 ) && !event.button) {
			return this._mouseUp(event);
		}

		if (this._mouseStarted) {
			this._mouseDrag(event);
			return event.preventDefault();
		}

		if (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {
			this._mouseStarted =
				(this._mouseStart(this._mouseDownEvent, event) !== false);
			(this._mouseStarted ? this._mouseDrag(event) : this._mouseUp(event));
		}

		return !this._mouseStarted;
	},

	_mouseUp: function(event) {
		$(document)
			.unbind("mousemove."+this.widgetName, this._mouseMoveDelegate)
			.unbind("mouseup."+this.widgetName, this._mouseUpDelegate);

		if (this._mouseStarted) {
			this._mouseStarted = false;

			if (event.target === this._mouseDownEvent.target) {
				$.data(event.target, this.widgetName + ".preventClickEvent", true);
			}

			this._mouseStop(event);
		}

		return false;
	},

	_mouseDistanceMet: function(event) {
		return (Math.max(
				Math.abs(this._mouseDownEvent.pageX - event.pageX),
				Math.abs(this._mouseDownEvent.pageY - event.pageY)
			) >= this.options.distance
		);
	},

	_mouseDelayMet: function(/* event */) {
		return this.mouseDelayMet;
	},

	// These are placeholder methods, to be overriden by extending plugin
	_mouseStart: function(/* event */) {},
	_mouseDrag: function(/* event */) {},
	_mouseStop: function(/* event */) {},
	_mouseCapture: function(/* event */) { return true; }
});

})(jQuery);

(function( $, undefined ) {

$.widget("ui.draggable", $.ui.mouse, {
	version: "1.10.3",
	widgetEventPrefix: "drag",
	options: {
		addClasses: true,
		appendTo: "parent",
		axis: false,
		connectToSortable: false,
		containment: false,
		cursor: "auto",
		cursorAt: false,
		grid: false,
		handle: false,
		helper: "original",
		iframeFix: false,
		opacity: false,
		refreshPositions: false,
		revert: false,
		revertDuration: 500,
		scope: "default",
		scroll: true,
		scrollSensitivity: 20,
		scrollSpeed: 20,
		snap: false,
		snapMode: "both",
		snapTolerance: 20,
		stack: false,
		zIndex: false,

		// callbacks
		drag: null,
		start: null,
		stop: null
	},
	_create: function() {

		if (this.options.helper === "original" && !(/^(?:r|a|f)/).test(this.element.css("position"))) {
			this.element[0].style.position = "relative";
		}
		if (this.options.addClasses){
			this.element.addClass("ui-draggable");
		}
		if (this.options.disabled){
			this.element.addClass("ui-draggable-disabled");
		}

		this._mouseInit();

	},

	_destroy: function() {
		this.element.removeClass( "ui-draggable ui-draggable-dragging ui-draggable-disabled" );
		this._mouseDestroy();
	},

	_mouseCapture: function(event) {

		var o = this.options;

		// among others, prevent a drag on a resizable-handle
		if (this.helper || o.disabled || $(event.target).closest(".ui-resizable-handle").length > 0) {
			return false;
		}

		//Quit if we're not on a valid handle
		this.handle = this._getHandle(event);
		if (!this.handle) {
			return false;
		}

		$(o.iframeFix === true ? "iframe" : o.iframeFix).each(function() {
			$("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>")
			.css({
				width: this.offsetWidth+"px", height: this.offsetHeight+"px",
				position: "absolute", opacity: "0.001", zIndex: 1000
			})
			.css($(this).offset())
			.appendTo("body");
		});

		return true;

	},

	_mouseStart: function(event) {

		var o = this.options;

		//Create and append the visible helper
		this.helper = this._createHelper(event);

		this.helper.addClass("ui-draggable-dragging");

		//Cache the helper size
		this._cacheHelperProportions();

		//If ddmanager is used for droppables, set the global draggable
		if($.ui.ddmanager) {
			$.ui.ddmanager.current = this;
		}

		/*
		 * - Position generation -
		 * This block generates everything position related - it's the core of draggables.
		 */

		//Cache the margins of the original element
		this._cacheMargins();

		//Store the helper's css position
		this.cssPosition = this.helper.css( "position" );
		this.scrollParent = this.helper.scrollParent();
		this.offsetParent = this.helper.offsetParent();
		this.offsetParentCssPosition = this.offsetParent.css( "position" );

		//The element's absolute position on the page minus margins
		this.offset = this.positionAbs = this.element.offset();
		this.offset = {
			top: this.offset.top - this.margins.top,
			left: this.offset.left - this.margins.left
		};

		//Reset scroll cache
		this.offset.scroll = false;

		$.extend(this.offset, {
			click: { //Where the click happened, relative to the element
				left: event.pageX - this.offset.left,
				top: event.pageY - this.offset.top
			},
			parent: this._getParentOffset(),
			relative: this._getRelativeOffset() //This is a relative to absolute position minus the actual position calculation - only used for relative positioned helper
		});

		//Generate the original position
		this.originalPosition = this.position = this._generatePosition(event);
		this.originalPageX = event.pageX;
		this.originalPageY = event.pageY;

		//Adjust the mouse offset relative to the helper if "cursorAt" is supplied
		(o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt));

		//Set a containment if given in the options
		this._setContainment();

		//Trigger event + callbacks
		if(this._trigger("start", event) === false) {
			this._clear();
			return false;
		}

		//Recache the helper size
		this._cacheHelperProportions();

		//Prepare the droppable offsets
		if ($.ui.ddmanager && !o.dropBehaviour) {
			$.ui.ddmanager.prepareOffsets(this, event);
		}


		this._mouseDrag(event, true); //Execute the drag once - this causes the helper not to be visible before getting its correct position

		//If the ddmanager is used for droppables, inform the manager that dragging has started (see #5003)
		if ( $.ui.ddmanager ) {
			$.ui.ddmanager.dragStart(this, event);
		}

		return true;
	},

	_mouseDrag: function(event, noPropagation) {
		// reset any necessary cached properties (see #5009)
		if ( this.offsetParentCssPosition === "fixed" ) {
			this.offset.parent = this._getParentOffset();
		}

		//Compute the helpers position
		this.position = this._generatePosition(event);
		this.positionAbs = this._convertPositionTo("absolute");

		//Call plugins and callbacks and use the resulting position if something is returned
		if (!noPropagation) {
			var ui = this._uiHash();
			if(this._trigger("drag", event, ui) === false) {
				this._mouseUp({});
				return false;
			}
			this.position = ui.position;
		}

		if(!this.options.axis || this.options.axis !== "y") {
			this.helper[0].style.left = this.position.left+"px";
		}
		if(!this.options.axis || this.options.axis !== "x") {
			this.helper[0].style.top = this.position.top+"px";
		}
		if($.ui.ddmanager) {
			$.ui.ddmanager.drag(this, event);
		}

		return false;
	},

	_mouseStop: function(event) {

		//If we are using droppables, inform the manager about the drop
		var that = this,
			dropped = false;
		if ($.ui.ddmanager && !this.options.dropBehaviour) {
			dropped = $.ui.ddmanager.drop(this, event);
		}

		//if a drop comes from outside (a sortable)
		if(this.dropped) {
			dropped = this.dropped;
			this.dropped = false;
		}

		//if the original element is no longer in the DOM don't bother to continue (see #8269)
		if ( this.options.helper === "original" && !$.contains( this.element[ 0 ].ownerDocument, this.element[ 0 ] ) ) {
			return false;
		}

		if((this.options.revert === "invalid" && !dropped) || (this.options.revert === "valid" && dropped) || this.options.revert === true || ($.isFunction(this.options.revert) && this.options.revert.call(this.element, dropped))) {
			$(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function() {
				if(that._trigger("stop", event) !== false) {
					that._clear();
				}
			});
		} else {
			if(this._trigger("stop", event) !== false) {
				this._clear();
			}
		}

		return false;
	},

	_mouseUp: function(event) {
		//Remove frame helpers
		$("div.ui-draggable-iframeFix").each(function() {
			this.parentNode.removeChild(this);
		});

		//If the ddmanager is used for droppables, inform the manager that dragging has stopped (see #5003)
		if( $.ui.ddmanager ) {
			$.ui.ddmanager.dragStop(this, event);
		}

		return $.ui.mouse.prototype._mouseUp.call(this, event);
	},

	cancel: function() {

		if(this.helper.is(".ui-draggable-dragging")) {
			this._mouseUp({});
		} else {
			this._clear();
		}

		return this;

	},

	_getHandle: function(event) {
		return this.options.handle ?
			!!$( event.target ).closest( this.element.find( this.options.handle ) ).length :
			true;
	},

	_createHelper: function(event) {

		var o = this.options,
			helper = $.isFunction(o.helper) ? $(o.helper.apply(this.element[0], [event])) : (o.helper === "clone" ? this.element.clone().removeAttr("id") : this.element);

		if(!helper.parents("body").length) {
			helper.appendTo((o.appendTo === "parent" ? this.element[0].parentNode : o.appendTo));
		}

		if(helper[0] !== this.element[0] && !(/(fixed|absolute)/).test(helper.css("position"))) {
			helper.css("position", "absolute");
		}

		return helper;

	},

	_adjustOffsetFromHelper: function(obj) {
		if (typeof obj === "string") {
			obj = obj.split(" ");
		}
		if ($.isArray(obj)) {
			obj = {left: +obj[0], top: +obj[1] || 0};
		}
		if ("left" in obj) {
			this.offset.click.left = obj.left + this.margins.left;
		}
		if ("right" in obj) {
			this.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;
		}
		if ("top" in obj) {
			this.offset.click.top = obj.top + this.margins.top;
		}
		if ("bottom" in obj) {
			this.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;
		}
	},

	_getParentOffset: function() {

		//Get the offsetParent and cache its position
		var po = this.offsetParent.offset();

		// This is a special case where we need to modify a offset calculated on start, since the following happened:
		// 1. The position of the helper is absolute, so it's position is calculated based on the next positioned parent
		// 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn't the document, which means that
		//    the scroll is included in the initial calculation of the offset of the parent, and never recalculated upon drag
		if(this.cssPosition === "absolute" && this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) {
			po.left += this.scrollParent.scrollLeft();
			po.top += this.scrollParent.scrollTop();
		}

		//This needs to be actually done for all browsers, since pageX/pageY includes this information
		//Ugly IE fix
		if((this.offsetParent[0] === document.body) ||
			(this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() === "html" && $.ui.ie)) {
			po = { top: 0, left: 0 };
		}

		return {
			top: po.top + (parseInt(this.offsetParent.css("borderTopWidth"),10) || 0),
			left: po.left + (parseInt(this.offsetParent.css("borderLeftWidth"),10) || 0)
		};

	},

	_getRelativeOffset: function() {

		if(this.cssPosition === "relative") {
			var p = this.element.position();
			return {
				top: p.top - (parseInt(this.helper.css("top"),10) || 0) + this.scrollParent.scrollTop(),
				left: p.left - (parseInt(this.helper.css("left"),10) || 0) + this.scrollParent.scrollLeft()
			};
		} else {
			return { top: 0, left: 0 };
		}

	},

	_cacheMargins: function() {
		this.margins = {
			left: (parseInt(this.element.css("marginLeft"),10) || 0),
			top: (parseInt(this.element.css("marginTop"),10) || 0),
			right: (parseInt(this.element.css("marginRight"),10) || 0),
			bottom: (parseInt(this.element.css("marginBottom"),10) || 0)
		};
	},

	_cacheHelperProportions: function() {
		this.helperProportions = {
			width: this.helper.outerWidth(),
			height: this.helper.outerHeight()
		};
	},

	_setContainment: function() {

		var over, c, ce,
			o = this.options;

		if ( !o.containment ) {
			this.containment = null;
			return;
		}

		if ( o.containment === "window" ) {
			this.containment = [
				$( window ).scrollLeft() - this.offset.relative.left - this.offset.parent.left,
				$( window ).scrollTop() - this.offset.relative.top - this.offset.parent.top,
				$( window ).scrollLeft() + $( window ).width() - this.helperProportions.width - this.margins.left,
				$( window ).scrollTop() + ( $( window ).height() || document.body.parentNode.scrollHeight ) - this.helperProportions.height - this.margins.top
			];
			return;
		}

		if ( o.containment === "document") {
			this.containment = [
				0,
				0,
				$( document ).width() - this.helperProportions.width - this.margins.left,
				( $( document ).height() || document.body.parentNode.scrollHeight ) - this.helperProportions.height - this.margins.top
			];
			return;
		}

		if ( o.containment.constructor === Array ) {
			this.containment = o.containment;
			return;
		}

		if ( o.containment === "parent" ) {
			o.containment = this.helper[ 0 ].parentNode;
		}

		c = $( o.containment );
		ce = c[ 0 ];

		if( !ce ) {
			return;
		}

		over = c.css( "overflow" ) !== "hidden";

		this.containment = [
			( parseInt( c.css( "borderLeftWidth" ), 10 ) || 0 ) + ( parseInt( c.css( "paddingLeft" ), 10 ) || 0 ),
			( parseInt( c.css( "borderTopWidth" ), 10 ) || 0 ) + ( parseInt( c.css( "paddingTop" ), 10 ) || 0 ) ,
			( over ? Math.max( ce.scrollWidth, ce.offsetWidth ) : ce.offsetWidth ) - ( parseInt( c.css( "borderRightWidth" ), 10 ) || 0 ) - ( parseInt( c.css( "paddingRight" ), 10 ) || 0 ) - this.helperProportions.width - this.margins.left - this.margins.right,
			( over ? Math.max( ce.scrollHeight, ce.offsetHeight ) : ce.offsetHeight ) - ( parseInt( c.css( "borderBottomWidth" ), 10 ) || 0 ) - ( parseInt( c.css( "paddingBottom" ), 10 ) || 0 ) - this.helperProportions.height - this.margins.top  - this.margins.bottom
		];
		this.relative_container = c;
	},

	_convertPositionTo: function(d, pos) {

		if(!pos) {
			pos = this.position;
		}

		var mod = d === "absolute" ? 1 : -1,
			scroll = this.cssPosition === "absolute" && !( this.scrollParent[ 0 ] !== document && $.contains( this.scrollParent[ 0 ], this.offsetParent[ 0 ] ) ) ? this.offsetParent : this.scrollParent;

		//Cache the scroll
		if (!this.offset.scroll) {
			this.offset.scroll = {top : scroll.scrollTop(), left : scroll.scrollLeft()};
		}

		return {
			top: (
				pos.top	+																// The absolute mouse position
				this.offset.relative.top * mod +										// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.top * mod -										// The offsetParent's offset without borders (offset + border)
				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : this.offset.scroll.top ) * mod )
			),
			left: (
				pos.left +																// The absolute mouse position
				this.offset.relative.left * mod +										// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.left * mod	-										// The offsetParent's offset without borders (offset + border)
				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : this.offset.scroll.left ) * mod )
			)
		};

	},

	_generatePosition: function(event) {

		var containment, co, top, left,
			o = this.options,
			scroll = this.cssPosition === "absolute" && !( this.scrollParent[ 0 ] !== document && $.contains( this.scrollParent[ 0 ], this.offsetParent[ 0 ] ) ) ? this.offsetParent : this.scrollParent,
			pageX = event.pageX,
			pageY = event.pageY;

		//Cache the scroll
		if (!this.offset.scroll) {
			this.offset.scroll = {top : scroll.scrollTop(), left : scroll.scrollLeft()};
		}

		/*
		 * - Position constraining -
		 * Constrain the position to a mix of grid, containment.
		 */

		// If we are not dragging yet, we won't check for options
		if ( this.originalPosition ) {
			if ( this.containment ) {
				if ( this.relative_container ){
					co = this.relative_container.offset();
					containment = [
						this.containment[ 0 ] + co.left,
						this.containment[ 1 ] + co.top,
						this.containment[ 2 ] + co.left,
						this.containment[ 3 ] + co.top
					];
				}
				else {
					containment = this.containment;
				}

				if(event.pageX - this.offset.click.left < containment[0]) {
					pageX = containment[0] + this.offset.click.left;
				}
				if(event.pageY - this.offset.click.top < containment[1]) {
					pageY = containment[1] + this.offset.click.top;
				}
				if(event.pageX - this.offset.click.left > containment[2]) {
					pageX = containment[2] + this.offset.click.left;
				}
				if(event.pageY - this.offset.click.top > containment[3]) {
					pageY = containment[3] + this.offset.click.top;
				}
			}

			if(o.grid) {
				//Check for grid elements set to 0 to prevent divide by 0 error causing invalid argument errors in IE (see ticket #6950)
				top = o.grid[1] ? this.originalPageY + Math.round((pageY - this.originalPageY) / o.grid[1]) * o.grid[1] : this.originalPageY;
				pageY = containment ? ((top - this.offset.click.top >= containment[1] || top - this.offset.click.top > containment[3]) ? top : ((top - this.offset.click.top >= containment[1]) ? top - o.grid[1] : top + o.grid[1])) : top;

				left = o.grid[0] ? this.originalPageX + Math.round((pageX - this.originalPageX) / o.grid[0]) * o.grid[0] : this.originalPageX;
				pageX = containment ? ((left - this.offset.click.left >= containment[0] || left - this.offset.click.left > containment[2]) ? left : ((left - this.offset.click.left >= containment[0]) ? left - o.grid[0] : left + o.grid[0])) : left;
			}

		}

		return {
			top: (
				pageY -																	// The absolute mouse position
				this.offset.click.top	-												// Click offset (relative to the element)
				this.offset.relative.top -												// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.top +												// The offsetParent's offset without borders (offset + border)
				( this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : this.offset.scroll.top )
			),
			left: (
				pageX -																	// The absolute mouse position
				this.offset.click.left -												// Click offset (relative to the element)
				this.offset.relative.left -												// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.left +												// The offsetParent's offset without borders (offset + border)
				( this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : this.offset.scroll.left )
			)
		};

	},

	_clear: function() {
		this.helper.removeClass("ui-draggable-dragging");
		if(this.helper[0] !== this.element[0] && !this.cancelHelperRemoval) {
			this.helper.remove();
		}
		this.helper = null;
		this.cancelHelperRemoval = false;
	},

	// From now on bulk stuff - mainly helpers

	_trigger: function(type, event, ui) {
		ui = ui || this._uiHash();
		$.ui.plugin.call(this, type, [event, ui]);
		//The absolute position has to be recalculated after plugins
		if(type === "drag") {
			this.positionAbs = this._convertPositionTo("absolute");
		}
		return $.Widget.prototype._trigger.call(this, type, event, ui);
	},

	plugins: {},

	_uiHash: function() {
		return {
			helper: this.helper,
			position: this.position,
			originalPosition: this.originalPosition,
			offset: this.positionAbs
		};
	}

});

$.ui.plugin.add("draggable", "connectToSortable", {
	start: function(event, ui) {

		var inst = $(this).data("ui-draggable"), o = inst.options,
			uiSortable = $.extend({}, ui, { item: inst.element });
		inst.sortables = [];
		$(o.connectToSortable).each(function() {
			var sortable = $.data(this, "ui-sortable");
			if (sortable && !sortable.options.disabled) {
				inst.sortables.push({
					instance: sortable,
					shouldRevert: sortable.options.revert
				});
				sortable.refreshPositions();	// Call the sortable's refreshPositions at drag start to refresh the containerCache since the sortable container cache is used in drag and needs to be up to date (this will ensure it's initialised as well as being kept in step with any changes that might have happened on the page).
				sortable._trigger("activate", event, uiSortable);
			}
		});

	},
	stop: function(event, ui) {

		//If we are still over the sortable, we fake the stop event of the sortable, but also remove helper
		var inst = $(this).data("ui-draggable"),
			uiSortable = $.extend({}, ui, { item: inst.element });

		$.each(inst.sortables, function() {
			if(this.instance.isOver) {

				this.instance.isOver = 0;

				inst.cancelHelperRemoval = true; //Don't remove the helper in the draggable instance
				this.instance.cancelHelperRemoval = false; //Remove it in the sortable instance (so sortable plugins like revert still work)

				//The sortable revert is supported, and we have to set a temporary dropped variable on the draggable to support revert: "valid/invalid"
				if(this.shouldRevert) {
					this.instance.options.revert = this.shouldRevert;
				}

				//Trigger the stop of the sortable
				this.instance._mouseStop(event);

				this.instance.options.helper = this.instance.options._helper;

				//If the helper has been the original item, restore properties in the sortable
				if(inst.options.helper === "original") {
					this.instance.currentItem.css({ top: "auto", left: "auto" });
				}

			} else {
				this.instance.cancelHelperRemoval = false; //Remove the helper in the sortable instance
				this.instance._trigger("deactivate", event, uiSortable);
			}

		});

	},
	drag: function(event, ui) {

		var inst = $(this).data("ui-draggable"), that = this;

		$.each(inst.sortables, function() {

			var innermostIntersecting = false,
				thisSortable = this;

			//Copy over some variables to allow calling the sortable's native _intersectsWith
			this.instance.positionAbs = inst.positionAbs;
			this.instance.helperProportions = inst.helperProportions;
			this.instance.offset.click = inst.offset.click;

			if(this.instance._intersectsWith(this.instance.containerCache)) {
				innermostIntersecting = true;
				$.each(inst.sortables, function () {
					this.instance.positionAbs = inst.positionAbs;
					this.instance.helperProportions = inst.helperProportions;
					this.instance.offset.click = inst.offset.click;
					if (this !== thisSortable &&
						this.instance._intersectsWith(this.instance.containerCache) &&
						$.contains(thisSortable.instance.element[0], this.instance.element[0])
					) {
						innermostIntersecting = false;
					}
					return innermostIntersecting;
				});
			}


			if(innermostIntersecting) {
				//If it intersects, we use a little isOver variable and set it once, so our move-in stuff gets fired only once
				if(!this.instance.isOver) {

					this.instance.isOver = 1;
					//Now we fake the start of dragging for the sortable instance,
					//by cloning the list group item, appending it to the sortable and using it as inst.currentItem
					//We can then fire the start event of the sortable with our passed browser event, and our own helper (so it doesn't create a new one)
					this.instance.currentItem = $(that).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item", true);
					this.instance.options._helper = this.instance.options.helper; //Store helper option to later restore it
					this.instance.options.helper = function() { return ui.helper[0]; };

					event.target = this.instance.currentItem[0];
					this.instance._mouseCapture(event, true);
					this.instance._mouseStart(event, true, true);

					//Because the browser event is way off the new appended portlet, we modify a couple of variables to reflect the changes
					this.instance.offset.click.top = inst.offset.click.top;
					this.instance.offset.click.left = inst.offset.click.left;
					this.instance.offset.parent.left -= inst.offset.parent.left - this.instance.offset.parent.left;
					this.instance.offset.parent.top -= inst.offset.parent.top - this.instance.offset.parent.top;

					inst._trigger("toSortable", event);
					inst.dropped = this.instance.element; //draggable revert needs that
					//hack so receive/update callbacks work (mostly)
					inst.currentItem = inst.element;
					this.instance.fromOutside = inst;

				}

				//Provided we did all the previous steps, we can fire the drag event of the sortable on every draggable drag, when it intersects with the sortable
				if(this.instance.currentItem) {
					this.instance._mouseDrag(event);
				}

			} else {

				//If it doesn't intersect with the sortable, and it intersected before,
				//we fake the drag stop of the sortable, but make sure it doesn't remove the helper by using cancelHelperRemoval
				if(this.instance.isOver) {

					this.instance.isOver = 0;
					this.instance.cancelHelperRemoval = true;

					//Prevent reverting on this forced stop
					this.instance.options.revert = false;

					// The out event needs to be triggered independently
					this.instance._trigger("out", event, this.instance._uiHash(this.instance));

					this.instance._mouseStop(event, true);
					this.instance.options.helper = this.instance.options._helper;

					//Now we remove our currentItem, the list group clone again, and the placeholder, and animate the helper back to it's original size
					this.instance.currentItem.remove();
					if(this.instance.placeholder) {
						this.instance.placeholder.remove();
					}

					inst._trigger("fromSortable", event);
					inst.dropped = false; //draggable revert needs that
				}

			}

		});

	}
});

$.ui.plugin.add("draggable", "cursor", {
	start: function() {
		var t = $("body"), o = $(this).data("ui-draggable").options;
		if (t.css("cursor")) {
			o._cursor = t.css("cursor");
		}
		t.css("cursor", o.cursor);
	},
	stop: function() {
		var o = $(this).data("ui-draggable").options;
		if (o._cursor) {
			$("body").css("cursor", o._cursor);
		}
	}
});

$.ui.plugin.add("draggable", "opacity", {
	start: function(event, ui) {
		var t = $(ui.helper), o = $(this).data("ui-draggable").options;
		if(t.css("opacity")) {
			o._opacity = t.css("opacity");
		}
		t.css("opacity", o.opacity);
	},
	stop: function(event, ui) {
		var o = $(this).data("ui-draggable").options;
		if(o._opacity) {
			$(ui.helper).css("opacity", o._opacity);
		}
	}
});

$.ui.plugin.add("draggable", "scroll", {
	start: function() {
		var i = $(this).data("ui-draggable");
		if(i.scrollParent[0] !== document && i.scrollParent[0].tagName !== "HTML") {
			i.overflowOffset = i.scrollParent.offset();
		}
	},
	drag: function( event ) {

		var i = $(this).data("ui-draggable"), o = i.options, scrolled = false;

		if(i.scrollParent[0] !== document && i.scrollParent[0].tagName !== "HTML") {

			if(!o.axis || o.axis !== "x") {
				if((i.overflowOffset.top + i.scrollParent[0].offsetHeight) - event.pageY < o.scrollSensitivity) {
					i.scrollParent[0].scrollTop = scrolled = i.scrollParent[0].scrollTop + o.scrollSpeed;
				} else if(event.pageY - i.overflowOffset.top < o.scrollSensitivity) {
					i.scrollParent[0].scrollTop = scrolled = i.scrollParent[0].scrollTop - o.scrollSpeed;
				}
			}

			if(!o.axis || o.axis !== "y") {
				if((i.overflowOffset.left + i.scrollParent[0].offsetWidth) - event.pageX < o.scrollSensitivity) {
					i.scrollParent[0].scrollLeft = scrolled = i.scrollParent[0].scrollLeft + o.scrollSpeed;
				} else if(event.pageX - i.overflowOffset.left < o.scrollSensitivity) {
					i.scrollParent[0].scrollLeft = scrolled = i.scrollParent[0].scrollLeft - o.scrollSpeed;
				}
			}

		} else {

			if(!o.axis || o.axis !== "x") {
				if(event.pageY - $(document).scrollTop() < o.scrollSensitivity) {
					scrolled = $(document).scrollTop($(document).scrollTop() - o.scrollSpeed);
				} else if($(window).height() - (event.pageY - $(document).scrollTop()) < o.scrollSensitivity) {
					scrolled = $(document).scrollTop($(document).scrollTop() + o.scrollSpeed);
				}
			}

			if(!o.axis || o.axis !== "y") {
				if(event.pageX - $(document).scrollLeft() < o.scrollSensitivity) {
					scrolled = $(document).scrollLeft($(document).scrollLeft() - o.scrollSpeed);
				} else if($(window).width() - (event.pageX - $(document).scrollLeft()) < o.scrollSensitivity) {
					scrolled = $(document).scrollLeft($(document).scrollLeft() + o.scrollSpeed);
				}
			}

		}

		if(scrolled !== false && $.ui.ddmanager && !o.dropBehaviour) {
			$.ui.ddmanager.prepareOffsets(i, event);
		}

	}
});

$.ui.plugin.add("draggable", "snap", {
	start: function() {

		var i = $(this).data("ui-draggable"),
			o = i.options;

		i.snapElements = [];

		$(o.snap.constructor !== String ? ( o.snap.items || ":data(ui-draggable)" ) : o.snap).each(function() {
			var $t = $(this),
				$o = $t.offset();
			if(this !== i.element[0]) {
				i.snapElements.push({
					item: this,
					width: $t.outerWidth(), height: $t.outerHeight(),
					top: $o.top, left: $o.left
				});
			}
		});

	},
	drag: function(event, ui) {

		var ts, bs, ls, rs, l, r, t, b, i, first,
			inst = $(this).data("ui-draggable"),
			o = inst.options,
			d = o.snapTolerance,
			x1 = ui.offset.left, x2 = x1 + inst.helperProportions.width,
			y1 = ui.offset.top, y2 = y1 + inst.helperProportions.height;

		for (i = inst.snapElements.length - 1; i >= 0; i--){

			l = inst.snapElements[i].left;
			r = l + inst.snapElements[i].width;
			t = inst.snapElements[i].top;
			b = t + inst.snapElements[i].height;

			if ( x2 < l - d || x1 > r + d || y2 < t - d || y1 > b + d || !$.contains( inst.snapElements[ i ].item.ownerDocument, inst.snapElements[ i ].item ) ) {
				if(inst.snapElements[i].snapping) {
					(inst.options.snap.release && inst.options.snap.release.call(inst.element, event, $.extend(inst._uiHash(), { snapItem: inst.snapElements[i].item })));
				}
				inst.snapElements[i].snapping = false;
				continue;
			}

			if(o.snapMode !== "inner") {
				ts = Math.abs(t - y2) <= d;
				bs = Math.abs(b - y1) <= d;
				ls = Math.abs(l - x2) <= d;
				rs = Math.abs(r - x1) <= d;
				if(ts) {
					ui.position.top = inst._convertPositionTo("relative", { top: t - inst.helperProportions.height, left: 0 }).top - inst.margins.top;
				}
				if(bs) {
					ui.position.top = inst._convertPositionTo("relative", { top: b, left: 0 }).top - inst.margins.top;
				}
				if(ls) {
					ui.position.left = inst._convertPositionTo("relative", { top: 0, left: l - inst.helperProportions.width }).left - inst.margins.left;
				}
				if(rs) {
					ui.position.left = inst._convertPositionTo("relative", { top: 0, left: r }).left - inst.margins.left;
				}
			}

			first = (ts || bs || ls || rs);

			if(o.snapMode !== "outer") {
				ts = Math.abs(t - y1) <= d;
				bs = Math.abs(b - y2) <= d;
				ls = Math.abs(l - x1) <= d;
				rs = Math.abs(r - x2) <= d;
				if(ts) {
					ui.position.top = inst._convertPositionTo("relative", { top: t, left: 0 }).top - inst.margins.top;
				}
				if(bs) {
					ui.position.top = inst._convertPositionTo("relative", { top: b - inst.helperProportions.height, left: 0 }).top - inst.margins.top;
				}
				if(ls) {
					ui.position.left = inst._convertPositionTo("relative", { top: 0, left: l }).left - inst.margins.left;
				}
				if(rs) {
					ui.position.left = inst._convertPositionTo("relative", { top: 0, left: r - inst.helperProportions.width }).left - inst.margins.left;
				}
			}

			if(!inst.snapElements[i].snapping && (ts || bs || ls || rs || first)) {
				(inst.options.snap.snap && inst.options.snap.snap.call(inst.element, event, $.extend(inst._uiHash(), { snapItem: inst.snapElements[i].item })));
			}
			inst.snapElements[i].snapping = (ts || bs || ls || rs || first);

		}

	}
});

$.ui.plugin.add("draggable", "stack", {
	start: function() {
		var min,
			o = this.data("ui-draggable").options,
			group = $.makeArray($(o.stack)).sort(function(a,b) {
				return (parseInt($(a).css("zIndex"),10) || 0) - (parseInt($(b).css("zIndex"),10) || 0);
			});

		if (!group.length) { return; }

		min = parseInt($(group[0]).css("zIndex"), 10) || 0;
		$(group).each(function(i) {
			$(this).css("zIndex", min + i);
		});
		this.css("zIndex", (min + group.length));
	}
});

$.ui.plugin.add("draggable", "zIndex", {
	start: function(event, ui) {
		var t = $(ui.helper), o = $(this).data("ui-draggable").options;
		if(t.css("zIndex")) {
			o._zIndex = t.css("zIndex");
		}
		t.css("zIndex", o.zIndex);
	},
	stop: function(event, ui) {
		var o = $(this).data("ui-draggable").options;
		if(o._zIndex) {
			$(ui.helper).css("zIndex", o._zIndex);
		}
	}
});

})(jQuery);

(function( $, undefined ) {

function isOverAxis( x, reference, size ) {
	return ( x > reference ) && ( x < ( reference + size ) );
}

$.widget("ui.droppable", {
	version: "1.10.3",
	widgetEventPrefix: "drop",
	options: {
		accept: "*",
		activeClass: false,
		addClasses: true,
		greedy: false,
		hoverClass: false,
		scope: "default",
		tolerance: "intersect",

		// callbacks
		activate: null,
		deactivate: null,
		drop: null,
		out: null,
		over: null
	},
	_create: function() {

		var o = this.options,
			accept = o.accept;

		this.isover = false;
		this.isout = true;

		this.accept = $.isFunction(accept) ? accept : function(d) {
			return d.is(accept);
		};

		//Store the droppable's proportions
		this.proportions = { width: this.element[0].offsetWidth, height: this.element[0].offsetHeight };

		// Add the reference and positions to the manager
		$.ui.ddmanager.droppables[o.scope] = $.ui.ddmanager.droppables[o.scope] || [];
		$.ui.ddmanager.droppables[o.scope].push(this);

		(o.addClasses && this.element.addClass("ui-droppable"));

	},

	_destroy: function() {
		var i = 0,
			drop = $.ui.ddmanager.droppables[this.options.scope];

		for ( ; i < drop.length; i++ ) {
			if ( drop[i] === this ) {
				drop.splice(i, 1);
			}
		}

		this.element.removeClass("ui-droppable ui-droppable-disabled");
	},

	_setOption: function(key, value) {

		if(key === "accept") {
			this.accept = $.isFunction(value) ? value : function(d) {
				return d.is(value);
			};
		}
		$.Widget.prototype._setOption.apply(this, arguments);
	},

	_activate: function(event) {
		var draggable = $.ui.ddmanager.current;
		if(this.options.activeClass) {
			this.element.addClass(this.options.activeClass);
		}
		if(draggable){
			this._trigger("activate", event, this.ui(draggable));
		}
	},

	_deactivate: function(event) {
		var draggable = $.ui.ddmanager.current;
		if(this.options.activeClass) {
			this.element.removeClass(this.options.activeClass);
		}
		if(draggable){
			this._trigger("deactivate", event, this.ui(draggable));
		}
	},

	_over: function(event) {

		var draggable = $.ui.ddmanager.current;

		// Bail if draggable and droppable are same element
		if (!draggable || (draggable.currentItem || draggable.element)[0] === this.element[0]) {
			return;
		}

		if (this.accept.call(this.element[0],(draggable.currentItem || draggable.element))) {
			if(this.options.hoverClass) {
				this.element.addClass(this.options.hoverClass);
			}
			this._trigger("over", event, this.ui(draggable));
		}

	},

	_out: function(event) {

		var draggable = $.ui.ddmanager.current;

		// Bail if draggable and droppable are same element
		if (!draggable || (draggable.currentItem || draggable.element)[0] === this.element[0]) {
			return;
		}

		if (this.accept.call(this.element[0],(draggable.currentItem || draggable.element))) {
			if(this.options.hoverClass) {
				this.element.removeClass(this.options.hoverClass);
			}
			this._trigger("out", event, this.ui(draggable));
		}

	},

	_drop: function(event,custom) {

		var draggable = custom || $.ui.ddmanager.current,
			childrenIntersection = false;

		// Bail if draggable and droppable are same element
		if (!draggable || (draggable.currentItem || draggable.element)[0] === this.element[0]) {
			return false;
		}

		this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function() {
			var inst = $.data(this, "ui-droppable");
			if(
				inst.options.greedy &&
				!inst.options.disabled &&
				inst.options.scope === draggable.options.scope &&
				inst.accept.call(inst.element[0], (draggable.currentItem || draggable.element)) &&
				$.ui.intersect(draggable, $.extend(inst, { offset: inst.element.offset() }), inst.options.tolerance)
			) { childrenIntersection = true; return false; }
		});
		if(childrenIntersection) {
			return false;
		}

		if(this.accept.call(this.element[0],(draggable.currentItem || draggable.element))) {
			if(this.options.activeClass) {
				this.element.removeClass(this.options.activeClass);
			}
			if(this.options.hoverClass) {
				this.element.removeClass(this.options.hoverClass);
			}
			this._trigger("drop", event, this.ui(draggable));
			return this.element;
		}

		return false;

	},

	ui: function(c) {
		return {
			draggable: (c.currentItem || c.element),
			helper: c.helper,
			position: c.position,
			offset: c.positionAbs
		};
	}

});

$.ui.intersect = function(draggable, droppable, toleranceMode) {

	if (!droppable.offset) {
		return false;
	}

	var draggableLeft, draggableTop,
		x1 = (draggable.positionAbs || draggable.position.absolute).left, x2 = x1 + draggable.helperProportions.width,
		y1 = (draggable.positionAbs || draggable.position.absolute).top, y2 = y1 + draggable.helperProportions.height,
		l = droppable.offset.left, r = l + droppable.proportions.width,
		t = droppable.offset.top, b = t + droppable.proportions.height;

	switch (toleranceMode) {
		case "fit":
			return (l <= x1 && x2 <= r && t <= y1 && y2 <= b);
		case "intersect":
			return (l < x1 + (draggable.helperProportions.width / 2) && // Right Half
				x2 - (draggable.helperProportions.width / 2) < r && // Left Half
				t < y1 + (draggable.helperProportions.height / 2) && // Bottom Half
				y2 - (draggable.helperProportions.height / 2) < b ); // Top Half
		case "pointer":
			draggableLeft = ((draggable.positionAbs || draggable.position.absolute).left + (draggable.clickOffset || draggable.offset.click).left);
			draggableTop = ((draggable.positionAbs || draggable.position.absolute).top + (draggable.clickOffset || draggable.offset.click).top);
			return isOverAxis( draggableTop, t, droppable.proportions.height ) && isOverAxis( draggableLeft, l, droppable.proportions.width );
		case "touch":
			return (
				(y1 >= t && y1 <= b) ||	// Top edge touching
				(y2 >= t && y2 <= b) ||	// Bottom edge touching
				(y1 < t && y2 > b)		// Surrounded vertically
			) && (
				(x1 >= l && x1 <= r) ||	// Left edge touching
				(x2 >= l && x2 <= r) ||	// Right edge touching
				(x1 < l && x2 > r)		// Surrounded horizontally
			);
		default:
			return false;
		}

};

/*
	This manager tracks offsets of draggables and droppables
*/
$.ui.ddmanager = {
	current: null,
	droppables: { "default": [] },
	prepareOffsets: function(t, event) {

		var i, j,
			m = $.ui.ddmanager.droppables[t.options.scope] || [],
			type = event ? event.type : null, // workaround for #2317
			list = (t.currentItem || t.element).find(":data(ui-droppable)").addBack();

		droppablesLoop: for (i = 0; i < m.length; i++) {

			//No disabled and non-accepted
			if(m[i].options.disabled || (t && !m[i].accept.call(m[i].element[0],(t.currentItem || t.element)))) {
				continue;
			}

			// Filter out elements in the current dragged item
			for (j=0; j < list.length; j++) {
				if(list[j] === m[i].element[0]) {
					m[i].proportions.height = 0;
					continue droppablesLoop;
				}
			}

			m[i].visible = m[i].element.css("display") !== "none";
			if(!m[i].visible) {
				continue;
			}

			//Activate the droppable if used directly from draggables
			if(type === "mousedown") {
				m[i]._activate.call(m[i], event);
			}

			m[i].offset = m[i].element.offset();
			m[i].proportions = { width: m[i].element[0].offsetWidth, height: m[i].element[0].offsetHeight };

		}

	},
	drop: function(draggable, event) {

		var dropped = false;
		// Create a copy of the droppables in case the list changes during the drop (#9116)
		$.each(($.ui.ddmanager.droppables[draggable.options.scope] || []).slice(), function() {

			if(!this.options) {
				return;
			}
			if (!this.options.disabled && this.visible && $.ui.intersect(draggable, this, this.options.tolerance)) {
				dropped = this._drop.call(this, event) || dropped;
			}

			if (!this.options.disabled && this.visible && this.accept.call(this.element[0],(draggable.currentItem || draggable.element))) {
				this.isout = true;
				this.isover = false;
				this._deactivate.call(this, event);
			}

		});
		return dropped;

	},
	dragStart: function( draggable, event ) {
		//Listen for scrolling so that if the dragging causes scrolling the position of the droppables can be recalculated (see #5003)
		draggable.element.parentsUntil( "body" ).bind( "scroll.droppable", function() {
			if( !draggable.options.refreshPositions ) {
				$.ui.ddmanager.prepareOffsets( draggable, event );
			}
		});
	},
	drag: function(draggable, event) {

		//If you have a highly dynamic page, you might try this option. It renders positions every time you move the mouse.
		if(draggable.options.refreshPositions) {
			$.ui.ddmanager.prepareOffsets(draggable, event);
		}

		//Run through all droppables and check their positions based on specific tolerance options
		$.each($.ui.ddmanager.droppables[draggable.options.scope] || [], function() {

			if(this.options.disabled || this.greedyChild || !this.visible) {
				return;
			}

			var parentInstance, scope, parent,
				intersects = $.ui.intersect(draggable, this, this.options.tolerance),
				c = !intersects && this.isover ? "isout" : (intersects && !this.isover ? "isover" : null);
			if(!c) {
				return;
			}

			if (this.options.greedy) {
				// find droppable parents with same scope
				scope = this.options.scope;
				parent = this.element.parents(":data(ui-droppable)").filter(function () {
					return $.data(this, "ui-droppable").options.scope === scope;
				});

				if (parent.length) {
					parentInstance = $.data(parent[0], "ui-droppable");
					parentInstance.greedyChild = (c === "isover");
				}
			}

			// we just moved into a greedy child
			if (parentInstance && c === "isover") {
				parentInstance.isover = false;
				parentInstance.isout = true;
				parentInstance._out.call(parentInstance, event);
			}

			this[c] = true;
			this[c === "isout" ? "isover" : "isout"] = false;
			this[c === "isover" ? "_over" : "_out"].call(this, event);

			// we just moved out of a greedy child
			if (parentInstance && c === "isout") {
				parentInstance.isout = false;
				parentInstance.isover = true;
				parentInstance._over.call(parentInstance, event);
			}
		});

	},
	dragStop: function( draggable, event ) {
		draggable.element.parentsUntil( "body" ).unbind( "scroll.droppable" );
		//Call prepareOffsets one final time since IE does not fire return scroll events when overflow was caused by drag (see #5003)
		if( !draggable.options.refreshPositions ) {
			$.ui.ddmanager.prepareOffsets( draggable, event );
		}
	}
};

})(jQuery);

(function( $, undefined ) {

function num(v) {
	return parseInt(v, 10) || 0;
}

function isNumber(value) {
	return !isNaN(parseInt(value, 10));
}

$.widget("ui.resizable", $.ui.mouse, {
	version: "1.10.3",
	widgetEventPrefix: "resize",
	options: {
		alsoResize: false,
		animate: false,
		animateDuration: "slow",
		animateEasing: "swing",
		aspectRatio: false,
		autoHide: false,
		containment: false,
		ghost: false,
		grid: false,
		handles: "e,s,se",
		helper: false,
		maxHeight: null,
		maxWidth: null,
		minHeight: 10,
		minWidth: 10,
		// See #7960
		zIndex: 90,

		// callbacks
		resize: null,
		start: null,
		stop: null
	},
	_create: function() {

		var n, i, handle, axis, hname,
			that = this,
			o = this.options;
		this.element.addClass("ui-resizable");

		$.extend(this, {
			_aspectRatio: !!(o.aspectRatio),
			aspectRatio: o.aspectRatio,
			originalElement: this.element,
			_proportionallyResizeElements: [],
			_helper: o.helper || o.ghost || o.animate ? o.helper || "ui-resizable-helper" : null
		});

		//Wrap the element if it cannot hold child nodes
		if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)) {

			//Create a wrapper element and set the wrapper to the new current internal element
			this.element.wrap(
				$("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({
					position: this.element.css("position"),
					width: this.element.outerWidth(),
					height: this.element.outerHeight(),
					top: this.element.css("top"),
					left: this.element.css("left")
				})
			);

			//Overwrite the original this.element
			this.element = this.element.parent().data(
				"ui-resizable", this.element.data("ui-resizable")
			);

			this.elementIsWrapper = true;

			//Move margins to the wrapper
			this.element.css({ marginLeft: this.originalElement.css("marginLeft"), marginTop: this.originalElement.css("marginTop"), marginRight: this.originalElement.css("marginRight"), marginBottom: this.originalElement.css("marginBottom") });
			this.originalElement.css({ marginLeft: 0, marginTop: 0, marginRight: 0, marginBottom: 0});

			//Prevent Safari textarea resize
			this.originalResizeStyle = this.originalElement.css("resize");
			this.originalElement.css("resize", "none");

			//Push the actual element to our proportionallyResize internal array
			this._proportionallyResizeElements.push(this.originalElement.css({ position: "static", zoom: 1, display: "block" }));

			// avoid IE jump (hard set the margin)
			this.originalElement.css({ margin: this.originalElement.css("margin") });

			// fix handlers offset
			this._proportionallyResize();

		}

		this.handles = o.handles || (!$(".ui-resizable-handle", this.element).length ? "e,s,se" : { n: ".ui-resizable-n", e: ".ui-resizable-e", s: ".ui-resizable-s", w: ".ui-resizable-w", se: ".ui-resizable-se", sw: ".ui-resizable-sw", ne: ".ui-resizable-ne", nw: ".ui-resizable-nw" });
		if(this.handles.constructor === String) {

			if ( this.handles === "all") {
				this.handles = "n,e,s,w,se,sw,ne,nw";
			}

			n = this.handles.split(",");
			this.handles = {};

			for(i = 0; i < n.length; i++) {

				handle = $.trim(n[i]);
				hname = "ui-resizable-"+handle;
				axis = $("<div class='ui-resizable-handle " + hname + "'></div>");

				// Apply zIndex to all handles - see #7960
				axis.css({ zIndex: o.zIndex });

				//TODO : What's going on here?
				if ("se" === handle) {
					axis.addClass("ui-icon ui-icon-gripsmall-diagonal-se");
				}

				//Insert into internal handles object and append to element
				this.handles[handle] = ".ui-resizable-"+handle;
				this.element.append(axis);
			}

		}

		this._renderAxis = function(target) {

			var i, axis, padPos, padWrapper;

			target = target || this.element;

			for(i in this.handles) {

				if(this.handles[i].constructor === String) {
					this.handles[i] = $(this.handles[i], this.element).show();
				}

				//Apply pad to wrapper element, needed to fix axis position (textarea, inputs, scrolls)
				if (this.elementIsWrapper && this.originalElement[0].nodeName.match(/textarea|input|select|button/i)) {

					axis = $(this.handles[i], this.element);

					//Checking the correct pad and border
					padWrapper = /sw|ne|nw|se|n|s/.test(i) ? axis.outerHeight() : axis.outerWidth();

					//The padding type i have to apply...
					padPos = [ "padding",
						/ne|nw|n/.test(i) ? "Top" :
						/se|sw|s/.test(i) ? "Bottom" :
						/^e$/.test(i) ? "Right" : "Left" ].join("");

					target.css(padPos, padWrapper);

					this._proportionallyResize();

				}

				//TODO: What's that good for? There's not anything to be executed left
				if(!$(this.handles[i]).length) {
					continue;
				}
			}
		};

		//TODO: make renderAxis a prototype function
		this._renderAxis(this.element);

		this._handles = $(".ui-resizable-handle", this.element)
			.disableSelection();

		//Matching axis name
		this._handles.mouseover(function() {
			if (!that.resizing) {
				if (this.className) {
					axis = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);
				}
				//Axis, default = se
				that.axis = axis && axis[1] ? axis[1] : "se";
			}
		});

		//If we want to auto hide the elements
		if (o.autoHide) {
			this._handles.hide();
			$(this.element)
				.addClass("ui-resizable-autohide")
				.mouseenter(function() {
					if (o.disabled) {
						return;
					}
					$(this).removeClass("ui-resizable-autohide");
					that._handles.show();
				})
				.mouseleave(function(){
					if (o.disabled) {
						return;
					}
					if (!that.resizing) {
						$(this).addClass("ui-resizable-autohide");
						that._handles.hide();
					}
				});
		}

		//Initialize the mouse interaction
		this._mouseInit();

	},

	_destroy: function() {

		this._mouseDestroy();

		var wrapper,
			_destroy = function(exp) {
				$(exp).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing")
					.removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove();
			};

		//TODO: Unwrap at same DOM position
		if (this.elementIsWrapper) {
			_destroy(this.element);
			wrapper = this.element;
			this.originalElement.css({
				position: wrapper.css("position"),
				width: wrapper.outerWidth(),
				height: wrapper.outerHeight(),
				top: wrapper.css("top"),
				left: wrapper.css("left")
			}).insertAfter( wrapper );
			wrapper.remove();
		}

		this.originalElement.css("resize", this.originalResizeStyle);
		_destroy(this.originalElement);

		return this;
	},

	_mouseCapture: function(event) {
		var i, handle,
			capture = false;

		for (i in this.handles) {
			handle = $(this.handles[i])[0];
			if (handle === event.target || $.contains(handle, event.target)) {
				capture = true;
			}
		}

		return !this.options.disabled && capture;
	},

	_mouseStart: function(event) {

		var curleft, curtop, cursor,
			o = this.options,
			iniPos = this.element.position(),
			el = this.element;

		this.resizing = true;

		// bugfix for http://dev.jquery.com/ticket/1749
		if ( (/absolute/).test( el.css("position") ) ) {
			el.css({ position: "absolute", top: el.css("top"), left: el.css("left") });
		} else if (el.is(".ui-draggable")) {
			el.css({ position: "absolute", top: iniPos.top, left: iniPos.left });
		}

		this._renderProxy();

		curleft = num(this.helper.css("left"));
		curtop = num(this.helper.css("top"));

		if (o.containment) {
			curleft += $(o.containment).scrollLeft() || 0;
			curtop += $(o.containment).scrollTop() || 0;
		}

		//Store needed variables
		this.offset = this.helper.offset();
		this.position = { left: curleft, top: curtop };
		this.size = this._helper ? { width: el.outerWidth(), height: el.outerHeight() } : { width: el.width(), height: el.height() };
		this.originalSize = this._helper ? { width: el.outerWidth(), height: el.outerHeight() } : { width: el.width(), height: el.height() };
		this.originalPosition = { left: curleft, top: curtop };
		this.sizeDiff = { width: el.outerWidth() - el.width(), height: el.outerHeight() - el.height() };
		this.originalMousePosition = { left: event.pageX, top: event.pageY };

		//Aspect Ratio
		this.aspectRatio = (typeof o.aspectRatio === "number") ? o.aspectRatio : ((this.originalSize.width / this.originalSize.height) || 1);

		cursor = $(".ui-resizable-" + this.axis).css("cursor");
		$("body").css("cursor", cursor === "auto" ? this.axis + "-resize" : cursor);

		el.addClass("ui-resizable-resizing");
		this._propagate("start", event);
		return true;
	},

	_mouseDrag: function(event) {

		//Increase performance, avoid regex
		var data,
			el = this.helper, props = {},
			smp = this.originalMousePosition,
			a = this.axis,
			prevTop = this.position.top,
			prevLeft = this.position.left,
			prevWidth = this.size.width,
			prevHeight = this.size.height,
			dx = (event.pageX-smp.left)||0,
			dy = (event.pageY-smp.top)||0,
			trigger = this._change[a];

		if (!trigger) {
			return false;
		}

		// Calculate the attrs that will be change
		data = trigger.apply(this, [event, dx, dy]);

		// Put this in the mouseDrag handler since the user can start pressing shift while resizing
		this._updateVirtualBoundaries(event.shiftKey);
		if (this._aspectRatio || event.shiftKey) {
			data = this._updateRatio(data, event);
		}

		data = this._respectSize(data, event);

		this._updateCache(data);

		// plugins callbacks need to be called first
		this._propagate("resize", event);

		if (this.position.top !== prevTop) {
			props.top = this.position.top + "px";
		}
		if (this.position.left !== prevLeft) {
			props.left = this.position.left + "px";
		}
		if (this.size.width !== prevWidth) {
			props.width = this.size.width + "px";
		}
		if (this.size.height !== prevHeight) {
			props.height = this.size.height + "px";
		}
		el.css(props);

		if (!this._helper && this._proportionallyResizeElements.length) {
			this._proportionallyResize();
		}

		// Call the user callback if the element was resized
		if ( ! $.isEmptyObject(props) ) {
			this._trigger("resize", event, this.ui());
		}

		return false;
	},

	_mouseStop: function(event) {

		this.resizing = false;
		var pr, ista, soffseth, soffsetw, s, left, top,
			o = this.options, that = this;

		if(this._helper) {

			pr = this._proportionallyResizeElements;
			ista = pr.length && (/textarea/i).test(pr[0].nodeName);
			soffseth = ista && $.ui.hasScroll(pr[0], "left") /* TODO - jump height */ ? 0 : that.sizeDiff.height;
			soffsetw = ista ? 0 : that.sizeDiff.width;

			s = { width: (that.helper.width()  - soffsetw), height: (that.helper.height() - soffseth) };
			left = (parseInt(that.element.css("left"), 10) + (that.position.left - that.originalPosition.left)) || null;
			top = (parseInt(that.element.css("top"), 10) + (that.position.top - that.originalPosition.top)) || null;

			if (!o.animate) {
				this.element.css($.extend(s, { top: top, left: left }));
			}

			that.helper.height(that.size.height);
			that.helper.width(that.size.width);

			if (this._helper && !o.animate) {
				this._proportionallyResize();
			}
		}

		$("body").css("cursor", "auto");

		this.element.removeClass("ui-resizable-resizing");

		this._propagate("stop", event);

		if (this._helper) {
			this.helper.remove();
		}

		return false;

	},

	_updateVirtualBoundaries: function(forceAspectRatio) {
		var pMinWidth, pMaxWidth, pMinHeight, pMaxHeight, b,
			o = this.options;

		b = {
			minWidth: isNumber(o.minWidth) ? o.minWidth : 0,
			maxWidth: isNumber(o.maxWidth) ? o.maxWidth : Infinity,
			minHeight: isNumber(o.minHeight) ? o.minHeight : 0,
			maxHeight: isNumber(o.maxHeight) ? o.maxHeight : Infinity
		};

		if(this._aspectRatio || forceAspectRatio) {
			// We want to create an enclosing box whose aspect ration is the requested one
			// First, compute the "projected" size for each dimension based on the aspect ratio and other dimension
			pMinWidth = b.minHeight * this.aspectRatio;
			pMinHeight = b.minWidth / this.aspectRatio;
			pMaxWidth = b.maxHeight * this.aspectRatio;
			pMaxHeight = b.maxWidth / this.aspectRatio;

			if(pMinWidth > b.minWidth) {
				b.minWidth = pMinWidth;
			}
			if(pMinHeight > b.minHeight) {
				b.minHeight = pMinHeight;
			}
			if(pMaxWidth < b.maxWidth) {
				b.maxWidth = pMaxWidth;
			}
			if(pMaxHeight < b.maxHeight) {
				b.maxHeight = pMaxHeight;
			}
		}
		this._vBoundaries = b;
	},

	_updateCache: function(data) {
		this.offset = this.helper.offset();
		if (isNumber(data.left)) {
			this.position.left = data.left;
		}
		if (isNumber(data.top)) {
			this.position.top = data.top;
		}
		if (isNumber(data.height)) {
			this.size.height = data.height;
		}
		if (isNumber(data.width)) {
			this.size.width = data.width;
		}
	},

	_updateRatio: function( data ) {

		var cpos = this.position,
			csize = this.size,
			a = this.axis;

		if (isNumber(data.height)) {
			data.width = (data.height * this.aspectRatio);
		} else if (isNumber(data.width)) {
			data.height = (data.width / this.aspectRatio);
		}

		if (a === "sw") {
			data.left = cpos.left + (csize.width - data.width);
			data.top = null;
		}
		if (a === "nw") {
			data.top = cpos.top + (csize.height - data.height);
			data.left = cpos.left + (csize.width - data.width);
		}

		return data;
	},

	_respectSize: function( data ) {

		var o = this._vBoundaries,
			a = this.axis,
			ismaxw = isNumber(data.width) && o.maxWidth && (o.maxWidth < data.width), ismaxh = isNumber(data.height) && o.maxHeight && (o.maxHeight < data.height),
			isminw = isNumber(data.width) && o.minWidth && (o.minWidth > data.width), isminh = isNumber(data.height) && o.minHeight && (o.minHeight > data.height),
			dw = this.originalPosition.left + this.originalSize.width,
			dh = this.position.top + this.size.height,
			cw = /sw|nw|w/.test(a), ch = /nw|ne|n/.test(a);
		if (isminw) {
			data.width = o.minWidth;
		}
		if (isminh) {
			data.height = o.minHeight;
		}
		if (ismaxw) {
			data.width = o.maxWidth;
		}
		if (ismaxh) {
			data.height = o.maxHeight;
		}

		if (isminw && cw) {
			data.left = dw - o.minWidth;
		}
		if (ismaxw && cw) {
			data.left = dw - o.maxWidth;
		}
		if (isminh && ch) {
			data.top = dh - o.minHeight;
		}
		if (ismaxh && ch) {
			data.top = dh - o.maxHeight;
		}

		// fixing jump error on top/left - bug #2330
		if (!data.width && !data.height && !data.left && data.top) {
			data.top = null;
		} else if (!data.width && !data.height && !data.top && data.left) {
			data.left = null;
		}

		return data;
	},

	_proportionallyResize: function() {

		if (!this._proportionallyResizeElements.length) {
			return;
		}

		var i, j, borders, paddings, prel,
			element = this.helper || this.element;

		for ( i=0; i < this._proportionallyResizeElements.length; i++) {

			prel = this._proportionallyResizeElements[i];

			if (!this.borderDif) {
				this.borderDif = [];
				borders = [prel.css("borderTopWidth"), prel.css("borderRightWidth"), prel.css("borderBottomWidth"), prel.css("borderLeftWidth")];
				paddings = [prel.css("paddingTop"), prel.css("paddingRight"), prel.css("paddingBottom"), prel.css("paddingLeft")];

				for ( j = 0; j < borders.length; j++ ) {
					this.borderDif[ j ] = ( parseInt( borders[ j ], 10 ) || 0 ) + ( parseInt( paddings[ j ], 10 ) || 0 );
				}
			}

			prel.css({
				height: (element.height() - this.borderDif[0] - this.borderDif[2]) || 0,
				width: (element.width() - this.borderDif[1] - this.borderDif[3]) || 0
			});

		}

	},

	_renderProxy: function() {

		var el = this.element, o = this.options;
		this.elementOffset = el.offset();

		if(this._helper) {

			this.helper = this.helper || $("<div style='overflow:hidden;'></div>");

			this.helper.addClass(this._helper).css({
				width: this.element.outerWidth() - 1,
				height: this.element.outerHeight() - 1,
				position: "absolute",
				left: this.elementOffset.left +"px",
				top: this.elementOffset.top +"px",
				zIndex: ++o.zIndex //TODO: Don't modify option
			});

			this.helper
				.appendTo("body")
				.disableSelection();

		} else {
			this.helper = this.element;
		}

	},

	_change: {
		e: function(event, dx) {
			return { width: this.originalSize.width + dx };
		},
		w: function(event, dx) {
			var cs = this.originalSize, sp = this.originalPosition;
			return { left: sp.left + dx, width: cs.width - dx };
		},
		n: function(event, dx, dy) {
			var cs = this.originalSize, sp = this.originalPosition;
			return { top: sp.top + dy, height: cs.height - dy };
		},
		s: function(event, dx, dy) {
			return { height: this.originalSize.height + dy };
		},
		se: function(event, dx, dy) {
			return $.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [event, dx, dy]));
		},
		sw: function(event, dx, dy) {
			return $.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [event, dx, dy]));
		},
		ne: function(event, dx, dy) {
			return $.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [event, dx, dy]));
		},
		nw: function(event, dx, dy) {
			return $.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [event, dx, dy]));
		}
	},

	_propagate: function(n, event) {
		$.ui.plugin.call(this, n, [event, this.ui()]);
		(n !== "resize" && this._trigger(n, event, this.ui()));
	},

	plugins: {},

	ui: function() {
		return {
			originalElement: this.originalElement,
			element: this.element,
			helper: this.helper,
			position: this.position,
			size: this.size,
			originalSize: this.originalSize,
			originalPosition: this.originalPosition
		};
	}

});

/*
 * Resizable Extensions
 */

$.ui.plugin.add("resizable", "animate", {

	stop: function( event ) {
		var that = $(this).data("ui-resizable"),
			o = that.options,
			pr = that._proportionallyResizeElements,
			ista = pr.length && (/textarea/i).test(pr[0].nodeName),
			soffseth = ista && $.ui.hasScroll(pr[0], "left") /* TODO - jump height */ ? 0 : that.sizeDiff.height,
			soffsetw = ista ? 0 : that.sizeDiff.width,
			style = { width: (that.size.width - soffsetw), height: (that.size.height - soffseth) },
			left = (parseInt(that.element.css("left"), 10) + (that.position.left - that.originalPosition.left)) || null,
			top = (parseInt(that.element.css("top"), 10) + (that.position.top - that.originalPosition.top)) || null;

		that.element.animate(
			$.extend(style, top && left ? { top: top, left: left } : {}), {
				duration: o.animateDuration,
				easing: o.animateEasing,
				step: function() {

					var data = {
						width: parseInt(that.element.css("width"), 10),
						height: parseInt(that.element.css("height"), 10),
						top: parseInt(that.element.css("top"), 10),
						left: parseInt(that.element.css("left"), 10)
					};

					if (pr && pr.length) {
						$(pr[0]).css({ width: data.width, height: data.height });
					}

					// propagating resize, and updating values for each animation step
					that._updateCache(data);
					that._propagate("resize", event);

				}
			}
		);
	}

});

$.ui.plugin.add("resizable", "containment", {

	start: function() {
		var element, p, co, ch, cw, width, height,
			that = $(this).data("ui-resizable"),
			o = that.options,
			el = that.element,
			oc = o.containment,
			ce = (oc instanceof $) ? oc.get(0) : (/parent/.test(oc)) ? el.parent().get(0) : oc;

		if (!ce) {
			return;
		}

		that.containerElement = $(ce);

		if (/document/.test(oc) || oc === document) {
			that.containerOffset = { left: 0, top: 0 };
			that.containerPosition = { left: 0, top: 0 };

			that.parentData = {
				element: $(document), left: 0, top: 0,
				width: $(document).width(), height: $(document).height() || document.body.parentNode.scrollHeight
			};
		}

		// i'm a node, so compute top, left, right, bottom
		else {
			element = $(ce);
			p = [];
			$([ "Top", "Right", "Left", "Bottom" ]).each(function(i, name) { p[i] = num(element.css("padding" + name)); });

			that.containerOffset = element.offset();
			that.containerPosition = element.position();
			that.containerSize = { height: (element.innerHeight() - p[3]), width: (element.innerWidth() - p[1]) };

			co = that.containerOffset;
			ch = that.containerSize.height;
			cw = that.containerSize.width;
			width = ($.ui.hasScroll(ce, "left") ? ce.scrollWidth : cw );
			height = ($.ui.hasScroll(ce) ? ce.scrollHeight : ch);

			that.parentData = {
				element: ce, left: co.left, top: co.top, width: width, height: height
			};
		}
	},

	resize: function( event ) {
		var woset, hoset, isParent, isOffsetRelative,
			that = $(this).data("ui-resizable"),
			o = that.options,
			co = that.containerOffset, cp = that.position,
			pRatio = that._aspectRatio || event.shiftKey,
			cop = { top:0, left:0 }, ce = that.containerElement;

		if (ce[0] !== document && (/static/).test(ce.css("position"))) {
			cop = co;
		}

		if (cp.left < (that._helper ? co.left : 0)) {
			that.size.width = that.size.width + (that._helper ? (that.position.left - co.left) : (that.position.left - cop.left));
			if (pRatio) {
				that.size.height = that.size.width / that.aspectRatio;
			}
			that.position.left = o.helper ? co.left : 0;
		}

		if (cp.top < (that._helper ? co.top : 0)) {
			that.size.height = that.size.height + (that._helper ? (that.position.top - co.top) : that.position.top);
			if (pRatio) {
				that.size.width = that.size.height * that.aspectRatio;
			}
			that.position.top = that._helper ? co.top : 0;
		}

		that.offset.left = that.parentData.left+that.position.left;
		that.offset.top = that.parentData.top+that.position.top;

		woset = Math.abs( (that._helper ? that.offset.left - cop.left : (that.offset.left - cop.left)) + that.sizeDiff.width );
		hoset = Math.abs( (that._helper ? that.offset.top - cop.top : (that.offset.top - co.top)) + that.sizeDiff.height );

		isParent = that.containerElement.get(0) === that.element.parent().get(0);
		isOffsetRelative = /relative|absolute/.test(that.containerElement.css("position"));

		if(isParent && isOffsetRelative) {
			woset -= that.parentData.left;
		}

		if (woset + that.size.width >= that.parentData.width) {
			that.size.width = that.parentData.width - woset;
			if (pRatio) {
				that.size.height = that.size.width / that.aspectRatio;
			}
		}

		if (hoset + that.size.height >= that.parentData.height) {
			that.size.height = that.parentData.height - hoset;
			if (pRatio) {
				that.size.width = that.size.height * that.aspectRatio;
			}
		}
	},

	stop: function(){
		var that = $(this).data("ui-resizable"),
			o = that.options,
			co = that.containerOffset,
			cop = that.containerPosition,
			ce = that.containerElement,
			helper = $(that.helper),
			ho = helper.offset(),
			w = helper.outerWidth() - that.sizeDiff.width,
			h = helper.outerHeight() - that.sizeDiff.height;

		if (that._helper && !o.animate && (/relative/).test(ce.css("position"))) {
			$(this).css({ left: ho.left - cop.left - co.left, width: w, height: h });
		}

		if (that._helper && !o.animate && (/static/).test(ce.css("position"))) {
			$(this).css({ left: ho.left - cop.left - co.left, width: w, height: h });
		}

	}
});

$.ui.plugin.add("resizable", "alsoResize", {

	start: function () {
		var that = $(this).data("ui-resizable"),
			o = that.options,
			_store = function (exp) {
				$(exp).each(function() {
					var el = $(this);
					el.data("ui-resizable-alsoresize", {
						width: parseInt(el.width(), 10), height: parseInt(el.height(), 10),
						left: parseInt(el.css("left"), 10), top: parseInt(el.css("top"), 10)
					});
				});
			};

		if (typeof(o.alsoResize) === "object" && !o.alsoResize.parentNode) {
			if (o.alsoResize.length) { o.alsoResize = o.alsoResize[0]; _store(o.alsoResize); }
			else { $.each(o.alsoResize, function (exp) { _store(exp); }); }
		}else{
			_store(o.alsoResize);
		}
	},

	resize: function (event, ui) {
		var that = $(this).data("ui-resizable"),
			o = that.options,
			os = that.originalSize,
			op = that.originalPosition,
			delta = {
				height: (that.size.height - os.height) || 0, width: (that.size.width - os.width) || 0,
				top: (that.position.top - op.top) || 0, left: (that.position.left - op.left) || 0
			},

			_alsoResize = function (exp, c) {
				$(exp).each(function() {
					var el = $(this), start = $(this).data("ui-resizable-alsoresize"), style = {},
						css = c && c.length ? c : el.parents(ui.originalElement[0]).length ? ["width", "height"] : ["width", "height", "top", "left"];

					$.each(css, function (i, prop) {
						var sum = (start[prop]||0) + (delta[prop]||0);
						if (sum && sum >= 0) {
							style[prop] = sum || null;
						}
					});

					el.css(style);
				});
			};

		if (typeof(o.alsoResize) === "object" && !o.alsoResize.nodeType) {
			$.each(o.alsoResize, function (exp, c) { _alsoResize(exp, c); });
		}else{
			_alsoResize(o.alsoResize);
		}
	},

	stop: function () {
		$(this).removeData("resizable-alsoresize");
	}
});

$.ui.plugin.add("resizable", "ghost", {

	start: function() {

		var that = $(this).data("ui-resizable"), o = that.options, cs = that.size;

		that.ghost = that.originalElement.clone();
		that.ghost
			.css({ opacity: 0.25, display: "block", position: "relative", height: cs.height, width: cs.width, margin: 0, left: 0, top: 0 })
			.addClass("ui-resizable-ghost")
			.addClass(typeof o.ghost === "string" ? o.ghost : "");

		that.ghost.appendTo(that.helper);

	},

	resize: function(){
		var that = $(this).data("ui-resizable");
		if (that.ghost) {
			that.ghost.css({ position: "relative", height: that.size.height, width: that.size.width });
		}
	},

	stop: function() {
		var that = $(this).data("ui-resizable");
		if (that.ghost && that.helper) {
			that.helper.get(0).removeChild(that.ghost.get(0));
		}
	}

});

$.ui.plugin.add("resizable", "grid", {

	resize: function() {
		var that = $(this).data("ui-resizable"),
			o = that.options,
			cs = that.size,
			os = that.originalSize,
			op = that.originalPosition,
			a = that.axis,
			grid = typeof o.grid === "number" ? [o.grid, o.grid] : o.grid,
			gridX = (grid[0]||1),
			gridY = (grid[1]||1),
			ox = Math.round((cs.width - os.width) / gridX) * gridX,
			oy = Math.round((cs.height - os.height) / gridY) * gridY,
			newWidth = os.width + ox,
			newHeight = os.height + oy,
			isMaxWidth = o.maxWidth && (o.maxWidth < newWidth),
			isMaxHeight = o.maxHeight && (o.maxHeight < newHeight),
			isMinWidth = o.minWidth && (o.minWidth > newWidth),
			isMinHeight = o.minHeight && (o.minHeight > newHeight);

		o.grid = grid;

		if (isMinWidth) {
			newWidth = newWidth + gridX;
		}
		if (isMinHeight) {
			newHeight = newHeight + gridY;
		}
		if (isMaxWidth) {
			newWidth = newWidth - gridX;
		}
		if (isMaxHeight) {
			newHeight = newHeight - gridY;
		}

		if (/^(se|s|e)$/.test(a)) {
			that.size.width = newWidth;
			that.size.height = newHeight;
		} else if (/^(ne)$/.test(a)) {
			that.size.width = newWidth;
			that.size.height = newHeight;
			that.position.top = op.top - oy;
		} else if (/^(sw)$/.test(a)) {
			that.size.width = newWidth;
			that.size.height = newHeight;
			that.position.left = op.left - ox;
		} else {
			that.size.width = newWidth;
			that.size.height = newHeight;
			that.position.top = op.top - oy;
			that.position.left = op.left - ox;
		}
	}

});

})(jQuery);

(function( $, undefined ) {

$.widget("ui.selectable", $.ui.mouse, {
	version: "1.10.3",
	options: {
		appendTo: "body",
		autoRefresh: true,
		distance: 0,
		filter: "*",
		tolerance: "touch",

		// callbacks
		selected: null,
		selecting: null,
		start: null,
		stop: null,
		unselected: null,
		unselecting: null
	},
	_create: function() {
		var selectees,
			that = this;

		this.element.addClass("ui-selectable");

		this.dragged = false;

		// cache selectee children based on filter
		this.refresh = function() {
			selectees = $(that.options.filter, that.element[0]);
			selectees.addClass("ui-selectee");
			selectees.each(function() {
				var $this = $(this),
					pos = $this.offset();
				$.data(this, "selectable-item", {
					element: this,
					$element: $this,
					left: pos.left,
					top: pos.top,
					right: pos.left + $this.outerWidth(),
					bottom: pos.top + $this.outerHeight(),
					startselected: false,
					selected: $this.hasClass("ui-selected"),
					selecting: $this.hasClass("ui-selecting"),
					unselecting: $this.hasClass("ui-unselecting")
				});
			});
		};
		this.refresh();

		this.selectees = selectees.addClass("ui-selectee");

		this._mouseInit();

		this.helper = $("<div class='ui-selectable-helper'></div>");
	},

	_destroy: function() {
		this.selectees
			.removeClass("ui-selectee")
			.removeData("selectable-item");
		this.element
			.removeClass("ui-selectable ui-selectable-disabled");
		this._mouseDestroy();
	},

	_mouseStart: function(event) {
		var that = this,
			options = this.options;

		this.opos = [event.pageX, event.pageY];

		if (this.options.disabled) {
			return;
		}

		this.selectees = $(options.filter, this.element[0]);

		this._trigger("start", event);

		$(options.appendTo).append(this.helper);
		// position helper (lasso)
		this.helper.css({
			"left": event.pageX,
			"top": event.pageY,
			"width": 0,
			"height": 0
		});

		if (options.autoRefresh) {
			this.refresh();
		}

		this.selectees.filter(".ui-selected").each(function() {
			var selectee = $.data(this, "selectable-item");
			selectee.startselected = true;
			if (!event.metaKey && !event.ctrlKey) {
				selectee.$element.removeClass("ui-selected");
				selectee.selected = false;
				selectee.$element.addClass("ui-unselecting");
				selectee.unselecting = true;
				// selectable UNSELECTING callback
				that._trigger("unselecting", event, {
					unselecting: selectee.element
				});
			}
		});

		$(event.target).parents().addBack().each(function() {
			var doSelect,
				selectee = $.data(this, "selectable-item");
			if (selectee) {
				doSelect = (!event.metaKey && !event.ctrlKey) || !selectee.$element.hasClass("ui-selected");
				selectee.$element
					.removeClass(doSelect ? "ui-unselecting" : "ui-selected")
					.addClass(doSelect ? "ui-selecting" : "ui-unselecting");
				selectee.unselecting = !doSelect;
				selectee.selecting = doSelect;
				selectee.selected = doSelect;
				// selectable (UN)SELECTING callback
				if (doSelect) {
					that._trigger("selecting", event, {
						selecting: selectee.element
					});
				} else {
					that._trigger("unselecting", event, {
						unselecting: selectee.element
					});
				}
				return false;
			}
		});

	},

	_mouseDrag: function(event) {

		this.dragged = true;

		if (this.options.disabled) {
			return;
		}

		var tmp,
			that = this,
			options = this.options,
			x1 = this.opos[0],
			y1 = this.opos[1],
			x2 = event.pageX,
			y2 = event.pageY;

		if (x1 > x2) { tmp = x2; x2 = x1; x1 = tmp; }
		if (y1 > y2) { tmp = y2; y2 = y1; y1 = tmp; }
		this.helper.css({left: x1, top: y1, width: x2-x1, height: y2-y1});

		this.selectees.each(function() {
			var selectee = $.data(this, "selectable-item"),
				hit = false;

			//prevent helper from being selected if appendTo: selectable
			if (!selectee || selectee.element === that.element[0]) {
				return;
			}

			if (options.tolerance === "touch") {
				hit = ( !(selectee.left > x2 || selectee.right < x1 || selectee.top > y2 || selectee.bottom < y1) );
			} else if (options.tolerance === "fit") {
				hit = (selectee.left > x1 && selectee.right < x2 && selectee.top > y1 && selectee.bottom < y2);
			}

			if (hit) {
				// SELECT
				if (selectee.selected) {
					selectee.$element.removeClass("ui-selected");
					selectee.selected = false;
				}
				if (selectee.unselecting) {
					selectee.$element.removeClass("ui-unselecting");
					selectee.unselecting = false;
				}
				if (!selectee.selecting) {
					selectee.$element.addClass("ui-selecting");
					selectee.selecting = true;
					// selectable SELECTING callback
					that._trigger("selecting", event, {
						selecting: selectee.element
					});
				}
			} else {
				// UNSELECT
				if (selectee.selecting) {
					if ((event.metaKey || event.ctrlKey) && selectee.startselected) {
						selectee.$element.removeClass("ui-selecting");
						selectee.selecting = false;
						selectee.$element.addClass("ui-selected");
						selectee.selected = true;
					} else {
						selectee.$element.removeClass("ui-selecting");
						selectee.selecting = false;
						if (selectee.startselected) {
							selectee.$element.addClass("ui-unselecting");
							selectee.unselecting = true;
						}
						// selectable UNSELECTING callback
						that._trigger("unselecting", event, {
							unselecting: selectee.element
						});
					}
				}
				if (selectee.selected) {
					if (!event.metaKey && !event.ctrlKey && !selectee.startselected) {
						selectee.$element.removeClass("ui-selected");
						selectee.selected = false;

						selectee.$element.addClass("ui-unselecting");
						selectee.unselecting = true;
						// selectable UNSELECTING callback
						that._trigger("unselecting", event, {
							unselecting: selectee.element
						});
					}
				}
			}
		});

		return false;
	},

	_mouseStop: function(event) {
		var that = this;

		this.dragged = false;

		$(".ui-unselecting", this.element[0]).each(function() {
			var selectee = $.data(this, "selectable-item");
			selectee.$element.removeClass("ui-unselecting");
			selectee.unselecting = false;
			selectee.startselected = false;
			that._trigger("unselected", event, {
				unselected: selectee.element
			});
		});
		$(".ui-selecting", this.element[0]).each(function() {
			var selectee = $.data(this, "selectable-item");
			selectee.$element.removeClass("ui-selecting").addClass("ui-selected");
			selectee.selecting = false;
			selectee.selected = true;
			selectee.startselected = true;
			that._trigger("selected", event, {
				selected: selectee.element
			});
		});
		this._trigger("stop", event);

		this.helper.remove();

		return false;
	}

});

})(jQuery);

(function( $, undefined ) {

/*jshint loopfunc: true */

function isOverAxis( x, reference, size ) {
	return ( x > reference ) && ( x < ( reference + size ) );
}

function isFloating(item) {
	return (/left|right/).test(item.css("float")) || (/inline|table-cell/).test(item.css("display"));
}

$.widget("ui.sortable", $.ui.mouse, {
	version: "1.10.3",
	widgetEventPrefix: "sort",
	ready: false,
	options: {
		appendTo: "parent",
		axis: false,
		connectWith: false,
		containment: false,
		cursor: "auto",
		cursorAt: false,
		dropOnEmpty: true,
		forcePlaceholderSize: false,
		forceHelperSize: false,
		grid: false,
		handle: false,
		helper: "original",
		items: "> *",
		opacity: false,
		placeholder: false,
		revert: false,
		scroll: true,
		scrollSensitivity: 20,
		scrollSpeed: 20,
		scope: "default",
		tolerance: "intersect",
		zIndex: 1000,

		// callbacks
		activate: null,
		beforeStop: null,
		change: null,
		deactivate: null,
		out: null,
		over: null,
		receive: null,
		remove: null,
		sort: null,
		start: null,
		stop: null,
		update: null
	},
	_create: function() {

		var o = this.options;
		this.containerCache = {};
		this.element.addClass("ui-sortable");

		//Get the items
		this.refresh();

		//Let's determine if the items are being displayed horizontally
		this.floating = this.items.length ? o.axis === "x" || isFloating(this.items[0].item) : false;

		//Let's determine the parent's offset
		this.offset = this.element.offset();

		//Initialize mouse events for interaction
		this._mouseInit();

		//We're ready to go
		this.ready = true;

	},

	_destroy: function() {
		this.element
			.removeClass("ui-sortable ui-sortable-disabled");
		this._mouseDestroy();

		for ( var i = this.items.length - 1; i >= 0; i-- ) {
			this.items[i].item.removeData(this.widgetName + "-item");
		}

		return this;
	},

	_setOption: function(key, value){
		if ( key === "disabled" ) {
			this.options[ key ] = value;

			this.widget().toggleClass( "ui-sortable-disabled", !!value );
		} else {
			// Don't call widget base _setOption for disable as it adds ui-state-disabled class
			$.Widget.prototype._setOption.apply(this, arguments);
		}
	},

	_mouseCapture: function(event, overrideHandle) {
		var currentItem = null,
			validHandle = false,
			that = this;

		if (this.reverting) {
			return false;
		}

		if(this.options.disabled || this.options.type === "static") {
			return false;
		}

		//We have to refresh the items data once first
		this._refreshItems(event);

		//Find out if the clicked node (or one of its parents) is a actual item in this.items
		$(event.target).parents().each(function() {
			if($.data(this, that.widgetName + "-item") === that) {
				currentItem = $(this);
				return false;
			}
		});
		if($.data(event.target, that.widgetName + "-item") === that) {
			currentItem = $(event.target);
		}

		if(!currentItem) {
			return false;
		}
		if(this.options.handle && !overrideHandle) {
			$(this.options.handle, currentItem).find("*").addBack().each(function() {
				if(this === event.target) {
					validHandle = true;
				}
			});
			if(!validHandle) {
				return false;
			}
		}

		this.currentItem = currentItem;
		this._removeCurrentsFromItems();
		return true;

	},

	_mouseStart: function(event, overrideHandle, noActivation) {

		var i, body,
			o = this.options;

		this.currentContainer = this;

		//We only need to call refreshPositions, because the refreshItems call has been moved to mouseCapture
		this.refreshPositions();

		//Create and append the visible helper
		this.helper = this._createHelper(event);

		//Cache the helper size
		this._cacheHelperProportions();

		/*
		 * - Position generation -
		 * This block generates everything position related - it's the core of draggables.
		 */

		//Cache the margins of the original element
		this._cacheMargins();

		//Get the next scrolling parent
		this.scrollParent = this.helper.scrollParent();

		//The element's absolute position on the page minus margins
		this.offset = this.currentItem.offset();
		this.offset = {
			top: this.offset.top - this.margins.top,
			left: this.offset.left - this.margins.left
		};

		$.extend(this.offset, {
			click: { //Where the click happened, relative to the element
				left: event.pageX - this.offset.left,
				top: event.pageY - this.offset.top
			},
			parent: this._getParentOffset(),
			relative: this._getRelativeOffset() //This is a relative to absolute position minus the actual position calculation - only used for relative positioned helper
		});

		// Only after we got the offset, we can change the helper's position to absolute
		// TODO: Still need to figure out a way to make relative sorting possible
		this.helper.css("position", "absolute");
		this.cssPosition = this.helper.css("position");

		//Generate the original position
		this.originalPosition = this._generatePosition(event);
		this.originalPageX = event.pageX;
		this.originalPageY = event.pageY;

		//Adjust the mouse offset relative to the helper if "cursorAt" is supplied
		(o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt));

		//Cache the former DOM position
		this.domPosition = { prev: this.currentItem.prev()[0], parent: this.currentItem.parent()[0] };

		//If the helper is not the original, hide the original so it's not playing any role during the drag, won't cause anything bad this way
		if(this.helper[0] !== this.currentItem[0]) {
			this.currentItem.hide();
		}

		//Create the placeholder
		this._createPlaceholder();

		//Set a containment if given in the options
		if(o.containment) {
			this._setContainment();
		}

		if( o.cursor && o.cursor !== "auto" ) { // cursor option
			body = this.document.find( "body" );

			// support: IE
			this.storedCursor = body.css( "cursor" );
			body.css( "cursor", o.cursor );

			this.storedStylesheet = $( "<style>*{ cursor: "+o.cursor+" !important; }</style>" ).appendTo( body );
		}

		if(o.opacity) { // opacity option
			if (this.helper.css("opacity")) {
				this._storedOpacity = this.helper.css("opacity");
			}
			this.helper.css("opacity", o.opacity);
		}

		if(o.zIndex) { // zIndex option
			if (this.helper.css("zIndex")) {
				this._storedZIndex = this.helper.css("zIndex");
			}
			this.helper.css("zIndex", o.zIndex);
		}

		//Prepare scrolling
		if(this.scrollParent[0] !== document && this.scrollParent[0].tagName !== "HTML") {
			this.overflowOffset = this.scrollParent.offset();
		}

		//Call callbacks
		this._trigger("start", event, this._uiHash());

		//Recache the helper size
		if(!this._preserveHelperProportions) {
			this._cacheHelperProportions();
		}


		//Post "activate" events to possible containers
		if( !noActivation ) {
			for ( i = this.containers.length - 1; i >= 0; i-- ) {
				this.containers[ i ]._trigger( "activate", event, this._uiHash( this ) );
			}
		}

		//Prepare possible droppables
		if($.ui.ddmanager) {
			$.ui.ddmanager.current = this;
		}

		if ($.ui.ddmanager && !o.dropBehaviour) {
			$.ui.ddmanager.prepareOffsets(this, event);
		}

		this.dragging = true;

		this.helper.addClass("ui-sortable-helper");
		this._mouseDrag(event); //Execute the drag once - this causes the helper not to be visible before getting its correct position
		return true;

	},

	_mouseDrag: function(event) {
		var i, item, itemElement, intersection,
			o = this.options,
			scrolled = false;

		//Compute the helpers position
		this.position = this._generatePosition(event);
		this.positionAbs = this._convertPositionTo("absolute");

		if (!this.lastPositionAbs) {
			this.lastPositionAbs = this.positionAbs;
		}

		//Do scrolling
		if(this.options.scroll) {
			if(this.scrollParent[0] !== document && this.scrollParent[0].tagName !== "HTML") {

				if((this.overflowOffset.top + this.scrollParent[0].offsetHeight) - event.pageY < o.scrollSensitivity) {
					this.scrollParent[0].scrollTop = scrolled = this.scrollParent[0].scrollTop + o.scrollSpeed;
				} else if(event.pageY - this.overflowOffset.top < o.scrollSensitivity) {
					this.scrollParent[0].scrollTop = scrolled = this.scrollParent[0].scrollTop - o.scrollSpeed;
				}

				if((this.overflowOffset.left + this.scrollParent[0].offsetWidth) - event.pageX < o.scrollSensitivity) {
					this.scrollParent[0].scrollLeft = scrolled = this.scrollParent[0].scrollLeft + o.scrollSpeed;
				} else if(event.pageX - this.overflowOffset.left < o.scrollSensitivity) {
					this.scrollParent[0].scrollLeft = scrolled = this.scrollParent[0].scrollLeft - o.scrollSpeed;
				}

			} else {

				if(event.pageY - $(document).scrollTop() < o.scrollSensitivity) {
					scrolled = $(document).scrollTop($(document).scrollTop() - o.scrollSpeed);
				} else if($(window).height() - (event.pageY - $(document).scrollTop()) < o.scrollSensitivity) {
					scrolled = $(document).scrollTop($(document).scrollTop() + o.scrollSpeed);
				}

				if(event.pageX - $(document).scrollLeft() < o.scrollSensitivity) {
					scrolled = $(document).scrollLeft($(document).scrollLeft() - o.scrollSpeed);
				} else if($(window).width() - (event.pageX - $(document).scrollLeft()) < o.scrollSensitivity) {
					scrolled = $(document).scrollLeft($(document).scrollLeft() + o.scrollSpeed);
				}

			}

			if(scrolled !== false && $.ui.ddmanager && !o.dropBehaviour) {
				$.ui.ddmanager.prepareOffsets(this, event);
			}
		}

		//Regenerate the absolute position used for position checks
		this.positionAbs = this._convertPositionTo("absolute");

		//Set the helper position
		if(!this.options.axis || this.options.axis !== "y") {
			this.helper[0].style.left = this.position.left+"px";
		}
		if(!this.options.axis || this.options.axis !== "x") {
			this.helper[0].style.top = this.position.top+"px";
		}

		//Rearrange
		for (i = this.items.length - 1; i >= 0; i--) {

			//Cache variables and intersection, continue if no intersection
			item = this.items[i];
			itemElement = item.item[0];
			intersection = this._intersectsWithPointer(item);
			if (!intersection) {
				continue;
			}

			// Only put the placeholder inside the current Container, skip all
			// items form other containers. This works because when moving
			// an item from one container to another the
			// currentContainer is switched before the placeholder is moved.
			//
			// Without this moving items in "sub-sortables" can cause the placeholder to jitter
			// beetween the outer and inner container.
			if (item.instance !== this.currentContainer) {
				continue;
			}

			// cannot intersect with itself
			// no useless actions that have been done before
			// no action if the item moved is the parent of the item checked
			if (itemElement !== this.currentItem[0] &&
				this.placeholder[intersection === 1 ? "next" : "prev"]()[0] !== itemElement &&
				!$.contains(this.placeholder[0], itemElement) &&
				(this.options.type === "semi-dynamic" ? !$.contains(this.element[0], itemElement) : true)
			) {

				this.direction = intersection === 1 ? "down" : "up";

				if (this.options.tolerance === "pointer" || this._intersectsWithSides(item)) {
					this._rearrange(event, item);
				} else {
					break;
				}

				this._trigger("change", event, this._uiHash());
				break;
			}
		}

		//Post events to containers
		this._contactContainers(event);

		//Interconnect with droppables
		if($.ui.ddmanager) {
			$.ui.ddmanager.drag(this, event);
		}

		//Call callbacks
		this._trigger("sort", event, this._uiHash());

		this.lastPositionAbs = this.positionAbs;
		return false;

	},

	_mouseStop: function(event, noPropagation) {

		if(!event) {
			return;
		}

		//If we are using droppables, inform the manager about the drop
		if ($.ui.ddmanager && !this.options.dropBehaviour) {
			$.ui.ddmanager.drop(this, event);
		}

		if(this.options.revert) {
			var that = this,
				cur = this.placeholder.offset(),
				axis = this.options.axis,
				animation = {};

			if ( !axis || axis === "x" ) {
				animation.left = cur.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollLeft);
			}
			if ( !axis || axis === "y" ) {
				animation.top = cur.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollTop);
			}
			this.reverting = true;
			$(this.helper).animate( animation, parseInt(this.options.revert, 10) || 500, function() {
				that._clear(event);
			});
		} else {
			this._clear(event, noPropagation);
		}

		return false;

	},

	cancel: function() {

		if(this.dragging) {

			this._mouseUp({ target: null });

			if(this.options.helper === "original") {
				this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");
			} else {
				this.currentItem.show();
			}

			//Post deactivating events to containers
			for (var i = this.containers.length - 1; i >= 0; i--){
				this.containers[i]._trigger("deactivate", null, this._uiHash(this));
				if(this.containers[i].containerCache.over) {
					this.containers[i]._trigger("out", null, this._uiHash(this));
					this.containers[i].containerCache.over = 0;
				}
			}

		}

		if (this.placeholder) {
			//$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately, it unbinds ALL events from the original node!
			if(this.placeholder[0].parentNode) {
				this.placeholder[0].parentNode.removeChild(this.placeholder[0]);
			}
			if(this.options.helper !== "original" && this.helper && this.helper[0].parentNode) {
				this.helper.remove();
			}

			$.extend(this, {
				helper: null,
				dragging: false,
				reverting: false,
				_noFinalSort: null
			});

			if(this.domPosition.prev) {
				$(this.domPosition.prev).after(this.currentItem);
			} else {
				$(this.domPosition.parent).prepend(this.currentItem);
			}
		}

		return this;

	},

	serialize: function(o) {

		var items = this._getItemsAsjQuery(o && o.connected),
			str = [];
		o = o || {};

		$(items).each(function() {
			var res = ($(o.item || this).attr(o.attribute || "id") || "").match(o.expression || (/(.+)[\-=_](.+)/));
			if (res) {
				str.push((o.key || res[1]+"[]")+"="+(o.key && o.expression ? res[1] : res[2]));
			}
		});

		if(!str.length && o.key) {
			str.push(o.key + "=");
		}

		return str.join("&");

	},

	toArray: function(o) {

		var items = this._getItemsAsjQuery(o && o.connected),
			ret = [];

		o = o || {};

		items.each(function() { ret.push($(o.item || this).attr(o.attribute || "id") || ""); });
		return ret;

	},

	/* Be careful with the following core functions */
	_intersectsWith: function(item) {

		var x1 = this.positionAbs.left,
			x2 = x1 + this.helperProportions.width,
			y1 = this.positionAbs.top,
			y2 = y1 + this.helperProportions.height,
			l = item.left,
			r = l + item.width,
			t = item.top,
			b = t + item.height,
			dyClick = this.offset.click.top,
			dxClick = this.offset.click.left,
			isOverElementHeight = ( this.options.axis === "x" ) || ( ( y1 + dyClick ) > t && ( y1 + dyClick ) < b ),
			isOverElementWidth = ( this.options.axis === "y" ) || ( ( x1 + dxClick ) > l && ( x1 + dxClick ) < r ),
			isOverElement = isOverElementHeight && isOverElementWidth;

		if ( this.options.tolerance === "pointer" ||
			this.options.forcePointerForContainers ||
			(this.options.tolerance !== "pointer" && this.helperProportions[this.floating ? "width" : "height"] > item[this.floating ? "width" : "height"])
		) {
			return isOverElement;
		} else {

			return (l < x1 + (this.helperProportions.width / 2) && // Right Half
				x2 - (this.helperProportions.width / 2) < r && // Left Half
				t < y1 + (this.helperProportions.height / 2) && // Bottom Half
				y2 - (this.helperProportions.height / 2) < b ); // Top Half

		}
	},

	_intersectsWithPointer: function(item) {

		var isOverElementHeight = (this.options.axis === "x") || isOverAxis(this.positionAbs.top + this.offset.click.top, item.top, item.height),
			isOverElementWidth = (this.options.axis === "y") || isOverAxis(this.positionAbs.left + this.offset.click.left, item.left, item.width),
			isOverElement = isOverElementHeight && isOverElementWidth,
			verticalDirection = this._getDragVerticalDirection(),
			horizontalDirection = this._getDragHorizontalDirection();

		if (!isOverElement) {
			return false;
		}

		return this.floating ?
			( ((horizontalDirection && horizontalDirection === "right") || verticalDirection === "down") ? 2 : 1 )
			: ( verticalDirection && (verticalDirection === "down" ? 2 : 1) );

	},

	_intersectsWithSides: function(item) {

		var isOverBottomHalf = isOverAxis(this.positionAbs.top + this.offset.click.top, item.top + (item.height/2), item.height),
			isOverRightHalf = isOverAxis(this.positionAbs.left + this.offset.click.left, item.left + (item.width/2), item.width),
			verticalDirection = this._getDragVerticalDirection(),
			horizontalDirection = this._getDragHorizontalDirection();

		if (this.floating && horizontalDirection) {
			return ((horizontalDirection === "right" && isOverRightHalf) || (horizontalDirection === "left" && !isOverRightHalf));
		} else {
			return verticalDirection && ((verticalDirection === "down" && isOverBottomHalf) || (verticalDirection === "up" && !isOverBottomHalf));
		}

	},

	_getDragVerticalDirection: function() {
		var delta = this.positionAbs.top - this.lastPositionAbs.top;
		return delta !== 0 && (delta > 0 ? "down" : "up");
	},

	_getDragHorizontalDirection: function() {
		var delta = this.positionAbs.left - this.lastPositionAbs.left;
		return delta !== 0 && (delta > 0 ? "right" : "left");
	},

	refresh: function(event) {
		this._refreshItems(event);
		this.refreshPositions();
		return this;
	},

	_connectWith: function() {
		var options = this.options;
		return options.connectWith.constructor === String ? [options.connectWith] : options.connectWith;
	},

	_getItemsAsjQuery: function(connected) {

		var i, j, cur, inst,
			items = [],
			queries = [],
			connectWith = this._connectWith();

		if(connectWith && connected) {
			for (i = connectWith.length - 1; i >= 0; i--){
				cur = $(connectWith[i]);
				for ( j = cur.length - 1; j >= 0; j--){
					inst = $.data(cur[j], this.widgetFullName);
					if(inst && inst !== this && !inst.options.disabled) {
						queries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element) : $(inst.options.items, inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), inst]);
					}
				}
			}
		}

		queries.push([$.isFunction(this.options.items) ? this.options.items.call(this.element, null, { options: this.options, item: this.currentItem }) : $(this.options.items, this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), this]);

		for (i = queries.length - 1; i >= 0; i--){
			queries[i][0].each(function() {
				items.push(this);
			});
		}

		return $(items);

	},

	_removeCurrentsFromItems: function() {

		var list = this.currentItem.find(":data(" + this.widgetName + "-item)");

		this.items = $.grep(this.items, function (item) {
			for (var j=0; j < list.length; j++) {
				if(list[j] === item.item[0]) {
					return false;
				}
			}
			return true;
		});

	},

	_refreshItems: function(event) {

		this.items = [];
		this.containers = [this];

		var i, j, cur, inst, targetData, _queries, item, queriesLength,
			items = this.items,
			queries = [[$.isFunction(this.options.items) ? this.options.items.call(this.element[0], event, { item: this.currentItem }) : $(this.options.items, this.element), this]],
			connectWith = this._connectWith();

		if(connectWith && this.ready) { //Shouldn't be run the first time through due to massive slow-down
			for (i = connectWith.length - 1; i >= 0; i--){
				cur = $(connectWith[i]);
				for (j = cur.length - 1; j >= 0; j--){
					inst = $.data(cur[j], this.widgetFullName);
					if(inst && inst !== this && !inst.options.disabled) {
						queries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element[0], event, { item: this.currentItem }) : $(inst.options.items, inst.element), inst]);
						this.containers.push(inst);
					}
				}
			}
		}

		for (i = queries.length - 1; i >= 0; i--) {
			targetData = queries[i][1];
			_queries = queries[i][0];

			for (j=0, queriesLength = _queries.length; j < queriesLength; j++) {
				item = $(_queries[j]);

				item.data(this.widgetName + "-item", targetData); // Data for target checking (mouse manager)

				items.push({
					item: item,
					instance: targetData,
					width: 0, height: 0,
					left: 0, top: 0
				});
			}
		}

	},

	refreshPositions: function(fast) {

		//This has to be redone because due to the item being moved out/into the offsetParent, the offsetParent's position will change
		if(this.offsetParent && this.helper) {
			this.offset.parent = this._getParentOffset();
		}

		var i, item, t, p;

		for (i = this.items.length - 1; i >= 0; i--){
			item = this.items[i];

			//We ignore calculating positions of all connected containers when we're not over them
			if(item.instance !== this.currentContainer && this.currentContainer && item.item[0] !== this.currentItem[0]) {
				continue;
			}

			t = this.options.toleranceElement ? $(this.options.toleranceElement, item.item) : item.item;

			if (!fast) {
				item.width = t.outerWidth();
				item.height = t.outerHeight();
			}

			p = t.offset();
			item.left = p.left;
			item.top = p.top;
		}

		if(this.options.custom && this.options.custom.refreshContainers) {
			this.options.custom.refreshContainers.call(this);
		} else {
			for (i = this.containers.length - 1; i >= 0; i--){
				p = this.containers[i].element.offset();
				this.containers[i].containerCache.left = p.left;
				this.containers[i].containerCache.top = p.top;
				this.containers[i].containerCache.width	= this.containers[i].element.outerWidth();
				this.containers[i].containerCache.height = this.containers[i].element.outerHeight();
			}
		}

		return this;
	},

	_createPlaceholder: function(that) {
		that = that || this;
		var className,
			o = that.options;

		if(!o.placeholder || o.placeholder.constructor === String) {
			className = o.placeholder;
			o.placeholder = {
				element: function() {

					var nodeName = that.currentItem[0].nodeName.toLowerCase(),
						element = $( "<" + nodeName + ">", that.document[0] )
							.addClass(className || that.currentItem[0].className+" ui-sortable-placeholder")
							.removeClass("ui-sortable-helper");

					if ( nodeName === "tr" ) {
						that.currentItem.children().each(function() {
							$( "<td>&#160;</td>", that.document[0] )
								.attr( "colspan", $( this ).attr( "colspan" ) || 1 )
								.appendTo( element );
						});
					} else if ( nodeName === "img" ) {
						element.attr( "src", that.currentItem.attr( "src" ) );
					}

					if ( !className ) {
						element.css( "visibility", "hidden" );
					}

					return element;
				},
				update: function(container, p) {

					// 1. If a className is set as 'placeholder option, we don't force sizes - the class is responsible for that
					// 2. The option 'forcePlaceholderSize can be enabled to force it even if a class name is specified
					if(className && !o.forcePlaceholderSize) {
						return;
					}

					//If the element doesn't have a actual height by itself (without styles coming from a stylesheet), it receives the inline height from the dragged item
					if(!p.height()) { p.height(that.currentItem.innerHeight() - parseInt(that.currentItem.css("paddingTop")||0, 10) - parseInt(that.currentItem.css("paddingBottom")||0, 10)); }
					if(!p.width()) { p.width(that.currentItem.innerWidth() - parseInt(that.currentItem.css("paddingLeft")||0, 10) - parseInt(that.currentItem.css("paddingRight")||0, 10)); }
				}
			};
		}

		//Create the placeholder
		that.placeholder = $(o.placeholder.element.call(that.element, that.currentItem));

		//Append it after the actual current item
		that.currentItem.after(that.placeholder);

		//Update the size of the placeholder (TODO: Logic to fuzzy, see line 316/317)
		o.placeholder.update(that, that.placeholder);

	},

	_contactContainers: function(event) {
		var i, j, dist, itemWithLeastDistance, posProperty, sizeProperty, base, cur, nearBottom, floating,
			innermostContainer = null,
			innermostIndex = null;

		// get innermost container that intersects with item
		for (i = this.containers.length - 1; i >= 0; i--) {

			// never consider a container that's located within the item itself
			if($.contains(this.currentItem[0], this.containers[i].element[0])) {
				continue;
			}

			if(this._intersectsWith(this.containers[i].containerCache)) {

				// if we've already found a container and it's more "inner" than this, then continue
				if(innermostContainer && $.contains(this.containers[i].element[0], innermostContainer.element[0])) {
					continue;
				}

				innermostContainer = this.containers[i];
				innermostIndex = i;

			} else {
				// container doesn't intersect. trigger "out" event if necessary
				if(this.containers[i].containerCache.over) {
					this.containers[i]._trigger("out", event, this._uiHash(this));
					this.containers[i].containerCache.over = 0;
				}
			}

		}

		// if no intersecting containers found, return
		if(!innermostContainer) {
			return;
		}

		// move the item into the container if it's not there already
		if(this.containers.length === 1) {
			if (!this.containers[innermostIndex].containerCache.over) {
				this.containers[innermostIndex]._trigger("over", event, this._uiHash(this));
				this.containers[innermostIndex].containerCache.over = 1;
			}
		} else {

			//When entering a new container, we will find the item with the least distance and append our item near it
			dist = 10000;
			itemWithLeastDistance = null;
			floating = innermostContainer.floating || isFloating(this.currentItem);
			posProperty = floating ? "left" : "top";
			sizeProperty = floating ? "width" : "height";
			base = this.positionAbs[posProperty] + this.offset.click[posProperty];
			for (j = this.items.length - 1; j >= 0; j--) {
				if(!$.contains(this.containers[innermostIndex].element[0], this.items[j].item[0])) {
					continue;
				}
				if(this.items[j].item[0] === this.currentItem[0]) {
					continue;
				}
				if (floating && !isOverAxis(this.positionAbs.top + this.offset.click.top, this.items[j].top, this.items[j].height)) {
					continue;
				}
				cur = this.items[j].item.offset()[posProperty];
				nearBottom = false;
				if(Math.abs(cur - base) > Math.abs(cur + this.items[j][sizeProperty] - base)){
					nearBottom = true;
					cur += this.items[j][sizeProperty];
				}

				if(Math.abs(cur - base) < dist) {
					dist = Math.abs(cur - base); itemWithLeastDistance = this.items[j];
					this.direction = nearBottom ? "up": "down";
				}
			}

			//Check if dropOnEmpty is enabled
			if(!itemWithLeastDistance && !this.options.dropOnEmpty) {
				return;
			}

			if(this.currentContainer === this.containers[innermostIndex]) {
				return;
			}

			itemWithLeastDistance ? this._rearrange(event, itemWithLeastDistance, null, true) : this._rearrange(event, null, this.containers[innermostIndex].element, true);
			this._trigger("change", event, this._uiHash());
			this.containers[innermostIndex]._trigger("change", event, this._uiHash(this));
			this.currentContainer = this.containers[innermostIndex];

			//Update the placeholder
			this.options.placeholder.update(this.currentContainer, this.placeholder);

			this.containers[innermostIndex]._trigger("over", event, this._uiHash(this));
			this.containers[innermostIndex].containerCache.over = 1;
		}


	},

	_createHelper: function(event) {

		var o = this.options,
			helper = $.isFunction(o.helper) ? $(o.helper.apply(this.element[0], [event, this.currentItem])) : (o.helper === "clone" ? this.currentItem.clone() : this.currentItem);

		//Add the helper to the DOM if that didn't happen already
		if(!helper.parents("body").length) {
			$(o.appendTo !== "parent" ? o.appendTo : this.currentItem[0].parentNode)[0].appendChild(helper[0]);
		}

		if(helper[0] === this.currentItem[0]) {
			this._storedCSS = { width: this.currentItem[0].style.width, height: this.currentItem[0].style.height, position: this.currentItem.css("position"), top: this.currentItem.css("top"), left: this.currentItem.css("left") };
		}

		if(!helper[0].style.width || o.forceHelperSize) {
			helper.width(this.currentItem.width());
		}
		if(!helper[0].style.height || o.forceHelperSize) {
			helper.height(this.currentItem.height());
		}

		return helper;

	},

	_adjustOffsetFromHelper: function(obj) {
		if (typeof obj === "string") {
			obj = obj.split(" ");
		}
		if ($.isArray(obj)) {
			obj = {left: +obj[0], top: +obj[1] || 0};
		}
		if ("left" in obj) {
			this.offset.click.left = obj.left + this.margins.left;
		}
		if ("right" in obj) {
			this.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;
		}
		if ("top" in obj) {
			this.offset.click.top = obj.top + this.margins.top;
		}
		if ("bottom" in obj) {
			this.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;
		}
	},

	_getParentOffset: function() {


		//Get the offsetParent and cache its position
		this.offsetParent = this.helper.offsetParent();
		var po = this.offsetParent.offset();

		// This is a special case where we need to modify a offset calculated on start, since the following happened:
		// 1. The position of the helper is absolute, so it's position is calculated based on the next positioned parent
		// 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn't the document, which means that
		//    the scroll is included in the initial calculation of the offset of the parent, and never recalculated upon drag
		if(this.cssPosition === "absolute" && this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) {
			po.left += this.scrollParent.scrollLeft();
			po.top += this.scrollParent.scrollTop();
		}

		// This needs to be actually done for all browsers, since pageX/pageY includes this information
		// with an ugly IE fix
		if( this.offsetParent[0] === document.body || (this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() === "html" && $.ui.ie)) {
			po = { top: 0, left: 0 };
		}

		return {
			top: po.top + (parseInt(this.offsetParent.css("borderTopWidth"),10) || 0),
			left: po.left + (parseInt(this.offsetParent.css("borderLeftWidth"),10) || 0)
		};

	},

	_getRelativeOffset: function() {

		if(this.cssPosition === "relative") {
			var p = this.currentItem.position();
			return {
				top: p.top - (parseInt(this.helper.css("top"),10) || 0) + this.scrollParent.scrollTop(),
				left: p.left - (parseInt(this.helper.css("left"),10) || 0) + this.scrollParent.scrollLeft()
			};
		} else {
			return { top: 0, left: 0 };
		}

	},

	_cacheMargins: function() {
		this.margins = {
			left: (parseInt(this.currentItem.css("marginLeft"),10) || 0),
			top: (parseInt(this.currentItem.css("marginTop"),10) || 0)
		};
	},

	_cacheHelperProportions: function() {
		this.helperProportions = {
			width: this.helper.outerWidth(),
			height: this.helper.outerHeight()
		};
	},

	_setContainment: function() {

		var ce, co, over,
			o = this.options;
		if(o.containment === "parent") {
			o.containment = this.helper[0].parentNode;
		}
		if(o.containment === "document" || o.containment === "window") {
			this.containment = [
				0 - this.offset.relative.left - this.offset.parent.left,
				0 - this.offset.relative.top - this.offset.parent.top,
				$(o.containment === "document" ? document : window).width() - this.helperProportions.width - this.margins.left,
				($(o.containment === "document" ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top
			];
		}

		if(!(/^(document|window|parent)$/).test(o.containment)) {
			ce = $(o.containment)[0];
			co = $(o.containment).offset();
			over = ($(ce).css("overflow") !== "hidden");

			this.containment = [
				co.left + (parseInt($(ce).css("borderLeftWidth"),10) || 0) + (parseInt($(ce).css("paddingLeft"),10) || 0) - this.margins.left,
				co.top + (parseInt($(ce).css("borderTopWidth"),10) || 0) + (parseInt($(ce).css("paddingTop"),10) || 0) - this.margins.top,
				co.left+(over ? Math.max(ce.scrollWidth,ce.offsetWidth) : ce.offsetWidth) - (parseInt($(ce).css("borderLeftWidth"),10) || 0) - (parseInt($(ce).css("paddingRight"),10) || 0) - this.helperProportions.width - this.margins.left,
				co.top+(over ? Math.max(ce.scrollHeight,ce.offsetHeight) : ce.offsetHeight) - (parseInt($(ce).css("borderTopWidth"),10) || 0) - (parseInt($(ce).css("paddingBottom"),10) || 0) - this.helperProportions.height - this.margins.top
			];
		}

	},

	_convertPositionTo: function(d, pos) {

		if(!pos) {
			pos = this.position;
		}
		var mod = d === "absolute" ? 1 : -1,
			scroll = this.cssPosition === "absolute" && !(this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent,
			scrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName);

		return {
			top: (
				pos.top	+																// The absolute mouse position
				this.offset.relative.top * mod +										// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.top * mod -											// The offsetParent's offset without borders (offset + border)
				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : ( scrollIsRootNode ? 0 : scroll.scrollTop() ) ) * mod)
			),
			left: (
				pos.left +																// The absolute mouse position
				this.offset.relative.left * mod +										// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.left * mod	-										// The offsetParent's offset without borders (offset + border)
				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft() ) * mod)
			)
		};

	},

	_generatePosition: function(event) {

		var top, left,
			o = this.options,
			pageX = event.pageX,
			pageY = event.pageY,
			scroll = this.cssPosition === "absolute" && !(this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent, scrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName);

		// This is another very weird special case that only happens for relative elements:
		// 1. If the css position is relative
		// 2. and the scroll parent is the document or similar to the offset parent
		// we have to refresh the relative offset during the scroll so there are no jumps
		if(this.cssPosition === "relative" && !(this.scrollParent[0] !== document && this.scrollParent[0] !== this.offsetParent[0])) {
			this.offset.relative = this._getRelativeOffset();
		}

		/*
		 * - Position constraining -
		 * Constrain the position to a mix of grid, containment.
		 */

		if(this.originalPosition) { //If we are not dragging yet, we won't check for options

			if(this.containment) {
				if(event.pageX - this.offset.click.left < this.containment[0]) {
					pageX = this.containment[0] + this.offset.click.left;
				}
				if(event.pageY - this.offset.click.top < this.containment[1]) {
					pageY = this.containment[1] + this.offset.click.top;
				}
				if(event.pageX - this.offset.click.left > this.containment[2]) {
					pageX = this.containment[2] + this.offset.click.left;
				}
				if(event.pageY - this.offset.click.top > this.containment[3]) {
					pageY = this.containment[3] + this.offset.click.top;
				}
			}

			if(o.grid) {
				top = this.originalPageY + Math.round((pageY - this.originalPageY) / o.grid[1]) * o.grid[1];
				pageY = this.containment ? ( (top - this.offset.click.top >= this.containment[1] && top - this.offset.click.top <= this.containment[3]) ? top : ((top - this.offset.click.top >= this.containment[1]) ? top - o.grid[1] : top + o.grid[1])) : top;

				left = this.originalPageX + Math.round((pageX - this.originalPageX) / o.grid[0]) * o.grid[0];
				pageX = this.containment ? ( (left - this.offset.click.left >= this.containment[0] && left - this.offset.click.left <= this.containment[2]) ? left : ((left - this.offset.click.left >= this.containment[0]) ? left - o.grid[0] : left + o.grid[0])) : left;
			}

		}

		return {
			top: (
				pageY -																// The absolute mouse position
				this.offset.click.top -													// Click offset (relative to the element)
				this.offset.relative.top	-											// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.top +												// The offsetParent's offset without borders (offset + border)
				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : ( scrollIsRootNode ? 0 : scroll.scrollTop() ) ))
			),
			left: (
				pageX -																// The absolute mouse position
				this.offset.click.left -												// Click offset (relative to the element)
				this.offset.relative.left	-											// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.left +												// The offsetParent's offset without borders (offset + border)
				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft() ))
			)
		};

	},

	_rearrange: function(event, i, a, hardRefresh) {

		a ? a[0].appendChild(this.placeholder[0]) : i.item[0].parentNode.insertBefore(this.placeholder[0], (this.direction === "down" ? i.item[0] : i.item[0].nextSibling));

		//Various things done here to improve the performance:
		// 1. we create a setTimeout, that calls refreshPositions
		// 2. on the instance, we have a counter variable, that get's higher after every append
		// 3. on the local scope, we copy the counter variable, and check in the timeout, if it's still the same
		// 4. this lets only the last addition to the timeout stack through
		this.counter = this.counter ? ++this.counter : 1;
		var counter = this.counter;

		this._delay(function() {
			if(counter === this.counter) {
				this.refreshPositions(!hardRefresh); //Precompute after each DOM insertion, NOT on mousemove
			}
		});

	},

	_clear: function(event, noPropagation) {

		this.reverting = false;
		// We delay all events that have to be triggered to after the point where the placeholder has been removed and
		// everything else normalized again
		var i,
			delayedTriggers = [];

		// We first have to update the dom position of the actual currentItem
		// Note: don't do it if the current item is already removed (by a user), or it gets reappended (see #4088)
		if(!this._noFinalSort && this.currentItem.parent().length) {
			this.placeholder.before(this.currentItem);
		}
		this._noFinalSort = null;

		if(this.helper[0] === this.currentItem[0]) {
			for(i in this._storedCSS) {
				if(this._storedCSS[i] === "auto" || this._storedCSS[i] === "static") {
					this._storedCSS[i] = "";
				}
			}
			this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");
		} else {
			this.currentItem.show();
		}

		if(this.fromOutside && !noPropagation) {
			delayedTriggers.push(function(event) { this._trigger("receive", event, this._uiHash(this.fromOutside)); });
		}
		if((this.fromOutside || this.domPosition.prev !== this.currentItem.prev().not(".ui-sortable-helper")[0] || this.domPosition.parent !== this.currentItem.parent()[0]) && !noPropagation) {
			delayedTriggers.push(function(event) { this._trigger("update", event, this._uiHash()); }); //Trigger update callback if the DOM position has changed
		}

		// Check if the items Container has Changed and trigger appropriate
		// events.
		if (this !== this.currentContainer) {
			if(!noPropagation) {
				delayedTriggers.push(function(event) { this._trigger("remove", event, this._uiHash()); });
				delayedTriggers.push((function(c) { return function(event) { c._trigger("receive", event, this._uiHash(this)); };  }).call(this, this.currentContainer));
				delayedTriggers.push((function(c) { return function(event) { c._trigger("update", event, this._uiHash(this));  }; }).call(this, this.currentContainer));
			}
		}


		//Post events to containers
		for (i = this.containers.length - 1; i >= 0; i--){
			if(!noPropagation) {
				delayedTriggers.push((function(c) { return function(event) { c._trigger("deactivate", event, this._uiHash(this)); };  }).call(this, this.containers[i]));
			}
			if(this.containers[i].containerCache.over) {
				delayedTriggers.push((function(c) { return function(event) { c._trigger("out", event, this._uiHash(this)); };  }).call(this, this.containers[i]));
				this.containers[i].containerCache.over = 0;
			}
		}

		//Do what was originally in plugins
		if ( this.storedCursor ) {
			this.document.find( "body" ).css( "cursor", this.storedCursor );
			this.storedStylesheet.remove();
		}
		if(this._storedOpacity) {
			this.helper.css("opacity", this._storedOpacity);
		}
		if(this._storedZIndex) {
			this.helper.css("zIndex", this._storedZIndex === "auto" ? "" : this._storedZIndex);
		}

		this.dragging = false;
		if(this.cancelHelperRemoval) {
			if(!noPropagation) {
				this._trigger("beforeStop", event, this._uiHash());
				for (i=0; i < delayedTriggers.length; i++) {
					delayedTriggers[i].call(this, event);
				} //Trigger all delayed events
				this._trigger("stop", event, this._uiHash());
			}

			this.fromOutside = false;
			return false;
		}

		if(!noPropagation) {
			this._trigger("beforeStop", event, this._uiHash());
		}

		//$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately, it unbinds ALL events from the original node!
		this.placeholder[0].parentNode.removeChild(this.placeholder[0]);

		if(this.helper[0] !== this.currentItem[0]) {
			this.helper.remove();
		}
		this.helper = null;

		if(!noPropagation) {
			for (i=0; i < delayedTriggers.length; i++) {
				delayedTriggers[i].call(this, event);
			} //Trigger all delayed events
			this._trigger("stop", event, this._uiHash());
		}

		this.fromOutside = false;
		return true;

	},

	_trigger: function() {
		if ($.Widget.prototype._trigger.apply(this, arguments) === false) {
			this.cancel();
		}
	},

	_uiHash: function(_inst) {
		var inst = _inst || this;
		return {
			helper: inst.helper,
			placeholder: inst.placeholder || $([]),
			position: inst.position,
			originalPosition: inst.originalPosition,
			offset: inst.positionAbs,
			item: inst.currentItem,
			sender: _inst ? _inst.element : null
		};
	}

});

})(jQuery);

(function($, undefined) {

var dataSpace = "ui-effects-";

$.effects = {
	effect: {}
};

/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */
(function( jQuery, undefined ) {

	var stepHooks = "backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",

	// plusequals test for += 100 -= 100
	rplusequals = /^([\-+])=\s*(\d+\.?\d*)/,
	// a set of RE's that can match strings and generate color tuples.
	stringParsers = [{
			re: /rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
			parse: function( execResult ) {
				return [
					execResult[ 1 ],
					execResult[ 2 ],
					execResult[ 3 ],
					execResult[ 4 ]
				];
			}
		}, {
			re: /rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
			parse: function( execResult ) {
				return [
					execResult[ 1 ] * 2.55,
					execResult[ 2 ] * 2.55,
					execResult[ 3 ] * 2.55,
					execResult[ 4 ]
				];
			}
		}, {
			// this regex ignores A-F because it's compared against an already lowercased string
			re: /#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
			parse: function( execResult ) {
				return [
					parseInt( execResult[ 1 ], 16 ),
					parseInt( execResult[ 2 ], 16 ),
					parseInt( execResult[ 3 ], 16 )
				];
			}
		}, {
			// this regex ignores A-F because it's compared against an already lowercased string
			re: /#([a-f0-9])([a-f0-9])([a-f0-9])/,
			parse: function( execResult ) {
				return [
					parseInt( execResult[ 1 ] + execResult[ 1 ], 16 ),
					parseInt( execResult[ 2 ] + execResult[ 2 ], 16 ),
					parseInt( execResult[ 3 ] + execResult[ 3 ], 16 )
				];
			}
		}, {
			re: /hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
			space: "hsla",
			parse: function( execResult ) {
				return [
					execResult[ 1 ],
					execResult[ 2 ] / 100,
					execResult[ 3 ] / 100,
					execResult[ 4 ]
				];
			}
		}],

	// jQuery.Color( )
	color = jQuery.Color = function( color, green, blue, alpha ) {
		return new jQuery.Color.fn.parse( color, green, blue, alpha );
	},
	spaces = {
		rgba: {
			props: {
				red: {
					idx: 0,
					type: "byte"
				},
				green: {
					idx: 1,
					type: "byte"
				},
				blue: {
					idx: 2,
					type: "byte"
				}
			}
		},

		hsla: {
			props: {
				hue: {
					idx: 0,
					type: "degrees"
				},
				saturation: {
					idx: 1,
					type: "percent"
				},
				lightness: {
					idx: 2,
					type: "percent"
				}
			}
		}
	},
	propTypes = {
		"byte": {
			floor: true,
			max: 255
		},
		"percent": {
			max: 1
		},
		"degrees": {
			mod: 360,
			floor: true
		}
	},
	support = color.support = {},

	// element for support tests
	supportElem = jQuery( "<p>" )[ 0 ],

	// colors = jQuery.Color.names
	colors,

	// local aliases of functions called often
	each = jQuery.each;

// determine rgba support immediately
supportElem.style.cssText = "background-color:rgba(1,1,1,.5)";
support.rgba = supportElem.style.backgroundColor.indexOf( "rgba" ) > -1;

// define cache name and alpha properties
// for rgba and hsla spaces
each( spaces, function( spaceName, space ) {
	space.cache = "_" + spaceName;
	space.props.alpha = {
		idx: 3,
		type: "percent",
		def: 1
	};
});

function clamp( value, prop, allowEmpty ) {
	var type = propTypes[ prop.type ] || {};

	if ( value == null ) {
		return (allowEmpty || !prop.def) ? null : prop.def;
	}

	// ~~ is an short way of doing floor for positive numbers
	value = type.floor ? ~~value : parseFloat( value );

	// IE will pass in empty strings as value for alpha,
	// which will hit this case
	if ( isNaN( value ) ) {
		return prop.def;
	}

	if ( type.mod ) {
		// we add mod before modding to make sure that negatives values
		// get converted properly: -10 -> 350
		return (value + type.mod) % type.mod;
	}

	// for now all property types without mod have min and max
	return 0 > value ? 0 : type.max < value ? type.max : value;
}

function stringParse( string ) {
	var inst = color(),
		rgba = inst._rgba = [];

	string = string.toLowerCase();

	each( stringParsers, function( i, parser ) {
		var parsed,
			match = parser.re.exec( string ),
			values = match && parser.parse( match ),
			spaceName = parser.space || "rgba";

		if ( values ) {
			parsed = inst[ spaceName ]( values );

			// if this was an rgba parse the assignment might happen twice
			// oh well....
			inst[ spaces[ spaceName ].cache ] = parsed[ spaces[ spaceName ].cache ];
			rgba = inst._rgba = parsed._rgba;

			// exit each( stringParsers ) here because we matched
			return false;
		}
	});

	// Found a stringParser that handled it
	if ( rgba.length ) {

		// if this came from a parsed string, force "transparent" when alpha is 0
		// chrome, (and maybe others) return "transparent" as rgba(0,0,0,0)
		if ( rgba.join() === "0,0,0,0" ) {
			jQuery.extend( rgba, colors.transparent );
		}
		return inst;
	}

	// named colors
	return colors[ string ];
}

color.fn = jQuery.extend( color.prototype, {
	parse: function( red, green, blue, alpha ) {
		if ( red === undefined ) {
			this._rgba = [ null, null, null, null ];
			return this;
		}
		if ( red.jquery || red.nodeType ) {
			red = jQuery( red ).css( green );
			green = undefined;
		}

		var inst = this,
			type = jQuery.type( red ),
			rgba = this._rgba = [];

		// more than 1 argument specified - assume ( red, green, blue, alpha )
		if ( green !== undefined ) {
			red = [ red, green, blue, alpha ];
			type = "array";
		}

		if ( type === "string" ) {
			return this.parse( stringParse( red ) || colors._default );
		}

		if ( type === "array" ) {
			each( spaces.rgba.props, function( key, prop ) {
				rgba[ prop.idx ] = clamp( red[ prop.idx ], prop );
			});
			return this;
		}

		if ( type === "object" ) {
			if ( red instanceof color ) {
				each( spaces, function( spaceName, space ) {
					if ( red[ space.cache ] ) {
						inst[ space.cache ] = red[ space.cache ].slice();
					}
				});
			} else {
				each( spaces, function( spaceName, space ) {
					var cache = space.cache;
					each( space.props, function( key, prop ) {

						// if the cache doesn't exist, and we know how to convert
						if ( !inst[ cache ] && space.to ) {

							// if the value was null, we don't need to copy it
							// if the key was alpha, we don't need to copy it either
							if ( key === "alpha" || red[ key ] == null ) {
								return;
							}
							inst[ cache ] = space.to( inst._rgba );
						}

						// this is the only case where we allow nulls for ALL properties.
						// call clamp with alwaysAllowEmpty
						inst[ cache ][ prop.idx ] = clamp( red[ key ], prop, true );
					});

					// everything defined but alpha?
					if ( inst[ cache ] && jQuery.inArray( null, inst[ cache ].slice( 0, 3 ) ) < 0 ) {
						// use the default of 1
						inst[ cache ][ 3 ] = 1;
						if ( space.from ) {
							inst._rgba = space.from( inst[ cache ] );
						}
					}
				});
			}
			return this;
		}
	},
	is: function( compare ) {
		var is = color( compare ),
			same = true,
			inst = this;

		each( spaces, function( _, space ) {
			var localCache,
				isCache = is[ space.cache ];
			if (isCache) {
				localCache = inst[ space.cache ] || space.to && space.to( inst._rgba ) || [];
				each( space.props, function( _, prop ) {
					if ( isCache[ prop.idx ] != null ) {
						same = ( isCache[ prop.idx ] === localCache[ prop.idx ] );
						return same;
					}
				});
			}
			return same;
		});
		return same;
	},
	_space: function() {
		var used = [],
			inst = this;
		each( spaces, function( spaceName, space ) {
			if ( inst[ space.cache ] ) {
				used.push( spaceName );
			}
		});
		return used.pop();
	},
	transition: function( other, distance ) {
		var end = color( other ),
			spaceName = end._space(),
			space = spaces[ spaceName ],
			startColor = this.alpha() === 0 ? color( "transparent" ) : this,
			start = startColor[ space.cache ] || space.to( startColor._rgba ),
			result = start.slice();

		end = end[ space.cache ];
		each( space.props, function( key, prop ) {
			var index = prop.idx,
				startValue = start[ index ],
				endValue = end[ index ],
				type = propTypes[ prop.type ] || {};

			// if null, don't override start value
			if ( endValue === null ) {
				return;
			}
			// if null - use end
			if ( startValue === null ) {
				result[ index ] = endValue;
			} else {
				if ( type.mod ) {
					if ( endValue - startValue > type.mod / 2 ) {
						startValue += type.mod;
					} else if ( startValue - endValue > type.mod / 2 ) {
						startValue -= type.mod;
					}
				}
				result[ index ] = clamp( ( endValue - startValue ) * distance + startValue, prop );
			}
		});
		return this[ spaceName ]( result );
	},
	blend: function( opaque ) {
		// if we are already opaque - return ourself
		if ( this._rgba[ 3 ] === 1 ) {
			return this;
		}

		var rgb = this._rgba.slice(),
			a = rgb.pop(),
			blend = color( opaque )._rgba;

		return color( jQuery.map( rgb, function( v, i ) {
			return ( 1 - a ) * blend[ i ] + a * v;
		}));
	},
	toRgbaString: function() {
		var prefix = "rgba(",
			rgba = jQuery.map( this._rgba, function( v, i ) {
				return v == null ? ( i > 2 ? 1 : 0 ) : v;
			});

		if ( rgba[ 3 ] === 1 ) {
			rgba.pop();
			prefix = "rgb(";
		}

		return prefix + rgba.join() + ")";
	},
	toHslaString: function() {
		var prefix = "hsla(",
			hsla = jQuery.map( this.hsla(), function( v, i ) {
				if ( v == null ) {
					v = i > 2 ? 1 : 0;
				}

				// catch 1 and 2
				if ( i && i < 3 ) {
					v = Math.round( v * 100 ) + "%";
				}
				return v;
			});

		if ( hsla[ 3 ] === 1 ) {
			hsla.pop();
			prefix = "hsl(";
		}
		return prefix + hsla.join() + ")";
	},
	toHexString: function( includeAlpha ) {
		var rgba = this._rgba.slice(),
			alpha = rgba.pop();

		if ( includeAlpha ) {
			rgba.push( ~~( alpha * 255 ) );
		}

		return "#" + jQuery.map( rgba, function( v ) {

			// default to 0 when nulls exist
			v = ( v || 0 ).toString( 16 );
			return v.length === 1 ? "0" + v : v;
		}).join("");
	},
	toString: function() {
		return this._rgba[ 3 ] === 0 ? "transparent" : this.toRgbaString();
	}
});
color.fn.parse.prototype = color.fn;

// hsla conversions adapted from:
// https://code.google.com/p/maashaack/source/browse/packages/graphics/trunk/src/graphics/colors/HUE2RGB.as?r=5021

function hue2rgb( p, q, h ) {
	h = ( h + 1 ) % 1;
	if ( h * 6 < 1 ) {
		return p + (q - p) * h * 6;
	}
	if ( h * 2 < 1) {
		return q;
	}
	if ( h * 3 < 2 ) {
		return p + (q - p) * ((2/3) - h) * 6;
	}
	return p;
}

spaces.hsla.to = function ( rgba ) {
	if ( rgba[ 0 ] == null || rgba[ 1 ] == null || rgba[ 2 ] == null ) {
		return [ null, null, null, rgba[ 3 ] ];
	}
	var r = rgba[ 0 ] / 255,
		g = rgba[ 1 ] / 255,
		b = rgba[ 2 ] / 255,
		a = rgba[ 3 ],
		max = Math.max( r, g, b ),
		min = Math.min( r, g, b ),
		diff = max - min,
		add = max + min,
		l = add * 0.5,
		h, s;

	if ( min === max ) {
		h = 0;
	} else if ( r === max ) {
		h = ( 60 * ( g - b ) / diff ) + 360;
	} else if ( g === max ) {
		h = ( 60 * ( b - r ) / diff ) + 120;
	} else {
		h = ( 60 * ( r - g ) / diff ) + 240;
	}

	// chroma (diff) == 0 means greyscale which, by definition, saturation = 0%
	// otherwise, saturation is based on the ratio of chroma (diff) to lightness (add)
	if ( diff === 0 ) {
		s = 0;
	} else if ( l <= 0.5 ) {
		s = diff / add;
	} else {
		s = diff / ( 2 - add );
	}
	return [ Math.round(h) % 360, s, l, a == null ? 1 : a ];
};

spaces.hsla.from = function ( hsla ) {
	if ( hsla[ 0 ] == null || hsla[ 1 ] == null || hsla[ 2 ] == null ) {
		return [ null, null, null, hsla[ 3 ] ];
	}
	var h = hsla[ 0 ] / 360,
		s = hsla[ 1 ],
		l = hsla[ 2 ],
		a = hsla[ 3 ],
		q = l <= 0.5 ? l * ( 1 + s ) : l + s - l * s,
		p = 2 * l - q;

	return [
		Math.round( hue2rgb( p, q, h + ( 1 / 3 ) ) * 255 ),
		Math.round( hue2rgb( p, q, h ) * 255 ),
		Math.round( hue2rgb( p, q, h - ( 1 / 3 ) ) * 255 ),
		a
	];
};


each( spaces, function( spaceName, space ) {
	var props = space.props,
		cache = space.cache,
		to = space.to,
		from = space.from;

	// makes rgba() and hsla()
	color.fn[ spaceName ] = function( value ) {

		// generate a cache for this space if it doesn't exist
		if ( to && !this[ cache ] ) {
			this[ cache ] = to( this._rgba );
		}
		if ( value === undefined ) {
			return this[ cache ].slice();
		}

		var ret,
			type = jQuery.type( value ),
			arr = ( type === "array" || type === "object" ) ? value : arguments,
			local = this[ cache ].slice();

		each( props, function( key, prop ) {
			var val = arr[ type === "object" ? key : prop.idx ];
			if ( val == null ) {
				val = local[ prop.idx ];
			}
			local[ prop.idx ] = clamp( val, prop );
		});

		if ( from ) {
			ret = color( from( local ) );
			ret[ cache ] = local;
			return ret;
		} else {
			return color( local );
		}
	};

	// makes red() green() blue() alpha() hue() saturation() lightness()
	each( props, function( key, prop ) {
		// alpha is included in more than one space
		if ( color.fn[ key ] ) {
			return;
		}
		color.fn[ key ] = function( value ) {
			var vtype = jQuery.type( value ),
				fn = ( key === "alpha" ? ( this._hsla ? "hsla" : "rgba" ) : spaceName ),
				local = this[ fn ](),
				cur = local[ prop.idx ],
				match;

			if ( vtype === "undefined" ) {
				return cur;
			}

			if ( vtype === "function" ) {
				value = value.call( this, cur );
				vtype = jQuery.type( value );
			}
			if ( value == null && prop.empty ) {
				return this;
			}
			if ( vtype === "string" ) {
				match = rplusequals.exec( value );
				if ( match ) {
					value = cur + parseFloat( match[ 2 ] ) * ( match[ 1 ] === "+" ? 1 : -1 );
				}
			}
			local[ prop.idx ] = value;
			return this[ fn ]( local );
		};
	});
});

// add cssHook and .fx.step function for each named hook.
// accept a space separated string of properties
color.hook = function( hook ) {
	var hooks = hook.split( " " );
	each( hooks, function( i, hook ) {
		jQuery.cssHooks[ hook ] = {
			set: function( elem, value ) {
				var parsed, curElem,
					backgroundColor = "";

				if ( value !== "transparent" && ( jQuery.type( value ) !== "string" || ( parsed = stringParse( value ) ) ) ) {
					value = color( parsed || value );
					if ( !support.rgba && value._rgba[ 3 ] !== 1 ) {
						curElem = hook === "backgroundColor" ? elem.parentNode : elem;
						while (
							(backgroundColor === "" || backgroundColor === "transparent") &&
							curElem && curElem.style
						) {
							try {
								backgroundColor = jQuery.css( curElem, "backgroundColor" );
								curElem = curElem.parentNode;
							} catch ( e ) {
							}
						}

						value = value.blend( backgroundColor && backgroundColor !== "transparent" ?
							backgroundColor :
							"_default" );
					}

					value = value.toRgbaString();
				}
				try {
					elem.style[ hook ] = value;
				} catch( e ) {
					// wrapped to prevent IE from throwing errors on "invalid" values like 'auto' or 'inherit'
				}
			}
		};
		jQuery.fx.step[ hook ] = function( fx ) {
			if ( !fx.colorInit ) {
				fx.start = color( fx.elem, hook );
				fx.end = color( fx.end );
				fx.colorInit = true;
			}
			jQuery.cssHooks[ hook ].set( fx.elem, fx.start.transition( fx.end, fx.pos ) );
		};
	});

};

color.hook( stepHooks );

jQuery.cssHooks.borderColor = {
	expand: function( value ) {
		var expanded = {};

		each( [ "Top", "Right", "Bottom", "Left" ], function( i, part ) {
			expanded[ "border" + part + "Color" ] = value;
		});
		return expanded;
	}
};

// Basic color names only.
// Usage of any of the other color names requires adding yourself or including
// jquery.color.svg-names.js.
colors = jQuery.Color.names = {
	// 4.1. Basic color keywords
	aqua: "#00ffff",
	black: "#000000",
	blue: "#0000ff",
	fuchsia: "#ff00ff",
	gray: "#808080",
	green: "#008000",
	lime: "#00ff00",
	maroon: "#800000",
	navy: "#000080",
	olive: "#808000",
	purple: "#800080",
	red: "#ff0000",
	silver: "#c0c0c0",
	teal: "#008080",
	white: "#ffffff",
	yellow: "#ffff00",

	// 4.2.3. "transparent" color keyword
	transparent: [ null, null, null, 0 ],

	_default: "#ffffff"
};

})( jQuery );


/******************************************************************************/
/****************************** CLASS ANIMATIONS ******************************/
/******************************************************************************/
(function() {

var classAnimationActions = [ "add", "remove", "toggle" ],
	shorthandStyles = {
		border: 1,
		borderBottom: 1,
		borderColor: 1,
		borderLeft: 1,
		borderRight: 1,
		borderTop: 1,
		borderWidth: 1,
		margin: 1,
		padding: 1
	};

$.each([ "borderLeftStyle", "borderRightStyle", "borderBottomStyle", "borderTopStyle" ], function( _, prop ) {
	$.fx.step[ prop ] = function( fx ) {
		if ( fx.end !== "none" && !fx.setAttr || fx.pos === 1 && !fx.setAttr ) {
			jQuery.style( fx.elem, prop, fx.end );
			fx.setAttr = true;
		}
	};
});

function getElementStyles( elem ) {
	var key, len,
		style = elem.ownerDocument.defaultView ?
			elem.ownerDocument.defaultView.getComputedStyle( elem, null ) :
			elem.currentStyle,
		styles = {};

	if ( style && style.length && style[ 0 ] && style[ style[ 0 ] ] ) {
		len = style.length;
		while ( len-- ) {
			key = style[ len ];
			if ( typeof style[ key ] === "string" ) {
				styles[ $.camelCase( key ) ] = style[ key ];
			}
		}
	// support: Opera, IE <9
	} else {
		for ( key in style ) {
			if ( typeof style[ key ] === "string" ) {
				styles[ key ] = style[ key ];
			}
		}
	}

	return styles;
}


function styleDifference( oldStyle, newStyle ) {
	var diff = {},
		name, value;

	for ( name in newStyle ) {
		value = newStyle[ name ];
		if ( oldStyle[ name ] !== value ) {
			if ( !shorthandStyles[ name ] ) {
				if ( $.fx.step[ name ] || !isNaN( parseFloat( value ) ) ) {
					diff[ name ] = value;
				}
			}
		}
	}

	return diff;
}

// support: jQuery <1.8
if ( !$.fn.addBack ) {
	$.fn.addBack = function( selector ) {
		return this.add( selector == null ?
			this.prevObject : this.prevObject.filter( selector )
		);
	};
}

$.effects.animateClass = function( value, duration, easing, callback ) {
	var o = $.speed( duration, easing, callback );

	return this.queue( function() {
		var animated = $( this ),
			baseClass = animated.attr( "class" ) || "",
			applyClassChange,
			allAnimations = o.children ? animated.find( "*" ).addBack() : animated;

		// map the animated objects to store the original styles.
		allAnimations = allAnimations.map(function() {
			var el = $( this );
			return {
				el: el,
				start: getElementStyles( this )
			};
		});

		// apply class change
		applyClassChange = function() {
			$.each( classAnimationActions, function(i, action) {
				if ( value[ action ] ) {
					animated[ action + "Class" ]( value[ action ] );
				}
			});
		};
		applyClassChange();

		// map all animated objects again - calculate new styles and diff
		allAnimations = allAnimations.map(function() {
			this.end = getElementStyles( this.el[ 0 ] );
			this.diff = styleDifference( this.start, this.end );
			return this;
		});

		// apply original class
		animated.attr( "class", baseClass );

		// map all animated objects again - this time collecting a promise
		allAnimations = allAnimations.map(function() {
			var styleInfo = this,
				dfd = $.Deferred(),
				opts = $.extend({}, o, {
					queue: false,
					complete: function() {
						dfd.resolve( styleInfo );
					}
				});

			this.el.animate( this.diff, opts );
			return dfd.promise();
		});

		// once all animations have completed:
		$.when.apply( $, allAnimations.get() ).done(function() {

			// set the final class
			applyClassChange();

			// for each animated element,
			// clear all css properties that were animated
			$.each( arguments, function() {
				var el = this.el;
				$.each( this.diff, function(key) {
					el.css( key, "" );
				});
			});

			// this is guarnteed to be there if you use jQuery.speed()
			// it also handles dequeuing the next anim...
			o.complete.call( animated[ 0 ] );
		});
	});
};

$.fn.extend({
	addClass: (function( orig ) {
		return function( classNames, speed, easing, callback ) {
			return speed ?
				$.effects.animateClass.call( this,
					{ add: classNames }, speed, easing, callback ) :
				orig.apply( this, arguments );
		};
	})( $.fn.addClass ),

	removeClass: (function( orig ) {
		return function( classNames, speed, easing, callback ) {
			return arguments.length > 1 ?
				$.effects.animateClass.call( this,
					{ remove: classNames }, speed, easing, callback ) :
				orig.apply( this, arguments );
		};
	})( $.fn.removeClass ),

	toggleClass: (function( orig ) {
		return function( classNames, force, speed, easing, callback ) {
			if ( typeof force === "boolean" || force === undefined ) {
				if ( !speed ) {
					// without speed parameter
					return orig.apply( this, arguments );
				} else {
					return $.effects.animateClass.call( this,
						(force ? { add: classNames } : { remove: classNames }),
						speed, easing, callback );
				}
			} else {
				// without force parameter
				return $.effects.animateClass.call( this,
					{ toggle: classNames }, force, speed, easing );
			}
		};
	})( $.fn.toggleClass ),

	switchClass: function( remove, add, speed, easing, callback) {
		return $.effects.animateClass.call( this, {
			add: add,
			remove: remove
		}, speed, easing, callback );
	}
});

})();

/******************************************************************************/
/*********************************** EFFECTS **********************************/
/******************************************************************************/

(function() {

$.extend( $.effects, {
	version: "1.10.3",

	// Saves a set of properties in a data storage
	save: function( element, set ) {
		for( var i=0; i < set.length; i++ ) {
			if ( set[ i ] !== null ) {
				element.data( dataSpace + set[ i ], element[ 0 ].style[ set[ i ] ] );
			}
		}
	},

	// Restores a set of previously saved properties from a data storage
	restore: function( element, set ) {
		var val, i;
		for( i=0; i < set.length; i++ ) {
			if ( set[ i ] !== null ) {
				val = element.data( dataSpace + set[ i ] );
				// support: jQuery 1.6.2
				// http://bugs.jquery.com/ticket/9917
				// jQuery 1.6.2 incorrectly returns undefined for any falsy value.
				// We can't differentiate between "" and 0 here, so we just assume
				// empty string since it's likely to be a more common value...
				if ( val === undefined ) {
					val = "";
				}
				element.css( set[ i ], val );
			}
		}
	},

	setMode: function( el, mode ) {
		if (mode === "toggle") {
			mode = el.is( ":hidden" ) ? "show" : "hide";
		}
		return mode;
	},

	// Translates a [top,left] array into a baseline value
	// this should be a little more flexible in the future to handle a string & hash
	getBaseline: function( origin, original ) {
		var y, x;
		switch ( origin[ 0 ] ) {
			case "top": y = 0; break;
			case "middle": y = 0.5; break;
			case "bottom": y = 1; break;
			default: y = origin[ 0 ] / original.height;
		}
		switch ( origin[ 1 ] ) {
			case "left": x = 0; break;
			case "center": x = 0.5; break;
			case "right": x = 1; break;
			default: x = origin[ 1 ] / original.width;
		}
		return {
			x: x,
			y: y
		};
	},

	// Wraps the element around a wrapper that copies position properties
	createWrapper: function( element ) {

		// if the element is already wrapped, return it
		if ( element.parent().is( ".ui-effects-wrapper" )) {
			return element.parent();
		}

		// wrap the element
		var props = {
				width: element.outerWidth(true),
				height: element.outerHeight(true),
				"float": element.css( "float" )
			},
			wrapper = $( "<div></div>" )
				.addClass( "ui-effects-wrapper" )
				.css({
					fontSize: "100%",
					background: "transparent",
					border: "none",
					margin: 0,
					padding: 0
				}),
			// Store the size in case width/height are defined in % - Fixes #5245
			size = {
				width: element.width(),
				height: element.height()
			},
			active = document.activeElement;

		// support: Firefox
		// Firefox incorrectly exposes anonymous content
		// https://bugzilla.mozilla.org/show_bug.cgi?id=561664
		try {
			active.id;
		} catch( e ) {
			active = document.body;
		}

		element.wrap( wrapper );

		// Fixes #7595 - Elements lose focus when wrapped.
		if ( element[ 0 ] === active || $.contains( element[ 0 ], active ) ) {
			$( active ).focus();
		}

		wrapper = element.parent(); //Hotfix for jQuery 1.4 since some change in wrap() seems to actually lose the reference to the wrapped element

		// transfer positioning properties to the wrapper
		if ( element.css( "position" ) === "static" ) {
			wrapper.css({ position: "relative" });
			element.css({ position: "relative" });
		} else {
			$.extend( props, {
				position: element.css( "position" ),
				zIndex: element.css( "z-index" )
			});
			$.each([ "top", "left", "bottom", "right" ], function(i, pos) {
				props[ pos ] = element.css( pos );
				if ( isNaN( parseInt( props[ pos ], 10 ) ) ) {
					props[ pos ] = "auto";
				}
			});
			element.css({
				position: "relative",
				top: 0,
				left: 0,
				right: "auto",
				bottom: "auto"
			});
		}
		element.css(size);

		return wrapper.css( props ).show();
	},

	removeWrapper: function( element ) {
		var active = document.activeElement;

		if ( element.parent().is( ".ui-effects-wrapper" ) ) {
			element.parent().replaceWith( element );

			// Fixes #7595 - Elements lose focus when wrapped.
			if ( element[ 0 ] === active || $.contains( element[ 0 ], active ) ) {
				$( active ).focus();
			}
		}


		return element;
	},

	setTransition: function( element, list, factor, value ) {
		value = value || {};
		$.each( list, function( i, x ) {
			var unit = element.cssUnit( x );
			if ( unit[ 0 ] > 0 ) {
				value[ x ] = unit[ 0 ] * factor + unit[ 1 ];
			}
		});
		return value;
	}
});

// return an effect options object for the given parameters:
function _normalizeArguments( effect, options, speed, callback ) {

	// allow passing all options as the first parameter
	if ( $.isPlainObject( effect ) ) {
		options = effect;
		effect = effect.effect;
	}

	// convert to an object
	effect = { effect: effect };

	// catch (effect, null, ...)
	if ( options == null ) {
		options = {};
	}

	// catch (effect, callback)
	if ( $.isFunction( options ) ) {
		callback = options;
		speed = null;
		options = {};
	}

	// catch (effect, speed, ?)
	if ( typeof options === "number" || $.fx.speeds[ options ] ) {
		callback = speed;
		speed = options;
		options = {};
	}

	// catch (effect, options, callback)
	if ( $.isFunction( speed ) ) {
		callback = speed;
		speed = null;
	}

	// add options to effect
	if ( options ) {
		$.extend( effect, options );
	}

	speed = speed || options.duration;
	effect.duration = $.fx.off ? 0 :
		typeof speed === "number" ? speed :
		speed in $.fx.speeds ? $.fx.speeds[ speed ] :
		$.fx.speeds._default;

	effect.complete = callback || options.complete;

	return effect;
}

function standardAnimationOption( option ) {
	// Valid standard speeds (nothing, number, named speed)
	if ( !option || typeof option === "number" || $.fx.speeds[ option ] ) {
		return true;
	}

	// Invalid strings - treat as "normal" speed
	if ( typeof option === "string" && !$.effects.effect[ option ] ) {
		return true;
	}

	// Complete callback
	if ( $.isFunction( option ) ) {
		return true;
	}

	// Options hash (but not naming an effect)
	if ( typeof option === "object" && !option.effect ) {
		return true;
	}

	// Didn't match any standard API
	return false;
}

$.fn.extend({
	effect: function( /* effect, options, speed, callback */ ) {
		var args = _normalizeArguments.apply( this, arguments ),
			mode = args.mode,
			queue = args.queue,
			effectMethod = $.effects.effect[ args.effect ];

		if ( $.fx.off || !effectMethod ) {
			// delegate to the original method (e.g., .show()) if possible
			if ( mode ) {
				return this[ mode ]( args.duration, args.complete );
			} else {
				return this.each( function() {
					if ( args.complete ) {
						args.complete.call( this );
					}
				});
			}
		}

		function run( next ) {
			var elem = $( this ),
				complete = args.complete,
				mode = args.mode;

			function done() {
				if ( $.isFunction( complete ) ) {
					complete.call( elem[0] );
				}
				if ( $.isFunction( next ) ) {
					next();
				}
			}

			// If the element already has the correct final state, delegate to
			// the core methods so the internal tracking of "olddisplay" works.
			if ( elem.is( ":hidden" ) ? mode === "hide" : mode === "show" ) {
				elem[ mode ]();
				done();
			} else {
				effectMethod.call( elem[0], args, done );
			}
		}

		return queue === false ? this.each( run ) : this.queue( queue || "fx", run );
	},

	show: (function( orig ) {
		return function( option ) {
			if ( standardAnimationOption( option ) ) {
				return orig.apply( this, arguments );
			} else {
				var args = _normalizeArguments.apply( this, arguments );
				args.mode = "show";
				return this.effect.call( this, args );
			}
		};
	})( $.fn.show ),

	hide: (function( orig ) {
		return function( option ) {
			if ( standardAnimationOption( option ) ) {
				return orig.apply( this, arguments );
			} else {
				var args = _normalizeArguments.apply( this, arguments );
				args.mode = "hide";
				return this.effect.call( this, args );
			}
		};
	})( $.fn.hide ),

	toggle: (function( orig ) {
		return function( option ) {
			if ( standardAnimationOption( option ) || typeof option === "boolean" ) {
				return orig.apply( this, arguments );
			} else {
				var args = _normalizeArguments.apply( this, arguments );
				args.mode = "toggle";
				return this.effect.call( this, args );
			}
		};
	})( $.fn.toggle ),

	// helper functions
	cssUnit: function(key) {
		var style = this.css( key ),
			val = [];

		$.each( [ "em", "px", "%", "pt" ], function( i, unit ) {
			if ( style.indexOf( unit ) > 0 ) {
				val = [ parseFloat( style ), unit ];
			}
		});
		return val;
	}
});

})();

/******************************************************************************/
/*********************************** EASING ***********************************/
/******************************************************************************/

(function() {

// based on easing equations from Robert Penner (http://www.robertpenner.com/easing)

var baseEasings = {};

$.each( [ "Quad", "Cubic", "Quart", "Quint", "Expo" ], function( i, name ) {
	baseEasings[ name ] = function( p ) {
		return Math.pow( p, i + 2 );
	};
});

$.extend( baseEasings, {
	Sine: function ( p ) {
		return 1 - Math.cos( p * Math.PI / 2 );
	},
	Circ: function ( p ) {
		return 1 - Math.sqrt( 1 - p * p );
	},
	Elastic: function( p ) {
		return p === 0 || p === 1 ? p :
			-Math.pow( 2, 8 * (p - 1) ) * Math.sin( ( (p - 1) * 80 - 7.5 ) * Math.PI / 15 );
	},
	Back: function( p ) {
		return p * p * ( 3 * p - 2 );
	},
	Bounce: function ( p ) {
		var pow2,
			bounce = 4;

		while ( p < ( ( pow2 = Math.pow( 2, --bounce ) ) - 1 ) / 11 ) {}
		return 1 / Math.pow( 4, 3 - bounce ) - 7.5625 * Math.pow( ( pow2 * 3 - 2 ) / 22 - p, 2 );
	}
});

$.each( baseEasings, function( name, easeIn ) {
	$.easing[ "easeIn" + name ] = easeIn;
	$.easing[ "easeOut" + name ] = function( p ) {
		return 1 - easeIn( 1 - p );
	};
	$.easing[ "easeInOut" + name ] = function( p ) {
		return p < 0.5 ?
			easeIn( p * 2 ) / 2 :
			1 - easeIn( p * -2 + 2 ) / 2;
	};
});

})();

})(jQuery);

(function( $, undefined ) {

var uid = 0,
	hideProps = {},
	showProps = {};

hideProps.height = hideProps.paddingTop = hideProps.paddingBottom =
	hideProps.borderTopWidth = hideProps.borderBottomWidth = "hide";
showProps.height = showProps.paddingTop = showProps.paddingBottom =
	showProps.borderTopWidth = showProps.borderBottomWidth = "show";

$.widget( "ui.accordion", {
	version: "1.10.3",
	options: {
		active: 0,
		animate: {},
		collapsible: false,
		event: "click",
		header: "> li > :first-child,> :not(li):even",
		heightStyle: "auto",
		icons: {
			activeHeader: "ui-icon-triangle-1-s",
			header: "ui-icon-triangle-1-e"
		},

		// callbacks
		activate: null,
		beforeActivate: null
	},

	_create: function() {
		var options = this.options;
		this.prevShow = this.prevHide = $();
		this.element.addClass( "ui-accordion ui-widget ui-helper-reset" )
			// ARIA
			.attr( "role", "tablist" );

		// don't allow collapsible: false and active: false / null
		if ( !options.collapsible && (options.active === false || options.active == null) ) {
			options.active = 0;
		}

		this._processPanels();
		// handle negative values
		if ( options.active < 0 ) {
			options.active += this.headers.length;
		}
		this._refresh();
	},

	_getCreateEventData: function() {
		return {
			header: this.active,
			panel: !this.active.length ? $() : this.active.next(),
			content: !this.active.length ? $() : this.active.next()
		};
	},

	_createIcons: function() {
		var icons = this.options.icons;
		if ( icons ) {
			$( "<span>" )
				.addClass( "ui-accordion-header-icon ui-icon " + icons.header )
				.prependTo( this.headers );
			this.active.children( ".ui-accordion-header-icon" )
				.removeClass( icons.header )
				.addClass( icons.activeHeader );
			this.headers.addClass( "ui-accordion-icons" );
		}
	},

	_destroyIcons: function() {
		this.headers
			.removeClass( "ui-accordion-icons" )
			.children( ".ui-accordion-header-icon" )
				.remove();
	},

	_destroy: function() {
		var contents;

		// clean up main element
		this.element
			.removeClass( "ui-accordion ui-widget ui-helper-reset" )
			.removeAttr( "role" );

		// clean up headers
		this.headers
			.removeClass( "ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top" )
			.removeAttr( "role" )
			.removeAttr( "aria-selected" )
			.removeAttr( "aria-controls" )
			.removeAttr( "tabIndex" )
			.each(function() {
				if ( /^ui-accordion/.test( this.id ) ) {
					this.removeAttribute( "id" );
				}
			});
		this._destroyIcons();

		// clean up content panels
		contents = this.headers.next()
			.css( "display", "" )
			.removeAttr( "role" )
			.removeAttr( "aria-expanded" )
			.removeAttr( "aria-hidden" )
			.removeAttr( "aria-labelledby" )
			.removeClass( "ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled" )
			.each(function() {
				if ( /^ui-accordion/.test( this.id ) ) {
					this.removeAttribute( "id" );
				}
			});
		if ( this.options.heightStyle !== "content" ) {
			contents.css( "height", "" );
		}
	},

	_setOption: function( key, value ) {
		if ( key === "active" ) {
			// _activate() will handle invalid values and update this.options
			this._activate( value );
			return;
		}

		if ( key === "event" ) {
			if ( this.options.event ) {
				this._off( this.headers, this.options.event );
			}
			this._setupEvents( value );
		}

		this._super( key, value );

		// setting collapsible: false while collapsed; open first panel
		if ( key === "collapsible" && !value && this.options.active === false ) {
			this._activate( 0 );
		}

		if ( key === "icons" ) {
			this._destroyIcons();
			if ( value ) {
				this._createIcons();
			}
		}

		// #5332 - opacity doesn't cascade to positioned elements in IE
		// so we need to add the disabled class to the headers and panels
		if ( key === "disabled" ) {
			this.headers.add( this.headers.next() )
				.toggleClass( "ui-state-disabled", !!value );
		}
	},

	_keydown: function( event ) {
		/*jshint maxcomplexity:15*/
		if ( event.altKey || event.ctrlKey ) {
			return;
		}

		var keyCode = $.ui.keyCode,
			length = this.headers.length,
			currentIndex = this.headers.index( event.target ),
			toFocus = false;

		switch ( event.keyCode ) {
			case keyCode.RIGHT:
			case keyCode.DOWN:
				toFocus = this.headers[ ( currentIndex + 1 ) % length ];
				break;
			case keyCode.LEFT:
			case keyCode.UP:
				toFocus = this.headers[ ( currentIndex - 1 + length ) % length ];
				break;
			case keyCode.SPACE:
			case keyCode.ENTER:
				this._eventHandler( event );
				break;
			case keyCode.HOME:
				toFocus = this.headers[ 0 ];
				break;
			case keyCode.END:
				toFocus = this.headers[ length - 1 ];
				break;
		}

		if ( toFocus ) {
			$( event.target ).attr( "tabIndex", -1 );
			$( toFocus ).attr( "tabIndex", 0 );
			toFocus.focus();
			event.preventDefault();
		}
	},

	_panelKeyDown : function( event ) {
		if ( event.keyCode === $.ui.keyCode.UP && event.ctrlKey ) {
			$( event.currentTarget ).prev().focus();
		}
	},

	refresh: function() {
		var options = this.options;
		this._processPanels();

		// was collapsed or no panel
		if ( ( options.active === false && options.collapsible === true ) || !this.headers.length ) {
			options.active = false;
			this.active = $();
		// active false only when collapsible is true
		} else if ( options.active === false ) {
			this._activate( 0 );
		// was active, but active panel is gone
		} else if ( this.active.length && !$.contains( this.element[ 0 ], this.active[ 0 ] ) ) {
			// all remaining panel are disabled
			if ( this.headers.length === this.headers.find(".ui-state-disabled").length ) {
				options.active = false;
				this.active = $();
			// activate previous panel
			} else {
				this._activate( Math.max( 0, options.active - 1 ) );
			}
		// was active, active panel still exists
		} else {
			// make sure active index is correct
			options.active = this.headers.index( this.active );
		}

		this._destroyIcons();

		this._refresh();
	},

	_processPanels: function() {
		this.headers = this.element.find( this.options.header )
			.addClass( "ui-accordion-header ui-helper-reset ui-state-default ui-corner-all" );

		this.headers.next()
			.addClass( "ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom" )
			.filter(":not(.ui-accordion-content-active)")
			.hide();
	},

	_refresh: function() {
		var maxHeight,
			options = this.options,
			heightStyle = options.heightStyle,
			parent = this.element.parent(),
			accordionId = this.accordionId = "ui-accordion-" +
				(this.element.attr( "id" ) || ++uid);

		this.active = this._findActive( options.active )
			.addClass( "ui-accordion-header-active ui-state-active ui-corner-top" )
			.removeClass( "ui-corner-all" );
		this.active.next()
			.addClass( "ui-accordion-content-active" )
			.show();

		this.headers
			.attr( "role", "tab" )
			.each(function( i ) {
				var header = $( this ),
					headerId = header.attr( "id" ),
					panel = header.next(),
					panelId = panel.attr( "id" );
				if ( !headerId ) {
					headerId = accordionId + "-header-" + i;
					header.attr( "id", headerId );
				}
				if ( !panelId ) {
					panelId = accordionId + "-panel-" + i;
					panel.attr( "id", panelId );
				}
				header.attr( "aria-controls", panelId );
				panel.attr( "aria-labelledby", headerId );
			})
			.next()
				.attr( "role", "tabpanel" );

		this.headers
			.not( this.active )
			.attr({
				"aria-selected": "false",
				tabIndex: -1
			})
			.next()
				.attr({
					"aria-expanded": "false",
					"aria-hidden": "true"
				})
				.hide();

		// make sure at least one header is in the tab order
		if ( !this.active.length ) {
			this.headers.eq( 0 ).attr( "tabIndex", 0 );
		} else {
			this.active.attr({
				"aria-selected": "true",
				tabIndex: 0
			})
			.next()
				.attr({
					"aria-expanded": "true",
					"aria-hidden": "false"
				});
		}

		this._createIcons();

		this._setupEvents( options.event );

		if ( heightStyle === "fill" ) {
			maxHeight = parent.height();
			this.element.siblings( ":visible" ).each(function() {
				var elem = $( this ),
					position = elem.css( "position" );

				if ( position === "absolute" || position === "fixed" ) {
					return;
				}
				maxHeight -= elem.outerHeight( true );
			});

			this.headers.each(function() {
				maxHeight -= $( this ).outerHeight( true );
			});

			this.headers.next()
				.each(function() {
					$( this ).height( Math.max( 0, maxHeight -
						$( this ).innerHeight() + $( this ).height() ) );
				})
				.css( "overflow", "auto" );
		} else if ( heightStyle === "auto" ) {
			maxHeight = 0;
			this.headers.next()
				.each(function() {
					maxHeight = Math.max( maxHeight, $( this ).css( "height", "" ).height() );
				})
				.height( maxHeight );
		}
	},

	_activate: function( index ) {
		var active = this._findActive( index )[ 0 ];

		// trying to activate the already active panel
		if ( active === this.active[ 0 ] ) {
			return;
		}

		// trying to collapse, simulate a click on the currently active header
		active = active || this.active[ 0 ];

		this._eventHandler({
			target: active,
			currentTarget: active,
			preventDefault: $.noop
		});
	},

	_findActive: function( selector ) {
		return typeof selector === "number" ? this.headers.eq( selector ) : $();
	},

	_setupEvents: function( event ) {
		var events = {
			keydown: "_keydown"
		};
		if ( event ) {
			$.each( event.split(" "), function( index, eventName ) {
				events[ eventName ] = "_eventHandler";
			});
		}

		this._off( this.headers.add( this.headers.next() ) );
		this._on( this.headers, events );
		this._on( this.headers.next(), { keydown: "_panelKeyDown" });
		this._hoverable( this.headers );
		this._focusable( this.headers );
	},

	_eventHandler: function( event ) {
		var options = this.options,
			active = this.active,
			clicked = $( event.currentTarget ),
			clickedIsActive = clicked[ 0 ] === active[ 0 ],
			collapsing = clickedIsActive && options.collapsible,
			toShow = collapsing ? $() : clicked.next(),
			toHide = active.next(),
			eventData = {
				oldHeader: active,
				oldPanel: toHide,
				newHeader: collapsing ? $() : clicked,
				newPanel: toShow
			};

		event.preventDefault();

		if (
				// click on active header, but not collapsible
				( clickedIsActive && !options.collapsible ) ||
				// allow canceling activation
				( this._trigger( "beforeActivate", event, eventData ) === false ) ) {
			return;
		}

		options.active = collapsing ? false : this.headers.index( clicked );

		// when the call to ._toggle() comes after the class changes
		// it causes a very odd bug in IE 8 (see #6720)
		this.active = clickedIsActive ? $() : clicked;
		this._toggle( eventData );

		// switch classes
		// corner classes on the previously active header stay after the animation
		active.removeClass( "ui-accordion-header-active ui-state-active" );
		if ( options.icons ) {
			active.children( ".ui-accordion-header-icon" )
				.removeClass( options.icons.activeHeader )
				.addClass( options.icons.header );
		}

		if ( !clickedIsActive ) {
			clicked
				.removeClass( "ui-corner-all" )
				.addClass( "ui-accordion-header-active ui-state-active ui-corner-top" );
			if ( options.icons ) {
				clicked.children( ".ui-accordion-header-icon" )
					.removeClass( options.icons.header )
					.addClass( options.icons.activeHeader );
			}

			clicked
				.next()
				.addClass( "ui-accordion-content-active" );
		}
	},

	_toggle: function( data ) {
		var toShow = data.newPanel,
			toHide = this.prevShow.length ? this.prevShow : data.oldPanel;

		// handle activating a panel during the animation for another activation
		this.prevShow.add( this.prevHide ).stop( true, true );
		this.prevShow = toShow;
		this.prevHide = toHide;

		if ( this.options.animate ) {
			this._animate( toShow, toHide, data );
		} else {
			toHide.hide();
			toShow.show();
			this._toggleComplete( data );
		}

		toHide.attr({
			"aria-expanded": "false",
			"aria-hidden": "true"
		});
		toHide.prev().attr( "aria-selected", "false" );
		// if we're switching panels, remove the old header from the tab order
		// if we're opening from collapsed state, remove the previous header from the tab order
		// if we're collapsing, then keep the collapsing header in the tab order
		if ( toShow.length && toHide.length ) {
			toHide.prev().attr( "tabIndex", -1 );
		} else if ( toShow.length ) {
			this.headers.filter(function() {
				return $( this ).attr( "tabIndex" ) === 0;
			})
			.attr( "tabIndex", -1 );
		}

		toShow
			.attr({
				"aria-expanded": "true",
				"aria-hidden": "false"
			})
			.prev()
				.attr({
					"aria-selected": "true",
					tabIndex: 0
				});
	},

	_animate: function( toShow, toHide, data ) {
		var total, easing, duration,
			that = this,
			adjust = 0,
			down = toShow.length &&
				( !toHide.length || ( toShow.index() < toHide.index() ) ),
			animate = this.options.animate || {},
			options = down && animate.down || animate,
			complete = function() {
				that._toggleComplete( data );
			};

		if ( typeof options === "number" ) {
			duration = options;
		}
		if ( typeof options === "string" ) {
			easing = options;
		}
		// fall back from options to animation in case of partial down settings
		easing = easing || options.easing || animate.easing;
		duration = duration || options.duration || animate.duration;

		if ( !toHide.length ) {
			return toShow.animate( showProps, duration, easing, complete );
		}
		if ( !toShow.length ) {
			return toHide.animate( hideProps, duration, easing, complete );
		}

		total = toShow.show().outerHeight();
		toHide.animate( hideProps, {
			duration: duration,
			easing: easing,
			step: function( now, fx ) {
				fx.now = Math.round( now );
			}
		});
		toShow
			.hide()
			.animate( showProps, {
				duration: duration,
				easing: easing,
				complete: complete,
				step: function( now, fx ) {
					fx.now = Math.round( now );
					if ( fx.prop !== "height" ) {
						adjust += fx.now;
					} else if ( that.options.heightStyle !== "content" ) {
						fx.now = Math.round( total - toHide.outerHeight() - adjust );
						adjust = 0;
					}
				}
			});
	},

	_toggleComplete: function( data ) {
		var toHide = data.oldPanel;

		toHide
			.removeClass( "ui-accordion-content-active" )
			.prev()
				.removeClass( "ui-corner-top" )
				.addClass( "ui-corner-all" );

		// Work around for rendering bug in IE (#5421)
		if ( toHide.length ) {
			toHide.parent()[0].className = toHide.parent()[0].className;
		}

		this._trigger( "activate", null, data );
	}
});

})( jQuery );

(function( $, undefined ) {

// used to prevent race conditions with remote data sources
var requestIndex = 0;

$.widget( "ui.autocomplete", {
	version: "1.10.3",
	defaultElement: "<input>",
	options: {
		appendTo: null,
		autoFocus: false,
		delay: 300,
		minLength: 1,
		position: {
			my: "left top",
			at: "left bottom",
			collision: "none"
		},
		source: null,

		// callbacks
		change: null,
		close: null,
		focus: null,
		open: null,
		response: null,
		search: null,
		select: null
	},

	pending: 0,

	_create: function() {
		// Some browsers only repeat keydown events, not keypress events,
		// so we use the suppressKeyPress flag to determine if we've already
		// handled the keydown event. #7269
		// Unfortunately the code for & in keypress is the same as the up arrow,
		// so we use the suppressKeyPressRepeat flag to avoid handling keypress
		// events when we know the keydown event was used to modify the
		// search term. #7799
		var suppressKeyPress, suppressKeyPressRepeat, suppressInput,
			nodeName = this.element[0].nodeName.toLowerCase(),
			isTextarea = nodeName === "textarea",
			isInput = nodeName === "input";

		this.isMultiLine =
			// Textareas are always multi-line
			isTextarea ? true :
			// Inputs are always single-line, even if inside a contentEditable element
			// IE also treats inputs as contentEditable
			isInput ? false :
			// All other element types are determined by whether or not they're contentEditable
			this.element.prop( "isContentEditable" );

		this.valueMethod = this.element[ isTextarea || isInput ? "val" : "text" ];
		this.isNewMenu = true;

		this.element
			.addClass( "ui-autocomplete-input" )
			.attr( "autocomplete", "off" );

		this._on( this.element, {
			keydown: function( event ) {
				/*jshint maxcomplexity:15*/
				if ( this.element.prop( "readOnly" ) ) {
					suppressKeyPress = true;
					suppressInput = true;
					suppressKeyPressRepeat = true;
					return;
				}

				suppressKeyPress = false;
				suppressInput = false;
				suppressKeyPressRepeat = false;
				var keyCode = $.ui.keyCode;
				switch( event.keyCode ) {
				case keyCode.PAGE_UP:
					suppressKeyPress = true;
					this._move( "previousPage", event );
					break;
				case keyCode.PAGE_DOWN:
					suppressKeyPress = true;
					this._move( "nextPage", event );
					break;
				case keyCode.UP:
					suppressKeyPress = true;
					this._keyEvent( "previous", event );
					break;
				case keyCode.DOWN:
					suppressKeyPress = true;
					this._keyEvent( "next", event );
					break;
				case keyCode.ENTER:
				case keyCode.NUMPAD_ENTER:
					// when menu is open and has focus
					if ( this.menu.active ) {
						// #6055 - Opera still allows the keypress to occur
						// which causes forms to submit
						suppressKeyPress = true;
						event.preventDefault();
						this.menu.select( event );
					}
					break;
				case keyCode.TAB:
					if ( this.menu.active ) {
						this.menu.select( event );
					}
					break;
				case keyCode.ESCAPE:
					if ( this.menu.element.is( ":visible" ) ) {
						this._value( this.term );
						this.close( event );
						// Different browsers have different default behavior for escape
						// Single press can mean undo or clear
						// Double press in IE means clear the whole form
						event.preventDefault();
					}
					break;
				default:
					suppressKeyPressRepeat = true;
					// search timeout should be triggered before the input value is changed
					this._searchTimeout( event );
					break;
				}
			},
			keypress: function( event ) {
				if ( suppressKeyPress ) {
					suppressKeyPress = false;
					if ( !this.isMultiLine || this.menu.element.is( ":visible" ) ) {
						event.preventDefault();
					}
					return;
				}
				if ( suppressKeyPressRepeat ) {
					return;
				}

				// replicate some key handlers to allow them to repeat in Firefox and Opera
				var keyCode = $.ui.keyCode;
				switch( event.keyCode ) {
				case keyCode.PAGE_UP:
					this._move( "previousPage", event );
					break;
				case keyCode.PAGE_DOWN:
					this._move( "nextPage", event );
					break;
				case keyCode.UP:
					this._keyEvent( "previous", event );
					break;
				case keyCode.DOWN:
					this._keyEvent( "next", event );
					break;
				}
			},
			input: function( event ) {
				if ( suppressInput ) {
					suppressInput = false;
					event.preventDefault();
					return;
				}
				this._searchTimeout( event );
			},
			focus: function() {
				this.selectedItem = null;
				this.previous = this._value();
			},
			blur: function( event ) {
				if ( this.cancelBlur ) {
					delete this.cancelBlur;
					return;
				}

				clearTimeout( this.searching );
				this.close( event );
				this._change( event );
			}
		});

		this._initSource();
		this.menu = $( "<ul>" )
			.addClass( "ui-autocomplete ui-front" )
			.appendTo( this._appendTo() )
			.menu({
				// disable ARIA support, the live region takes care of that
				role: null
			})
			.hide()
			.data( "ui-menu" );

		this._on( this.menu.element, {
			mousedown: function( event ) {
				// prevent moving focus out of the text field
				event.preventDefault();

				// IE doesn't prevent moving focus even with event.preventDefault()
				// so we set a flag to know when we should ignore the blur event
				this.cancelBlur = true;
				this._delay(function() {
					delete this.cancelBlur;
				});

				// clicking on the scrollbar causes focus to shift to the body
				// but we can't detect a mouseup or a click immediately afterward
				// so we have to track the next mousedown and close the menu if
				// the user clicks somewhere outside of the autocomplete
				var menuElement = this.menu.element[ 0 ];
				if ( !$( event.target ).closest( ".ui-menu-item" ).length ) {
					this._delay(function() {
						var that = this;
						this.document.one( "mousedown", function( event ) {
							if ( event.target !== that.element[ 0 ] &&
									event.target !== menuElement &&
									!$.contains( menuElement, event.target ) ) {
								that.close();
							}
						});
					});
				}
			},
			menufocus: function( event, ui ) {
				// support: Firefox
				// Prevent accidental activation of menu items in Firefox (#7024 #9118)
				if ( this.isNewMenu ) {
					this.isNewMenu = false;
					if ( event.originalEvent && /^mouse/.test( event.originalEvent.type ) ) {
						this.menu.blur();

						this.document.one( "mousemove", function() {
							$( event.target ).trigger( event.originalEvent );
						});

						return;
					}
				}

				var item = ui.item.data( "ui-autocomplete-item" );
				if ( false !== this._trigger( "focus", event, { item: item } ) ) {
					// use value to match what will end up in the input, if it was a key event
					if ( event.originalEvent && /^key/.test( event.originalEvent.type ) ) {
						this._value( item.value );
					}
				} else {
					// Normally the input is populated with the item's value as the
					// menu is navigated, causing screen readers to notice a change and
					// announce the item. Since the focus event was canceled, this doesn't
					// happen, so we update the live region so that screen readers can
					// still notice the change and announce it.
					this.liveRegion.text( item.value );
				}
			},
			menuselect: function( event, ui ) {
				var item = ui.item.data( "ui-autocomplete-item" ),
					previous = this.previous;

				// only trigger when focus was lost (click on menu)
				if ( this.element[0] !== this.document[0].activeElement ) {
					this.element.focus();
					this.previous = previous;
					// #6109 - IE triggers two focus events and the second
					// is asynchronous, so we need to reset the previous
					// term synchronously and asynchronously :-(
					this._delay(function() {
						this.previous = previous;
						this.selectedItem = item;
					});
				}

				if ( false !== this._trigger( "select", event, { item: item } ) ) {
					this._value( item.value );
				}
				// reset the term after the select event
				// this allows custom select handling to work properly
				this.term = this._value();

				this.close( event );
				this.selectedItem = item;
			}
		});

		this.liveRegion = $( "<span>", {
				role: "status",
				"aria-live": "polite"
			})
			.addClass( "ui-helper-hidden-accessible" )
			.insertBefore( this.element );

		// turning off autocomplete prevents the browser from remembering the
		// value when navigating through history, so we re-enable autocomplete
		// if the page is unloaded before the widget is destroyed. #7790
		this._on( this.window, {
			beforeunload: function() {
				this.element.removeAttr( "autocomplete" );
			}
		});
	},

	_destroy: function() {
		clearTimeout( this.searching );
		this.element
			.removeClass( "ui-autocomplete-input" )
			.removeAttr( "autocomplete" );
		this.menu.element.remove();
		this.liveRegion.remove();
	},

	_setOption: function( key, value ) {
		this._super( key, value );
		if ( key === "source" ) {
			this._initSource();
		}
		if ( key === "appendTo" ) {
			this.menu.element.appendTo( this._appendTo() );
		}
		if ( key === "disabled" && value && this.xhr ) {
			this.xhr.abort();
		}
	},

	_appendTo: function() {
		var element = this.options.appendTo;

		if ( element ) {
			element = element.jquery || element.nodeType ?
				$( element ) :
				this.document.find( element ).eq( 0 );
		}

		if ( !element ) {
			element = this.element.closest( ".ui-front" );
		}

		if ( !element.length ) {
			element = this.document[0].body;
		}

		return element;
	},

	_initSource: function() {
		var array, url,
			that = this;
		if ( $.isArray(this.options.source) ) {
			array = this.options.source;
			this.source = function( request, response ) {
				response( $.ui.autocomplete.filter( array, request.term ) );
			};
		} else if ( typeof this.options.source === "string" ) {
			url = this.options.source;
			this.source = function( request, response ) {
				if ( that.xhr ) {
					that.xhr.abort();
				}
				that.xhr = $.ajax({
					url: url,
					data: request,
					dataType: "json",
					success: function( data ) {
						response( data );
					},
					error: function() {
						response( [] );
					}
				});
			};
		} else {
			this.source = this.options.source;
		}
	},

	_searchTimeout: function( event ) {
		clearTimeout( this.searching );
		this.searching = this._delay(function() {
			// only search if the value has changed
			if ( this.term !== this._value() ) {
				this.selectedItem = null;
				this.search( null, event );
			}
		}, this.options.delay );
	},

	search: function( value, event ) {
		value = value != null ? value : this._value();

		// always save the actual value, not the one passed as an argument
		this.term = this._value();

		if ( value.length < this.options.minLength ) {
			return this.close( event );
		}

		if ( this._trigger( "search", event ) === false ) {
			return;
		}

		return this._search( value );
	},

	_search: function( value ) {
		this.pending++;
		this.element.addClass( "ui-autocomplete-loading" );
		this.cancelSearch = false;

		this.source( { term: value }, this._response() );
	},

	_response: function() {
		var that = this,
			index = ++requestIndex;

		return function( content ) {
			if ( index === requestIndex ) {
				that.__response( content );
			}

			that.pending--;
			if ( !that.pending ) {
				that.element.removeClass( "ui-autocomplete-loading" );
			}
		};
	},

	__response: function( content ) {
		if ( content ) {
			content = this._normalize( content );
		}
		this._trigger( "response", null, { content: content } );
		if ( !this.options.disabled && content && content.length && !this.cancelSearch ) {
			this._suggest( content );
			this._trigger( "open" );
		} else {
			// use ._close() instead of .close() so we don't cancel future searches
			this._close();
		}
	},

	close: function( event ) {
		this.cancelSearch = true;
		this._close( event );
	},

	_close: function( event ) {
		if ( this.menu.element.is( ":visible" ) ) {
			this.menu.element.hide();
			this.menu.blur();
			this.isNewMenu = true;
			this._trigger( "close", event );
		}
	},

	_change: function( event ) {
		if ( this.previous !== this._value() ) {
			this._trigger( "change", event, { item: this.selectedItem } );
		}
	},

	_normalize: function( items ) {
		// assume all items have the right format when the first item is complete
		if ( items.length && items[0].label && items[0].value ) {
			return items;
		}
		return $.map( items, function( item ) {
			if ( typeof item === "string" ) {
				return {
					label: item,
					value: item
				};
			}
			return $.extend({
				label: item.label || item.value,
				value: item.value || item.label
			}, item );
		});
	},

	_suggest: function( items ) {
		var ul = this.menu.element.empty();
		this._renderMenu( ul, items );
		this.isNewMenu = true;
		this.menu.refresh();

		// size and position menu
		ul.show();
		this._resizeMenu();
		ul.position( $.extend({
			of: this.element
		}, this.options.position ));

		if ( this.options.autoFocus ) {
			this.menu.next();
		}
	},

	_resizeMenu: function() {
		var ul = this.menu.element;
		ul.outerWidth( Math.max(
			// Firefox wraps long text (possibly a rounding bug)
			// so we add 1px to avoid the wrapping (#7513)
			ul.width( "" ).outerWidth() + 1,
			this.element.outerWidth()
		) );
	},

	_renderMenu: function( ul, items ) {
		var that = this;
		$.each( items, function( index, item ) {
			that._renderItemData( ul, item );
		});
	},

	_renderItemData: function( ul, item ) {
		return this._renderItem( ul, item ).data( "ui-autocomplete-item", item );
	},

	_renderItem: function( ul, item ) {
		return $( "<li>" )
			.append( $( "<a>" ).text( item.label ) )
			.appendTo( ul );
	},

	_move: function( direction, event ) {
		if ( !this.menu.element.is( ":visible" ) ) {
			this.search( null, event );
			return;
		}
		if ( this.menu.isFirstItem() && /^previous/.test( direction ) ||
				this.menu.isLastItem() && /^next/.test( direction ) ) {
			this._value( this.term );
			this.menu.blur();
			return;
		}
		this.menu[ direction ]( event );
	},

	widget: function() {
		return this.menu.element;
	},

	_value: function() {
		return this.valueMethod.apply( this.element, arguments );
	},

	_keyEvent: function( keyEvent, event ) {
		if ( !this.isMultiLine || this.menu.element.is( ":visible" ) ) {
			this._move( keyEvent, event );

			// prevents moving cursor to beginning/end of the text field in some browsers
			event.preventDefault();
		}
	}
});

$.extend( $.ui.autocomplete, {
	escapeRegex: function( value ) {
		return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&");
	},
	filter: function(array, term) {
		var matcher = new RegExp( $.ui.autocomplete.escapeRegex(term), "i" );
		return $.grep( array, function(value) {
			return matcher.test( value.label || value.value || value );
		});
	}
});


// live region extension, adding a `messages` option
// NOTE: This is an experimental API. We are still investigating
// a full solution for string manipulation and internationalization.
$.widget( "ui.autocomplete", $.ui.autocomplete, {
	options: {
		messages: {
			noResults: "No search results.",
			results: function( amount ) {
				return amount + ( amount > 1 ? " results are" : " result is" ) +
					" available, use up and down arrow keys to navigate.";
			}
		}
	},

	__response: function( content ) {
		var message;
		this._superApply( arguments );
		if ( this.options.disabled || this.cancelSearch ) {
			return;
		}
		if ( content && content.length ) {
			message = this.options.messages.results( content.length );
		} else {
			message = this.options.messages.noResults;
		}
		this.liveRegion.text( message );
	}
});

}( jQuery ));

(function( $, undefined ) {

var lastActive, startXPos, startYPos, clickDragged,
	baseClasses = "ui-button ui-widget ui-state-default ui-corner-all",
	stateClasses = "ui-state-hover ui-state-active ",
	typeClasses = "ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",
	formResetHandler = function() {
		var form = $( this );
		setTimeout(function() {
			form.find( ":ui-button" ).button( "refresh" );
		}, 1 );
	},
	radioGroup = function( radio ) {
		var name = radio.name,
			form = radio.form,
			radios = $( [] );
		if ( name ) {
			name = name.replace( /'/g, "\\'" );
			if ( form ) {
				radios = $( form ).find( "[name='" + name + "']" );
			} else {
				radios = $( "[name='" + name + "']", radio.ownerDocument )
					.filter(function() {
						return !this.form;
					});
			}
		}
		return radios;
	};

$.widget( "ui.button", {
	version: "1.10.3",
	defaultElement: "<button>",
	options: {
		disabled: null,
		text: true,
		label: null,
		icons: {
			primary: null,
			secondary: null
		}
	},
	_create: function() {
		this.element.closest( "form" )
			.unbind( "reset" + this.eventNamespace )
			.bind( "reset" + this.eventNamespace, formResetHandler );

		if ( typeof this.options.disabled !== "boolean" ) {
			this.options.disabled = !!this.element.prop( "disabled" );
		} else {
			this.element.prop( "disabled", this.options.disabled );
		}

		this._determineButtonType();
		this.hasTitle = !!this.buttonElement.attr( "title" );

		var that = this,
			options = this.options,
			toggleButton = this.type === "checkbox" || this.type === "radio",
			activeClass = !toggleButton ? "ui-state-active" : "",
			focusClass = "ui-state-focus";

		if ( options.label === null ) {
			options.label = (this.type === "input" ? this.buttonElement.val() : this.buttonElement.html());
		}

		this._hoverable( this.buttonElement );

		this.buttonElement
			.addClass( baseClasses )
			.attr( "role", "button" )
			.bind( "mouseenter" + this.eventNamespace, function() {
				if ( options.disabled ) {
					return;
				}
				if ( this === lastActive ) {
					$( this ).addClass( "ui-state-active" );
				}
			})
			.bind( "mouseleave" + this.eventNamespace, function() {
				if ( options.disabled ) {
					return;
				}
				$( this ).removeClass( activeClass );
			})
			.bind( "click" + this.eventNamespace, function( event ) {
				if ( options.disabled ) {
					event.preventDefault();
					event.stopImmediatePropagation();
				}
			});

		this.element
			.bind( "focus" + this.eventNamespace, function() {
				// no need to check disabled, focus won't be triggered anyway
				that.buttonElement.addClass( focusClass );
			})
			.bind( "blur" + this.eventNamespace, function() {
				that.buttonElement.removeClass( focusClass );
			});

		if ( toggleButton ) {
			this.element.bind( "change" + this.eventNamespace, function() {
				if ( clickDragged ) {
					return;
				}
				that.refresh();
			});
			// if mouse moves between mousedown and mouseup (drag) set clickDragged flag
			// prevents issue where button state changes but checkbox/radio checked state
			// does not in Firefox (see ticket #6970)
			this.buttonElement
				.bind( "mousedown" + this.eventNamespace, function( event ) {
					if ( options.disabled ) {
						return;
					}
					clickDragged = false;
					startXPos = event.pageX;
					startYPos = event.pageY;
				})
				.bind( "mouseup" + this.eventNamespace, function( event ) {
					if ( options.disabled ) {
						return;
					}
					if ( startXPos !== event.pageX || startYPos !== event.pageY ) {
						clickDragged = true;
					}
			});
		}

		if ( this.type === "checkbox" ) {
			this.buttonElement.bind( "click" + this.eventNamespace, function() {
				if ( options.disabled || clickDragged ) {
					return false;
				}
			});
		} else if ( this.type === "radio" ) {
			this.buttonElement.bind( "click" + this.eventNamespace, function() {
				if ( options.disabled || clickDragged ) {
					return false;
				}
				$( this ).addClass( "ui-state-active" );
				that.buttonElement.attr( "aria-pressed", "true" );

				var radio = that.element[ 0 ];
				radioGroup( radio )
					.not( radio )
					.map(function() {
						return $( this ).button( "widget" )[ 0 ];
					})
					.removeClass( "ui-state-active" )
					.attr( "aria-pressed", "false" );
			});
		} else {
			this.buttonElement
				.bind( "mousedown" + this.eventNamespace, function() {
					if ( options.disabled ) {
						return false;
					}
					$( this ).addClass( "ui-state-active" );
					lastActive = this;
					that.document.one( "mouseup", function() {
						lastActive = null;
					});
				})
				.bind( "mouseup" + this.eventNamespace, function() {
					if ( options.disabled ) {
						return false;
					}
					$( this ).removeClass( "ui-state-active" );
				})
				.bind( "keydown" + this.eventNamespace, function(event) {
					if ( options.disabled ) {
						return false;
					}
					if ( event.keyCode === $.ui.keyCode.SPACE || event.keyCode === $.ui.keyCode.ENTER ) {
						$( this ).addClass( "ui-state-active" );
					}
				})
				// see #8559, we bind to blur here in case the button element loses
				// focus between keydown and keyup, it would be left in an "active" state
				.bind( "keyup" + this.eventNamespace + " blur" + this.eventNamespace, function() {
					$( this ).removeClass( "ui-state-active" );
				});

			if ( this.buttonElement.is("a") ) {
				this.buttonElement.keyup(function(event) {
					if ( event.keyCode === $.ui.keyCode.SPACE ) {
						// TODO pass through original event correctly (just as 2nd argument doesn't work)
						$( this ).click();
					}
				});
			}
		}

		// TODO: pull out $.Widget's handling for the disabled option into
		// $.Widget.prototype._setOptionDisabled so it's easy to proxy and can
		// be overridden by individual plugins
		this._setOption( "disabled", options.disabled );
		this._resetButton();
	},

	_determineButtonType: function() {
		var ancestor, labelSelector, checked;

		if ( this.element.is("[type=checkbox]") ) {
			this.type = "checkbox";
		} else if ( this.element.is("[type=radio]") ) {
			this.type = "radio";
		} else if ( this.element.is("input") ) {
			this.type = "input";
		} else {
			this.type = "button";
		}

		if ( this.type === "checkbox" || this.type === "radio" ) {
			// we don't search against the document in case the element
			// is disconnected from the DOM
			ancestor = this.element.parents().last();
			labelSelector = "label[for='" + this.element.attr("id") + "']";
			this.buttonElement = ancestor.find( labelSelector );
			if ( !this.buttonElement.length ) {
				ancestor = ancestor.length ? ancestor.siblings() : this.element.siblings();
				this.buttonElement = ancestor.filter( labelSelector );
				if ( !this.buttonElement.length ) {
					this.buttonElement = ancestor.find( labelSelector );
				}
			}
			this.element.addClass( "ui-helper-hidden-accessible" );

			checked = this.element.is( ":checked" );
			if ( checked ) {
				this.buttonElement.addClass( "ui-state-active" );
			}
			this.buttonElement.prop( "aria-pressed", checked );
		} else {
			this.buttonElement = this.element;
		}
	},

	widget: function() {
		return this.buttonElement;
	},

	_destroy: function() {
		this.element
			.removeClass( "ui-helper-hidden-accessible" );
		this.buttonElement
			.removeClass( baseClasses + " " + stateClasses + " " + typeClasses )
			.removeAttr( "role" )
			.removeAttr( "aria-pressed" )
			.html( this.buttonElement.find(".ui-button-text").html() );

		if ( !this.hasTitle ) {
			this.buttonElement.removeAttr( "title" );
		}
	},

	_setOption: function( key, value ) {
		this._super( key, value );
		if ( key === "disabled" ) {
			if ( value ) {
				this.element.prop( "disabled", true );
			} else {
				this.element.prop( "disabled", false );
			}
			return;
		}
		this._resetButton();
	},

	refresh: function() {
		//See #8237 & #8828
		var isDisabled = this.element.is( "input, button" ) ? this.element.is( ":disabled" ) : this.element.hasClass( "ui-button-disabled" );

		if ( isDisabled !== this.options.disabled ) {
			this._setOption( "disabled", isDisabled );
		}
		if ( this.type === "radio" ) {
			radioGroup( this.element[0] ).each(function() {
				if ( $( this ).is( ":checked" ) ) {
					$( this ).button( "widget" )
						.addClass( "ui-state-active" )
						.attr( "aria-pressed", "true" );
				} else {
					$( this ).button( "widget" )
						.removeClass( "ui-state-active" )
						.attr( "aria-pressed", "false" );
				}
			});
		} else if ( this.type === "checkbox" ) {
			if ( this.element.is( ":checked" ) ) {
				this.buttonElement
					.addClass( "ui-state-active" )
					.attr( "aria-pressed", "true" );
			} else {
				this.buttonElement
					.removeClass( "ui-state-active" )
					.attr( "aria-pressed", "false" );
			}
		}
	},

	_resetButton: function() {
		if ( this.type === "input" ) {
			if ( this.options.label ) {
				this.element.val( this.options.label );
			}
			return;
		}
		var buttonElement = this.buttonElement.removeClass( typeClasses ),
			buttonText = $( "<span></span>", this.document[0] )
				.addClass( "ui-button-text" )
				.html( this.options.label )
				.appendTo( buttonElement.empty() )
				.text(),
			icons = this.options.icons,
			multipleIcons = icons.primary && icons.secondary,
			buttonClasses = [];

		if ( icons.primary || icons.secondary ) {
			if ( this.options.text ) {
				buttonClasses.push( "ui-button-text-icon" + ( multipleIcons ? "s" : ( icons.primary ? "-primary" : "-secondary" ) ) );
			}

			if ( icons.primary ) {
				buttonElement.prepend( "<span class='ui-button-icon-primary ui-icon " + icons.primary + "'></span>" );
			}

			if ( icons.secondary ) {
				buttonElement.append( "<span class='ui-button-icon-secondary ui-icon " + icons.secondary + "'></span>" );
			}

			if ( !this.options.text ) {
				buttonClasses.push( multipleIcons ? "ui-button-icons-only" : "ui-button-icon-only" );

				if ( !this.hasTitle ) {
					buttonElement.attr( "title", $.trim( buttonText ) );
				}
			}
		} else {
			buttonClasses.push( "ui-button-text-only" );
		}
		buttonElement.addClass( buttonClasses.join( " " ) );
	}
});

$.widget( "ui.buttonset", {
	version: "1.10.3",
	options: {
		items: "button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"
	},

	_create: function() {
		this.element.addClass( "ui-buttonset" );
	},

	_init: function() {
		this.refresh();
	},

	_setOption: function( key, value ) {
		if ( key === "disabled" ) {
			this.buttons.button( "option", key, value );
		}

		this._super( key, value );
	},

	refresh: function() {
		var rtl = this.element.css( "direction" ) === "rtl";

		this.buttons = this.element.find( this.options.items )
			.filter( ":ui-button" )
				.button( "refresh" )
			.end()
			.not( ":ui-button" )
				.button()
			.end()
			.map(function() {
				return $( this ).button( "widget" )[ 0 ];
			})
				.removeClass( "ui-corner-all ui-corner-left ui-corner-right" )
				.filter( ":first" )
					.addClass( rtl ? "ui-corner-right" : "ui-corner-left" )
				.end()
				.filter( ":last" )
					.addClass( rtl ? "ui-corner-left" : "ui-corner-right" )
				.end()
			.end();
	},

	_destroy: function() {
		this.element.removeClass( "ui-buttonset" );
		this.buttons
			.map(function() {
				return $( this ).button( "widget" )[ 0 ];
			})
				.removeClass( "ui-corner-left ui-corner-right" )
			.end()
			.button( "destroy" );
	}
});

}( jQuery ) );

(function( $, undefined ) {

$.extend($.ui, { datepicker: { version: "1.10.3" } });

var PROP_NAME = "datepicker",
	instActive;

/* Date picker manager.
   Use the singleton instance of this class, $.datepicker, to interact with the date picker.
   Settings for (groups of) date pickers are maintained in an instance object,
   allowing multiple different settings on the same page. */

function Datepicker() {
	this._curInst = null; // The current instance in use
	this._keyEvent = false; // If the last event was a key event
	this._disabledInputs = []; // List of date picker inputs that have been disabled
	this._datepickerShowing = false; // True if the popup picker is showing , false if not
	this._inDialog = false; // True if showing within a "dialog", false if not
	this._mainDivId = "ui-datepicker-div"; // The ID of the main datepicker division
	this._inlineClass = "ui-datepicker-inline"; // The name of the inline marker class
	this._appendClass = "ui-datepicker-append"; // The name of the append marker class
	this._triggerClass = "ui-datepicker-trigger"; // The name of the trigger marker class
	this._dialogClass = "ui-datepicker-dialog"; // The name of the dialog marker class
	this._disableClass = "ui-datepicker-disabled"; // The name of the disabled covering marker class
	this._unselectableClass = "ui-datepicker-unselectable"; // The name of the unselectable cell marker class
	this._currentClass = "ui-datepicker-current-day"; // The name of the current day marker class
	this._dayOverClass = "ui-datepicker-days-cell-over"; // The name of the day hover marker class
	this.regional = []; // Available regional settings, indexed by language code
	this.regional[""] = { // Default regional settings
		closeText: "Done", // Display text for close link
		prevText: "Prev", // Display text for previous month link
		nextText: "Next", // Display text for next month link
		currentText: "Today", // Display text for current month link
		monthNames: ["January","February","March","April","May","June",
			"July","August","September","October","November","December"], // Names of months for drop-down and formatting
		monthNamesShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], // For formatting
		dayNames: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], // For formatting
		dayNamesShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], // For formatting
		dayNamesMin: ["Su","Mo","Tu","We","Th","Fr","Sa"], // Column headings for days starting at Sunday
		weekHeader: "Wk", // Column header for week of the year
		dateFormat: "mm/dd/yy", // See format options on parseDate
		firstDay: 0, // The first day of the week, Sun = 0, Mon = 1, ...
		isRTL: false, // True if right-to-left language, false if left-to-right
		showMonthAfterYear: false, // True if the year select precedes month, false for month then year
		yearSuffix: "" // Additional text to append to the year in the month headers
	};
	this._defaults = { // Global defaults for all the date picker instances
		showOn: "focus", // "focus" for popup on focus,
			// "button" for trigger button, or "both" for either
		showAnim: "fadeIn", // Name of jQuery animation for popup
		showOptions: {}, // Options for enhanced animations
		defaultDate: null, // Used when field is blank: actual date,
			// +/-number for offset from today, null for today
		appendText: "", // Display text following the input box, e.g. showing the format
		buttonText: "...", // Text for trigger button
		buttonImage: "", // URL for trigger button image
		buttonImageOnly: false, // True if the image appears alone, false if it appears on a button
		hideIfNoPrevNext: false, // True to hide next/previous month links
			// if not applicable, false to just disable them
		navigationAsDateFormat: false, // True if date formatting applied to prev/today/next links
		gotoCurrent: false, // True if today link goes back to current selection instead
		changeMonth: false, // True if month can be selected directly, false if only prev/next
		changeYear: false, // True if year can be selected directly, false if only prev/next
		yearRange: "c-10:c+10", // Range of years to display in drop-down,
			// either relative to today's year (-nn:+nn), relative to currently displayed year
			// (c-nn:c+nn), absolute (nnnn:nnnn), or a combination of the above (nnnn:-n)
		showOtherMonths: false, // True to show dates in other months, false to leave blank
		selectOtherMonths: false, // True to allow selection of dates in other months, false for unselectable
		showWeek: false, // True to show week of the year, false to not show it
		calculateWeek: this.iso8601Week, // How to calculate the week of the year,
			// takes a Date and returns the number of the week for it
		shortYearCutoff: "+10", // Short year values < this are in the current century,
			// > this are in the previous century,
			// string value starting with "+" for current year + value
		minDate: null, // The earliest selectable date, or null for no limit
		maxDate: null, // The latest selectable date, or null for no limit
		duration: "fast", // Duration of display/closure
		beforeShowDay: null, // Function that takes a date and returns an array with
			// [0] = true if selectable, false if not, [1] = custom CSS class name(s) or "",
			// [2] = cell title (optional), e.g. $.datepicker.noWeekends
		beforeShow: null, // Function that takes an input field and
			// returns a set of custom settings for the date picker
		onSelect: null, // Define a callback function when a date is selected
		onChangeMonthYear: null, // Define a callback function when the month or year is changed
		onClose: null, // Define a callback function when the datepicker is closed
		numberOfMonths: 1, // Number of months to show at a time
		showCurrentAtPos: 0, // The position in multipe months at which to show the current month (starting at 0)
		stepMonths: 1, // Number of months to step back/forward
		stepBigMonths: 12, // Number of months to step back/forward for the big links
		altField: "", // Selector for an alternate field to store selected dates into
		altFormat: "", // The date format to use for the alternate field
		constrainInput: true, // The input is constrained by the current date format
		showButtonPanel: false, // True to show button panel, false to not show it
		autoSize: false, // True to size the input for the date format, false to leave as is
		disabled: false // The initial disabled state
	};
	$.extend(this._defaults, this.regional[""]);
	this.dpDiv = bindHover($("<div id='" + this._mainDivId + "' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"));
}

$.extend(Datepicker.prototype, {
	/* Class name added to elements to indicate already configured with a date picker. */
	markerClassName: "hasDatepicker",

	//Keep track of the maximum number of rows displayed (see #7043)
	maxRows: 4,

	// TODO rename to "widget" when switching to widget factory
	_widgetDatepicker: function() {
		return this.dpDiv;
	},

	/* Override the default settings for all instances of the date picker.
	 * @param  settings  object - the new settings to use as defaults (anonymous object)
	 * @return the manager object
	 */
	setDefaults: function(settings) {
		extendRemove(this._defaults, settings || {});
		return this;
	},

	/* Attach the date picker to a jQuery selection.
	 * @param  target	element - the target input field or division or span
	 * @param  settings  object - the new settings to use for this date picker instance (anonymous)
	 */
	_attachDatepicker: function(target, settings) {
		var nodeName, inline, inst;
		nodeName = target.nodeName.toLowerCase();
		inline = (nodeName === "div" || nodeName === "span");
		if (!target.id) {
			this.uuid += 1;
			target.id = "dp" + this.uuid;
		}
		inst = this._newInst($(target), inline);
		inst.settings = $.extend({}, settings || {});
		if (nodeName === "input") {
			this._connectDatepicker(target, inst);
		} else if (inline) {
			this._inlineDatepicker(target, inst);
		}
	},

	/* Create a new instance object. */
	_newInst: function(target, inline) {
		var id = target[0].id.replace(/([^A-Za-z0-9_\-])/g, "\\\\$1"); // escape jQuery meta chars
		return {id: id, input: target, // associated target
			selectedDay: 0, selectedMonth: 0, selectedYear: 0, // current selection
			drawMonth: 0, drawYear: 0, // month being drawn
			inline: inline, // is datepicker inline or not
			dpDiv: (!inline ? this.dpDiv : // presentation div
			bindHover($("<div class='" + this._inlineClass + " ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")))};
	},

	/* Attach the date picker to an input field. */
	_connectDatepicker: function(target, inst) {
		var input = $(target);
		inst.append = $([]);
		inst.trigger = $([]);
		if (input.hasClass(this.markerClassName)) {
			return;
		}
		this._attachments(input, inst);
		input.addClass(this.markerClassName).keydown(this._doKeyDown).
			keypress(this._doKeyPress).keyup(this._doKeyUp);
		this._autoSize(inst);
		$.data(target, PROP_NAME, inst);
		//If disabled option is true, disable the datepicker once it has been attached to the input (see ticket #5665)
		if( inst.settings.disabled ) {
			this._disableDatepicker( target );
		}
	},

	/* Make attachments based on settings. */
	_attachments: function(input, inst) {
		var showOn, buttonText, buttonImage,
			appendText = this._get(inst, "appendText"),
			isRTL = this._get(inst, "isRTL");

		if (inst.append) {
			inst.append.remove();
		}
		if (appendText) {
			inst.append = $("<span class='" + this._appendClass + "'>" + appendText + "</span>");
			input[isRTL ? "before" : "after"](inst.append);
		}

		input.unbind("focus", this._showDatepicker);

		if (inst.trigger) {
			inst.trigger.remove();
		}

		showOn = this._get(inst, "showOn");
		if (showOn === "focus" || showOn === "both") { // pop-up date picker when in the marked field
			input.focus(this._showDatepicker);
		}
		if (showOn === "button" || showOn === "both") { // pop-up date picker when button clicked
			buttonText = this._get(inst, "buttonText");
			buttonImage = this._get(inst, "buttonImage");
			inst.trigger = $(this._get(inst, "buttonImageOnly") ?
				$("<img/>").addClass(this._triggerClass).
					attr({ src: buttonImage, alt: buttonText, title: buttonText }) :
				$("<button type='button'></button>").addClass(this._triggerClass).
					html(!buttonImage ? buttonText : $("<img/>").attr(
					{ src:buttonImage, alt:buttonText, title:buttonText })));
			input[isRTL ? "before" : "after"](inst.trigger);
			inst.trigger.click(function() {
				if ($.datepicker._datepickerShowing && $.datepicker._lastInput === input[0]) {
					$.datepicker._hideDatepicker();
				} else if ($.datepicker._datepickerShowing && $.datepicker._lastInput !== input[0]) {
					$.datepicker._hideDatepicker();
					$.datepicker._showDatepicker(input[0]);
				} else {
					$.datepicker._showDatepicker(input[0]);
				}
				return false;
			});
		}
	},

	/* Apply the maximum length for the date format. */
	_autoSize: function(inst) {
		if (this._get(inst, "autoSize") && !inst.inline) {
			var findMax, max, maxI, i,
				date = new Date(2009, 12 - 1, 20), // Ensure double digits
				dateFormat = this._get(inst, "dateFormat");

			if (dateFormat.match(/[DM]/)) {
				findMax = function(names) {
					max = 0;
					maxI = 0;
					for (i = 0; i < names.length; i++) {
						if (names[i].length > max) {
							max = names[i].length;
							maxI = i;
						}
					}
					return maxI;
				};
				date.setMonth(findMax(this._get(inst, (dateFormat.match(/MM/) ?
					"monthNames" : "monthNamesShort"))));
				date.setDate(findMax(this._get(inst, (dateFormat.match(/DD/) ?
					"dayNames" : "dayNamesShort"))) + 20 - date.getDay());
			}
			inst.input.attr("size", this._formatDate(inst, date).length);
		}
	},

	/* Attach an inline date picker to a div. */
	_inlineDatepicker: function(target, inst) {
		var divSpan = $(target);
		if (divSpan.hasClass(this.markerClassName)) {
			return;
		}
		divSpan.addClass(this.markerClassName).append(inst.dpDiv);
		$.data(target, PROP_NAME, inst);
		this._setDate(inst, this._getDefaultDate(inst), true);
		this._updateDatepicker(inst);
		this._updateAlternate(inst);
		//If disabled option is true, disable the datepicker before showing it (see ticket #5665)
		if( inst.settings.disabled ) {
			this._disableDatepicker( target );
		}
		// Set display:block in place of inst.dpDiv.show() which won't work on disconnected elements
		// http://bugs.jqueryui.com/ticket/7552 - A Datepicker created on a detached div has zero height
		inst.dpDiv.css( "display", "block" );
	},

	/* Pop-up the date picker in a "dialog" box.
	 * @param  input element - ignored
	 * @param  date	string or Date - the initial date to display
	 * @param  onSelect  function - the function to call when a date is selected
	 * @param  settings  object - update the dialog date picker instance's settings (anonymous object)
	 * @param  pos int[2] - coordinates for the dialog's position within the screen or
	 *					event - with x/y coordinates or
	 *					leave empty for default (screen centre)
	 * @return the manager object
	 */
	_dialogDatepicker: function(input, date, onSelect, settings, pos) {
		var id, browserWidth, browserHeight, scrollX, scrollY,
			inst = this._dialogInst; // internal instance

		if (!inst) {
			this.uuid += 1;
			id = "dp" + this.uuid;
			this._dialogInput = $("<input type='text' id='" + id +
				"' style='position: absolute; top: -100px; width: 0px;'/>");
			this._dialogInput.keydown(this._doKeyDown);
			$("body").append(this._dialogInput);
			inst = this._dialogInst = this._newInst(this._dialogInput, false);
			inst.settings = {};
			$.data(this._dialogInput[0], PROP_NAME, inst);
		}
		extendRemove(inst.settings, settings || {});
		date = (date && date.constructor === Date ? this._formatDate(inst, date) : date);
		this._dialogInput.val(date);

		this._pos = (pos ? (pos.length ? pos : [pos.pageX, pos.pageY]) : null);
		if (!this._pos) {
			browserWidth = document.documentElement.clientWidth;
			browserHeight = document.documentElement.clientHeight;
			scrollX = document.documentElement.scrollLeft || document.body.scrollLeft;
			scrollY = document.documentElement.scrollTop || document.body.scrollTop;
			this._pos = // should use actual width/height below
				[(browserWidth / 2) - 100 + scrollX, (browserHeight / 2) - 150 + scrollY];
		}

		// move input on screen for focus, but hidden behind dialog
		this._dialogInput.css("left", (this._pos[0] + 20) + "px").css("top", this._pos[1] + "px");
		inst.settings.onSelect = onSelect;
		this._inDialog = true;
		this.dpDiv.addClass(this._dialogClass);
		this._showDatepicker(this._dialogInput[0]);
		if ($.blockUI) {
			$.blockUI(this.dpDiv);
		}
		$.data(this._dialogInput[0], PROP_NAME, inst);
		return this;
	},

	/* Detach a datepicker from its control.
	 * @param  target	element - the target input field or division or span
	 */
	_destroyDatepicker: function(target) {
		var nodeName,
			$target = $(target),
			inst = $.data(target, PROP_NAME);

		if (!$target.hasClass(this.markerClassName)) {
			return;
		}

		nodeName = target.nodeName.toLowerCase();
		$.removeData(target, PROP_NAME);
		if (nodeName === "input") {
			inst.append.remove();
			inst.trigger.remove();
			$target.removeClass(this.markerClassName).
				unbind("focus", this._showDatepicker).
				unbind("keydown", this._doKeyDown).
				unbind("keypress", this._doKeyPress).
				unbind("keyup", this._doKeyUp);
		} else if (nodeName === "div" || nodeName === "span") {
			$target.removeClass(this.markerClassName).empty();
		}
	},

	/* Enable the date picker to a jQuery selection.
	 * @param  target	element - the target input field or division or span
	 */
	_enableDatepicker: function(target) {
		var nodeName, inline,
			$target = $(target),
			inst = $.data(target, PROP_NAME);

		if (!$target.hasClass(this.markerClassName)) {
			return;
		}

		nodeName = target.nodeName.toLowerCase();
		if (nodeName === "input") {
			target.disabled = false;
			inst.trigger.filter("button").
				each(function() { this.disabled = false; }).end().
				filter("img").css({opacity: "1.0", cursor: ""});
		} else if (nodeName === "div" || nodeName === "span") {
			inline = $target.children("." + this._inlineClass);
			inline.children().removeClass("ui-state-disabled");
			inline.find("select.ui-datepicker-month, select.ui-datepicker-year").
				prop("disabled", false);
		}
		this._disabledInputs = $.map(this._disabledInputs,
			function(value) { return (value === target ? null : value); }); // delete entry
	},

	/* Disable the date picker to a jQuery selection.
	 * @param  target	element - the target input field or division or span
	 */
	_disableDatepicker: function(target) {
		var nodeName, inline,
			$target = $(target),
			inst = $.data(target, PROP_NAME);

		if (!$target.hasClass(this.markerClassName)) {
			return;
		}

		nodeName = target.nodeName.toLowerCase();
		if (nodeName === "input") {
			target.disabled = true;
			inst.trigger.filter("button").
				each(function() { this.disabled = true; }).end().
				filter("img").css({opacity: "0.5", cursor: "default"});
		} else if (nodeName === "div" || nodeName === "span") {
			inline = $target.children("." + this._inlineClass);
			inline.children().addClass("ui-state-disabled");
			inline.find("select.ui-datepicker-month, select.ui-datepicker-year").
				prop("disabled", true);
		}
		this._disabledInputs = $.map(this._disabledInputs,
			function(value) { return (value === target ? null : value); }); // delete entry
		this._disabledInputs[this._disabledInputs.length] = target;
	},

	/* Is the first field in a jQuery collection disabled as a datepicker?
	 * @param  target	element - the target input field or division or span
	 * @return boolean - true if disabled, false if enabled
	 */
	_isDisabledDatepicker: function(target) {
		if (!target) {
			return false;
		}
		for (var i = 0; i < this._disabledInputs.length; i++) {
			if (this._disabledInputs[i] === target) {
				return true;
			}
		}
		return false;
	},

	/* Retrieve the instance data for the target control.
	 * @param  target  element - the target input field or division or span
	 * @return  object - the associated instance data
	 * @throws  error if a jQuery problem getting data
	 */
	_getInst: function(target) {
		try {
			return $.data(target, PROP_NAME);
		}
		catch (err) {
			throw "Missing instance data for this datepicker";
		}
	},

	/* Update or retrieve the settings for a date picker attached to an input field or division.
	 * @param  target  element - the target input field or division or span
	 * @param  name	object - the new settings to update or
	 *				string - the name of the setting to change or retrieve,
	 *				when retrieving also "all" for all instance settings or
	 *				"defaults" for all global defaults
	 * @param  value   any - the new value for the setting
	 *				(omit if above is an object or to retrieve a value)
	 */
	_optionDatepicker: function(target, name, value) {
		var settings, date, minDate, maxDate,
			inst = this._getInst(target);

		if (arguments.length === 2 && typeof name === "string") {
			return (name === "defaults" ? $.extend({}, $.datepicker._defaults) :
				(inst ? (name === "all" ? $.extend({}, inst.settings) :
				this._get(inst, name)) : null));
		}

		settings = name || {};
		if (typeof name === "string") {
			settings = {};
			settings[name] = value;
		}

		if (inst) {
			if (this._curInst === inst) {
				this._hideDatepicker();
			}

			date = this._getDateDatepicker(target, true);
			minDate = this._getMinMaxDate(inst, "min");
			maxDate = this._getMinMaxDate(inst, "max");
			extendRemove(inst.settings, settings);
			// reformat the old minDate/maxDate values if dateFormat changes and a new minDate/maxDate isn't provided
			if (minDate !== null && settings.dateFormat !== undefined && settings.minDate === undefined) {
				inst.settings.minDate = this._formatDate(inst, minDate);
			}
			if (maxDate !== null && settings.dateFormat !== undefined && settings.maxDate === undefined) {
				inst.settings.maxDate = this._formatDate(inst, maxDate);
			}
			if ( "disabled" in settings ) {
				if ( settings.disabled ) {
					this._disableDatepicker(target);
				} else {
					this._enableDatepicker(target);
				}
			}
			this._attachments($(target), inst);
			this._autoSize(inst);
			this._setDate(inst, date);
			this._updateAlternate(inst);
			this._updateDatepicker(inst);
		}
	},

	// change method deprecated
	_changeDatepicker: function(target, name, value) {
		this._optionDatepicker(target, name, value);
	},

	/* Redraw the date picker attached to an input field or division.
	 * @param  target  element - the target input field or division or span
	 */
	_refreshDatepicker: function(target) {
		var inst = this._getInst(target);
		if (inst) {
			this._updateDatepicker(inst);
		}
	},

	/* Set the dates for a jQuery selection.
	 * @param  target element - the target input field or division or span
	 * @param  date	Date - the new date
	 */
	_setDateDatepicker: function(target, date) {
		var inst = this._getInst(target);
		if (inst) {
			this._setDate(inst, date);
			this._updateDatepicker(inst);
			this._updateAlternate(inst);
		}
	},

	/* Get the date(s) for the first entry in a jQuery selection.
	 * @param  target element - the target input field or division or span
	 * @param  noDefault boolean - true if no default date is to be used
	 * @return Date - the current date
	 */
	_getDateDatepicker: function(target, noDefault) {
		var inst = this._getInst(target);
		if (inst && !inst.inline) {
			this._setDateFromField(inst, noDefault);
		}
		return (inst ? this._getDate(inst) : null);
	},

	/* Handle keystrokes. */
	_doKeyDown: function(event) {
		var onSelect, dateStr, sel,
			inst = $.datepicker._getInst(event.target),
			handled = true,
			isRTL = inst.dpDiv.is(".ui-datepicker-rtl");

		inst._keyEvent = true;
		if ($.datepicker._datepickerShowing) {
			switch (event.keyCode) {
				case 9: $.datepicker._hideDatepicker();
						handled = false;
						break; // hide on tab out
				case 13: sel = $("td." + $.datepicker._dayOverClass + ":not(." +
									$.datepicker._currentClass + ")", inst.dpDiv);
						if (sel[0]) {
							$.datepicker._selectDay(event.target, inst.selectedMonth, inst.selectedYear, sel[0]);
						}

						onSelect = $.datepicker._get(inst, "onSelect");
						if (onSelect) {
							dateStr = $.datepicker._formatDate(inst);

							// trigger custom callback
							onSelect.apply((inst.input ? inst.input[0] : null), [dateStr, inst]);
						} else {
							$.datepicker._hideDatepicker();
						}

						return false; // don't submit the form
				case 27: $.datepicker._hideDatepicker();
						break; // hide on escape
				case 33: $.datepicker._adjustDate(event.target, (event.ctrlKey ?
							-$.datepicker._get(inst, "stepBigMonths") :
							-$.datepicker._get(inst, "stepMonths")), "M");
						break; // previous month/year on page up/+ ctrl
				case 34: $.datepicker._adjustDate(event.target, (event.ctrlKey ?
							+$.datepicker._get(inst, "stepBigMonths") :
							+$.datepicker._get(inst, "stepMonths")), "M");
						break; // next month/year on page down/+ ctrl
				case 35: if (event.ctrlKey || event.metaKey) {
							$.datepicker._clearDate(event.target);
						}
						handled = event.ctrlKey || event.metaKey;
						break; // clear on ctrl or command +end
				case 36: if (event.ctrlKey || event.metaKey) {
							$.datepicker._gotoToday(event.target);
						}
						handled = event.ctrlKey || event.metaKey;
						break; // current on ctrl or command +home
				case 37: if (event.ctrlKey || event.metaKey) {
							$.datepicker._adjustDate(event.target, (isRTL ? +1 : -1), "D");
						}
						handled = event.ctrlKey || event.metaKey;
						// -1 day on ctrl or command +left
						if (event.originalEvent.altKey) {
							$.datepicker._adjustDate(event.target, (event.ctrlKey ?
								-$.datepicker._get(inst, "stepBigMonths") :
								-$.datepicker._get(inst, "stepMonths")), "M");
						}
						// next month/year on alt +left on Mac
						break;
				case 38: if (event.ctrlKey || event.metaKey) {
							$.datepicker._adjustDate(event.target, -7, "D");
						}
						handled = event.ctrlKey || event.metaKey;
						break; // -1 week on ctrl or command +up
				case 39: if (event.ctrlKey || event.metaKey) {
							$.datepicker._adjustDate(event.target, (isRTL ? -1 : +1), "D");
						}
						handled = event.ctrlKey || event.metaKey;
						// +1 day on ctrl or command +right
						if (event.originalEvent.altKey) {
							$.datepicker._adjustDate(event.target, (event.ctrlKey ?
								+$.datepicker._get(inst, "stepBigMonths") :
								+$.datepicker._get(inst, "stepMonths")), "M");
						}
						// next month/year on alt +right
						break;
				case 40: if (event.ctrlKey || event.metaKey) {
							$.datepicker._adjustDate(event.target, +7, "D");
						}
						handled = event.ctrlKey || event.metaKey;
						break; // +1 week on ctrl or command +down
				default: handled = false;
			}
		} else if (event.keyCode === 36 && event.ctrlKey) { // display the date picker on ctrl+home
			$.datepicker._showDatepicker(this);
		} else {
			handled = false;
		}

		if (handled) {
			event.preventDefault();
			event.stopPropagation();
		}
	},

	/* Filter entered characters - based on date format. */
	_doKeyPress: function(event) {
		var chars, chr,
			inst = $.datepicker._getInst(event.target);

		if ($.datepicker._get(inst, "constrainInput")) {
			chars = $.datepicker._possibleChars($.datepicker._get(inst, "dateFormat"));
			chr = String.fromCharCode(event.charCode == null ? event.keyCode : event.charCode);
			return event.ctrlKey || event.metaKey || (chr < " " || !chars || chars.indexOf(chr) > -1);
		}
	},

	/* Synchronise manual entry and field/alternate field. */
	_doKeyUp: function(event) {
		var date,
			inst = $.datepicker._getInst(event.target);

		if (inst.input.val() !== inst.lastVal) {
			try {
				date = $.datepicker.parseDate($.datepicker._get(inst, "dateFormat"),
					(inst.input ? inst.input.val() : null),
					$.datepicker._getFormatConfig(inst));

				if (date) { // only if valid
					$.datepicker._setDateFromField(inst);
					$.datepicker._updateAlternate(inst);
					$.datepicker._updateDatepicker(inst);
				}
			}
			catch (err) {
			}
		}
		return true;
	},

	/* Pop-up the date picker for a given input field.
	 * If false returned from beforeShow event handler do not show.
	 * @param  input  element - the input field attached to the date picker or
	 *					event - if triggered by focus
	 */
	_showDatepicker: function(input) {
		input = input.target || input;
		if (input.nodeName.toLowerCase() !== "input") { // find from button/image trigger
			input = $("input", input.parentNode)[0];
		}

		if ($.datepicker._isDisabledDatepicker(input) || $.datepicker._lastInput === input) { // already here
			return;
		}

		var inst, beforeShow, beforeShowSettings, isFixed,
			offset, showAnim, duration;

		inst = $.datepicker._getInst(input);
		if ($.datepicker._curInst && $.datepicker._curInst !== inst) {
			$.datepicker._curInst.dpDiv.stop(true, true);
			if ( inst && $.datepicker._datepickerShowing ) {
				$.datepicker._hideDatepicker( $.datepicker._curInst.input[0] );
			}
		}

		beforeShow = $.datepicker._get(inst, "beforeShow");
		beforeShowSettings = beforeShow ? beforeShow.apply(input, [input, inst]) : {};
		if(beforeShowSettings === false){
			return;
		}
		extendRemove(inst.settings, beforeShowSettings);

		inst.lastVal = null;
		$.datepicker._lastInput = input;
		$.datepicker._setDateFromField(inst);

		if ($.datepicker._inDialog) { // hide cursor
			input.value = "";
		}
		if (!$.datepicker._pos) { // position below input
			$.datepicker._pos = $.datepicker._findPos(input);
			$.datepicker._pos[1] += input.offsetHeight; // add the height
		}

		isFixed = false;
		$(input).parents().each(function() {
			isFixed |= $(this).css("position") === "fixed";
			return !isFixed;
		});

		offset = {left: $.datepicker._pos[0], top: $.datepicker._pos[1]};
		$.datepicker._pos = null;
		//to avoid flashes on Firefox
		inst.dpDiv.empty();
		// determine sizing offscreen
		inst.dpDiv.css({position: "absolute", display: "block", top: "-1000px"});
		$.datepicker._updateDatepicker(inst);
		// fix width for dynamic number of date pickers
		// and adjust position before showing
		offset = $.datepicker._checkOffset(inst, offset, isFixed);
		inst.dpDiv.css({position: ($.datepicker._inDialog && $.blockUI ?
			"static" : (isFixed ? "fixed" : "absolute")), display: "none",
			left: offset.left + "px", top: offset.top + "px"});

		if (!inst.inline) {
			showAnim = $.datepicker._get(inst, "showAnim");
			duration = $.datepicker._get(inst, "duration");
			inst.dpDiv.zIndex($(input).zIndex()+1);
			$.datepicker._datepickerShowing = true;

			if ( $.effects && $.effects.effect[ showAnim ] ) {
				inst.dpDiv.show(showAnim, $.datepicker._get(inst, "showOptions"), duration);
			} else {
				inst.dpDiv[showAnim || "show"](showAnim ? duration : null);
			}

			if ( $.datepicker._shouldFocusInput( inst ) ) {
				inst.input.focus();
			}

			$.datepicker._curInst = inst;
		}
	},

	/* Generate the date picker content. */
	_updateDatepicker: function(inst) {
		this.maxRows = 4; //Reset the max number of rows being displayed (see #7043)
		instActive = inst; // for delegate hover events
		inst.dpDiv.empty().append(this._generateHTML(inst));
		this._attachHandlers(inst);
		inst.dpDiv.find("." + this._dayOverClass + " a").mouseover();

		var origyearshtml,
			numMonths = this._getNumberOfMonths(inst),
			cols = numMonths[1],
			width = 17;

		inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");
		if (cols > 1) {
			inst.dpDiv.addClass("ui-datepicker-multi-" + cols).css("width", (width * cols) + "em");
		}
		inst.dpDiv[(numMonths[0] !== 1 || numMonths[1] !== 1 ? "add" : "remove") +
			"Class"]("ui-datepicker-multi");
		inst.dpDiv[(this._get(inst, "isRTL") ? "add" : "remove") +
			"Class"]("ui-datepicker-rtl");

		if (inst === $.datepicker._curInst && $.datepicker._datepickerShowing && $.datepicker._shouldFocusInput( inst ) ) {
			inst.input.focus();
		}

		// deffered render of the years select (to avoid flashes on Firefox)
		if( inst.yearshtml ){
			origyearshtml = inst.yearshtml;
			setTimeout(function(){
				//assure that inst.yearshtml didn't change.
				if( origyearshtml === inst.yearshtml && inst.yearshtml ){
					inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml);
				}
				origyearshtml = inst.yearshtml = null;
			}, 0);
		}
	},

	// #6694 - don't focus the input if it's already focused
	// this breaks the change event in IE
	// Support: IE and jQuery <1.9
	_shouldFocusInput: function( inst ) {
		return inst.input && inst.input.is( ":visible" ) && !inst.input.is( ":disabled" ) && !inst.input.is( ":focus" );
	},

	/* Check positioning to remain on screen. */
	_checkOffset: function(inst, offset, isFixed) {
		var dpWidth = inst.dpDiv.outerWidth(),
			dpHeight = inst.dpDiv.outerHeight(),
			inputWidth = inst.input ? inst.input.outerWidth() : 0,
			inputHeight = inst.input ? inst.input.outerHeight() : 0,
			viewWidth = document.documentElement.clientWidth + (isFixed ? 0 : $(document).scrollLeft()),
			viewHeight = document.documentElement.clientHeight + (isFixed ? 0 : $(document).scrollTop());

		offset.left -= (this._get(inst, "isRTL") ? (dpWidth - inputWidth) : 0);
		offset.left -= (isFixed && offset.left === inst.input.offset().left) ? $(document).scrollLeft() : 0;
		offset.top -= (isFixed && offset.top === (inst.input.offset().top + inputHeight)) ? $(document).scrollTop() : 0;

		// now check if datepicker is showing outside window viewport - move to a better place if so.
		offset.left -= Math.min(offset.left, (offset.left + dpWidth > viewWidth && viewWidth > dpWidth) ?
			Math.abs(offset.left + dpWidth - viewWidth) : 0);
		offset.top -= Math.min(offset.top, (offset.top + dpHeight > viewHeight && viewHeight > dpHeight) ?
			Math.abs(dpHeight + inputHeight) : 0);

		return offset;
	},

	/* Find an object's position on the screen. */
	_findPos: function(obj) {
		var position,
			inst = this._getInst(obj),
			isRTL = this._get(inst, "isRTL");

		while (obj && (obj.type === "hidden" || obj.nodeType !== 1 || $.expr.filters.hidden(obj))) {
			obj = obj[isRTL ? "previousSibling" : "nextSibling"];
		}

		position = $(obj).offset();
		return [position.left, position.top];
	},

	/* Hide the date picker from view.
	 * @param  input  element - the input field attached to the date picker
	 */
	_hideDatepicker: function(input) {
		var showAnim, duration, postProcess, onClose,
			inst = this._curInst;

		if (!inst || (input && inst !== $.data(input, PROP_NAME))) {
			return;
		}

		if (this._datepickerShowing) {
			showAnim = this._get(inst, "showAnim");
			duration = this._get(inst, "duration");
			postProcess = function() {
				$.datepicker._tidyDialog(inst);
			};

			// DEPRECATED: after BC for 1.8.x $.effects[ showAnim ] is not needed
			if ( $.effects && ( $.effects.effect[ showAnim ] || $.effects[ showAnim ] ) ) {
				inst.dpDiv.hide(showAnim, $.datepicker._get(inst, "showOptions"), duration, postProcess);
			} else {
				inst.dpDiv[(showAnim === "slideDown" ? "slideUp" :
					(showAnim === "fadeIn" ? "fadeOut" : "hide"))]((showAnim ? duration : null), postProcess);
			}

			if (!showAnim) {
				postProcess();
			}
			this._datepickerShowing = false;

			onClose = this._get(inst, "onClose");
			if (onClose) {
				onClose.apply((inst.input ? inst.input[0] : null), [(inst.input ? inst.input.val() : ""), inst]);
			}

			this._lastInput = null;
			if (this._inDialog) {
				this._dialogInput.css({ position: "absolute", left: "0", top: "-100px" });
				if ($.blockUI) {
					$.unblockUI();
					$("body").append(this.dpDiv);
				}
			}
			this._inDialog = false;
		}
	},

	/* Tidy up after a dialog display. */
	_tidyDialog: function(inst) {
		inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar");
	},

	/* Close date picker if clicked elsewhere. */
	_checkExternalClick: function(event) {
		if (!$.datepicker._curInst) {
			return;
		}

		var $target = $(event.target),
			inst = $.datepicker._getInst($target[0]);

		if ( ( ( $target[0].id !== $.datepicker._mainDivId &&
				$target.parents("#" + $.datepicker._mainDivId).length === 0 &&
				!$target.hasClass($.datepicker.markerClassName) &&
				!$target.closest("." + $.datepicker._triggerClass).length &&
				$.datepicker._datepickerShowing && !($.datepicker._inDialog && $.blockUI) ) ) ||
			( $target.hasClass($.datepicker.markerClassName) && $.datepicker._curInst !== inst ) ) {
				$.datepicker._hideDatepicker();
		}
	},

	/* Adjust one of the date sub-fields. */
	_adjustDate: function(id, offset, period) {
		var target = $(id),
			inst = this._getInst(target[0]);

		if (this._isDisabledDatepicker(target[0])) {
			return;
		}
		this._adjustInstDate(inst, offset +
			(period === "M" ? this._get(inst, "showCurrentAtPos") : 0), // undo positioning
			period);
		this._updateDatepicker(inst);
	},

	/* Action for current link. */
	_gotoToday: function(id) {
		var date,
			target = $(id),
			inst = this._getInst(target[0]);

		if (this._get(inst, "gotoCurrent") && inst.currentDay) {
			inst.selectedDay = inst.currentDay;
			inst.drawMonth = inst.selectedMonth = inst.currentMonth;
			inst.drawYear = inst.selectedYear = inst.currentYear;
		} else {
			date = new Date();
			inst.selectedDay = date.getDate();
			inst.drawMonth = inst.selectedMonth = date.getMonth();
			inst.drawYear = inst.selectedYear = date.getFullYear();
		}
		this._notifyChange(inst);
		this._adjustDate(target);
	},

	/* Action for selecting a new month/year. */
	_selectMonthYear: function(id, select, period) {
		var target = $(id),
			inst = this._getInst(target[0]);

		inst["selected" + (period === "M" ? "Month" : "Year")] =
		inst["draw" + (period === "M" ? "Month" : "Year")] =
			parseInt(select.options[select.selectedIndex].value,10);

		this._notifyChange(inst);
		this._adjustDate(target);
	},

	/* Action for selecting a day. */
	_selectDay: function(id, month, year, td) {
		var inst,
			target = $(id);

		if ($(td).hasClass(this._unselectableClass) || this._isDisabledDatepicker(target[0])) {
			return;
		}

		inst = this._getInst(target[0]);
		inst.selectedDay = inst.currentDay = $("a", td).html();
		inst.selectedMonth = inst.currentMonth = month;
		inst.selectedYear = inst.currentYear = year;
		this._selectDate(id, this._formatDate(inst,
			inst.currentDay, inst.currentMonth, inst.currentYear));
	},

	/* Erase the input field and hide the date picker. */
	_clearDate: function(id) {
		var target = $(id);
		this._selectDate(target, "");
	},

	/* Update the input field with the selected date. */
	_selectDate: function(id, dateStr) {
		var onSelect,
			target = $(id),
			inst = this._getInst(target[0]);

		dateStr = (dateStr != null ? dateStr : this._formatDate(inst));
		if (inst.input) {
			inst.input.val(dateStr);
		}
		this._updateAlternate(inst);

		onSelect = this._get(inst, "onSelect");
		if (onSelect) {
			onSelect.apply((inst.input ? inst.input[0] : null), [dateStr, inst]);  // trigger custom callback
		} else if (inst.input) {
			inst.input.trigger("change"); // fire the change event
		}

		if (inst.inline){
			this._updateDatepicker(inst);
		} else {
			this._hideDatepicker();
			this._lastInput = inst.input[0];
			if (typeof(inst.input[0]) !== "object") {
				inst.input.focus(); // restore focus
			}
			this._lastInput = null;
		}
	},

	/* Update any alternate field to synchronise with the main field. */
	_updateAlternate: function(inst) {
		var altFormat, date, dateStr,
			altField = this._get(inst, "altField");

		if (altField) { // update alternate field too
			altFormat = this._get(inst, "altFormat") || this._get(inst, "dateFormat");
			date = this._getDate(inst);
			dateStr = this.formatDate(altFormat, date, this._getFormatConfig(inst));
			$(altField).each(function() { $(this).val(dateStr); });
		}
	},

	/* Set as beforeShowDay function to prevent selection of weekends.
	 * @param  date  Date - the date to customise
	 * @return [boolean, string] - is this date selectable?, what is its CSS class?
	 */
	noWeekends: function(date) {
		var day = date.getDay();
		return [(day > 0 && day < 6), ""];
	},

	/* Set as calculateWeek to determine the week of the year based on the ISO 8601 definition.
	 * @param  date  Date - the date to get the week for
	 * @return  number - the number of the week within the year that contains this date
	 */
	iso8601Week: function(date) {
		var time,
			checkDate = new Date(date.getTime());

		// Find Thursday of this week starting on Monday
		checkDate.setDate(checkDate.getDate() + 4 - (checkDate.getDay() || 7));

		time = checkDate.getTime();
		checkDate.setMonth(0); // Compare with Jan 1
		checkDate.setDate(1);
		return Math.floor(Math.round((time - checkDate) / 86400000) / 7) + 1;
	},

	/* Parse a string value into a date object.
	 * See formatDate below for the possible formats.
	 *
	 * @param  format string - the expected format of the date
	 * @param  value string - the date in the above format
	 * @param  settings Object - attributes include:
	 *					shortYearCutoff  number - the cutoff year for determining the century (optional)
	 *					dayNamesShort	string[7] - abbreviated names of the days from Sunday (optional)
	 *					dayNames		string[7] - names of the days from Sunday (optional)
	 *					monthNamesShort string[12] - abbreviated names of the months (optional)
	 *					monthNames		string[12] - names of the months (optional)
	 * @return  Date - the extracted date value or null if value is blank
	 */
	parseDate: function (format, value, settings) {
		if (format == null || value == null) {
			throw "Invalid arguments";
		}

		value = (typeof value === "object" ? value.toString() : value + "");
		if (value === "") {
			return null;
		}

		var iFormat, dim, extra,
			iValue = 0,
			shortYearCutoffTemp = (settings ? settings.shortYearCutoff : null) || this._defaults.shortYearCutoff,
			shortYearCutoff = (typeof shortYearCutoffTemp !== "string" ? shortYearCutoffTemp :
				new Date().getFullYear() % 100 + parseInt(shortYearCutoffTemp, 10)),
			dayNamesShort = (settings ? settings.dayNamesShort : null) || this._defaults.dayNamesShort,
			dayNames = (settings ? settings.dayNames : null) || this._defaults.dayNames,
			monthNamesShort = (settings ? settings.monthNamesShort : null) || this._defaults.monthNamesShort,
			monthNames = (settings ? settings.monthNames : null) || this._defaults.monthNames,
			year = -1,
			month = -1,
			day = -1,
			doy = -1,
			literal = false,
			date,
			// Check whether a format character is doubled
			lookAhead = function(match) {
				var matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);
				if (matches) {
					iFormat++;
				}
				return matches;
			},
			// Extract a number from the string value
			getNumber = function(match) {
				var isDoubled = lookAhead(match),
					size = (match === "@" ? 14 : (match === "!" ? 20 :
					(match === "y" && isDoubled ? 4 : (match === "o" ? 3 : 2)))),
					digits = new RegExp("^\\d{1," + size + "}"),
					num = value.substring(iValue).match(digits);
				if (!num) {
					throw "Missing number at position " + iValue;
				}
				iValue += num[0].length;
				return parseInt(num[0], 10);
			},
			// Extract a name from the string value and convert to an index
			getName = function(match, shortNames, longNames) {
				var index = -1,
					names = $.map(lookAhead(match) ? longNames : shortNames, function (v, k) {
						return [ [k, v] ];
					}).sort(function (a, b) {
						return -(a[1].length - b[1].length);
					});

				$.each(names, function (i, pair) {
					var name = pair[1];
					if (value.substr(iValue, name.length).toLowerCase() === name.toLowerCase()) {
						index = pair[0];
						iValue += name.length;
						return false;
					}
				});
				if (index !== -1) {
					return index + 1;
				} else {
					throw "Unknown name at position " + iValue;
				}
			},
			// Confirm that a literal character matches the string value
			checkLiteral = function() {
				if (value.charAt(iValue) !== format.charAt(iFormat)) {
					throw "Unexpected literal at position " + iValue;
				}
				iValue++;
			};

		for (iFormat = 0; iFormat < format.length; iFormat++) {
			if (literal) {
				if (format.charAt(iFormat) === "'" && !lookAhead("'")) {
					literal = false;
				} else {
					checkLiteral();
				}
			} else {
				switch (format.charAt(iFormat)) {
					case "d":
						day = getNumber("d");
						break;
					case "D":
						getName("D", dayNamesShort, dayNames);
						break;
					case "o":
						doy = getNumber("o");
						break;
					case "m":
						month = getNumber("m");
						break;
					case "M":
						month = getName("M", monthNamesShort, monthNames);
						break;
					case "y":
						year = getNumber("y");
						break;
					case "@":
						date = new Date(getNumber("@"));
						year = date.getFullYear();
						month = date.getMonth() + 1;
						day = date.getDate();
						break;
					case "!":
						date = new Date((getNumber("!") - this._ticksTo1970) / 10000);
						year = date.getFullYear();
						month = date.getMonth() + 1;
						day = date.getDate();
						break;
					case "'":
						if (lookAhead("'")){
							checkLiteral();
						} else {
							literal = true;
						}
						break;
					default:
						checkLiteral();
				}
			}
		}

		if (iValue < value.length){
			extra = value.substr(iValue);
			if (!/^\s+/.test(extra)) {
				throw "Extra/unparsed characters found in date: " + extra;
			}
		}

		if (year === -1) {
			year = new Date().getFullYear();
		} else if (year < 100) {
			year += new Date().getFullYear() - new Date().getFullYear() % 100 +
				(year <= shortYearCutoff ? 0 : -100);
		}

		if (doy > -1) {
			month = 1;
			day = doy;
			do {
				dim = this._getDaysInMonth(year, month - 1);
				if (day <= dim) {
					break;
				}
				month++;
				day -= dim;
			} while (true);
		}

		date = this._daylightSavingAdjust(new Date(year, month - 1, day));
		if (date.getFullYear() !== year || date.getMonth() + 1 !== month || date.getDate() !== day) {
			throw "Invalid date"; // E.g. 31/02/00
		}
		return date;
	},

	/* Standard date formats. */
	ATOM: "yy-mm-dd", // RFC 3339 (ISO 8601)
	COOKIE: "D, dd M yy",
	ISO_8601: "yy-mm-dd",
	RFC_822: "D, d M y",
	RFC_850: "DD, dd-M-y",
	RFC_1036: "D, d M y",
	RFC_1123: "D, d M yy",
	RFC_2822: "D, d M yy",
	RSS: "D, d M y", // RFC 822
	TICKS: "!",
	TIMESTAMP: "@",
	W3C: "yy-mm-dd", // ISO 8601

	_ticksTo1970: (((1970 - 1) * 365 + Math.floor(1970 / 4) - Math.floor(1970 / 100) +
		Math.floor(1970 / 400)) * 24 * 60 * 60 * 10000000),

	/* Format a date object into a string value.
	 * The format can be combinations of the following:
	 * d  - day of month (no leading zero)
	 * dd - day of month (two digit)
	 * o  - day of year (no leading zeros)
	 * oo - day of year (three digit)
	 * D  - day name short
	 * DD - day name long
	 * m  - month of year (no leading zero)
	 * mm - month of year (two digit)
	 * M  - month name short
	 * MM - month name long
	 * y  - year (two digit)
	 * yy - year (four digit)
	 * @ - Unix timestamp (ms since 01/01/1970)
	 * ! - Windows ticks (100ns since 01/01/0001)
	 * "..." - literal text
	 * '' - single quote
	 *
	 * @param  format string - the desired format of the date
	 * @param  date Date - the date value to format
	 * @param  settings Object - attributes include:
	 *					dayNamesShort	string[7] - abbreviated names of the days from Sunday (optional)
	 *					dayNames		string[7] - names of the days from Sunday (optional)
	 *					monthNamesShort string[12] - abbreviated names of the months (optional)
	 *					monthNames		string[12] - names of the months (optional)
	 * @return  string - the date in the above format
	 */
	formatDate: function (format, date, settings) {
		if (!date) {
			return "";
		}

		var iFormat,
			dayNamesShort = (settings ? settings.dayNamesShort : null) || this._defaults.dayNamesShort,
			dayNames = (settings ? settings.dayNames : null) || this._defaults.dayNames,
			monthNamesShort = (settings ? settings.monthNamesShort : null) || this._defaults.monthNamesShort,
			monthNames = (settings ? settings.monthNames : null) || this._defaults.monthNames,
			// Check whether a format character is doubled
			lookAhead = function(match) {
				var matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);
				if (matches) {
					iFormat++;
				}
				return matches;
			},
			// Format a number, with leading zero if necessary
			formatNumber = function(match, value, len) {
				var num = "" + value;
				if (lookAhead(match)) {
					while (num.length < len) {
						num = "0" + num;
					}
				}
				return num;
			},
			// Format a name, short or long as requested
			formatName = function(match, value, shortNames, longNames) {
				return (lookAhead(match) ? longNames[value] : shortNames[value]);
			},
			output = "",
			literal = false;

		if (date) {
			for (iFormat = 0; iFormat < format.length; iFormat++) {
				if (literal) {
					if (format.charAt(iFormat) === "'" && !lookAhead("'")) {
						literal = false;
					} else {
						output += format.charAt(iFormat);
					}
				} else {
					switch (format.charAt(iFormat)) {
						case "d":
							output += formatNumber("d", date.getDate(), 2);
							break;
						case "D":
							output += formatName("D", date.getDay(), dayNamesShort, dayNames);
							break;
						case "o":
							output += formatNumber("o",
								Math.round((new Date(date.getFullYear(), date.getMonth(), date.getDate()).getTime() - new Date(date.getFullYear(), 0, 0).getTime()) / 86400000), 3);
							break;
						case "m":
							output += formatNumber("m", date.getMonth() + 1, 2);
							break;
						case "M":
							output += formatName("M", date.getMonth(), monthNamesShort, monthNames);
							break;
						case "y":
							output += (lookAhead("y") ? date.getFullYear() :
								(date.getYear() % 100 < 10 ? "0" : "") + date.getYear() % 100);
							break;
						case "@":
							output += date.getTime();
							break;
						case "!":
							output += date.getTime() * 10000 + this._ticksTo1970;
							break;
						case "'":
							if (lookAhead("'")) {
								output += "'";
							} else {
								literal = true;
							}
							break;
						default:
							output += format.charAt(iFormat);
					}
				}
			}
		}
		return output;
	},

	/* Extract all possible characters from the date format. */
	_possibleChars: function (format) {
		var iFormat,
			chars = "",
			literal = false,
			// Check whether a format character is doubled
			lookAhead = function(match) {
				var matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);
				if (matches) {
					iFormat++;
				}
				return matches;
			};

		for (iFormat = 0; iFormat < format.length; iFormat++) {
			if (literal) {
				if (format.charAt(iFormat) === "'" && !lookAhead("'")) {
					literal = false;
				} else {
					chars += format.charAt(iFormat);
				}
			} else {
				switch (format.charAt(iFormat)) {
					case "d": case "m": case "y": case "@":
						chars += "0123456789";
						break;
					case "D": case "M":
						return null; // Accept anything
					case "'":
						if (lookAhead("'")) {
							chars += "'";
						} else {
							literal = true;
						}
						break;
					default:
						chars += format.charAt(iFormat);
				}
			}
		}
		return chars;
	},

	/* Get a setting value, defaulting if necessary. */
	_get: function(inst, name) {
		return inst.settings[name] !== undefined ?
			inst.settings[name] : this._defaults[name];
	},

	/* Parse existing date and initialise date picker. */
	_setDateFromField: function(inst, noDefault) {
		if (inst.input.val() === inst.lastVal) {
			return;
		}

		var dateFormat = this._get(inst, "dateFormat"),
			dates = inst.lastVal = inst.input ? inst.input.val() : null,
			defaultDate = this._getDefaultDate(inst),
			date = defaultDate,
			settings = this._getFormatConfig(inst);

		try {
			date = this.parseDate(dateFormat, dates, settings) || defaultDate;
		} catch (event) {
			dates = (noDefault ? "" : dates);
		}
		inst.selectedDay = date.getDate();
		inst.drawMonth = inst.selectedMonth = date.getMonth();
		inst.drawYear = inst.selectedYear = date.getFullYear();
		inst.currentDay = (dates ? date.getDate() : 0);
		inst.currentMonth = (dates ? date.getMonth() : 0);
		inst.currentYear = (dates ? date.getFullYear() : 0);
		this._adjustInstDate(inst);
	},

	/* Retrieve the default date shown on opening. */
	_getDefaultDate: function(inst) {
		return this._restrictMinMax(inst,
			this._determineDate(inst, this._get(inst, "defaultDate"), new Date()));
	},

	/* A date may be specified as an exact value or a relative one. */
	_determineDate: function(inst, date, defaultDate) {
		var offsetNumeric = function(offset) {
				var date = new Date();
				date.setDate(date.getDate() + offset);
				return date;
			},
			offsetString = function(offset) {
				try {
					return $.datepicker.parseDate($.datepicker._get(inst, "dateFormat"),
						offset, $.datepicker._getFormatConfig(inst));
				}
				catch (e) {
					// Ignore
				}

				var date = (offset.toLowerCase().match(/^c/) ?
					$.datepicker._getDate(inst) : null) || new Date(),
					year = date.getFullYear(),
					month = date.getMonth(),
					day = date.getDate(),
					pattern = /([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,
					matches = pattern.exec(offset);

				while (matches) {
					switch (matches[2] || "d") {
						case "d" : case "D" :
							day += parseInt(matches[1],10); break;
						case "w" : case "W" :
							day += parseInt(matches[1],10) * 7; break;
						case "m" : case "M" :
							month += parseInt(matches[1],10);
							day = Math.min(day, $.datepicker._getDaysInMonth(year, month));
							break;
						case "y": case "Y" :
							year += parseInt(matches[1],10);
							day = Math.min(day, $.datepicker._getDaysInMonth(year, month));
							break;
					}
					matches = pattern.exec(offset);
				}
				return new Date(year, month, day);
			},
			newDate = (date == null || date === "" ? defaultDate : (typeof date === "string" ? offsetString(date) :
				(typeof date === "number" ? (isNaN(date) ? defaultDate : offsetNumeric(date)) : new Date(date.getTime()))));

		newDate = (newDate && newDate.toString() === "Invalid Date" ? defaultDate : newDate);
		if (newDate) {
			newDate.setHours(0);
			newDate.setMinutes(0);
			newDate.setSeconds(0);
			newDate.setMilliseconds(0);
		}
		return this._daylightSavingAdjust(newDate);
	},

	/* Handle switch to/from daylight saving.
	 * Hours may be non-zero on daylight saving cut-over:
	 * > 12 when midnight changeover, but then cannot generate
	 * midnight datetime, so jump to 1AM, otherwise reset.
	 * @param  date  (Date) the date to check
	 * @return  (Date) the corrected date
	 */
	_daylightSavingAdjust: function(date) {
		if (!date) {
			return null;
		}
		date.setHours(date.getHours() > 12 ? date.getHours() + 2 : 0);
		return date;
	},

	/* Set the date(s) directly. */
	_setDate: function(inst, date, noChange) {
		var clear = !date,
			origMonth = inst.selectedMonth,
			origYear = inst.selectedYear,
			newDate = this._restrictMinMax(inst, this._determineDate(inst, date, new Date()));

		inst.selectedDay = inst.currentDay = newDate.getDate();
		inst.drawMonth = inst.selectedMonth = inst.currentMonth = newDate.getMonth();
		inst.drawYear = inst.selectedYear = inst.currentYear = newDate.getFullYear();
		if ((origMonth !== inst.selectedMonth || origYear !== inst.selectedYear) && !noChange) {
			this._notifyChange(inst);
		}
		this._adjustInstDate(inst);
		if (inst.input) {
			inst.input.val(clear ? "" : this._formatDate(inst));
		}
	},

	/* Retrieve the date(s) directly. */
	_getDate: function(inst) {
		var startDate = (!inst.currentYear || (inst.input && inst.input.val() === "") ? null :
			this._daylightSavingAdjust(new Date(
			inst.currentYear, inst.currentMonth, inst.currentDay)));
			return startDate;
	},

	/* Attach the onxxx handlers.  These are declared statically so
	 * they work with static code transformers like Caja.
	 */
	_attachHandlers: function(inst) {
		var stepMonths = this._get(inst, "stepMonths"),
			id = "#" + inst.id.replace( /\\\\/g, "\\" );
		inst.dpDiv.find("[data-handler]").map(function () {
			var handler = {
				prev: function () {
					$.datepicker._adjustDate(id, -stepMonths, "M");
				},
				next: function () {
					$.datepicker._adjustDate(id, +stepMonths, "M");
				},
				hide: function () {
					$.datepicker._hideDatepicker();
				},
				today: function () {
					$.datepicker._gotoToday(id);
				},
				selectDay: function () {
					$.datepicker._selectDay(id, +this.getAttribute("data-month"), +this.getAttribute("data-year"), this);
					return false;
				},
				selectMonth: function () {
					$.datepicker._selectMonthYear(id, this, "M");
					return false;
				},
				selectYear: function () {
					$.datepicker._selectMonthYear(id, this, "Y");
					return false;
				}
			};
			$(this).bind(this.getAttribute("data-event"), handler[this.getAttribute("data-handler")]);
		});
	},

	/* Generate the HTML for the current state of the date picker. */
	_generateHTML: function(inst) {
		var maxDraw, prevText, prev, nextText, next, currentText, gotoDate,
			controls, buttonPanel, firstDay, showWeek, dayNames, dayNamesMin,
			monthNames, monthNamesShort, beforeShowDay, showOtherMonths,
			selectOtherMonths, defaultDate, html, dow, row, group, col, selectedDate,
			cornerClass, calender, thead, day, daysInMonth, leadDays, curRows, numRows,
			printDate, dRow, tbody, daySettings, otherMonth, unselectable,
			tempDate = new Date(),
			today = this._daylightSavingAdjust(
				new Date(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate())), // clear time
			isRTL = this._get(inst, "isRTL"),
			showButtonPanel = this._get(inst, "showButtonPanel"),
			hideIfNoPrevNext = this._get(inst, "hideIfNoPrevNext"),
			navigationAsDateFormat = this._get(inst, "navigationAsDateFormat"),
			numMonths = this._getNumberOfMonths(inst),
			showCurrentAtPos = this._get(inst, "showCurrentAtPos"),
			stepMonths = this._get(inst, "stepMonths"),
			isMultiMonth = (numMonths[0] !== 1 || numMonths[1] !== 1),
			currentDate = this._daylightSavingAdjust((!inst.currentDay ? new Date(9999, 9, 9) :
				new Date(inst.currentYear, inst.currentMonth, inst.currentDay))),
			minDate = this._getMinMaxDate(inst, "min"),
			maxDate = this._getMinMaxDate(inst, "max"),
			drawMonth = inst.drawMonth - showCurrentAtPos,
			drawYear = inst.drawYear;

		if (drawMonth < 0) {
			drawMonth += 12;
			drawYear--;
		}
		if (maxDate) {
			maxDraw = this._daylightSavingAdjust(new Date(maxDate.getFullYear(),
				maxDate.getMonth() - (numMonths[0] * numMonths[1]) + 1, maxDate.getDate()));
			maxDraw = (minDate && maxDraw < minDate ? minDate : maxDraw);
			while (this._daylightSavingAdjust(new Date(drawYear, drawMonth, 1)) > maxDraw) {
				drawMonth--;
				if (drawMonth < 0) {
					drawMonth = 11;
					drawYear--;
				}
			}
		}
		inst.drawMonth = drawMonth;
		inst.drawYear = drawYear;

		prevText = this._get(inst, "prevText");
		prevText = (!navigationAsDateFormat ? prevText : this.formatDate(prevText,
			this._daylightSavingAdjust(new Date(drawYear, drawMonth - stepMonths, 1)),
			this._getFormatConfig(inst)));

		prev = (this._canAdjustMonth(inst, -1, drawYear, drawMonth) ?
			"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'" +
			" title='" + prevText + "'><span class='ui-icon ui-icon-circle-triangle-" + ( isRTL ? "e" : "w") + "'>" + prevText + "</span></a>" :
			(hideIfNoPrevNext ? "" : "<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+ prevText +"'><span class='ui-icon ui-icon-circle-triangle-" + ( isRTL ? "e" : "w") + "'>" + prevText + "</span></a>"));

		nextText = this._get(inst, "nextText");
		nextText = (!navigationAsDateFormat ? nextText : this.formatDate(nextText,
			this._daylightSavingAdjust(new Date(drawYear, drawMonth + stepMonths, 1)),
			this._getFormatConfig(inst)));

		next = (this._canAdjustMonth(inst, +1, drawYear, drawMonth) ?
			"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'" +
			" title='" + nextText + "'><span class='ui-icon ui-icon-circle-triangle-" + ( isRTL ? "w" : "e") + "'>" + nextText + "</span></a>" :
			(hideIfNoPrevNext ? "" : "<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+ nextText + "'><span class='ui-icon ui-icon-circle-triangle-" + ( isRTL ? "w" : "e") + "'>" + nextText + "</span></a>"));

		currentText = this._get(inst, "currentText");
		gotoDate = (this._get(inst, "gotoCurrent") && inst.currentDay ? currentDate : today);
		currentText = (!navigationAsDateFormat ? currentText :
			this.formatDate(currentText, gotoDate, this._getFormatConfig(inst)));

		controls = (!inst.inline ? "<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>" +
			this._get(inst, "closeText") + "</button>" : "");

		buttonPanel = (showButtonPanel) ? "<div class='ui-datepicker-buttonpane ui-widget-content'>" + (isRTL ? controls : "") +
			(this._isInRange(inst, gotoDate) ? "<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'" +
			">" + currentText + "</button>" : "") + (isRTL ? "" : controls) + "</div>" : "";

		firstDay = parseInt(this._get(inst, "firstDay"),10);
		firstDay = (isNaN(firstDay) ? 0 : firstDay);

		showWeek = this._get(inst, "showWeek");
		dayNames = this._get(inst, "dayNames");
		dayNamesMin = this._get(inst, "dayNamesMin");
		monthNames = this._get(inst, "monthNames");
		monthNamesShort = this._get(inst, "monthNamesShort");
		beforeShowDay = this._get(inst, "beforeShowDay");
		showOtherMonths = this._get(inst, "showOtherMonths");
		selectOtherMonths = this._get(inst, "selectOtherMonths");
		defaultDate = this._getDefaultDate(inst);
		html = "";
		dow;
		for (row = 0; row < numMonths[0]; row++) {
			group = "";
			this.maxRows = 4;
			for (col = 0; col < numMonths[1]; col++) {
				selectedDate = this._daylightSavingAdjust(new Date(drawYear, drawMonth, inst.selectedDay));
				cornerClass = " ui-corner-all";
				calender = "";
				if (isMultiMonth) {
					calender += "<div class='ui-datepicker-group";
					if (numMonths[1] > 1) {
						switch (col) {
							case 0: calender += " ui-datepicker-group-first";
								cornerClass = " ui-corner-" + (isRTL ? "right" : "left"); break;
							case numMonths[1]-1: calender += " ui-datepicker-group-last";
								cornerClass = " ui-corner-" + (isRTL ? "left" : "right"); break;
							default: calender += " ui-datepicker-group-middle"; cornerClass = ""; break;
						}
					}
					calender += "'>";
				}
				calender += "<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix" + cornerClass + "'>" +
					(/all|left/.test(cornerClass) && row === 0 ? (isRTL ? next : prev) : "") +
					(/all|right/.test(cornerClass) && row === 0 ? (isRTL ? prev : next) : "") +
					this._generateMonthYearHeader(inst, drawMonth, drawYear, minDate, maxDate,
					row > 0 || col > 0, monthNames, monthNamesShort) + // draw month headers
					"</div><table class='ui-datepicker-calendar'><thead>" +
					"<tr>";
				thead = (showWeek ? "<th class='ui-datepicker-week-col'>" + this._get(inst, "weekHeader") + "</th>" : "");
				for (dow = 0; dow < 7; dow++) { // days of the week
					day = (dow + firstDay) % 7;
					thead += "<th" + ((dow + firstDay + 6) % 7 >= 5 ? " class='ui-datepicker-week-end'" : "") + ">" +
						"<span title='" + dayNames[day] + "'>" + dayNamesMin[day] + "</span></th>";
				}
				calender += thead + "</tr></thead><tbody>";
				daysInMonth = this._getDaysInMonth(drawYear, drawMonth);
				if (drawYear === inst.selectedYear && drawMonth === inst.selectedMonth) {
					inst.selectedDay = Math.min(inst.selectedDay, daysInMonth);
				}
				leadDays = (this._getFirstDayOfMonth(drawYear, drawMonth) - firstDay + 7) % 7;
				curRows = Math.ceil((leadDays + daysInMonth) / 7); // calculate the number of rows to generate
				numRows = (isMultiMonth ? this.maxRows > curRows ? this.maxRows : curRows : curRows); //If multiple months, use the higher number of rows (see #7043)
				this.maxRows = numRows;
				printDate = this._daylightSavingAdjust(new Date(drawYear, drawMonth, 1 - leadDays));
				for (dRow = 0; dRow < numRows; dRow++) { // create date picker rows
					calender += "<tr>";
					tbody = (!showWeek ? "" : "<td class='ui-datepicker-week-col'>" +
						this._get(inst, "calculateWeek")(printDate) + "</td>");
					for (dow = 0; dow < 7; dow++) { // create date picker days
						daySettings = (beforeShowDay ?
							beforeShowDay.apply((inst.input ? inst.input[0] : null), [printDate]) : [true, ""]);
						otherMonth = (printDate.getMonth() !== drawMonth);
						unselectable = (otherMonth && !selectOtherMonths) || !daySettings[0] ||
							(minDate && printDate < minDate) || (maxDate && printDate > maxDate);
						tbody += "<td class='" +
							((dow + firstDay + 6) % 7 >= 5 ? " ui-datepicker-week-end" : "") + // highlight weekends
							(otherMonth ? " ui-datepicker-other-month" : "") + // highlight days from other months
							((printDate.getTime() === selectedDate.getTime() && drawMonth === inst.selectedMonth && inst._keyEvent) || // user pressed key
							(defaultDate.getTime() === printDate.getTime() && defaultDate.getTime() === selectedDate.getTime()) ?
							// or defaultDate is current printedDate and defaultDate is selectedDate
							" " + this._dayOverClass : "") + // highlight selected day
							(unselectable ? " " + this._unselectableClass + " ui-state-disabled": "") +  // highlight unselectable days
							(otherMonth && !showOtherMonths ? "" : " " + daySettings[1] + // highlight custom dates
							(printDate.getTime() === currentDate.getTime() ? " " + this._currentClass : "") + // highlight selected day
							(printDate.getTime() === today.getTime() ? " ui-datepicker-today" : "")) + "'" + // highlight today (if different)
							((!otherMonth || showOtherMonths) && daySettings[2] ? " title='" + daySettings[2].replace(/'/g, "&#39;") + "'" : "") + // cell title
							(unselectable ? "" : " data-handler='selectDay' data-event='click' data-month='" + printDate.getMonth() + "' data-year='" + printDate.getFullYear() + "'") + ">" + // actions
							(otherMonth && !showOtherMonths ? "&#xa0;" : // display for other months
							(unselectable ? "<span class='ui-state-default'>" + printDate.getDate() + "</span>" : "<a class='ui-state-default" +
							(printDate.getTime() === today.getTime() ? " ui-state-highlight" : "") +
							(printDate.getTime() === currentDate.getTime() ? " ui-state-active" : "") + // highlight selected day
							(otherMonth ? " ui-priority-secondary" : "") + // distinguish dates from other months
							"' href='#'>" + printDate.getDate() + "</a>")) + "</td>"; // display selectable date
						printDate.setDate(printDate.getDate() + 1);
						printDate = this._daylightSavingAdjust(printDate);
					}
					calender += tbody + "</tr>";
				}
				drawMonth++;
				if (drawMonth > 11) {
					drawMonth = 0;
					drawYear++;
				}
				calender += "</tbody></table>" + (isMultiMonth ? "</div>" +
							((numMonths[0] > 0 && col === numMonths[1]-1) ? "<div class='ui-datepicker-row-break'></div>" : "") : "");
				group += calender;
			}
			html += group;
		}
		html += buttonPanel;
		inst._keyEvent = false;
		return html;
	},

	/* Generate the month and year header. */
	_generateMonthYearHeader: function(inst, drawMonth, drawYear, minDate, maxDate,
			secondary, monthNames, monthNamesShort) {

		var inMinYear, inMaxYear, month, years, thisYear, determineYear, year, endYear,
			changeMonth = this._get(inst, "changeMonth"),
			changeYear = this._get(inst, "changeYear"),
			showMonthAfterYear = this._get(inst, "showMonthAfterYear"),
			html = "<div class='ui-datepicker-title'>",
			monthHtml = "";

		// month selection
		if (secondary || !changeMonth) {
			monthHtml += "<span class='ui-datepicker-month'>" + monthNames[drawMonth] + "</span>";
		} else {
			inMinYear = (minDate && minDate.getFullYear() === drawYear);
			inMaxYear = (maxDate && maxDate.getFullYear() === drawYear);
			monthHtml += "<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";
			for ( month = 0; month < 12; month++) {
				if ((!inMinYear || month >= minDate.getMonth()) && (!inMaxYear || month <= maxDate.getMonth())) {
					monthHtml += "<option value='" + month + "'" +
						(month === drawMonth ? " selected='selected'" : "") +
						">" + monthNamesShort[month] + "</option>";
				}
			}
			monthHtml += "</select>";
		}

		if (!showMonthAfterYear) {
			html += monthHtml + (secondary || !(changeMonth && changeYear) ? "&#xa0;" : "");
		}

		// year selection
		if ( !inst.yearshtml ) {
			inst.yearshtml = "";
			if (secondary || !changeYear) {
				html += "<span class='ui-datepicker-year'>" + drawYear + "</span>";
			} else {
				// determine range of years to display
				years = this._get(inst, "yearRange").split(":");
				thisYear = new Date().getFullYear();
				determineYear = function(value) {
					var year = (value.match(/c[+\-].*/) ? drawYear + parseInt(value.substring(1), 10) :
						(value.match(/[+\-].*/) ? thisYear + parseInt(value, 10) :
						parseInt(value, 10)));
					return (isNaN(year) ? thisYear : year);
				};
				year = determineYear(years[0]);
				endYear = Math.max(year, determineYear(years[1] || ""));
				year = (minDate ? Math.max(year, minDate.getFullYear()) : year);
				endYear = (maxDate ? Math.min(endYear, maxDate.getFullYear()) : endYear);
				inst.yearshtml += "<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";
				for (; year <= endYear; year++) {
					inst.yearshtml += "<option value='" + year + "'" +
						(year === drawYear ? " selected='selected'" : "") +
						">" + year + "</option>";
				}
				inst.yearshtml += "</select>";

				html += inst.yearshtml;
				inst.yearshtml = null;
			}
		}

		html += this._get(inst, "yearSuffix");
		if (showMonthAfterYear) {
			html += (secondary || !(changeMonth && changeYear) ? "&#xa0;" : "") + monthHtml;
		}
		html += "</div>"; // Close datepicker_header
		return html;
	},

	/* Adjust one of the date sub-fields. */
	_adjustInstDate: function(inst, offset, period) {
		var year = inst.drawYear + (period === "Y" ? offset : 0),
			month = inst.drawMonth + (period === "M" ? offset : 0),
			day = Math.min(inst.selectedDay, this._getDaysInMonth(year, month)) + (period === "D" ? offset : 0),
			date = this._restrictMinMax(inst, this._daylightSavingAdjust(new Date(year, month, day)));

		inst.selectedDay = date.getDate();
		inst.drawMonth = inst.selectedMonth = date.getMonth();
		inst.drawYear = inst.selectedYear = date.getFullYear();
		if (period === "M" || period === "Y") {
			this._notifyChange(inst);
		}
	},

	/* Ensure a date is within any min/max bounds. */
	_restrictMinMax: function(inst, date) {
		var minDate = this._getMinMaxDate(inst, "min"),
			maxDate = this._getMinMaxDate(inst, "max"),
			newDate = (minDate && date < minDate ? minDate : date);
		return (maxDate && newDate > maxDate ? maxDate : newDate);
	},

	/* Notify change of month/year. */
	_notifyChange: function(inst) {
		var onChange = this._get(inst, "onChangeMonthYear");
		if (onChange) {
			onChange.apply((inst.input ? inst.input[0] : null),
				[inst.selectedYear, inst.selectedMonth + 1, inst]);
		}
	},

	/* Determine the number of months to show. */
	_getNumberOfMonths: function(inst) {
		var numMonths = this._get(inst, "numberOfMonths");
		return (numMonths == null ? [1, 1] : (typeof numMonths === "number" ? [1, numMonths] : numMonths));
	},

	/* Determine the current maximum date - ensure no time components are set. */
	_getMinMaxDate: function(inst, minMax) {
		return this._determineDate(inst, this._get(inst, minMax + "Date"), null);
	},

	/* Find the number of days in a given month. */
	_getDaysInMonth: function(year, month) {
		return 32 - this._daylightSavingAdjust(new Date(year, month, 32)).getDate();
	},

	/* Find the day of the week of the first of a month. */
	_getFirstDayOfMonth: function(year, month) {
		return new Date(year, month, 1).getDay();
	},

	/* Determines if we should allow a "next/prev" month display change. */
	_canAdjustMonth: function(inst, offset, curYear, curMonth) {
		var numMonths = this._getNumberOfMonths(inst),
			date = this._daylightSavingAdjust(new Date(curYear,
			curMonth + (offset < 0 ? offset : numMonths[0] * numMonths[1]), 1));

		if (offset < 0) {
			date.setDate(this._getDaysInMonth(date.getFullYear(), date.getMonth()));
		}
		return this._isInRange(inst, date);
	},

	/* Is the given date in the accepted range? */
	_isInRange: function(inst, date) {
		var yearSplit, currentYear,
			minDate = this._getMinMaxDate(inst, "min"),
			maxDate = this._getMinMaxDate(inst, "max"),
			minYear = null,
			maxYear = null,
			years = this._get(inst, "yearRange");
			if (years){
				yearSplit = years.split(":");
				currentYear = new Date().getFullYear();
				minYear = parseInt(yearSplit[0], 10);
				maxYear = parseInt(yearSplit[1], 10);
				if ( yearSplit[0].match(/[+\-].*/) ) {
					minYear += currentYear;
				}
				if ( yearSplit[1].match(/[+\-].*/) ) {
					maxYear += currentYear;
				}
			}

		return ((!minDate || date.getTime() >= minDate.getTime()) &&
			(!maxDate || date.getTime() <= maxDate.getTime()) &&
			(!minYear || date.getFullYear() >= minYear) &&
			(!maxYear || date.getFullYear() <= maxYear));
	},

	/* Provide the configuration settings for formatting/parsing. */
	_getFormatConfig: function(inst) {
		var shortYearCutoff = this._get(inst, "shortYearCutoff");
		shortYearCutoff = (typeof shortYearCutoff !== "string" ? shortYearCutoff :
			new Date().getFullYear() % 100 + parseInt(shortYearCutoff, 10));
		return {shortYearCutoff: shortYearCutoff,
			dayNamesShort: this._get(inst, "dayNamesShort"), dayNames: this._get(inst, "dayNames"),
			monthNamesShort: this._get(inst, "monthNamesShort"), monthNames: this._get(inst, "monthNames")};
	},

	/* Format the given date for display. */
	_formatDate: function(inst, day, month, year) {
		if (!day) {
			inst.currentDay = inst.selectedDay;
			inst.currentMonth = inst.selectedMonth;
			inst.currentYear = inst.selectedYear;
		}
		var date = (day ? (typeof day === "object" ? day :
			this._daylightSavingAdjust(new Date(year, month, day))) :
			this._daylightSavingAdjust(new Date(inst.currentYear, inst.currentMonth, inst.currentDay)));
		return this.formatDate(this._get(inst, "dateFormat"), date, this._getFormatConfig(inst));
	}
});

/*
 * Bind hover events for datepicker elements.
 * Done via delegate so the binding only occurs once in the lifetime of the parent div.
 * Global instActive, set by _updateDatepicker allows the handlers to find their way back to the active picker.
 */
function bindHover(dpDiv) {
	var selector = "button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";
	return dpDiv.delegate(selector, "mouseout", function() {
			$(this).removeClass("ui-state-hover");
			if (this.className.indexOf("ui-datepicker-prev") !== -1) {
				$(this).removeClass("ui-datepicker-prev-hover");
			}
			if (this.className.indexOf("ui-datepicker-next") !== -1) {
				$(this).removeClass("ui-datepicker-next-hover");
			}
		})
		.delegate(selector, "mouseover", function(){
			if (!$.datepicker._isDisabledDatepicker( instActive.inline ? dpDiv.parent()[0] : instActive.input[0])) {
				$(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");
				$(this).addClass("ui-state-hover");
				if (this.className.indexOf("ui-datepicker-prev") !== -1) {
					$(this).addClass("ui-datepicker-prev-hover");
				}
				if (this.className.indexOf("ui-datepicker-next") !== -1) {
					$(this).addClass("ui-datepicker-next-hover");
				}
			}
		});
}

/* jQuery extend now ignores nulls! */
function extendRemove(target, props) {
	$.extend(target, props);
	for (var name in props) {
		if (props[name] == null) {
			target[name] = props[name];
		}
	}
	return target;
}

/* Invoke the datepicker functionality.
   @param  options  string - a command, optionally followed by additional parameters or
					Object - settings for attaching new datepicker functionality
   @return  jQuery object */
$.fn.datepicker = function(options){

	/* Verify an empty collection wasn't passed - Fixes #6976 */
	if ( !this.length ) {
		return this;
	}

	/* Initialise the date picker. */
	if (!$.datepicker.initialized) {
		$(document).mousedown($.datepicker._checkExternalClick);
		$.datepicker.initialized = true;
	}

	/* Append datepicker main container to body if not exist. */
	if ($("#"+$.datepicker._mainDivId).length === 0) {
		$("body").append($.datepicker.dpDiv);
	}

	var otherArgs = Array.prototype.slice.call(arguments, 1);
	if (typeof options === "string" && (options === "isDisabled" || options === "getDate" || options === "widget")) {
		return $.datepicker["_" + options + "Datepicker"].
			apply($.datepicker, [this[0]].concat(otherArgs));
	}
	if (options === "option" && arguments.length === 2 && typeof arguments[1] === "string") {
		return $.datepicker["_" + options + "Datepicker"].
			apply($.datepicker, [this[0]].concat(otherArgs));
	}
	return this.each(function() {
		typeof options === "string" ?
			$.datepicker["_" + options + "Datepicker"].
				apply($.datepicker, [this].concat(otherArgs)) :
			$.datepicker._attachDatepicker(this, options);
	});
};

$.datepicker = new Datepicker(); // singleton instance
$.datepicker.initialized = false;
$.datepicker.uuid = new Date().getTime();
$.datepicker.version = "1.10.3";

})(jQuery);

(function( $, undefined ) {

var sizeRelatedOptions = {
		buttons: true,
		height: true,
		maxHeight: true,
		maxWidth: true,
		minHeight: true,
		minWidth: true,
		width: true
	},
	resizableRelatedOptions = {
		maxHeight: true,
		maxWidth: true,
		minHeight: true,
		minWidth: true
	};

$.widget( "ui.dialog", {
	version: "1.10.3",
	options: {
		appendTo: "body",
		autoOpen: true,
		buttons: [],
		closeOnEscape: true,
		closeText: "close",
		dialogClass: "",
		draggable: true,
		hide: null,
		height: "auto",
		maxHeight: null,
		maxWidth: null,
		minHeight: 150,
		minWidth: 150,
		modal: false,
		position: {
			my: "center",
			at: "center",
			of: window,
			collision: "fit",
			// Ensure the titlebar is always visible
			using: function( pos ) {
				var topOffset = $( this ).css( pos ).offset().top;
				if ( topOffset < 0 ) {
					$( this ).css( "top", pos.top - topOffset );
				}
			}
		},
		resizable: true,
		show: null,
		title: null,
		width: 300,

		// callbacks
		beforeClose: null,
		close: null,
		drag: null,
		dragStart: null,
		dragStop: null,
		focus: null,
		open: null,
		resize: null,
		resizeStart: null,
		resizeStop: null
	},

	_create: function() {
		this.originalCss = {
			display: this.element[0].style.display,
			width: this.element[0].style.width,
			minHeight: this.element[0].style.minHeight,
			maxHeight: this.element[0].style.maxHeight,
			height: this.element[0].style.height
		};
		this.originalPosition = {
			parent: this.element.parent(),
			index: this.element.parent().children().index( this.element )
		};
		this.originalTitle = this.element.attr("title");
		this.options.title = this.options.title || this.originalTitle;

		this._createWrapper();

		this.element
			.show()
			.removeAttr("title")
			.addClass("ui-dialog-content ui-widget-content")
			.appendTo( this.uiDialog );

		this._createTitlebar();
		this._createButtonPane();

		if ( this.options.draggable && $.fn.draggable ) {
			this._makeDraggable();
		}
		if ( this.options.resizable && $.fn.resizable ) {
			this._makeResizable();
		}

		this._isOpen = false;
	},

	_init: function() {
		if ( this.options.autoOpen ) {
			this.open();
		}
	},

	_appendTo: function() {
		var element = this.options.appendTo;
		if ( element && (element.jquery || element.nodeType) ) {
			return $( element );
		}
		return this.document.find( element || "body" ).eq( 0 );
	},

	_destroy: function() {
		var next,
			originalPosition = this.originalPosition;

		this._destroyOverlay();

		this.element
			.removeUniqueId()
			.removeClass("ui-dialog-content ui-widget-content")
			.css( this.originalCss )
			// Without detaching first, the following becomes really slow
			.detach();

		this.uiDialog.stop( true, true ).remove();

		if ( this.originalTitle ) {
			this.element.attr( "title", this.originalTitle );
		}

		next = originalPosition.parent.children().eq( originalPosition.index );
		// Don't try to place the dialog next to itself (#8613)
		if ( next.length && next[0] !== this.element[0] ) {
			next.before( this.element );
		} else {
			originalPosition.parent.append( this.element );
		}
	},

	widget: function() {
		return this.uiDialog;
	},

	disable: $.noop,
	enable: $.noop,

	close: function( event ) {
		var that = this;

		if ( !this._isOpen || this._trigger( "beforeClose", event ) === false ) {
			return;
		}

		this._isOpen = false;
		this._destroyOverlay();

		if ( !this.opener.filter(":focusable").focus().length ) {
			// Hiding a focused element doesn't trigger blur in WebKit
			// so in case we have nothing to focus on, explicitly blur the active element
			// https://bugs.webkit.org/show_bug.cgi?id=47182
			$( this.document[0].activeElement ).blur();
		}

		this._hide( this.uiDialog, this.options.hide, function() {
			that._trigger( "close", event );
		});
	},

	isOpen: function() {
		return this._isOpen;
	},

	moveToTop: function() {
		this._moveToTop();
	},

	_moveToTop: function( event, silent ) {
		var moved = !!this.uiDialog.nextAll(":visible").insertBefore( this.uiDialog ).length;
		if ( moved && !silent ) {
			this._trigger( "focus", event );
		}
		return moved;
	},

	open: function() {
		var that = this;
		if ( this._isOpen ) {
			if ( this._moveToTop() ) {
				this._focusTabbable();
			}
			return;
		}

		this._isOpen = true;
		this.opener = $( this.document[0].activeElement );

		this._size();
		this._position();
		this._createOverlay();
		this._moveToTop( null, true );
		this._show( this.uiDialog, this.options.show, function() {
			that._focusTabbable();
			that._trigger("focus");
		});

		this._trigger("open");
	},

	_focusTabbable: function() {
		// Set focus to the first match:
		// 1. First element inside the dialog matching [autofocus]
		// 2. Tabbable element inside the content element
		// 3. Tabbable element inside the buttonpane
		// 4. The close button
		// 5. The dialog itself
		var hasFocus = this.element.find("[autofocus]");
		if ( !hasFocus.length ) {
			hasFocus = this.element.find(":tabbable");
		}
		if ( !hasFocus.length ) {
			hasFocus = this.uiDialogButtonPane.find(":tabbable");
		}
		if ( !hasFocus.length ) {
			hasFocus = this.uiDialogTitlebarClose.filter(":tabbable");
		}
		if ( !hasFocus.length ) {
			hasFocus = this.uiDialog;
		}
		hasFocus.eq( 0 ).focus();
	},

	_keepFocus: function( event ) {
		function checkFocus() {
			var activeElement = this.document[0].activeElement,
				isActive = this.uiDialog[0] === activeElement ||
					$.contains( this.uiDialog[0], activeElement );
			if ( !isActive ) {
				this._focusTabbable();
			}
		}
		event.preventDefault();
		checkFocus.call( this );
		// support: IE
		// IE <= 8 doesn't prevent moving focus even with event.preventDefault()
		// so we check again later
		this._delay( checkFocus );
	},

	_createWrapper: function() {
		this.uiDialog = $("<div>")
			.addClass( "ui-dialog ui-widget ui-widget-content ui-corner-all ui-front " +
				this.options.dialogClass )
			.hide()
			.attr({
				// Setting tabIndex makes the div focusable
				tabIndex: -1,
				role: "dialog"
			})
			.appendTo( this._appendTo() );

		this._on( this.uiDialog, {
			keydown: function( event ) {
				if ( this.options.closeOnEscape && !event.isDefaultPrevented() && event.keyCode &&
						event.keyCode === $.ui.keyCode.ESCAPE ) {
					event.preventDefault();
					this.close( event );
					return;
				}

				// prevent tabbing out of dialogs
				if ( event.keyCode !== $.ui.keyCode.TAB ) {
					return;
				}
				var tabbables = this.uiDialog.find(":tabbable"),
					first = tabbables.filter(":first"),
					last  = tabbables.filter(":last");

				if ( ( event.target === last[0] || event.target === this.uiDialog[0] ) && !event.shiftKey ) {
					first.focus( 1 );
					event.preventDefault();
				} else if ( ( event.target === first[0] || event.target === this.uiDialog[0] ) && event.shiftKey ) {
					last.focus( 1 );
					event.preventDefault();
				}
			},
			mousedown: function( event ) {
				if ( this._moveToTop( event ) ) {
					this._focusTabbable();
				}
			}
		});

		// We assume that any existing aria-describedby attribute means
		// that the dialog content is marked up properly
		// otherwise we brute force the content as the description
		if ( !this.element.find("[aria-describedby]").length ) {
			this.uiDialog.attr({
				"aria-describedby": this.element.uniqueId().attr("id")
			});
		}
	},

	_createTitlebar: function() {
		var uiDialogTitle;

		this.uiDialogTitlebar = $("<div>")
			.addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix")
			.prependTo( this.uiDialog );
		this._on( this.uiDialogTitlebar, {
			mousedown: function( event ) {
				// Don't prevent click on close button (#8838)
				// Focusing a dialog that is partially scrolled out of view
				// causes the browser to scroll it into view, preventing the click event
				if ( !$( event.target ).closest(".ui-dialog-titlebar-close") ) {
					// Dialog isn't getting focus when dragging (#8063)
					this.uiDialog.focus();
				}
			}
		});

		this.uiDialogTitlebarClose = $("<button></button>")
			.button({
				label: this.options.closeText,
				icons: {
					primary: "ui-icon-closethick"
				},
				text: false
			})
			.addClass("ui-dialog-titlebar-close")
			.appendTo( this.uiDialogTitlebar );
		this._on( this.uiDialogTitlebarClose, {
			click: function( event ) {
				event.preventDefault();
				this.close( event );
			}
		});

		uiDialogTitle = $("<span>")
			.uniqueId()
			.addClass("ui-dialog-title")
			.prependTo( this.uiDialogTitlebar );
		this._title( uiDialogTitle );

		this.uiDialog.attr({
			"aria-labelledby": uiDialogTitle.attr("id")
		});
	},

	_title: function( title ) {
		if ( !this.options.title ) {
			title.html("&#160;");
		}
		title.text( this.options.title );
	},

	_createButtonPane: function() {
		this.uiDialogButtonPane = $("<div>")
			.addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");

		this.uiButtonSet = $("<div>")
			.addClass("ui-dialog-buttonset")
			.appendTo( this.uiDialogButtonPane );

		this._createButtons();
	},

	_createButtons: function() {
		var that = this,
			buttons = this.options.buttons;

		// if we already have a button pane, remove it
		this.uiDialogButtonPane.remove();
		this.uiButtonSet.empty();

		if ( $.isEmptyObject( buttons ) || ($.isArray( buttons ) && !buttons.length) ) {
			this.uiDialog.removeClass("ui-dialog-buttons");
			return;
		}

		$.each( buttons, function( name, props ) {
			var click, buttonOptions;
			props = $.isFunction( props ) ?
				{ click: props, text: name } :
				props;
			// Default to a non-submitting button
			props = $.extend( { type: "button" }, props );
			// Change the context for the click callback to be the main element
			click = props.click;
			props.click = function() {
				click.apply( that.element[0], arguments );
			};
			buttonOptions = {
				icons: props.icons,
				text: props.showText
			};
			delete props.icons;
			delete props.showText;
			$( "<button></button>", props )
				.button( buttonOptions )
				.appendTo( that.uiButtonSet );
		});
		this.uiDialog.addClass("ui-dialog-buttons");
		this.uiDialogButtonPane.appendTo( this.uiDialog );
	},

	_makeDraggable: function() {
		var that = this,
			options = this.options;

		function filteredUi( ui ) {
			return {
				position: ui.position,
				offset: ui.offset
			};
		}

		this.uiDialog.draggable({
			cancel: ".ui-dialog-content, .ui-dialog-titlebar-close",
			handle: ".ui-dialog-titlebar",
			containment: "document",
			start: function( event, ui ) {
				$( this ).addClass("ui-dialog-dragging");
				that._blockFrames();
				that._trigger( "dragStart", event, filteredUi( ui ) );
			},
			drag: function( event, ui ) {
				that._trigger( "drag", event, filteredUi( ui ) );
			},
			stop: function( event, ui ) {
				options.position = [
					ui.position.left - that.document.scrollLeft(),
					ui.position.top - that.document.scrollTop()
				];
				$( this ).removeClass("ui-dialog-dragging");
				that._unblockFrames();
				that._trigger( "dragStop", event, filteredUi( ui ) );
			}
		});
	},

	_makeResizable: function() {
		var that = this,
			options = this.options,
			handles = options.resizable,
			// .ui-resizable has position: relative defined in the stylesheet
			// but dialogs have to use absolute or fixed positioning
			position = this.uiDialog.css("position"),
			resizeHandles = typeof handles === "string" ?
				handles	:
				"n,e,s,w,se,sw,ne,nw";

		function filteredUi( ui ) {
			return {
				originalPosition: ui.originalPosition,
				originalSize: ui.originalSize,
				position: ui.position,
				size: ui.size
			};
		}

		this.uiDialog.resizable({
			cancel: ".ui-dialog-content",
			containment: "document",
			alsoResize: this.element,
			maxWidth: options.maxWidth,
			maxHeight: options.maxHeight,
			minWidth: options.minWidth,
			minHeight: this._minHeight(),
			handles: resizeHandles,
			start: function( event, ui ) {
				$( this ).addClass("ui-dialog-resizing");
				that._blockFrames();
				that._trigger( "resizeStart", event, filteredUi( ui ) );
			},
			resize: function( event, ui ) {
				that._trigger( "resize", event, filteredUi( ui ) );
			},
			stop: function( event, ui ) {
				options.height = $( this ).height();
				options.width = $( this ).width();
				$( this ).removeClass("ui-dialog-resizing");
				that._unblockFrames();
				that._trigger( "resizeStop", event, filteredUi( ui ) );
			}
		})
		.css( "position", position );
	},

	_minHeight: function() {
		var options = this.options;

		return options.height === "auto" ?
			options.minHeight :
			Math.min( options.minHeight, options.height );
	},

	_position: function() {
		// Need to show the dialog to get the actual offset in the position plugin
		var isVisible = this.uiDialog.is(":visible");
		if ( !isVisible ) {
			this.uiDialog.show();
		}
		this.uiDialog.position( this.options.position );
		if ( !isVisible ) {
			this.uiDialog.hide();
		}
	},

	_setOptions: function( options ) {
		var that = this,
			resize = false,
			resizableOptions = {};

		$.each( options, function( key, value ) {
			that._setOption( key, value );

			if ( key in sizeRelatedOptions ) {
				resize = true;
			}
			if ( key in resizableRelatedOptions ) {
				resizableOptions[ key ] = value;
			}
		});

		if ( resize ) {
			this._size();
			this._position();
		}
		if ( this.uiDialog.is(":data(ui-resizable)") ) {
			this.uiDialog.resizable( "option", resizableOptions );
		}
	},

	_setOption: function( key, value ) {
		/*jshint maxcomplexity:15*/
		var isDraggable, isResizable,
			uiDialog = this.uiDialog;

		if ( key === "dialogClass" ) {
			uiDialog
				.removeClass( this.options.dialogClass )
				.addClass( value );
		}

		if ( key === "disabled" ) {
			return;
		}

		this._super( key, value );

		if ( key === "appendTo" ) {
			this.uiDialog.appendTo( this._appendTo() );
		}

		if ( key === "buttons" ) {
			this._createButtons();
		}

		if ( key === "closeText" ) {
			this.uiDialogTitlebarClose.button({
				// Ensure that we always pass a string
				label: "" + value
			});
		}

		if ( key === "draggable" ) {
			isDraggable = uiDialog.is(":data(ui-draggable)");
			if ( isDraggable && !value ) {
				uiDialog.draggable("destroy");
			}

			if ( !isDraggable && value ) {
				this._makeDraggable();
			}
		}

		if ( key === "position" ) {
			this._position();
		}

		if ( key === "resizable" ) {
			// currently resizable, becoming non-resizable
			isResizable = uiDialog.is(":data(ui-resizable)");
			if ( isResizable && !value ) {
				uiDialog.resizable("destroy");
			}

			// currently resizable, changing handles
			if ( isResizable && typeof value === "string" ) {
				uiDialog.resizable( "option", "handles", value );
			}

			// currently non-resizable, becoming resizable
			if ( !isResizable && value !== false ) {
				this._makeResizable();
			}
		}

		if ( key === "title" ) {
			this._title( this.uiDialogTitlebar.find(".ui-dialog-title") );
		}
	},

	_size: function() {
		// If the user has resized the dialog, the .ui-dialog and .ui-dialog-content
		// divs will both have width and height set, so we need to reset them
		var nonContentHeight, minContentHeight, maxContentHeight,
			options = this.options;

		// Reset content sizing
		this.element.show().css({
			width: "auto",
			minHeight: 0,
			maxHeight: "none",
			height: 0
		});

		if ( options.minWidth > options.width ) {
			options.width = options.minWidth;
		}

		// reset wrapper sizing
		// determine the height of all the non-content elements
		nonContentHeight = this.uiDialog.css({
				height: "auto",
				width: options.width
			})
			.outerHeight();
		minContentHeight = Math.max( 0, options.minHeight - nonContentHeight );
		maxContentHeight = typeof options.maxHeight === "number" ?
			Math.max( 0, options.maxHeight - nonContentHeight ) :
			"none";

		if ( options.height === "auto" ) {
			this.element.css({
				minHeight: minContentHeight,
				maxHeight: maxContentHeight,
				height: "auto"
			});
		} else {
			this.element.height( Math.max( 0, options.height - nonContentHeight ) );
		}

		if (this.uiDialog.is(":data(ui-resizable)") ) {
			this.uiDialog.resizable( "option", "minHeight", this._minHeight() );
		}
	},

	_blockFrames: function() {
		this.iframeBlocks = this.document.find( "iframe" ).map(function() {
			var iframe = $( this );

			return $( "<div>" )
				.css({
					position: "absolute",
					width: iframe.outerWidth(),
					height: iframe.outerHeight()
				})
				.appendTo( iframe.parent() )
				.offset( iframe.offset() )[0];
		});
	},

	_unblockFrames: function() {
		if ( this.iframeBlocks ) {
			this.iframeBlocks.remove();
			delete this.iframeBlocks;
		}
	},

	_allowInteraction: function( event ) {
		if ( $( event.target ).closest(".ui-dialog").length ) {
			return true;
		}

		// TODO: Remove hack when datepicker implements
		// the .ui-front logic (#8989)
		return !!$( event.target ).closest(".ui-datepicker").length;
	},

	_createOverlay: function() {
		if ( !this.options.modal ) {
			return;
		}

		var that = this,
			widgetFullName = this.widgetFullName;
		if ( !$.ui.dialog.overlayInstances ) {
			// Prevent use of anchors and inputs.
			// We use a delay in case the overlay is created from an
			// event that we're going to be cancelling. (#2804)
			this._delay(function() {
				// Handle .dialog().dialog("close") (#4065)
				if ( $.ui.dialog.overlayInstances ) {
					this.document.bind( "focusin.dialog", function( event ) {
						if ( !that._allowInteraction( event ) ) {
							event.preventDefault();
							$(".ui-dialog:visible:last .ui-dialog-content")
								.data( widgetFullName )._focusTabbable();
						}
					});
				}
			});
		}

		this.overlay = $("<div>")
			.addClass("ui-widget-overlay ui-front")
			.appendTo( this._appendTo() );
		this._on( this.overlay, {
			mousedown: "_keepFocus"
		});
		$.ui.dialog.overlayInstances++;
	},

	_destroyOverlay: function() {
		if ( !this.options.modal ) {
			return;
		}

		if ( this.overlay ) {
			$.ui.dialog.overlayInstances--;

			if ( !$.ui.dialog.overlayInstances ) {
				this.document.unbind( "focusin.dialog" );
			}
			this.overlay.remove();
			this.overlay = null;
		}
	}
});

$.ui.dialog.overlayInstances = 0;

// DEPRECATED
if ( $.uiBackCompat !== false ) {
	// position option with array notation
	// just override with old implementation
	$.widget( "ui.dialog", $.ui.dialog, {
		_position: function() {
			var position = this.options.position,
				myAt = [],
				offset = [ 0, 0 ],
				isVisible;

			if ( position ) {
				if ( typeof position === "string" || (typeof position === "object" && "0" in position ) ) {
					myAt = position.split ? position.split(" ") : [ position[0], position[1] ];
					if ( myAt.length === 1 ) {
						myAt[1] = myAt[0];
					}

					$.each( [ "left", "top" ], function( i, offsetPosition ) {
						if ( +myAt[ i ] === myAt[ i ] ) {
							offset[ i ] = myAt[ i ];
							myAt[ i ] = offsetPosition;
						}
					});

					position = {
						my: myAt[0] + (offset[0] < 0 ? offset[0] : "+" + offset[0]) + " " +
							myAt[1] + (offset[1] < 0 ? offset[1] : "+" + offset[1]),
						at: myAt.join(" ")
					};
				}

				position = $.extend( {}, $.ui.dialog.prototype.options.position, position );
			} else {
				position = $.ui.dialog.prototype.options.position;
			}

			// need to show the dialog to get the actual offset in the position plugin
			isVisible = this.uiDialog.is(":visible");
			if ( !isVisible ) {
				this.uiDialog.show();
			}
			this.uiDialog.position( position );
			if ( !isVisible ) {
				this.uiDialog.hide();
			}
		}
	});
}

}( jQuery ) );

(function( $, undefined ) {

var rvertical = /up|down|vertical/,
	rpositivemotion = /up|left|vertical|horizontal/;

$.effects.effect.blind = function( o, done ) {
	// Create element
	var el = $( this ),
		props = [ "position", "top", "bottom", "left", "right", "height", "width" ],
		mode = $.effects.setMode( el, o.mode || "hide" ),
		direction = o.direction || "up",
		vertical = rvertical.test( direction ),
		ref = vertical ? "height" : "width",
		ref2 = vertical ? "top" : "left",
		motion = rpositivemotion.test( direction ),
		animation = {},
		show = mode === "show",
		wrapper, distance, margin;

	// if already wrapped, the wrapper's properties are my property. #6245
	if ( el.parent().is( ".ui-effects-wrapper" ) ) {
		$.effects.save( el.parent(), props );
	} else {
		$.effects.save( el, props );
	}
	el.show();
	wrapper = $.effects.createWrapper( el ).css({
		overflow: "hidden"
	});

	distance = wrapper[ ref ]();
	margin = parseFloat( wrapper.css( ref2 ) ) || 0;

	animation[ ref ] = show ? distance : 0;
	if ( !motion ) {
		el
			.css( vertical ? "bottom" : "right", 0 )
			.css( vertical ? "top" : "left", "auto" )
			.css({ position: "absolute" });

		animation[ ref2 ] = show ? margin : distance + margin;
	}

	// start at 0 if we are showing
	if ( show ) {
		wrapper.css( ref, 0 );
		if ( ! motion ) {
			wrapper.css( ref2, margin + distance );
		}
	}

	// Animate
	wrapper.animate( animation, {
		duration: o.duration,
		easing: o.easing,
		queue: false,
		complete: function() {
			if ( mode === "hide" ) {
				el.hide();
			}
			$.effects.restore( el, props );
			$.effects.removeWrapper( el );
			done();
		}
	});

};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.bounce = function( o, done ) {
	var el = $( this ),
		props = [ "position", "top", "bottom", "left", "right", "height", "width" ],

		// defaults:
		mode = $.effects.setMode( el, o.mode || "effect" ),
		hide = mode === "hide",
		show = mode === "show",
		direction = o.direction || "up",
		distance = o.distance,
		times = o.times || 5,

		// number of internal animations
		anims = times * 2 + ( show || hide ? 1 : 0 ),
		speed = o.duration / anims,
		easing = o.easing,

		// utility:
		ref = ( direction === "up" || direction === "down" ) ? "top" : "left",
		motion = ( direction === "up" || direction === "left" ),
		i,
		upAnim,
		downAnim,

		// we will need to re-assemble the queue to stack our animations in place
		queue = el.queue(),
		queuelen = queue.length;

	// Avoid touching opacity to prevent clearType and PNG issues in IE
	if ( show || hide ) {
		props.push( "opacity" );
	}

	$.effects.save( el, props );
	el.show();
	$.effects.createWrapper( el ); // Create Wrapper

	// default distance for the BIGGEST bounce is the outer Distance / 3
	if ( !distance ) {
		distance = el[ ref === "top" ? "outerHeight" : "outerWidth" ]() / 3;
	}

	if ( show ) {
		downAnim = { opacity: 1 };
		downAnim[ ref ] = 0;

		// if we are showing, force opacity 0 and set the initial position
		// then do the "first" animation
		el.css( "opacity", 0 )
			.css( ref, motion ? -distance * 2 : distance * 2 )
			.animate( downAnim, speed, easing );
	}

	// start at the smallest distance if we are hiding
	if ( hide ) {
		distance = distance / Math.pow( 2, times - 1 );
	}

	downAnim = {};
	downAnim[ ref ] = 0;
	// Bounces up/down/left/right then back to 0 -- times * 2 animations happen here
	for ( i = 0; i < times; i++ ) {
		upAnim = {};
		upAnim[ ref ] = ( motion ? "-=" : "+=" ) + distance;

		el.animate( upAnim, speed, easing )
			.animate( downAnim, speed, easing );

		distance = hide ? distance * 2 : distance / 2;
	}

	// Last Bounce when Hiding
	if ( hide ) {
		upAnim = { opacity: 0 };
		upAnim[ ref ] = ( motion ? "-=" : "+=" ) + distance;

		el.animate( upAnim, speed, easing );
	}

	el.queue(function() {
		if ( hide ) {
			el.hide();
		}
		$.effects.restore( el, props );
		$.effects.removeWrapper( el );
		done();
	});

	// inject all the animations we just queued to be first in line (after "inprogress")
	if ( queuelen > 1) {
		queue.splice.apply( queue,
			[ 1, 0 ].concat( queue.splice( queuelen, anims + 1 ) ) );
	}
	el.dequeue();

};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.clip = function( o, done ) {
	// Create element
	var el = $( this ),
		props = [ "position", "top", "bottom", "left", "right", "height", "width" ],
		mode = $.effects.setMode( el, o.mode || "hide" ),
		show = mode === "show",
		direction = o.direction || "vertical",
		vert = direction === "vertical",
		size = vert ? "height" : "width",
		position = vert ? "top" : "left",
		animation = {},
		wrapper, animate, distance;

	// Save & Show
	$.effects.save( el, props );
	el.show();

	// Create Wrapper
	wrapper = $.effects.createWrapper( el ).css({
		overflow: "hidden"
	});
	animate = ( el[0].tagName === "IMG" ) ? wrapper : el;
	distance = animate[ size ]();

	// Shift
	if ( show ) {
		animate.css( size, 0 );
		animate.css( position, distance / 2 );
	}

	// Create Animation Object:
	animation[ size ] = show ? distance : 0;
	animation[ position ] = show ? 0 : distance / 2;

	// Animate
	animate.animate( animation, {
		queue: false,
		duration: o.duration,
		easing: o.easing,
		complete: function() {
			if ( !show ) {
				el.hide();
			}
			$.effects.restore( el, props );
			$.effects.removeWrapper( el );
			done();
		}
	});

};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.drop = function( o, done ) {

	var el = $( this ),
		props = [ "position", "top", "bottom", "left", "right", "opacity", "height", "width" ],
		mode = $.effects.setMode( el, o.mode || "hide" ),
		show = mode === "show",
		direction = o.direction || "left",
		ref = ( direction === "up" || direction === "down" ) ? "top" : "left",
		motion = ( direction === "up" || direction === "left" ) ? "pos" : "neg",
		animation = {
			opacity: show ? 1 : 0
		},
		distance;

	// Adjust
	$.effects.save( el, props );
	el.show();
	$.effects.createWrapper( el );

	distance = o.distance || el[ ref === "top" ? "outerHeight": "outerWidth" ]( true ) / 2;

	if ( show ) {
		el
			.css( "opacity", 0 )
			.css( ref, motion === "pos" ? -distance : distance );
	}

	// Animation
	animation[ ref ] = ( show ?
		( motion === "pos" ? "+=" : "-=" ) :
		( motion === "pos" ? "-=" : "+=" ) ) +
		distance;

	// Animate
	el.animate( animation, {
		queue: false,
		duration: o.duration,
		easing: o.easing,
		complete: function() {
			if ( mode === "hide" ) {
				el.hide();
			}
			$.effects.restore( el, props );
			$.effects.removeWrapper( el );
			done();
		}
	});
};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.explode = function( o, done ) {

	var rows = o.pieces ? Math.round( Math.sqrt( o.pieces ) ) : 3,
		cells = rows,
		el = $( this ),
		mode = $.effects.setMode( el, o.mode || "hide" ),
		show = mode === "show",

		// show and then visibility:hidden the element before calculating offset
		offset = el.show().css( "visibility", "hidden" ).offset(),

		// width and height of a piece
		width = Math.ceil( el.outerWidth() / cells ),
		height = Math.ceil( el.outerHeight() / rows ),
		pieces = [],

		// loop
		i, j, left, top, mx, my;

	// children animate complete:
	function childComplete() {
		pieces.push( this );
		if ( pieces.length === rows * cells ) {
			animComplete();
		}
	}

	// clone the element for each row and cell.
	for( i = 0; i < rows ; i++ ) { // ===>
		top = offset.top + i * height;
		my = i - ( rows - 1 ) / 2 ;

		for( j = 0; j < cells ; j++ ) { // |||
			left = offset.left + j * width;
			mx = j - ( cells - 1 ) / 2 ;

			// Create a clone of the now hidden main element that will be absolute positioned
			// within a wrapper div off the -left and -top equal to size of our pieces
			el
				.clone()
				.appendTo( "body" )
				.wrap( "<div></div>" )
				.css({
					position: "absolute",
					visibility: "visible",
					left: -j * width,
					top: -i * height
				})

			// select the wrapper - make it overflow: hidden and absolute positioned based on
			// where the original was located +left and +top equal to the size of pieces
				.parent()
				.addClass( "ui-effects-explode" )
				.css({
					position: "absolute",
					overflow: "hidden",
					width: width,
					height: height,
					left: left + ( show ? mx * width : 0 ),
					top: top + ( show ? my * height : 0 ),
					opacity: show ? 0 : 1
				}).animate({
					left: left + ( show ? 0 : mx * width ),
					top: top + ( show ? 0 : my * height ),
					opacity: show ? 1 : 0
				}, o.duration || 500, o.easing, childComplete );
		}
	}

	function animComplete() {
		el.css({
			visibility: "visible"
		});
		$( pieces ).remove();
		if ( !show ) {
			el.hide();
		}
		done();
	}
};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.fade = function( o, done ) {
	var el = $( this ),
		mode = $.effects.setMode( el, o.mode || "toggle" );

	el.animate({
		opacity: mode
	}, {
		queue: false,
		duration: o.duration,
		easing: o.easing,
		complete: done
	});
};

})( jQuery );

(function( $, undefined ) {

$.effects.effect.fold = function( o, done ) {

	// Create element
	var el = $( this ),
		props = [ "position", "top", "bottom", "left", "right", "height", "width" ],
		mode = $.effects.setMode( el, o.mode || "hide" ),
		show = mode === "show",
		hide = mode === "hide",
		size = o.size || 15,
		percent = /([0-9]+)%/.exec( size ),
		horizFirst = !!o.horizFirst,
		widthFirst = show !== horizFirst,
		ref = widthFirst ? [ "width", "height" ] : [ "height", "width" ],
		duration = o.duration / 2,
		wrapper, distance,
		animation1 = {},
		animation2 = {};

	$.effects.save( el, props );
	el.show();

	// Create Wrapper
	wrapper = $.effects.createWrapper( el ).css({
		overflow: "hidden"
	});
	distance = widthFirst ?
		[ wrapper.width(), wrapper.height() ] :
		[ wrapper.height(), wrapper.width() ];

	if ( percent ) {
		size = parseInt( percent[ 1 ], 10 ) / 100 * distance[ hide ? 0 : 1 ];
	}
	if ( show ) {
		wrapper.css( horizFirst ? {
			height: 0,
			width: size
		} : {
			height: size,
			width: 0
		});
	}

	// Animation
	animation1[ ref[ 0 ] ] = show ? distance[ 0 ] : size;
	animation2[ ref[ 1 ] ] = show ? distance[ 1 ] : 0;

	// Animate
	wrapper
		.animate( animation1, duration, o.easing )
		.animate( animation2, duration, o.easing, function() {
			if ( hide ) {
				el.hide();
			}
			$.effects.restore( el, props );
			$.effects.removeWrapper( el );
			done();
		});

};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.highlight = function( o, done ) {
	var elem = $( this ),
		props = [ "backgroundImage", "backgroundColor", "opacity" ],
		mode = $.effects.setMode( elem, o.mode || "show" ),
		animation = {
			backgroundColor: elem.css( "backgroundColor" )
		};

	if (mode === "hide") {
		animation.opacity = 0;
	}

	$.effects.save( elem, props );

	elem
		.show()
		.css({
			backgroundImage: "none",
			backgroundColor: o.color || "#ffff99"
		})
		.animate( animation, {
			queue: false,
			duration: o.duration,
			easing: o.easing,
			complete: function() {
				if ( mode === "hide" ) {
					elem.hide();
				}
				$.effects.restore( elem, props );
				done();
			}
		});
};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.pulsate = function( o, done ) {
	var elem = $( this ),
		mode = $.effects.setMode( elem, o.mode || "show" ),
		show = mode === "show",
		hide = mode === "hide",
		showhide = ( show || mode === "hide" ),

		// showing or hiding leaves of the "last" animation
		anims = ( ( o.times || 5 ) * 2 ) + ( showhide ? 1 : 0 ),
		duration = o.duration / anims,
		animateTo = 0,
		queue = elem.queue(),
		queuelen = queue.length,
		i;

	if ( show || !elem.is(":visible")) {
		elem.css( "opacity", 0 ).show();
		animateTo = 1;
	}

	// anims - 1 opacity "toggles"
	for ( i = 1; i < anims; i++ ) {
		elem.animate({
			opacity: animateTo
		}, duration, o.easing );
		animateTo = 1 - animateTo;
	}

	elem.animate({
		opacity: animateTo
	}, duration, o.easing);

	elem.queue(function() {
		if ( hide ) {
			elem.hide();
		}
		done();
	});

	// We just queued up "anims" animations, we need to put them next in the queue
	if ( queuelen > 1 ) {
		queue.splice.apply( queue,
			[ 1, 0 ].concat( queue.splice( queuelen, anims + 1 ) ) );
	}
	elem.dequeue();
};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.puff = function( o, done ) {
	var elem = $( this ),
		mode = $.effects.setMode( elem, o.mode || "hide" ),
		hide = mode === "hide",
		percent = parseInt( o.percent, 10 ) || 150,
		factor = percent / 100,
		original = {
			height: elem.height(),
			width: elem.width(),
			outerHeight: elem.outerHeight(),
			outerWidth: elem.outerWidth()
		};

	$.extend( o, {
		effect: "scale",
		queue: false,
		fade: true,
		mode: mode,
		complete: done,
		percent: hide ? percent : 100,
		from: hide ?
			original :
			{
				height: original.height * factor,
				width: original.width * factor,
				outerHeight: original.outerHeight * factor,
				outerWidth: original.outerWidth * factor
			}
	});

	elem.effect( o );
};

$.effects.effect.scale = function( o, done ) {

	// Create element
	var el = $( this ),
		options = $.extend( true, {}, o ),
		mode = $.effects.setMode( el, o.mode || "effect" ),
		percent = parseInt( o.percent, 10 ) ||
			( parseInt( o.percent, 10 ) === 0 ? 0 : ( mode === "hide" ? 0 : 100 ) ),
		direction = o.direction || "both",
		origin = o.origin,
		original = {
			height: el.height(),
			width: el.width(),
			outerHeight: el.outerHeight(),
			outerWidth: el.outerWidth()
		},
		factor = {
			y: direction !== "horizontal" ? (percent / 100) : 1,
			x: direction !== "vertical" ? (percent / 100) : 1
		};

	// We are going to pass this effect to the size effect:
	options.effect = "size";
	options.queue = false;
	options.complete = done;

	// Set default origin and restore for show/hide
	if ( mode !== "effect" ) {
		options.origin = origin || ["middle","center"];
		options.restore = true;
	}

	options.from = o.from || ( mode === "show" ? {
		height: 0,
		width: 0,
		outerHeight: 0,
		outerWidth: 0
	} : original );
	options.to = {
		height: original.height * factor.y,
		width: original.width * factor.x,
		outerHeight: original.outerHeight * factor.y,
		outerWidth: original.outerWidth * factor.x
	};

	// Fade option to support puff
	if ( options.fade ) {
		if ( mode === "show" ) {
			options.from.opacity = 0;
			options.to.opacity = 1;
		}
		if ( mode === "hide" ) {
			options.from.opacity = 1;
			options.to.opacity = 0;
		}
	}

	// Animate
	el.effect( options );

};

$.effects.effect.size = function( o, done ) {

	// Create element
	var original, baseline, factor,
		el = $( this ),
		props0 = [ "position", "top", "bottom", "left", "right", "width", "height", "overflow", "opacity" ],

		// Always restore
		props1 = [ "position", "top", "bottom", "left", "right", "overflow", "opacity" ],

		// Copy for children
		props2 = [ "width", "height", "overflow" ],
		cProps = [ "fontSize" ],
		vProps = [ "borderTopWidth", "borderBottomWidth", "paddingTop", "paddingBottom" ],
		hProps = [ "borderLeftWidth", "borderRightWidth", "paddingLeft", "paddingRight" ],

		// Set options
		mode = $.effects.setMode( el, o.mode || "effect" ),
		restore = o.restore || mode !== "effect",
		scale = o.scale || "both",
		origin = o.origin || [ "middle", "center" ],
		position = el.css( "position" ),
		props = restore ? props0 : props1,
		zero = {
			height: 0,
			width: 0,
			outerHeight: 0,
			outerWidth: 0
		};

	if ( mode === "show" ) {
		el.show();
	}
	original = {
		height: el.height(),
		width: el.width(),
		outerHeight: el.outerHeight(),
		outerWidth: el.outerWidth()
	};

	if ( o.mode === "toggle" && mode === "show" ) {
		el.from = o.to || zero;
		el.to = o.from || original;
	} else {
		el.from = o.from || ( mode === "show" ? zero : original );
		el.to = o.to || ( mode === "hide" ? zero : original );
	}

	// Set scaling factor
	factor = {
		from: {
			y: el.from.height / original.height,
			x: el.from.width / original.width
		},
		to: {
			y: el.to.height / original.height,
			x: el.to.width / original.width
		}
	};

	// Scale the css box
	if ( scale === "box" || scale === "both" ) {

		// Vertical props scaling
		if ( factor.from.y !== factor.to.y ) {
			props = props.concat( vProps );
			el.from = $.effects.setTransition( el, vProps, factor.from.y, el.from );
			el.to = $.effects.setTransition( el, vProps, factor.to.y, el.to );
		}

		// Horizontal props scaling
		if ( factor.from.x !== factor.to.x ) {
			props = props.concat( hProps );
			el.from = $.effects.setTransition( el, hProps, factor.from.x, el.from );
			el.to = $.effects.setTransition( el, hProps, factor.to.x, el.to );
		}
	}

	// Scale the content
	if ( scale === "content" || scale === "both" ) {

		// Vertical props scaling
		if ( factor.from.y !== factor.to.y ) {
			props = props.concat( cProps ).concat( props2 );
			el.from = $.effects.setTransition( el, cProps, factor.from.y, el.from );
			el.to = $.effects.setTransition( el, cProps, factor.to.y, el.to );
		}
	}

	$.effects.save( el, props );
	el.show();
	$.effects.createWrapper( el );
	el.css( "overflow", "hidden" ).css( el.from );

	// Adjust
	if (origin) { // Calculate baseline shifts
		baseline = $.effects.getBaseline( origin, original );
		el.from.top = ( original.outerHeight - el.outerHeight() ) * baseline.y;
		el.from.left = ( original.outerWidth - el.outerWidth() ) * baseline.x;
		el.to.top = ( original.outerHeight - el.to.outerHeight ) * baseline.y;
		el.to.left = ( original.outerWidth - el.to.outerWidth ) * baseline.x;
	}
	el.css( el.from ); // set top & left

	// Animate
	if ( scale === "content" || scale === "both" ) { // Scale the children

		// Add margins/font-size
		vProps = vProps.concat([ "marginTop", "marginBottom" ]).concat(cProps);
		hProps = hProps.concat([ "marginLeft", "marginRight" ]);
		props2 = props0.concat(vProps).concat(hProps);

		el.find( "*[width]" ).each( function(){
			var child = $( this ),
				c_original = {
					height: child.height(),
					width: child.width(),
					outerHeight: child.outerHeight(),
					outerWidth: child.outerWidth()
				};
			if (restore) {
				$.effects.save(child, props2);
			}

			child.from = {
				height: c_original.height * factor.from.y,
				width: c_original.width * factor.from.x,
				outerHeight: c_original.outerHeight * factor.from.y,
				outerWidth: c_original.outerWidth * factor.from.x
			};
			child.to = {
				height: c_original.height * factor.to.y,
				width: c_original.width * factor.to.x,
				outerHeight: c_original.height * factor.to.y,
				outerWidth: c_original.width * factor.to.x
			};

			// Vertical props scaling
			if ( factor.from.y !== factor.to.y ) {
				child.from = $.effects.setTransition( child, vProps, factor.from.y, child.from );
				child.to = $.effects.setTransition( child, vProps, factor.to.y, child.to );
			}

			// Horizontal props scaling
			if ( factor.from.x !== factor.to.x ) {
				child.from = $.effects.setTransition( child, hProps, factor.from.x, child.from );
				child.to = $.effects.setTransition( child, hProps, factor.to.x, child.to );
			}

			// Animate children
			child.css( child.from );
			child.animate( child.to, o.duration, o.easing, function() {

				// Restore children
				if ( restore ) {
					$.effects.restore( child, props2 );
				}
			});
		});
	}

	// Animate
	el.animate( el.to, {
		queue: false,
		duration: o.duration,
		easing: o.easing,
		complete: function() {
			if ( el.to.opacity === 0 ) {
				el.css( "opacity", el.from.opacity );
			}
			if( mode === "hide" ) {
				el.hide();
			}
			$.effects.restore( el, props );
			if ( !restore ) {

				// we need to calculate our new positioning based on the scaling
				if ( position === "static" ) {
					el.css({
						position: "relative",
						top: el.to.top,
						left: el.to.left
					});
				} else {
					$.each([ "top", "left" ], function( idx, pos ) {
						el.css( pos, function( _, str ) {
							var val = parseInt( str, 10 ),
								toRef = idx ? el.to.left : el.to.top;

							// if original was "auto", recalculate the new value from wrapper
							if ( str === "auto" ) {
								return toRef + "px";
							}

							return val + toRef + "px";
						});
					});
				}
			}

			$.effects.removeWrapper( el );
			done();
		}
	});

};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.shake = function( o, done ) {

	var el = $( this ),
		props = [ "position", "top", "bottom", "left", "right", "height", "width" ],
		mode = $.effects.setMode( el, o.mode || "effect" ),
		direction = o.direction || "left",
		distance = o.distance || 20,
		times = o.times || 3,
		anims = times * 2 + 1,
		speed = Math.round(o.duration/anims),
		ref = (direction === "up" || direction === "down") ? "top" : "left",
		positiveMotion = (direction === "up" || direction === "left"),
		animation = {},
		animation1 = {},
		animation2 = {},
		i,

		// we will need to re-assemble the queue to stack our animations in place
		queue = el.queue(),
		queuelen = queue.length;

	$.effects.save( el, props );
	el.show();
	$.effects.createWrapper( el );

	// Animation
	animation[ ref ] = ( positiveMotion ? "-=" : "+=" ) + distance;
	animation1[ ref ] = ( positiveMotion ? "+=" : "-=" ) + distance * 2;
	animation2[ ref ] = ( positiveMotion ? "-=" : "+=" ) + distance * 2;

	// Animate
	el.animate( animation, speed, o.easing );

	// Shakes
	for ( i = 1; i < times; i++ ) {
		el.animate( animation1, speed, o.easing ).animate( animation2, speed, o.easing );
	}
	el
		.animate( animation1, speed, o.easing )
		.animate( animation, speed / 2, o.easing )
		.queue(function() {
			if ( mode === "hide" ) {
				el.hide();
			}
			$.effects.restore( el, props );
			$.effects.removeWrapper( el );
			done();
		});

	// inject all the animations we just queued to be first in line (after "inprogress")
	if ( queuelen > 1) {
		queue.splice.apply( queue,
			[ 1, 0 ].concat( queue.splice( queuelen, anims + 1 ) ) );
	}
	el.dequeue();

};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.slide = function( o, done ) {

	// Create element
	var el = $( this ),
		props = [ "position", "top", "bottom", "left", "right", "width", "height" ],
		mode = $.effects.setMode( el, o.mode || "show" ),
		show = mode === "show",
		direction = o.direction || "left",
		ref = (direction === "up" || direction === "down") ? "top" : "left",
		positiveMotion = (direction === "up" || direction === "left"),
		distance,
		animation = {};

	// Adjust
	$.effects.save( el, props );
	el.show();
	distance = o.distance || el[ ref === "top" ? "outerHeight" : "outerWidth" ]( true );

	$.effects.createWrapper( el ).css({
		overflow: "hidden"
	});

	if ( show ) {
		el.css( ref, positiveMotion ? (isNaN(distance) ? "-" + distance : -distance) : distance );
	}

	// Animation
	animation[ ref ] = ( show ?
		( positiveMotion ? "+=" : "-=") :
		( positiveMotion ? "-=" : "+=")) +
		distance;

	// Animate
	el.animate( animation, {
		queue: false,
		duration: o.duration,
		easing: o.easing,
		complete: function() {
			if ( mode === "hide" ) {
				el.hide();
			}
			$.effects.restore( el, props );
			$.effects.removeWrapper( el );
			done();
		}
	});
};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.transfer = function( o, done ) {
	var elem = $( this ),
		target = $( o.to ),
		targetFixed = target.css( "position" ) === "fixed",
		body = $("body"),
		fixTop = targetFixed ? body.scrollTop() : 0,
		fixLeft = targetFixed ? body.scrollLeft() : 0,
		endPosition = target.offset(),
		animation = {
			top: endPosition.top - fixTop ,
			left: endPosition.left - fixLeft ,
			height: target.innerHeight(),
			width: target.innerWidth()
		},
		startPosition = elem.offset(),
		transfer = $( "<div class='ui-effects-transfer'></div>" )
			.appendTo( document.body )
			.addClass( o.className )
			.css({
				top: startPosition.top - fixTop ,
				left: startPosition.left - fixLeft ,
				height: elem.innerHeight(),
				width: elem.innerWidth(),
				position: targetFixed ? "fixed" : "absolute"
			})
			.animate( animation, o.duration, o.easing, function() {
				transfer.remove();
				done();
			});
};

})(jQuery);

(function( $, undefined ) {

$.widget( "ui.menu", {
	version: "1.10.3",
	defaultElement: "<ul>",
	delay: 300,
	options: {
		icons: {
			submenu: "ui-icon-carat-1-e"
		},
		menus: "ul",
		position: {
			my: "left top",
			at: "right top"
		},
		role: "menu",

		// callbacks
		blur: null,
		focus: null,
		select: null
	},

	_create: function() {
		this.activeMenu = this.element;
		// flag used to prevent firing of the click handler
		// as the event bubbles up through nested menus
		this.mouseHandled = false;
		this.element
			.uniqueId()
			.addClass( "ui-menu ui-widget ui-widget-content ui-corner-all" )
			.toggleClass( "ui-menu-icons", !!this.element.find( ".ui-icon" ).length )
			.attr({
				role: this.options.role,
				tabIndex: 0
			})
			// need to catch all clicks on disabled menu
			// not possible through _on
			.bind( "click" + this.eventNamespace, $.proxy(function( event ) {
				if ( this.options.disabled ) {
					event.preventDefault();
				}
			}, this ));

		if ( this.options.disabled ) {
			this.element
				.addClass( "ui-state-disabled" )
				.attr( "aria-disabled", "true" );
		}

		this._on({
			// Prevent focus from sticking to links inside menu after clicking
			// them (focus should always stay on UL during navigation).
			"mousedown .ui-menu-item > a": function( event ) {
				event.preventDefault();
			},
			"click .ui-state-disabled > a": function( event ) {
				event.preventDefault();
			},
			"click .ui-menu-item:has(a)": function( event ) {
				var target = $( event.target ).closest( ".ui-menu-item" );
				if ( !this.mouseHandled && target.not( ".ui-state-disabled" ).length ) {
					this.mouseHandled = true;

					this.select( event );
					// Open submenu on click
					if ( target.has( ".ui-menu" ).length ) {
						this.expand( event );
					} else if ( !this.element.is( ":focus" ) ) {
						// Redirect focus to the menu
						this.element.trigger( "focus", [ true ] );

						// If the active item is on the top level, let it stay active.
						// Otherwise, blur the active item since it is no longer visible.
						if ( this.active && this.active.parents( ".ui-menu" ).length === 1 ) {
							clearTimeout( this.timer );
						}
					}
				}
			},
			"mouseenter .ui-menu-item": function( event ) {
				var target = $( event.currentTarget );
				// Remove ui-state-active class from siblings of the newly focused menu item
				// to avoid a jump caused by adjacent elements both having a class with a border
				target.siblings().children( ".ui-state-active" ).removeClass( "ui-state-active" );
				this.focus( event, target );
			},
			mouseleave: "collapseAll",
			"mouseleave .ui-menu": "collapseAll",
			focus: function( event, keepActiveItem ) {
				// If there's already an active item, keep it active
				// If not, activate the first item
				var item = this.active || this.element.children( ".ui-menu-item" ).eq( 0 );

				if ( !keepActiveItem ) {
					this.focus( event, item );
				}
			},
			blur: function( event ) {
				this._delay(function() {
					if ( !$.contains( this.element[0], this.document[0].activeElement ) ) {
						this.collapseAll( event );
					}
				});
			},
			keydown: "_keydown"
		});

		this.refresh();

		// Clicks outside of a menu collapse any open menus
		this._on( this.document, {
			click: function( event ) {
				if ( !$( event.target ).closest( ".ui-menu" ).length ) {
					this.collapseAll( event );
				}

				// Reset the mouseHandled flag
				this.mouseHandled = false;
			}
		});
	},

	_destroy: function() {
		// Destroy (sub)menus
		this.element
			.removeAttr( "aria-activedescendant" )
			.find( ".ui-menu" ).addBack()
				.removeClass( "ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons" )
				.removeAttr( "role" )
				.removeAttr( "tabIndex" )
				.removeAttr( "aria-labelledby" )
				.removeAttr( "aria-expanded" )
				.removeAttr( "aria-hidden" )
				.removeAttr( "aria-disabled" )
				.removeUniqueId()
				.show();

		// Destroy menu items
		this.element.find( ".ui-menu-item" )
			.removeClass( "ui-menu-item" )
			.removeAttr( "role" )
			.removeAttr( "aria-disabled" )
			.children( "a" )
				.removeUniqueId()
				.removeClass( "ui-corner-all ui-state-hover" )
				.removeAttr( "tabIndex" )
				.removeAttr( "role" )
				.removeAttr( "aria-haspopup" )
				.children().each( function() {
					var elem = $( this );
					if ( elem.data( "ui-menu-submenu-carat" ) ) {
						elem.remove();
					}
				});

		// Destroy menu dividers
		this.element.find( ".ui-menu-divider" ).removeClass( "ui-menu-divider ui-widget-content" );
	},

	_keydown: function( event ) {
		/*jshint maxcomplexity:20*/
		var match, prev, character, skip, regex,
			preventDefault = true;

		function escape( value ) {
			return value.replace( /[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&" );
		}

		switch ( event.keyCode ) {
		case $.ui.keyCode.PAGE_UP:
			this.previousPage( event );
			break;
		case $.ui.keyCode.PAGE_DOWN:
			this.nextPage( event );
			break;
		case $.ui.keyCode.HOME:
			this._move( "first", "first", event );
			break;
		case $.ui.keyCode.END:
			this._move( "last", "last", event );
			break;
		case $.ui.keyCode.UP:
			this.previous( event );
			break;
		case $.ui.keyCode.DOWN:
			this.next( event );
			break;
		case $.ui.keyCode.LEFT:
			this.collapse( event );
			break;
		case $.ui.keyCode.RIGHT:
			if ( this.active && !this.active.is( ".ui-state-disabled" ) ) {
				this.expand( event );
			}
			break;
		case $.ui.keyCode.ENTER:
		case $.ui.keyCode.SPACE:
			this._activate( event );
			break;
		case $.ui.keyCode.ESCAPE:
			this.collapse( event );
			break;
		default:
			preventDefault = false;
			prev = this.previousFilter || "";
			character = String.fromCharCode( event.keyCode );
			skip = false;

			clearTimeout( this.filterTimer );

			if ( character === prev ) {
				skip = true;
			} else {
				character = prev + character;
			}

			regex = new RegExp( "^" + escape( character ), "i" );
			match = this.activeMenu.children( ".ui-menu-item" ).filter(function() {
				return regex.test( $( this ).children( "a" ).text() );
			});
			match = skip && match.index( this.active.next() ) !== -1 ?
				this.active.nextAll( ".ui-menu-item" ) :
				match;

			// If no matches on the current filter, reset to the last character pressed
			// to move down the menu to the first item that starts with that character
			if ( !match.length ) {
				character = String.fromCharCode( event.keyCode );
				regex = new RegExp( "^" + escape( character ), "i" );
				match = this.activeMenu.children( ".ui-menu-item" ).filter(function() {
					return regex.test( $( this ).children( "a" ).text() );
				});
			}

			if ( match.length ) {
				this.focus( event, match );
				if ( match.length > 1 ) {
					this.previousFilter = character;
					this.filterTimer = this._delay(function() {
						delete this.previousFilter;
					}, 1000 );
				} else {
					delete this.previousFilter;
				}
			} else {
				delete this.previousFilter;
			}
		}

		if ( preventDefault ) {
			event.preventDefault();
		}
	},

	_activate: function( event ) {
		if ( !this.active.is( ".ui-state-disabled" ) ) {
			if ( this.active.children( "a[aria-haspopup='true']" ).length ) {
				this.expand( event );
			} else {
				this.select( event );
			}
		}
	},

	refresh: function() {
		var menus,
			icon = this.options.icons.submenu,
			submenus = this.element.find( this.options.menus );

		// Initialize nested menus
		submenus.filter( ":not(.ui-menu)" )
			.addClass( "ui-menu ui-widget ui-widget-content ui-corner-all" )
			.hide()
			.attr({
				role: this.options.role,
				"aria-hidden": "true",
				"aria-expanded": "false"
			})
			.each(function() {
				var menu = $( this ),
					item = menu.prev( "a" ),
					submenuCarat = $( "<span>" )
						.addClass( "ui-menu-icon ui-icon " + icon )
						.data( "ui-menu-submenu-carat", true );

				item
					.attr( "aria-haspopup", "true" )
					.prepend( submenuCarat );
				menu.attr( "aria-labelledby", item.attr( "id" ) );
			});

		menus = submenus.add( this.element );

		// Don't refresh list items that are already adapted
		menus.children( ":not(.ui-menu-item):has(a)" )
			.addClass( "ui-menu-item" )
			.attr( "role", "presentation" )
			.children( "a" )
				.uniqueId()
				.addClass( "ui-corner-all" )
				.attr({
					tabIndex: -1,
					role: this._itemRole()
				});

		// Initialize unlinked menu-items containing spaces and/or dashes only as dividers
		menus.children( ":not(.ui-menu-item)" ).each(function() {
			var item = $( this );
			// hyphen, em dash, en dash
			if ( !/[^\-\u2014\u2013\s]/.test( item.text() ) ) {
				item.addClass( "ui-widget-content ui-menu-divider" );
			}
		});

		// Add aria-disabled attribute to any disabled menu item
		menus.children( ".ui-state-disabled" ).attr( "aria-disabled", "true" );

		// If the active item has been removed, blur the menu
		if ( this.active && !$.contains( this.element[ 0 ], this.active[ 0 ] ) ) {
			this.blur();
		}
	},

	_itemRole: function() {
		return {
			menu: "menuitem",
			listbox: "option"
		}[ this.options.role ];
	},

	_setOption: function( key, value ) {
		if ( key === "icons" ) {
			this.element.find( ".ui-menu-icon" )
				.removeClass( this.options.icons.submenu )
				.addClass( value.submenu );
		}
		this._super( key, value );
	},

	focus: function( event, item ) {
		var nested, focused;
		this.blur( event, event && event.type === "focus" );

		this._scrollIntoView( item );

		this.active = item.first();
		focused = this.active.children( "a" ).addClass( "ui-state-focus" );
		// Only update aria-activedescendant if there's a role
		// otherwise we assume focus is managed elsewhere
		if ( this.options.role ) {
			this.element.attr( "aria-activedescendant", focused.attr( "id" ) );
		}

		// Highlight active parent menu item, if any
		this.active
			.parent()
			.closest( ".ui-menu-item" )
			.children( "a:first" )
			.addClass( "ui-state-active" );

		if ( event && event.type === "keydown" ) {
			this._close();
		} else {
			this.timer = this._delay(function() {
				this._close();
			}, this.delay );
		}

		nested = item.children( ".ui-menu" );
		if ( nested.length && ( /^mouse/.test( event.type ) ) ) {
			this._startOpening(nested);
		}
		this.activeMenu = item.parent();

		this._trigger( "focus", event, { item: item } );
	},

	_scrollIntoView: function( item ) {
		var borderTop, paddingTop, offset, scroll, elementHeight, itemHeight;
		if ( this._hasScroll() ) {
			borderTop = parseFloat( $.css( this.activeMenu[0], "borderTopWidth" ) ) || 0;
			paddingTop = parseFloat( $.css( this.activeMenu[0], "paddingTop" ) ) || 0;
			offset = item.offset().top - this.activeMenu.offset().top - borderTop - paddingTop;
			scroll = this.activeMenu.scrollTop();
			elementHeight = this.activeMenu.height();
			itemHeight = item.height();

			if ( offset < 0 ) {
				this.activeMenu.scrollTop( scroll + offset );
			} else if ( offset + itemHeight > elementHeight ) {
				this.activeMenu.scrollTop( scroll + offset - elementHeight + itemHeight );
			}
		}
	},

	blur: function( event, fromFocus ) {
		if ( !fromFocus ) {
			clearTimeout( this.timer );
		}

		if ( !this.active ) {
			return;
		}

		this.active.children( "a" ).removeClass( "ui-state-focus" );
		this.active = null;

		this._trigger( "blur", event, { item: this.active } );
	},

	_startOpening: function( submenu ) {
		clearTimeout( this.timer );

		// Don't open if already open fixes a Firefox bug that caused a .5 pixel
		// shift in the submenu position when mousing over the carat icon
		if ( submenu.attr( "aria-hidden" ) !== "true" ) {
			return;
		}

		this.timer = this._delay(function() {
			this._close();
			this._open( submenu );
		}, this.delay );
	},

	_open: function( submenu ) {
		var position = $.extend({
			of: this.active
		}, this.options.position );

		clearTimeout( this.timer );
		this.element.find( ".ui-menu" ).not( submenu.parents( ".ui-menu" ) )
			.hide()
			.attr( "aria-hidden", "true" );

		submenu
			.show()
			.removeAttr( "aria-hidden" )
			.attr( "aria-expanded", "true" )
			.position( position );
	},

	collapseAll: function( event, all ) {
		clearTimeout( this.timer );
		this.timer = this._delay(function() {
			// If we were passed an event, look for the submenu that contains the event
			var currentMenu = all ? this.element :
				$( event && event.target ).closest( this.element.find( ".ui-menu" ) );

			// If we found no valid submenu ancestor, use the main menu to close all sub menus anyway
			if ( !currentMenu.length ) {
				currentMenu = this.element;
			}

			this._close( currentMenu );

			this.blur( event );
			this.activeMenu = currentMenu;
		}, this.delay );
	},

	// With no arguments, closes the currently active menu - if nothing is active
	// it closes all menus.  If passed an argument, it will search for menus BELOW
	_close: function( startMenu ) {
		if ( !startMenu ) {
			startMenu = this.active ? this.active.parent() : this.element;
		}

		startMenu
			.find( ".ui-menu" )
				.hide()
				.attr( "aria-hidden", "true" )
				.attr( "aria-expanded", "false" )
			.end()
			.find( "a.ui-state-active" )
				.removeClass( "ui-state-active" );
	},

	collapse: function( event ) {
		var newItem = this.active &&
			this.active.parent().closest( ".ui-menu-item", this.element );
		if ( newItem && newItem.length ) {
			this._close();
			this.focus( event, newItem );
		}
	},

	expand: function( event ) {
		var newItem = this.active &&
			this.active
				.children( ".ui-menu " )
				.children( ".ui-menu-item" )
				.first();

		if ( newItem && newItem.length ) {
			this._open( newItem.parent() );

			// Delay so Firefox will not hide activedescendant change in expanding submenu from AT
			this._delay(function() {
				this.focus( event, newItem );
			});
		}
	},

	next: function( event ) {
		this._move( "next", "first", event );
	},

	previous: function( event ) {
		this._move( "prev", "last", event );
	},

	isFirstItem: function() {
		return this.active && !this.active.prevAll( ".ui-menu-item" ).length;
	},

	isLastItem: function() {
		return this.active && !this.active.nextAll( ".ui-menu-item" ).length;
	},

	_move: function( direction, filter, event ) {
		var next;
		if ( this.active ) {
			if ( direction === "first" || direction === "last" ) {
				next = this.active
					[ direction === "first" ? "prevAll" : "nextAll" ]( ".ui-menu-item" )
					.eq( -1 );
			} else {
				next = this.active
					[ direction + "All" ]( ".ui-menu-item" )
					.eq( 0 );
			}
		}
		if ( !next || !next.length || !this.active ) {
			next = this.activeMenu.children( ".ui-menu-item" )[ filter ]();
		}

		this.focus( event, next );
	},

	nextPage: function( event ) {
		var item, base, height;

		if ( !this.active ) {
			this.next( event );
			return;
		}
		if ( this.isLastItem() ) {
			return;
		}
		if ( this._hasScroll() ) {
			base = this.active.offset().top;
			height = this.element.height();
			this.active.nextAll( ".ui-menu-item" ).each(function() {
				item = $( this );
				return item.offset().top - base - height < 0;
			});

			this.focus( event, item );
		} else {
			this.focus( event, this.activeMenu.children( ".ui-menu-item" )
				[ !this.active ? "first" : "last" ]() );
		}
	},

	previousPage: function( event ) {
		var item, base, height;
		if ( !this.active ) {
			this.next( event );
			return;
		}
		if ( this.isFirstItem() ) {
			return;
		}
		if ( this._hasScroll() ) {
			base = this.active.offset().top;
			height = this.element.height();
			this.active.prevAll( ".ui-menu-item" ).each(function() {
				item = $( this );
				return item.offset().top - base + height > 0;
			});

			this.focus( event, item );
		} else {
			this.focus( event, this.activeMenu.children( ".ui-menu-item" ).first() );
		}
	},

	_hasScroll: function() {
		return this.element.outerHeight() < this.element.prop( "scrollHeight" );
	},

	select: function( event ) {
		// TODO: It should never be possible to not have an active item at this
		// point, but the tests don't trigger mouseenter before click.
		this.active = this.active || $( event.target ).closest( ".ui-menu-item" );
		var ui = { item: this.active };
		if ( !this.active.has( ".ui-menu" ).length ) {
			this.collapseAll( event, true );
		}
		this._trigger( "select", event, ui );
	}
});

}( jQuery ));

(function( $, undefined ) {

$.ui = $.ui || {};

var cachedScrollbarWidth,
	max = Math.max,
	abs = Math.abs,
	round = Math.round,
	rhorizontal = /left|center|right/,
	rvertical = /top|center|bottom/,
	roffset = /[\+\-]\d+(\.[\d]+)?%?/,
	rposition = /^\w+/,
	rpercent = /%$/,
	_position = $.fn.position;

function getOffsets( offsets, width, height ) {
	return [
		parseFloat( offsets[ 0 ] ) * ( rpercent.test( offsets[ 0 ] ) ? width / 100 : 1 ),
		parseFloat( offsets[ 1 ] ) * ( rpercent.test( offsets[ 1 ] ) ? height / 100 : 1 )
	];
}

function parseCss( element, property ) {
	return parseInt( $.css( element, property ), 10 ) || 0;
}

function getDimensions( elem ) {
	var raw = elem[0];
	if ( raw.nodeType === 9 ) {
		return {
			width: elem.width(),
			height: elem.height(),
			offset: { top: 0, left: 0 }
		};
	}
	if ( $.isWindow( raw ) ) {
		return {
			width: elem.width(),
			height: elem.height(),
			offset: { top: elem.scrollTop(), left: elem.scrollLeft() }
		};
	}
	if ( raw.preventDefault ) {
		return {
			width: 0,
			height: 0,
			offset: { top: raw.pageY, left: raw.pageX }
		};
	}
	return {
		width: elem.outerWidth(),
		height: elem.outerHeight(),
		offset: elem.offset()
	};
}

$.position = {
	scrollbarWidth: function() {
		if ( cachedScrollbarWidth !== undefined ) {
			return cachedScrollbarWidth;
		}
		var w1, w2,
			div = $( "<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>" ),
			innerDiv = div.children()[0];

		$( "body" ).append( div );
		w1 = innerDiv.offsetWidth;
		div.css( "overflow", "scroll" );

		w2 = innerDiv.offsetWidth;

		if ( w1 === w2 ) {
			w2 = div[0].clientWidth;
		}

		div.remove();

		return (cachedScrollbarWidth = w1 - w2);
	},
	getScrollInfo: function( within ) {
		var overflowX = within.isWindow ? "" : within.element.css( "overflow-x" ),
			overflowY = within.isWindow ? "" : within.element.css( "overflow-y" ),
			hasOverflowX = overflowX === "scroll" ||
				( overflowX === "auto" && within.width < within.element[0].scrollWidth ),
			hasOverflowY = overflowY === "scroll" ||
				( overflowY === "auto" && within.height < within.element[0].scrollHeight );
		return {
			width: hasOverflowY ? $.position.scrollbarWidth() : 0,
			height: hasOverflowX ? $.position.scrollbarWidth() : 0
		};
	},
	getWithinInfo: function( element ) {
		var withinElement = $( element || window ),
			isWindow = $.isWindow( withinElement[0] );
		return {
			element: withinElement,
			isWindow: isWindow,
			offset: withinElement.offset() || { left: 0, top: 0 },
			scrollLeft: withinElement.scrollLeft(),
			scrollTop: withinElement.scrollTop(),
			width: isWindow ? withinElement.width() : withinElement.outerWidth(),
			height: isWindow ? withinElement.height() : withinElement.outerHeight()
		};
	}
};

$.fn.position = function( options ) {
	if ( !options || !options.of ) {
		return _position.apply( this, arguments );
	}

	// make a copy, we don't want to modify arguments
	options = $.extend( {}, options );

	var atOffset, targetWidth, targetHeight, targetOffset, basePosition, dimensions,
		target = $( options.of ),
		within = $.position.getWithinInfo( options.within ),
		scrollInfo = $.position.getScrollInfo( within ),
		collision = ( options.collision || "flip" ).split( " " ),
		offsets = {};

	dimensions = getDimensions( target );
	if ( target[0].preventDefault ) {
		// force left top to allow flipping
		options.at = "left top";
	}
	targetWidth = dimensions.width;
	targetHeight = dimensions.height;
	targetOffset = dimensions.offset;
	// clone to reuse original targetOffset later
	basePosition = $.extend( {}, targetOffset );

	// force my and at to have valid horizontal and vertical positions
	// if a value is missing or invalid, it will be converted to center
	$.each( [ "my", "at" ], function() {
		var pos = ( options[ this ] || "" ).split( " " ),
			horizontalOffset,
			verticalOffset;

		if ( pos.length === 1) {
			pos = rhorizontal.test( pos[ 0 ] ) ?
				pos.concat( [ "center" ] ) :
				rvertical.test( pos[ 0 ] ) ?
					[ "center" ].concat( pos ) :
					[ "center", "center" ];
		}
		pos[ 0 ] = rhorizontal.test( pos[ 0 ] ) ? pos[ 0 ] : "center";
		pos[ 1 ] = rvertical.test( pos[ 1 ] ) ? pos[ 1 ] : "center";

		// calculate offsets
		horizontalOffset = roffset.exec( pos[ 0 ] );
		verticalOffset = roffset.exec( pos[ 1 ] );
		offsets[ this ] = [
			horizontalOffset ? horizontalOffset[ 0 ] : 0,
			verticalOffset ? verticalOffset[ 0 ] : 0
		];

		// reduce to just the positions without the offsets
		options[ this ] = [
			rposition.exec( pos[ 0 ] )[ 0 ],
			rposition.exec( pos[ 1 ] )[ 0 ]
		];
	});

	// normalize collision option
	if ( collision.length === 1 ) {
		collision[ 1 ] = collision[ 0 ];
	}

	if ( options.at[ 0 ] === "right" ) {
		basePosition.left += targetWidth;
	} else if ( options.at[ 0 ] === "center" ) {
		basePosition.left += targetWidth / 2;
	}

	if ( options.at[ 1 ] === "bottom" ) {
		basePosition.top += targetHeight;
	} else if ( options.at[ 1 ] === "center" ) {
		basePosition.top += targetHeight / 2;
	}

	atOffset = getOffsets( offsets.at, targetWidth, targetHeight );
	basePosition.left += atOffset[ 0 ];
	basePosition.top += atOffset[ 1 ];

	return this.each(function() {
		var collisionPosition, using,
			elem = $( this ),
			elemWidth = elem.outerWidth(),
			elemHeight = elem.outerHeight(),
			marginLeft = parseCss( this, "marginLeft" ),
			marginTop = parseCss( this, "marginTop" ),
			collisionWidth = elemWidth + marginLeft + parseCss( this, "marginRight" ) + scrollInfo.width,
			collisionHeight = elemHeight + marginTop + parseCss( this, "marginBottom" ) + scrollInfo.height,
			position = $.extend( {}, basePosition ),
			myOffset = getOffsets( offsets.my, elem.outerWidth(), elem.outerHeight() );

		if ( options.my[ 0 ] === "right" ) {
			position.left -= elemWidth;
		} else if ( options.my[ 0 ] === "center" ) {
			position.left -= elemWidth / 2;
		}

		if ( options.my[ 1 ] === "bottom" ) {
			position.top -= elemHeight;
		} else if ( options.my[ 1 ] === "center" ) {
			position.top -= elemHeight / 2;
		}

		position.left += myOffset[ 0 ];
		position.top += myOffset[ 1 ];

		// if the browser doesn't support fractions, then round for consistent results
		if ( !$.support.offsetFractions ) {
			position.left = round( position.left );
			position.top = round( position.top );
		}

		collisionPosition = {
			marginLeft: marginLeft,
			marginTop: marginTop
		};

		$.each( [ "left", "top" ], function( i, dir ) {
			if ( $.ui.position[ collision[ i ] ] ) {
				$.ui.position[ collision[ i ] ][ dir ]( position, {
					targetWidth: targetWidth,
					targetHeight: targetHeight,
					elemWidth: elemWidth,
					elemHeight: elemHeight,
					collisionPosition: collisionPosition,
					collisionWidth: collisionWidth,
					collisionHeight: collisionHeight,
					offset: [ atOffset[ 0 ] + myOffset[ 0 ], atOffset [ 1 ] + myOffset[ 1 ] ],
					my: options.my,
					at: options.at,
					within: within,
					elem : elem
				});
			}
		});

		if ( options.using ) {
			// adds feedback as second argument to using callback, if present
			using = function( props ) {
				var left = targetOffset.left - position.left,
					right = left + targetWidth - elemWidth,
					top = targetOffset.top - position.top,
					bottom = top + targetHeight - elemHeight,
					feedback = {
						target: {
							element: target,
							left: targetOffset.left,
							top: targetOffset.top,
							width: targetWidth,
							height: targetHeight
						},
						element: {
							element: elem,
							left: position.left,
							top: position.top,
							width: elemWidth,
							height: elemHeight
						},
						horizontal: right < 0 ? "left" : left > 0 ? "right" : "center",
						vertical: bottom < 0 ? "top" : top > 0 ? "bottom" : "middle"
					};
				if ( targetWidth < elemWidth && abs( left + right ) < targetWidth ) {
					feedback.horizontal = "center";
				}
				if ( targetHeight < elemHeight && abs( top + bottom ) < targetHeight ) {
					feedback.vertical = "middle";
				}
				if ( max( abs( left ), abs( right ) ) > max( abs( top ), abs( bottom ) ) ) {
					feedback.important = "horizontal";
				} else {
					feedback.important = "vertical";
				}
				options.using.call( this, props, feedback );
			};
		}

		elem.offset( $.extend( position, { using: using } ) );
	});
};

$.ui.position = {
	fit: {
		left: function( position, data ) {
			var within = data.within,
				withinOffset = within.isWindow ? within.scrollLeft : within.offset.left,
				outerWidth = within.width,
				collisionPosLeft = position.left - data.collisionPosition.marginLeft,
				overLeft = withinOffset - collisionPosLeft,
				overRight = collisionPosLeft + data.collisionWidth - outerWidth - withinOffset,
				newOverRight;

			// element is wider than within
			if ( data.collisionWidth > outerWidth ) {
				// element is initially over the left side of within
				if ( overLeft > 0 && overRight <= 0 ) {
					newOverRight = position.left + overLeft + data.collisionWidth - outerWidth - withinOffset;
					position.left += overLeft - newOverRight;
				// element is initially over right side of within
				} else if ( overRight > 0 && overLeft <= 0 ) {
					position.left = withinOffset;
				// element is initially over both left and right sides of within
				} else {
					if ( overLeft > overRight ) {
						position.left = withinOffset + outerWidth - data.collisionWidth;
					} else {
						position.left = withinOffset;
					}
				}
			// too far left -> align with left edge
			} else if ( overLeft > 0 ) {
				position.left += overLeft;
			// too far right -> align with right edge
			} else if ( overRight > 0 ) {
				position.left -= overRight;
			// adjust based on position and margin
			} else {
				position.left = max( position.left - collisionPosLeft, position.left );
			}
		},
		top: function( position, data ) {
			var within = data.within,
				withinOffset = within.isWindow ? within.scrollTop : within.offset.top,
				outerHeight = data.within.height,
				collisionPosTop = position.top - data.collisionPosition.marginTop,
				overTop = withinOffset - collisionPosTop,
				overBottom = collisionPosTop + data.collisionHeight - outerHeight - withinOffset,
				newOverBottom;

			// element is taller than within
			if ( data.collisionHeight > outerHeight ) {
				// element is initially over the top of within
				if ( overTop > 0 && overBottom <= 0 ) {
					newOverBottom = position.top + overTop + data.collisionHeight - outerHeight - withinOffset;
					position.top += overTop - newOverBottom;
				// element is initially over bottom of within
				} else if ( overBottom > 0 && overTop <= 0 ) {
					position.top = withinOffset;
				// element is initially over both top and bottom of within
				} else {
					if ( overTop > overBottom ) {
						position.top = withinOffset + outerHeight - data.collisionHeight;
					} else {
						position.top = withinOffset;
					}
				}
			// too far up -> align with top
			} else if ( overTop > 0 ) {
				position.top += overTop;
			// too far down -> align with bottom edge
			} else if ( overBottom > 0 ) {
				position.top -= overBottom;
			// adjust based on position and margin
			} else {
				position.top = max( position.top - collisionPosTop, position.top );
			}
		}
	},
	flip: {
		left: function( position, data ) {
			var within = data.within,
				withinOffset = within.offset.left + within.scrollLeft,
				outerWidth = within.width,
				offsetLeft = within.isWindow ? within.scrollLeft : within.offset.left,
				collisionPosLeft = position.left - data.collisionPosition.marginLeft,
				overLeft = collisionPosLeft - offsetLeft,
				overRight = collisionPosLeft + data.collisionWidth - outerWidth - offsetLeft,
				myOffset = data.my[ 0 ] === "left" ?
					-data.elemWidth :
					data.my[ 0 ] === "right" ?
						data.elemWidth :
						0,
				atOffset = data.at[ 0 ] === "left" ?
					data.targetWidth :
					data.at[ 0 ] === "right" ?
						-data.targetWidth :
						0,
				offset = -2 * data.offset[ 0 ],
				newOverRight,
				newOverLeft;

			if ( overLeft < 0 ) {
				newOverRight = position.left + myOffset + atOffset + offset + data.collisionWidth - outerWidth - withinOffset;
				if ( newOverRight < 0 || newOverRight < abs( overLeft ) ) {
					position.left += myOffset + atOffset + offset;
				}
			}
			else if ( overRight > 0 ) {
				newOverLeft = position.left - data.collisionPosition.marginLeft + myOffset + atOffset + offset - offsetLeft;
				if ( newOverLeft > 0 || abs( newOverLeft ) < overRight ) {
					position.left += myOffset + atOffset + offset;
				}
			}
		},
		top: function( position, data ) {
			var within = data.within,
				withinOffset = within.offset.top + within.scrollTop,
				outerHeight = within.height,
				offsetTop = within.isWindow ? within.scrollTop : within.offset.top,
				collisionPosTop = position.top - data.collisionPosition.marginTop,
				overTop = collisionPosTop - offsetTop,
				overBottom = collisionPosTop + data.collisionHeight - outerHeight - offsetTop,
				top = data.my[ 1 ] === "top",
				myOffset = top ?
					-data.elemHeight :
					data.my[ 1 ] === "bottom" ?
						data.elemHeight :
						0,
				atOffset = data.at[ 1 ] === "top" ?
					data.targetHeight :
					data.at[ 1 ] === "bottom" ?
						-data.targetHeight :
						0,
				offset = -2 * data.offset[ 1 ],
				newOverTop,
				newOverBottom;
			if ( overTop < 0 ) {
				newOverBottom = position.top + myOffset + atOffset + offset + data.collisionHeight - outerHeight - withinOffset;
				if ( ( position.top + myOffset + atOffset + offset) > overTop && ( newOverBottom < 0 || newOverBottom < abs( overTop ) ) ) {
					position.top += myOffset + atOffset + offset;
				}
			}
			else if ( overBottom > 0 ) {
				newOverTop = position.top -  data.collisionPosition.marginTop + myOffset + atOffset + offset - offsetTop;
				if ( ( position.top + myOffset + atOffset + offset) > overBottom && ( newOverTop > 0 || abs( newOverTop ) < overBottom ) ) {
					position.top += myOffset + atOffset + offset;
				}
			}
		}
	},
	flipfit: {
		left: function() {
			$.ui.position.flip.left.apply( this, arguments );
			$.ui.position.fit.left.apply( this, arguments );
		},
		top: function() {
			$.ui.position.flip.top.apply( this, arguments );
			$.ui.position.fit.top.apply( this, arguments );
		}
	}
};

// fraction support test
(function () {
	var testElement, testElementParent, testElementStyle, offsetLeft, i,
		body = document.getElementsByTagName( "body" )[ 0 ],
		div = document.createElement( "div" );

	//Create a "fake body" for testing based on method used in jQuery.support
	testElement = document.createElement( body ? "div" : "body" );
	testElementStyle = {
		visibility: "hidden",
		width: 0,
		height: 0,
		border: 0,
		margin: 0,
		background: "none"
	};
	if ( body ) {
		$.extend( testElementStyle, {
			position: "absolute",
			left: "-1000px",
			top: "-1000px"
		});
	}
	for ( i in testElementStyle ) {
		testElement.style[ i ] = testElementStyle[ i ];
	}
	testElement.appendChild( div );
	testElementParent = body || document.documentElement;
	testElementParent.insertBefore( testElement, testElementParent.firstChild );

	div.style.cssText = "position: absolute; left: 10.7432222px;";

	offsetLeft = $( div ).offset().left;
	$.support.offsetFractions = offsetLeft > 10 && offsetLeft < 11;

	testElement.innerHTML = "";
	testElementParent.removeChild( testElement );
})();

}( jQuery ) );

(function( $, undefined ) {

$.widget( "ui.progressbar", {
	version: "1.10.3",
	options: {
		max: 100,
		value: 0,

		change: null,
		complete: null
	},

	min: 0,

	_create: function() {
		// Constrain initial value
		this.oldValue = this.options.value = this._constrainedValue();

		this.element
			.addClass( "ui-progressbar ui-widget ui-widget-content ui-corner-all" )
			.attr({
				// Only set static values, aria-valuenow and aria-valuemax are
				// set inside _refreshValue()
				role: "progressbar",
				"aria-valuemin": this.min
			});

		this.valueDiv = $( "<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>" )
			.appendTo( this.element );

		this._refreshValue();
	},

	_destroy: function() {
		this.element
			.removeClass( "ui-progressbar ui-widget ui-widget-content ui-corner-all" )
			.removeAttr( "role" )
			.removeAttr( "aria-valuemin" )
			.removeAttr( "aria-valuemax" )
			.removeAttr( "aria-valuenow" );

		this.valueDiv.remove();
	},

	value: function( newValue ) {
		if ( newValue === undefined ) {
			return this.options.value;
		}

		this.options.value = this._constrainedValue( newValue );
		this._refreshValue();
	},

	_constrainedValue: function( newValue ) {
		if ( newValue === undefined ) {
			newValue = this.options.value;
		}

		this.indeterminate = newValue === false;

		// sanitize value
		if ( typeof newValue !== "number" ) {
			newValue = 0;
		}

		return this.indeterminate ? false :
			Math.min( this.options.max, Math.max( this.min, newValue ) );
	},

	_setOptions: function( options ) {
		// Ensure "value" option is set after other values (like max)
		var value = options.value;
		delete options.value;

		this._super( options );

		this.options.value = this._constrainedValue( value );
		this._refreshValue();
	},

	_setOption: function( key, value ) {
		if ( key === "max" ) {
			// Don't allow a max less than min
			value = Math.max( this.min, value );
		}

		this._super( key, value );
	},

	_percentage: function() {
		return this.indeterminate ? 100 : 100 * ( this.options.value - this.min ) / ( this.options.max - this.min );
	},

	_refreshValue: function() {
		var value = this.options.value,
			percentage = this._percentage();

		this.valueDiv
			.toggle( this.indeterminate || value > this.min )
			.toggleClass( "ui-corner-right", value === this.options.max )
			.width( percentage.toFixed(0) + "%" );

		this.element.toggleClass( "ui-progressbar-indeterminate", this.indeterminate );

		if ( this.indeterminate ) {
			this.element.removeAttr( "aria-valuenow" );
			if ( !this.overlayDiv ) {
				this.overlayDiv = $( "<div class='ui-progressbar-overlay'></div>" ).appendTo( this.valueDiv );
			}
		} else {
			this.element.attr({
				"aria-valuemax": this.options.max,
				"aria-valuenow": value
			});
			if ( this.overlayDiv ) {
				this.overlayDiv.remove();
				this.overlayDiv = null;
			}
		}

		if ( this.oldValue !== value ) {
			this.oldValue = value;
			this._trigger( "change" );
		}
		if ( value === this.options.max ) {
			this._trigger( "complete" );
		}
	}
});

})( jQuery );

(function( $, undefined ) {

// number of pages in a slider
// (how many times can you page up/down to go through the whole range)
var numPages = 5;

$.widget( "ui.slider", $.ui.mouse, {
	version: "1.10.3",
	widgetEventPrefix: "slide",

	options: {
		animate: false,
		distance: 0,
		max: 100,
		min: 0,
		orientation: "horizontal",
		range: false,
		step: 1,
		value: 0,
		values: null,

		// callbacks
		change: null,
		slide: null,
		start: null,
		stop: null
	},

	_create: function() {
		this._keySliding = false;
		this._mouseSliding = false;
		this._animateOff = true;
		this._handleIndex = null;
		this._detectOrientation();
		this._mouseInit();

		this.element
			.addClass( "ui-slider" +
				" ui-slider-" + this.orientation +
				" ui-widget" +
				" ui-widget-content" +
				" ui-corner-all");

		this._refresh();
		this._setOption( "disabled", this.options.disabled );

		this._animateOff = false;
	},

	_refresh: function() {
		this._createRange();
		this._createHandles();
		this._setupEvents();
		this._refreshValue();
	},

	_createHandles: function() {
		var i, handleCount,
			options = this.options,
			existingHandles = this.element.find( ".ui-slider-handle" ).addClass( "ui-state-default ui-corner-all" ),
			handle = "<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",
			handles = [];

		handleCount = ( options.values && options.values.length ) || 1;

		if ( existingHandles.length > handleCount ) {
			existingHandles.slice( handleCount ).remove();
			existingHandles = existingHandles.slice( 0, handleCount );
		}

		for ( i = existingHandles.length; i < handleCount; i++ ) {
			handles.push( handle );
		}

		this.handles = existingHandles.add( $( handles.join( "" ) ).appendTo( this.element ) );

		this.handle = this.handles.eq( 0 );

		this.handles.each(function( i ) {
			$( this ).data( "ui-slider-handle-index", i );
		});
	},

	_createRange: function() {
		var options = this.options,
			classes = "";

		if ( options.range ) {
			if ( options.range === true ) {
				if ( !options.values ) {
					options.values = [ this._valueMin(), this._valueMin() ];
				} else if ( options.values.length && options.values.length !== 2 ) {
					options.values = [ options.values[0], options.values[0] ];
				} else if ( $.isArray( options.values ) ) {
					options.values = options.values.slice(0);
				}
			}

			if ( !this.range || !this.range.length ) {
				this.range = $( "<div></div>" )
					.appendTo( this.element );

				classes = "ui-slider-range" +
				// note: this isn't the most fittingly semantic framework class for this element,
				// but worked best visually with a variety of themes
				" ui-widget-header ui-corner-all";
			} else {
				this.range.removeClass( "ui-slider-range-min ui-slider-range-max" )
					// Handle range switching from true to min/max
					.css({
						"left": "",
						"bottom": ""
					});
			}

			this.range.addClass( classes +
				( ( options.range === "min" || options.range === "max" ) ? " ui-slider-range-" + options.range : "" ) );
		} else {
			this.range = $([]);
		}
	},

	_setupEvents: function() {
		var elements = this.handles.add( this.range ).filter( "a" );
		this._off( elements );
		this._on( elements, this._handleEvents );
		this._hoverable( elements );
		this._focusable( elements );
	},

	_destroy: function() {
		this.handles.remove();
		this.range.remove();

		this.element
			.removeClass( "ui-slider" +
				" ui-slider-horizontal" +
				" ui-slider-vertical" +
				" ui-widget" +
				" ui-widget-content" +
				" ui-corner-all" );

		this._mouseDestroy();
	},

	_mouseCapture: function( event ) {
		var position, normValue, distance, closestHandle, index, allowed, offset, mouseOverHandle,
			that = this,
			o = this.options;

		if ( o.disabled ) {
			return false;
		}

		this.elementSize = {
			width: this.element.outerWidth(),
			height: this.element.outerHeight()
		};
		this.elementOffset = this.element.offset();

		position = { x: event.pageX, y: event.pageY };
		normValue = this._normValueFromMouse( position );
		distance = this._valueMax() - this._valueMin() + 1;
		this.handles.each(function( i ) {
			var thisDistance = Math.abs( normValue - that.values(i) );
			if (( distance > thisDistance ) ||
				( distance === thisDistance &&
					(i === that._lastChangedValue || that.values(i) === o.min ))) {
				distance = thisDistance;
				closestHandle = $( this );
				index = i;
			}
		});

		allowed = this._start( event, index );
		if ( allowed === false ) {
			return false;
		}
		this._mouseSliding = true;

		this._handleIndex = index;

		closestHandle
			.addClass( "ui-state-active" )
			.focus();

		offset = closestHandle.offset();
		mouseOverHandle = !$( event.target ).parents().addBack().is( ".ui-slider-handle" );
		this._clickOffset = mouseOverHandle ? { left: 0, top: 0 } : {
			left: event.pageX - offset.left - ( closestHandle.width() / 2 ),
			top: event.pageY - offset.top -
				( closestHandle.height() / 2 ) -
				( parseInt( closestHandle.css("borderTopWidth"), 10 ) || 0 ) -
				( parseInt( closestHandle.css("borderBottomWidth"), 10 ) || 0) +
				( parseInt( closestHandle.css("marginTop"), 10 ) || 0)
		};

		if ( !this.handles.hasClass( "ui-state-hover" ) ) {
			this._slide( event, index, normValue );
		}
		this._animateOff = true;
		return true;
	},

	_mouseStart: function() {
		return true;
	},

	_mouseDrag: function( event ) {
		var position = { x: event.pageX, y: event.pageY },
			normValue = this._normValueFromMouse( position );

		this._slide( event, this._handleIndex, normValue );

		return false;
	},

	_mouseStop: function( event ) {
		this.handles.removeClass( "ui-state-active" );
		this._mouseSliding = false;

		this._stop( event, this._handleIndex );
		this._change( event, this._handleIndex );

		this._handleIndex = null;
		this._clickOffset = null;
		this._animateOff = false;

		return false;
	},

	_detectOrientation: function() {
		this.orientation = ( this.options.orientation === "vertical" ) ? "vertical" : "horizontal";
	},

	_normValueFromMouse: function( position ) {
		var pixelTotal,
			pixelMouse,
			percentMouse,
			valueTotal,
			valueMouse;

		if ( this.orientation === "horizontal" ) {
			pixelTotal = this.elementSize.width;
			pixelMouse = position.x - this.elementOffset.left - ( this._clickOffset ? this._clickOffset.left : 0 );
		} else {
			pixelTotal = this.elementSize.height;
			pixelMouse = position.y - this.elementOffset.top - ( this._clickOffset ? this._clickOffset.top : 0 );
		}

		percentMouse = ( pixelMouse / pixelTotal );
		if ( percentMouse > 1 ) {
			percentMouse = 1;
		}
		if ( percentMouse < 0 ) {
			percentMouse = 0;
		}
		if ( this.orientation === "vertical" ) {
			percentMouse = 1 - percentMouse;
		}

		valueTotal = this._valueMax() - this._valueMin();
		valueMouse = this._valueMin() + percentMouse * valueTotal;

		return this._trimAlignValue( valueMouse );
	},

	_start: function( event, index ) {
		var uiHash = {
			handle: this.handles[ index ],
			value: this.value()
		};
		if ( this.options.values && this.options.values.length ) {
			uiHash.value = this.values( index );
			uiHash.values = this.values();
		}
		return this._trigger( "start", event, uiHash );
	},

	_slide: function( event, index, newVal ) {
		var otherVal,
			newValues,
			allowed;

		if ( this.options.values && this.options.values.length ) {
			otherVal = this.values( index ? 0 : 1 );

			if ( ( this.options.values.length === 2 && this.options.range === true ) &&
					( ( index === 0 && newVal > otherVal) || ( index === 1 && newVal < otherVal ) )
				) {
				newVal = otherVal;
			}

			if ( newVal !== this.values( index ) ) {
				newValues = this.values();
				newValues[ index ] = newVal;
				// A slide can be canceled by returning false from the slide callback
				allowed = this._trigger( "slide", event, {
					handle: this.handles[ index ],
					value: newVal,
					values: newValues
				} );
				otherVal = this.values( index ? 0 : 1 );
				if ( allowed !== false ) {
					this.values( index, newVal, true );
				}
			}
		} else {
			if ( newVal !== this.value() ) {
				// A slide can be canceled by returning false from the slide callback
				allowed = this._trigger( "slide", event, {
					handle: this.handles[ index ],
					value: newVal
				} );
				if ( allowed !== false ) {
					this.value( newVal );
				}
			}
		}
	},

	_stop: function( event, index ) {
		var uiHash = {
			handle: this.handles[ index ],
			value: this.value()
		};
		if ( this.options.values && this.options.values.length ) {
			uiHash.value = this.values( index );
			uiHash.values = this.values();
		}

		this._trigger( "stop", event, uiHash );
	},

	_change: function( event, index ) {
		if ( !this._keySliding && !this._mouseSliding ) {
			var uiHash = {
				handle: this.handles[ index ],
				value: this.value()
			};
			if ( this.options.values && this.options.values.length ) {
				uiHash.value = this.values( index );
				uiHash.values = this.values();
			}

			//store the last changed value index for reference when handles overlap
			this._lastChangedValue = index;

			this._trigger( "change", event, uiHash );
		}
	},

	value: function( newValue ) {
		if ( arguments.length ) {
			this.options.value = this._trimAlignValue( newValue );
			this._refreshValue();
			this._change( null, 0 );
			return;
		}

		return this._value();
	},

	values: function( index, newValue ) {
		var vals,
			newValues,
			i;

		if ( arguments.length > 1 ) {
			this.options.values[ index ] = this._trimAlignValue( newValue );
			this._refreshValue();
			this._change( null, index );
			return;
		}

		if ( arguments.length ) {
			if ( $.isArray( arguments[ 0 ] ) ) {
				vals = this.options.values;
				newValues = arguments[ 0 ];
				for ( i = 0; i < vals.length; i += 1 ) {
					vals[ i ] = this._trimAlignValue( newValues[ i ] );
					this._change( null, i );
				}
				this._refreshValue();
			} else {
				if ( this.options.values && this.options.values.length ) {
					return this._values( index );
				} else {
					return this.value();
				}
			}
		} else {
			return this._values();
		}
	},

	_setOption: function( key, value ) {
		var i,
			valsLength = 0;

		if ( key === "range" && this.options.range === true ) {
			if ( value === "min" ) {
				this.options.value = this._values( 0 );
				this.options.values = null;
			} else if ( value === "max" ) {
				this.options.value = this._values( this.options.values.length-1 );
				this.options.values = null;
			}
		}

		if ( $.isArray( this.options.values ) ) {
			valsLength = this.options.values.length;
		}

		$.Widget.prototype._setOption.apply( this, arguments );

		switch ( key ) {
			case "orientation":
				this._detectOrientation();
				this.element
					.removeClass( "ui-slider-horizontal ui-slider-vertical" )
					.addClass( "ui-slider-" + this.orientation );
				this._refreshValue();
				break;
			case "value":
				this._animateOff = true;
				this._refreshValue();
				this._change( null, 0 );
				this._animateOff = false;
				break;
			case "values":
				this._animateOff = true;
				this._refreshValue();
				for ( i = 0; i < valsLength; i += 1 ) {
					this._change( null, i );
				}
				this._animateOff = false;
				break;
			case "min":
			case "max":
				this._animateOff = true;
				this._refreshValue();
				this._animateOff = false;
				break;
			case "range":
				this._animateOff = true;
				this._refresh();
				this._animateOff = false;
				break;
		}
	},

	//internal value getter
	// _value() returns value trimmed by min and max, aligned by step
	_value: function() {
		var val = this.options.value;
		val = this._trimAlignValue( val );

		return val;
	},

	//internal values getter
	// _values() returns array of values trimmed by min and max, aligned by step
	// _values( index ) returns single value trimmed by min and max, aligned by step
	_values: function( index ) {
		var val,
			vals,
			i;

		if ( arguments.length ) {
			val = this.options.values[ index ];
			val = this._trimAlignValue( val );

			return val;
		} else if ( this.options.values && this.options.values.length ) {
			// .slice() creates a copy of the array
			// this copy gets trimmed by min and max and then returned
			vals = this.options.values.slice();
			for ( i = 0; i < vals.length; i+= 1) {
				vals[ i ] = this._trimAlignValue( vals[ i ] );
			}

			return vals;
		} else {
			return [];
		}
	},

	// returns the step-aligned value that val is closest to, between (inclusive) min and max
	_trimAlignValue: function( val ) {
		if ( val <= this._valueMin() ) {
			return this._valueMin();
		}
		if ( val >= this._valueMax() ) {
			return this._valueMax();
		}
		var step = ( this.options.step > 0 ) ? this.options.step : 1,
			valModStep = (val - this._valueMin()) % step,
			alignValue = val - valModStep;

		if ( Math.abs(valModStep) * 2 >= step ) {
			alignValue += ( valModStep > 0 ) ? step : ( -step );
		}

		// Since JavaScript has problems with large floats, round
		// the final value to 5 digits after the decimal point (see #4124)
		return parseFloat( alignValue.toFixed(5) );
	},

	_valueMin: function() {
		return this.options.min;
	},

	_valueMax: function() {
		return this.options.max;
	},

	_refreshValue: function() {
		var lastValPercent, valPercent, value, valueMin, valueMax,
			oRange = this.options.range,
			o = this.options,
			that = this,
			animate = ( !this._animateOff ) ? o.animate : false,
			_set = {};

		if ( this.options.values && this.options.values.length ) {
			this.handles.each(function( i ) {
				valPercent = ( that.values(i) - that._valueMin() ) / ( that._valueMax() - that._valueMin() ) * 100;
				_set[ that.orientation === "horizontal" ? "left" : "bottom" ] = valPercent + "%";
				$( this ).stop( 1, 1 )[ animate ? "animate" : "css" ]( _set, o.animate );
				if ( that.options.range === true ) {
					if ( that.orientation === "horizontal" ) {
						if ( i === 0 ) {
							that.range.stop( 1, 1 )[ animate ? "animate" : "css" ]( { left: valPercent + "%" }, o.animate );
						}
						if ( i === 1 ) {
							that.range[ animate ? "animate" : "css" ]( { width: ( valPercent - lastValPercent ) + "%" }, { queue: false, duration: o.animate } );
						}
					} else {
						if ( i === 0 ) {
							that.range.stop( 1, 1 )[ animate ? "animate" : "css" ]( { bottom: ( valPercent ) + "%" }, o.animate );
						}
						if ( i === 1 ) {
							that.range[ animate ? "animate" : "css" ]( { height: ( valPercent - lastValPercent ) + "%" }, { queue: false, duration: o.animate } );
						}
					}
				}
				lastValPercent = valPercent;
			});
		} else {
			value = this.value();
			valueMin = this._valueMin();
			valueMax = this._valueMax();
			valPercent = ( valueMax !== valueMin ) ?
					( value - valueMin ) / ( valueMax - valueMin ) * 100 :
					0;
			_set[ this.orientation === "horizontal" ? "left" : "bottom" ] = valPercent + "%";
			this.handle.stop( 1, 1 )[ animate ? "animate" : "css" ]( _set, o.animate );

			if ( oRange === "min" && this.orientation === "horizontal" ) {
				this.range.stop( 1, 1 )[ animate ? "animate" : "css" ]( { width: valPercent + "%" }, o.animate );
			}
			if ( oRange === "max" && this.orientation === "horizontal" ) {
				this.range[ animate ? "animate" : "css" ]( { width: ( 100 - valPercent ) + "%" }, { queue: false, duration: o.animate } );
			}
			if ( oRange === "min" && this.orientation === "vertical" ) {
				this.range.stop( 1, 1 )[ animate ? "animate" : "css" ]( { height: valPercent + "%" }, o.animate );
			}
			if ( oRange === "max" && this.orientation === "vertical" ) {
				this.range[ animate ? "animate" : "css" ]( { height: ( 100 - valPercent ) + "%" }, { queue: false, duration: o.animate } );
			}
		}
	},

	_handleEvents: {
		keydown: function( event ) {
			/*jshint maxcomplexity:25*/
			var allowed, curVal, newVal, step,
				index = $( event.target ).data( "ui-slider-handle-index" );

			switch ( event.keyCode ) {
				case $.ui.keyCode.HOME:
				case $.ui.keyCode.END:
				case $.ui.keyCode.PAGE_UP:
				case $.ui.keyCode.PAGE_DOWN:
				case $.ui.keyCode.UP:
				case $.ui.keyCode.RIGHT:
				case $.ui.keyCode.DOWN:
				case $.ui.keyCode.LEFT:
					event.preventDefault();
					if ( !this._keySliding ) {
						this._keySliding = true;
						$( event.target ).addClass( "ui-state-active" );
						allowed = this._start( event, index );
						if ( allowed === false ) {
							return;
						}
					}
					break;
			}

			step = this.options.step;
			if ( this.options.values && this.options.values.length ) {
				curVal = newVal = this.values( index );
			} else {
				curVal = newVal = this.value();
			}

			switch ( event.keyCode ) {
				case $.ui.keyCode.HOME:
					newVal = this._valueMin();
					break;
				case $.ui.keyCode.END:
					newVal = this._valueMax();
					break;
				case $.ui.keyCode.PAGE_UP:
					newVal = this._trimAlignValue( curVal + ( (this._valueMax() - this._valueMin()) / numPages ) );
					break;
				case $.ui.keyCode.PAGE_DOWN:
					newVal = this._trimAlignValue( curVal - ( (this._valueMax() - this._valueMin()) / numPages ) );
					break;
				case $.ui.keyCode.UP:
				case $.ui.keyCode.RIGHT:
					if ( curVal === this._valueMax() ) {
						return;
					}
					newVal = this._trimAlignValue( curVal + step );
					break;
				case $.ui.keyCode.DOWN:
				case $.ui.keyCode.LEFT:
					if ( curVal === this._valueMin() ) {
						return;
					}
					newVal = this._trimAlignValue( curVal - step );
					break;
			}

			this._slide( event, index, newVal );
		},
		click: function( event ) {
			event.preventDefault();
		},
		keyup: function( event ) {
			var index = $( event.target ).data( "ui-slider-handle-index" );

			if ( this._keySliding ) {
				this._keySliding = false;
				this._stop( event, index );
				this._change( event, index );
				$( event.target ).removeClass( "ui-state-active" );
			}
		}
	}

});

}(jQuery));

(function( $ ) {

function modifier( fn ) {
	return function() {
		var previous = this.element.val();
		fn.apply( this, arguments );
		this._refresh();
		if ( previous !== this.element.val() ) {
			this._trigger( "change" );
		}
	};
}

$.widget( "ui.spinner", {
	version: "1.10.3",
	defaultElement: "<input>",
	widgetEventPrefix: "spin",
	options: {
		culture: null,
		icons: {
			down: "ui-icon-triangle-1-s",
			up: "ui-icon-triangle-1-n"
		},
		incremental: true,
		max: null,
		min: null,
		numberFormat: null,
		page: 10,
		step: 1,

		change: null,
		spin: null,
		start: null,
		stop: null
	},

	_create: function() {
		// handle string values that need to be parsed
		this._setOption( "max", this.options.max );
		this._setOption( "min", this.options.min );
		this._setOption( "step", this.options.step );

		// format the value, but don't constrain
		this._value( this.element.val(), true );

		this._draw();
		this._on( this._events );
		this._refresh();

		// turning off autocomplete prevents the browser from remembering the
		// value when navigating through history, so we re-enable autocomplete
		// if the page is unloaded before the widget is destroyed. #7790
		this._on( this.window, {
			beforeunload: function() {
				this.element.removeAttr( "autocomplete" );
			}
		});
	},

	_getCreateOptions: function() {
		var options = {},
			element = this.element;

		$.each( [ "min", "max", "step" ], function( i, option ) {
			var value = element.attr( option );
			if ( value !== undefined && value.length ) {
				options[ option ] = value;
			}
		});

		return options;
	},

	_events: {
		keydown: function( event ) {
			if ( this._start( event ) && this._keydown( event ) ) {
				event.preventDefault();
			}
		},
		keyup: "_stop",
		focus: function() {
			this.previous = this.element.val();
		},
		blur: function( event ) {
			if ( this.cancelBlur ) {
				delete this.cancelBlur;
				return;
			}

			this._stop();
			this._refresh();
			if ( this.previous !== this.element.val() ) {
				this._trigger( "change", event );
			}
		},
		mousewheel: function( event, delta ) {
			if ( !delta ) {
				return;
			}
			if ( !this.spinning && !this._start( event ) ) {
				return false;
			}

			this._spin( (delta > 0 ? 1 : -1) * this.options.step, event );
			clearTimeout( this.mousewheelTimer );
			this.mousewheelTimer = this._delay(function() {
				if ( this.spinning ) {
					this._stop( event );
				}
			}, 100 );
			event.preventDefault();
		},
		"mousedown .ui-spinner-button": function( event ) {
			var previous;

			// We never want the buttons to have focus; whenever the user is
			// interacting with the spinner, the focus should be on the input.
			// If the input is focused then this.previous is properly set from
			// when the input first received focus. If the input is not focused
			// then we need to set this.previous based on the value before spinning.
			previous = this.element[0] === this.document[0].activeElement ?
				this.previous : this.element.val();
			function checkFocus() {
				var isActive = this.element[0] === this.document[0].activeElement;
				if ( !isActive ) {
					this.element.focus();
					this.previous = previous;
					// support: IE
					// IE sets focus asynchronously, so we need to check if focus
					// moved off of the input because the user clicked on the button.
					this._delay(function() {
						this.previous = previous;
					});
				}
			}

			// ensure focus is on (or stays on) the text field
			event.preventDefault();
			checkFocus.call( this );

			// support: IE
			// IE doesn't prevent moving focus even with event.preventDefault()
			// so we set a flag to know when we should ignore the blur event
			// and check (again) if focus moved off of the input.
			this.cancelBlur = true;
			this._delay(function() {
				delete this.cancelBlur;
				checkFocus.call( this );
			});

			if ( this._start( event ) === false ) {
				return;
			}

			this._repeat( null, $( event.currentTarget ).hasClass( "ui-spinner-up" ) ? 1 : -1, event );
		},
		"mouseup .ui-spinner-button": "_stop",
		"mouseenter .ui-spinner-button": function( event ) {
			// button will add ui-state-active if mouse was down while mouseleave and kept down
			if ( !$( event.currentTarget ).hasClass( "ui-state-active" ) ) {
				return;
			}

			if ( this._start( event ) === false ) {
				return false;
			}
			this._repeat( null, $( event.currentTarget ).hasClass( "ui-spinner-up" ) ? 1 : -1, event );
		},
		// TODO: do we really want to consider this a stop?
		// shouldn't we just stop the repeater and wait until mouseup before
		// we trigger the stop event?
		"mouseleave .ui-spinner-button": "_stop"
	},

	_draw: function() {
		var uiSpinner = this.uiSpinner = this.element
			.addClass( "ui-spinner-input" )
			.attr( "autocomplete", "off" )
			.wrap( this._uiSpinnerHtml() )
			.parent()
				// add buttons
				.append( this._buttonHtml() );

		this.element.attr( "role", "spinbutton" );

		// button bindings
		this.buttons = uiSpinner.find( ".ui-spinner-button" )
			.attr( "tabIndex", -1 )
			.button()
			.removeClass( "ui-corner-all" );

		// IE 6 doesn't understand height: 50% for the buttons
		// unless the wrapper has an explicit height
		if ( this.buttons.height() > Math.ceil( uiSpinner.height() * 0.5 ) &&
				uiSpinner.height() > 0 ) {
			uiSpinner.height( uiSpinner.height() );
		}

		// disable spinner if element was already disabled
		if ( this.options.disabled ) {
			this.disable();
		}
	},

	_keydown: function( event ) {
		var options = this.options,
			keyCode = $.ui.keyCode;

		switch ( event.keyCode ) {
		case keyCode.UP:
			this._repeat( null, 1, event );
			return true;
		case keyCode.DOWN:
			this._repeat( null, -1, event );
			return true;
		case keyCode.PAGE_UP:
			this._repeat( null, options.page, event );
			return true;
		case keyCode.PAGE_DOWN:
			this._repeat( null, -options.page, event );
			return true;
		}

		return false;
	},

	_uiSpinnerHtml: function() {
		return "<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>";
	},

	_buttonHtml: function() {
		return "" +
			"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'>" +
				"<span class='ui-icon " + this.options.icons.up + "'>&#9650;</span>" +
			"</a>" +
			"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>" +
				"<span class='ui-icon " + this.options.icons.down + "'>&#9660;</span>" +
			"</a>";
	},

	_start: function( event ) {
		if ( !this.spinning && this._trigger( "start", event ) === false ) {
			return false;
		}

		if ( !this.counter ) {
			this.counter = 1;
		}
		this.spinning = true;
		return true;
	},

	_repeat: function( i, steps, event ) {
		i = i || 500;

		clearTimeout( this.timer );
		this.timer = this._delay(function() {
			this._repeat( 40, steps, event );
		}, i );

		this._spin( steps * this.options.step, event );
	},

	_spin: function( step, event ) {
		var value = this.value() || 0;

		if ( !this.counter ) {
			this.counter = 1;
		}

		value = this._adjustValue( value + step * this._increment( this.counter ) );

		if ( !this.spinning || this._trigger( "spin", event, { value: value } ) !== false) {
			this._value( value );
			this.counter++;
		}
	},

	_increment: function( i ) {
		var incremental = this.options.incremental;

		if ( incremental ) {
			return $.isFunction( incremental ) ?
				incremental( i ) :
				Math.floor( i*i*i/50000 - i*i/500 + 17*i/200 + 1 );
		}

		return 1;
	},

	_precision: function() {
		var precision = this._precisionOf( this.options.step );
		if ( this.options.min !== null ) {
			precision = Math.max( precision, this._precisionOf( this.options.min ) );
		}
		return precision;
	},

	_precisionOf: function( num ) {
		var str = num.toString(),
			decimal = str.indexOf( "." );
		return decimal === -1 ? 0 : str.length - decimal - 1;
	},

	_adjustValue: function( value ) {
		var base, aboveMin,
			options = this.options;

		// make sure we're at a valid step
		// - find out where we are relative to the base (min or 0)
		base = options.min !== null ? options.min : 0;
		aboveMin = value - base;
		// - round to the nearest step
		aboveMin = Math.round(aboveMin / options.step) * options.step;
		// - rounding is based on 0, so adjust back to our base
		value = base + aboveMin;

		// fix precision from bad JS floating point math
		value = parseFloat( value.toFixed( this._precision() ) );

		// clamp the value
		if ( options.max !== null && value > options.max) {
			return options.max;
		}
		if ( options.min !== null && value < options.min ) {
			return options.min;
		}

		return value;
	},

	_stop: function( event ) {
		if ( !this.spinning ) {
			return;
		}

		clearTimeout( this.timer );
		clearTimeout( this.mousewheelTimer );
		this.counter = 0;
		this.spinning = false;
		this._trigger( "stop", event );
	},

	_setOption: function( key, value ) {
		if ( key === "culture" || key === "numberFormat" ) {
			var prevValue = this._parse( this.element.val() );
			this.options[ key ] = value;
			this.element.val( this._format( prevValue ) );
			return;
		}

		if ( key === "max" || key === "min" || key === "step" ) {
			if ( typeof value === "string" ) {
				value = this._parse( value );
			}
		}
		if ( key === "icons" ) {
			this.buttons.first().find( ".ui-icon" )
				.removeClass( this.options.icons.up )
				.addClass( value.up );
			this.buttons.last().find( ".ui-icon" )
				.removeClass( this.options.icons.down )
				.addClass( value.down );
		}

		this._super( key, value );

		if ( key === "disabled" ) {
			if ( value ) {
				this.element.prop( "disabled", true );
				this.buttons.button( "disable" );
			} else {
				this.element.prop( "disabled", false );
				this.buttons.button( "enable" );
			}
		}
	},

	_setOptions: modifier(function( options ) {
		this._super( options );
		this._value( this.element.val() );
	}),

	_parse: function( val ) {
		if ( typeof val === "string" && val !== "" ) {
			val = window.Globalize && this.options.numberFormat ?
				Globalize.parseFloat( val, 10, this.options.culture ) : +val;
		}
		return val === "" || isNaN( val ) ? null : val;
	},

	_format: function( value ) {
		if ( value === "" ) {
			return "";
		}
		return window.Globalize && this.options.numberFormat ?
			Globalize.format( value, this.options.numberFormat, this.options.culture ) :
			value;
	},

	_refresh: function() {
		this.element.attr({
			"aria-valuemin": this.options.min,
			"aria-valuemax": this.options.max,
			// TODO: what should we do with values that can't be parsed?
			"aria-valuenow": this._parse( this.element.val() )
		});
	},

	// update the value without triggering change
	_value: function( value, allowAny ) {
		var parsed;
		if ( value !== "" ) {
			parsed = this._parse( value );
			if ( parsed !== null ) {
				if ( !allowAny ) {
					parsed = this._adjustValue( parsed );
				}
				value = this._format( parsed );
			}
		}
		this.element.val( value );
		this._refresh();
	},

	_destroy: function() {
		this.element
			.removeClass( "ui-spinner-input" )
			.prop( "disabled", false )
			.removeAttr( "autocomplete" )
			.removeAttr( "role" )
			.removeAttr( "aria-valuemin" )
			.removeAttr( "aria-valuemax" )
			.removeAttr( "aria-valuenow" );
		this.uiSpinner.replaceWith( this.element );
	},

	stepUp: modifier(function( steps ) {
		this._stepUp( steps );
	}),
	_stepUp: function( steps ) {
		if ( this._start() ) {
			this._spin( (steps || 1) * this.options.step );
			this._stop();
		}
	},

	stepDown: modifier(function( steps ) {
		this._stepDown( steps );
	}),
	_stepDown: function( steps ) {
		if ( this._start() ) {
			this._spin( (steps || 1) * -this.options.step );
			this._stop();
		}
	},

	pageUp: modifier(function( pages ) {
		this._stepUp( (pages || 1) * this.options.page );
	}),

	pageDown: modifier(function( pages ) {
		this._stepDown( (pages || 1) * this.options.page );
	}),

	value: function( newVal ) {
		if ( !arguments.length ) {
			return this._parse( this.element.val() );
		}
		modifier( this._value ).call( this, newVal );
	},

	widget: function() {
		return this.uiSpinner;
	}
});

}( jQuery ) );

(function( $, undefined ) {

var tabId = 0,
	rhash = /#.*$/;

function getNextTabId() {
	return ++tabId;
}

function isLocal( anchor ) {
	return anchor.hash.length > 1 &&
		decodeURIComponent( anchor.href.replace( rhash, "" ) ) ===
			decodeURIComponent( location.href.replace( rhash, "" ) );
}

$.widget( "ui.tabs", {
	version: "1.10.3",
	delay: 300,
	options: {
		active: null,
		collapsible: false,
		event: "click",
		heightStyle: "content",
		hide: null,
		show: null,

		// callbacks
		activate: null,
		beforeActivate: null,
		beforeLoad: null,
		load: null
	},

	_create: function() {
		var that = this,
			options = this.options;

		this.running = false;

		this.element
			.addClass( "ui-tabs ui-widget ui-widget-content ui-corner-all" )
			.toggleClass( "ui-tabs-collapsible", options.collapsible )
			// Prevent users from focusing disabled tabs via click
			.delegate( ".ui-tabs-nav > li", "mousedown" + this.eventNamespace, function( event ) {
				if ( $( this ).is( ".ui-state-disabled" ) ) {
					event.preventDefault();
				}
			})
			// support: IE <9
			// Preventing the default action in mousedown doesn't prevent IE
			// from focusing the element, so if the anchor gets focused, blur.
			// We don't have to worry about focusing the previously focused
			// element since clicking on a non-focusable element should focus
			// the body anyway.
			.delegate( ".ui-tabs-anchor", "focus" + this.eventNamespace, function() {
				if ( $( this ).closest( "li" ).is( ".ui-state-disabled" ) ) {
					this.blur();
				}
			});

		this._processTabs();
		options.active = this._initialActive();

		// Take disabling tabs via class attribute from HTML
		// into account and update option properly.
		if ( $.isArray( options.disabled ) ) {
			options.disabled = $.unique( options.disabled.concat(
				$.map( this.tabs.filter( ".ui-state-disabled" ), function( li ) {
					return that.tabs.index( li );
				})
			) ).sort();
		}

		// check for length avoids error when initializing empty list
		if ( this.options.active !== false && this.anchors.length ) {
			this.active = this._findActive( options.active );
		} else {
			this.active = $();
		}

		this._refresh();

		if ( this.active.length ) {
			this.load( options.active );
		}
	},

	_initialActive: function() {
		var active = this.options.active,
			collapsible = this.options.collapsible,
			locationHash = location.hash.substring( 1 );

		if ( active === null ) {
			// check the fragment identifier in the URL
			if ( locationHash ) {
				this.tabs.each(function( i, tab ) {
					if ( $( tab ).attr( "aria-controls" ) === locationHash ) {
						active = i;
						return false;
					}
				});
			}

			// check for a tab marked active via a class
			if ( active === null ) {
				active = this.tabs.index( this.tabs.filter( ".ui-tabs-active" ) );
			}

			// no active tab, set to false
			if ( active === null || active === -1 ) {
				active = this.tabs.length ? 0 : false;
			}
		}

		// handle numbers: negative, out of range
		if ( active !== false ) {
			active = this.tabs.index( this.tabs.eq( active ) );
			if ( active === -1 ) {
				active = collapsible ? false : 0;
			}
		}

		// don't allow collapsible: false and active: false
		if ( !collapsible && active === false && this.anchors.length ) {
			active = 0;
		}

		return active;
	},

	_getCreateEventData: function() {
		return {
			tab: this.active,
			panel: !this.active.length ? $() : this._getPanelForTab( this.active )
		};
	},

	_tabKeydown: function( event ) {
		/*jshint maxcomplexity:15*/
		var focusedTab = $( this.document[0].activeElement ).closest( "li" ),
			selectedIndex = this.tabs.index( focusedTab ),
			goingForward = true;

		if ( this._handlePageNav( event ) ) {
			return;
		}

		switch ( event.keyCode ) {
			case $.ui.keyCode.RIGHT:
			case $.ui.keyCode.DOWN:
				selectedIndex++;
				break;
			case $.ui.keyCode.UP:
			case $.ui.keyCode.LEFT:
				goingForward = false;
				selectedIndex--;
				break;
			case $.ui.keyCode.END:
				selectedIndex = this.anchors.length - 1;
				break;
			case $.ui.keyCode.HOME:
				selectedIndex = 0;
				break;
			case $.ui.keyCode.SPACE:
				// Activate only, no collapsing
				event.preventDefault();
				clearTimeout( this.activating );
				this._activate( selectedIndex );
				return;
			case $.ui.keyCode.ENTER:
				// Toggle (cancel delayed activation, allow collapsing)
				event.preventDefault();
				clearTimeout( this.activating );
				// Determine if we should collapse or activate
				this._activate( selectedIndex === this.options.active ? false : selectedIndex );
				return;
			default:
				return;
		}

		// Focus the appropriate tab, based on which key was pressed
		event.preventDefault();
		clearTimeout( this.activating );
		selectedIndex = this._focusNextTab( selectedIndex, goingForward );

		// Navigating with control key will prevent automatic activation
		if ( !event.ctrlKey ) {
			// Update aria-selected immediately so that AT think the tab is already selected.
			// Otherwise AT may confuse the user by stating that they need to activate the tab,
			// but the tab will already be activated by the time the announcement finishes.
			focusedTab.attr( "aria-selected", "false" );
			this.tabs.eq( selectedIndex ).attr( "aria-selected", "true" );

			this.activating = this._delay(function() {
				this.option( "active", selectedIndex );
			}, this.delay );
		}
	},

	_panelKeydown: function( event ) {
		if ( this._handlePageNav( event ) ) {
			return;
		}

		// Ctrl+up moves focus to the current tab
		if ( event.ctrlKey && event.keyCode === $.ui.keyCode.UP ) {
			event.preventDefault();
			this.active.focus();
		}
	},

	// Alt+page up/down moves focus to the previous/next tab (and activates)
	_handlePageNav: function( event ) {
		if ( event.altKey && event.keyCode === $.ui.keyCode.PAGE_UP ) {
			this._activate( this._focusNextTab( this.options.active - 1, false ) );
			return true;
		}
		if ( event.altKey && event.keyCode === $.ui.keyCode.PAGE_DOWN ) {
			this._activate( this._focusNextTab( this.options.active + 1, true ) );
			return true;
		}
	},

	_findNextTab: function( index, goingForward ) {
		var lastTabIndex = this.tabs.length - 1;

		function constrain() {
			if ( index > lastTabIndex ) {
				index = 0;
			}
			if ( index < 0 ) {
				index = lastTabIndex;
			}
			return index;
		}

		while ( $.inArray( constrain(), this.options.disabled ) !== -1 ) {
			index = goingForward ? index + 1 : index - 1;
		}

		return index;
	},

	_focusNextTab: function( index, goingForward ) {
		index = this._findNextTab( index, goingForward );
		this.tabs.eq( index ).focus();
		return index;
	},

	_setOption: function( key, value ) {
		if ( key === "active" ) {
			// _activate() will handle invalid values and update this.options
			this._activate( value );
			return;
		}

		if ( key === "disabled" ) {
			// don't use the widget factory's disabled handling
			this._setupDisabled( value );
			return;
		}

		this._super( key, value);

		if ( key === "collapsible" ) {
			this.element.toggleClass( "ui-tabs-collapsible", value );
			// Setting collapsible: false while collapsed; open first panel
			if ( !value && this.options.active === false ) {
				this._activate( 0 );
			}
		}

		if ( key === "event" ) {
			this._setupEvents( value );
		}

		if ( key === "heightStyle" ) {
			this._setupHeightStyle( value );
		}
	},

	_tabId: function( tab ) {
		return tab.attr( "aria-controls" ) || "ui-tabs-" + getNextTabId();
	},

	_sanitizeSelector: function( hash ) {
		return hash ? hash.replace( /[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g, "\\$&" ) : "";
	},

	refresh: function() {
		var options = this.options,
			lis = this.tablist.children( ":has(a[href])" );

		// get disabled tabs from class attribute from HTML
		// this will get converted to a boolean if needed in _refresh()
		options.disabled = $.map( lis.filter( ".ui-state-disabled" ), function( tab ) {
			return lis.index( tab );
		});

		this._processTabs();

		// was collapsed or no tabs
		if ( options.active === false || !this.anchors.length ) {
			options.active = false;
			this.active = $();
		// was active, but active tab is gone
		} else if ( this.active.length && !$.contains( this.tablist[ 0 ], this.active[ 0 ] ) ) {
			// all remaining tabs are disabled
			if ( this.tabs.length === options.disabled.length ) {
				options.active = false;
				this.active = $();
			// activate previous tab
			} else {
				this._activate( this._findNextTab( Math.max( 0, options.active - 1 ), false ) );
			}
		// was active, active tab still exists
		} else {
			// make sure active index is correct
			options.active = this.tabs.index( this.active );
		}

		this._refresh();
	},

	_refresh: function() {
		this._setupDisabled( this.options.disabled );
		this._setupEvents( this.options.event );
		this._setupHeightStyle( this.options.heightStyle );

		this.tabs.not( this.active ).attr({
			"aria-selected": "false",
			tabIndex: -1
		});
		this.panels.not( this._getPanelForTab( this.active ) )
			.hide()
			.attr({
				"aria-expanded": "false",
				"aria-hidden": "true"
			});

		// Make sure one tab is in the tab order
		if ( !this.active.length ) {
			this.tabs.eq( 0 ).attr( "tabIndex", 0 );
		} else {
			this.active
				.addClass( "ui-tabs-active ui-state-active" )
				.attr({
					"aria-selected": "true",
					tabIndex: 0
				});
			this._getPanelForTab( this.active )
				.show()
				.attr({
					"aria-expanded": "true",
					"aria-hidden": "false"
				});
		}
	},

	_processTabs: function() {
		var that = this;

		this.tablist = this._getList()
			.addClass( "ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all" )
			.attr( "role", "tablist" );

		this.tabs = this.tablist.find( "> li:has(a[href])" )
			.addClass( "ui-state-default ui-corner-top" )
			.attr({
				role: "tab",
				tabIndex: -1
			});

		this.anchors = this.tabs.map(function() {
				return $( "a", this )[ 0 ];
			})
			.addClass( "ui-tabs-anchor" )
			.attr({
				role: "presentation",
				tabIndex: -1
			});

		this.panels = $();

		this.anchors.each(function( i, anchor ) {
			var selector, panel, panelId,
				anchorId = $( anchor ).uniqueId().attr( "id" ),
				tab = $( anchor ).closest( "li" ),
				originalAriaControls = tab.attr( "aria-controls" );

			// inline tab
			if ( isLocal( anchor ) ) {
				selector = anchor.hash;
				panel = that.element.find( that._sanitizeSelector( selector ) );
			// remote tab
			} else {
				panelId = that._tabId( tab );
				selector = "#" + panelId;
				panel = that.element.find( selector );
				if ( !panel.length ) {
					panel = that._createPanel( panelId );
					panel.insertAfter( that.panels[ i - 1 ] || that.tablist );
				}
				panel.attr( "aria-live", "polite" );
			}

			if ( panel.length) {
				that.panels = that.panels.add( panel );
			}
			if ( originalAriaControls ) {
				tab.data( "ui-tabs-aria-controls", originalAriaControls );
			}
			tab.attr({
				"aria-controls": selector.substring( 1 ),
				"aria-labelledby": anchorId
			});
			panel.attr( "aria-labelledby", anchorId );
		});

		this.panels
			.addClass( "ui-tabs-panel ui-widget-content ui-corner-bottom" )
			.attr( "role", "tabpanel" );
	},

	// allow overriding how to find the list for rare usage scenarios (#7715)
	_getList: function() {
		return this.element.find( "ol,ul" ).eq( 0 );
	},

	_createPanel: function( id ) {
		return $( "<div>" )
			.attr( "id", id )
			.addClass( "ui-tabs-panel ui-widget-content ui-corner-bottom" )
			.data( "ui-tabs-destroy", true );
	},

	_setupDisabled: function( disabled ) {
		if ( $.isArray( disabled ) ) {
			if ( !disabled.length ) {
				disabled = false;
			} else if ( disabled.length === this.anchors.length ) {
				disabled = true;
			}
		}

		// disable tabs
		for ( var i = 0, li; ( li = this.tabs[ i ] ); i++ ) {
			if ( disabled === true || $.inArray( i, disabled ) !== -1 ) {
				$( li )
					.addClass( "ui-state-disabled" )
					.attr( "aria-disabled", "true" );
			} else {
				$( li )
					.removeClass( "ui-state-disabled" )
					.removeAttr( "aria-disabled" );
			}
		}

		this.options.disabled = disabled;
	},

	_setupEvents: function( event ) {
		var events = {
			click: function( event ) {
				event.preventDefault();
			}
		};
		if ( event ) {
			$.each( event.split(" "), function( index, eventName ) {
				events[ eventName ] = "_eventHandler";
			});
		}

		this._off( this.anchors.add( this.tabs ).add( this.panels ) );
		this._on( this.anchors, events );
		this._on( this.tabs, { keydown: "_tabKeydown" } );
		this._on( this.panels, { keydown: "_panelKeydown" } );

		this._focusable( this.tabs );
		this._hoverable( this.tabs );
	},

	_setupHeightStyle: function( heightStyle ) {
		var maxHeight,
			parent = this.element.parent();

		if ( heightStyle === "fill" ) {
			maxHeight = parent.height();
			maxHeight -= this.element.outerHeight() - this.element.height();

			this.element.siblings( ":visible" ).each(function() {
				var elem = $( this ),
					position = elem.css( "position" );

				if ( position === "absolute" || position === "fixed" ) {
					return;
				}
				maxHeight -= elem.outerHeight( true );
			});

			this.element.children().not( this.panels ).each(function() {
				maxHeight -= $( this ).outerHeight( true );
			});

			this.panels.each(function() {
				$( this ).height( Math.max( 0, maxHeight -
					$( this ).innerHeight() + $( this ).height() ) );
			})
			.css( "overflow", "auto" );
		} else if ( heightStyle === "auto" ) {
			maxHeight = 0;
			this.panels.each(function() {
				maxHeight = Math.max( maxHeight, $( this ).height( "" ).height() );
			}).height( maxHeight );
		}
	},

	_eventHandler: function( event ) {
		var options = this.options,
			active = this.active,
			anchor = $( event.currentTarget ),
			tab = anchor.closest( "li" ),
			clickedIsActive = tab[ 0 ] === active[ 0 ],
			collapsing = clickedIsActive && options.collapsible,
			toShow = collapsing ? $() : this._getPanelForTab( tab ),
			toHide = !active.length ? $() : this._getPanelForTab( active ),
			eventData = {
				oldTab: active,
				oldPanel: toHide,
				newTab: collapsing ? $() : tab,
				newPanel: toShow
			};

		event.preventDefault();

		if ( tab.hasClass( "ui-state-disabled" ) ||
				// tab is already loading
				tab.hasClass( "ui-tabs-loading" ) ||
				// can't switch durning an animation
				this.running ||
				// click on active header, but not collapsible
				( clickedIsActive && !options.collapsible ) ||
				// allow canceling activation
				( this._trigger( "beforeActivate", event, eventData ) === false ) ) {
			return;
		}

		options.active = collapsing ? false : this.tabs.index( tab );

		this.active = clickedIsActive ? $() : tab;
		if ( this.xhr ) {
			this.xhr.abort();
		}

		if ( !toHide.length && !toShow.length ) {
			$.error( "jQuery UI Tabs: Mismatching fragment identifier." );
		}

		if ( toShow.length ) {
			this.load( this.tabs.index( tab ), event );
		}
		this._toggle( event, eventData );
	},

	// handles show/hide for selecting tabs
	_toggle: function( event, eventData ) {
		var that = this,
			toShow = eventData.newPanel,
			toHide = eventData.oldPanel;

		this.running = true;

		function complete() {
			that.running = false;
			that._trigger( "activate", event, eventData );
		}

		function show() {
			eventData.newTab.closest( "li" ).addClass( "ui-tabs-active ui-state-active" );

			if ( toShow.length && that.options.show ) {
				that._show( toShow, that.options.show, complete );
			} else {
				toShow.show();
				complete();
			}
		}

		// start out by hiding, then showing, then completing
		if ( toHide.length && this.options.hide ) {
			this._hide( toHide, this.options.hide, function() {
				eventData.oldTab.closest( "li" ).removeClass( "ui-tabs-active ui-state-active" );
				show();
			});
		} else {
			eventData.oldTab.closest( "li" ).removeClass( "ui-tabs-active ui-state-active" );
			toHide.hide();
			show();
		}

		toHide.attr({
			"aria-expanded": "false",
			"aria-hidden": "true"
		});
		eventData.oldTab.attr( "aria-selected", "false" );
		// If we're switching tabs, remove the old tab from the tab order.
		// If we're opening from collapsed state, remove the previous tab from the tab order.
		// If we're collapsing, then keep the collapsing tab in the tab order.
		if ( toShow.length && toHide.length ) {
			eventData.oldTab.attr( "tabIndex", -1 );
		} else if ( toShow.length ) {
			this.tabs.filter(function() {
				return $( this ).attr( "tabIndex" ) === 0;
			})
			.attr( "tabIndex", -1 );
		}

		toShow.attr({
			"aria-expanded": "true",
			"aria-hidden": "false"
		});
		eventData.newTab.attr({
			"aria-selected": "true",
			tabIndex: 0
		});
	},

	_activate: function( index ) {
		var anchor,
			active = this._findActive( index );

		// trying to activate the already active panel
		if ( active[ 0 ] === this.active[ 0 ] ) {
			return;
		}

		// trying to collapse, simulate a click on the current active header
		if ( !active.length ) {
			active = this.active;
		}

		anchor = active.find( ".ui-tabs-anchor" )[ 0 ];
		this._eventHandler({
			target: anchor,
			currentTarget: anchor,
			preventDefault: $.noop
		});
	},

	_findActive: function( index ) {
		return index === false ? $() : this.tabs.eq( index );
	},

	_getIndex: function( index ) {
		// meta-function to give users option to provide a href string instead of a numerical index.
		if ( typeof index === "string" ) {
			index = this.anchors.index( this.anchors.filter( "[href$='" + index + "']" ) );
		}

		return index;
	},

	_destroy: function() {
		if ( this.xhr ) {
			this.xhr.abort();
		}

		this.element.removeClass( "ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible" );

		this.tablist
			.removeClass( "ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all" )
			.removeAttr( "role" );

		this.anchors
			.removeClass( "ui-tabs-anchor" )
			.removeAttr( "role" )
			.removeAttr( "tabIndex" )
			.removeUniqueId();

		this.tabs.add( this.panels ).each(function() {
			if ( $.data( this, "ui-tabs-destroy" ) ) {
				$( this ).remove();
			} else {
				$( this )
					.removeClass( "ui-state-default ui-state-active ui-state-disabled " +
						"ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel" )
					.removeAttr( "tabIndex" )
					.removeAttr( "aria-live" )
					.removeAttr( "aria-busy" )
					.removeAttr( "aria-selected" )
					.removeAttr( "aria-labelledby" )
					.removeAttr( "aria-hidden" )
					.removeAttr( "aria-expanded" )
					.removeAttr( "role" );
			}
		});

		this.tabs.each(function() {
			var li = $( this ),
				prev = li.data( "ui-tabs-aria-controls" );
			if ( prev ) {
				li
					.attr( "aria-controls", prev )
					.removeData( "ui-tabs-aria-controls" );
			} else {
				li.removeAttr( "aria-controls" );
			}
		});

		this.panels.show();

		if ( this.options.heightStyle !== "content" ) {
			this.panels.css( "height", "" );
		}
	},

	enable: function( index ) {
		var disabled = this.options.disabled;
		if ( disabled === false ) {
			return;
		}

		if ( index === undefined ) {
			disabled = false;
		} else {
			index = this._getIndex( index );
			if ( $.isArray( disabled ) ) {
				disabled = $.map( disabled, function( num ) {
					return num !== index ? num : null;
				});
			} else {
				disabled = $.map( this.tabs, function( li, num ) {
					return num !== index ? num : null;
				});
			}
		}
		this._setupDisabled( disabled );
	},

	disable: function( index ) {
		var disabled = this.options.disabled;
		if ( disabled === true ) {
			return;
		}

		if ( index === undefined ) {
			disabled = true;
		} else {
			index = this._getIndex( index );
			if ( $.inArray( index, disabled ) !== -1 ) {
				return;
			}
			if ( $.isArray( disabled ) ) {
				disabled = $.merge( [ index ], disabled ).sort();
			} else {
				disabled = [ index ];
			}
		}
		this._setupDisabled( disabled );
	},

	load: function( index, event ) {
		index = this._getIndex( index );
		var that = this,
			tab = this.tabs.eq( index ),
			anchor = tab.find( ".ui-tabs-anchor" ),
			panel = this._getPanelForTab( tab ),
			eventData = {
				tab: tab,
				panel: panel
			};

		// not remote
		if ( isLocal( anchor[ 0 ] ) ) {
			return;
		}

		this.xhr = $.ajax( this._ajaxSettings( anchor, event, eventData ) );

		// support: jQuery <1.8
		// jQuery <1.8 returns false if the request is canceled in beforeSend,
		// but as of 1.8, $.ajax() always returns a jqXHR object.
		if ( this.xhr && this.xhr.statusText !== "canceled" ) {
			tab.addClass( "ui-tabs-loading" );
			panel.attr( "aria-busy", "true" );

			this.xhr
				.success(function( response ) {
					// support: jQuery <1.8
					// http://bugs.jquery.com/ticket/11778
					setTimeout(function() {
						panel.html( response );
						that._trigger( "load", event, eventData );
					}, 1 );
				})
				.complete(function( jqXHR, status ) {
					// support: jQuery <1.8
					// http://bugs.jquery.com/ticket/11778
					setTimeout(function() {
						if ( status === "abort" ) {
							that.panels.stop( false, true );
						}

						tab.removeClass( "ui-tabs-loading" );
						panel.removeAttr( "aria-busy" );

						if ( jqXHR === that.xhr ) {
							delete that.xhr;
						}
					}, 1 );
				});
		}
	},

	_ajaxSettings: function( anchor, event, eventData ) {
		var that = this;
		return {
			url: anchor.attr( "href" ),
			beforeSend: function( jqXHR, settings ) {
				return that._trigger( "beforeLoad", event,
					$.extend( { jqXHR : jqXHR, ajaxSettings: settings }, eventData ) );
			}
		};
	},

	_getPanelForTab: function( tab ) {
		var id = $( tab ).attr( "aria-controls" );
		return this.element.find( this._sanitizeSelector( "#" + id ) );
	}
});

})( jQuery );

(function( $ ) {

var increments = 0;

function addDescribedBy( elem, id ) {
	var describedby = (elem.attr( "aria-describedby" ) || "").split( /\s+/ );
	describedby.push( id );
	elem
		.data( "ui-tooltip-id", id )
		.attr( "aria-describedby", $.trim( describedby.join( " " ) ) );
}

function removeDescribedBy( elem ) {
	var id = elem.data( "ui-tooltip-id" ),
		describedby = (elem.attr( "aria-describedby" ) || "").split( /\s+/ ),
		index = $.inArray( id, describedby );
	if ( index !== -1 ) {
		describedby.splice( index, 1 );
	}

	elem.removeData( "ui-tooltip-id" );
	describedby = $.trim( describedby.join( " " ) );
	if ( describedby ) {
		elem.attr( "aria-describedby", describedby );
	} else {
		elem.removeAttr( "aria-describedby" );
	}
}

$.widget( "ui.tooltip", {
	version: "1.10.3",
	options: {
		content: function() {
			// support: IE<9, Opera in jQuery <1.7
			// .text() can't accept undefined, so coerce to a string
			var title = $( this ).attr( "title" ) || "";
			// Escape title, since we're going from an attribute to raw HTML
			return $( "<a>" ).text( title ).html();
		},
		hide: true,
		// Disabled elements have inconsistent behavior across browsers (#8661)
		items: "[title]:not([disabled])",
		position: {
			my: "left top+15",
			at: "left bottom",
			collision: "flipfit flip"
		},
		show: true,
		tooltipClass: null,
		track: false,

		// callbacks
		close: null,
		open: null
	},

	_create: function() {
		this._on({
			mouseover: "open",
			focusin: "open"
		});

		// IDs of generated tooltips, needed for destroy
		this.tooltips = {};
		// IDs of parent tooltips where we removed the title attribute
		this.parents = {};

		if ( this.options.disabled ) {
			this._disable();
		}
	},

	_setOption: function( key, value ) {
		var that = this;

		if ( key === "disabled" ) {
			this[ value ? "_disable" : "_enable" ]();
			this.options[ key ] = value;
			// disable element style changes
			return;
		}

		this._super( key, value );

		if ( key === "content" ) {
			$.each( this.tooltips, function( id, element ) {
				that._updateContent( element );
			});
		}
	},

	_disable: function() {
		var that = this;

		// close open tooltips
		$.each( this.tooltips, function( id, element ) {
			var event = $.Event( "blur" );
			event.target = event.currentTarget = element[0];
			that.close( event, true );
		});

		// remove title attributes to prevent native tooltips
		this.element.find( this.options.items ).addBack().each(function() {
			var element = $( this );
			if ( element.is( "[title]" ) ) {
				element
					.data( "ui-tooltip-title", element.attr( "title" ) )
					.attr( "title", "" );
			}
		});
	},

	_enable: function() {
		// restore title attributes
		this.element.find( this.options.items ).addBack().each(function() {
			var element = $( this );
			if ( element.data( "ui-tooltip-title" ) ) {
				element.attr( "title", element.data( "ui-tooltip-title" ) );
			}
		});
	},

	open: function( event ) {
		var that = this,
			target = $( event ? event.target : this.element )
				// we need closest here due to mouseover bubbling,
				// but always pointing at the same event target
				.closest( this.options.items );

		// No element to show a tooltip for or the tooltip is already open
		if ( !target.length || target.data( "ui-tooltip-id" ) ) {
			return;
		}

		if ( target.attr( "title" ) ) {
			target.data( "ui-tooltip-title", target.attr( "title" ) );
		}

		target.data( "ui-tooltip-open", true );

		// kill parent tooltips, custom or native, for hover
		if ( event && event.type === "mouseover" ) {
			target.parents().each(function() {
				var parent = $( this ),
					blurEvent;
				if ( parent.data( "ui-tooltip-open" ) ) {
					blurEvent = $.Event( "blur" );
					blurEvent.target = blurEvent.currentTarget = this;
					that.close( blurEvent, true );
				}
				if ( parent.attr( "title" ) ) {
					parent.uniqueId();
					that.parents[ this.id ] = {
						element: this,
						title: parent.attr( "title" )
					};
					parent.attr( "title", "" );
				}
			});
		}

		this._updateContent( target, event );
	},

	_updateContent: function( target, event ) {
		var content,
			contentOption = this.options.content,
			that = this,
			eventType = event ? event.type : null;

		if ( typeof contentOption === "string" ) {
			return this._open( event, target, contentOption );
		}

		content = contentOption.call( target[0], function( response ) {
			// ignore async response if tooltip was closed already
			if ( !target.data( "ui-tooltip-open" ) ) {
				return;
			}
			// IE may instantly serve a cached response for ajax requests
			// delay this call to _open so the other call to _open runs first
			that._delay(function() {
				// jQuery creates a special event for focusin when it doesn't
				// exist natively. To improve performance, the native event
				// object is reused and the type is changed. Therefore, we can't
				// rely on the type being correct after the event finished
				// bubbling, so we set it back to the previous value. (#8740)
				if ( event ) {
					event.type = eventType;
				}
				this._open( event, target, response );
			});
		});
		if ( content ) {
			this._open( event, target, content );
		}
	},

	_open: function( event, target, content ) {
		var tooltip, events, delayedShow,
			positionOption = $.extend( {}, this.options.position );

		if ( !content ) {
			return;
		}

		// Content can be updated multiple times. If the tooltip already
		// exists, then just update the content and bail.
		tooltip = this._find( target );
		if ( tooltip.length ) {
			tooltip.find( ".ui-tooltip-content" ).html( content );
			return;
		}

		// if we have a title, clear it to prevent the native tooltip
		// we have to check first to avoid defining a title if none exists
		// (we don't want to cause an element to start matching [title])
		//
		// We use removeAttr only for key events, to allow IE to export the correct
		// accessible attributes. For mouse events, set to empty string to avoid
		// native tooltip showing up (happens only when removing inside mouseover).
		if ( target.is( "[title]" ) ) {
			if ( event && event.type === "mouseover" ) {
				target.attr( "title", "" );
			} else {
				target.removeAttr( "title" );
			}
		}

		tooltip = this._tooltip( target );
		addDescribedBy( target, tooltip.attr( "id" ) );
		tooltip.find( ".ui-tooltip-content" ).html( content );

		function position( event ) {
			positionOption.of = event;
			if ( tooltip.is( ":hidden" ) ) {
				return;
			}
			tooltip.position( positionOption );
		}
		if ( this.options.track && event && /^mouse/.test( event.type ) ) {
			this._on( this.document, {
				mousemove: position
			});
			// trigger once to override element-relative positioning
			position( event );
		} else {
			tooltip.position( $.extend({
				of: target
			}, this.options.position ) );
		}

		tooltip.hide();

		this._show( tooltip, this.options.show );
		// Handle tracking tooltips that are shown with a delay (#8644). As soon
		// as the tooltip is visible, position the tooltip using the most recent
		// event.
		if ( this.options.show && this.options.show.delay ) {
			delayedShow = this.delayedShow = setInterval(function() {
				if ( tooltip.is( ":visible" ) ) {
					position( positionOption.of );
					clearInterval( delayedShow );
				}
			}, $.fx.interval );
		}

		this._trigger( "open", event, { tooltip: tooltip } );

		events = {
			keyup: function( event ) {
				if ( event.keyCode === $.ui.keyCode.ESCAPE ) {
					var fakeEvent = $.Event(event);
					fakeEvent.currentTarget = target[0];
					this.close( fakeEvent, true );
				}
			},
			remove: function() {
				this._removeTooltip( tooltip );
			}
		};
		if ( !event || event.type === "mouseover" ) {
			events.mouseleave = "close";
		}
		if ( !event || event.type === "focusin" ) {
			events.focusout = "close";
		}
		this._on( true, target, events );
	},

	close: function( event ) {
		var that = this,
			target = $( event ? event.currentTarget : this.element ),
			tooltip = this._find( target );

		// disabling closes the tooltip, so we need to track when we're closing
		// to avoid an infinite loop in case the tooltip becomes disabled on close
		if ( this.closing ) {
			return;
		}

		// Clear the interval for delayed tracking tooltips
		clearInterval( this.delayedShow );

		// only set title if we had one before (see comment in _open())
		if ( target.data( "ui-tooltip-title" ) ) {
			target.attr( "title", target.data( "ui-tooltip-title" ) );
		}

		removeDescribedBy( target );

		tooltip.stop( true );
		this._hide( tooltip, this.options.hide, function() {
			that._removeTooltip( $( this ) );
		});

		target.removeData( "ui-tooltip-open" );
		this._off( target, "mouseleave focusout keyup" );
		// Remove 'remove' binding only on delegated targets
		if ( target[0] !== this.element[0] ) {
			this._off( target, "remove" );
		}
		this._off( this.document, "mousemove" );

		if ( event && event.type === "mouseleave" ) {
			$.each( this.parents, function( id, parent ) {
				$( parent.element ).attr( "title", parent.title );
				delete that.parents[ id ];
			});
		}

		this.closing = true;
		this._trigger( "close", event, { tooltip: tooltip } );
		this.closing = false;
	},

	_tooltip: function( element ) {
		var id = "ui-tooltip-" + increments++,
			tooltip = $( "<div>" )
				.attr({
					id: id,
					role: "tooltip"
				})
				.addClass( "ui-tooltip ui-widget ui-corner-all ui-widget-content " +
					( this.options.tooltipClass || "" ) );
		$( "<div>" )
			.addClass( "ui-tooltip-content" )
			.appendTo( tooltip );
		tooltip.appendTo( this.document[0].body );
		this.tooltips[ id ] = element;
		return tooltip;
	},

	_find: function( target ) {
		var id = target.data( "ui-tooltip-id" );
		return id ? $( "#" + id ) : $();
	},

	_removeTooltip: function( tooltip ) {
		tooltip.remove();
		delete this.tooltips[ tooltip.attr( "id" ) ];
	},

	_destroy: function() {
		var that = this;

		// close open tooltips
		$.each( this.tooltips, function( id, element ) {
			// Delegate to close method to handle common cleanup
			var event = $.Event( "blur" );
			event.target = event.currentTarget = element[0];
			that.close( event, true );

			// Remove immediately; destroying an open tooltip doesn't use the
			// hide animation
			$( "#" + id ).remove();

			// Restore the title
			if ( element.data( "ui-tooltip-title" ) ) {
				element.attr( "title", element.data( "ui-tooltip-title" ) );
				element.removeData( "ui-tooltip-title" );
			}
		});
	}
});

}( jQuery ) );
         20190128165852               "                  D                  / * !   j Q u e r y   U I   -   v 1 . 1 0 . 3   -   2 0 1 3 - 0 5 - 0 3 
 *   h t t p : / / j q u e r y u i . c o m 
 *   I n c l u d e s :   j q u e r y . u i . c o r e . j s ,   j q u e r y . u i . w i d g e t . j s ,   j q u e r y . u i . m o u s e . j s ,   j q u e r y . u i . d r a g g a b l e . j s ,   j q u e r y . u i . d r o p p a b l e . j s ,   j q u e r y . u i . r e s i z a b l e . j s ,   j q u e r y . u i . s e l e c t a b l e . j s ,   j q u e r y . u i . s o r t a b l e . j s ,   j q u e r y . u i . e f f e c t . j s ,   j q u e r y . u i . a c c o r d i o n . j s ,   j q u e r y . u i . a u t o c o m p l e t e . j s ,   j q u e r y . u i . b u t t o n . j s ,   j q u e r y . u i . d a t e p i c k e r . j s ,   j q u e r y . u i . d i a l o g . j s ,   j q u e r y . u i . e f f e c t - b l i n d . j s ,   j q u e r y . u i . e f f e c t - b o u n c e . j s ,   j q u e r y . u i . e f f e c t - c l i p . j s ,   j q u e r y . u i . e f f e c t - d r o p . j s ,   j q u e r y . u i . e f f e c t - e x p l o d e . j s ,   j q u e r y . u i . e f f e c t - f a d e . j s ,   j q u e r y . u i . e f f e c t - f o l d . j s ,   j q u e r y . u i . e f f e c t - h i g h l i g h t . j s ,   j q u e r y . u i . e f f e c t - p u l s a t e . j s ,   j q u e r y . u i . e f f e c t - s c a l e . j s ,   j q u e r y . u i . e f f e c t - s h a k e . j s ,   j q u e r y . u i . e f f e c t - s l i d e . j s ,   j q u e r y . u i . e f f e c t - t r a n s f e r . j s ,   j q u e r y . u i . m e n u . j s ,   j q u e r y . u i . p o s i t i o n . j s ,   j q u e r y . u i . p r o g r e s s b a r . j s ,   j q u e r y . u i . s l i d e r . j s ,   j q u e r y . u i . s p i n n e r . j s ,   j q u e r y . u i . t a b s . j s ,   j q u e r y . u i . t o o l t i p . j s 
 *   C o p y r i g h t   2 0 1 3   j Q u e r y   F o u n d a t i o n   a n d   o t h e r   c o n t r i b u t o r s ;   L i c e n s e d   M I T   * / 
 ( f u n c t i o n (   $ ,   u n d e f i n e d   )   { 
 
 v a r   u u i d   =   0 , 
 	 r u n i q u e I d   =   / ^ u i - i d - \ d + $ / ; 
 
 / /   $ . u i   m i g h t   e x i s t   f r o m   c o m p o n e n t s   w i t h   n o   d e p e n d e n c i e s ,   e . g . ,   $ . u i . p o s i t i o n 
 $ . u i   =   $ . u i   | |   { } ; 
 
 $ . e x t e n d (   $ . u i ,   { 
 	 v e r s i o n :   " 1 . 1 0 . 3 " , 
 
 	 k e y C o d e :   { 
 	 	 B A C K S P A C E :   8 , 
 	 	 C O M M A :   1 8 8 , 
 	 	 D E L E T E :   4 6 , 
 	 	 D O W N :   4 0 , 
 	 	 E N D :   3 5 , 
 	 	 E N T E R :   1 3 , 
 	 	 E S C A P E :   2 7 , 
 	 	 H O M E :   3 6 , 
 	 	 L E F T :   3 7 , 
 	 	 N U M P A D _ A D D :   1 0 7 , 
 	 	 N U M P A D _ D E C I M A L :   1 1 0 , 
 	 	 N U M P A D _ D I V I D E :   1 1 1 , 
 	 	 N U M P A D _ E N T E R :   1 0 8 , 
 	 	 N U M P A D _ M U L T I P L Y :   1 0 6 , 
 	 	 N U M P A D _ S U B T R A C T :   1 0 9 , 
 	 	 P A G E _ D O W N :   3 4 , 
 	 	 P A G E _ U P :   3 3 , 
 	 	 P E R I O D :   1 9 0 , 
 	 	 R I G H T :   3 9 , 
 	 	 S P A C E :   3 2 , 
 	 	 T A B :   9 , 
 	 	 U P :   3 8 
 	 } 
 } ) ; 
 
 / /   p l u g i n s 
 $ . f n . e x t e n d ( { 
 	 f o c u s :   ( f u n c t i o n (   o r i g   )   { 
 	 	 r e t u r n   f u n c t i o n (   d e l a y ,   f n   )   { 
 	 	 	 r e t u r n   t y p e o f   d e l a y   = = =   " n u m b e r "   ? 
 	 	 	 	 t h i s . e a c h ( f u n c t i o n ( )   { 
 	 	 	 	 	 v a r   e l e m   =   t h i s ; 
 	 	 	 	 	 s e t T i m e o u t ( f u n c t i o n ( )   { 
 	 	 	 	 	 	 $ (   e l e m   ) . f o c u s ( ) ; 
 	 	 	 	 	 	 i f   (   f n   )   { 
 	 	 	 	 	 	 	 f n . c a l l (   e l e m   ) ; 
 	 	 	 	 	 	 } 
 	 	 	 	 	 } ,   d e l a y   ) ; 
 	 	 	 	 } )   : 
 	 	 	 	 o r i g . a p p l y (   t h i s ,   a r g u m e n t s   ) ; 
 	 	 } ; 
 	 } ) (   $ . f n . f o c u s   ) , 
 
 	 s c r o l l P a r e n t :   f u n c t i o n ( )   { 
 	 	 v a r   s c r o l l P a r e n t ; 
 	 	 i f   ( ( $ . u i . i e   & &   ( / ( s t a t i c | r e l a t i v e ) / ) . t e s t ( t h i s . c s s ( " p o s i t i o n " ) ) )   | |   ( / a b s o l u t e / ) . t e s t ( t h i s . c s s ( " p o s i t i o n " ) ) )   { 
 	 	 	 s c r o l l P a r e n t   =   t h i s . p a r e n t s ( ) . f i l t e r ( f u n c t i o n ( )   { 
 	 	 	 	 r e t u r n   ( / ( r e l a t i v e | a b s o l u t e | f i x e d ) / ) . t e s t ( $ . c s s ( t h i s , " p o s i t i o n " ) )   & &   ( / ( a u t o | s c r o l l ) / ) . t e s t ( $ . c s s ( t h i s , " o v e r f l o w " ) + $ . c s s ( t h i s , " o v e r f l o w - y " ) + $ . c s s ( t h i s , " o v e r f l o w - x " ) ) ; 
 	 	 	 } ) . e q ( 0 ) ; 
 	 	 }   e l s e   { 
 	 	 	 s c r o l l P a r e n t   =   t h i s . p a r e n t s ( ) . f i l t e r ( f u n c t i o n ( )   { 
 	 	 	 	 r e t u r n   ( / ( a u t o | s c r o l l ) / ) . t e s t ( $ . c s s ( t h i s , " o v e r f l o w " ) + $ . c s s ( t h i s , " o v e r f l o w - y " ) + $ . c s s ( t h i s , " o v e r f l o w - x " ) ) ; 
 	 	 	 } ) . e q ( 0 ) ; 
 	 	 } 
 
 	 	 r e t u r n   ( / f i x e d / ) . t e s t ( t h i s . c s s ( " p o s i t i o n " ) )   | |   ! s c r o l l P a r e n t . l e n g t h   ?   $ ( d o c u m e n t )   :   s c r o l l P a r e n t ; 
 	 } , 
 
 	 z I n d e x :   f u n c t i o n (   z I n d e x   )   { 
 	 	 i f   (   z I n d e x   ! = =   u n d e f i n e d   )   { 
 	 	 	 r e t u r n   t h i s . c s s (   " z I n d e x " ,   z I n d e x   ) ; 
 	 	 } 
 
 	 	 i f   (   t h i s . l e n g t h   )   { 
 	 	 	 v a r   e l e m   =   $ (   t h i s [   0   ]   ) ,   p o s i t i o n ,   v a l u e ; 
 	 	 	 w h i l e   (   e l e m . l e n g t h   & &   e l e m [   0   ]   ! = =   d o c u m e n t   )   { 
 	 	 	 	 / /   I g n o r e   z - i n d e x   i f   p o s i t i o n   i s   s e t   t o   a   v a l u e   w h e r e   z - i n d e x   i s   i g n o r e d   b y   t h e   b r o w s e r 
 	 	 	 	 / /   T h i s   m a k e s   b e h a v i o r   o f   t h i s   f u n c t i o n   c o n s i s t e n t   a c r o s s   b r o w s e r s 
 	 	 	 	 / /   W e b K i t   a l w a y s   r e t u r n s   a u t o   i f   t h e   e l e m e n t   i s   p o s i t i o n e d 
 	 	 	 	 p o s i t i o n   =   e l e m . c s s (   " p o s i t i o n "   ) ; 
 	 	 	 	 i f   (   p o s i t i o n   = = =   " a b s o l u t e "   | |   p o s i t i o n   = = =   " r e l a t i v e "   | |   p o s i t i o n   = = =   " f i x e d "   )   { 
 	 	 	 	 	 / /   I E   r e t u r n s   0   w h e n   z I n d e x   i s   n o t   s p e c i f i e d 
 	 	 	 	 	 / /   o t h e r   b r o w s e r s   r e t u r n   a   s t r i n g 
 	 	 	 	 	 / /   w e   i g n o r e   t h e   c a s e   o f   n e s t e d   e l e m e n t s   w i t h   a n   e x p l i c i t   v a l u e   o f   0 
 	 	 	 	 	 / /   < d i v   s t y l e = " z - i n d e x :   - 1 0 ; " > < d i v   s t y l e = " z - i n d e x :   0 ; " > < / d i v > < / d i v > 
 	 	 	 	 	 v a l u e   =   p a r s e I n t (   e l e m . c s s (   " z I n d e x "   ) ,   1 0   ) ; 
 	 	 	 	 	 i f   (   ! i s N a N (   v a l u e   )   & &   v a l u e   ! = =   0   )   { 
 	 	 	 	 	 	 r e t u r n   v a l u e ; 
 	 	 	 	 	 } 
 	 	 	 	 } 
 	 	 	 	 e l e m   =   e l e m . p a r e n t ( ) ; 
 	 	 	 } 
 	 	 } 
 
 	 	 r e t u r n   0 ; 
 	 } , 
 
 	 u n i q u e I d :   f u n c t i o n ( )   { 
 	 	 r e t u r n   t h i s . e a c h ( f u n c t i o n ( )   { 
 	 	 	 i f   (   ! t h i s . i d   )   { 
 	 	 	 	 t h i s . i d   =   " u i - i d - "   +   ( + + u u i d ) ; 
 	 	 	 } 
 	 	 } ) ; 
 	 } , 
 
 	 r e m o v e U n i q u e I d :   f u n c t i o n ( )   { 
 	 	 r e t u r n   t h i s . e a c h ( f u n c t i o n ( )   { 
 	 	 	 i f   (   r u n i q u e I d . t e s t (   t h i s . i d   )   )   { 
 	 	 	 	 $ (   t h i s   ) . r e m o v e A t t r (   " i d "   ) ; 
 	 	 	 } 
 	 	 } ) ; 
 	 } 
 } ) ; 
 
 / /   s e l e c t o r s 
 f u n c t i o n   f o c u s a b l e (   e l e m e n t ,   i s T a b I n d e x N o t N a N   )   { 
 	 v a r   m a p ,   m a p N a m e ,   i m g , 
 	 	 n o d e N a m e   =   e l e m e n t . n o d e N a m e . t o L o w e r C a s e ( ) ; 
 	 i f   (   " a r e a "   = = =   n o d e N a m e   )   { 
 	 	 m a p   =   e l e m e n t . p a r e n t N o d e ; 
 	 	 m a p N a m e   =   m a p . n a m e ; 
 	 	 i f   (   ! e l e m e n t . h r e f   | |   ! m a p N a m e   | |   m a p . n o d e N a m e . t o L o w e r C a s e ( )   ! = =   " m a p "   )   { 
 	 	 	 r e t u r n   f a l s e ; 
 	 	 } 
 	 	 i m g   =   $ (   " i m g [ u s e m a p = # "   +   m a p N a m e   +   " ] "   ) [ 0 ] ; 
 	 	 r e t u r n   ! ! i m g   & &   v i s i b l e (   i m g   ) ; 
 	 } 
 	 r e t u r n   (   / i n p u t | s e l e c t | t e x t a r e a | b u t t o n | o b j e c t / . t e s t (   n o d e N a m e   )   ? 
 	 	 ! e l e m e n t . d i s a b l e d   : 
 	 	 " a "   = = =   n o d e N a m e   ? 
 	 	 	 e l e m e n t . h r e f   | |   i s T a b I n d e x N o t N a N   : 
 	 	 	 i s T a b I n d e x N o t N a N )   & & 
 	 	 / /   t h e   e l e m e n t   a n d   a l l   o f   i t s   a n c e s t o r s   m u s t   b e   v i s i b l e 
 	 	 v i s i b l e (   e l e m e n t   ) ; 
 } 
 
 f u n c t i o n   v i s i b l e (   e l e m e n t   )   { 
 	 r e t u r n   $ . e x p r . f i l t e r s . v i s i b l e (   e l e m e n t   )   & & 
 	 	 ! $ (   e l e m e n t   ) . p a r e n t s ( ) . a d d B a c k ( ) . f i l t e r ( f u n c t i o n ( )   { 
 	 	 	 r e t u r n   $ . c s s (   t h i s ,   " v i s i b i l i t y "   )   = = =   " h i d d e n " ; 
 	 	 } ) . l e n g t h ; 
 } 
 
 $ . e x t e n d (   $ . e x p r [   " : "   ] ,   { 
 	 d a t a :   $ . e x p r . c r e a t e P s e u d o   ? 
 	 	 $ . e x p r . c r e a t e P s e u d o ( f u n c t i o n (   d a t a N a m e   )   { 
 	 	 	 r e t u r n   f u n c t i o n (   e l e m   )   { 
 	 	 	 	 r e t u r n   ! ! $ . d a t a (   e l e m ,   d a t a N a m e   ) ; 
 	 	 	 } ; 
 	 	 } )   : 
 	 	 / /   s u p p o r t :   j Q u e r y   < 1 . 8 
 	 	 f u n c t i o n (   e l e m ,   i ,   m a t c h   )   { 
 	 	 	 r e t u r n   ! ! $ . d a t a (   e l e m ,   m a t c h [   3   ]   ) ; 
 	 	 } , 
 
 	 f o c u s a b l e :   f u n c t i o n (   e l e m e n t   )   { 
 	 	 r e t u r n   f o c u s a b l e (   e l e m e n t ,   ! i s N a N (   $ . a t t r (   e l e m e n t ,   " t a b i n d e x "   )   )   ) ; 
 	 } , 
 
 	 t a b b a b l e :   f u n c t i o n (   e l e m e n t   )   { 
 	 	 v a r   t a b I n d e x   =   $ . a t t r (   e l e m e n t ,   " t a b i n d e x "   ) , 
 	 	 	 i s T a b I n d e x N a N   =   i s N a N (   t a b I n d e x   ) ; 
 	 	 r e t u r n   (   i s T a b I n d e x N a N   | |   t a b I n d e x   > =   0   )   & &   f o c u s a b l e (   e l e m e n t ,   ! i s T a b I n d e x N a N   ) ; 
 	 } 
 } ) ; 
 
 / /   s u p p o r t :   j Q u e r y   < 1 . 8 
 i f   (   ! $ (   " < a > "   ) . o u t e r W i d t h (   1   ) . j q u e r y   )   { 
 	 $ . e a c h (   [   " W i d t h " ,   " H e i g h t "   ] ,   f u n c t i o n (   i ,   n a m e   )   { 
 	 	 v a r   s i d e   =   n a m e   = = =   " W i d t h "   ?   [   " L e f t " ,   " R i g h t "   ]   :   [   " T o p " ,   " B o t t o m "   ] , 
 	 	 	 t y p e   =   n a m e . t o L o w e r C a s e ( ) , 
 	 	 	 o r i g   =   { 
 	 	 	 	 i n n e r W i d t h :   $ . f n . i n n e r W i d t h , 
 	 	 	 	 i n n e r H e i g h t :   $ . f n . i n n e r H e i g h t , 
 	 	 	 	 o u t e r W i d t h :   $ . f n . o u t e r W i d t h , 
 	 	 	 	 o u t e r H e i g h t :   $ . f n . o u t e r H e i g h t 
 	 	 	 } ; 
 
 	 	 f u n c t i o n   r e d u c e (   e l e m ,   s i z e ,   b o r d e r ,   m a r g i n   )   { 
 	 	 	 $ . e a c h (   s i d e ,   f u n c t i o n ( )   { 
 	 	 	 	 s i z e   - =   p a r s e F l o a t (   $ . c s s (   e l e m ,   " p a d d i n g "   +   t h i s   )   )   | |   0 ; 
 	 	 	 	 i f   (   b o r d e r   )   { 
 	 	 	 	 	 s i z e   - =   p a r s e F l o a t (   $ . c s s (   e l e m ,   " b o r d e r "   +   t h i s   +   " W i d t h "   )   )   | |   0 ; 
 	 	 	 	 } 
 	 	 	 	 i f   (   m a r g i n   )   { 
 	 	 	 	 	 s i z e   - =   p a r s e F l o a t (   $ . c s s (   e l e m ,   " m a r g i n "   +   t h i s   )   )   | |   0 ; 
 	 	 	 	 } 
 	 	 	 } ) ; 
 	 	 	 r e t u r n   s i z e ; 
 	 	 } 
 
 	 	 $ . f n [   " i n n e r "   +   n a m e   ]   =   f u n c t i o n (   s i z e   )   { 
 	 	 	 i f   (   s i z e   = = =   u n d e f i n e d   )   { 
 	 	 	 	 r e t u r n   o r i g [   " i n n e r "   +   n a m e   ] . c a l l (   t h i s   ) ; 
 	 	 	 } 
 
 	 	 	 r e t u r n   t h i s . e a c h ( f u n c t i o n ( )   { 
 	 	 	 	 $ (   t h i s   ) . c s s (   t y p e ,   r e d u c e (   t h i s ,   s i z e   )   +   " p x "   ) ; 
 	 	 	 } ) ; 
 	 	 } ; 
 
 	 	 $ . f n [   " o u t e r "   +   n a m e ]   =   f u n c t i o n (   s i z e ,   m a r g i n   )   { 
 	 	 	 i f   (   t y p e o f   s i z e   ! = =   " n u m b e r "   )   { 
 	 	 	 	 r e t u r n   o r i g [   " o u t e r "   +   n a m e   ] . c a l l (   t h i s ,   s i z e   ) ; 
 	 	 	 } 
 
 	 	 	 r e t u r n   t h i s . e a c h ( f u n c t i o n ( )   { 
 	 	 	 	 $ (   t h i s ) . c s s (   t y p e ,   r e d u c e (   t h i s ,   s i z e ,   t r u e ,   m a r g i n   )   +   " p x "   ) ; 
 	 	 	 } ) ; 
 	 	 } ; 
 	 } ) ; 
 } 
 
 / /   s u p p o r t :   j Q u e r y   < 1 . 8 
 i f   (   ! $ . f n . a d d B a c k   )   { 
 	 $ . f n . a d d B a c k   =   f u n c t i o n (   s e l e c t o r   )   { 
 	 	 r e t u r n   t h i s . a d d (   s e l e c t o r   = =   n u l l   ? 
 	 	 	 t h i s . p r e v O b j e c t   :   t h i s . p r e v O b j e c t . f i l t e r (   s e l e c t o r   ) 
 	 	 ) ; 
 	 } ; 
 } 
 
 / /   s u p p o r t :   j Q u e r y   1 . 6 . 1 ,   1 . 6 . 2   ( h t t p : / / b u g s . j q u e r y . c o m / t i c k e t / 9 4 1 3 ) 
 i f   (   $ (   " < a > "   ) . d a t a (   " a - b " ,   " a "   ) . r e m o v e D a t a (   " a - b "   ) . d a t a (   " a - b "   )   )   { 
 	 $ . f n . r e m o v e D a t a   =   ( f u n c t i o n (   r e m o v e D a t a   )   { 
 	 	 r e t u r n   f u n c t i o n (   k e y   )   { 
 	 	 	 i f   (   a r g u m e n t s . l e n g t h   )   { 
 	 	 	 	 r e t u r n   r e m o v e D a t a . c a l l (   t h i s ,   $ . c a m e l C a s e (   k e y   )   ) ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 r e t u r n   r e m o v e D a t a . c a l l (   t h i s   ) ; 
 	 	 	 } 
 	 	 } ; 
 	 } ) (   $ . f n . r e m o v e D a t a   ) ; 
 } 
 
 
 
 
 
 / /   d e p r e c a t e d 
 $ . u i . i e   =   ! ! / m s i e   [ \ w . ] + / . e x e c (   n a v i g a t o r . u s e r A g e n t . t o L o w e r C a s e ( )   ) ; 
 
 $ . s u p p o r t . s e l e c t s t a r t   =   " o n s e l e c t s t a r t "   i n   d o c u m e n t . c r e a t e E l e m e n t (   " d i v "   ) ; 
 $ . f n . e x t e n d ( { 
 	 d i s a b l e S e l e c t i o n :   f u n c t i o n ( )   { 
 	 	 r e t u r n   t h i s . b i n d (   (   $ . s u p p o r t . s e l e c t s t a r t   ?   " s e l e c t s t a r t "   :   " m o u s e d o w n "   )   + 
 	 	 	 " . u i - d i s a b l e S e l e c t i o n " ,   f u n c t i o n (   e v e n t   )   { 
 	 	 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 	 	 	 } ) ; 
 	 } , 
 
 	 e n a b l e S e l e c t i o n :   f u n c t i o n ( )   { 
 	 	 r e t u r n   t h i s . u n b i n d (   " . u i - d i s a b l e S e l e c t i o n "   ) ; 
 	 } 
 } ) ; 
 
 $ . e x t e n d (   $ . u i ,   { 
 	 / /   $ . u i . p l u g i n   i s   d e p r e c a t e d .   U s e   $ . w i d g e t ( )   e x t e n s i o n s   i n s t e a d . 
 	 p l u g i n :   { 
 	 	 a d d :   f u n c t i o n (   m o d u l e ,   o p t i o n ,   s e t   )   { 
 	 	 	 v a r   i , 
 	 	 	 	 p r o t o   =   $ . u i [   m o d u l e   ] . p r o t o t y p e ; 
 	 	 	 f o r   (   i   i n   s e t   )   { 
 	 	 	 	 p r o t o . p l u g i n s [   i   ]   =   p r o t o . p l u g i n s [   i   ]   | |   [ ] ; 
 	 	 	 	 p r o t o . p l u g i n s [   i   ] . p u s h (   [   o p t i o n ,   s e t [   i   ]   ]   ) ; 
 	 	 	 } 
 	 	 } , 
 	 	 c a l l :   f u n c t i o n (   i n s t a n c e ,   n a m e ,   a r g s   )   { 
 	 	 	 v a r   i , 
 	 	 	 	 s e t   =   i n s t a n c e . p l u g i n s [   n a m e   ] ; 
 	 	 	 i f   (   ! s e t   | |   ! i n s t a n c e . e l e m e n t [   0   ] . p a r e n t N o d e   | |   i n s t a n c e . e l e m e n t [   0   ] . p a r e n t N o d e . n o d e T y p e   = = =   1 1   )   { 
 	 	 	 	 r e t u r n ; 
 	 	 	 } 
 
 	 	 	 f o r   (   i   =   0 ;   i   <   s e t . l e n g t h ;   i + +   )   { 
 	 	 	 	 i f   (   i n s t a n c e . o p t i o n s [   s e t [   i   ] [   0   ]   ]   )   { 
 	 	 	 	 	 s e t [   i   ] [   1   ] . a p p l y (   i n s t a n c e . e l e m e n t ,   a r g s   ) ; 
 	 	 	 	 } 
 	 	 	 } 
 	 	 } 
 	 } , 
 
 	 / /   o n l y   u s e d   b y   r e s i z a b l e 
 	 h a s S c r o l l :   f u n c t i o n (   e l ,   a   )   { 
 
 	 	 / / I f   o v e r f l o w   i s   h i d d e n ,   t h e   e l e m e n t   m i g h t   h a v e   e x t r a   c o n t e n t ,   b u t   t h e   u s e r   w a n t s   t o   h i d e   i t 
 	 	 i f   (   $ (   e l   ) . c s s (   " o v e r f l o w "   )   = = =   " h i d d e n " )   { 
 	 	 	 r e t u r n   f a l s e ; 
 	 	 } 
 
 	 	 v a r   s c r o l l   =   (   a   & &   a   = = =   " l e f t "   )   ?   " s c r o l l L e f t "   :   " s c r o l l T o p " , 
 	 	 	 h a s   =   f a l s e ; 
 
 	 	 i f   (   e l [   s c r o l l   ]   >   0   )   { 
 	 	 	 r e t u r n   t r u e ; 
 	 	 } 
 
 	 	 / /   T O D O :   d e t e r m i n e   w h i c h   c a s e s   a c t u a l l y   c a u s e   t h i s   t o   h a p p e n 
 	 	 / /   i f   t h e   e l e m e n t   d o e s n ' t   h a v e   t h e   s c r o l l   s e t ,   s e e   i f   i t ' s   p o s s i b l e   t o 
 	 	 / /   s e t   t h e   s c r o l l 
 	 	 e l [   s c r o l l   ]   =   1 ; 
 	 	 h a s   =   (   e l [   s c r o l l   ]   >   0   ) ; 
 	 	 e l [   s c r o l l   ]   =   0 ; 
 	 	 r e t u r n   h a s ; 
 	 } 
 } ) ; 
 
 } ) (   j Q u e r y   ) ; 
 
 ( f u n c t i o n (   $ ,   u n d e f i n e d   )   { 
 
 v a r   u u i d   =   0 , 
 	 s l i c e   =   A r r a y . p r o t o t y p e . s l i c e , 
 	 _ c l e a n D a t a   =   $ . c l e a n D a t a ; 
 $ . c l e a n D a t a   =   f u n c t i o n (   e l e m s   )   { 
 	 f o r   (   v a r   i   =   0 ,   e l e m ;   ( e l e m   =   e l e m s [ i ] )   ! =   n u l l ;   i + +   )   { 
 	 	 t r y   { 
 	 	 	 $ (   e l e m   ) . t r i g g e r H a n d l e r (   " r e m o v e "   ) ; 
 	 	 / /   h t t p : / / b u g s . j q u e r y . c o m / t i c k e t / 8 2 3 5 
 	 	 }   c a t c h (   e   )   { } 
 	 } 
 	 _ c l e a n D a t a (   e l e m s   ) ; 
 } ; 
 
 $ . w i d g e t   =   f u n c t i o n (   n a m e ,   b a s e ,   p r o t o t y p e   )   { 
 	 v a r   f u l l N a m e ,   e x i s t i n g C o n s t r u c t o r ,   c o n s t r u c t o r ,   b a s e P r o t o t y p e , 
 	 	 / /   p r o x i e d P r o t o t y p e   a l l o w s   t h e   p r o v i d e d   p r o t o t y p e   t o   r e m a i n   u n m o d i f i e d 
 	 	 / /   s o   t h a t   i t   c a n   b e   u s e d   a s   a   m i x i n   f o r   m u l t i p l e   w i d g e t s   ( # 8 8 7 6 ) 
 	 	 p r o x i e d P r o t o t y p e   =   { } , 
 	 	 n a m e s p a c e   =   n a m e . s p l i t (   " . "   ) [   0   ] ; 
 
 	 n a m e   =   n a m e . s p l i t (   " . "   ) [   1   ] ; 
 	 f u l l N a m e   =   n a m e s p a c e   +   " - "   +   n a m e ; 
 
 	 i f   (   ! p r o t o t y p e   )   { 
 	 	 p r o t o t y p e   =   b a s e ; 
 	 	 b a s e   =   $ . W i d g e t ; 
 	 } 
 
 	 / /   c r e a t e   s e l e c t o r   f o r   p l u g i n 
 	 $ . e x p r [   " : "   ] [   f u l l N a m e . t o L o w e r C a s e ( )   ]   =   f u n c t i o n (   e l e m   )   { 
 	 	 r e t u r n   ! ! $ . d a t a (   e l e m ,   f u l l N a m e   ) ; 
 	 } ; 
 
 	 $ [   n a m e s p a c e   ]   =   $ [   n a m e s p a c e   ]   | |   { } ; 
 	 e x i s t i n g C o n s t r u c t o r   =   $ [   n a m e s p a c e   ] [   n a m e   ] ; 
 	 c o n s t r u c t o r   =   $ [   n a m e s p a c e   ] [   n a m e   ]   =   f u n c t i o n (   o p t i o n s ,   e l e m e n t   )   { 
 	 	 / /   a l l o w   i n s t a n t i a t i o n   w i t h o u t   " n e w "   k e y w o r d 
 	 	 i f   (   ! t h i s . _ c r e a t e W i d g e t   )   { 
 	 	 	 r e t u r n   n e w   c o n s t r u c t o r (   o p t i o n s ,   e l e m e n t   ) ; 
 	 	 } 
 
 	 	 / /   a l l o w   i n s t a n t i a t i o n   w i t h o u t   i n i t i a l i z i n g   f o r   s i m p l e   i n h e r i t a n c e 
 	 	 / /   m u s t   u s e   " n e w "   k e y w o r d   ( t h e   c o d e   a b o v e   a l w a y s   p a s s e s   a r g s ) 
 	 	 i f   (   a r g u m e n t s . l e n g t h   )   { 
 	 	 	 t h i s . _ c r e a t e W i d g e t (   o p t i o n s ,   e l e m e n t   ) ; 
 	 	 } 
 	 } ; 
 	 / /   e x t e n d   w i t h   t h e   e x i s t i n g   c o n s t r u c t o r   t o   c a r r y   o v e r   a n y   s t a t i c   p r o p e r t i e s 
 	 $ . e x t e n d (   c o n s t r u c t o r ,   e x i s t i n g C o n s t r u c t o r ,   { 
 	 	 v e r s i o n :   p r o t o t y p e . v e r s i o n , 
 	 	 / /   c o p y   t h e   o b j e c t   u s e d   t o   c r e a t e   t h e   p r o t o t y p e   i n   c a s e   w e   n e e d   t o 
 	 	 / /   r e d e f i n e   t h e   w i d g e t   l a t e r 
 	 	 _ p r o t o :   $ . e x t e n d (   { } ,   p r o t o t y p e   ) , 
 	 	 / /   t r a c k   w i d g e t s   t h a t   i n h e r i t   f r o m   t h i s   w i d g e t   i n   c a s e   t h i s   w i d g e t   i s 
 	 	 / /   r e d e f i n e d   a f t e r   a   w i d g e t   i n h e r i t s   f r o m   i t 
 	 	 _ c h i l d C o n s t r u c t o r s :   [ ] 
 	 } ) ; 
 
 	 b a s e P r o t o t y p e   =   n e w   b a s e ( ) ; 
 	 / /   w e   n e e d   t o   m a k e   t h e   o p t i o n s   h a s h   a   p r o p e r t y   d i r e c t l y   o n   t h e   n e w   i n s t a n c e 
 	 / /   o t h e r w i s e   w e ' l l   m o d i f y   t h e   o p t i o n s   h a s h   o n   t h e   p r o t o t y p e   t h a t   w e ' r e 
 	 / /   i n h e r i t i n g   f r o m 
 	 b a s e P r o t o t y p e . o p t i o n s   =   $ . w i d g e t . e x t e n d (   { } ,   b a s e P r o t o t y p e . o p t i o n s   ) ; 
 	 $ . e a c h (   p r o t o t y p e ,   f u n c t i o n (   p r o p ,   v a l u e   )   { 
 	 	 i f   (   ! $ . i s F u n c t i o n (   v a l u e   )   )   { 
 	 	 	 p r o x i e d P r o t o t y p e [   p r o p   ]   =   v a l u e ; 
 	 	 	 r e t u r n ; 
 	 	 } 
 	 	 p r o x i e d P r o t o t y p e [   p r o p   ]   =   ( f u n c t i o n ( )   { 
 	 	 	 v a r   _ s u p e r   =   f u n c t i o n ( )   { 
 	 	 	 	 	 r e t u r n   b a s e . p r o t o t y p e [   p r o p   ] . a p p l y (   t h i s ,   a r g u m e n t s   ) ; 
 	 	 	 	 } , 
 	 	 	 	 _ s u p e r A p p l y   =   f u n c t i o n (   a r g s   )   { 
 	 	 	 	 	 r e t u r n   b a s e . p r o t o t y p e [   p r o p   ] . a p p l y (   t h i s ,   a r g s   ) ; 
 	 	 	 	 } ; 
 	 	 	 r e t u r n   f u n c t i o n ( )   { 
 	 	 	 	 v a r   _ _ s u p e r   =   t h i s . _ s u p e r , 
 	 	 	 	 	 _ _ s u p e r A p p l y   =   t h i s . _ s u p e r A p p l y , 
 	 	 	 	 	 r e t u r n V a l u e ; 
 
 	 	 	 	 t h i s . _ s u p e r   =   _ s u p e r ; 
 	 	 	 	 t h i s . _ s u p e r A p p l y   =   _ s u p e r A p p l y ; 
 
 	 	 	 	 r e t u r n V a l u e   =   v a l u e . a p p l y (   t h i s ,   a r g u m e n t s   ) ; 
 
 	 	 	 	 t h i s . _ s u p e r   =   _ _ s u p e r ; 
 	 	 	 	 t h i s . _ s u p e r A p p l y   =   _ _ s u p e r A p p l y ; 
 
 	 	 	 	 r e t u r n   r e t u r n V a l u e ; 
 	 	 	 } ; 
 	 	 } ) ( ) ; 
 	 } ) ; 
 	 c o n s t r u c t o r . p r o t o t y p e   =   $ . w i d g e t . e x t e n d (   b a s e P r o t o t y p e ,   { 
 	 	 / /   T O D O :   r e m o v e   s u p p o r t   f o r   w i d g e t E v e n t P r e f i x 
 	 	 / /   a l w a y s   u s e   t h e   n a m e   +   a   c o l o n   a s   t h e   p r e f i x ,   e . g . ,   d r a g g a b l e : s t a r t 
 	 	 / /   d o n ' t   p r e f i x   f o r   w i d g e t s   t h a t   a r e n ' t   D O M - b a s e d 
 	 	 w i d g e t E v e n t P r e f i x :   e x i s t i n g C o n s t r u c t o r   ?   b a s e P r o t o t y p e . w i d g e t E v e n t P r e f i x   :   n a m e 
 	 } ,   p r o x i e d P r o t o t y p e ,   { 
 	 	 c o n s t r u c t o r :   c o n s t r u c t o r , 
 	 	 n a m e s p a c e :   n a m e s p a c e , 
 	 	 w i d g e t N a m e :   n a m e , 
 	 	 w i d g e t F u l l N a m e :   f u l l N a m e 
 	 } ) ; 
 
 	 / /   I f   t h i s   w i d g e t   i s   b e i n g   r e d e f i n e d   t h e n   w e   n e e d   t o   f i n d   a l l   w i d g e t s   t h a t 
 	 / /   a r e   i n h e r i t i n g   f r o m   i t   a n d   r e d e f i n e   a l l   o f   t h e m   s o   t h a t   t h e y   i n h e r i t   f r o m 
 	 / /   t h e   n e w   v e r s i o n   o f   t h i s   w i d g e t .   W e ' r e   e s s e n t i a l l y   t r y i n g   t o   r e p l a c e   o n e 
 	 / /   l e v e l   i n   t h e   p r o t o t y p e   c h a i n . 
 	 i f   (   e x i s t i n g C o n s t r u c t o r   )   { 
 	 	 $ . e a c h (   e x i s t i n g C o n s t r u c t o r . _ c h i l d C o n s t r u c t o r s ,   f u n c t i o n (   i ,   c h i l d   )   { 
 	 	 	 v a r   c h i l d P r o t o t y p e   =   c h i l d . p r o t o t y p e ; 
 
 	 	 	 / /   r e d e f i n e   t h e   c h i l d   w i d g e t   u s i n g   t h e   s a m e   p r o t o t y p e   t h a t   w a s 
 	 	 	 / /   o r i g i n a l l y   u s e d ,   b u t   i n h e r i t   f r o m   t h e   n e w   v e r s i o n   o f   t h e   b a s e 
 	 	 	 $ . w i d g e t (   c h i l d P r o t o t y p e . n a m e s p a c e   +   " . "   +   c h i l d P r o t o t y p e . w i d g e t N a m e ,   c o n s t r u c t o r ,   c h i l d . _ p r o t o   ) ; 
 	 	 } ) ; 
 	 	 / /   r e m o v e   t h e   l i s t   o f   e x i s t i n g   c h i l d   c o n s t r u c t o r s   f r o m   t h e   o l d   c o n s t r u c t o r 
 	 	 / /   s o   t h e   o l d   c h i l d   c o n s t r u c t o r s   c a n   b e   g a r b a g e   c o l l e c t e d 
 	 	 d e l e t e   e x i s t i n g C o n s t r u c t o r . _ c h i l d C o n s t r u c t o r s ; 
 	 }   e l s e   { 
 	 	 b a s e . _ c h i l d C o n s t r u c t o r s . p u s h (   c o n s t r u c t o r   ) ; 
 	 } 
 
 	 $ . w i d g e t . b r i d g e (   n a m e ,   c o n s t r u c t o r   ) ; 
 } ; 
 
 $ . w i d g e t . e x t e n d   =   f u n c t i o n (   t a r g e t   )   { 
 	 v a r   i n p u t   =   s l i c e . c a l l (   a r g u m e n t s ,   1   ) , 
 	 	 i n p u t I n d e x   =   0 , 
 	 	 i n p u t L e n g t h   =   i n p u t . l e n g t h , 
 	 	 k e y , 
 	 	 v a l u e ; 
 	 f o r   (   ;   i n p u t I n d e x   <   i n p u t L e n g t h ;   i n p u t I n d e x + +   )   { 
 	 	 f o r   (   k e y   i n   i n p u t [   i n p u t I n d e x   ]   )   { 
 	 	 	 v a l u e   =   i n p u t [   i n p u t I n d e x   ] [   k e y   ] ; 
 	 	 	 i f   (   i n p u t [   i n p u t I n d e x   ] . h a s O w n P r o p e r t y (   k e y   )   & &   v a l u e   ! = =   u n d e f i n e d   )   { 
 	 	 	 	 / /   C l o n e   o b j e c t s 
 	 	 	 	 i f   (   $ . i s P l a i n O b j e c t (   v a l u e   )   )   { 
 	 	 	 	 	 t a r g e t [   k e y   ]   =   $ . i s P l a i n O b j e c t (   t a r g e t [   k e y   ]   )   ? 
 	 	 	 	 	 	 $ . w i d g e t . e x t e n d (   { } ,   t a r g e t [   k e y   ] ,   v a l u e   )   : 
 	 	 	 	 	 	 / /   D o n ' t   e x t e n d   s t r i n g s ,   a r r a y s ,   e t c .   w i t h   o b j e c t s 
 	 	 	 	 	 	 $ . w i d g e t . e x t e n d (   { } ,   v a l u e   ) ; 
 	 	 	 	 / /   C o p y   e v e r y t h i n g   e l s e   b y   r e f e r e n c e 
 	 	 	 	 }   e l s e   { 
 	 	 	 	 	 t a r g e t [   k e y   ]   =   v a l u e ; 
 	 	 	 	 } 
 	 	 	 } 
 	 	 } 
 	 } 
 	 r e t u r n   t a r g e t ; 
 } ; 
 
 $ . w i d g e t . b r i d g e   =   f u n c t i o n (   n a m e ,   o b j e c t   )   { 
 	 v a r   f u l l N a m e   =   o b j e c t . p r o t o t y p e . w i d g e t F u l l N a m e   | |   n a m e ; 
 	 $ . f n [   n a m e   ]   =   f u n c t i o n (   o p t i o n s   )   { 
 	 	 v a r   i s M e t h o d C a l l   =   t y p e o f   o p t i o n s   = = =   " s t r i n g " , 
 	 	 	 a r g s   =   s l i c e . c a l l (   a r g u m e n t s ,   1   ) , 
 	 	 	 r e t u r n V a l u e   =   t h i s ; 
 
 	 	 / /   a l l o w   m u l t i p l e   h a s h e s   t o   b e   p a s s e d   o n   i n i t 
 	 	 o p t i o n s   =   ! i s M e t h o d C a l l   & &   a r g s . l e n g t h   ? 
 	 	 	 $ . w i d g e t . e x t e n d . a p p l y (   n u l l ,   [   o p t i o n s   ] . c o n c a t ( a r g s )   )   : 
 	 	 	 o p t i o n s ; 
 
 	 	 i f   (   i s M e t h o d C a l l   )   { 
 	 	 	 t h i s . e a c h ( f u n c t i o n ( )   { 
 	 	 	 	 v a r   m e t h o d V a l u e , 
 	 	 	 	 	 i n s t a n c e   =   $ . d a t a (   t h i s ,   f u l l N a m e   ) ; 
 	 	 	 	 i f   (   ! i n s t a n c e   )   { 
 	 	 	 	 	 r e t u r n   $ . e r r o r (   " c a n n o t   c a l l   m e t h o d s   o n   "   +   n a m e   +   "   p r i o r   t o   i n i t i a l i z a t i o n ;   "   + 
 	 	 	 	 	 	 " a t t e m p t e d   t o   c a l l   m e t h o d   ' "   +   o p t i o n s   +   " ' "   ) ; 
 	 	 	 	 } 
 	 	 	 	 i f   (   ! $ . i s F u n c t i o n (   i n s t a n c e [ o p t i o n s ]   )   | |   o p t i o n s . c h a r A t (   0   )   = = =   " _ "   )   { 
 	 	 	 	 	 r e t u r n   $ . e r r o r (   " n o   s u c h   m e t h o d   ' "   +   o p t i o n s   +   " '   f o r   "   +   n a m e   +   "   w i d g e t   i n s t a n c e "   ) ; 
 	 	 	 	 } 
 	 	 	 	 m e t h o d V a l u e   =   i n s t a n c e [   o p t i o n s   ] . a p p l y (   i n s t a n c e ,   a r g s   ) ; 
 	 	 	 	 i f   (   m e t h o d V a l u e   ! = =   i n s t a n c e   & &   m e t h o d V a l u e   ! = =   u n d e f i n e d   )   { 
 	 	 	 	 	 r e t u r n V a l u e   =   m e t h o d V a l u e   & &   m e t h o d V a l u e . j q u e r y   ? 
 	 	 	 	 	 	 r e t u r n V a l u e . p u s h S t a c k (   m e t h o d V a l u e . g e t ( )   )   : 
 	 	 	 	 	 	 m e t h o d V a l u e ; 
 	 	 	 	 	 r e t u r n   f a l s e ; 
 	 	 	 	 } 
 	 	 	 } ) ; 
 	 	 }   e l s e   { 
 	 	 	 t h i s . e a c h ( f u n c t i o n ( )   { 
 	 	 	 	 v a r   i n s t a n c e   =   $ . d a t a (   t h i s ,   f u l l N a m e   ) ; 
 	 	 	 	 i f   (   i n s t a n c e   )   { 
 	 	 	 	 	 i n s t a n c e . o p t i o n (   o p t i o n s   | |   { }   ) . _ i n i t ( ) ; 
 	 	 	 	 }   e l s e   { 
 	 	 	 	 	 $ . d a t a (   t h i s ,   f u l l N a m e ,   n e w   o b j e c t (   o p t i o n s ,   t h i s   )   ) ; 
 	 	 	 	 } 
 	 	 	 } ) ; 
 	 	 } 
 
 	 	 r e t u r n   r e t u r n V a l u e ; 
 	 } ; 
 } ; 
 
 $ . W i d g e t   =   f u n c t i o n (   / *   o p t i o n s ,   e l e m e n t   * /   )   { } ; 
 $ . W i d g e t . _ c h i l d C o n s t r u c t o r s   =   [ ] ; 
 
 $ . W i d g e t . p r o t o t y p e   =   { 
 	 w i d g e t N a m e :   " w i d g e t " , 
 	 w i d g e t E v e n t P r e f i x :   " " , 
 	 d e f a u l t E l e m e n t :   " < d i v > " , 
 	 o p t i o n s :   { 
 	 	 d i s a b l e d :   f a l s e , 
 
 	 	 / /   c a l l b a c k s 
 	 	 c r e a t e :   n u l l 
 	 } , 
 	 _ c r e a t e W i d g e t :   f u n c t i o n (   o p t i o n s ,   e l e m e n t   )   { 
 	 	 e l e m e n t   =   $ (   e l e m e n t   | |   t h i s . d e f a u l t E l e m e n t   | |   t h i s   ) [   0   ] ; 
 	 	 t h i s . e l e m e n t   =   $ (   e l e m e n t   ) ; 
 	 	 t h i s . u u i d   =   u u i d + + ; 
 	 	 t h i s . e v e n t N a m e s p a c e   =   " . "   +   t h i s . w i d g e t N a m e   +   t h i s . u u i d ; 
 	 	 t h i s . o p t i o n s   =   $ . w i d g e t . e x t e n d (   { } , 
 	 	 	 t h i s . o p t i o n s , 
 	 	 	 t h i s . _ g e t C r e a t e O p t i o n s ( ) , 
 	 	 	 o p t i o n s   ) ; 
 
 	 	 t h i s . b i n d i n g s   =   $ ( ) ; 
 	 	 t h i s . h o v e r a b l e   =   $ ( ) ; 
 	 	 t h i s . f o c u s a b l e   =   $ ( ) ; 
 
 	 	 i f   (   e l e m e n t   ! = =   t h i s   )   { 
 	 	 	 $ . d a t a (   e l e m e n t ,   t h i s . w i d g e t F u l l N a m e ,   t h i s   ) ; 
 	 	 	 t h i s . _ o n (   t r u e ,   t h i s . e l e m e n t ,   { 
 	 	 	 	 r e m o v e :   f u n c t i o n (   e v e n t   )   { 
 	 	 	 	 	 i f   (   e v e n t . t a r g e t   = = =   e l e m e n t   )   { 
 	 	 	 	 	 	 t h i s . d e s t r o y ( ) ; 
 	 	 	 	 	 } 
 	 	 	 	 } 
 	 	 	 } ) ; 
 	 	 	 t h i s . d o c u m e n t   =   $ (   e l e m e n t . s t y l e   ? 
 	 	 	 	 / /   e l e m e n t   w i t h i n   t h e   d o c u m e n t 
 	 	 	 	 e l e m e n t . o w n e r D o c u m e n t   : 
 	 	 	 	 / /   e l e m e n t   i s   w i n d o w   o r   d o c u m e n t 
 	 	 	 	 e l e m e n t . d o c u m e n t   | |   e l e m e n t   ) ; 
 	 	 	 t h i s . w i n d o w   =   $ (   t h i s . d o c u m e n t [ 0 ] . d e f a u l t V i e w   | |   t h i s . d o c u m e n t [ 0 ] . p a r e n t W i n d o w   ) ; 
 	 	 } 
 
 	 	 t h i s . _ c r e a t e ( ) ; 
 	 	 t h i s . _ t r i g g e r (   " c r e a t e " ,   n u l l ,   t h i s . _ g e t C r e a t e E v e n t D a t a ( )   ) ; 
 	 	 t h i s . _ i n i t ( ) ; 
 	 } , 
 	 _ g e t C r e a t e O p t i o n s :   $ . n o o p , 
 	 _ g e t C r e a t e E v e n t D a t a :   $ . n o o p , 
 	 _ c r e a t e :   $ . n o o p , 
 	 _ i n i t :   $ . n o o p , 
 
 	 d e s t r o y :   f u n c t i o n ( )   { 
 	 	 t h i s . _ d e s t r o y ( ) ; 
 	 	 / /   w e   c a n   p r o b a b l y   r e m o v e   t h e   u n b i n d   c a l l s   i n   2 . 0 
 	 	 / /   a l l   e v e n t   b i n d i n g s   s h o u l d   g o   t h r o u g h   t h i s . _ o n ( ) 
 	 	 t h i s . e l e m e n t 
 	 	 	 . u n b i n d (   t h i s . e v e n t N a m e s p a c e   ) 
 	 	 	 / /   1 . 9   B C   f o r   # 7 8 1 0 
 	 	 	 / /   T O D O   r e m o v e   d u a l   s t o r a g e 
 	 	 	 . r e m o v e D a t a (   t h i s . w i d g e t N a m e   ) 
 	 	 	 . r e m o v e D a t a (   t h i s . w i d g e t F u l l N a m e   ) 
 	 	 	 / /   s u p p o r t :   j q u e r y   < 1 . 6 . 3 
 	 	 	 / /   h t t p : / / b u g s . j q u e r y . c o m / t i c k e t / 9 4 1 3 
 	 	 	 . r e m o v e D a t a (   $ . c a m e l C a s e (   t h i s . w i d g e t F u l l N a m e   )   ) ; 
 	 	 t h i s . w i d g e t ( ) 
 	 	 	 . u n b i n d (   t h i s . e v e n t N a m e s p a c e   ) 
 	 	 	 . r e m o v e A t t r (   " a r i a - d i s a b l e d "   ) 
 	 	 	 . r e m o v e C l a s s ( 
 	 	 	 	 t h i s . w i d g e t F u l l N a m e   +   " - d i s a b l e d   "   + 
 	 	 	 	 " u i - s t a t e - d i s a b l e d "   ) ; 
 
 	 	 / /   c l e a n   u p   e v e n t s   a n d   s t a t e s 
 	 	 t h i s . b i n d i n g s . u n b i n d (   t h i s . e v e n t N a m e s p a c e   ) ; 
 	 	 t h i s . h o v e r a b l e . r e m o v e C l a s s (   " u i - s t a t e - h o v e r "   ) ; 
 	 	 t h i s . f o c u s a b l e . r e m o v e C l a s s (   " u i - s t a t e - f o c u s "   ) ; 
 	 } , 
 	 _ d e s t r o y :   $ . n o o p , 
 
 	 w i d g e t :   f u n c t i o n ( )   { 
 	 	 r e t u r n   t h i s . e l e m e n t ; 
 	 } , 
 
 	 o p t i o n :   f u n c t i o n (   k e y ,   v a l u e   )   { 
 	 	 v a r   o p t i o n s   =   k e y , 
 	 	 	 p a r t s , 
 	 	 	 c u r O p t i o n , 
 	 	 	 i ; 
 
 	 	 i f   (   a r g u m e n t s . l e n g t h   = = =   0   )   { 
 	 	 	 / /   d o n ' t   r e t u r n   a   r e f e r e n c e   t o   t h e   i n t e r n a l   h a s h 
 	 	 	 r e t u r n   $ . w i d g e t . e x t e n d (   { } ,   t h i s . o p t i o n s   ) ; 
 	 	 } 
 
 	 	 i f   (   t y p e o f   k e y   = = =   " s t r i n g "   )   { 
 	 	 	 / /   h a n d l e   n e s t e d   k e y s ,   e . g . ,   " f o o . b a r "   = >   {   f o o :   {   b a r :   _ _ _   }   } 
 	 	 	 o p t i o n s   =   { } ; 
 	 	 	 p a r t s   =   k e y . s p l i t (   " . "   ) ; 
 	 	 	 k e y   =   p a r t s . s h i f t ( ) ; 
 	 	 	 i f   (   p a r t s . l e n g t h   )   { 
 	 	 	 	 c u r O p t i o n   =   o p t i o n s [   k e y   ]   =   $ . w i d g e t . e x t e n d (   { } ,   t h i s . o p t i o n s [   k e y   ]   ) ; 
 	 	 	 	 f o r   (   i   =   0 ;   i   <   p a r t s . l e n g t h   -   1 ;   i + +   )   { 
 	 	 	 	 	 c u r O p t i o n [   p a r t s [   i   ]   ]   =   c u r O p t i o n [   p a r t s [   i   ]   ]   | |   { } ; 
 	 	 	 	 	 c u r O p t i o n   =   c u r O p t i o n [   p a r t s [   i   ]   ] ; 
 	 	 	 	 } 
 	 	 	 	 k e y   =   p a r t s . p o p ( ) ; 
 	 	 	 	 i f   (   v a l u e   = = =   u n d e f i n e d   )   { 
 	 	 	 	 	 r e t u r n   c u r O p t i o n [   k e y   ]   = = =   u n d e f i n e d   ?   n u l l   :   c u r O p t i o n [   k e y   ] ; 
 	 	 	 	 } 
 	 	 	 	 c u r O p t i o n [   k e y   ]   =   v a l u e ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 i f   (   v a l u e   = = =   u n d e f i n e d   )   { 
 	 	 	 	 	 r e t u r n   t h i s . o p t i o n s [   k e y   ]   = = =   u n d e f i n e d   ?   n u l l   :   t h i s . o p t i o n s [   k e y   ] ; 
 	 	 	 	 } 
 	 	 	 	 o p t i o n s [   k e y   ]   =   v a l u e ; 
 	 	 	 } 
 	 	 } 
 
 	 	 t h i s . _ s e t O p t i o n s (   o p t i o n s   ) ; 
 
 	 	 r e t u r n   t h i s ; 
 	 } , 
 	 _ s e t O p t i o n s :   f u n c t i o n (   o p t i o n s   )   { 
 	 	 v a r   k e y ; 
 
 	 	 f o r   (   k e y   i n   o p t i o n s   )   { 
 	 	 	 t h i s . _ s e t O p t i o n (   k e y ,   o p t i o n s [   k e y   ]   ) ; 
 	 	 } 
 
 	 	 r e t u r n   t h i s ; 
 	 } , 
 	 _ s e t O p t i o n :   f u n c t i o n (   k e y ,   v a l u e   )   { 
 	 	 t h i s . o p t i o n s [   k e y   ]   =   v a l u e ; 
 
 	 	 i f   (   k e y   = = =   " d i s a b l e d "   )   { 
 	 	 	 t h i s . w i d g e t ( ) 
 	 	 	 	 . t o g g l e C l a s s (   t h i s . w i d g e t F u l l N a m e   +   " - d i s a b l e d   u i - s t a t e - d i s a b l e d " ,   ! ! v a l u e   ) 
 	 	 	 	 . a t t r (   " a r i a - d i s a b l e d " ,   v a l u e   ) ; 
 	 	 	 t h i s . h o v e r a b l e . r e m o v e C l a s s (   " u i - s t a t e - h o v e r "   ) ; 
 	 	 	 t h i s . f o c u s a b l e . r e m o v e C l a s s (   " u i - s t a t e - f o c u s "   ) ; 
 	 	 } 
 
 	 	 r e t u r n   t h i s ; 
 	 } , 
 
 	 e n a b l e :   f u n c t i o n ( )   { 
 	 	 r e t u r n   t h i s . _ s e t O p t i o n (   " d i s a b l e d " ,   f a l s e   ) ; 
 	 } , 
 	 d i s a b l e :   f u n c t i o n ( )   { 
 	 	 r e t u r n   t h i s . _ s e t O p t i o n (   " d i s a b l e d " ,   t r u e   ) ; 
 	 } , 
 
 	 _ o n :   f u n c t i o n (   s u p p r e s s D i s a b l e d C h e c k ,   e l e m e n t ,   h a n d l e r s   )   { 
 	 	 v a r   d e l e g a t e E l e m e n t , 
 	 	 	 i n s t a n c e   =   t h i s ; 
 
 	 	 / /   n o   s u p p r e s s D i s a b l e d C h e c k   f l a g ,   s h u f f l e   a r g u m e n t s 
 	 	 i f   (   t y p e o f   s u p p r e s s D i s a b l e d C h e c k   ! = =   " b o o l e a n "   )   { 
 	 	 	 h a n d l e r s   =   e l e m e n t ; 
 	 	 	 e l e m e n t   =   s u p p r e s s D i s a b l e d C h e c k ; 
 	 	 	 s u p p r e s s D i s a b l e d C h e c k   =   f a l s e ; 
 	 	 } 
 
 	 	 / /   n o   e l e m e n t   a r g u m e n t ,   s h u f f l e   a n d   u s e   t h i s . e l e m e n t 
 	 	 i f   (   ! h a n d l e r s   )   { 
 	 	 	 h a n d l e r s   =   e l e m e n t ; 
 	 	 	 e l e m e n t   =   t h i s . e l e m e n t ; 
 	 	 	 d e l e g a t e E l e m e n t   =   t h i s . w i d g e t ( ) ; 
 	 	 }   e l s e   { 
 	 	 	 / /   a c c e p t   s e l e c t o r s ,   D O M   e l e m e n t s 
 	 	 	 e l e m e n t   =   d e l e g a t e E l e m e n t   =   $ (   e l e m e n t   ) ; 
 	 	 	 t h i s . b i n d i n g s   =   t h i s . b i n d i n g s . a d d (   e l e m e n t   ) ; 
 	 	 } 
 
 	 	 $ . e a c h (   h a n d l e r s ,   f u n c t i o n (   e v e n t ,   h a n d l e r   )   { 
 	 	 	 f u n c t i o n   h a n d l e r P r o x y ( )   { 
 	 	 	 	 / /   a l l o w   w i d g e t s   t o   c u s t o m i z e   t h e   d i s a b l e d   h a n d l i n g 
 	 	 	 	 / /   -   d i s a b l e d   a s   a n   a r r a y   i n s t e a d   o f   b o o l e a n 
 	 	 	 	 / /   -   d i s a b l e d   c l a s s   a s   m e t h o d   f o r   d i s a b l i n g   i n d i v i d u a l   p a r t s 
 	 	 	 	 i f   (   ! s u p p r e s s D i s a b l e d C h e c k   & & 
 	 	 	 	 	 	 (   i n s t a n c e . o p t i o n s . d i s a b l e d   = = =   t r u e   | | 
 	 	 	 	 	 	 	 $ (   t h i s   ) . h a s C l a s s (   " u i - s t a t e - d i s a b l e d "   )   )   )   { 
 	 	 	 	 	 r e t u r n ; 
 	 	 	 	 } 
 	 	 	 	 r e t u r n   (   t y p e o f   h a n d l e r   = = =   " s t r i n g "   ?   i n s t a n c e [   h a n d l e r   ]   :   h a n d l e r   ) 
 	 	 	 	 	 . a p p l y (   i n s t a n c e ,   a r g u m e n t s   ) ; 
 	 	 	 } 
 
 	 	 	 / /   c o p y   t h e   g u i d   s o   d i r e c t   u n b i n d i n g   w o r k s 
 	 	 	 i f   (   t y p e o f   h a n d l e r   ! = =   " s t r i n g "   )   { 
 	 	 	 	 h a n d l e r P r o x y . g u i d   =   h a n d l e r . g u i d   = 
 	 	 	 	 	 h a n d l e r . g u i d   | |   h a n d l e r P r o x y . g u i d   | |   $ . g u i d + + ; 
 	 	 	 } 
 
 	 	 	 v a r   m a t c h   =   e v e n t . m a t c h (   / ^ ( \ w + ) \ s * ( . * ) $ /   ) , 
 	 	 	 	 e v e n t N a m e   =   m a t c h [ 1 ]   +   i n s t a n c e . e v e n t N a m e s p a c e , 
 	 	 	 	 s e l e c t o r   =   m a t c h [ 2 ] ; 
 	 	 	 i f   (   s e l e c t o r   )   { 
 	 	 	 	 d e l e g a t e E l e m e n t . d e l e g a t e (   s e l e c t o r ,   e v e n t N a m e ,   h a n d l e r P r o x y   ) ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 e l e m e n t . b i n d (   e v e n t N a m e ,   h a n d l e r P r o x y   ) ; 
 	 	 	 } 
 	 	 } ) ; 
 	 } , 
 
 	 _ o f f :   f u n c t i o n (   e l e m e n t ,   e v e n t N a m e   )   { 
 	 	 e v e n t N a m e   =   ( e v e n t N a m e   | |   " " ) . s p l i t (   "   "   ) . j o i n (   t h i s . e v e n t N a m e s p a c e   +   "   "   )   +   t h i s . e v e n t N a m e s p a c e ; 
 	 	 e l e m e n t . u n b i n d (   e v e n t N a m e   ) . u n d e l e g a t e (   e v e n t N a m e   ) ; 
 	 } , 
 
 	 _ d e l a y :   f u n c t i o n (   h a n d l e r ,   d e l a y   )   { 
 	 	 f u n c t i o n   h a n d l e r P r o x y ( )   { 
 	 	 	 r e t u r n   (   t y p e o f   h a n d l e r   = = =   " s t r i n g "   ?   i n s t a n c e [   h a n d l e r   ]   :   h a n d l e r   ) 
 	 	 	 	 . a p p l y (   i n s t a n c e ,   a r g u m e n t s   ) ; 
 	 	 } 
 	 	 v a r   i n s t a n c e   =   t h i s ; 
 	 	 r e t u r n   s e t T i m e o u t (   h a n d l e r P r o x y ,   d e l a y   | |   0   ) ; 
 	 } , 
 
 	 _ h o v e r a b l e :   f u n c t i o n (   e l e m e n t   )   { 
 	 	 t h i s . h o v e r a b l e   =   t h i s . h o v e r a b l e . a d d (   e l e m e n t   ) ; 
 	 	 t h i s . _ o n (   e l e m e n t ,   { 
 	 	 	 m o u s e e n t e r :   f u n c t i o n (   e v e n t   )   { 
 	 	 	 	 $ (   e v e n t . c u r r e n t T a r g e t   ) . a d d C l a s s (   " u i - s t a t e - h o v e r "   ) ; 
 	 	 	 } , 
 	 	 	 m o u s e l e a v e :   f u n c t i o n (   e v e n t   )   { 
 	 	 	 	 $ (   e v e n t . c u r r e n t T a r g e t   ) . r e m o v e C l a s s (   " u i - s t a t e - h o v e r "   ) ; 
 	 	 	 } 
 	 	 } ) ; 
 	 } , 
 
 	 _ f o c u s a b l e :   f u n c t i o n (   e l e m e n t   )   { 
 	 	 t h i s . f o c u s a b l e   =   t h i s . f o c u s a b l e . a d d (   e l e m e n t   ) ; 
 	 	 t h i s . _ o n (   e l e m e n t ,   { 
 	 	 	 f o c u s i n :   f u n c t i o n (   e v e n t   )   { 
 	 	 	 	 $ (   e v e n t . c u r r e n t T a r g e t   ) . a d d C l a s s (   " u i - s t a t e - f o c u s "   ) ; 
 	 	 	 } , 
 	 	 	 f o c u s o u t :   f u n c t i o n (   e v e n t   )   { 
 	 	 	 	 $ (   e v e n t . c u r r e n t T a r g e t   ) . r e m o v e C l a s s (   " u i - s t a t e - f o c u s "   ) ; 
 	 	 	 } 
 	 	 } ) ; 
 	 } , 
 
 	 _ t r i g g e r :   f u n c t i o n (   t y p e ,   e v e n t ,   d a t a   )   { 
 	 	 v a r   p r o p ,   o r i g , 
 	 	 	 c a l l b a c k   =   t h i s . o p t i o n s [   t y p e   ] ; 
 
 	 	 d a t a   =   d a t a   | |   { } ; 
 	 	 e v e n t   =   $ . E v e n t (   e v e n t   ) ; 
 	 	 e v e n t . t y p e   =   (   t y p e   = = =   t h i s . w i d g e t E v e n t P r e f i x   ? 
 	 	 	 t y p e   : 
 	 	 	 t h i s . w i d g e t E v e n t P r e f i x   +   t y p e   ) . t o L o w e r C a s e ( ) ; 
 	 	 / /   t h e   o r i g i n a l   e v e n t   m a y   c o m e   f r o m   a n y   e l e m e n t 
 	 	 / /   s o   w e   n e e d   t o   r e s e t   t h e   t a r g e t   o n   t h e   n e w   e v e n t 
 	 	 e v e n t . t a r g e t   =   t h i s . e l e m e n t [   0   ] ; 
 
 	 	 / /   c o p y   o r i g i n a l   e v e n t   p r o p e r t i e s   o v e r   t o   t h e   n e w   e v e n t 
 	 	 o r i g   =   e v e n t . o r i g i n a l E v e n t ; 
 	 	 i f   (   o r i g   )   { 
 	 	 	 f o r   (   p r o p   i n   o r i g   )   { 
 	 	 	 	 i f   (   ! (   p r o p   i n   e v e n t   )   )   { 
 	 	 	 	 	 e v e n t [   p r o p   ]   =   o r i g [   p r o p   ] ; 
 	 	 	 	 } 
 	 	 	 } 
 	 	 } 
 
 	 	 t h i s . e l e m e n t . t r i g g e r (   e v e n t ,   d a t a   ) ; 
 	 	 r e t u r n   ! (   $ . i s F u n c t i o n (   c a l l b a c k   )   & & 
 	 	 	 c a l l b a c k . a p p l y (   t h i s . e l e m e n t [ 0 ] ,   [   e v e n t   ] . c o n c a t (   d a t a   )   )   = = =   f a l s e   | | 
 	 	 	 e v e n t . i s D e f a u l t P r e v e n t e d ( )   ) ; 
 	 } 
 } ; 
 
 $ . e a c h (   {   s h o w :   " f a d e I n " ,   h i d e :   " f a d e O u t "   } ,   f u n c t i o n (   m e t h o d ,   d e f a u l t E f f e c t   )   { 
 	 $ . W i d g e t . p r o t o t y p e [   " _ "   +   m e t h o d   ]   =   f u n c t i o n (   e l e m e n t ,   o p t i o n s ,   c a l l b a c k   )   { 
 	 	 i f   (   t y p e o f   o p t i o n s   = = =   " s t r i n g "   )   { 
 	 	 	 o p t i o n s   =   {   e f f e c t :   o p t i o n s   } ; 
 	 	 } 
 	 	 v a r   h a s O p t i o n s , 
 	 	 	 e f f e c t N a m e   =   ! o p t i o n s   ? 
 	 	 	 	 m e t h o d   : 
 	 	 	 	 o p t i o n s   = = =   t r u e   | |   t y p e o f   o p t i o n s   = = =   " n u m b e r "   ? 
 	 	 	 	 	 d e f a u l t E f f e c t   : 
 	 	 	 	 	 o p t i o n s . e f f e c t   | |   d e f a u l t E f f e c t ; 
 	 	 o p t i o n s   =   o p t i o n s   | |   { } ; 
 	 	 i f   (   t y p e o f   o p t i o n s   = = =   " n u m b e r "   )   { 
 	 	 	 o p t i o n s   =   {   d u r a t i o n :   o p t i o n s   } ; 
 	 	 } 
 	 	 h a s O p t i o n s   =   ! $ . i s E m p t y O b j e c t (   o p t i o n s   ) ; 
 	 	 o p t i o n s . c o m p l e t e   =   c a l l b a c k ; 
 	 	 i f   (   o p t i o n s . d e l a y   )   { 
 	 	 	 e l e m e n t . d e l a y (   o p t i o n s . d e l a y   ) ; 
 	 	 } 
 	 	 i f   (   h a s O p t i o n s   & &   $ . e f f e c t s   & &   $ . e f f e c t s . e f f e c t [   e f f e c t N a m e   ]   )   { 
 	 	 	 e l e m e n t [   m e t h o d   ] (   o p t i o n s   ) ; 
 	 	 }   e l s e   i f   (   e f f e c t N a m e   ! = =   m e t h o d   & &   e l e m e n t [   e f f e c t N a m e   ]   )   { 
 	 	 	 e l e m e n t [   e f f e c t N a m e   ] (   o p t i o n s . d u r a t i o n ,   o p t i o n s . e a s i n g ,   c a l l b a c k   ) ; 
 	 	 }   e l s e   { 
 	 	 	 e l e m e n t . q u e u e ( f u n c t i o n (   n e x t   )   { 
 	 	 	 	 $ (   t h i s   ) [   m e t h o d   ] ( ) ; 
 	 	 	 	 i f   (   c a l l b a c k   )   { 
 	 	 	 	 	 c a l l b a c k . c a l l (   e l e m e n t [   0   ]   ) ; 
 	 	 	 	 } 
 	 	 	 	 n e x t ( ) ; 
 	 	 	 } ) ; 
 	 	 } 
 	 } ; 
 } ) ; 
 
 } ) (   j Q u e r y   ) ; 
 
 ( f u n c t i o n (   $ ,   u n d e f i n e d   )   { 
 
 v a r   m o u s e H a n d l e d   =   f a l s e ; 
 $ (   d o c u m e n t   ) . m o u s e u p (   f u n c t i o n ( )   { 
 	 m o u s e H a n d l e d   =   f a l s e ; 
 } ) ; 
 
 $ . w i d g e t ( " u i . m o u s e " ,   { 
 	 v e r s i o n :   " 1 . 1 0 . 3 " , 
 	 o p t i o n s :   { 
 	 	 c a n c e l :   " i n p u t , t e x t a r e a , b u t t o n , s e l e c t , o p t i o n " , 
 	 	 d i s t a n c e :   1 , 
 	 	 d e l a y :   0 
 	 } , 
 	 _ m o u s e I n i t :   f u n c t i o n ( )   { 
 	 	 v a r   t h a t   =   t h i s ; 
 
 	 	 t h i s . e l e m e n t 
 	 	 	 . b i n d ( " m o u s e d o w n . " + t h i s . w i d g e t N a m e ,   f u n c t i o n ( e v e n t )   { 
 	 	 	 	 r e t u r n   t h a t . _ m o u s e D o w n ( e v e n t ) ; 
 	 	 	 } ) 
 	 	 	 . b i n d ( " c l i c k . " + t h i s . w i d g e t N a m e ,   f u n c t i o n ( e v e n t )   { 
 	 	 	 	 i f   ( t r u e   = = =   $ . d a t a ( e v e n t . t a r g e t ,   t h a t . w i d g e t N a m e   +   " . p r e v e n t C l i c k E v e n t " ) )   { 
 	 	 	 	 	 $ . r e m o v e D a t a ( e v e n t . t a r g e t ,   t h a t . w i d g e t N a m e   +   " . p r e v e n t C l i c k E v e n t " ) ; 
 	 	 	 	 	 e v e n t . s t o p I m m e d i a t e P r o p a g a t i o n ( ) ; 
 	 	 	 	 	 r e t u r n   f a l s e ; 
 	 	 	 	 } 
 	 	 	 } ) ; 
 
 	 	 t h i s . s t a r t e d   =   f a l s e ; 
 	 } , 
 
 	 / /   T O D O :   m a k e   s u r e   d e s t r o y i n g   o n e   i n s t a n c e   o f   m o u s e   d o e s n ' t   m e s s   w i t h 
 	 / /   o t h e r   i n s t a n c e s   o f   m o u s e 
 	 _ m o u s e D e s t r o y :   f u n c t i o n ( )   { 
 	 	 t h i s . e l e m e n t . u n b i n d ( " . " + t h i s . w i d g e t N a m e ) ; 
 	 	 i f   (   t h i s . _ m o u s e M o v e D e l e g a t e   )   { 
 	 	 	 $ ( d o c u m e n t ) 
 	 	 	 	 . u n b i n d ( " m o u s e m o v e . " + t h i s . w i d g e t N a m e ,   t h i s . _ m o u s e M o v e D e l e g a t e ) 
 	 	 	 	 . u n b i n d ( " m o u s e u p . " + t h i s . w i d g e t N a m e ,   t h i s . _ m o u s e U p D e l e g a t e ) ; 
 	 	 } 
 	 } , 
 
 	 _ m o u s e D o w n :   f u n c t i o n ( e v e n t )   { 
 	 	 / /   d o n ' t   l e t   m o r e   t h a n   o n e   w i d g e t   h a n d l e   m o u s e S t a r t 
 	 	 i f (   m o u s e H a n d l e d   )   {   r e t u r n ;   } 
 
 	 	 / /   w e   m a y   h a v e   m i s s e d   m o u s e u p   ( o u t   o f   w i n d o w ) 
 	 	 ( t h i s . _ m o u s e S t a r t e d   & &   t h i s . _ m o u s e U p ( e v e n t ) ) ; 
 
 	 	 t h i s . _ m o u s e D o w n E v e n t   =   e v e n t ; 
 
 	 	 v a r   t h a t   =   t h i s , 
 	 	 	 b t n I s L e f t   =   ( e v e n t . w h i c h   = = =   1 ) , 
 	 	 	 / /   e v e n t . t a r g e t . n o d e N a m e   w o r k s   a r o u n d   a   b u g   i n   I E   8   w i t h 
 	 	 	 / /   d i s a b l e d   i n p u t s   ( # 7 6 2 0 ) 
 	 	 	 e l I s C a n c e l   =   ( t y p e o f   t h i s . o p t i o n s . c a n c e l   = = =   " s t r i n g "   & &   e v e n t . t a r g e t . n o d e N a m e   ?   $ ( e v e n t . t a r g e t ) . c l o s e s t ( t h i s . o p t i o n s . c a n c e l ) . l e n g t h   :   f a l s e ) ; 
 	 	 i f   ( ! b t n I s L e f t   | |   e l I s C a n c e l   | |   ! t h i s . _ m o u s e C a p t u r e ( e v e n t ) )   { 
 	 	 	 r e t u r n   t r u e ; 
 	 	 } 
 
 	 	 t h i s . m o u s e D e l a y M e t   =   ! t h i s . o p t i o n s . d e l a y ; 
 	 	 i f   ( ! t h i s . m o u s e D e l a y M e t )   { 
 	 	 	 t h i s . _ m o u s e D e l a y T i m e r   =   s e t T i m e o u t ( f u n c t i o n ( )   { 
 	 	 	 	 t h a t . m o u s e D e l a y M e t   =   t r u e ; 
 	 	 	 } ,   t h i s . o p t i o n s . d e l a y ) ; 
 	 	 } 
 
 	 	 i f   ( t h i s . _ m o u s e D i s t a n c e M e t ( e v e n t )   & &   t h i s . _ m o u s e D e l a y M e t ( e v e n t ) )   { 
 	 	 	 t h i s . _ m o u s e S t a r t e d   =   ( t h i s . _ m o u s e S t a r t ( e v e n t )   ! = =   f a l s e ) ; 
 	 	 	 i f   ( ! t h i s . _ m o u s e S t a r t e d )   { 
 	 	 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 	 	 	 	 r e t u r n   t r u e ; 
 	 	 	 } 
 	 	 } 
 
 	 	 / /   C l i c k   e v e n t   m a y   n e v e r   h a v e   f i r e d   ( G e c k o   &   O p e r a ) 
 	 	 i f   ( t r u e   = = =   $ . d a t a ( e v e n t . t a r g e t ,   t h i s . w i d g e t N a m e   +   " . p r e v e n t C l i c k E v e n t " ) )   { 
 	 	 	 $ . r e m o v e D a t a ( e v e n t . t a r g e t ,   t h i s . w i d g e t N a m e   +   " . p r e v e n t C l i c k E v e n t " ) ; 
 	 	 } 
 
 	 	 / /   t h e s e   d e l e g a t e s   a r e   r e q u i r e d   t o   k e e p   c o n t e x t 
 	 	 t h i s . _ m o u s e M o v e D e l e g a t e   =   f u n c t i o n ( e v e n t )   { 
 	 	 	 r e t u r n   t h a t . _ m o u s e M o v e ( e v e n t ) ; 
 	 	 } ; 
 	 	 t h i s . _ m o u s e U p D e l e g a t e   =   f u n c t i o n ( e v e n t )   { 
 	 	 	 r e t u r n   t h a t . _ m o u s e U p ( e v e n t ) ; 
 	 	 } ; 
 	 	 $ ( d o c u m e n t ) 
 	 	 	 . b i n d ( " m o u s e m o v e . " + t h i s . w i d g e t N a m e ,   t h i s . _ m o u s e M o v e D e l e g a t e ) 
 	 	 	 . b i n d ( " m o u s e u p . " + t h i s . w i d g e t N a m e ,   t h i s . _ m o u s e U p D e l e g a t e ) ; 
 
 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 
 	 	 m o u s e H a n d l e d   =   t r u e ; 
 	 	 r e t u r n   t r u e ; 
 	 } , 
 
 	 _ m o u s e M o v e :   f u n c t i o n ( e v e n t )   { 
 	 	 / /   I E   m o u s e u p   c h e c k   -   m o u s e u p   h a p p e n e d   w h e n   m o u s e   w a s   o u t   o f   w i n d o w 
 	 	 i f   ( $ . u i . i e   & &   (   ! d o c u m e n t . d o c u m e n t M o d e   | |   d o c u m e n t . d o c u m e n t M o d e   <   9   )   & &   ! e v e n t . b u t t o n )   { 
 	 	 	 r e t u r n   t h i s . _ m o u s e U p ( e v e n t ) ; 
 	 	 } 
 
 	 	 i f   ( t h i s . _ m o u s e S t a r t e d )   { 
 	 	 	 t h i s . _ m o u s e D r a g ( e v e n t ) ; 
 	 	 	 r e t u r n   e v e n t . p r e v e n t D e f a u l t ( ) ; 
 	 	 } 
 
 	 	 i f   ( t h i s . _ m o u s e D i s t a n c e M e t ( e v e n t )   & &   t h i s . _ m o u s e D e l a y M e t ( e v e n t ) )   { 
 	 	 	 t h i s . _ m o u s e S t a r t e d   = 
 	 	 	 	 ( t h i s . _ m o u s e S t a r t ( t h i s . _ m o u s e D o w n E v e n t ,   e v e n t )   ! = =   f a l s e ) ; 
 	 	 	 ( t h i s . _ m o u s e S t a r t e d   ?   t h i s . _ m o u s e D r a g ( e v e n t )   :   t h i s . _ m o u s e U p ( e v e n t ) ) ; 
 	 	 } 
 
 	 	 r e t u r n   ! t h i s . _ m o u s e S t a r t e d ; 
 	 } , 
 
 	 _ m o u s e U p :   f u n c t i o n ( e v e n t )   { 
 	 	 $ ( d o c u m e n t ) 
 	 	 	 . u n b i n d ( " m o u s e m o v e . " + t h i s . w i d g e t N a m e ,   t h i s . _ m o u s e M o v e D e l e g a t e ) 
 	 	 	 . u n b i n d ( " m o u s e u p . " + t h i s . w i d g e t N a m e ,   t h i s . _ m o u s e U p D e l e g a t e ) ; 
 
 	 	 i f   ( t h i s . _ m o u s e S t a r t e d )   { 
 	 	 	 t h i s . _ m o u s e S t a r t e d   =   f a l s e ; 
 
 	 	 	 i f   ( e v e n t . t a r g e t   = = =   t h i s . _ m o u s e D o w n E v e n t . t a r g e t )   { 
 	 	 	 	 $ . d a t a ( e v e n t . t a r g e t ,   t h i s . w i d g e t N a m e   +   " . p r e v e n t C l i c k E v e n t " ,   t r u e ) ; 
 	 	 	 } 
 
 	 	 	 t h i s . _ m o u s e S t o p ( e v e n t ) ; 
 	 	 } 
 
 	 	 r e t u r n   f a l s e ; 
 	 } , 
 
 	 _ m o u s e D i s t a n c e M e t :   f u n c t i o n ( e v e n t )   { 
 	 	 r e t u r n   ( M a t h . m a x ( 
 	 	 	 	 M a t h . a b s ( t h i s . _ m o u s e D o w n E v e n t . p a g e X   -   e v e n t . p a g e X ) , 
 	 	 	 	 M a t h . a b s ( t h i s . _ m o u s e D o w n E v e n t . p a g e Y   -   e v e n t . p a g e Y ) 
 	 	 	 )   > =   t h i s . o p t i o n s . d i s t a n c e 
 	 	 ) ; 
 	 } , 
 
 	 _ m o u s e D e l a y M e t :   f u n c t i o n ( / *   e v e n t   * / )   { 
 	 	 r e t u r n   t h i s . m o u s e D e l a y M e t ; 
 	 } , 
 
 	 / /   T h e s e   a r e   p l a c e h o l d e r   m e t h o d s ,   t o   b e   o v e r r i d e n   b y   e x t e n d i n g   p l u g i n 
 	 _ m o u s e S t a r t :   f u n c t i o n ( / *   e v e n t   * / )   { } , 
 	 _ m o u s e D r a g :   f u n c t i o n ( / *   e v e n t   * / )   { } , 
 	 _ m o u s e S t o p :   f u n c t i o n ( / *   e v e n t   * / )   { } , 
 	 _ m o u s e C a p t u r e :   f u n c t i o n ( / *   e v e n t   * / )   {   r e t u r n   t r u e ;   } 
 } ) ; 
 
 } ) ( j Q u e r y ) ; 
 
 ( f u n c t i o n (   $ ,   u n d e f i n e d   )   { 
 
 $ . w i d g e t ( " u i . d r a g g a b l e " ,   $ . u i . m o u s e ,   { 
 	 v e r s i o n :   " 1 . 1 0 . 3 " , 
 	 w i d g e t E v e n t P r e f i x :   " d r a g " , 
 	 o p t i o n s :   { 
 	 	 a d d C l a s s e s :   t r u e , 
 	 	 a p p e n d T o :   " p a r e n t " , 
 	 	 a x i s :   f a l s e , 
 	 	 c o n n e c t T o S o r t a b l e :   f a l s e , 
 	 	 c o n t a i n m e n t :   f a l s e , 
 	 	 c u r s o r :   " a u t o " , 
 	 	 c u r s o r A t :   f a l s e , 
 	 	 g r i d :   f a l s e , 
 	 	 h a n d l e :   f a l s e , 
 	 	 h e l p e r :   " o r i g i n a l " , 
 	 	 i f r a m e F i x :   f a l s e , 
 	 	 o p a c i t y :   f a l s e , 
 	 	 r e f r e s h P o s i t i o n s :   f a l s e , 
 	 	 r e v e r t :   f a l s e , 
 	 	 r e v e r t D u r a t i o n :   5 0 0 , 
 	 	 s c o p e :   " d e f a u l t " , 
 	 	 s c r o l l :   t r u e , 
 	 	 s c r o l l S e n s i t i v i t y :   2 0 , 
 	 	 s c r o l l S p e e d :   2 0 , 
 	 	 s n a p :   f a l s e , 
 	 	 s n a p M o d e :   " b o t h " , 
 	 	 s n a p T o l e r a n c e :   2 0 , 
 	 	 s t a c k :   f a l s e , 
 	 	 z I n d e x :   f a l s e , 
 
 	 	 / /   c a l l b a c k s 
 	 	 d r a g :   n u l l , 
 	 	 s t a r t :   n u l l , 
 	 	 s t o p :   n u l l 
 	 } , 
 	 _ c r e a t e :   f u n c t i o n ( )   { 
 
 	 	 i f   ( t h i s . o p t i o n s . h e l p e r   = = =   " o r i g i n a l "   & &   ! ( / ^ ( ? : r | a | f ) / ) . t e s t ( t h i s . e l e m e n t . c s s ( " p o s i t i o n " ) ) )   { 
 	 	 	 t h i s . e l e m e n t [ 0 ] . s t y l e . p o s i t i o n   =   " r e l a t i v e " ; 
 	 	 } 
 	 	 i f   ( t h i s . o p t i o n s . a d d C l a s s e s ) { 
 	 	 	 t h i s . e l e m e n t . a d d C l a s s ( " u i - d r a g g a b l e " ) ; 
 	 	 } 
 	 	 i f   ( t h i s . o p t i o n s . d i s a b l e d ) { 
 	 	 	 t h i s . e l e m e n t . a d d C l a s s ( " u i - d r a g g a b l e - d i s a b l e d " ) ; 
 	 	 } 
 
 	 	 t h i s . _ m o u s e I n i t ( ) ; 
 
 	 } , 
 
 	 _ d e s t r o y :   f u n c t i o n ( )   { 
 	 	 t h i s . e l e m e n t . r e m o v e C l a s s (   " u i - d r a g g a b l e   u i - d r a g g a b l e - d r a g g i n g   u i - d r a g g a b l e - d i s a b l e d "   ) ; 
 	 	 t h i s . _ m o u s e D e s t r o y ( ) ; 
 	 } , 
 
 	 _ m o u s e C a p t u r e :   f u n c t i o n ( e v e n t )   { 
 
 	 	 v a r   o   =   t h i s . o p t i o n s ; 
 
 	 	 / /   a m o n g   o t h e r s ,   p r e v e n t   a   d r a g   o n   a   r e s i z a b l e - h a n d l e 
 	 	 i f   ( t h i s . h e l p e r   | |   o . d i s a b l e d   | |   $ ( e v e n t . t a r g e t ) . c l o s e s t ( " . u i - r e s i z a b l e - h a n d l e " ) . l e n g t h   >   0 )   { 
 	 	 	 r e t u r n   f a l s e ; 
 	 	 } 
 
 	 	 / / Q u i t   i f   w e ' r e   n o t   o n   a   v a l i d   h a n d l e 
 	 	 t h i s . h a n d l e   =   t h i s . _ g e t H a n d l e ( e v e n t ) ; 
 	 	 i f   ( ! t h i s . h a n d l e )   { 
 	 	 	 r e t u r n   f a l s e ; 
 	 	 } 
 
 	 	 $ ( o . i f r a m e F i x   = = =   t r u e   ?   " i f r a m e "   :   o . i f r a m e F i x ) . e a c h ( f u n c t i o n ( )   { 
 	 	 	 $ ( " < d i v   c l a s s = ' u i - d r a g g a b l e - i f r a m e F i x '   s t y l e = ' b a c k g r o u n d :   # f f f ; ' > < / d i v > " ) 
 	 	 	 . c s s ( { 
 	 	 	 	 w i d t h :   t h i s . o f f s e t W i d t h + " p x " ,   h e i g h t :   t h i s . o f f s e t H e i g h t + " p x " , 
 	 	 	 	 p o s i t i o n :   " a b s o l u t e " ,   o p a c i t y :   " 0 . 0 0 1 " ,   z I n d e x :   1 0 0 0 
 	 	 	 } ) 
 	 	 	 . c s s ( $ ( t h i s ) . o f f s e t ( ) ) 
 	 	 	 . a p p e n d T o ( " b o d y " ) ; 
 	 	 } ) ; 
 
 	 	 r e t u r n   t r u e ; 
 
 	 } , 
 
 	 _ m o u s e S t a r t :   f u n c t i o n ( e v e n t )   { 
 
 	 	 v a r   o   =   t h i s . o p t i o n s ; 
 
 	 	 / / C r e a t e   a n d   a p p e n d   t h e   v i s i b l e   h e l p e r 
 	 	 t h i s . h e l p e r   =   t h i s . _ c r e a t e H e l p e r ( e v e n t ) ; 
 
 	 	 t h i s . h e l p e r . a d d C l a s s ( " u i - d r a g g a b l e - d r a g g i n g " ) ; 
 
 	 	 / / C a c h e   t h e   h e l p e r   s i z e 
 	 	 t h i s . _ c a c h e H e l p e r P r o p o r t i o n s ( ) ; 
 
 	 	 / / I f   d d m a n a g e r   i s   u s e d   f o r   d r o p p a b l e s ,   s e t   t h e   g l o b a l   d r a g g a b l e 
 	 	 i f ( $ . u i . d d m a n a g e r )   { 
 	 	 	 $ . u i . d d m a n a g e r . c u r r e n t   =   t h i s ; 
 	 	 } 
 
 	 	 / * 
 	 	   *   -   P o s i t i o n   g e n e r a t i o n   - 
 	 	   *   T h i s   b l o c k   g e n e r a t e s   e v e r y t h i n g   p o s i t i o n   r e l a t e d   -   i t ' s   t h e   c o r e   o f   d r a g g a b l e s . 
 	 	   * / 
 
 	 	 / / C a c h e   t h e   m a r g i n s   o f   t h e   o r i g i n a l   e l e m e n t 
 	 	 t h i s . _ c a c h e M a r g i n s ( ) ; 
 
 	 	 / / S t o r e   t h e   h e l p e r ' s   c s s   p o s i t i o n 
 	 	 t h i s . c s s P o s i t i o n   =   t h i s . h e l p e r . c s s (   " p o s i t i o n "   ) ; 
 	 	 t h i s . s c r o l l P a r e n t   =   t h i s . h e l p e r . s c r o l l P a r e n t ( ) ; 
 	 	 t h i s . o f f s e t P a r e n t   =   t h i s . h e l p e r . o f f s e t P a r e n t ( ) ; 
 	 	 t h i s . o f f s e t P a r e n t C s s P o s i t i o n   =   t h i s . o f f s e t P a r e n t . c s s (   " p o s i t i o n "   ) ; 
 
 	 	 / / T h e   e l e m e n t ' s   a b s o l u t e   p o s i t i o n   o n   t h e   p a g e   m i n u s   m a r g i n s 
 	 	 t h i s . o f f s e t   =   t h i s . p o s i t i o n A b s   =   t h i s . e l e m e n t . o f f s e t ( ) ; 
 	 	 t h i s . o f f s e t   =   { 
 	 	 	 t o p :   t h i s . o f f s e t . t o p   -   t h i s . m a r g i n s . t o p , 
 	 	 	 l e f t :   t h i s . o f f s e t . l e f t   -   t h i s . m a r g i n s . l e f t 
 	 	 } ; 
 
 	 	 / / R e s e t   s c r o l l   c a c h e 
 	 	 t h i s . o f f s e t . s c r o l l   =   f a l s e ; 
 
 	 	 $ . e x t e n d ( t h i s . o f f s e t ,   { 
 	 	 	 c l i c k :   {   / / W h e r e   t h e   c l i c k   h a p p e n e d ,   r e l a t i v e   t o   t h e   e l e m e n t 
 	 	 	 	 l e f t :   e v e n t . p a g e X   -   t h i s . o f f s e t . l e f t , 
 	 	 	 	 t o p :   e v e n t . p a g e Y   -   t h i s . o f f s e t . t o p 
 	 	 	 } , 
 	 	 	 p a r e n t :   t h i s . _ g e t P a r e n t O f f s e t ( ) , 
 	 	 	 r e l a t i v e :   t h i s . _ g e t R e l a t i v e O f f s e t ( )   / / T h i s   i s   a   r e l a t i v e   t o   a b s o l u t e   p o s i t i o n   m i n u s   t h e   a c t u a l   p o s i t i o n   c a l c u l a t i o n   -   o n l y   u s e d   f o r   r e l a t i v e   p o s i t i o n e d   h e l p e r 
 	 	 } ) ; 
 
 	 	 / / G e n e r a t e   t h e   o r i g i n a l   p o s i t i o n 
 	 	 t h i s . o r i g i n a l P o s i t i o n   =   t h i s . p o s i t i o n   =   t h i s . _ g e n e r a t e P o s i t i o n ( e v e n t ) ; 
 	 	 t h i s . o r i g i n a l P a g e X   =   e v e n t . p a g e X ; 
 	 	 t h i s . o r i g i n a l P a g e Y   =   e v e n t . p a g e Y ; 
 
 	 	 / / A d j u s t   t h e   m o u s e   o f f s e t   r e l a t i v e   t o   t h e   h e l p e r   i f   " c u r s o r A t "   i s   s u p p l i e d 
 	 	 ( o . c u r s o r A t   & &   t h i s . _ a d j u s t O f f s e t F r o m H e l p e r ( o . c u r s o r A t ) ) ; 
 
 	 	 / / S e t   a   c o n t a i n m e n t   i f   g i v e n   i n   t h e   o p t i o n s 
 	 	 t h i s . _ s e t C o n t a i n m e n t ( ) ; 
 
 	 	 / / T r i g g e r   e v e n t   +   c a l l b a c k s 
 	 	 i f ( t h i s . _ t r i g g e r ( " s t a r t " ,   e v e n t )   = = =   f a l s e )   { 
 	 	 	 t h i s . _ c l e a r ( ) ; 
 	 	 	 r e t u r n   f a l s e ; 
 	 	 } 
 
 	 	 / / R e c a c h e   t h e   h e l p e r   s i z e 
 	 	 t h i s . _ c a c h e H e l p e r P r o p o r t i o n s ( ) ; 
 
 	 	 / / P r e p a r e   t h e   d r o p p a b l e   o f f s e t s 
 	 	 i f   ( $ . u i . d d m a n a g e r   & &   ! o . d r o p B e h a v i o u r )   { 
 	 	 	 $ . u i . d d m a n a g e r . p r e p a r e O f f s e t s ( t h i s ,   e v e n t ) ; 
 	 	 } 
 
 
 	 	 t h i s . _ m o u s e D r a g ( e v e n t ,   t r u e ) ;   / / E x e c u t e   t h e   d r a g   o n c e   -   t h i s   c a u s e s   t h e   h e l p e r   n o t   t o   b e   v i s i b l e   b e f o r e   g e t t i n g   i t s   c o r r e c t   p o s i t i o n 
 
 	 	 / / I f   t h e   d d m a n a g e r   i s   u s e d   f o r   d r o p p a b l e s ,   i n f o r m   t h e   m a n a g e r   t h a t   d r a g g i n g   h a s   s t a r t e d   ( s e e   # 5 0 0 3 ) 
 	 	 i f   (   $ . u i . d d m a n a g e r   )   { 
 	 	 	 $ . u i . d d m a n a g e r . d r a g S t a r t ( t h i s ,   e v e n t ) ; 
 	 	 } 
 
 	 	 r e t u r n   t r u e ; 
 	 } , 
 
 	 _ m o u s e D r a g :   f u n c t i o n ( e v e n t ,   n o P r o p a g a t i o n )   { 
 	 	 / /   r e s e t   a n y   n e c e s s a r y   c a c h e d   p r o p e r t i e s   ( s e e   # 5 0 0 9 ) 
 	 	 i f   (   t h i s . o f f s e t P a r e n t C s s P o s i t i o n   = = =   " f i x e d "   )   { 
 	 	 	 t h i s . o f f s e t . p a r e n t   =   t h i s . _ g e t P a r e n t O f f s e t ( ) ; 
 	 	 } 
 
 	 	 / / C o m p u t e   t h e   h e l p e r s   p o s i t i o n 
 	 	 t h i s . p o s i t i o n   =   t h i s . _ g e n e r a t e P o s i t i o n ( e v e n t ) ; 
 	 	 t h i s . p o s i t i o n A b s   =   t h i s . _ c o n v e r t P o s i t i o n T o ( " a b s o l u t e " ) ; 
 
 	 	 / / C a l l   p l u g i n s   a n d   c a l l b a c k s   a n d   u s e   t h e   r e s u l t i n g   p o s i t i o n   i f   s o m e t h i n g   i s   r e t u r n e d 
 	 	 i f   ( ! n o P r o p a g a t i o n )   { 
 	 	 	 v a r   u i   =   t h i s . _ u i H a s h ( ) ; 
 	 	 	 i f ( t h i s . _ t r i g g e r ( " d r a g " ,   e v e n t ,   u i )   = = =   f a l s e )   { 
 	 	 	 	 t h i s . _ m o u s e U p ( { } ) ; 
 	 	 	 	 r e t u r n   f a l s e ; 
 	 	 	 } 
 	 	 	 t h i s . p o s i t i o n   =   u i . p o s i t i o n ; 
 	 	 } 
 
 	 	 i f ( ! t h i s . o p t i o n s . a x i s   | |   t h i s . o p t i o n s . a x i s   ! = =   " y " )   { 
 	 	 	 t h i s . h e l p e r [ 0 ] . s t y l e . l e f t   =   t h i s . p o s i t i o n . l e f t + " p x " ; 
 	 	 } 
 	 	 i f ( ! t h i s . o p t i o n s . a x i s   | |   t h i s . o p t i o n s . a x i s   ! = =   " x " )   { 
 	 	 	 t h i s . h e l p e r [ 0 ] . s t y l e . t o p   =   t h i s . p o s i t i o n . t o p + " p x " ; 
 	 	 } 
 	 	 i f ( $ . u i . d d m a n a g e r )   { 
 	 	 	 $ . u i . d d m a n a g e r . d r a g ( t h i s ,   e v e n t ) ; 
 	 	 } 
 
 	 	 r e t u r n   f a l s e ; 
 	 } , 
 
 	 _ m o u s e S t o p :   f u n c t i o n ( e v e n t )   { 
 
 	 	 / / I f   w e   a r e   u s i n g   d r o p p a b l e s ,   i n f o r m   t h e   m a n a g e r   a b o u t   t h e   d r o p 
 	 	 v a r   t h a t   =   t h i s , 
 	 	 	 d r o p p e d   =   f a l s e ; 
 	 	 i f   ( $ . u i . d d m a n a g e r   & &   ! t h i s . o p t i o n s . d r o p B e h a v i o u r )   { 
 	 	 	 d r o p p e d   =   $ . u i . d d m a n a g e r . d r o p ( t h i s ,   e v e n t ) ; 
 	 	 } 
 
 	 	 / / i f   a   d r o p   c o m e s   f r o m   o u t s i d e   ( a   s o r t a b l e ) 
 	 	 i f ( t h i s . d r o p p e d )   { 
 	 	 	 d r o p p e d   =   t h i s . d r o p p e d ; 
 	 	 	 t h i s . d r o p p e d   =   f a l s e ; 
 	 	 } 
 
 	 	 / / i f   t h e   o r i g i n a l   e l e m e n t   i s   n o   l o n g e r   i n   t h e   D O M   d o n ' t   b o t h e r   t o   c o n t i n u e   ( s e e   # 8 2 6 9 ) 
 	 	 i f   (   t h i s . o p t i o n s . h e l p e r   = = =   " o r i g i n a l "   & &   ! $ . c o n t a i n s (   t h i s . e l e m e n t [   0   ] . o w n e r D o c u m e n t ,   t h i s . e l e m e n t [   0   ]   )   )   { 
 	 	 	 r e t u r n   f a l s e ; 
 	 	 } 
 
 	 	 i f ( ( t h i s . o p t i o n s . r e v e r t   = = =   " i n v a l i d "   & &   ! d r o p p e d )   | |   ( t h i s . o p t i o n s . r e v e r t   = = =   " v a l i d "   & &   d r o p p e d )   | |   t h i s . o p t i o n s . r e v e r t   = = =   t r u e   | |   ( $ . i s F u n c t i o n ( t h i s . o p t i o n s . r e v e r t )   & &   t h i s . o p t i o n s . r e v e r t . c a l l ( t h i s . e l e m e n t ,   d r o p p e d ) ) )   { 
 	 	 	 $ ( t h i s . h e l p e r ) . a n i m a t e ( t h i s . o r i g i n a l P o s i t i o n ,   p a r s e I n t ( t h i s . o p t i o n s . r e v e r t D u r a t i o n ,   1 0 ) ,   f u n c t i o n ( )   { 
 	 	 	 	 i f ( t h a t . _ t r i g g e r ( " s t o p " ,   e v e n t )   ! = =   f a l s e )   { 
 	 	 	 	 	 t h a t . _ c l e a r ( ) ; 
 	 	 	 	 } 
 	 	 	 } ) ; 
 	 	 }   e l s e   { 
 	 	 	 i f ( t h i s . _ t r i g g e r ( " s t o p " ,   e v e n t )   ! = =   f a l s e )   { 
 	 	 	 	 t h i s . _ c l e a r ( ) ; 
 	 	 	 } 
 	 	 } 
 
 	 	 r e t u r n   f a l s e ; 
 	 } , 
 
 	 _ m o u s e U p :   f u n c t i o n ( e v e n t )   { 
 	 	 / / R e m o v e   f r a m e   h e l p e r s 
 	 	 $ ( " d i v . u i - d r a g g a b l e - i f r a m e F i x " ) . e a c h ( f u n c t i o n ( )   { 
 	 	 	 t h i s . p a r e n t N o d e . r e m o v e C h i l d ( t h i s ) ; 
 	 	 } ) ; 
 
 	 	 / / I f   t h e   d d m a n a g e r   i s   u s e d   f o r   d r o p p a b l e s ,   i n f o r m   t h e   m a n a g e r   t h a t   d r a g g i n g   h a s   s t o p p e d   ( s e e   # 5 0 0 3 ) 
 	 	 i f (   $ . u i . d d m a n a g e r   )   { 
 	 	 	 $ . u i . d d m a n a g e r . d r a g S t o p ( t h i s ,   e v e n t ) ; 
 	 	 } 
 
 	 	 r e t u r n   $ . u i . m o u s e . p r o t o t y p e . _ m o u s e U p . c a l l ( t h i s ,   e v e n t ) ; 
 	 } , 
 
 	 c a n c e l :   f u n c t i o n ( )   { 
 
 	 	 i f ( t h i s . h e l p e r . i s ( " . u i - d r a g g a b l e - d r a g g i n g " ) )   { 
 	 	 	 t h i s . _ m o u s e U p ( { } ) ; 
 	 	 }   e l s e   { 
 	 	 	 t h i s . _ c l e a r ( ) ; 
 	 	 } 
 
 	 	 r e t u r n   t h i s ; 
 
 	 } , 
 
 	 _ g e t H a n d l e :   f u n c t i o n ( e v e n t )   { 
 	 	 r e t u r n   t h i s . o p t i o n s . h a n d l e   ? 
 	 	 	 ! ! $ (   e v e n t . t a r g e t   ) . c l o s e s t (   t h i s . e l e m e n t . f i n d (   t h i s . o p t i o n s . h a n d l e   )   ) . l e n g t h   : 
 	 	 	 t r u e ; 
 	 } , 
 
 	 _ c r e a t e H e l p e r :   f u n c t i o n ( e v e n t )   { 
 
 	 	 v a r   o   =   t h i s . o p t i o n s , 
 	 	 	 h e l p e r   =   $ . i s F u n c t i o n ( o . h e l p e r )   ?   $ ( o . h e l p e r . a p p l y ( t h i s . e l e m e n t [ 0 ] ,   [ e v e n t ] ) )   :   ( o . h e l p e r   = = =   " c l o n e "   ?   t h i s . e l e m e n t . c l o n e ( ) . r e m o v e A t t r ( " i d " )   :   t h i s . e l e m e n t ) ; 
 
 	 	 i f ( ! h e l p e r . p a r e n t s ( " b o d y " ) . l e n g t h )   { 
 	 	 	 h e l p e r . a p p e n d T o ( ( o . a p p e n d T o   = = =   " p a r e n t "   ?   t h i s . e l e m e n t [ 0 ] . p a r e n t N o d e   :   o . a p p e n d T o ) ) ; 
 	 	 } 
 
 	 	 i f ( h e l p e r [ 0 ]   ! = =   t h i s . e l e m e n t [ 0 ]   & &   ! ( / ( f i x e d | a b s o l u t e ) / ) . t e s t ( h e l p e r . c s s ( " p o s i t i o n " ) ) )   { 
 	 	 	 h e l p e r . c s s ( " p o s i t i o n " ,   " a b s o l u t e " ) ; 
 	 	 } 
 
 	 	 r e t u r n   h e l p e r ; 
 
 	 } , 
 
 	 _ a d j u s t O f f s e t F r o m H e l p e r :   f u n c t i o n ( o b j )   { 
 	 	 i f   ( t y p e o f   o b j   = = =   " s t r i n g " )   { 
 	 	 	 o b j   =   o b j . s p l i t ( "   " ) ; 
 	 	 } 
 	 	 i f   ( $ . i s A r r a y ( o b j ) )   { 
 	 	 	 o b j   =   { l e f t :   + o b j [ 0 ] ,   t o p :   + o b j [ 1 ]   | |   0 } ; 
 	 	 } 
 	 	 i f   ( " l e f t "   i n   o b j )   { 
 	 	 	 t h i s . o f f s e t . c l i c k . l e f t   =   o b j . l e f t   +   t h i s . m a r g i n s . l e f t ; 
 	 	 } 
 	 	 i f   ( " r i g h t "   i n   o b j )   { 
 	 	 	 t h i s . o f f s e t . c l i c k . l e f t   =   t h i s . h e l p e r P r o p o r t i o n s . w i d t h   -   o b j . r i g h t   +   t h i s . m a r g i n s . l e f t ; 
 	 	 } 
 	 	 i f   ( " t o p "   i n   o b j )   { 
 	 	 	 t h i s . o f f s e t . c l i c k . t o p   =   o b j . t o p   +   t h i s . m a r g i n s . t o p ; 
 	 	 } 
 	 	 i f   ( " b o t t o m "   i n   o b j )   { 
 	 	 	 t h i s . o f f s e t . c l i c k . t o p   =   t h i s . h e l p e r P r o p o r t i o n s . h e i g h t   -   o b j . b o t t o m   +   t h i s . m a r g i n s . t o p ; 
 	 	 } 
 	 } , 
 
 	 _ g e t P a r e n t O f f s e t :   f u n c t i o n ( )   { 
 
 	 	 / / G e t   t h e   o f f s e t P a r e n t   a n d   c a c h e   i t s   p o s i t i o n 
 	 	 v a r   p o   =   t h i s . o f f s e t P a r e n t . o f f s e t ( ) ; 
 
 	 	 / /   T h i s   i s   a   s p e c i a l   c a s e   w h e r e   w e   n e e d   t o   m o d i f y   a   o f f s e t   c a l c u l a t e d   o n   s t a r t ,   s i n c e   t h e   f o l l o w i n g   h a p p e n e d : 
 	 	 / /   1 .   T h e   p o s i t i o n   o f   t h e   h e l p e r   i s   a b s o l u t e ,   s o   i t ' s   p o s i t i o n   i s   c a l c u l a t e d   b a s e d   o n   t h e   n e x t   p o s i t i o n e d   p a r e n t 
 	 	 / /   2 .   T h e   a c t u a l   o f f s e t   p a r e n t   i s   a   c h i l d   o f   t h e   s c r o l l   p a r e n t ,   a n d   t h e   s c r o l l   p a r e n t   i s n ' t   t h e   d o c u m e n t ,   w h i c h   m e a n s   t h a t 
 	 	 / /         t h e   s c r o l l   i s   i n c l u d e d   i n   t h e   i n i t i a l   c a l c u l a t i o n   o f   t h e   o f f s e t   o f   t h e   p a r e n t ,   a n d   n e v e r   r e c a l c u l a t e d   u p o n   d r a g 
 	 	 i f ( t h i s . c s s P o s i t i o n   = = =   " a b s o l u t e "   & &   t h i s . s c r o l l P a r e n t [ 0 ]   ! = =   d o c u m e n t   & &   $ . c o n t a i n s ( t h i s . s c r o l l P a r e n t [ 0 ] ,   t h i s . o f f s e t P a r e n t [ 0 ] ) )   { 
 	 	 	 p o . l e f t   + =   t h i s . s c r o l l P a r e n t . s c r o l l L e f t ( ) ; 
 	 	 	 p o . t o p   + =   t h i s . s c r o l l P a r e n t . s c r o l l T o p ( ) ; 
 	 	 } 
 
 	 	 / / T h i s   n e e d s   t o   b e   a c t u a l l y   d o n e   f o r   a l l   b r o w s e r s ,   s i n c e   p a g e X / p a g e Y   i n c l u d e s   t h i s   i n f o r m a t i o n 
 	 	 / / U g l y   I E   f i x 
 	 	 i f ( ( t h i s . o f f s e t P a r e n t [ 0 ]   = = =   d o c u m e n t . b o d y )   | | 
 	 	 	 ( t h i s . o f f s e t P a r e n t [ 0 ] . t a g N a m e   & &   t h i s . o f f s e t P a r e n t [ 0 ] . t a g N a m e . t o L o w e r C a s e ( )   = = =   " h t m l "   & &   $ . u i . i e ) )   { 
 	 	 	 p o   =   {   t o p :   0 ,   l e f t :   0   } ; 
 	 	 } 
 
 	 	 r e t u r n   { 
 	 	 	 t o p :   p o . t o p   +   ( p a r s e I n t ( t h i s . o f f s e t P a r e n t . c s s ( " b o r d e r T o p W i d t h " ) , 1 0 )   | |   0 ) , 
 	 	 	 l e f t :   p o . l e f t   +   ( p a r s e I n t ( t h i s . o f f s e t P a r e n t . c s s ( " b o r d e r L e f t W i d t h " ) , 1 0 )   | |   0 ) 
 	 	 } ; 
 
 	 } , 
 
 	 _ g e t R e l a t i v e O f f s e t :   f u n c t i o n ( )   { 
 
 	 	 i f ( t h i s . c s s P o s i t i o n   = = =   " r e l a t i v e " )   { 
 	 	 	 v a r   p   =   t h i s . e l e m e n t . p o s i t i o n ( ) ; 
 	 	 	 r e t u r n   { 
 	 	 	 	 t o p :   p . t o p   -   ( p a r s e I n t ( t h i s . h e l p e r . c s s ( " t o p " ) , 1 0 )   | |   0 )   +   t h i s . s c r o l l P a r e n t . s c r o l l T o p ( ) , 
 	 	 	 	 l e f t :   p . l e f t   -   ( p a r s e I n t ( t h i s . h e l p e r . c s s ( " l e f t " ) , 1 0 )   | |   0 )   +   t h i s . s c r o l l P a r e n t . s c r o l l L e f t ( ) 
 	 	 	 } ; 
 	 	 }   e l s e   { 
 	 	 	 r e t u r n   {   t o p :   0 ,   l e f t :   0   } ; 
 	 	 } 
 
 	 } , 
 
 	 _ c a c h e M a r g i n s :   f u n c t i o n ( )   { 
 	 	 t h i s . m a r g i n s   =   { 
 	 	 	 l e f t :   ( p a r s e I n t ( t h i s . e l e m e n t . c s s ( " m a r g i n L e f t " ) , 1 0 )   | |   0 ) , 
 	 	 	 t o p :   ( p a r s e I n t ( t h i s . e l e m e n t . c s s ( " m a r g i n T o p " ) , 1 0 )   | |   0 ) , 
 	 	 	 r i g h t :   ( p a r s e I n t ( t h i s . e l e m e n t . c s s ( " m a r g i n R i g h t " ) , 1 0 )   | |   0 ) , 
 	 	 	 b o t t o m :   ( p a r s e I n t ( t h i s . e l e m e n t . c s s ( " m a r g i n B o t t o m " ) , 1 0 )   | |   0 ) 
 	 	 } ; 
 	 } , 
 
 	 _ c a c h e H e l p e r P r o p o r t i o n s :   f u n c t i o n ( )   { 
 	 	 t h i s . h e l p e r P r o p o r t i o n s   =   { 
 	 	 	 w i d t h :   t h i s . h e l p e r . o u t e r W i d t h ( ) , 
 	 	 	 h e i g h t :   t h i s . h e l p e r . o u t e r H e i g h t ( ) 
 	 	 } ; 
 	 } , 
 
 	 _ s e t C o n t a i n m e n t :   f u n c t i o n ( )   { 
 
 	 	 v a r   o v e r ,   c ,   c e , 
 	 	 	 o   =   t h i s . o p t i o n s ; 
 
 	 	 i f   (   ! o . c o n t a i n m e n t   )   { 
 	 	 	 t h i s . c o n t a i n m e n t   =   n u l l ; 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 i f   (   o . c o n t a i n m e n t   = = =   " w i n d o w "   )   { 
 	 	 	 t h i s . c o n t a i n m e n t   =   [ 
 	 	 	 	 $ (   w i n d o w   ) . s c r o l l L e f t ( )   -   t h i s . o f f s e t . r e l a t i v e . l e f t   -   t h i s . o f f s e t . p a r e n t . l e f t , 
 	 	 	 	 $ (   w i n d o w   ) . s c r o l l T o p ( )   -   t h i s . o f f s e t . r e l a t i v e . t o p   -   t h i s . o f f s e t . p a r e n t . t o p , 
 	 	 	 	 $ (   w i n d o w   ) . s c r o l l L e f t ( )   +   $ (   w i n d o w   ) . w i d t h ( )   -   t h i s . h e l p e r P r o p o r t i o n s . w i d t h   -   t h i s . m a r g i n s . l e f t , 
 	 	 	 	 $ (   w i n d o w   ) . s c r o l l T o p ( )   +   (   $ (   w i n d o w   ) . h e i g h t ( )   | |   d o c u m e n t . b o d y . p a r e n t N o d e . s c r o l l H e i g h t   )   -   t h i s . h e l p e r P r o p o r t i o n s . h e i g h t   -   t h i s . m a r g i n s . t o p 
 	 	 	 ] ; 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 i f   (   o . c o n t a i n m e n t   = = =   " d o c u m e n t " )   { 
 	 	 	 t h i s . c o n t a i n m e n t   =   [ 
 	 	 	 	 0 , 
 	 	 	 	 0 , 
 	 	 	 	 $ (   d o c u m e n t   ) . w i d t h ( )   -   t h i s . h e l p e r P r o p o r t i o n s . w i d t h   -   t h i s . m a r g i n s . l e f t , 
 	 	 	 	 (   $ (   d o c u m e n t   ) . h e i g h t ( )   | |   d o c u m e n t . b o d y . p a r e n t N o d e . s c r o l l H e i g h t   )   -   t h i s . h e l p e r P r o p o r t i o n s . h e i g h t   -   t h i s . m a r g i n s . t o p 
 	 	 	 ] ; 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 i f   (   o . c o n t a i n m e n t . c o n s t r u c t o r   = = =   A r r a y   )   { 
 	 	 	 t h i s . c o n t a i n m e n t   =   o . c o n t a i n m e n t ; 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 i f   (   o . c o n t a i n m e n t   = = =   " p a r e n t "   )   { 
 	 	 	 o . c o n t a i n m e n t   =   t h i s . h e l p e r [   0   ] . p a r e n t N o d e ; 
 	 	 } 
 
 	 	 c   =   $ (   o . c o n t a i n m e n t   ) ; 
 	 	 c e   =   c [   0   ] ; 
 
 	 	 i f (   ! c e   )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 o v e r   =   c . c s s (   " o v e r f l o w "   )   ! = =   " h i d d e n " ; 
 
 	 	 t h i s . c o n t a i n m e n t   =   [ 
 	 	 	 (   p a r s e I n t (   c . c s s (   " b o r d e r L e f t W i d t h "   ) ,   1 0   )   | |   0   )   +   (   p a r s e I n t (   c . c s s (   " p a d d i n g L e f t "   ) ,   1 0   )   | |   0   ) , 
 	 	 	 (   p a r s e I n t (   c . c s s (   " b o r d e r T o p W i d t h "   ) ,   1 0   )   | |   0   )   +   (   p a r s e I n t (   c . c s s (   " p a d d i n g T o p "   ) ,   1 0   )   | |   0   )   , 
 	 	 	 (   o v e r   ?   M a t h . m a x (   c e . s c r o l l W i d t h ,   c e . o f f s e t W i d t h   )   :   c e . o f f s e t W i d t h   )   -   (   p a r s e I n t (   c . c s s (   " b o r d e r R i g h t W i d t h "   ) ,   1 0   )   | |   0   )   -   (   p a r s e I n t (   c . c s s (   " p a d d i n g R i g h t "   ) ,   1 0   )   | |   0   )   -   t h i s . h e l p e r P r o p o r t i o n s . w i d t h   -   t h i s . m a r g i n s . l e f t   -   t h i s . m a r g i n s . r i g h t , 
 	 	 	 (   o v e r   ?   M a t h . m a x (   c e . s c r o l l H e i g h t ,   c e . o f f s e t H e i g h t   )   :   c e . o f f s e t H e i g h t   )   -   (   p a r s e I n t (   c . c s s (   " b o r d e r B o t t o m W i d t h "   ) ,   1 0   )   | |   0   )   -   (   p a r s e I n t (   c . c s s (   " p a d d i n g B o t t o m "   ) ,   1 0   )   | |   0   )   -   t h i s . h e l p e r P r o p o r t i o n s . h e i g h t   -   t h i s . m a r g i n s . t o p     -   t h i s . m a r g i n s . b o t t o m 
 	 	 ] ; 
 	 	 t h i s . r e l a t i v e _ c o n t a i n e r   =   c ; 
 	 } , 
 
 	 _ c o n v e r t P o s i t i o n T o :   f u n c t i o n ( d ,   p o s )   { 
 
 	 	 i f ( ! p o s )   { 
 	 	 	 p o s   =   t h i s . p o s i t i o n ; 
 	 	 } 
 
 	 	 v a r   m o d   =   d   = = =   " a b s o l u t e "   ?   1   :   - 1 , 
 	 	 	 s c r o l l   =   t h i s . c s s P o s i t i o n   = = =   " a b s o l u t e "   & &   ! (   t h i s . s c r o l l P a r e n t [   0   ]   ! = =   d o c u m e n t   & &   $ . c o n t a i n s (   t h i s . s c r o l l P a r e n t [   0   ] ,   t h i s . o f f s e t P a r e n t [   0   ]   )   )   ?   t h i s . o f f s e t P a r e n t   :   t h i s . s c r o l l P a r e n t ; 
 
 	 	 / / C a c h e   t h e   s c r o l l 
 	 	 i f   ( ! t h i s . o f f s e t . s c r o l l )   { 
 	 	 	 t h i s . o f f s e t . s c r o l l   =   { t o p   :   s c r o l l . s c r o l l T o p ( ) ,   l e f t   :   s c r o l l . s c r o l l L e f t ( ) } ; 
 	 	 } 
 
 	 	 r e t u r n   { 
 	 	 	 t o p :   ( 
 	 	 	 	 p o s . t o p 	 + 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 / /   T h e   a b s o l u t e   m o u s e   p o s i t i o n 
 	 	 	 	 t h i s . o f f s e t . r e l a t i v e . t o p   *   m o d   + 	 	 	 	 	 	 	 	 	 	 / /   O n l y   f o r   r e l a t i v e   p o s i t i o n e d   n o d e s :   R e l a t i v e   o f f s e t   f r o m   e l e m e n t   t o   o f f s e t   p a r e n t 
 	 	 	 	 t h i s . o f f s e t . p a r e n t . t o p   *   m o d   - 	 	 	 	 	 	 	 	 	 	 / /   T h e   o f f s e t P a r e n t ' s   o f f s e t   w i t h o u t   b o r d e r s   ( o f f s e t   +   b o r d e r ) 
 	 	 	 	 (   (   t h i s . c s s P o s i t i o n   = = =   " f i x e d "   ?   - t h i s . s c r o l l P a r e n t . s c r o l l T o p ( )   :   t h i s . o f f s e t . s c r o l l . t o p   )   *   m o d   ) 
 	 	 	 ) , 
 	 	 	 l e f t :   ( 
 	 	 	 	 p o s . l e f t   + 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 / /   T h e   a b s o l u t e   m o u s e   p o s i t i o n 
 	 	 	 	 t h i s . o f f s e t . r e l a t i v e . l e f t   *   m o d   + 	 	 	 	 	 	 	 	 	 	 / /   O n l y   f o r   r e l a t i v e   p o s i t i o n e d   n o d e s :   R e l a t i v e   o f f s e t   f r o m   e l e m e n t   t o   o f f s e t   p a r e n t 
 	 	 	 	 t h i s . o f f s e t . p a r e n t . l e f t   *   m o d 	 - 	 	 	 	 	 	 	 	 	 	 / /   T h e   o f f s e t P a r e n t ' s   o f f s e t   w i t h o u t   b o r d e r s   ( o f f s e t   +   b o r d e r ) 
 	 	 	 	 (   (   t h i s . c s s P o s i t i o n   = = =   " f i x e d "   ?   - t h i s . s c r o l l P a r e n t . s c r o l l L e f t ( )   :   t h i s . o f f s e t . s c r o l l . l e f t   )   *   m o d   ) 
 	 	 	 ) 
 	 	 } ; 
 
 	 } , 
 
 	 _ g e n e r a t e P o s i t i o n :   f u n c t i o n ( e v e n t )   { 
 
 	 	 v a r   c o n t a i n m e n t ,   c o ,   t o p ,   l e f t , 
 	 	 	 o   =   t h i s . o p t i o n s , 
 	 	 	 s c r o l l   =   t h i s . c s s P o s i t i o n   = = =   " a b s o l u t e "   & &   ! (   t h i s . s c r o l l P a r e n t [   0   ]   ! = =   d o c u m e n t   & &   $ . c o n t a i n s (   t h i s . s c r o l l P a r e n t [   0   ] ,   t h i s . o f f s e t P a r e n t [   0   ]   )   )   ?   t h i s . o f f s e t P a r e n t   :   t h i s . s c r o l l P a r e n t , 
 	 	 	 p a g e X   =   e v e n t . p a g e X , 
 	 	 	 p a g e Y   =   e v e n t . p a g e Y ; 
 
 	 	 / / C a c h e   t h e   s c r o l l 
 	 	 i f   ( ! t h i s . o f f s e t . s c r o l l )   { 
 	 	 	 t h i s . o f f s e t . s c r o l l   =   { t o p   :   s c r o l l . s c r o l l T o p ( ) ,   l e f t   :   s c r o l l . s c r o l l L e f t ( ) } ; 
 	 	 } 
 
 	 	 / * 
 	 	   *   -   P o s i t i o n   c o n s t r a i n i n g   - 
 	 	   *   C o n s t r a i n   t h e   p o s i t i o n   t o   a   m i x   o f   g r i d ,   c o n t a i n m e n t . 
 	 	   * / 
 
 	 	 / /   I f   w e   a r e   n o t   d r a g g i n g   y e t ,   w e   w o n ' t   c h e c k   f o r   o p t i o n s 
 	 	 i f   (   t h i s . o r i g i n a l P o s i t i o n   )   { 
 	 	 	 i f   (   t h i s . c o n t a i n m e n t   )   { 
 	 	 	 	 i f   (   t h i s . r e l a t i v e _ c o n t a i n e r   ) { 
 	 	 	 	 	 c o   =   t h i s . r e l a t i v e _ c o n t a i n e r . o f f s e t ( ) ; 
 	 	 	 	 	 c o n t a i n m e n t   =   [ 
 	 	 	 	 	 	 t h i s . c o n t a i n m e n t [   0   ]   +   c o . l e f t , 
 	 	 	 	 	 	 t h i s . c o n t a i n m e n t [   1   ]   +   c o . t o p , 
 	 	 	 	 	 	 t h i s . c o n t a i n m e n t [   2   ]   +   c o . l e f t , 
 	 	 	 	 	 	 t h i s . c o n t a i n m e n t [   3   ]   +   c o . t o p 
 	 	 	 	 	 ] ; 
 	 	 	 	 } 
 	 	 	 	 e l s e   { 
 	 	 	 	 	 c o n t a i n m e n t   =   t h i s . c o n t a i n m e n t ; 
 	 	 	 	 } 
 
 	 	 	 	 i f ( e v e n t . p a g e X   -   t h i s . o f f s e t . c l i c k . l e f t   <   c o n t a i n m e n t [ 0 ] )   { 
 	 	 	 	 	 p a g e X   =   c o n t a i n m e n t [ 0 ]   +   t h i s . o f f s e t . c l i c k . l e f t ; 
 	 	 	 	 } 
 	 	 	 	 i f ( e v e n t . p a g e Y   -   t h i s . o f f s e t . c l i c k . t o p   <   c o n t a i n m e n t [ 1 ] )   { 
 	 	 	 	 	 p a g e Y   =   c o n t a i n m e n t [ 1 ]   +   t h i s . o f f s e t . c l i c k . t o p ; 
 	 	 	 	 } 
 	 	 	 	 i f ( e v e n t . p a g e X   -   t h i s . o f f s e t . c l i c k . l e f t   >   c o n t a i n m e n t [ 2 ] )   { 
 	 	 	 	 	 p a g e X   =   c o n t a i n m e n t [ 2 ]   +   t h i s . o f f s e t . c l i c k . l e f t ; 
 	 	 	 	 } 
 	 	 	 	 i f ( e v e n t . p a g e Y   -   t h i s . o f f s e t . c l i c k . t o p   >   c o n t a i n m e n t [ 3 ] )   { 
 	 	 	 	 	 p a g e Y   =   c o n t a i n m e n t [ 3 ]   +   t h i s . o f f s e t . c l i c k . t o p ; 
 	 	 	 	 } 
 	 	 	 } 
 
 	 	 	 i f ( o . g r i d )   { 
 	 	 	 	 / / C h e c k   f o r   g r i d   e l e m e n t s   s e t   t o   0   t o   p r e v e n t   d i v i d e   b y   0   e r r o r   c a u s i n g   i n v a l i d   a r g u m e n t   e r r o r s   i n   I E   ( s e e   t i c k e t   # 6 9 5 0 ) 
 	 	 	 	 t o p   =   o . g r i d [ 1 ]   ?   t h i s . o r i g i n a l P a g e Y   +   M a t h . r o u n d ( ( p a g e Y   -   t h i s . o r i g i n a l P a g e Y )   /   o . g r i d [ 1 ] )   *   o . g r i d [ 1 ]   :   t h i s . o r i g i n a l P a g e Y ; 
 	 	 	 	 p a g e Y   =   c o n t a i n m e n t   ?   ( ( t o p   -   t h i s . o f f s e t . c l i c k . t o p   > =   c o n t a i n m e n t [ 1 ]   | |   t o p   -   t h i s . o f f s e t . c l i c k . t o p   >   c o n t a i n m e n t [ 3 ] )   ?   t o p   :   ( ( t o p   -   t h i s . o f f s e t . c l i c k . t o p   > =   c o n t a i n m e n t [ 1 ] )   ?   t o p   -   o . g r i d [ 1 ]   :   t o p   +   o . g r i d [ 1 ] ) )   :   t o p ; 
 
 	 	 	 	 l e f t   =   o . g r i d [ 0 ]   ?   t h i s . o r i g i n a l P a g e X   +   M a t h . r o u n d ( ( p a g e X   -   t h i s . o r i g i n a l P a g e X )   /   o . g r i d [ 0 ] )   *   o . g r i d [ 0 ]   :   t h i s . o r i g i n a l P a g e X ; 
 	 	 	 	 p a g e X   =   c o n t a i n m e n t   ?   ( ( l e f t   -   t h i s . o f f s e t . c l i c k . l e f t   > =   c o n t a i n m e n t [ 0 ]   | |   l e f t   -   t h i s . o f f s e t . c l i c k . l e f t   >   c o n t a i n m e n t [ 2 ] )   ?   l e f t   :   ( ( l e f t   -   t h i s . o f f s e t . c l i c k . l e f t   > =   c o n t a i n m e n t [ 0 ] )   ?   l e f t   -   o . g r i d [ 0 ]   :   l e f t   +   o . g r i d [ 0 ] ) )   :   l e f t ; 
 	 	 	 } 
 
 	 	 } 
 
 	 	 r e t u r n   { 
 	 	 	 t o p :   ( 
 	 	 	 	 p a g e Y   - 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 / /   T h e   a b s o l u t e   m o u s e   p o s i t i o n 
 	 	 	 	 t h i s . o f f s e t . c l i c k . t o p 	 - 	 	 	 	 	 	 	 	 	 	 	 	 / /   C l i c k   o f f s e t   ( r e l a t i v e   t o   t h e   e l e m e n t ) 
 	 	 	 	 t h i s . o f f s e t . r e l a t i v e . t o p   - 	 	 	 	 	 	 	 	 	 	 	 	 / /   O n l y   f o r   r e l a t i v e   p o s i t i o n e d   n o d e s :   R e l a t i v e   o f f s e t   f r o m   e l e m e n t   t o   o f f s e t   p a r e n t 
 	 	 	 	 t h i s . o f f s e t . p a r e n t . t o p   + 	 	 	 	 	 	 	 	 	 	 	 	 / /   T h e   o f f s e t P a r e n t ' s   o f f s e t   w i t h o u t   b o r d e r s   ( o f f s e t   +   b o r d e r ) 
 	 	 	 	 (   t h i s . c s s P o s i t i o n   = = =   " f i x e d "   ?   - t h i s . s c r o l l P a r e n t . s c r o l l T o p ( )   :   t h i s . o f f s e t . s c r o l l . t o p   ) 
 	 	 	 ) , 
 	 	 	 l e f t :   ( 
 	 	 	 	 p a g e X   - 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 / /   T h e   a b s o l u t e   m o u s e   p o s i t i o n 
 	 	 	 	 t h i s . o f f s e t . c l i c k . l e f t   - 	 	 	 	 	 	 	 	 	 	 	 	 / /   C l i c k   o f f s e t   ( r e l a t i v e   t o   t h e   e l e m e n t ) 
 	 	 	 	 t h i s . o f f s e t . r e l a t i v e . l e f t   - 	 	 	 	 	 	 	 	 	 	 	 	 / /   O n l y   f o r   r e l a t i v e   p o s i t i o n e d   n o d e s :   R e l a t i v e   o f f s e t   f r o m   e l e m e n t   t o   o f f s e t   p a r e n t 
 	 	 	 	 t h i s . o f f s e t . p a r e n t . l e f t   + 	 	 	 	 	 	 	 	 	 	 	 	 / /   T h e   o f f s e t P a r e n t ' s   o f f s e t   w i t h o u t   b o r d e r s   ( o f f s e t   +   b o r d e r ) 
 	 	 	 	 (   t h i s . c s s P o s i t i o n   = = =   " f i x e d "   ?   - t h i s . s c r o l l P a r e n t . s c r o l l L e f t ( )   :   t h i s . o f f s e t . s c r o l l . l e f t   ) 
 	 	 	 ) 
 	 	 } ; 
 
 	 } , 
 
 	 _ c l e a r :   f u n c t i o n ( )   { 
 	 	 t h i s . h e l p e r . r e m o v e C l a s s ( " u i - d r a g g a b l e - d r a g g i n g " ) ; 
 	 	 i f ( t h i s . h e l p e r [ 0 ]   ! = =   t h i s . e l e m e n t [ 0 ]   & &   ! t h i s . c a n c e l H e l p e r R e m o v a l )   { 
 	 	 	 t h i s . h e l p e r . r e m o v e ( ) ; 
 	 	 } 
 	 	 t h i s . h e l p e r   =   n u l l ; 
 	 	 t h i s . c a n c e l H e l p e r R e m o v a l   =   f a l s e ; 
 	 } , 
 
 	 / /   F r o m   n o w   o n   b u l k   s t u f f   -   m a i n l y   h e l p e r s 
 
 	 _ t r i g g e r :   f u n c t i o n ( t y p e ,   e v e n t ,   u i )   { 
 	 	 u i   =   u i   | |   t h i s . _ u i H a s h ( ) ; 
 	 	 $ . u i . p l u g i n . c a l l ( t h i s ,   t y p e ,   [ e v e n t ,   u i ] ) ; 
 	 	 / / T h e   a b s o l u t e   p o s i t i o n   h a s   t o   b e   r e c a l c u l a t e d   a f t e r   p l u g i n s 
 	 	 i f ( t y p e   = = =   " d r a g " )   { 
 	 	 	 t h i s . p o s i t i o n A b s   =   t h i s . _ c o n v e r t P o s i t i o n T o ( " a b s o l u t e " ) ; 
 	 	 } 
 	 	 r e t u r n   $ . W i d g e t . p r o t o t y p e . _ t r i g g e r . c a l l ( t h i s ,   t y p e ,   e v e n t ,   u i ) ; 
 	 } , 
 
 	 p l u g i n s :   { } , 
 
 	 _ u i H a s h :   f u n c t i o n ( )   { 
 	 	 r e t u r n   { 
 	 	 	 h e l p e r :   t h i s . h e l p e r , 
 	 	 	 p o s i t i o n :   t h i s . p o s i t i o n , 
 	 	 	 o r i g i n a l P o s i t i o n :   t h i s . o r i g i n a l P o s i t i o n , 
 	 	 	 o f f s e t :   t h i s . p o s i t i o n A b s 
 	 	 } ; 
 	 } 
 
 } ) ; 
 
 $ . u i . p l u g i n . a d d ( " d r a g g a b l e " ,   " c o n n e c t T o S o r t a b l e " ,   { 
 	 s t a r t :   f u n c t i o n ( e v e n t ,   u i )   { 
 
 	 	 v a r   i n s t   =   $ ( t h i s ) . d a t a ( " u i - d r a g g a b l e " ) ,   o   =   i n s t . o p t i o n s , 
 	 	 	 u i S o r t a b l e   =   $ . e x t e n d ( { } ,   u i ,   {   i t e m :   i n s t . e l e m e n t   } ) ; 
 	 	 i n s t . s o r t a b l e s   =   [ ] ; 
 	 	 $ ( o . c o n n e c t T o S o r t a b l e ) . e a c h ( f u n c t i o n ( )   { 
 	 	 	 v a r   s o r t a b l e   =   $ . d a t a ( t h i s ,   " u i - s o r t a b l e " ) ; 
 	 	 	 i f   ( s o r t a b l e   & &   ! s o r t a b l e . o p t i o n s . d i s a b l e d )   { 
 	 	 	 	 i n s t . s o r t a b l e s . p u s h ( { 
 	 	 	 	 	 i n s t a n c e :   s o r t a b l e , 
 	 	 	 	 	 s h o u l d R e v e r t :   s o r t a b l e . o p t i o n s . r e v e r t 
 	 	 	 	 } ) ; 
 	 	 	 	 s o r t a b l e . r e f r e s h P o s i t i o n s ( ) ; 	 / /   C a l l   t h e   s o r t a b l e ' s   r e f r e s h P o s i t i o n s   a t   d r a g   s t a r t   t o   r e f r e s h   t h e   c o n t a i n e r C a c h e   s i n c e   t h e   s o r t a b l e   c o n t a i n e r   c a c h e   i s   u s e d   i n   d r a g   a n d   n e e d s   t o   b e   u p   t o   d a t e   ( t h i s   w i l l   e n s u r e   i t ' s   i n i t i a l i s e d   a s   w e l l   a s   b e i n g   k e p t   i n   s t e p   w i t h   a n y   c h a n g e s   t h a t   m i g h t   h a v e   h a p p e n e d   o n   t h e   p a g e ) . 
 	 	 	 	 s o r t a b l e . _ t r i g g e r ( " a c t i v a t e " ,   e v e n t ,   u i S o r t a b l e ) ; 
 	 	 	 } 
 	 	 } ) ; 
 
 	 } , 
 	 s t o p :   f u n c t i o n ( e v e n t ,   u i )   { 
 
 	 	 / / I f   w e   a r e   s t i l l   o v e r   t h e   s o r t a b l e ,   w e   f a k e   t h e   s t o p   e v e n t   o f   t h e   s o r t a b l e ,   b u t   a l s o   r e m o v e   h e l p e r 
 	 	 v a r   i n s t   =   $ ( t h i s ) . d a t a ( " u i - d r a g g a b l e " ) , 
 	 	 	 u i S o r t a b l e   =   $ . e x t e n d ( { } ,   u i ,   {   i t e m :   i n s t . e l e m e n t   } ) ; 
 
 	 	 $ . e a c h ( i n s t . s o r t a b l e s ,   f u n c t i o n ( )   { 
 	 	 	 i f ( t h i s . i n s t a n c e . i s O v e r )   { 
 
 	 	 	 	 t h i s . i n s t a n c e . i s O v e r   =   0 ; 
 
 	 	 	 	 i n s t . c a n c e l H e l p e r R e m o v a l   =   t r u e ;   / / D o n ' t   r e m o v e   t h e   h e l p e r   i n   t h e   d r a g g a b l e   i n s t a n c e 
 	 	 	 	 t h i s . i n s t a n c e . c a n c e l H e l p e r R e m o v a l   =   f a l s e ;   / / R e m o v e   i t   i n   t h e   s o r t a b l e   i n s t a n c e   ( s o   s o r t a b l e   p l u g i n s   l i k e   r e v e r t   s t i l l   w o r k ) 
 
 	 	 	 	 / / T h e   s o r t a b l e   r e v e r t   i s   s u p p o r t e d ,   a n d   w e   h a v e   t o   s e t   a   t e m p o r a r y   d r o p p e d   v a r i a b l e   o n   t h e   d r a g g a b l e   t o   s u p p o r t   r e v e r t :   " v a l i d / i n v a l i d " 
 	 	 	 	 i f ( t h i s . s h o u l d R e v e r t )   { 
 	 	 	 	 	 t h i s . i n s t a n c e . o p t i o n s . r e v e r t   =   t h i s . s h o u l d R e v e r t ; 
 	 	 	 	 } 
 
 	 	 	 	 / / T r i g g e r   t h e   s t o p   o f   t h e   s o r t a b l e 
 	 	 	 	 t h i s . i n s t a n c e . _ m o u s e S t o p ( e v e n t ) ; 
 
 	 	 	 	 t h i s . i n s t a n c e . o p t i o n s . h e l p e r   =   t h i s . i n s t a n c e . o p t i o n s . _ h e l p e r ; 
 
 	 	 	 	 / / I f   t h e   h e l p e r   h a s   b e e n   t h e   o r i g i n a l   i t e m ,   r e s t o r e   p r o p e r t i e s   i n   t h e   s o r t a b l e 
 	 	 	 	 i f ( i n s t . o p t i o n s . h e l p e r   = = =   " o r i g i n a l " )   { 
 	 	 	 	 	 t h i s . i n s t a n c e . c u r r e n t I t e m . c s s ( {   t o p :   " a u t o " ,   l e f t :   " a u t o "   } ) ; 
 	 	 	 	 } 
 
 	 	 	 }   e l s e   { 
 	 	 	 	 t h i s . i n s t a n c e . c a n c e l H e l p e r R e m o v a l   =   f a l s e ;   / / R e m o v e   t h e   h e l p e r   i n   t h e   s o r t a b l e   i n s t a n c e 
 	 	 	 	 t h i s . i n s t a n c e . _ t r i g g e r ( " d e a c t i v a t e " ,   e v e n t ,   u i S o r t a b l e ) ; 
 	 	 	 } 
 
 	 	 } ) ; 
 
 	 } , 
 	 d r a g :   f u n c t i o n ( e v e n t ,   u i )   { 
 
 	 	 v a r   i n s t   =   $ ( t h i s ) . d a t a ( " u i - d r a g g a b l e " ) ,   t h a t   =   t h i s ; 
 
 	 	 $ . e a c h ( i n s t . s o r t a b l e s ,   f u n c t i o n ( )   { 
 
 	 	 	 v a r   i n n e r m o s t I n t e r s e c t i n g   =   f a l s e , 
 	 	 	 	 t h i s S o r t a b l e   =   t h i s ; 
 
 	 	 	 / / C o p y   o v e r   s o m e   v a r i a b l e s   t o   a l l o w   c a l l i n g   t h e   s o r t a b l e ' s   n a t i v e   _ i n t e r s e c t s W i t h 
 	 	 	 t h i s . i n s t a n c e . p o s i t i o n A b s   =   i n s t . p o s i t i o n A b s ; 
 	 	 	 t h i s . i n s t a n c e . h e l p e r P r o p o r t i o n s   =   i n s t . h e l p e r P r o p o r t i o n s ; 
 	 	 	 t h i s . i n s t a n c e . o f f s e t . c l i c k   =   i n s t . o f f s e t . c l i c k ; 
 
 	 	 	 i f ( t h i s . i n s t a n c e . _ i n t e r s e c t s W i t h ( t h i s . i n s t a n c e . c o n t a i n e r C a c h e ) )   { 
 	 	 	 	 i n n e r m o s t I n t e r s e c t i n g   =   t r u e ; 
 	 	 	 	 $ . e a c h ( i n s t . s o r t a b l e s ,   f u n c t i o n   ( )   { 
 	 	 	 	 	 t h i s . i n s t a n c e . p o s i t i o n A b s   =   i n s t . p o s i t i o n A b s ; 
 	 	 	 	 	 t h i s . i n s t a n c e . h e l p e r P r o p o r t i o n s   =   i n s t . h e l p e r P r o p o r t i o n s ; 
 	 	 	 	 	 t h i s . i n s t a n c e . o f f s e t . c l i c k   =   i n s t . o f f s e t . c l i c k ; 
 	 	 	 	 	 i f   ( t h i s   ! = =   t h i s S o r t a b l e   & & 
 	 	 	 	 	 	 t h i s . i n s t a n c e . _ i n t e r s e c t s W i t h ( t h i s . i n s t a n c e . c o n t a i n e r C a c h e )   & & 
 	 	 	 	 	 	 $ . c o n t a i n s ( t h i s S o r t a b l e . i n s t a n c e . e l e m e n t [ 0 ] ,   t h i s . i n s t a n c e . e l e m e n t [ 0 ] ) 
 	 	 	 	 	 )   { 
 	 	 	 	 	 	 i n n e r m o s t I n t e r s e c t i n g   =   f a l s e ; 
 	 	 	 	 	 } 
 	 	 	 	 	 r e t u r n   i n n e r m o s t I n t e r s e c t i n g ; 
 	 	 	 	 } ) ; 
 	 	 	 } 
 
 
 	 	 	 i f ( i n n e r m o s t I n t e r s e c t i n g )   { 
 	 	 	 	 / / I f   i t   i n t e r s e c t s ,   w e   u s e   a   l i t t l e   i s O v e r   v a r i a b l e   a n d   s e t   i t   o n c e ,   s o   o u r   m o v e - i n   s t u f f   g e t s   f i r e d   o n l y   o n c e 
 	 	 	 	 i f ( ! t h i s . i n s t a n c e . i s O v e r )   { 
 
 	 	 	 	 	 t h i s . i n s t a n c e . i s O v e r   =   1 ; 
 	 	 	 	 	 / / N o w   w e   f a k e   t h e   s t a r t   o f   d r a g g i n g   f o r   t h e   s o r t a b l e   i n s t a n c e , 
 	 	 	 	 	 / / b y   c l o n i n g   t h e   l i s t   g r o u p   i t e m ,   a p p e n d i n g   i t   t o   t h e   s o r t a b l e   a n d   u s i n g   i t   a s   i n s t . c u r r e n t I t e m 
 	 	 	 	 	 / / W e   c a n   t h e n   f i r e   t h e   s t a r t   e v e n t   o f   t h e   s o r t a b l e   w i t h   o u r   p a s s e d   b r o w s e r   e v e n t ,   a n d   o u r   o w n   h e l p e r   ( s o   i t   d o e s n ' t   c r e a t e   a   n e w   o n e ) 
 	 	 	 	 	 t h i s . i n s t a n c e . c u r r e n t I t e m   =   $ ( t h a t ) . c l o n e ( ) . r e m o v e A t t r ( " i d " ) . a p p e n d T o ( t h i s . i n s t a n c e . e l e m e n t ) . d a t a ( " u i - s o r t a b l e - i t e m " ,   t r u e ) ; 
 	 	 	 	 	 t h i s . i n s t a n c e . o p t i o n s . _ h e l p e r   =   t h i s . i n s t a n c e . o p t i o n s . h e l p e r ;   / / S t o r e   h e l p e r   o p t i o n   t o   l a t e r   r e s t o r e   i t 
 	 	 	 	 	 t h i s . i n s t a n c e . o p t i o n s . h e l p e r   =   f u n c t i o n ( )   {   r e t u r n   u i . h e l p e r [ 0 ] ;   } ; 
 
 	 	 	 	 	 e v e n t . t a r g e t   =   t h i s . i n s t a n c e . c u r r e n t I t e m [ 0 ] ; 
 	 	 	 	 	 t h i s . i n s t a n c e . _ m o u s e C a p t u r e ( e v e n t ,   t r u e ) ; 
 	 	 	 	 	 t h i s . i n s t a n c e . _ m o u s e S t a r t ( e v e n t ,   t r u e ,   t r u e ) ; 
 
 	 	 	 	 	 / / B e c a u s e   t h e   b r o w s e r   e v e n t   i s   w a y   o f f   t h e   n e w   a p p e n d e d   p o r t l e t ,   w e   m o d i f y   a   c o u p l e   o f   v a r i a b l e s   t o   r e f l e c t   t h e   c h a n g e s 
 	 	 	 	 	 t h i s . i n s t a n c e . o f f s e t . c l i c k . t o p   =   i n s t . o f f s e t . c l i c k . t o p ; 
 	 	 	 	 	 t h i s . i n s t a n c e . o f f s e t . c l i c k . l e f t   =   i n s t . o f f s e t . c l i c k . l e f t ; 
 	 	 	 	 	 t h i s . i n s t a n c e . o f f s e t . p a r e n t . l e f t   - =   i n s t . o f f s e t . p a r e n t . l e f t   -   t h i s . i n s t a n c e . o f f s e t . p a r e n t . l e f t ; 
 	 	 	 	 	 t h i s . i n s t a n c e . o f f s e t . p a r e n t . t o p   - =   i n s t . o f f s e t . p a r e n t . t o p   -   t h i s . i n s t a n c e . o f f s e t . p a r e n t . t o p ; 
 
 	 	 	 	 	 i n s t . _ t r i g g e r ( " t o S o r t a b l e " ,   e v e n t ) ; 
 	 	 	 	 	 i n s t . d r o p p e d   =   t h i s . i n s t a n c e . e l e m e n t ;   / / d r a g g a b l e   r e v e r t   n e e d s   t h a t 
 	 	 	 	 	 / / h a c k   s o   r e c e i v e / u p d a t e   c a l l b a c k s   w o r k   ( m o s t l y ) 
 	 	 	 	 	 i n s t . c u r r e n t I t e m   =   i n s t . e l e m e n t ; 
 	 	 	 	 	 t h i s . i n s t a n c e . f r o m O u t s i d e   =   i n s t ; 
 
 	 	 	 	 } 
 
 	 	 	 	 / / P r o v i d e d   w e   d i d   a l l   t h e   p r e v i o u s   s t e p s ,   w e   c a n   f i r e   t h e   d r a g   e v e n t   o f   t h e   s o r t a b l e   o n   e v e r y   d r a g g a b l e   d r a g ,   w h e n   i t   i n t e r s e c t s   w i t h   t h e   s o r t a b l e 
 	 	 	 	 i f ( t h i s . i n s t a n c e . c u r r e n t I t e m )   { 
 	 	 	 	 	 t h i s . i n s t a n c e . _ m o u s e D r a g ( e v e n t ) ; 
 	 	 	 	 } 
 
 	 	 	 }   e l s e   { 
 
 	 	 	 	 / / I f   i t   d o e s n ' t   i n t e r s e c t   w i t h   t h e   s o r t a b l e ,   a n d   i t   i n t e r s e c t e d   b e f o r e , 
 	 	 	 	 / / w e   f a k e   t h e   d r a g   s t o p   o f   t h e   s o r t a b l e ,   b u t   m a k e   s u r e   i t   d o e s n ' t   r e m o v e   t h e   h e l p e r   b y   u s i n g   c a n c e l H e l p e r R e m o v a l 
 	 	 	 	 i f ( t h i s . i n s t a n c e . i s O v e r )   { 
 
 	 	 	 	 	 t h i s . i n s t a n c e . i s O v e r   =   0 ; 
 	 	 	 	 	 t h i s . i n s t a n c e . c a n c e l H e l p e r R e m o v a l   =   t r u e ; 
 
 	 	 	 	 	 / / P r e v e n t   r e v e r t i n g   o n   t h i s   f o r c e d   s t o p 
 	 	 	 	 	 t h i s . i n s t a n c e . o p t i o n s . r e v e r t   =   f a l s e ; 
 
 	 	 	 	 	 / /   T h e   o u t   e v e n t   n e e d s   t o   b e   t r i g g e r e d   i n d e p e n d e n t l y 
 	 	 	 	 	 t h i s . i n s t a n c e . _ t r i g g e r ( " o u t " ,   e v e n t ,   t h i s . i n s t a n c e . _ u i H a s h ( t h i s . i n s t a n c e ) ) ; 
 
 	 	 	 	 	 t h i s . i n s t a n c e . _ m o u s e S t o p ( e v e n t ,   t r u e ) ; 
 	 	 	 	 	 t h i s . i n s t a n c e . o p t i o n s . h e l p e r   =   t h i s . i n s t a n c e . o p t i o n s . _ h e l p e r ; 
 
 	 	 	 	 	 / / N o w   w e   r e m o v e   o u r   c u r r e n t I t e m ,   t h e   l i s t   g r o u p   c l o n e   a g a i n ,   a n d   t h e   p l a c e h o l d e r ,   a n d   a n i m a t e   t h e   h e l p e r   b a c k   t o   i t ' s   o r i g i n a l   s i z e 
 	 	 	 	 	 t h i s . i n s t a n c e . c u r r e n t I t e m . r e m o v e ( ) ; 
 	 	 	 	 	 i f ( t h i s . i n s t a n c e . p l a c e h o l d e r )   { 
 	 	 	 	 	 	 t h i s . i n s t a n c e . p l a c e h o l d e r . r e m o v e ( ) ; 
 	 	 	 	 	 } 
 
 	 	 	 	 	 i n s t . _ t r i g g e r ( " f r o m S o r t a b l e " ,   e v e n t ) ; 
 	 	 	 	 	 i n s t . d r o p p e d   =   f a l s e ;   / / d r a g g a b l e   r e v e r t   n e e d s   t h a t 
 	 	 	 	 } 
 
 	 	 	 } 
 
 	 	 } ) ; 
 
 	 } 
 } ) ; 
 
 $ . u i . p l u g i n . a d d ( " d r a g g a b l e " ,   " c u r s o r " ,   { 
 	 s t a r t :   f u n c t i o n ( )   { 
 	 	 v a r   t   =   $ ( " b o d y " ) ,   o   =   $ ( t h i s ) . d a t a ( " u i - d r a g g a b l e " ) . o p t i o n s ; 
 	 	 i f   ( t . c s s ( " c u r s o r " ) )   { 
 	 	 	 o . _ c u r s o r   =   t . c s s ( " c u r s o r " ) ; 
 	 	 } 
 	 	 t . c s s ( " c u r s o r " ,   o . c u r s o r ) ; 
 	 } , 
 	 s t o p :   f u n c t i o n ( )   { 
 	 	 v a r   o   =   $ ( t h i s ) . d a t a ( " u i - d r a g g a b l e " ) . o p t i o n s ; 
 	 	 i f   ( o . _ c u r s o r )   { 
 	 	 	 $ ( " b o d y " ) . c s s ( " c u r s o r " ,   o . _ c u r s o r ) ; 
 	 	 } 
 	 } 
 } ) ; 
 
 $ . u i . p l u g i n . a d d ( " d r a g g a b l e " ,   " o p a c i t y " ,   { 
 	 s t a r t :   f u n c t i o n ( e v e n t ,   u i )   { 
 	 	 v a r   t   =   $ ( u i . h e l p e r ) ,   o   =   $ ( t h i s ) . d a t a ( " u i - d r a g g a b l e " ) . o p t i o n s ; 
 	 	 i f ( t . c s s ( " o p a c i t y " ) )   { 
 	 	 	 o . _ o p a c i t y   =   t . c s s ( " o p a c i t y " ) ; 
 	 	 } 
 	 	 t . c s s ( " o p a c i t y " ,   o . o p a c i t y ) ; 
 	 } , 
 	 s t o p :   f u n c t i o n ( e v e n t ,   u i )   { 
 	 	 v a r   o   =   $ ( t h i s ) . d a t a ( " u i - d r a g g a b l e " ) . o p t i o n s ; 
 	 	 i f ( o . _ o p a c i t y )   { 
 	 	 	 $ ( u i . h e l p e r ) . c s s ( " o p a c i t y " ,   o . _ o p a c i t y ) ; 
 	 	 } 
 	 } 
 } ) ; 
 
 $ . u i . p l u g i n . a d d ( " d r a g g a b l e " ,   " s c r o l l " ,   { 
 	 s t a r t :   f u n c t i o n ( )   { 
 	 	 v a r   i   =   $ ( t h i s ) . d a t a ( " u i - d r a g g a b l e " ) ; 
 	 	 i f ( i . s c r o l l P a r e n t [ 0 ]   ! = =   d o c u m e n t   & &   i . s c r o l l P a r e n t [ 0 ] . t a g N a m e   ! = =   " H T M L " )   { 
 	 	 	 i . o v e r f l o w O f f s e t   =   i . s c r o l l P a r e n t . o f f s e t ( ) ; 
 	 	 } 
 	 } , 
 	 d r a g :   f u n c t i o n (   e v e n t   )   { 
 
 	 	 v a r   i   =   $ ( t h i s ) . d a t a ( " u i - d r a g g a b l e " ) ,   o   =   i . o p t i o n s ,   s c r o l l e d   =   f a l s e ; 
 
 	 	 i f ( i . s c r o l l P a r e n t [ 0 ]   ! = =   d o c u m e n t   & &   i . s c r o l l P a r e n t [ 0 ] . t a g N a m e   ! = =   " H T M L " )   { 
 
 	 	 	 i f ( ! o . a x i s   | |   o . a x i s   ! = =   " x " )   { 
 	 	 	 	 i f ( ( i . o v e r f l o w O f f s e t . t o p   +   i . s c r o l l P a r e n t [ 0 ] . o f f s e t H e i g h t )   -   e v e n t . p a g e Y   <   o . s c r o l l S e n s i t i v i t y )   { 
 	 	 	 	 	 i . s c r o l l P a r e n t [ 0 ] . s c r o l l T o p   =   s c r o l l e d   =   i . s c r o l l P a r e n t [ 0 ] . s c r o l l T o p   +   o . s c r o l l S p e e d ; 
 	 	 	 	 }   e l s e   i f ( e v e n t . p a g e Y   -   i . o v e r f l o w O f f s e t . t o p   <   o . s c r o l l S e n s i t i v i t y )   { 
 	 	 	 	 	 i . s c r o l l P a r e n t [ 0 ] . s c r o l l T o p   =   s c r o l l e d   =   i . s c r o l l P a r e n t [ 0 ] . s c r o l l T o p   -   o . s c r o l l S p e e d ; 
 	 	 	 	 } 
 	 	 	 } 
 
 	 	 	 i f ( ! o . a x i s   | |   o . a x i s   ! = =   " y " )   { 
 	 	 	 	 i f ( ( i . o v e r f l o w O f f s e t . l e f t   +   i . s c r o l l P a r e n t [ 0 ] . o f f s e t W i d t h )   -   e v e n t . p a g e X   <   o . s c r o l l S e n s i t i v i t y )   { 
 	 	 	 	 	 i . s c r o l l P a r e n t [ 0 ] . s c r o l l L e f t   =   s c r o l l e d   =   i . s c r o l l P a r e n t [ 0 ] . s c r o l l L e f t   +   o . s c r o l l S p e e d ; 
 	 	 	 	 }   e l s e   i f ( e v e n t . p a g e X   -   i . o v e r f l o w O f f s e t . l e f t   <   o . s c r o l l S e n s i t i v i t y )   { 
 	 	 	 	 	 i . s c r o l l P a r e n t [ 0 ] . s c r o l l L e f t   =   s c r o l l e d   =   i . s c r o l l P a r e n t [ 0 ] . s c r o l l L e f t   -   o . s c r o l l S p e e d ; 
 	 	 	 	 } 
 	 	 	 } 
 
 	 	 }   e l s e   { 
 
 	 	 	 i f ( ! o . a x i s   | |   o . a x i s   ! = =   " x " )   { 
 	 	 	 	 i f ( e v e n t . p a g e Y   -   $ ( d o c u m e n t ) . s c r o l l T o p ( )   <   o . s c r o l l S e n s i t i v i t y )   { 
 	 	 	 	 	 s c r o l l e d   =   $ ( d o c u m e n t ) . s c r o l l T o p ( $ ( d o c u m e n t ) . s c r o l l T o p ( )   -   o . s c r o l l S p e e d ) ; 
 	 	 	 	 }   e l s e   i f ( $ ( w i n d o w ) . h e i g h t ( )   -   ( e v e n t . p a g e Y   -   $ ( d o c u m e n t ) . s c r o l l T o p ( ) )   <   o . s c r o l l S e n s i t i v i t y )   { 
 	 	 	 	 	 s c r o l l e d   =   $ ( d o c u m e n t ) . s c r o l l T o p ( $ ( d o c u m e n t ) . s c r o l l T o p ( )   +   o . s c r o l l S p e e d ) ; 
 	 	 	 	 } 
 	 	 	 } 
 
 	 	 	 i f ( ! o . a x i s   | |   o . a x i s   ! = =   " y " )   { 
 	 	 	 	 i f ( e v e n t . p a g e X   -   $ ( d o c u m e n t ) . s c r o l l L e f t ( )   <   o . s c r o l l S e n s i t i v i t y )   { 
 	 	 	 	 	 s c r o l l e d   =   $ ( d o c u m e n t ) . s c r o l l L e f t ( $ ( d o c u m e n t ) . s c r o l l L e f t ( )   -   o . s c r o l l S p e e d ) ; 
 	 	 	 	 }   e l s e   i f ( $ ( w i n d o w ) . w i d t h ( )   -   ( e v e n t . p a g e X   -   $ ( d o c u m e n t ) . s c r o l l L e f t ( ) )   <   o . s c r o l l S e n s i t i v i t y )   { 
 	 	 	 	 	 s c r o l l e d   =   $ ( d o c u m e n t ) . s c r o l l L e f t ( $ ( d o c u m e n t ) . s c r o l l L e f t ( )   +   o . s c r o l l S p e e d ) ; 
 	 	 	 	 } 
 	 	 	 } 
 
 	 	 } 
 
 	 	 i f ( s c r o l l e d   ! = =   f a l s e   & &   $ . u i . d d m a n a g e r   & &   ! o . d r o p B e h a v i o u r )   { 
 	 	 	 $ . u i . d d m a n a g e r . p r e p a r e O f f s e t s ( i ,   e v e n t ) ; 
 	 	 } 
 
 	 } 
 } ) ; 
 
 $ . u i . p l u g i n . a d d ( " d r a g g a b l e " ,   " s n a p " ,   { 
 	 s t a r t :   f u n c t i o n ( )   { 
 
 	 	 v a r   i   =   $ ( t h i s ) . d a t a ( " u i - d r a g g a b l e " ) , 
 	 	 	 o   =   i . o p t i o n s ; 
 
 	 	 i . s n a p E l e m e n t s   =   [ ] ; 
 
 	 	 $ ( o . s n a p . c o n s t r u c t o r   ! = =   S t r i n g   ?   (   o . s n a p . i t e m s   | |   " : d a t a ( u i - d r a g g a b l e ) "   )   :   o . s n a p ) . e a c h ( f u n c t i o n ( )   { 
 	 	 	 v a r   $ t   =   $ ( t h i s ) , 
 	 	 	 	 $ o   =   $ t . o f f s e t ( ) ; 
 	 	 	 i f ( t h i s   ! = =   i . e l e m e n t [ 0 ] )   { 
 	 	 	 	 i . s n a p E l e m e n t s . p u s h ( { 
 	 	 	 	 	 i t e m :   t h i s , 
 	 	 	 	 	 w i d t h :   $ t . o u t e r W i d t h ( ) ,   h e i g h t :   $ t . o u t e r H e i g h t ( ) , 
 	 	 	 	 	 t o p :   $ o . t o p ,   l e f t :   $ o . l e f t 
 	 	 	 	 } ) ; 
 	 	 	 } 
 	 	 } ) ; 
 
 	 } , 
 	 d r a g :   f u n c t i o n ( e v e n t ,   u i )   { 
 
 	 	 v a r   t s ,   b s ,   l s ,   r s ,   l ,   r ,   t ,   b ,   i ,   f i r s t , 
 	 	 	 i n s t   =   $ ( t h i s ) . d a t a ( " u i - d r a g g a b l e " ) , 
 	 	 	 o   =   i n s t . o p t i o n s , 
 	 	 	 d   =   o . s n a p T o l e r a n c e , 
 	 	 	 x 1   =   u i . o f f s e t . l e f t ,   x 2   =   x 1   +   i n s t . h e l p e r P r o p o r t i o n s . w i d t h , 
 	 	 	 y 1   =   u i . o f f s e t . t o p ,   y 2   =   y 1   +   i n s t . h e l p e r P r o p o r t i o n s . h e i g h t ; 
 
 	 	 f o r   ( i   =   i n s t . s n a p E l e m e n t s . l e n g t h   -   1 ;   i   > =   0 ;   i - - ) { 
 
 	 	 	 l   =   i n s t . s n a p E l e m e n t s [ i ] . l e f t ; 
 	 	 	 r   =   l   +   i n s t . s n a p E l e m e n t s [ i ] . w i d t h ; 
 	 	 	 t   =   i n s t . s n a p E l e m e n t s [ i ] . t o p ; 
 	 	 	 b   =   t   +   i n s t . s n a p E l e m e n t s [ i ] . h e i g h t ; 
 
 	 	 	 i f   (   x 2   <   l   -   d   | |   x 1   >   r   +   d   | |   y 2   <   t   -   d   | |   y 1   >   b   +   d   | |   ! $ . c o n t a i n s (   i n s t . s n a p E l e m e n t s [   i   ] . i t e m . o w n e r D o c u m e n t ,   i n s t . s n a p E l e m e n t s [   i   ] . i t e m   )   )   { 
 	 	 	 	 i f ( i n s t . s n a p E l e m e n t s [ i ] . s n a p p i n g )   { 
 	 	 	 	 	 ( i n s t . o p t i o n s . s n a p . r e l e a s e   & &   i n s t . o p t i o n s . s n a p . r e l e a s e . c a l l ( i n s t . e l e m e n t ,   e v e n t ,   $ . e x t e n d ( i n s t . _ u i H a s h ( ) ,   {   s n a p I t e m :   i n s t . s n a p E l e m e n t s [ i ] . i t e m   } ) ) ) ; 
 	 	 	 	 } 
 	 	 	 	 i n s t . s n a p E l e m e n t s [ i ] . s n a p p i n g   =   f a l s e ; 
 	 	 	 	 c o n t i n u e ; 
 	 	 	 } 
 
 	 	 	 i f ( o . s n a p M o d e   ! = =   " i n n e r " )   { 
 	 	 	 	 t s   =   M a t h . a b s ( t   -   y 2 )   < =   d ; 
 	 	 	 	 b s   =   M a t h . a b s ( b   -   y 1 )   < =   d ; 
 	 	 	 	 l s   =   M a t h . a b s ( l   -   x 2 )   < =   d ; 
 	 	 	 	 r s   =   M a t h . a b s ( r   -   x 1 )   < =   d ; 
 	 	 	 	 i f ( t s )   { 
 	 	 	 	 	 u i . p o s i t i o n . t o p   =   i n s t . _ c o n v e r t P o s i t i o n T o ( " r e l a t i v e " ,   {   t o p :   t   -   i n s t . h e l p e r P r o p o r t i o n s . h e i g h t ,   l e f t :   0   } ) . t o p   -   i n s t . m a r g i n s . t o p ; 
 	 	 	 	 } 
 	 	 	 	 i f ( b s )   { 
 	 	 	 	 	 u i . p o s i t i o n . t o p   =   i n s t . _ c o n v e r t P o s i t i o n T o ( " r e l a t i v e " ,   {   t o p :   b ,   l e f t :   0   } ) . t o p   -   i n s t . m a r g i n s . t o p ; 
 	 	 	 	 } 
 	 	 	 	 i f ( l s )   { 
 	 	 	 	 	 u i . p o s i t i o n . l e f t   =   i n s t . _ c o n v e r t P o s i t i o n T o ( " r e l a t i v e " ,   {   t o p :   0 ,   l e f t :   l   -   i n s t . h e l p e r P r o p o r t i o n s . w i d t h   } ) . l e f t   -   i n s t . m a r g i n s . l e f t ; 
 	 	 	 	 } 
 	 	 	 	 i f ( r s )   { 
 	 	 	 	 	 u i . p o s i t i o n . l e f t   =   i n s t . _ c o n v e r t P o s i t i o n T o ( " r e l a t i v e " ,   {   t o p :   0 ,   l e f t :   r   } ) . l e f t   -   i n s t . m a r g i n s . l e f t ; 
 	 	 	 	 } 
 	 	 	 } 
 
 	 	 	 f i r s t   =   ( t s   | |   b s   | |   l s   | |   r s ) ; 
 
 	 	 	 i f ( o . s n a p M o d e   ! = =   " o u t e r " )   { 
 	 	 	 	 t s   =   M a t h . a b s ( t   -   y 1 )   < =   d ; 
 	 	 	 	 b s   =   M a t h . a b s ( b   -   y 2 )   < =   d ; 
 	 	 	 	 l s   =   M a t h . a b s ( l   -   x 1 )   < =   d ; 
 	 	 	 	 r s   =   M a t h . a b s ( r   -   x 2 )   < =   d ; 
 	 	 	 	 i f ( t s )   { 
 	 	 	 	 	 u i . p o s i t i o n . t o p   =   i n s t . _ c o n v e r t P o s i t i o n T o ( " r e l a t i v e " ,   {   t o p :   t ,   l e f t :   0   } ) . t o p   -   i n s t . m a r g i n s . t o p ; 
 	 	 	 	 } 
 	 	 	 	 i f ( b s )   { 
 	 	 	 	 	 u i . p o s i t i o n . t o p   =   i n s t . _ c o n v e r t P o s i t i o n T o ( " r e l a t i v e " ,   {   t o p :   b   -   i n s t . h e l p e r P r o p o r t i o n s . h e i g h t ,   l e f t :   0   } ) . t o p   -   i n s t . m a r g i n s . t o p ; 
 	 	 	 	 } 
 	 	 	 	 i f ( l s )   { 
 	 	 	 	 	 u i . p o s i t i o n . l e f t   =   i n s t . _ c o n v e r t P o s i t i o n T o ( " r e l a t i v e " ,   {   t o p :   0 ,   l e f t :   l   } ) . l e f t   -   i n s t . m a r g i n s . l e f t ; 
 	 	 	 	 } 
 	 	 	 	 i f ( r s )   { 
 	 	 	 	 	 u i . p o s i t i o n . l e f t   =   i n s t . _ c o n v e r t P o s i t i o n T o ( " r e l a t i v e " ,   {   t o p :   0 ,   l e f t :   r   -   i n s t . h e l p e r P r o p o r t i o n s . w i d t h   } ) . l e f t   -   i n s t . m a r g i n s . l e f t ; 
 	 	 	 	 } 
 	 	 	 } 
 
 	 	 	 i f ( ! i n s t . s n a p E l e m e n t s [ i ] . s n a p p i n g   & &   ( t s   | |   b s   | |   l s   | |   r s   | |   f i r s t ) )   { 
 	 	 	 	 ( i n s t . o p t i o n s . s n a p . s n a p   & &   i n s t . o p t i o n s . s n a p . s n a p . c a l l ( i n s t . e l e m e n t ,   e v e n t ,   $ . e x t e n d ( i n s t . _ u i H a s h ( ) ,   {   s n a p I t e m :   i n s t . s n a p E l e m e n t s [ i ] . i t e m   } ) ) ) ; 
 	 	 	 } 
 	 	 	 i n s t . s n a p E l e m e n t s [ i ] . s n a p p i n g   =   ( t s   | |   b s   | |   l s   | |   r s   | |   f i r s t ) ; 
 
 	 	 } 
 
 	 } 
 } ) ; 
 
 $ . u i . p l u g i n . a d d ( " d r a g g a b l e " ,   " s t a c k " ,   { 
 	 s t a r t :   f u n c t i o n ( )   { 
 	 	 v a r   m i n , 
 	 	 	 o   =   t h i s . d a t a ( " u i - d r a g g a b l e " ) . o p t i o n s , 
 	 	 	 g r o u p   =   $ . m a k e A r r a y ( $ ( o . s t a c k ) ) . s o r t ( f u n c t i o n ( a , b )   { 
 	 	 	 	 r e t u r n   ( p a r s e I n t ( $ ( a ) . c s s ( " z I n d e x " ) , 1 0 )   | |   0 )   -   ( p a r s e I n t ( $ ( b ) . c s s ( " z I n d e x " ) , 1 0 )   | |   0 ) ; 
 	 	 	 } ) ; 
 
 	 	 i f   ( ! g r o u p . l e n g t h )   {   r e t u r n ;   } 
 
 	 	 m i n   =   p a r s e I n t ( $ ( g r o u p [ 0 ] ) . c s s ( " z I n d e x " ) ,   1 0 )   | |   0 ; 
 	 	 $ ( g r o u p ) . e a c h ( f u n c t i o n ( i )   { 
 	 	 	 $ ( t h i s ) . c s s ( " z I n d e x " ,   m i n   +   i ) ; 
 	 	 } ) ; 
 	 	 t h i s . c s s ( " z I n d e x " ,   ( m i n   +   g r o u p . l e n g t h ) ) ; 
 	 } 
 } ) ; 
 
 $ . u i . p l u g i n . a d d ( " d r a g g a b l e " ,   " z I n d e x " ,   { 
 	 s t a r t :   f u n c t i o n ( e v e n t ,   u i )   { 
 	 	 v a r   t   =   $ ( u i . h e l p e r ) ,   o   =   $ ( t h i s ) . d a t a ( " u i - d r a g g a b l e " ) . o p t i o n s ; 
 	 	 i f ( t . c s s ( " z I n d e x " ) )   { 
 	 	 	 o . _ z I n d e x   =   t . c s s ( " z I n d e x " ) ; 
 	 	 } 
 	 	 t . c s s ( " z I n d e x " ,   o . z I n d e x ) ; 
 	 } , 
 	 s t o p :   f u n c t i o n ( e v e n t ,   u i )   { 
 	 	 v a r   o   =   $ ( t h i s ) . d a t a ( " u i - d r a g g a b l e " ) . o p t i o n s ; 
 	 	 i f ( o . _ z I n d e x )   { 
 	 	 	 $ ( u i . h e l p e r ) . c s s ( " z I n d e x " ,   o . _ z I n d e x ) ; 
 	 	 } 
 	 } 
 } ) ; 
 
 } ) ( j Q u e r y ) ; 
 
 ( f u n c t i o n (   $ ,   u n d e f i n e d   )   { 
 
 f u n c t i o n   i s O v e r A x i s (   x ,   r e f e r e n c e ,   s i z e   )   { 
 	 r e t u r n   (   x   >   r e f e r e n c e   )   & &   (   x   <   (   r e f e r e n c e   +   s i z e   )   ) ; 
 } 
 
 $ . w i d g e t ( " u i . d r o p p a b l e " ,   { 
 	 v e r s i o n :   " 1 . 1 0 . 3 " , 
 	 w i d g e t E v e n t P r e f i x :   " d r o p " , 
 	 o p t i o n s :   { 
 	 	 a c c e p t :   " * " , 
 	 	 a c t i v e C l a s s :   f a l s e , 
 	 	 a d d C l a s s e s :   t r u e , 
 	 	 g r e e d y :   f a l s e , 
 	 	 h o v e r C l a s s :   f a l s e , 
 	 	 s c o p e :   " d e f a u l t " , 
 	 	 t o l e r a n c e :   " i n t e r s e c t " , 
 
 	 	 / /   c a l l b a c k s 
 	 	 a c t i v a t e :   n u l l , 
 	 	 d e a c t i v a t e :   n u l l , 
 	 	 d r o p :   n u l l , 
 	 	 o u t :   n u l l , 
 	 	 o v e r :   n u l l 
 	 } , 
 	 _ c r e a t e :   f u n c t i o n ( )   { 
 
 	 	 v a r   o   =   t h i s . o p t i o n s , 
 	 	 	 a c c e p t   =   o . a c c e p t ; 
 
 	 	 t h i s . i s o v e r   =   f a l s e ; 
 	 	 t h i s . i s o u t   =   t r u e ; 
 
 	 	 t h i s . a c c e p t   =   $ . i s F u n c t i o n ( a c c e p t )   ?   a c c e p t   :   f u n c t i o n ( d )   { 
 	 	 	 r e t u r n   d . i s ( a c c e p t ) ; 
 	 	 } ; 
 
 	 	 / / S t o r e   t h e   d r o p p a b l e ' s   p r o p o r t i o n s 
 	 	 t h i s . p r o p o r t i o n s   =   {   w i d t h :   t h i s . e l e m e n t [ 0 ] . o f f s e t W i d t h ,   h e i g h t :   t h i s . e l e m e n t [ 0 ] . o f f s e t H e i g h t   } ; 
 
 	 	 / /   A d d   t h e   r e f e r e n c e   a n d   p o s i t i o n s   t o   t h e   m a n a g e r 
 	 	 $ . u i . d d m a n a g e r . d r o p p a b l e s [ o . s c o p e ]   =   $ . u i . d d m a n a g e r . d r o p p a b l e s [ o . s c o p e ]   | |   [ ] ; 
 	 	 $ . u i . d d m a n a g e r . d r o p p a b l e s [ o . s c o p e ] . p u s h ( t h i s ) ; 
 
 	 	 ( o . a d d C l a s s e s   & &   t h i s . e l e m e n t . a d d C l a s s ( " u i - d r o p p a b l e " ) ) ; 
 
 	 } , 
 
 	 _ d e s t r o y :   f u n c t i o n ( )   { 
 	 	 v a r   i   =   0 , 
 	 	 	 d r o p   =   $ . u i . d d m a n a g e r . d r o p p a b l e s [ t h i s . o p t i o n s . s c o p e ] ; 
 
 	 	 f o r   (   ;   i   <   d r o p . l e n g t h ;   i + +   )   { 
 	 	 	 i f   (   d r o p [ i ]   = = =   t h i s   )   { 
 	 	 	 	 d r o p . s p l i c e ( i ,   1 ) ; 
 	 	 	 } 
 	 	 } 
 
 	 	 t h i s . e l e m e n t . r e m o v e C l a s s ( " u i - d r o p p a b l e   u i - d r o p p a b l e - d i s a b l e d " ) ; 
 	 } , 
 
 	 _ s e t O p t i o n :   f u n c t i o n ( k e y ,   v a l u e )   { 
 
 	 	 i f ( k e y   = = =   " a c c e p t " )   { 
 	 	 	 t h i s . a c c e p t   =   $ . i s F u n c t i o n ( v a l u e )   ?   v a l u e   :   f u n c t i o n ( d )   { 
 	 	 	 	 r e t u r n   d . i s ( v a l u e ) ; 
 	 	 	 } ; 
 	 	 } 
 	 	 $ . W i d g e t . p r o t o t y p e . _ s e t O p t i o n . a p p l y ( t h i s ,   a r g u m e n t s ) ; 
 	 } , 
 
 	 _ a c t i v a t e :   f u n c t i o n ( e v e n t )   { 
 	 	 v a r   d r a g g a b l e   =   $ . u i . d d m a n a g e r . c u r r e n t ; 
 	 	 i f ( t h i s . o p t i o n s . a c t i v e C l a s s )   { 
 	 	 	 t h i s . e l e m e n t . a d d C l a s s ( t h i s . o p t i o n s . a c t i v e C l a s s ) ; 
 	 	 } 
 	 	 i f ( d r a g g a b l e ) { 
 	 	 	 t h i s . _ t r i g g e r ( " a c t i v a t e " ,   e v e n t ,   t h i s . u i ( d r a g g a b l e ) ) ; 
 	 	 } 
 	 } , 
 
 	 _ d e a c t i v a t e :   f u n c t i o n ( e v e n t )   { 
 	 	 v a r   d r a g g a b l e   =   $ . u i . d d m a n a g e r . c u r r e n t ; 
 	 	 i f ( t h i s . o p t i o n s . a c t i v e C l a s s )   { 
 	 	 	 t h i s . e l e m e n t . r e m o v e C l a s s ( t h i s . o p t i o n s . a c t i v e C l a s s ) ; 
 	 	 } 
 	 	 i f ( d r a g g a b l e ) { 
 	 	 	 t h i s . _ t r i g g e r ( " d e a c t i v a t e " ,   e v e n t ,   t h i s . u i ( d r a g g a b l e ) ) ; 
 	 	 } 
 	 } , 
 
 	 _ o v e r :   f u n c t i o n ( e v e n t )   { 
 
 	 	 v a r   d r a g g a b l e   =   $ . u i . d d m a n a g e r . c u r r e n t ; 
 
 	 	 / /   B a i l   i f   d r a g g a b l e   a n d   d r o p p a b l e   a r e   s a m e   e l e m e n t 
 	 	 i f   ( ! d r a g g a b l e   | |   ( d r a g g a b l e . c u r r e n t I t e m   | |   d r a g g a b l e . e l e m e n t ) [ 0 ]   = = =   t h i s . e l e m e n t [ 0 ] )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 i f   ( t h i s . a c c e p t . c a l l ( t h i s . e l e m e n t [ 0 ] , ( d r a g g a b l e . c u r r e n t I t e m   | |   d r a g g a b l e . e l e m e n t ) ) )   { 
 	 	 	 i f ( t h i s . o p t i o n s . h o v e r C l a s s )   { 
 	 	 	 	 t h i s . e l e m e n t . a d d C l a s s ( t h i s . o p t i o n s . h o v e r C l a s s ) ; 
 	 	 	 } 
 	 	 	 t h i s . _ t r i g g e r ( " o v e r " ,   e v e n t ,   t h i s . u i ( d r a g g a b l e ) ) ; 
 	 	 } 
 
 	 } , 
 
 	 _ o u t :   f u n c t i o n ( e v e n t )   { 
 
 	 	 v a r   d r a g g a b l e   =   $ . u i . d d m a n a g e r . c u r r e n t ; 
 
 	 	 / /   B a i l   i f   d r a g g a b l e   a n d   d r o p p a b l e   a r e   s a m e   e l e m e n t 
 	 	 i f   ( ! d r a g g a b l e   | |   ( d r a g g a b l e . c u r r e n t I t e m   | |   d r a g g a b l e . e l e m e n t ) [ 0 ]   = = =   t h i s . e l e m e n t [ 0 ] )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 i f   ( t h i s . a c c e p t . c a l l ( t h i s . e l e m e n t [ 0 ] , ( d r a g g a b l e . c u r r e n t I t e m   | |   d r a g g a b l e . e l e m e n t ) ) )   { 
 	 	 	 i f ( t h i s . o p t i o n s . h o v e r C l a s s )   { 
 	 	 	 	 t h i s . e l e m e n t . r e m o v e C l a s s ( t h i s . o p t i o n s . h o v e r C l a s s ) ; 
 	 	 	 } 
 	 	 	 t h i s . _ t r i g g e r ( " o u t " ,   e v e n t ,   t h i s . u i ( d r a g g a b l e ) ) ; 
 	 	 } 
 
 	 } , 
 
 	 _ d r o p :   f u n c t i o n ( e v e n t , c u s t o m )   { 
 
 	 	 v a r   d r a g g a b l e   =   c u s t o m   | |   $ . u i . d d m a n a g e r . c u r r e n t , 
 	 	 	 c h i l d r e n I n t e r s e c t i o n   =   f a l s e ; 
 
 	 	 / /   B a i l   i f   d r a g g a b l e   a n d   d r o p p a b l e   a r e   s a m e   e l e m e n t 
 	 	 i f   ( ! d r a g g a b l e   | |   ( d r a g g a b l e . c u r r e n t I t e m   | |   d r a g g a b l e . e l e m e n t ) [ 0 ]   = = =   t h i s . e l e m e n t [ 0 ] )   { 
 	 	 	 r e t u r n   f a l s e ; 
 	 	 } 
 
 	 	 t h i s . e l e m e n t . f i n d ( " : d a t a ( u i - d r o p p a b l e ) " ) . n o t ( " . u i - d r a g g a b l e - d r a g g i n g " ) . e a c h ( f u n c t i o n ( )   { 
 	 	 	 v a r   i n s t   =   $ . d a t a ( t h i s ,   " u i - d r o p p a b l e " ) ; 
 	 	 	 i f ( 
 	 	 	 	 i n s t . o p t i o n s . g r e e d y   & & 
 	 	 	 	 ! i n s t . o p t i o n s . d i s a b l e d   & & 
 	 	 	 	 i n s t . o p t i o n s . s c o p e   = = =   d r a g g a b l e . o p t i o n s . s c o p e   & & 
 	 	 	 	 i n s t . a c c e p t . c a l l ( i n s t . e l e m e n t [ 0 ] ,   ( d r a g g a b l e . c u r r e n t I t e m   | |   d r a g g a b l e . e l e m e n t ) )   & & 
 	 	 	 	 $ . u i . i n t e r s e c t ( d r a g g a b l e ,   $ . e x t e n d ( i n s t ,   {   o f f s e t :   i n s t . e l e m e n t . o f f s e t ( )   } ) ,   i n s t . o p t i o n s . t o l e r a n c e ) 
 	 	 	 )   {   c h i l d r e n I n t e r s e c t i o n   =   t r u e ;   r e t u r n   f a l s e ;   } 
 	 	 } ) ; 
 	 	 i f ( c h i l d r e n I n t e r s e c t i o n )   { 
 	 	 	 r e t u r n   f a l s e ; 
 	 	 } 
 
 	 	 i f ( t h i s . a c c e p t . c a l l ( t h i s . e l e m e n t [ 0 ] , ( d r a g g a b l e . c u r r e n t I t e m   | |   d r a g g a b l e . e l e m e n t ) ) )   { 
 	 	 	 i f ( t h i s . o p t i o n s . a c t i v e C l a s s )   { 
 	 	 	 	 t h i s . e l e m e n t . r e m o v e C l a s s ( t h i s . o p t i o n s . a c t i v e C l a s s ) ; 
 	 	 	 } 
 	 	 	 i f ( t h i s . o p t i o n s . h o v e r C l a s s )   { 
 	 	 	 	 t h i s . e l e m e n t . r e m o v e C l a s s ( t h i s . o p t i o n s . h o v e r C l a s s ) ; 
 	 	 	 } 
 	 	 	 t h i s . _ t r i g g e r ( " d r o p " ,   e v e n t ,   t h i s . u i ( d r a g g a b l e ) ) ; 
 	 	 	 r e t u r n   t h i s . e l e m e n t ; 
 	 	 } 
 
 	 	 r e t u r n   f a l s e ; 
 
 	 } , 
 
 	 u i :   f u n c t i o n ( c )   { 
 	 	 r e t u r n   { 
 	 	 	 d r a g g a b l e :   ( c . c u r r e n t I t e m   | |   c . e l e m e n t ) , 
 	 	 	 h e l p e r :   c . h e l p e r , 
 	 	 	 p o s i t i o n :   c . p o s i t i o n , 
 	 	 	 o f f s e t :   c . p o s i t i o n A b s 
 	 	 } ; 
 	 } 
 
 } ) ; 
 
 $ . u i . i n t e r s e c t   =   f u n c t i o n ( d r a g g a b l e ,   d r o p p a b l e ,   t o l e r a n c e M o d e )   { 
 
 	 i f   ( ! d r o p p a b l e . o f f s e t )   { 
 	 	 r e t u r n   f a l s e ; 
 	 } 
 
 	 v a r   d r a g g a b l e L e f t ,   d r a g g a b l e T o p , 
 	 	 x 1   =   ( d r a g g a b l e . p o s i t i o n A b s   | |   d r a g g a b l e . p o s i t i o n . a b s o l u t e ) . l e f t ,   x 2   =   x 1   +   d r a g g a b l e . h e l p e r P r o p o r t i o n s . w i d t h , 
 	 	 y 1   =   ( d r a g g a b l e . p o s i t i o n A b s   | |   d r a g g a b l e . p o s i t i o n . a b s o l u t e ) . t o p ,   y 2   =   y 1   +   d r a g g a b l e . h e l p e r P r o p o r t i o n s . h e i g h t , 
 	 	 l   =   d r o p p a b l e . o f f s e t . l e f t ,   r   =   l   +   d r o p p a b l e . p r o p o r t i o n s . w i d t h , 
 	 	 t   =   d r o p p a b l e . o f f s e t . t o p ,   b   =   t   +   d r o p p a b l e . p r o p o r t i o n s . h e i g h t ; 
 
 	 s w i t c h   ( t o l e r a n c e M o d e )   { 
 	 	 c a s e   " f i t " : 
 	 	 	 r e t u r n   ( l   < =   x 1   & &   x 2   < =   r   & &   t   < =   y 1   & &   y 2   < =   b ) ; 
 	 	 c a s e   " i n t e r s e c t " : 
 	 	 	 r e t u r n   ( l   <   x 1   +   ( d r a g g a b l e . h e l p e r P r o p o r t i o n s . w i d t h   /   2 )   & &   / /   R i g h t   H a l f 
 	 	 	 	 x 2   -   ( d r a g g a b l e . h e l p e r P r o p o r t i o n s . w i d t h   /   2 )   <   r   & &   / /   L e f t   H a l f 
 	 	 	 	 t   <   y 1   +   ( d r a g g a b l e . h e l p e r P r o p o r t i o n s . h e i g h t   /   2 )   & &   / /   B o t t o m   H a l f 
 	 	 	 	 y 2   -   ( d r a g g a b l e . h e l p e r P r o p o r t i o n s . h e i g h t   /   2 )   <   b   ) ;   / /   T o p   H a l f 
 	 	 c a s e   " p o i n t e r " : 
 	 	 	 d r a g g a b l e L e f t   =   ( ( d r a g g a b l e . p o s i t i o n A b s   | |   d r a g g a b l e . p o s i t i o n . a b s o l u t e ) . l e f t   +   ( d r a g g a b l e . c l i c k O f f s e t   | |   d r a g g a b l e . o f f s e t . c l i c k ) . l e f t ) ; 
 	 	 	 d r a g g a b l e T o p   =   ( ( d r a g g a b l e . p o s i t i o n A b s   | |   d r a g g a b l e . p o s i t i o n . a b s o l u t e ) . t o p   +   ( d r a g g a b l e . c l i c k O f f s e t   | |   d r a g g a b l e . o f f s e t . c l i c k ) . t o p ) ; 
 	 	 	 r e t u r n   i s O v e r A x i s (   d r a g g a b l e T o p ,   t ,   d r o p p a b l e . p r o p o r t i o n s . h e i g h t   )   & &   i s O v e r A x i s (   d r a g g a b l e L e f t ,   l ,   d r o p p a b l e . p r o p o r t i o n s . w i d t h   ) ; 
 	 	 c a s e   " t o u c h " : 
 	 	 	 r e t u r n   ( 
 	 	 	 	 ( y 1   > =   t   & &   y 1   < =   b )   | | 	 / /   T o p   e d g e   t o u c h i n g 
 	 	 	 	 ( y 2   > =   t   & &   y 2   < =   b )   | | 	 / /   B o t t o m   e d g e   t o u c h i n g 
 	 	 	 	 ( y 1   <   t   & &   y 2   >   b ) 	 	 / /   S u r r o u n d e d   v e r t i c a l l y 
 	 	 	 )   & &   ( 
 	 	 	 	 ( x 1   > =   l   & &   x 1   < =   r )   | | 	 / /   L e f t   e d g e   t o u c h i n g 
 	 	 	 	 ( x 2   > =   l   & &   x 2   < =   r )   | | 	 / /   R i g h t   e d g e   t o u c h i n g 
 	 	 	 	 ( x 1   <   l   & &   x 2   >   r ) 	 	 / /   S u r r o u n d e d   h o r i z o n t a l l y 
 	 	 	 ) ; 
 	 	 d e f a u l t : 
 	 	 	 r e t u r n   f a l s e ; 
 	 	 } 
 
 } ; 
 
 / * 
 	 T h i s   m a n a g e r   t r a c k s   o f f s e t s   o f   d r a g g a b l e s   a n d   d r o p p a b l e s 
 * / 
 $ . u i . d d m a n a g e r   =   { 
 	 c u r r e n t :   n u l l , 
 	 d r o p p a b l e s :   {   " d e f a u l t " :   [ ]   } , 
 	 p r e p a r e O f f s e t s :   f u n c t i o n ( t ,   e v e n t )   { 
 
 	 	 v a r   i ,   j , 
 	 	 	 m   =   $ . u i . d d m a n a g e r . d r o p p a b l e s [ t . o p t i o n s . s c o p e ]   | |   [ ] , 
 	 	 	 t y p e   =   e v e n t   ?   e v e n t . t y p e   :   n u l l ,   / /   w o r k a r o u n d   f o r   # 2 3 1 7 
 	 	 	 l i s t   =   ( t . c u r r e n t I t e m   | |   t . e l e m e n t ) . f i n d ( " : d a t a ( u i - d r o p p a b l e ) " ) . a d d B a c k ( ) ; 
 
 	 	 d r o p p a b l e s L o o p :   f o r   ( i   =   0 ;   i   <   m . l e n g t h ;   i + + )   { 
 
 	 	 	 / / N o   d i s a b l e d   a n d   n o n - a c c e p t e d 
 	 	 	 i f ( m [ i ] . o p t i o n s . d i s a b l e d   | |   ( t   & &   ! m [ i ] . a c c e p t . c a l l ( m [ i ] . e l e m e n t [ 0 ] , ( t . c u r r e n t I t e m   | |   t . e l e m e n t ) ) ) )   { 
 	 	 	 	 c o n t i n u e ; 
 	 	 	 } 
 
 	 	 	 / /   F i l t e r   o u t   e l e m e n t s   i n   t h e   c u r r e n t   d r a g g e d   i t e m 
 	 	 	 f o r   ( j = 0 ;   j   <   l i s t . l e n g t h ;   j + + )   { 
 	 	 	 	 i f ( l i s t [ j ]   = = =   m [ i ] . e l e m e n t [ 0 ] )   { 
 	 	 	 	 	 m [ i ] . p r o p o r t i o n s . h e i g h t   =   0 ; 
 	 	 	 	 	 c o n t i n u e   d r o p p a b l e s L o o p ; 
 	 	 	 	 } 
 	 	 	 } 
 
 	 	 	 m [ i ] . v i s i b l e   =   m [ i ] . e l e m e n t . c s s ( " d i s p l a y " )   ! = =   " n o n e " ; 
 	 	 	 i f ( ! m [ i ] . v i s i b l e )   { 
 	 	 	 	 c o n t i n u e ; 
 	 	 	 } 
 
 	 	 	 / / A c t i v a t e   t h e   d r o p p a b l e   i f   u s e d   d i r e c t l y   f r o m   d r a g g a b l e s 
 	 	 	 i f ( t y p e   = = =   " m o u s e d o w n " )   { 
 	 	 	 	 m [ i ] . _ a c t i v a t e . c a l l ( m [ i ] ,   e v e n t ) ; 
 	 	 	 } 
 
 	 	 	 m [ i ] . o f f s e t   =   m [ i ] . e l e m e n t . o f f s e t ( ) ; 
 	 	 	 m [ i ] . p r o p o r t i o n s   =   {   w i d t h :   m [ i ] . e l e m e n t [ 0 ] . o f f s e t W i d t h ,   h e i g h t :   m [ i ] . e l e m e n t [ 0 ] . o f f s e t H e i g h t   } ; 
 
 	 	 } 
 
 	 } , 
 	 d r o p :   f u n c t i o n ( d r a g g a b l e ,   e v e n t )   { 
 
 	 	 v a r   d r o p p e d   =   f a l s e ; 
 	 	 / /   C r e a t e   a   c o p y   o f   t h e   d r o p p a b l e s   i n   c a s e   t h e   l i s t   c h a n g e s   d u r i n g   t h e   d r o p   ( # 9 1 1 6 ) 
 	 	 $ . e a c h ( ( $ . u i . d d m a n a g e r . d r o p p a b l e s [ d r a g g a b l e . o p t i o n s . s c o p e ]   | |   [ ] ) . s l i c e ( ) ,   f u n c t i o n ( )   { 
 
 	 	 	 i f ( ! t h i s . o p t i o n s )   { 
 	 	 	 	 r e t u r n ; 
 	 	 	 } 
 	 	 	 i f   ( ! t h i s . o p t i o n s . d i s a b l e d   & &   t h i s . v i s i b l e   & &   $ . u i . i n t e r s e c t ( d r a g g a b l e ,   t h i s ,   t h i s . o p t i o n s . t o l e r a n c e ) )   { 
 	 	 	 	 d r o p p e d   =   t h i s . _ d r o p . c a l l ( t h i s ,   e v e n t )   | |   d r o p p e d ; 
 	 	 	 } 
 
 	 	 	 i f   ( ! t h i s . o p t i o n s . d i s a b l e d   & &   t h i s . v i s i b l e   & &   t h i s . a c c e p t . c a l l ( t h i s . e l e m e n t [ 0 ] , ( d r a g g a b l e . c u r r e n t I t e m   | |   d r a g g a b l e . e l e m e n t ) ) )   { 
 	 	 	 	 t h i s . i s o u t   =   t r u e ; 
 	 	 	 	 t h i s . i s o v e r   =   f a l s e ; 
 	 	 	 	 t h i s . _ d e a c t i v a t e . c a l l ( t h i s ,   e v e n t ) ; 
 	 	 	 } 
 
 	 	 } ) ; 
 	 	 r e t u r n   d r o p p e d ; 
 
 	 } , 
 	 d r a g S t a r t :   f u n c t i o n (   d r a g g a b l e ,   e v e n t   )   { 
 	 	 / / L i s t e n   f o r   s c r o l l i n g   s o   t h a t   i f   t h e   d r a g g i n g   c a u s e s   s c r o l l i n g   t h e   p o s i t i o n   o f   t h e   d r o p p a b l e s   c a n   b e   r e c a l c u l a t e d   ( s e e   # 5 0 0 3 ) 
 	 	 d r a g g a b l e . e l e m e n t . p a r e n t s U n t i l (   " b o d y "   ) . b i n d (   " s c r o l l . d r o p p a b l e " ,   f u n c t i o n ( )   { 
 	 	 	 i f (   ! d r a g g a b l e . o p t i o n s . r e f r e s h P o s i t i o n s   )   { 
 	 	 	 	 $ . u i . d d m a n a g e r . p r e p a r e O f f s e t s (   d r a g g a b l e ,   e v e n t   ) ; 
 	 	 	 } 
 	 	 } ) ; 
 	 } , 
 	 d r a g :   f u n c t i o n ( d r a g g a b l e ,   e v e n t )   { 
 
 	 	 / / I f   y o u   h a v e   a   h i g h l y   d y n a m i c   p a g e ,   y o u   m i g h t   t r y   t h i s   o p t i o n .   I t   r e n d e r s   p o s i t i o n s   e v e r y   t i m e   y o u   m o v e   t h e   m o u s e . 
 	 	 i f ( d r a g g a b l e . o p t i o n s . r e f r e s h P o s i t i o n s )   { 
 	 	 	 $ . u i . d d m a n a g e r . p r e p a r e O f f s e t s ( d r a g g a b l e ,   e v e n t ) ; 
 	 	 } 
 
 	 	 / / R u n   t h r o u g h   a l l   d r o p p a b l e s   a n d   c h e c k   t h e i r   p o s i t i o n s   b a s e d   o n   s p e c i f i c   t o l e r a n c e   o p t i o n s 
 	 	 $ . e a c h ( $ . u i . d d m a n a g e r . d r o p p a b l e s [ d r a g g a b l e . o p t i o n s . s c o p e ]   | |   [ ] ,   f u n c t i o n ( )   { 
 
 	 	 	 i f ( t h i s . o p t i o n s . d i s a b l e d   | |   t h i s . g r e e d y C h i l d   | |   ! t h i s . v i s i b l e )   { 
 	 	 	 	 r e t u r n ; 
 	 	 	 } 
 
 	 	 	 v a r   p a r e n t I n s t a n c e ,   s c o p e ,   p a r e n t , 
 	 	 	 	 i n t e r s e c t s   =   $ . u i . i n t e r s e c t ( d r a g g a b l e ,   t h i s ,   t h i s . o p t i o n s . t o l e r a n c e ) , 
 	 	 	 	 c   =   ! i n t e r s e c t s   & &   t h i s . i s o v e r   ?   " i s o u t "   :   ( i n t e r s e c t s   & &   ! t h i s . i s o v e r   ?   " i s o v e r "   :   n u l l ) ; 
 	 	 	 i f ( ! c )   { 
 	 	 	 	 r e t u r n ; 
 	 	 	 } 
 
 	 	 	 i f   ( t h i s . o p t i o n s . g r e e d y )   { 
 	 	 	 	 / /   f i n d   d r o p p a b l e   p a r e n t s   w i t h   s a m e   s c o p e 
 	 	 	 	 s c o p e   =   t h i s . o p t i o n s . s c o p e ; 
 	 	 	 	 p a r e n t   =   t h i s . e l e m e n t . p a r e n t s ( " : d a t a ( u i - d r o p p a b l e ) " ) . f i l t e r ( f u n c t i o n   ( )   { 
 	 	 	 	 	 r e t u r n   $ . d a t a ( t h i s ,   " u i - d r o p p a b l e " ) . o p t i o n s . s c o p e   = = =   s c o p e ; 
 	 	 	 	 } ) ; 
 
 	 	 	 	 i f   ( p a r e n t . l e n g t h )   { 
 	 	 	 	 	 p a r e n t I n s t a n c e   =   $ . d a t a ( p a r e n t [ 0 ] ,   " u i - d r o p p a b l e " ) ; 
 	 	 	 	 	 p a r e n t I n s t a n c e . g r e e d y C h i l d   =   ( c   = = =   " i s o v e r " ) ; 
 	 	 	 	 } 
 	 	 	 } 
 
 	 	 	 / /   w e   j u s t   m o v e d   i n t o   a   g r e e d y   c h i l d 
 	 	 	 i f   ( p a r e n t I n s t a n c e   & &   c   = = =   " i s o v e r " )   { 
 	 	 	 	 p a r e n t I n s t a n c e . i s o v e r   =   f a l s e ; 
 	 	 	 	 p a r e n t I n s t a n c e . i s o u t   =   t r u e ; 
 	 	 	 	 p a r e n t I n s t a n c e . _ o u t . c a l l ( p a r e n t I n s t a n c e ,   e v e n t ) ; 
 	 	 	 } 
 
 	 	 	 t h i s [ c ]   =   t r u e ; 
 	 	 	 t h i s [ c   = = =   " i s o u t "   ?   " i s o v e r "   :   " i s o u t " ]   =   f a l s e ; 
 	 	 	 t h i s [ c   = = =   " i s o v e r "   ?   " _ o v e r "   :   " _ o u t " ] . c a l l ( t h i s ,   e v e n t ) ; 
 
 	 	 	 / /   w e   j u s t   m o v e d   o u t   o f   a   g r e e d y   c h i l d 
 	 	 	 i f   ( p a r e n t I n s t a n c e   & &   c   = = =   " i s o u t " )   { 
 	 	 	 	 p a r e n t I n s t a n c e . i s o u t   =   f a l s e ; 
 	 	 	 	 p a r e n t I n s t a n c e . i s o v e r   =   t r u e ; 
 	 	 	 	 p a r e n t I n s t a n c e . _ o v e r . c a l l ( p a r e n t I n s t a n c e ,   e v e n t ) ; 
 	 	 	 } 
 	 	 } ) ; 
 
 	 } , 
 	 d r a g S t o p :   f u n c t i o n (   d r a g g a b l e ,   e v e n t   )   { 
 	 	 d r a g g a b l e . e l e m e n t . p a r e n t s U n t i l (   " b o d y "   ) . u n b i n d (   " s c r o l l . d r o p p a b l e "   ) ; 
 	 	 / / C a l l   p r e p a r e O f f s e t s   o n e   f i n a l   t i m e   s i n c e   I E   d o e s   n o t   f i r e   r e t u r n   s c r o l l   e v e n t s   w h e n   o v e r f l o w   w a s   c a u s e d   b y   d r a g   ( s e e   # 5 0 0 3 ) 
 	 	 i f (   ! d r a g g a b l e . o p t i o n s . r e f r e s h P o s i t i o n s   )   { 
 	 	 	 $ . u i . d d m a n a g e r . p r e p a r e O f f s e t s (   d r a g g a b l e ,   e v e n t   ) ; 
 	 	 } 
 	 } 
 } ; 
 
 } ) ( j Q u e r y ) ; 
 
 ( f u n c t i o n (   $ ,   u n d e f i n e d   )   { 
 
 f u n c t i o n   n u m ( v )   { 
 	 r e t u r n   p a r s e I n t ( v ,   1 0 )   | |   0 ; 
 } 
 
 f u n c t i o n   i s N u m b e r ( v a l u e )   { 
 	 r e t u r n   ! i s N a N ( p a r s e I n t ( v a l u e ,   1 0 ) ) ; 
 } 
 
 $ . w i d g e t ( " u i . r e s i z a b l e " ,   $ . u i . m o u s e ,   { 
 	 v e r s i o n :   " 1 . 1 0 . 3 " , 
 	 w i d g e t E v e n t P r e f i x :   " r e s i z e " , 
 	 o p t i o n s :   { 
 	 	 a l s o R e s i z e :   f a l s e , 
 	 	 a n i m a t e :   f a l s e , 
 	 	 a n i m a t e D u r a t i o n :   " s l o w " , 
 	 	 a n i m a t e E a s i n g :   " s w i n g " , 
 	 	 a s p e c t R a t i o :   f a l s e , 
 	 	 a u t o H i d e :   f a l s e , 
 	 	 c o n t a i n m e n t :   f a l s e , 
 	 	 g h o s t :   f a l s e , 
 	 	 g r i d :   f a l s e , 
 	 	 h a n d l e s :   " e , s , s e " , 
 	 	 h e l p e r :   f a l s e , 
 	 	 m a x H e i g h t :   n u l l , 
 	 	 m a x W i d t h :   n u l l , 
 	 	 m i n H e i g h t :   1 0 , 
 	 	 m i n W i d t h :   1 0 , 
 	 	 / /   S e e   # 7 9 6 0 
 	 	 z I n d e x :   9 0 , 
 
 	 	 / /   c a l l b a c k s 
 	 	 r e s i z e :   n u l l , 
 	 	 s t a r t :   n u l l , 
 	 	 s t o p :   n u l l 
 	 } , 
 	 _ c r e a t e :   f u n c t i o n ( )   { 
 
 	 	 v a r   n ,   i ,   h a n d l e ,   a x i s ,   h n a m e , 
 	 	 	 t h a t   =   t h i s , 
 	 	 	 o   =   t h i s . o p t i o n s ; 
 	 	 t h i s . e l e m e n t . a d d C l a s s ( " u i - r e s i z a b l e " ) ; 
 
 	 	 $ . e x t e n d ( t h i s ,   { 
 	 	 	 _ a s p e c t R a t i o :   ! ! ( o . a s p e c t R a t i o ) , 
 	 	 	 a s p e c t R a t i o :   o . a s p e c t R a t i o , 
 	 	 	 o r i g i n a l E l e m e n t :   t h i s . e l e m e n t , 
 	 	 	 _ p r o p o r t i o n a l l y R e s i z e E l e m e n t s :   [ ] , 
 	 	 	 _ h e l p e r :   o . h e l p e r   | |   o . g h o s t   | |   o . a n i m a t e   ?   o . h e l p e r   | |   " u i - r e s i z a b l e - h e l p e r "   :   n u l l 
 	 	 } ) ; 
 
 	 	 / / W r a p   t h e   e l e m e n t   i f   i t   c a n n o t   h o l d   c h i l d   n o d e s 
 	 	 i f ( t h i s . e l e m e n t [ 0 ] . n o d e N a m e . m a t c h ( / c a n v a s | t e x t a r e a | i n p u t | s e l e c t | b u t t o n | i m g / i ) )   { 
 
 	 	 	 / / C r e a t e   a   w r a p p e r   e l e m e n t   a n d   s e t   t h e   w r a p p e r   t o   t h e   n e w   c u r r e n t   i n t e r n a l   e l e m e n t 
 	 	 	 t h i s . e l e m e n t . w r a p ( 
 	 	 	 	 $ ( " < d i v   c l a s s = ' u i - w r a p p e r '   s t y l e = ' o v e r f l o w :   h i d d e n ; ' > < / d i v > " ) . c s s ( { 
 	 	 	 	 	 p o s i t i o n :   t h i s . e l e m e n t . c s s ( " p o s i t i o n " ) , 
 	 	 	 	 	 w i d t h :   t h i s . e l e m e n t . o u t e r W i d t h ( ) , 
 	 	 	 	 	 h e i g h t :   t h i s . e l e m e n t . o u t e r H e i g h t ( ) , 
 	 	 	 	 	 t o p :   t h i s . e l e m e n t . c s s ( " t o p " ) , 
 	 	 	 	 	 l e f t :   t h i s . e l e m e n t . c s s ( " l e f t " ) 
 	 	 	 	 } ) 
 	 	 	 ) ; 
 
 	 	 	 / / O v e r w r i t e   t h e   o r i g i n a l   t h i s . e l e m e n t 
 	 	 	 t h i s . e l e m e n t   =   t h i s . e l e m e n t . p a r e n t ( ) . d a t a ( 
 	 	 	 	 " u i - r e s i z a b l e " ,   t h i s . e l e m e n t . d a t a ( " u i - r e s i z a b l e " ) 
 	 	 	 ) ; 
 
 	 	 	 t h i s . e l e m e n t I s W r a p p e r   =   t r u e ; 
 
 	 	 	 / / M o v e   m a r g i n s   t o   t h e   w r a p p e r 
 	 	 	 t h i s . e l e m e n t . c s s ( {   m a r g i n L e f t :   t h i s . o r i g i n a l E l e m e n t . c s s ( " m a r g i n L e f t " ) ,   m a r g i n T o p :   t h i s . o r i g i n a l E l e m e n t . c s s ( " m a r g i n T o p " ) ,   m a r g i n R i g h t :   t h i s . o r i g i n a l E l e m e n t . c s s ( " m a r g i n R i g h t " ) ,   m a r g i n B o t t o m :   t h i s . o r i g i n a l E l e m e n t . c s s ( " m a r g i n B o t t o m " )   } ) ; 
 	 	 	 t h i s . o r i g i n a l E l e m e n t . c s s ( {   m a r g i n L e f t :   0 ,   m a r g i n T o p :   0 ,   m a r g i n R i g h t :   0 ,   m a r g i n B o t t o m :   0 } ) ; 
 
 	 	 	 / / P r e v e n t   S a f a r i   t e x t a r e a   r e s i z e 
 	 	 	 t h i s . o r i g i n a l R e s i z e S t y l e   =   t h i s . o r i g i n a l E l e m e n t . c s s ( " r e s i z e " ) ; 
 	 	 	 t h i s . o r i g i n a l E l e m e n t . c s s ( " r e s i z e " ,   " n o n e " ) ; 
 
 	 	 	 / / P u s h   t h e   a c t u a l   e l e m e n t   t o   o u r   p r o p o r t i o n a l l y R e s i z e   i n t e r n a l   a r r a y 
 	 	 	 t h i s . _ p r o p o r t i o n a l l y R e s i z e E l e m e n t s . p u s h ( t h i s . o r i g i n a l E l e m e n t . c s s ( {   p o s i t i o n :   " s t a t i c " ,   z o o m :   1 ,   d i s p l a y :   " b l o c k "   } ) ) ; 
 
 	 	 	 / /   a v o i d   I E   j u m p   ( h a r d   s e t   t h e   m a r g i n ) 
 	 	 	 t h i s . o r i g i n a l E l e m e n t . c s s ( {   m a r g i n :   t h i s . o r i g i n a l E l e m e n t . c s s ( " m a r g i n " )   } ) ; 
 
 	 	 	 / /   f i x   h a n d l e r s   o f f s e t 
 	 	 	 t h i s . _ p r o p o r t i o n a l l y R e s i z e ( ) ; 
 
 	 	 } 
 
 	 	 t h i s . h a n d l e s   =   o . h a n d l e s   | |   ( ! $ ( " . u i - r e s i z a b l e - h a n d l e " ,   t h i s . e l e m e n t ) . l e n g t h   ?   " e , s , s e "   :   {   n :   " . u i - r e s i z a b l e - n " ,   e :   " . u i - r e s i z a b l e - e " ,   s :   " . u i - r e s i z a b l e - s " ,   w :   " . u i - r e s i z a b l e - w " ,   s e :   " . u i - r e s i z a b l e - s e " ,   s w :   " . u i - r e s i z a b l e - s w " ,   n e :   " . u i - r e s i z a b l e - n e " ,   n w :   " . u i - r e s i z a b l e - n w "   } ) ; 
 	 	 i f ( t h i s . h a n d l e s . c o n s t r u c t o r   = = =   S t r i n g )   { 
 
 	 	 	 i f   (   t h i s . h a n d l e s   = = =   " a l l " )   { 
 	 	 	 	 t h i s . h a n d l e s   =   " n , e , s , w , s e , s w , n e , n w " ; 
 	 	 	 } 
 
 	 	 	 n   =   t h i s . h a n d l e s . s p l i t ( " , " ) ; 
 	 	 	 t h i s . h a n d l e s   =   { } ; 
 
 	 	 	 f o r ( i   =   0 ;   i   <   n . l e n g t h ;   i + + )   { 
 
 	 	 	 	 h a n d l e   =   $ . t r i m ( n [ i ] ) ; 
 	 	 	 	 h n a m e   =   " u i - r e s i z a b l e - " + h a n d l e ; 
 	 	 	 	 a x i s   =   $ ( " < d i v   c l a s s = ' u i - r e s i z a b l e - h a n d l e   "   +   h n a m e   +   " ' > < / d i v > " ) ; 
 
 	 	 	 	 / /   A p p l y   z I n d e x   t o   a l l   h a n d l e s   -   s e e   # 7 9 6 0 
 	 	 	 	 a x i s . c s s ( {   z I n d e x :   o . z I n d e x   } ) ; 
 
 	 	 	 	 / / T O D O   :   W h a t ' s   g o i n g   o n   h e r e ? 
 	 	 	 	 i f   ( " s e "   = = =   h a n d l e )   { 
 	 	 	 	 	 a x i s . a d d C l a s s ( " u i - i c o n   u i - i c o n - g r i p s m a l l - d i a g o n a l - s e " ) ; 
 	 	 	 	 } 
 
 	 	 	 	 / / I n s e r t   i n t o   i n t e r n a l   h a n d l e s   o b j e c t   a n d   a p p e n d   t o   e l e m e n t 
 	 	 	 	 t h i s . h a n d l e s [ h a n d l e ]   =   " . u i - r e s i z a b l e - " + h a n d l e ; 
 	 	 	 	 t h i s . e l e m e n t . a p p e n d ( a x i s ) ; 
 	 	 	 } 
 
 	 	 } 
 
 	 	 t h i s . _ r e n d e r A x i s   =   f u n c t i o n ( t a r g e t )   { 
 
 	 	 	 v a r   i ,   a x i s ,   p a d P o s ,   p a d W r a p p e r ; 
 
 	 	 	 t a r g e t   =   t a r g e t   | |   t h i s . e l e m e n t ; 
 
 	 	 	 f o r ( i   i n   t h i s . h a n d l e s )   { 
 
 	 	 	 	 i f ( t h i s . h a n d l e s [ i ] . c o n s t r u c t o r   = = =   S t r i n g )   { 
 	 	 	 	 	 t h i s . h a n d l e s [ i ]   =   $ ( t h i s . h a n d l e s [ i ] ,   t h i s . e l e m e n t ) . s h o w ( ) ; 
 	 	 	 	 } 
 
 	 	 	 	 / / A p p l y   p a d   t o   w r a p p e r   e l e m e n t ,   n e e d e d   t o   f i x   a x i s   p o s i t i o n   ( t e x t a r e a ,   i n p u t s ,   s c r o l l s ) 
 	 	 	 	 i f   ( t h i s . e l e m e n t I s W r a p p e r   & &   t h i s . o r i g i n a l E l e m e n t [ 0 ] . n o d e N a m e . m a t c h ( / t e x t a r e a | i n p u t | s e l e c t | b u t t o n / i ) )   { 
 
 	 	 	 	 	 a x i s   =   $ ( t h i s . h a n d l e s [ i ] ,   t h i s . e l e m e n t ) ; 
 
 	 	 	 	 	 / / C h e c k i n g   t h e   c o r r e c t   p a d   a n d   b o r d e r 
 	 	 	 	 	 p a d W r a p p e r   =   / s w | n e | n w | s e | n | s / . t e s t ( i )   ?   a x i s . o u t e r H e i g h t ( )   :   a x i s . o u t e r W i d t h ( ) ; 
 
 	 	 	 	 	 / / T h e   p a d d i n g   t y p e   i   h a v e   t o   a p p l y . . . 
 	 	 	 	 	 p a d P o s   =   [   " p a d d i n g " , 
 	 	 	 	 	 	 / n e | n w | n / . t e s t ( i )   ?   " T o p "   : 
 	 	 	 	 	 	 / s e | s w | s / . t e s t ( i )   ?   " B o t t o m "   : 
 	 	 	 	 	 	 / ^ e $ / . t e s t ( i )   ?   " R i g h t "   :   " L e f t "   ] . j o i n ( " " ) ; 
 
 	 	 	 	 	 t a r g e t . c s s ( p a d P o s ,   p a d W r a p p e r ) ; 
 
 	 	 	 	 	 t h i s . _ p r o p o r t i o n a l l y R e s i z e ( ) ; 
 
 	 	 	 	 } 
 
 	 	 	 	 / / T O D O :   W h a t ' s   t h a t   g o o d   f o r ?   T h e r e ' s   n o t   a n y t h i n g   t o   b e   e x e c u t e d   l e f t 
 	 	 	 	 i f ( ! $ ( t h i s . h a n d l e s [ i ] ) . l e n g t h )   { 
 	 	 	 	 	 c o n t i n u e ; 
 	 	 	 	 } 
 	 	 	 } 
 	 	 } ; 
 
 	 	 / / T O D O :   m a k e   r e n d e r A x i s   a   p r o t o t y p e   f u n c t i o n 
 	 	 t h i s . _ r e n d e r A x i s ( t h i s . e l e m e n t ) ; 
 
 	 	 t h i s . _ h a n d l e s   =   $ ( " . u i - r e s i z a b l e - h a n d l e " ,   t h i s . e l e m e n t ) 
 	 	 	 . d i s a b l e S e l e c t i o n ( ) ; 
 
 	 	 / / M a t c h i n g   a x i s   n a m e 
 	 	 t h i s . _ h a n d l e s . m o u s e o v e r ( f u n c t i o n ( )   { 
 	 	 	 i f   ( ! t h a t . r e s i z i n g )   { 
 	 	 	 	 i f   ( t h i s . c l a s s N a m e )   { 
 	 	 	 	 	 a x i s   =   t h i s . c l a s s N a m e . m a t c h ( / u i - r e s i z a b l e - ( s e | s w | n e | n w | n | e | s | w ) / i ) ; 
 	 	 	 	 } 
 	 	 	 	 / / A x i s ,   d e f a u l t   =   s e 
 	 	 	 	 t h a t . a x i s   =   a x i s   & &   a x i s [ 1 ]   ?   a x i s [ 1 ]   :   " s e " ; 
 	 	 	 } 
 	 	 } ) ; 
 
 	 	 / / I f   w e   w a n t   t o   a u t o   h i d e   t h e   e l e m e n t s 
 	 	 i f   ( o . a u t o H i d e )   { 
 	 	 	 t h i s . _ h a n d l e s . h i d e ( ) ; 
 	 	 	 $ ( t h i s . e l e m e n t ) 
 	 	 	 	 . a d d C l a s s ( " u i - r e s i z a b l e - a u t o h i d e " ) 
 	 	 	 	 . m o u s e e n t e r ( f u n c t i o n ( )   { 
 	 	 	 	 	 i f   ( o . d i s a b l e d )   { 
 	 	 	 	 	 	 r e t u r n ; 
 	 	 	 	 	 } 
 	 	 	 	 	 $ ( t h i s ) . r e m o v e C l a s s ( " u i - r e s i z a b l e - a u t o h i d e " ) ; 
 	 	 	 	 	 t h a t . _ h a n d l e s . s h o w ( ) ; 
 	 	 	 	 } ) 
 	 	 	 	 . m o u s e l e a v e ( f u n c t i o n ( ) { 
 	 	 	 	 	 i f   ( o . d i s a b l e d )   { 
 	 	 	 	 	 	 r e t u r n ; 
 	 	 	 	 	 } 
 	 	 	 	 	 i f   ( ! t h a t . r e s i z i n g )   { 
 	 	 	 	 	 	 $ ( t h i s ) . a d d C l a s s ( " u i - r e s i z a b l e - a u t o h i d e " ) ; 
 	 	 	 	 	 	 t h a t . _ h a n d l e s . h i d e ( ) ; 
 	 	 	 	 	 } 
 	 	 	 	 } ) ; 
 	 	 } 
 
 	 	 / / I n i t i a l i z e   t h e   m o u s e   i n t e r a c t i o n 
 	 	 t h i s . _ m o u s e I n i t ( ) ; 
 
 	 } , 
 
 	 _ d e s t r o y :   f u n c t i o n ( )   { 
 
 	 	 t h i s . _ m o u s e D e s t r o y ( ) ; 
 
 	 	 v a r   w r a p p e r , 
 	 	 	 _ d e s t r o y   =   f u n c t i o n ( e x p )   { 
 	 	 	 	 $ ( e x p ) . r e m o v e C l a s s ( " u i - r e s i z a b l e   u i - r e s i z a b l e - d i s a b l e d   u i - r e s i z a b l e - r e s i z i n g " ) 
 	 	 	 	 	 . r e m o v e D a t a ( " r e s i z a b l e " ) . r e m o v e D a t a ( " u i - r e s i z a b l e " ) . u n b i n d ( " . r e s i z a b l e " ) . f i n d ( " . u i - r e s i z a b l e - h a n d l e " ) . r e m o v e ( ) ; 
 	 	 	 } ; 
 
 	 	 / / T O D O :   U n w r a p   a t   s a m e   D O M   p o s i t i o n 
 	 	 i f   ( t h i s . e l e m e n t I s W r a p p e r )   { 
 	 	 	 _ d e s t r o y ( t h i s . e l e m e n t ) ; 
 	 	 	 w r a p p e r   =   t h i s . e l e m e n t ; 
 	 	 	 t h i s . o r i g i n a l E l e m e n t . c s s ( { 
 	 	 	 	 p o s i t i o n :   w r a p p e r . c s s ( " p o s i t i o n " ) , 
 	 	 	 	 w i d t h :   w r a p p e r . o u t e r W i d t h ( ) , 
 	 	 	 	 h e i g h t :   w r a p p e r . o u t e r H e i g h t ( ) , 
 	 	 	 	 t o p :   w r a p p e r . c s s ( " t o p " ) , 
 	 	 	 	 l e f t :   w r a p p e r . c s s ( " l e f t " ) 
 	 	 	 } ) . i n s e r t A f t e r (   w r a p p e r   ) ; 
 	 	 	 w r a p p e r . r e m o v e ( ) ; 
 	 	 } 
 
 	 	 t h i s . o r i g i n a l E l e m e n t . c s s ( " r e s i z e " ,   t h i s . o r i g i n a l R e s i z e S t y l e ) ; 
 	 	 _ d e s t r o y ( t h i s . o r i g i n a l E l e m e n t ) ; 
 
 	 	 r e t u r n   t h i s ; 
 	 } , 
 
 	 _ m o u s e C a p t u r e :   f u n c t i o n ( e v e n t )   { 
 	 	 v a r   i ,   h a n d l e , 
 	 	 	 c a p t u r e   =   f a l s e ; 
 
 	 	 f o r   ( i   i n   t h i s . h a n d l e s )   { 
 	 	 	 h a n d l e   =   $ ( t h i s . h a n d l e s [ i ] ) [ 0 ] ; 
 	 	 	 i f   ( h a n d l e   = = =   e v e n t . t a r g e t   | |   $ . c o n t a i n s ( h a n d l e ,   e v e n t . t a r g e t ) )   { 
 	 	 	 	 c a p t u r e   =   t r u e ; 
 	 	 	 } 
 	 	 } 
 
 	 	 r e t u r n   ! t h i s . o p t i o n s . d i s a b l e d   & &   c a p t u r e ; 
 	 } , 
 
 	 _ m o u s e S t a r t :   f u n c t i o n ( e v e n t )   { 
 
 	 	 v a r   c u r l e f t ,   c u r t o p ,   c u r s o r , 
 	 	 	 o   =   t h i s . o p t i o n s , 
 	 	 	 i n i P o s   =   t h i s . e l e m e n t . p o s i t i o n ( ) , 
 	 	 	 e l   =   t h i s . e l e m e n t ; 
 
 	 	 t h i s . r e s i z i n g   =   t r u e ; 
 
 	 	 / /   b u g f i x   f o r   h t t p : / / d e v . j q u e r y . c o m / t i c k e t / 1 7 4 9 
 	 	 i f   (   ( / a b s o l u t e / ) . t e s t (   e l . c s s ( " p o s i t i o n " )   )   )   { 
 	 	 	 e l . c s s ( {   p o s i t i o n :   " a b s o l u t e " ,   t o p :   e l . c s s ( " t o p " ) ,   l e f t :   e l . c s s ( " l e f t " )   } ) ; 
 	 	 }   e l s e   i f   ( e l . i s ( " . u i - d r a g g a b l e " ) )   { 
 	 	 	 e l . c s s ( {   p o s i t i o n :   " a b s o l u t e " ,   t o p :   i n i P o s . t o p ,   l e f t :   i n i P o s . l e f t   } ) ; 
 	 	 } 
 
 	 	 t h i s . _ r e n d e r P r o x y ( ) ; 
 
 	 	 c u r l e f t   =   n u m ( t h i s . h e l p e r . c s s ( " l e f t " ) ) ; 
 	 	 c u r t o p   =   n u m ( t h i s . h e l p e r . c s s ( " t o p " ) ) ; 
 
 	 	 i f   ( o . c o n t a i n m e n t )   { 
 	 	 	 c u r l e f t   + =   $ ( o . c o n t a i n m e n t ) . s c r o l l L e f t ( )   | |   0 ; 
 	 	 	 c u r t o p   + =   $ ( o . c o n t a i n m e n t ) . s c r o l l T o p ( )   | |   0 ; 
 	 	 } 
 
 	 	 / / S t o r e   n e e d e d   v a r i a b l e s 
 	 	 t h i s . o f f s e t   =   t h i s . h e l p e r . o f f s e t ( ) ; 
 	 	 t h i s . p o s i t i o n   =   {   l e f t :   c u r l e f t ,   t o p :   c u r t o p   } ; 
 	 	 t h i s . s i z e   =   t h i s . _ h e l p e r   ?   {   w i d t h :   e l . o u t e r W i d t h ( ) ,   h e i g h t :   e l . o u t e r H e i g h t ( )   }   :   {   w i d t h :   e l . w i d t h ( ) ,   h e i g h t :   e l . h e i g h t ( )   } ; 
 	 	 t h i s . o r i g i n a l S i z e   =   t h i s . _ h e l p e r   ?   {   w i d t h :   e l . o u t e r W i d t h ( ) ,   h e i g h t :   e l . o u t e r H e i g h t ( )   }   :   {   w i d t h :   e l . w i d t h ( ) ,   h e i g h t :   e l . h e i g h t ( )   } ; 
 	 	 t h i s . o r i g i n a l P o s i t i o n   =   {   l e f t :   c u r l e f t ,   t o p :   c u r t o p   } ; 
 	 	 t h i s . s i z e D i f f   =   {   w i d t h :   e l . o u t e r W i d t h ( )   -   e l . w i d t h ( ) ,   h e i g h t :   e l . o u t e r H e i g h t ( )   -   e l . h e i g h t ( )   } ; 
 	 	 t h i s . o r i g i n a l M o u s e P o s i t i o n   =   {   l e f t :   e v e n t . p a g e X ,   t o p :   e v e n t . p a g e Y   } ; 
 
 	 	 / / A s p e c t   R a t i o 
 	 	 t h i s . a s p e c t R a t i o   =   ( t y p e o f   o . a s p e c t R a t i o   = = =   " n u m b e r " )   ?   o . a s p e c t R a t i o   :   ( ( t h i s . o r i g i n a l S i z e . w i d t h   /   t h i s . o r i g i n a l S i z e . h e i g h t )   | |   1 ) ; 
 
 	 	 c u r s o r   =   $ ( " . u i - r e s i z a b l e - "   +   t h i s . a x i s ) . c s s ( " c u r s o r " ) ; 
 	 	 $ ( " b o d y " ) . c s s ( " c u r s o r " ,   c u r s o r   = = =   " a u t o "   ?   t h i s . a x i s   +   " - r e s i z e "   :   c u r s o r ) ; 
 
 	 	 e l . a d d C l a s s ( " u i - r e s i z a b l e - r e s i z i n g " ) ; 
 	 	 t h i s . _ p r o p a g a t e ( " s t a r t " ,   e v e n t ) ; 
 	 	 r e t u r n   t r u e ; 
 	 } , 
 
 	 _ m o u s e D r a g :   f u n c t i o n ( e v e n t )   { 
 
 	 	 / / I n c r e a s e   p e r f o r m a n c e ,   a v o i d   r e g e x 
 	 	 v a r   d a t a , 
 	 	 	 e l   =   t h i s . h e l p e r ,   p r o p s   =   { } , 
 	 	 	 s m p   =   t h i s . o r i g i n a l M o u s e P o s i t i o n , 
 	 	 	 a   =   t h i s . a x i s , 
 	 	 	 p r e v T o p   =   t h i s . p o s i t i o n . t o p , 
 	 	 	 p r e v L e f t   =   t h i s . p o s i t i o n . l e f t , 
 	 	 	 p r e v W i d t h   =   t h i s . s i z e . w i d t h , 
 	 	 	 p r e v H e i g h t   =   t h i s . s i z e . h e i g h t , 
 	 	 	 d x   =   ( e v e n t . p a g e X - s m p . l e f t ) | | 0 , 
 	 	 	 d y   =   ( e v e n t . p a g e Y - s m p . t o p ) | | 0 , 
 	 	 	 t r i g g e r   =   t h i s . _ c h a n g e [ a ] ; 
 
 	 	 i f   ( ! t r i g g e r )   { 
 	 	 	 r e t u r n   f a l s e ; 
 	 	 } 
 
 	 	 / /   C a l c u l a t e   t h e   a t t r s   t h a t   w i l l   b e   c h a n g e 
 	 	 d a t a   =   t r i g g e r . a p p l y ( t h i s ,   [ e v e n t ,   d x ,   d y ] ) ; 
 
 	 	 / /   P u t   t h i s   i n   t h e   m o u s e D r a g   h a n d l e r   s i n c e   t h e   u s e r   c a n   s t a r t   p r e s s i n g   s h i f t   w h i l e   r e s i z i n g 
 	 	 t h i s . _ u p d a t e V i r t u a l B o u n d a r i e s ( e v e n t . s h i f t K e y ) ; 
 	 	 i f   ( t h i s . _ a s p e c t R a t i o   | |   e v e n t . s h i f t K e y )   { 
 	 	 	 d a t a   =   t h i s . _ u p d a t e R a t i o ( d a t a ,   e v e n t ) ; 
 	 	 } 
 
 	 	 d a t a   =   t h i s . _ r e s p e c t S i z e ( d a t a ,   e v e n t ) ; 
 
 	 	 t h i s . _ u p d a t e C a c h e ( d a t a ) ; 
 
 	 	 / /   p l u g i n s   c a l l b a c k s   n e e d   t o   b e   c a l l e d   f i r s t 
 	 	 t h i s . _ p r o p a g a t e ( " r e s i z e " ,   e v e n t ) ; 
 
 	 	 i f   ( t h i s . p o s i t i o n . t o p   ! = =   p r e v T o p )   { 
 	 	 	 p r o p s . t o p   =   t h i s . p o s i t i o n . t o p   +   " p x " ; 
 	 	 } 
 	 	 i f   ( t h i s . p o s i t i o n . l e f t   ! = =   p r e v L e f t )   { 
 	 	 	 p r o p s . l e f t   =   t h i s . p o s i t i o n . l e f t   +   " p x " ; 
 	 	 } 
 	 	 i f   ( t h i s . s i z e . w i d t h   ! = =   p r e v W i d t h )   { 
 	 	 	 p r o p s . w i d t h   =   t h i s . s i z e . w i d t h   +   " p x " ; 
 	 	 } 
 	 	 i f   ( t h i s . s i z e . h e i g h t   ! = =   p r e v H e i g h t )   { 
 	 	 	 p r o p s . h e i g h t   =   t h i s . s i z e . h e i g h t   +   " p x " ; 
 	 	 } 
 	 	 e l . c s s ( p r o p s ) ; 
 
 	 	 i f   ( ! t h i s . _ h e l p e r   & &   t h i s . _ p r o p o r t i o n a l l y R e s i z e E l e m e n t s . l e n g t h )   { 
 	 	 	 t h i s . _ p r o p o r t i o n a l l y R e s i z e ( ) ; 
 	 	 } 
 
 	 	 / /   C a l l   t h e   u s e r   c a l l b a c k   i f   t h e   e l e m e n t   w a s   r e s i z e d 
 	 	 i f   (   !   $ . i s E m p t y O b j e c t ( p r o p s )   )   { 
 	 	 	 t h i s . _ t r i g g e r ( " r e s i z e " ,   e v e n t ,   t h i s . u i ( ) ) ; 
 	 	 } 
 
 	 	 r e t u r n   f a l s e ; 
 	 } , 
 
 	 _ m o u s e S t o p :   f u n c t i o n ( e v e n t )   { 
 
 	 	 t h i s . r e s i z i n g   =   f a l s e ; 
 	 	 v a r   p r ,   i s t a ,   s o f f s e t h ,   s o f f s e t w ,   s ,   l e f t ,   t o p , 
 	 	 	 o   =   t h i s . o p t i o n s ,   t h a t   =   t h i s ; 
 
 	 	 i f ( t h i s . _ h e l p e r )   { 
 
 	 	 	 p r   =   t h i s . _ p r o p o r t i o n a l l y R e s i z e E l e m e n t s ; 
 	 	 	 i s t a   =   p r . l e n g t h   & &   ( / t e x t a r e a / i ) . t e s t ( p r [ 0 ] . n o d e N a m e ) ; 
 	 	 	 s o f f s e t h   =   i s t a   & &   $ . u i . h a s S c r o l l ( p r [ 0 ] ,   " l e f t " )   / *   T O D O   -   j u m p   h e i g h t   * /   ?   0   :   t h a t . s i z e D i f f . h e i g h t ; 
 	 	 	 s o f f s e t w   =   i s t a   ?   0   :   t h a t . s i z e D i f f . w i d t h ; 
 
 	 	 	 s   =   {   w i d t h :   ( t h a t . h e l p e r . w i d t h ( )     -   s o f f s e t w ) ,   h e i g h t :   ( t h a t . h e l p e r . h e i g h t ( )   -   s o f f s e t h )   } ; 
 	 	 	 l e f t   =   ( p a r s e I n t ( t h a t . e l e m e n t . c s s ( " l e f t " ) ,   1 0 )   +   ( t h a t . p o s i t i o n . l e f t   -   t h a t . o r i g i n a l P o s i t i o n . l e f t ) )   | |   n u l l ; 
 	 	 	 t o p   =   ( p a r s e I n t ( t h a t . e l e m e n t . c s s ( " t o p " ) ,   1 0 )   +   ( t h a t . p o s i t i o n . t o p   -   t h a t . o r i g i n a l P o s i t i o n . t o p ) )   | |   n u l l ; 
 
 	 	 	 i f   ( ! o . a n i m a t e )   { 
 	 	 	 	 t h i s . e l e m e n t . c s s ( $ . e x t e n d ( s ,   {   t o p :   t o p ,   l e f t :   l e f t   } ) ) ; 
 	 	 	 } 
 
 	 	 	 t h a t . h e l p e r . h e i g h t ( t h a t . s i z e . h e i g h t ) ; 
 	 	 	 t h a t . h e l p e r . w i d t h ( t h a t . s i z e . w i d t h ) ; 
 
 	 	 	 i f   ( t h i s . _ h e l p e r   & &   ! o . a n i m a t e )   { 
 	 	 	 	 t h i s . _ p r o p o r t i o n a l l y R e s i z e ( ) ; 
 	 	 	 } 
 	 	 } 
 
 	 	 $ ( " b o d y " ) . c s s ( " c u r s o r " ,   " a u t o " ) ; 
 
 	 	 t h i s . e l e m e n t . r e m o v e C l a s s ( " u i - r e s i z a b l e - r e s i z i n g " ) ; 
 
 	 	 t h i s . _ p r o p a g a t e ( " s t o p " ,   e v e n t ) ; 
 
 	 	 i f   ( t h i s . _ h e l p e r )   { 
 	 	 	 t h i s . h e l p e r . r e m o v e ( ) ; 
 	 	 } 
 
 	 	 r e t u r n   f a l s e ; 
 
 	 } , 
 
 	 _ u p d a t e V i r t u a l B o u n d a r i e s :   f u n c t i o n ( f o r c e A s p e c t R a t i o )   { 
 	 	 v a r   p M i n W i d t h ,   p M a x W i d t h ,   p M i n H e i g h t ,   p M a x H e i g h t ,   b , 
 	 	 	 o   =   t h i s . o p t i o n s ; 
 
 	 	 b   =   { 
 	 	 	 m i n W i d t h :   i s N u m b e r ( o . m i n W i d t h )   ?   o . m i n W i d t h   :   0 , 
 	 	 	 m a x W i d t h :   i s N u m b e r ( o . m a x W i d t h )   ?   o . m a x W i d t h   :   I n f i n i t y , 
 	 	 	 m i n H e i g h t :   i s N u m b e r ( o . m i n H e i g h t )   ?   o . m i n H e i g h t   :   0 , 
 	 	 	 m a x H e i g h t :   i s N u m b e r ( o . m a x H e i g h t )   ?   o . m a x H e i g h t   :   I n f i n i t y 
 	 	 } ; 
 
 	 	 i f ( t h i s . _ a s p e c t R a t i o   | |   f o r c e A s p e c t R a t i o )   { 
 	 	 	 / /   W e   w a n t   t o   c r e a t e   a n   e n c l o s i n g   b o x   w h o s e   a s p e c t   r a t i o n   i s   t h e   r e q u e s t e d   o n e 
 	 	 	 / /   F i r s t ,   c o m p u t e   t h e   " p r o j e c t e d "   s i z e   f o r   e a c h   d i m e n s i o n   b a s e d   o n   t h e   a s p e c t   r a t i o   a n d   o t h e r   d i m e n s i o n 
 	 	 	 p M i n W i d t h   =   b . m i n H e i g h t   *   t h i s . a s p e c t R a t i o ; 
 	 	 	 p M i n H e i g h t   =   b . m i n W i d t h   /   t h i s . a s p e c t R a t i o ; 
 	 	 	 p M a x W i d t h   =   b . m a x H e i g h t   *   t h i s . a s p e c t R a t i o ; 
 	 	 	 p M a x H e i g h t   =   b . m a x W i d t h   /   t h i s . a s p e c t R a t i o ; 
 
 	 	 	 i f ( p M i n W i d t h   >   b . m i n W i d t h )   { 
 	 	 	 	 b . m i n W i d t h   =   p M i n W i d t h ; 
 	 	 	 } 
 	 	 	 i f ( p M i n H e i g h t   >   b . m i n H e i g h t )   { 
 	 	 	 	 b . m i n H e i g h t   =   p M i n H e i g h t ; 
 	 	 	 } 
 	 	 	 i f ( p M a x W i d t h   <   b . m a x W i d t h )   { 
 	 	 	 	 b . m a x W i d t h   =   p M a x W i d t h ; 
 	 	 	 } 
 	 	 	 i f ( p M a x H e i g h t   <   b . m a x H e i g h t )   { 
 	 	 	 	 b . m a x H e i g h t   =   p M a x H e i g h t ; 
 	 	 	 } 
 	 	 } 
 	 	 t h i s . _ v B o u n d a r i e s   =   b ; 
 	 } , 
 
 	 _ u p d a t e C a c h e :   f u n c t i o n ( d a t a )   { 
 	 	 t h i s . o f f s e t   =   t h i s . h e l p e r . o f f s e t ( ) ; 
 	 	 i f   ( i s N u m b e r ( d a t a . l e f t ) )   { 
 	 	 	 t h i s . p o s i t i o n . l e f t   =   d a t a . l e f t ; 
 	 	 } 
 	 	 i f   ( i s N u m b e r ( d a t a . t o p ) )   { 
 	 	 	 t h i s . p o s i t i o n . t o p   =   d a t a . t o p ; 
 	 	 } 
 	 	 i f   ( i s N u m b e r ( d a t a . h e i g h t ) )   { 
 	 	 	 t h i s . s i z e . h e i g h t   =   d a t a . h e i g h t ; 
 	 	 } 
 	 	 i f   ( i s N u m b e r ( d a t a . w i d t h ) )   { 
 	 	 	 t h i s . s i z e . w i d t h   =   d a t a . w i d t h ; 
 	 	 } 
 	 } , 
 
 	 _ u p d a t e R a t i o :   f u n c t i o n (   d a t a   )   { 
 
 	 	 v a r   c p o s   =   t h i s . p o s i t i o n , 
 	 	 	 c s i z e   =   t h i s . s i z e , 
 	 	 	 a   =   t h i s . a x i s ; 
 
 	 	 i f   ( i s N u m b e r ( d a t a . h e i g h t ) )   { 
 	 	 	 d a t a . w i d t h   =   ( d a t a . h e i g h t   *   t h i s . a s p e c t R a t i o ) ; 
 	 	 }   e l s e   i f   ( i s N u m b e r ( d a t a . w i d t h ) )   { 
 	 	 	 d a t a . h e i g h t   =   ( d a t a . w i d t h   /   t h i s . a s p e c t R a t i o ) ; 
 	 	 } 
 
 	 	 i f   ( a   = = =   " s w " )   { 
 	 	 	 d a t a . l e f t   =   c p o s . l e f t   +   ( c s i z e . w i d t h   -   d a t a . w i d t h ) ; 
 	 	 	 d a t a . t o p   =   n u l l ; 
 	 	 } 
 	 	 i f   ( a   = = =   " n w " )   { 
 	 	 	 d a t a . t o p   =   c p o s . t o p   +   ( c s i z e . h e i g h t   -   d a t a . h e i g h t ) ; 
 	 	 	 d a t a . l e f t   =   c p o s . l e f t   +   ( c s i z e . w i d t h   -   d a t a . w i d t h ) ; 
 	 	 } 
 
 	 	 r e t u r n   d a t a ; 
 	 } , 
 
 	 _ r e s p e c t S i z e :   f u n c t i o n (   d a t a   )   { 
 
 	 	 v a r   o   =   t h i s . _ v B o u n d a r i e s , 
 	 	 	 a   =   t h i s . a x i s , 
 	 	 	 i s m a x w   =   i s N u m b e r ( d a t a . w i d t h )   & &   o . m a x W i d t h   & &   ( o . m a x W i d t h   <   d a t a . w i d t h ) ,   i s m a x h   =   i s N u m b e r ( d a t a . h e i g h t )   & &   o . m a x H e i g h t   & &   ( o . m a x H e i g h t   <   d a t a . h e i g h t ) , 
 	 	 	 i s m i n w   =   i s N u m b e r ( d a t a . w i d t h )   & &   o . m i n W i d t h   & &   ( o . m i n W i d t h   >   d a t a . w i d t h ) ,   i s m i n h   =   i s N u m b e r ( d a t a . h e i g h t )   & &   o . m i n H e i g h t   & &   ( o . m i n H e i g h t   >   d a t a . h e i g h t ) , 
 	 	 	 d w   =   t h i s . o r i g i n a l P o s i t i o n . l e f t   +   t h i s . o r i g i n a l S i z e . w i d t h , 
 	 	 	 d h   =   t h i s . p o s i t i o n . t o p   +   t h i s . s i z e . h e i g h t , 
 	 	 	 c w   =   / s w | n w | w / . t e s t ( a ) ,   c h   =   / n w | n e | n / . t e s t ( a ) ; 
 	 	 i f   ( i s m i n w )   { 
 	 	 	 d a t a . w i d t h   =   o . m i n W i d t h ; 
 	 	 } 
 	 	 i f   ( i s m i n h )   { 
 	 	 	 d a t a . h e i g h t   =   o . m i n H e i g h t ; 
 	 	 } 
 	 	 i f   ( i s m a x w )   { 
 	 	 	 d a t a . w i d t h   =   o . m a x W i d t h ; 
 	 	 } 
 	 	 i f   ( i s m a x h )   { 
 	 	 	 d a t a . h e i g h t   =   o . m a x H e i g h t ; 
 	 	 } 
 
 	 	 i f   ( i s m i n w   & &   c w )   { 
 	 	 	 d a t a . l e f t   =   d w   -   o . m i n W i d t h ; 
 	 	 } 
 	 	 i f   ( i s m a x w   & &   c w )   { 
 	 	 	 d a t a . l e f t   =   d w   -   o . m a x W i d t h ; 
 	 	 } 
 	 	 i f   ( i s m i n h   & &   c h )   { 
 	 	 	 d a t a . t o p   =   d h   -   o . m i n H e i g h t ; 
 	 	 } 
 	 	 i f   ( i s m a x h   & &   c h )   { 
 	 	 	 d a t a . t o p   =   d h   -   o . m a x H e i g h t ; 
 	 	 } 
 
 	 	 / /   f i x i n g   j u m p   e r r o r   o n   t o p / l e f t   -   b u g   # 2 3 3 0 
 	 	 i f   ( ! d a t a . w i d t h   & &   ! d a t a . h e i g h t   & &   ! d a t a . l e f t   & &   d a t a . t o p )   { 
 	 	 	 d a t a . t o p   =   n u l l ; 
 	 	 }   e l s e   i f   ( ! d a t a . w i d t h   & &   ! d a t a . h e i g h t   & &   ! d a t a . t o p   & &   d a t a . l e f t )   { 
 	 	 	 d a t a . l e f t   =   n u l l ; 
 	 	 } 
 
 	 	 r e t u r n   d a t a ; 
 	 } , 
 
 	 _ p r o p o r t i o n a l l y R e s i z e :   f u n c t i o n ( )   { 
 
 	 	 i f   ( ! t h i s . _ p r o p o r t i o n a l l y R e s i z e E l e m e n t s . l e n g t h )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 v a r   i ,   j ,   b o r d e r s ,   p a d d i n g s ,   p r e l , 
 	 	 	 e l e m e n t   =   t h i s . h e l p e r   | |   t h i s . e l e m e n t ; 
 
 	 	 f o r   (   i = 0 ;   i   <   t h i s . _ p r o p o r t i o n a l l y R e s i z e E l e m e n t s . l e n g t h ;   i + + )   { 
 
 	 	 	 p r e l   =   t h i s . _ p r o p o r t i o n a l l y R e s i z e E l e m e n t s [ i ] ; 
 
 	 	 	 i f   ( ! t h i s . b o r d e r D i f )   { 
 	 	 	 	 t h i s . b o r d e r D i f   =   [ ] ; 
 	 	 	 	 b o r d e r s   =   [ p r e l . c s s ( " b o r d e r T o p W i d t h " ) ,   p r e l . c s s ( " b o r d e r R i g h t W i d t h " ) ,   p r e l . c s s ( " b o r d e r B o t t o m W i d t h " ) ,   p r e l . c s s ( " b o r d e r L e f t W i d t h " ) ] ; 
 	 	 	 	 p a d d i n g s   =   [ p r e l . c s s ( " p a d d i n g T o p " ) ,   p r e l . c s s ( " p a d d i n g R i g h t " ) ,   p r e l . c s s ( " p a d d i n g B o t t o m " ) ,   p r e l . c s s ( " p a d d i n g L e f t " ) ] ; 
 
 	 	 	 	 f o r   (   j   =   0 ;   j   <   b o r d e r s . l e n g t h ;   j + +   )   { 
 	 	 	 	 	 t h i s . b o r d e r D i f [   j   ]   =   (   p a r s e I n t (   b o r d e r s [   j   ] ,   1 0   )   | |   0   )   +   (   p a r s e I n t (   p a d d i n g s [   j   ] ,   1 0   )   | |   0   ) ; 
 	 	 	 	 } 
 	 	 	 } 
 
 	 	 	 p r e l . c s s ( { 
 	 	 	 	 h e i g h t :   ( e l e m e n t . h e i g h t ( )   -   t h i s . b o r d e r D i f [ 0 ]   -   t h i s . b o r d e r D i f [ 2 ] )   | |   0 , 
 	 	 	 	 w i d t h :   ( e l e m e n t . w i d t h ( )   -   t h i s . b o r d e r D i f [ 1 ]   -   t h i s . b o r d e r D i f [ 3 ] )   | |   0 
 	 	 	 } ) ; 
 
 	 	 } 
 
 	 } , 
 
 	 _ r e n d e r P r o x y :   f u n c t i o n ( )   { 
 
 	 	 v a r   e l   =   t h i s . e l e m e n t ,   o   =   t h i s . o p t i o n s ; 
 	 	 t h i s . e l e m e n t O f f s e t   =   e l . o f f s e t ( ) ; 
 
 	 	 i f ( t h i s . _ h e l p e r )   { 
 
 	 	 	 t h i s . h e l p e r   =   t h i s . h e l p e r   | |   $ ( " < d i v   s t y l e = ' o v e r f l o w : h i d d e n ; ' > < / d i v > " ) ; 
 
 	 	 	 t h i s . h e l p e r . a d d C l a s s ( t h i s . _ h e l p e r ) . c s s ( { 
 	 	 	 	 w i d t h :   t h i s . e l e m e n t . o u t e r W i d t h ( )   -   1 , 
 	 	 	 	 h e i g h t :   t h i s . e l e m e n t . o u t e r H e i g h t ( )   -   1 , 
 	 	 	 	 p o s i t i o n :   " a b s o l u t e " , 
 	 	 	 	 l e f t :   t h i s . e l e m e n t O f f s e t . l e f t   + " p x " , 
 	 	 	 	 t o p :   t h i s . e l e m e n t O f f s e t . t o p   + " p x " , 
 	 	 	 	 z I n d e x :   + + o . z I n d e x   / / T O D O :   D o n ' t   m o d i f y   o p t i o n 
 	 	 	 } ) ; 
 
 	 	 	 t h i s . h e l p e r 
 	 	 	 	 . a p p e n d T o ( " b o d y " ) 
 	 	 	 	 . d i s a b l e S e l e c t i o n ( ) ; 
 
 	 	 }   e l s e   { 
 	 	 	 t h i s . h e l p e r   =   t h i s . e l e m e n t ; 
 	 	 } 
 
 	 } , 
 
 	 _ c h a n g e :   { 
 	 	 e :   f u n c t i o n ( e v e n t ,   d x )   { 
 	 	 	 r e t u r n   {   w i d t h :   t h i s . o r i g i n a l S i z e . w i d t h   +   d x   } ; 
 	 	 } , 
 	 	 w :   f u n c t i o n ( e v e n t ,   d x )   { 
 	 	 	 v a r   c s   =   t h i s . o r i g i n a l S i z e ,   s p   =   t h i s . o r i g i n a l P o s i t i o n ; 
 	 	 	 r e t u r n   {   l e f t :   s p . l e f t   +   d x ,   w i d t h :   c s . w i d t h   -   d x   } ; 
 	 	 } , 
 	 	 n :   f u n c t i o n ( e v e n t ,   d x ,   d y )   { 
 	 	 	 v a r   c s   =   t h i s . o r i g i n a l S i z e ,   s p   =   t h i s . o r i g i n a l P o s i t i o n ; 
 	 	 	 r e t u r n   {   t o p :   s p . t o p   +   d y ,   h e i g h t :   c s . h e i g h t   -   d y   } ; 
 	 	 } , 
 	 	 s :   f u n c t i o n ( e v e n t ,   d x ,   d y )   { 
 	 	 	 r e t u r n   {   h e i g h t :   t h i s . o r i g i n a l S i z e . h e i g h t   +   d y   } ; 
 	 	 } , 
 	 	 s e :   f u n c t i o n ( e v e n t ,   d x ,   d y )   { 
 	 	 	 r e t u r n   $ . e x t e n d ( t h i s . _ c h a n g e . s . a p p l y ( t h i s ,   a r g u m e n t s ) ,   t h i s . _ c h a n g e . e . a p p l y ( t h i s ,   [ e v e n t ,   d x ,   d y ] ) ) ; 
 	 	 } , 
 	 	 s w :   f u n c t i o n ( e v e n t ,   d x ,   d y )   { 
 	 	 	 r e t u r n   $ . e x t e n d ( t h i s . _ c h a n g e . s . a p p l y ( t h i s ,   a r g u m e n t s ) ,   t h i s . _ c h a n g e . w . a p p l y ( t h i s ,   [ e v e n t ,   d x ,   d y ] ) ) ; 
 	 	 } , 
 	 	 n e :   f u n c t i o n ( e v e n t ,   d x ,   d y )   { 
 	 	 	 r e t u r n   $ . e x t e n d ( t h i s . _ c h a n g e . n . a p p l y ( t h i s ,   a r g u m e n t s ) ,   t h i s . _ c h a n g e . e . a p p l y ( t h i s ,   [ e v e n t ,   d x ,   d y ] ) ) ; 
 	 	 } , 
 	 	 n w :   f u n c t i o n ( e v e n t ,   d x ,   d y )   { 
 	 	 	 r e t u r n   $ . e x t e n d ( t h i s . _ c h a n g e . n . a p p l y ( t h i s ,   a r g u m e n t s ) ,   t h i s . _ c h a n g e . w . a p p l y ( t h i s ,   [ e v e n t ,   d x ,   d y ] ) ) ; 
 	 	 } 
 	 } , 
 
 	 _ p r o p a g a t e :   f u n c t i o n ( n ,   e v e n t )   { 
 	 	 $ . u i . p l u g i n . c a l l ( t h i s ,   n ,   [ e v e n t ,   t h i s . u i ( ) ] ) ; 
 	 	 ( n   ! = =   " r e s i z e "   & &   t h i s . _ t r i g g e r ( n ,   e v e n t ,   t h i s . u i ( ) ) ) ; 
 	 } , 
 
 	 p l u g i n s :   { } , 
 
 	 u i :   f u n c t i o n ( )   { 
 	 	 r e t u r n   { 
 	 	 	 o r i g i n a l E l e m e n t :   t h i s . o r i g i n a l E l e m e n t , 
 	 	 	 e l e m e n t :   t h i s . e l e m e n t , 
 	 	 	 h e l p e r :   t h i s . h e l p e r , 
 	 	 	 p o s i t i o n :   t h i s . p o s i t i o n , 
 	 	 	 s i z e :   t h i s . s i z e , 
 	 	 	 o r i g i n a l S i z e :   t h i s . o r i g i n a l S i z e , 
 	 	 	 o r i g i n a l P o s i t i o n :   t h i s . o r i g i n a l P o s i t i o n 
 	 	 } ; 
 	 } 
 
 } ) ; 
 
 / * 
   *   R e s i z a b l e   E x t e n s i o n s 
   * / 
 
 $ . u i . p l u g i n . a d d ( " r e s i z a b l e " ,   " a n i m a t e " ,   { 
 
 	 s t o p :   f u n c t i o n (   e v e n t   )   { 
 	 	 v a r   t h a t   =   $ ( t h i s ) . d a t a ( " u i - r e s i z a b l e " ) , 
 	 	 	 o   =   t h a t . o p t i o n s , 
 	 	 	 p r   =   t h a t . _ p r o p o r t i o n a l l y R e s i z e E l e m e n t s , 
 	 	 	 i s t a   =   p r . l e n g t h   & &   ( / t e x t a r e a / i ) . t e s t ( p r [ 0 ] . n o d e N a m e ) , 
 	 	 	 s o f f s e t h   =   i s t a   & &   $ . u i . h a s S c r o l l ( p r [ 0 ] ,   " l e f t " )   / *   T O D O   -   j u m p   h e i g h t   * /   ?   0   :   t h a t . s i z e D i f f . h e i g h t , 
 	 	 	 s o f f s e t w   =   i s t a   ?   0   :   t h a t . s i z e D i f f . w i d t h , 
 	 	 	 s t y l e   =   {   w i d t h :   ( t h a t . s i z e . w i d t h   -   s o f f s e t w ) ,   h e i g h t :   ( t h a t . s i z e . h e i g h t   -   s o f f s e t h )   } , 
 	 	 	 l e f t   =   ( p a r s e I n t ( t h a t . e l e m e n t . c s s ( " l e f t " ) ,   1 0 )   +   ( t h a t . p o s i t i o n . l e f t   -   t h a t . o r i g i n a l P o s i t i o n . l e f t ) )   | |   n u l l , 
 	 	 	 t o p   =   ( p a r s e I n t ( t h a t . e l e m e n t . c s s ( " t o p " ) ,   1 0 )   +   ( t h a t . p o s i t i o n . t o p   -   t h a t . o r i g i n a l P o s i t i o n . t o p ) )   | |   n u l l ; 
 
 	 	 t h a t . e l e m e n t . a n i m a t e ( 
 	 	 	 $ . e x t e n d ( s t y l e ,   t o p   & &   l e f t   ?   {   t o p :   t o p ,   l e f t :   l e f t   }   :   { } ) ,   { 
 	 	 	 	 d u r a t i o n :   o . a n i m a t e D u r a t i o n , 
 	 	 	 	 e a s i n g :   o . a n i m a t e E a s i n g , 
 	 	 	 	 s t e p :   f u n c t i o n ( )   { 
 
 	 	 	 	 	 v a r   d a t a   =   { 
 	 	 	 	 	 	 w i d t h :   p a r s e I n t ( t h a t . e l e m e n t . c s s ( " w i d t h " ) ,   1 0 ) , 
 	 	 	 	 	 	 h e i g h t :   p a r s e I n t ( t h a t . e l e m e n t . c s s ( " h e i g h t " ) ,   1 0 ) , 
 	 	 	 	 	 	 t o p :   p a r s e I n t ( t h a t . e l e m e n t . c s s ( " t o p " ) ,   1 0 ) , 
 	 	 	 	 	 	 l e f t :   p a r s e I n t ( t h a t . e l e m e n t . c s s ( " l e f t " ) ,   1 0 ) 
 	 	 	 	 	 } ; 
 
 	 	 	 	 	 i f   ( p r   & &   p r . l e n g t h )   { 
 	 	 	 	 	 	 $ ( p r [ 0 ] ) . c s s ( {   w i d t h :   d a t a . w i d t h ,   h e i g h t :   d a t a . h e i g h t   } ) ; 
 	 	 	 	 	 } 
 
 	 	 	 	 	 / /   p r o p a g a t i n g   r e s i z e ,   a n d   u p d a t i n g   v a l u e s   f o r   e a c h   a n i m a t i o n   s t e p 
 	 	 	 	 	 t h a t . _ u p d a t e C a c h e ( d a t a ) ; 
 	 	 	 	 	 t h a t . _ p r o p a g a t e ( " r e s i z e " ,   e v e n t ) ; 
 
 	 	 	 	 } 
 	 	 	 } 
 	 	 ) ; 
 	 } 
 
 } ) ; 
 
 $ . u i . p l u g i n . a d d ( " r e s i z a b l e " ,   " c o n t a i n m e n t " ,   { 
 
 	 s t a r t :   f u n c t i o n ( )   { 
 	 	 v a r   e l e m e n t ,   p ,   c o ,   c h ,   c w ,   w i d t h ,   h e i g h t , 
 	 	 	 t h a t   =   $ ( t h i s ) . d a t a ( " u i - r e s i z a b l e " ) , 
 	 	 	 o   =   t h a t . o p t i o n s , 
 	 	 	 e l   =   t h a t . e l e m e n t , 
 	 	 	 o c   =   o . c o n t a i n m e n t , 
 	 	 	 c e   =   ( o c   i n s t a n c e o f   $ )   ?   o c . g e t ( 0 )   :   ( / p a r e n t / . t e s t ( o c ) )   ?   e l . p a r e n t ( ) . g e t ( 0 )   :   o c ; 
 
 	 	 i f   ( ! c e )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 t h a t . c o n t a i n e r E l e m e n t   =   $ ( c e ) ; 
 
 	 	 i f   ( / d o c u m e n t / . t e s t ( o c )   | |   o c   = = =   d o c u m e n t )   { 
 	 	 	 t h a t . c o n t a i n e r O f f s e t   =   {   l e f t :   0 ,   t o p :   0   } ; 
 	 	 	 t h a t . c o n t a i n e r P o s i t i o n   =   {   l e f t :   0 ,   t o p :   0   } ; 
 
 	 	 	 t h a t . p a r e n t D a t a   =   { 
 	 	 	 	 e l e m e n t :   $ ( d o c u m e n t ) ,   l e f t :   0 ,   t o p :   0 , 
 	 	 	 	 w i d t h :   $ ( d o c u m e n t ) . w i d t h ( ) ,   h e i g h t :   $ ( d o c u m e n t ) . h e i g h t ( )   | |   d o c u m e n t . b o d y . p a r e n t N o d e . s c r o l l H e i g h t 
 	 	 	 } ; 
 	 	 } 
 
 	 	 / /   i ' m   a   n o d e ,   s o   c o m p u t e   t o p ,   l e f t ,   r i g h t ,   b o t t o m 
 	 	 e l s e   { 
 	 	 	 e l e m e n t   =   $ ( c e ) ; 
 	 	 	 p   =   [ ] ; 
 	 	 	 $ ( [   " T o p " ,   " R i g h t " ,   " L e f t " ,   " B o t t o m "   ] ) . e a c h ( f u n c t i o n ( i ,   n a m e )   {   p [ i ]   =   n u m ( e l e m e n t . c s s ( " p a d d i n g "   +   n a m e ) ) ;   } ) ; 
 
 	 	 	 t h a t . c o n t a i n e r O f f s e t   =   e l e m e n t . o f f s e t ( ) ; 
 	 	 	 t h a t . c o n t a i n e r P o s i t i o n   =   e l e m e n t . p o s i t i o n ( ) ; 
 	 	 	 t h a t . c o n t a i n e r S i z e   =   {   h e i g h t :   ( e l e m e n t . i n n e r H e i g h t ( )   -   p [ 3 ] ) ,   w i d t h :   ( e l e m e n t . i n n e r W i d t h ( )   -   p [ 1 ] )   } ; 
 
 	 	 	 c o   =   t h a t . c o n t a i n e r O f f s e t ; 
 	 	 	 c h   =   t h a t . c o n t a i n e r S i z e . h e i g h t ; 
 	 	 	 c w   =   t h a t . c o n t a i n e r S i z e . w i d t h ; 
 	 	 	 w i d t h   =   ( $ . u i . h a s S c r o l l ( c e ,   " l e f t " )   ?   c e . s c r o l l W i d t h   :   c w   ) ; 
 	 	 	 h e i g h t   =   ( $ . u i . h a s S c r o l l ( c e )   ?   c e . s c r o l l H e i g h t   :   c h ) ; 
 
 	 	 	 t h a t . p a r e n t D a t a   =   { 
 	 	 	 	 e l e m e n t :   c e ,   l e f t :   c o . l e f t ,   t o p :   c o . t o p ,   w i d t h :   w i d t h ,   h e i g h t :   h e i g h t 
 	 	 	 } ; 
 	 	 } 
 	 } , 
 
 	 r e s i z e :   f u n c t i o n (   e v e n t   )   { 
 	 	 v a r   w o s e t ,   h o s e t ,   i s P a r e n t ,   i s O f f s e t R e l a t i v e , 
 	 	 	 t h a t   =   $ ( t h i s ) . d a t a ( " u i - r e s i z a b l e " ) , 
 	 	 	 o   =   t h a t . o p t i o n s , 
 	 	 	 c o   =   t h a t . c o n t a i n e r O f f s e t ,   c p   =   t h a t . p o s i t i o n , 
 	 	 	 p R a t i o   =   t h a t . _ a s p e c t R a t i o   | |   e v e n t . s h i f t K e y , 
 	 	 	 c o p   =   {   t o p : 0 ,   l e f t : 0   } ,   c e   =   t h a t . c o n t a i n e r E l e m e n t ; 
 
 	 	 i f   ( c e [ 0 ]   ! = =   d o c u m e n t   & &   ( / s t a t i c / ) . t e s t ( c e . c s s ( " p o s i t i o n " ) ) )   { 
 	 	 	 c o p   =   c o ; 
 	 	 } 
 
 	 	 i f   ( c p . l e f t   <   ( t h a t . _ h e l p e r   ?   c o . l e f t   :   0 ) )   { 
 	 	 	 t h a t . s i z e . w i d t h   =   t h a t . s i z e . w i d t h   +   ( t h a t . _ h e l p e r   ?   ( t h a t . p o s i t i o n . l e f t   -   c o . l e f t )   :   ( t h a t . p o s i t i o n . l e f t   -   c o p . l e f t ) ) ; 
 	 	 	 i f   ( p R a t i o )   { 
 	 	 	 	 t h a t . s i z e . h e i g h t   =   t h a t . s i z e . w i d t h   /   t h a t . a s p e c t R a t i o ; 
 	 	 	 } 
 	 	 	 t h a t . p o s i t i o n . l e f t   =   o . h e l p e r   ?   c o . l e f t   :   0 ; 
 	 	 } 
 
 	 	 i f   ( c p . t o p   <   ( t h a t . _ h e l p e r   ?   c o . t o p   :   0 ) )   { 
 	 	 	 t h a t . s i z e . h e i g h t   =   t h a t . s i z e . h e i g h t   +   ( t h a t . _ h e l p e r   ?   ( t h a t . p o s i t i o n . t o p   -   c o . t o p )   :   t h a t . p o s i t i o n . t o p ) ; 
 	 	 	 i f   ( p R a t i o )   { 
 	 	 	 	 t h a t . s i z e . w i d t h   =   t h a t . s i z e . h e i g h t   *   t h a t . a s p e c t R a t i o ; 
 	 	 	 } 
 	 	 	 t h a t . p o s i t i o n . t o p   =   t h a t . _ h e l p e r   ?   c o . t o p   :   0 ; 
 	 	 } 
 
 	 	 t h a t . o f f s e t . l e f t   =   t h a t . p a r e n t D a t a . l e f t + t h a t . p o s i t i o n . l e f t ; 
 	 	 t h a t . o f f s e t . t o p   =   t h a t . p a r e n t D a t a . t o p + t h a t . p o s i t i o n . t o p ; 
 
 	 	 w o s e t   =   M a t h . a b s (   ( t h a t . _ h e l p e r   ?   t h a t . o f f s e t . l e f t   -   c o p . l e f t   :   ( t h a t . o f f s e t . l e f t   -   c o p . l e f t ) )   +   t h a t . s i z e D i f f . w i d t h   ) ; 
 	 	 h o s e t   =   M a t h . a b s (   ( t h a t . _ h e l p e r   ?   t h a t . o f f s e t . t o p   -   c o p . t o p   :   ( t h a t . o f f s e t . t o p   -   c o . t o p ) )   +   t h a t . s i z e D i f f . h e i g h t   ) ; 
 
 	 	 i s P a r e n t   =   t h a t . c o n t a i n e r E l e m e n t . g e t ( 0 )   = = =   t h a t . e l e m e n t . p a r e n t ( ) . g e t ( 0 ) ; 
 	 	 i s O f f s e t R e l a t i v e   =   / r e l a t i v e | a b s o l u t e / . t e s t ( t h a t . c o n t a i n e r E l e m e n t . c s s ( " p o s i t i o n " ) ) ; 
 
 	 	 i f ( i s P a r e n t   & &   i s O f f s e t R e l a t i v e )   { 
 	 	 	 w o s e t   - =   t h a t . p a r e n t D a t a . l e f t ; 
 	 	 } 
 
 	 	 i f   ( w o s e t   +   t h a t . s i z e . w i d t h   > =   t h a t . p a r e n t D a t a . w i d t h )   { 
 	 	 	 t h a t . s i z e . w i d t h   =   t h a t . p a r e n t D a t a . w i d t h   -   w o s e t ; 
 	 	 	 i f   ( p R a t i o )   { 
 	 	 	 	 t h a t . s i z e . h e i g h t   =   t h a t . s i z e . w i d t h   /   t h a t . a s p e c t R a t i o ; 
 	 	 	 } 
 	 	 } 
 
 	 	 i f   ( h o s e t   +   t h a t . s i z e . h e i g h t   > =   t h a t . p a r e n t D a t a . h e i g h t )   { 
 	 	 	 t h a t . s i z e . h e i g h t   =   t h a t . p a r e n t D a t a . h e i g h t   -   h o s e t ; 
 	 	 	 i f   ( p R a t i o )   { 
 	 	 	 	 t h a t . s i z e . w i d t h   =   t h a t . s i z e . h e i g h t   *   t h a t . a s p e c t R a t i o ; 
 	 	 	 } 
 	 	 } 
 	 } , 
 
 	 s t o p :   f u n c t i o n ( ) { 
 	 	 v a r   t h a t   =   $ ( t h i s ) . d a t a ( " u i - r e s i z a b l e " ) , 
 	 	 	 o   =   t h a t . o p t i o n s , 
 	 	 	 c o   =   t h a t . c o n t a i n e r O f f s e t , 
 	 	 	 c o p   =   t h a t . c o n t a i n e r P o s i t i o n , 
 	 	 	 c e   =   t h a t . c o n t a i n e r E l e m e n t , 
 	 	 	 h e l p e r   =   $ ( t h a t . h e l p e r ) , 
 	 	 	 h o   =   h e l p e r . o f f s e t ( ) , 
 	 	 	 w   =   h e l p e r . o u t e r W i d t h ( )   -   t h a t . s i z e D i f f . w i d t h , 
 	 	 	 h   =   h e l p e r . o u t e r H e i g h t ( )   -   t h a t . s i z e D i f f . h e i g h t ; 
 
 	 	 i f   ( t h a t . _ h e l p e r   & &   ! o . a n i m a t e   & &   ( / r e l a t i v e / ) . t e s t ( c e . c s s ( " p o s i t i o n " ) ) )   { 
 	 	 	 $ ( t h i s ) . c s s ( {   l e f t :   h o . l e f t   -   c o p . l e f t   -   c o . l e f t ,   w i d t h :   w ,   h e i g h t :   h   } ) ; 
 	 	 } 
 
 	 	 i f   ( t h a t . _ h e l p e r   & &   ! o . a n i m a t e   & &   ( / s t a t i c / ) . t e s t ( c e . c s s ( " p o s i t i o n " ) ) )   { 
 	 	 	 $ ( t h i s ) . c s s ( {   l e f t :   h o . l e f t   -   c o p . l e f t   -   c o . l e f t ,   w i d t h :   w ,   h e i g h t :   h   } ) ; 
 	 	 } 
 
 	 } 
 } ) ; 
 
 $ . u i . p l u g i n . a d d ( " r e s i z a b l e " ,   " a l s o R e s i z e " ,   { 
 
 	 s t a r t :   f u n c t i o n   ( )   { 
 	 	 v a r   t h a t   =   $ ( t h i s ) . d a t a ( " u i - r e s i z a b l e " ) , 
 	 	 	 o   =   t h a t . o p t i o n s , 
 	 	 	 _ s t o r e   =   f u n c t i o n   ( e x p )   { 
 	 	 	 	 $ ( e x p ) . e a c h ( f u n c t i o n ( )   { 
 	 	 	 	 	 v a r   e l   =   $ ( t h i s ) ; 
 	 	 	 	 	 e l . d a t a ( " u i - r e s i z a b l e - a l s o r e s i z e " ,   { 
 	 	 	 	 	 	 w i d t h :   p a r s e I n t ( e l . w i d t h ( ) ,   1 0 ) ,   h e i g h t :   p a r s e I n t ( e l . h e i g h t ( ) ,   1 0 ) , 
 	 	 	 	 	 	 l e f t :   p a r s e I n t ( e l . c s s ( " l e f t " ) ,   1 0 ) ,   t o p :   p a r s e I n t ( e l . c s s ( " t o p " ) ,   1 0 ) 
 	 	 	 	 	 } ) ; 
 	 	 	 	 } ) ; 
 	 	 	 } ; 
 
 	 	 i f   ( t y p e o f ( o . a l s o R e s i z e )   = = =   " o b j e c t "   & &   ! o . a l s o R e s i z e . p a r e n t N o d e )   { 
 	 	 	 i f   ( o . a l s o R e s i z e . l e n g t h )   {   o . a l s o R e s i z e   =   o . a l s o R e s i z e [ 0 ] ;   _ s t o r e ( o . a l s o R e s i z e ) ;   } 
 	 	 	 e l s e   {   $ . e a c h ( o . a l s o R e s i z e ,   f u n c t i o n   ( e x p )   {   _ s t o r e ( e x p ) ;   } ) ;   } 
 	 	 } e l s e { 
 	 	 	 _ s t o r e ( o . a l s o R e s i z e ) ; 
 	 	 } 
 	 } , 
 
 	 r e s i z e :   f u n c t i o n   ( e v e n t ,   u i )   { 
 	 	 v a r   t h a t   =   $ ( t h i s ) . d a t a ( " u i - r e s i z a b l e " ) , 
 	 	 	 o   =   t h a t . o p t i o n s , 
 	 	 	 o s   =   t h a t . o r i g i n a l S i z e , 
 	 	 	 o p   =   t h a t . o r i g i n a l P o s i t i o n , 
 	 	 	 d e l t a   =   { 
 	 	 	 	 h e i g h t :   ( t h a t . s i z e . h e i g h t   -   o s . h e i g h t )   | |   0 ,   w i d t h :   ( t h a t . s i z e . w i d t h   -   o s . w i d t h )   | |   0 , 
 	 	 	 	 t o p :   ( t h a t . p o s i t i o n . t o p   -   o p . t o p )   | |   0 ,   l e f t :   ( t h a t . p o s i t i o n . l e f t   -   o p . l e f t )   | |   0 
 	 	 	 } , 
 
 	 	 	 _ a l s o R e s i z e   =   f u n c t i o n   ( e x p ,   c )   { 
 	 	 	 	 $ ( e x p ) . e a c h ( f u n c t i o n ( )   { 
 	 	 	 	 	 v a r   e l   =   $ ( t h i s ) ,   s t a r t   =   $ ( t h i s ) . d a t a ( " u i - r e s i z a b l e - a l s o r e s i z e " ) ,   s t y l e   =   { } , 
 	 	 	 	 	 	 c s s   =   c   & &   c . l e n g t h   ?   c   :   e l . p a r e n t s ( u i . o r i g i n a l E l e m e n t [ 0 ] ) . l e n g t h   ?   [ " w i d t h " ,   " h e i g h t " ]   :   [ " w i d t h " ,   " h e i g h t " ,   " t o p " ,   " l e f t " ] ; 
 
 	 	 	 	 	 $ . e a c h ( c s s ,   f u n c t i o n   ( i ,   p r o p )   { 
 	 	 	 	 	 	 v a r   s u m   =   ( s t a r t [ p r o p ] | | 0 )   +   ( d e l t a [ p r o p ] | | 0 ) ; 
 	 	 	 	 	 	 i f   ( s u m   & &   s u m   > =   0 )   { 
 	 	 	 	 	 	 	 s t y l e [ p r o p ]   =   s u m   | |   n u l l ; 
 	 	 	 	 	 	 } 
 	 	 	 	 	 } ) ; 
 
 	 	 	 	 	 e l . c s s ( s t y l e ) ; 
 	 	 	 	 } ) ; 
 	 	 	 } ; 
 
 	 	 i f   ( t y p e o f ( o . a l s o R e s i z e )   = = =   " o b j e c t "   & &   ! o . a l s o R e s i z e . n o d e T y p e )   { 
 	 	 	 $ . e a c h ( o . a l s o R e s i z e ,   f u n c t i o n   ( e x p ,   c )   {   _ a l s o R e s i z e ( e x p ,   c ) ;   } ) ; 
 	 	 } e l s e { 
 	 	 	 _ a l s o R e s i z e ( o . a l s o R e s i z e ) ; 
 	 	 } 
 	 } , 
 
 	 s t o p :   f u n c t i o n   ( )   { 
 	 	 $ ( t h i s ) . r e m o v e D a t a ( " r e s i z a b l e - a l s o r e s i z e " ) ; 
 	 } 
 } ) ; 
 
 $ . u i . p l u g i n . a d d ( " r e s i z a b l e " ,   " g h o s t " ,   { 
 
 	 s t a r t :   f u n c t i o n ( )   { 
 
 	 	 v a r   t h a t   =   $ ( t h i s ) . d a t a ( " u i - r e s i z a b l e " ) ,   o   =   t h a t . o p t i o n s ,   c s   =   t h a t . s i z e ; 
 
 	 	 t h a t . g h o s t   =   t h a t . o r i g i n a l E l e m e n t . c l o n e ( ) ; 
 	 	 t h a t . g h o s t 
 	 	 	 . c s s ( {   o p a c i t y :   0 . 2 5 ,   d i s p l a y :   " b l o c k " ,   p o s i t i o n :   " r e l a t i v e " ,   h e i g h t :   c s . h e i g h t ,   w i d t h :   c s . w i d t h ,   m a r g i n :   0 ,   l e f t :   0 ,   t o p :   0   } ) 
 	 	 	 . a d d C l a s s ( " u i - r e s i z a b l e - g h o s t " ) 
 	 	 	 . a d d C l a s s ( t y p e o f   o . g h o s t   = = =   " s t r i n g "   ?   o . g h o s t   :   " " ) ; 
 
 	 	 t h a t . g h o s t . a p p e n d T o ( t h a t . h e l p e r ) ; 
 
 	 } , 
 
 	 r e s i z e :   f u n c t i o n ( ) { 
 	 	 v a r   t h a t   =   $ ( t h i s ) . d a t a ( " u i - r e s i z a b l e " ) ; 
 	 	 i f   ( t h a t . g h o s t )   { 
 	 	 	 t h a t . g h o s t . c s s ( {   p o s i t i o n :   " r e l a t i v e " ,   h e i g h t :   t h a t . s i z e . h e i g h t ,   w i d t h :   t h a t . s i z e . w i d t h   } ) ; 
 	 	 } 
 	 } , 
 
 	 s t o p :   f u n c t i o n ( )   { 
 	 	 v a r   t h a t   =   $ ( t h i s ) . d a t a ( " u i - r e s i z a b l e " ) ; 
 	 	 i f   ( t h a t . g h o s t   & &   t h a t . h e l p e r )   { 
 	 	 	 t h a t . h e l p e r . g e t ( 0 ) . r e m o v e C h i l d ( t h a t . g h o s t . g e t ( 0 ) ) ; 
 	 	 } 
 	 } 
 
 } ) ; 
 
 $ . u i . p l u g i n . a d d ( " r e s i z a b l e " ,   " g r i d " ,   { 
 
 	 r e s i z e :   f u n c t i o n ( )   { 
 	 	 v a r   t h a t   =   $ ( t h i s ) . d a t a ( " u i - r e s i z a b l e " ) , 
 	 	 	 o   =   t h a t . o p t i o n s , 
 	 	 	 c s   =   t h a t . s i z e , 
 	 	 	 o s   =   t h a t . o r i g i n a l S i z e , 
 	 	 	 o p   =   t h a t . o r i g i n a l P o s i t i o n , 
 	 	 	 a   =   t h a t . a x i s , 
 	 	 	 g r i d   =   t y p e o f   o . g r i d   = = =   " n u m b e r "   ?   [ o . g r i d ,   o . g r i d ]   :   o . g r i d , 
 	 	 	 g r i d X   =   ( g r i d [ 0 ] | | 1 ) , 
 	 	 	 g r i d Y   =   ( g r i d [ 1 ] | | 1 ) , 
 	 	 	 o x   =   M a t h . r o u n d ( ( c s . w i d t h   -   o s . w i d t h )   /   g r i d X )   *   g r i d X , 
 	 	 	 o y   =   M a t h . r o u n d ( ( c s . h e i g h t   -   o s . h e i g h t )   /   g r i d Y )   *   g r i d Y , 
 	 	 	 n e w W i d t h   =   o s . w i d t h   +   o x , 
 	 	 	 n e w H e i g h t   =   o s . h e i g h t   +   o y , 
 	 	 	 i s M a x W i d t h   =   o . m a x W i d t h   & &   ( o . m a x W i d t h   <   n e w W i d t h ) , 
 	 	 	 i s M a x H e i g h t   =   o . m a x H e i g h t   & &   ( o . m a x H e i g h t   <   n e w H e i g h t ) , 
 	 	 	 i s M i n W i d t h   =   o . m i n W i d t h   & &   ( o . m i n W i d t h   >   n e w W i d t h ) , 
 	 	 	 i s M i n H e i g h t   =   o . m i n H e i g h t   & &   ( o . m i n H e i g h t   >   n e w H e i g h t ) ; 
 
 	 	 o . g r i d   =   g r i d ; 
 
 	 	 i f   ( i s M i n W i d t h )   { 
 	 	 	 n e w W i d t h   =   n e w W i d t h   +   g r i d X ; 
 	 	 } 
 	 	 i f   ( i s M i n H e i g h t )   { 
 	 	 	 n e w H e i g h t   =   n e w H e i g h t   +   g r i d Y ; 
 	 	 } 
 	 	 i f   ( i s M a x W i d t h )   { 
 	 	 	 n e w W i d t h   =   n e w W i d t h   -   g r i d X ; 
 	 	 } 
 	 	 i f   ( i s M a x H e i g h t )   { 
 	 	 	 n e w H e i g h t   =   n e w H e i g h t   -   g r i d Y ; 
 	 	 } 
 
 	 	 i f   ( / ^ ( s e | s | e ) $ / . t e s t ( a ) )   { 
 	 	 	 t h a t . s i z e . w i d t h   =   n e w W i d t h ; 
 	 	 	 t h a t . s i z e . h e i g h t   =   n e w H e i g h t ; 
 	 	 }   e l s e   i f   ( / ^ ( n e ) $ / . t e s t ( a ) )   { 
 	 	 	 t h a t . s i z e . w i d t h   =   n e w W i d t h ; 
 	 	 	 t h a t . s i z e . h e i g h t   =   n e w H e i g h t ; 
 	 	 	 t h a t . p o s i t i o n . t o p   =   o p . t o p   -   o y ; 
 	 	 }   e l s e   i f   ( / ^ ( s w ) $ / . t e s t ( a ) )   { 
 	 	 	 t h a t . s i z e . w i d t h   =   n e w W i d t h ; 
 	 	 	 t h a t . s i z e . h e i g h t   =   n e w H e i g h t ; 
 	 	 	 t h a t . p o s i t i o n . l e f t   =   o p . l e f t   -   o x ; 
 	 	 }   e l s e   { 
 	 	 	 t h a t . s i z e . w i d t h   =   n e w W i d t h ; 
 	 	 	 t h a t . s i z e . h e i g h t   =   n e w H e i g h t ; 
 	 	 	 t h a t . p o s i t i o n . t o p   =   o p . t o p   -   o y ; 
 	 	 	 t h a t . p o s i t i o n . l e f t   =   o p . l e f t   -   o x ; 
 	 	 } 
 	 } 
 
 } ) ; 
 
 } ) ( j Q u e r y ) ; 
 
 ( f u n c t i o n (   $ ,   u n d e f i n e d   )   { 
 
 $ . w i d g e t ( " u i . s e l e c t a b l e " ,   $ . u i . m o u s e ,   { 
 	 v e r s i o n :   " 1 . 1 0 . 3 " , 
 	 o p t i o n s :   { 
 	 	 a p p e n d T o :   " b o d y " , 
 	 	 a u t o R e f r e s h :   t r u e , 
 	 	 d i s t a n c e :   0 , 
 	 	 f i l t e r :   " * " , 
 	 	 t o l e r a n c e :   " t o u c h " , 
 
 	 	 / /   c a l l b a c k s 
 	 	 s e l e c t e d :   n u l l , 
 	 	 s e l e c t i n g :   n u l l , 
 	 	 s t a r t :   n u l l , 
 	 	 s t o p :   n u l l , 
 	 	 u n s e l e c t e d :   n u l l , 
 	 	 u n s e l e c t i n g :   n u l l 
 	 } , 
 	 _ c r e a t e :   f u n c t i o n ( )   { 
 	 	 v a r   s e l e c t e e s , 
 	 	 	 t h a t   =   t h i s ; 
 
 	 	 t h i s . e l e m e n t . a d d C l a s s ( " u i - s e l e c t a b l e " ) ; 
 
 	 	 t h i s . d r a g g e d   =   f a l s e ; 
 
 	 	 / /   c a c h e   s e l e c t e e   c h i l d r e n   b a s e d   o n   f i l t e r 
 	 	 t h i s . r e f r e s h   =   f u n c t i o n ( )   { 
 	 	 	 s e l e c t e e s   =   $ ( t h a t . o p t i o n s . f i l t e r ,   t h a t . e l e m e n t [ 0 ] ) ; 
 	 	 	 s e l e c t e e s . a d d C l a s s ( " u i - s e l e c t e e " ) ; 
 	 	 	 s e l e c t e e s . e a c h ( f u n c t i o n ( )   { 
 	 	 	 	 v a r   $ t h i s   =   $ ( t h i s ) , 
 	 	 	 	 	 p o s   =   $ t h i s . o f f s e t ( ) ; 
 	 	 	 	 $ . d a t a ( t h i s ,   " s e l e c t a b l e - i t e m " ,   { 
 	 	 	 	 	 e l e m e n t :   t h i s , 
 	 	 	 	 	 $ e l e m e n t :   $ t h i s , 
 	 	 	 	 	 l e f t :   p o s . l e f t , 
 	 	 	 	 	 t o p :   p o s . t o p , 
 	 	 	 	 	 r i g h t :   p o s . l e f t   +   $ t h i s . o u t e r W i d t h ( ) , 
 	 	 	 	 	 b o t t o m :   p o s . t o p   +   $ t h i s . o u t e r H e i g h t ( ) , 
 	 	 	 	 	 s t a r t s e l e c t e d :   f a l s e , 
 	 	 	 	 	 s e l e c t e d :   $ t h i s . h a s C l a s s ( " u i - s e l e c t e d " ) , 
 	 	 	 	 	 s e l e c t i n g :   $ t h i s . h a s C l a s s ( " u i - s e l e c t i n g " ) , 
 	 	 	 	 	 u n s e l e c t i n g :   $ t h i s . h a s C l a s s ( " u i - u n s e l e c t i n g " ) 
 	 	 	 	 } ) ; 
 	 	 	 } ) ; 
 	 	 } ; 
 	 	 t h i s . r e f r e s h ( ) ; 
 
 	 	 t h i s . s e l e c t e e s   =   s e l e c t e e s . a d d C l a s s ( " u i - s e l e c t e e " ) ; 
 
 	 	 t h i s . _ m o u s e I n i t ( ) ; 
 
 	 	 t h i s . h e l p e r   =   $ ( " < d i v   c l a s s = ' u i - s e l e c t a b l e - h e l p e r ' > < / d i v > " ) ; 
 	 } , 
 
 	 _ d e s t r o y :   f u n c t i o n ( )   { 
 	 	 t h i s . s e l e c t e e s 
 	 	 	 . r e m o v e C l a s s ( " u i - s e l e c t e e " ) 
 	 	 	 . r e m o v e D a t a ( " s e l e c t a b l e - i t e m " ) ; 
 	 	 t h i s . e l e m e n t 
 	 	 	 . r e m o v e C l a s s ( " u i - s e l e c t a b l e   u i - s e l e c t a b l e - d i s a b l e d " ) ; 
 	 	 t h i s . _ m o u s e D e s t r o y ( ) ; 
 	 } , 
 
 	 _ m o u s e S t a r t :   f u n c t i o n ( e v e n t )   { 
 	 	 v a r   t h a t   =   t h i s , 
 	 	 	 o p t i o n s   =   t h i s . o p t i o n s ; 
 
 	 	 t h i s . o p o s   =   [ e v e n t . p a g e X ,   e v e n t . p a g e Y ] ; 
 
 	 	 i f   ( t h i s . o p t i o n s . d i s a b l e d )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 t h i s . s e l e c t e e s   =   $ ( o p t i o n s . f i l t e r ,   t h i s . e l e m e n t [ 0 ] ) ; 
 
 	 	 t h i s . _ t r i g g e r ( " s t a r t " ,   e v e n t ) ; 
 
 	 	 $ ( o p t i o n s . a p p e n d T o ) . a p p e n d ( t h i s . h e l p e r ) ; 
 	 	 / /   p o s i t i o n   h e l p e r   ( l a s s o ) 
 	 	 t h i s . h e l p e r . c s s ( { 
 	 	 	 " l e f t " :   e v e n t . p a g e X , 
 	 	 	 " t o p " :   e v e n t . p a g e Y , 
 	 	 	 " w i d t h " :   0 , 
 	 	 	 " h e i g h t " :   0 
 	 	 } ) ; 
 
 	 	 i f   ( o p t i o n s . a u t o R e f r e s h )   { 
 	 	 	 t h i s . r e f r e s h ( ) ; 
 	 	 } 
 
 	 	 t h i s . s e l e c t e e s . f i l t e r ( " . u i - s e l e c t e d " ) . e a c h ( f u n c t i o n ( )   { 
 	 	 	 v a r   s e l e c t e e   =   $ . d a t a ( t h i s ,   " s e l e c t a b l e - i t e m " ) ; 
 	 	 	 s e l e c t e e . s t a r t s e l e c t e d   =   t r u e ; 
 	 	 	 i f   ( ! e v e n t . m e t a K e y   & &   ! e v e n t . c t r l K e y )   { 
 	 	 	 	 s e l e c t e e . $ e l e m e n t . r e m o v e C l a s s ( " u i - s e l e c t e d " ) ; 
 	 	 	 	 s e l e c t e e . s e l e c t e d   =   f a l s e ; 
 	 	 	 	 s e l e c t e e . $ e l e m e n t . a d d C l a s s ( " u i - u n s e l e c t i n g " ) ; 
 	 	 	 	 s e l e c t e e . u n s e l e c t i n g   =   t r u e ; 
 	 	 	 	 / /   s e l e c t a b l e   U N S E L E C T I N G   c a l l b a c k 
 	 	 	 	 t h a t . _ t r i g g e r ( " u n s e l e c t i n g " ,   e v e n t ,   { 
 	 	 	 	 	 u n s e l e c t i n g :   s e l e c t e e . e l e m e n t 
 	 	 	 	 } ) ; 
 	 	 	 } 
 	 	 } ) ; 
 
 	 	 $ ( e v e n t . t a r g e t ) . p a r e n t s ( ) . a d d B a c k ( ) . e a c h ( f u n c t i o n ( )   { 
 	 	 	 v a r   d o S e l e c t , 
 	 	 	 	 s e l e c t e e   =   $ . d a t a ( t h i s ,   " s e l e c t a b l e - i t e m " ) ; 
 	 	 	 i f   ( s e l e c t e e )   { 
 	 	 	 	 d o S e l e c t   =   ( ! e v e n t . m e t a K e y   & &   ! e v e n t . c t r l K e y )   | |   ! s e l e c t e e . $ e l e m e n t . h a s C l a s s ( " u i - s e l e c t e d " ) ; 
 	 	 	 	 s e l e c t e e . $ e l e m e n t 
 	 	 	 	 	 . r e m o v e C l a s s ( d o S e l e c t   ?   " u i - u n s e l e c t i n g "   :   " u i - s e l e c t e d " ) 
 	 	 	 	 	 . a d d C l a s s ( d o S e l e c t   ?   " u i - s e l e c t i n g "   :   " u i - u n s e l e c t i n g " ) ; 
 	 	 	 	 s e l e c t e e . u n s e l e c t i n g   =   ! d o S e l e c t ; 
 	 	 	 	 s e l e c t e e . s e l e c t i n g   =   d o S e l e c t ; 
 	 	 	 	 s e l e c t e e . s e l e c t e d   =   d o S e l e c t ; 
 	 	 	 	 / /   s e l e c t a b l e   ( U N ) S E L E C T I N G   c a l l b a c k 
 	 	 	 	 i f   ( d o S e l e c t )   { 
 	 	 	 	 	 t h a t . _ t r i g g e r ( " s e l e c t i n g " ,   e v e n t ,   { 
 	 	 	 	 	 	 s e l e c t i n g :   s e l e c t e e . e l e m e n t 
 	 	 	 	 	 } ) ; 
 	 	 	 	 }   e l s e   { 
 	 	 	 	 	 t h a t . _ t r i g g e r ( " u n s e l e c t i n g " ,   e v e n t ,   { 
 	 	 	 	 	 	 u n s e l e c t i n g :   s e l e c t e e . e l e m e n t 
 	 	 	 	 	 } ) ; 
 	 	 	 	 } 
 	 	 	 	 r e t u r n   f a l s e ; 
 	 	 	 } 
 	 	 } ) ; 
 
 	 } , 
 
 	 _ m o u s e D r a g :   f u n c t i o n ( e v e n t )   { 
 
 	 	 t h i s . d r a g g e d   =   t r u e ; 
 
 	 	 i f   ( t h i s . o p t i o n s . d i s a b l e d )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 v a r   t m p , 
 	 	 	 t h a t   =   t h i s , 
 	 	 	 o p t i o n s   =   t h i s . o p t i o n s , 
 	 	 	 x 1   =   t h i s . o p o s [ 0 ] , 
 	 	 	 y 1   =   t h i s . o p o s [ 1 ] , 
 	 	 	 x 2   =   e v e n t . p a g e X , 
 	 	 	 y 2   =   e v e n t . p a g e Y ; 
 
 	 	 i f   ( x 1   >   x 2 )   {   t m p   =   x 2 ;   x 2   =   x 1 ;   x 1   =   t m p ;   } 
 	 	 i f   ( y 1   >   y 2 )   {   t m p   =   y 2 ;   y 2   =   y 1 ;   y 1   =   t m p ;   } 
 	 	 t h i s . h e l p e r . c s s ( { l e f t :   x 1 ,   t o p :   y 1 ,   w i d t h :   x 2 - x 1 ,   h e i g h t :   y 2 - y 1 } ) ; 
 
 	 	 t h i s . s e l e c t e e s . e a c h ( f u n c t i o n ( )   { 
 	 	 	 v a r   s e l e c t e e   =   $ . d a t a ( t h i s ,   " s e l e c t a b l e - i t e m " ) , 
 	 	 	 	 h i t   =   f a l s e ; 
 
 	 	 	 / / p r e v e n t   h e l p e r   f r o m   b e i n g   s e l e c t e d   i f   a p p e n d T o :   s e l e c t a b l e 
 	 	 	 i f   ( ! s e l e c t e e   | |   s e l e c t e e . e l e m e n t   = = =   t h a t . e l e m e n t [ 0 ] )   { 
 	 	 	 	 r e t u r n ; 
 	 	 	 } 
 
 	 	 	 i f   ( o p t i o n s . t o l e r a n c e   = = =   " t o u c h " )   { 
 	 	 	 	 h i t   =   (   ! ( s e l e c t e e . l e f t   >   x 2   | |   s e l e c t e e . r i g h t   <   x 1   | |   s e l e c t e e . t o p   >   y 2   | |   s e l e c t e e . b o t t o m   <   y 1 )   ) ; 
 	 	 	 }   e l s e   i f   ( o p t i o n s . t o l e r a n c e   = = =   " f i t " )   { 
 	 	 	 	 h i t   =   ( s e l e c t e e . l e f t   >   x 1   & &   s e l e c t e e . r i g h t   <   x 2   & &   s e l e c t e e . t o p   >   y 1   & &   s e l e c t e e . b o t t o m   <   y 2 ) ; 
 	 	 	 } 
 
 	 	 	 i f   ( h i t )   { 
 	 	 	 	 / /   S E L E C T 
 	 	 	 	 i f   ( s e l e c t e e . s e l e c t e d )   { 
 	 	 	 	 	 s e l e c t e e . $ e l e m e n t . r e m o v e C l a s s ( " u i - s e l e c t e d " ) ; 
 	 	 	 	 	 s e l e c t e e . s e l e c t e d   =   f a l s e ; 
 	 	 	 	 } 
 	 	 	 	 i f   ( s e l e c t e e . u n s e l e c t i n g )   { 
 	 	 	 	 	 s e l e c t e e . $ e l e m e n t . r e m o v e C l a s s ( " u i - u n s e l e c t i n g " ) ; 
 	 	 	 	 	 s e l e c t e e . u n s e l e c t i n g   =   f a l s e ; 
 	 	 	 	 } 
 	 	 	 	 i f   ( ! s e l e c t e e . s e l e c t i n g )   { 
 	 	 	 	 	 s e l e c t e e . $ e l e m e n t . a d d C l a s s ( " u i - s e l e c t i n g " ) ; 
 	 	 	 	 	 s e l e c t e e . s e l e c t i n g   =   t r u e ; 
 	 	 	 	 	 / /   s e l e c t a b l e   S E L E C T I N G   c a l l b a c k 
 	 	 	 	 	 t h a t . _ t r i g g e r ( " s e l e c t i n g " ,   e v e n t ,   { 
 	 	 	 	 	 	 s e l e c t i n g :   s e l e c t e e . e l e m e n t 
 	 	 	 	 	 } ) ; 
 	 	 	 	 } 
 	 	 	 }   e l s e   { 
 	 	 	 	 / /   U N S E L E C T 
 	 	 	 	 i f   ( s e l e c t e e . s e l e c t i n g )   { 
 	 	 	 	 	 i f   ( ( e v e n t . m e t a K e y   | |   e v e n t . c t r l K e y )   & &   s e l e c t e e . s t a r t s e l e c t e d )   { 
 	 	 	 	 	 	 s e l e c t e e . $ e l e m e n t . r e m o v e C l a s s ( " u i - s e l e c t i n g " ) ; 
 	 	 	 	 	 	 s e l e c t e e . s e l e c t i n g   =   f a l s e ; 
 	 	 	 	 	 	 s e l e c t e e . $ e l e m e n t . a d d C l a s s ( " u i - s e l e c t e d " ) ; 
 	 	 	 	 	 	 s e l e c t e e . s e l e c t e d   =   t r u e ; 
 	 	 	 	 	 }   e l s e   { 
 	 	 	 	 	 	 s e l e c t e e . $ e l e m e n t . r e m o v e C l a s s ( " u i - s e l e c t i n g " ) ; 
 	 	 	 	 	 	 s e l e c t e e . s e l e c t i n g   =   f a l s e ; 
 	 	 	 	 	 	 i f   ( s e l e c t e e . s t a r t s e l e c t e d )   { 
 	 	 	 	 	 	 	 s e l e c t e e . $ e l e m e n t . a d d C l a s s ( " u i - u n s e l e c t i n g " ) ; 
 	 	 	 	 	 	 	 s e l e c t e e . u n s e l e c t i n g   =   t r u e ; 
 	 	 	 	 	 	 } 
 	 	 	 	 	 	 / /   s e l e c t a b l e   U N S E L E C T I N G   c a l l b a c k 
 	 	 	 	 	 	 t h a t . _ t r i g g e r ( " u n s e l e c t i n g " ,   e v e n t ,   { 
 	 	 	 	 	 	 	 u n s e l e c t i n g :   s e l e c t e e . e l e m e n t 
 	 	 	 	 	 	 } ) ; 
 	 	 	 	 	 } 
 	 	 	 	 } 
 	 	 	 	 i f   ( s e l e c t e e . s e l e c t e d )   { 
 	 	 	 	 	 i f   ( ! e v e n t . m e t a K e y   & &   ! e v e n t . c t r l K e y   & &   ! s e l e c t e e . s t a r t s e l e c t e d )   { 
 	 	 	 	 	 	 s e l e c t e e . $ e l e m e n t . r e m o v e C l a s s ( " u i - s e l e c t e d " ) ; 
 	 	 	 	 	 	 s e l e c t e e . s e l e c t e d   =   f a l s e ; 
 
 	 	 	 	 	 	 s e l e c t e e . $ e l e m e n t . a d d C l a s s ( " u i - u n s e l e c t i n g " ) ; 
 	 	 	 	 	 	 s e l e c t e e . u n s e l e c t i n g   =   t r u e ; 
 	 	 	 	 	 	 / /   s e l e c t a b l e   U N S E L E C T I N G   c a l l b a c k 
 	 	 	 	 	 	 t h a t . _ t r i g g e r ( " u n s e l e c t i n g " ,   e v e n t ,   { 
 	 	 	 	 	 	 	 u n s e l e c t i n g :   s e l e c t e e . e l e m e n t 
 	 	 	 	 	 	 } ) ; 
 	 	 	 	 	 } 
 	 	 	 	 } 
 	 	 	 } 
 	 	 } ) ; 
 
 	 	 r e t u r n   f a l s e ; 
 	 } , 
 
 	 _ m o u s e S t o p :   f u n c t i o n ( e v e n t )   { 
 	 	 v a r   t h a t   =   t h i s ; 
 
 	 	 t h i s . d r a g g e d   =   f a l s e ; 
 
 	 	 $ ( " . u i - u n s e l e c t i n g " ,   t h i s . e l e m e n t [ 0 ] ) . e a c h ( f u n c t i o n ( )   { 
 	 	 	 v a r   s e l e c t e e   =   $ . d a t a ( t h i s ,   " s e l e c t a b l e - i t e m " ) ; 
 	 	 	 s e l e c t e e . $ e l e m e n t . r e m o v e C l a s s ( " u i - u n s e l e c t i n g " ) ; 
 	 	 	 s e l e c t e e . u n s e l e c t i n g   =   f a l s e ; 
 	 	 	 s e l e c t e e . s t a r t s e l e c t e d   =   f a l s e ; 
 	 	 	 t h a t . _ t r i g g e r ( " u n s e l e c t e d " ,   e v e n t ,   { 
 	 	 	 	 u n s e l e c t e d :   s e l e c t e e . e l e m e n t 
 	 	 	 } ) ; 
 	 	 } ) ; 
 	 	 $ ( " . u i - s e l e c t i n g " ,   t h i s . e l e m e n t [ 0 ] ) . e a c h ( f u n c t i o n ( )   { 
 	 	 	 v a r   s e l e c t e e   =   $ . d a t a ( t h i s ,   " s e l e c t a b l e - i t e m " ) ; 
 	 	 	 s e l e c t e e . $ e l e m e n t . r e m o v e C l a s s ( " u i - s e l e c t i n g " ) . a d d C l a s s ( " u i - s e l e c t e d " ) ; 
 	 	 	 s e l e c t e e . s e l e c t i n g   =   f a l s e ; 
 	 	 	 s e l e c t e e . s e l e c t e d   =   t r u e ; 
 	 	 	 s e l e c t e e . s t a r t s e l e c t e d   =   t r u e ; 
 	 	 	 t h a t . _ t r i g g e r ( " s e l e c t e d " ,   e v e n t ,   { 
 	 	 	 	 s e l e c t e d :   s e l e c t e e . e l e m e n t 
 	 	 	 } ) ; 
 	 	 } ) ; 
 	 	 t h i s . _ t r i g g e r ( " s t o p " ,   e v e n t ) ; 
 
 	 	 t h i s . h e l p e r . r e m o v e ( ) ; 
 
 	 	 r e t u r n   f a l s e ; 
 	 } 
 
 } ) ; 
 
 } ) ( j Q u e r y ) ; 
 
 ( f u n c t i o n (   $ ,   u n d e f i n e d   )   { 
 
 / * j s h i n t   l o o p f u n c :   t r u e   * / 
 
 f u n c t i o n   i s O v e r A x i s (   x ,   r e f e r e n c e ,   s i z e   )   { 
 	 r e t u r n   (   x   >   r e f e r e n c e   )   & &   (   x   <   (   r e f e r e n c e   +   s i z e   )   ) ; 
 } 
 
 f u n c t i o n   i s F l o a t i n g ( i t e m )   { 
 	 r e t u r n   ( / l e f t | r i g h t / ) . t e s t ( i t e m . c s s ( " f l o a t " ) )   | |   ( / i n l i n e | t a b l e - c e l l / ) . t e s t ( i t e m . c s s ( " d i s p l a y " ) ) ; 
 } 
 
 $ . w i d g e t ( " u i . s o r t a b l e " ,   $ . u i . m o u s e ,   { 
 	 v e r s i o n :   " 1 . 1 0 . 3 " , 
 	 w i d g e t E v e n t P r e f i x :   " s o r t " , 
 	 r e a d y :   f a l s e , 
 	 o p t i o n s :   { 
 	 	 a p p e n d T o :   " p a r e n t " , 
 	 	 a x i s :   f a l s e , 
 	 	 c o n n e c t W i t h :   f a l s e , 
 	 	 c o n t a i n m e n t :   f a l s e , 
 	 	 c u r s o r :   " a u t o " , 
 	 	 c u r s o r A t :   f a l s e , 
 	 	 d r o p O n E m p t y :   t r u e , 
 	 	 f o r c e P l a c e h o l d e r S i z e :   f a l s e , 
 	 	 f o r c e H e l p e r S i z e :   f a l s e , 
 	 	 g r i d :   f a l s e , 
 	 	 h a n d l e :   f a l s e , 
 	 	 h e l p e r :   " o r i g i n a l " , 
 	 	 i t e m s :   " >   * " , 
 	 	 o p a c i t y :   f a l s e , 
 	 	 p l a c e h o l d e r :   f a l s e , 
 	 	 r e v e r t :   f a l s e , 
 	 	 s c r o l l :   t r u e , 
 	 	 s c r o l l S e n s i t i v i t y :   2 0 , 
 	 	 s c r o l l S p e e d :   2 0 , 
 	 	 s c o p e :   " d e f a u l t " , 
 	 	 t o l e r a n c e :   " i n t e r s e c t " , 
 	 	 z I n d e x :   1 0 0 0 , 
 
 	 	 / /   c a l l b a c k s 
 	 	 a c t i v a t e :   n u l l , 
 	 	 b e f o r e S t o p :   n u l l , 
 	 	 c h a n g e :   n u l l , 
 	 	 d e a c t i v a t e :   n u l l , 
 	 	 o u t :   n u l l , 
 	 	 o v e r :   n u l l , 
 	 	 r e c e i v e :   n u l l , 
 	 	 r e m o v e :   n u l l , 
 	 	 s o r t :   n u l l , 
 	 	 s t a r t :   n u l l , 
 	 	 s t o p :   n u l l , 
 	 	 u p d a t e :   n u l l 
 	 } , 
 	 _ c r e a t e :   f u n c t i o n ( )   { 
 
 	 	 v a r   o   =   t h i s . o p t i o n s ; 
 	 	 t h i s . c o n t a i n e r C a c h e   =   { } ; 
 	 	 t h i s . e l e m e n t . a d d C l a s s ( " u i - s o r t a b l e " ) ; 
 
 	 	 / / G e t   t h e   i t e m s 
 	 	 t h i s . r e f r e s h ( ) ; 
 
 	 	 / / L e t ' s   d e t e r m i n e   i f   t h e   i t e m s   a r e   b e i n g   d i s p l a y e d   h o r i z o n t a l l y 
 	 	 t h i s . f l o a t i n g   =   t h i s . i t e m s . l e n g t h   ?   o . a x i s   = = =   " x "   | |   i s F l o a t i n g ( t h i s . i t e m s [ 0 ] . i t e m )   :   f a l s e ; 
 
 	 	 / / L e t ' s   d e t e r m i n e   t h e   p a r e n t ' s   o f f s e t 
 	 	 t h i s . o f f s e t   =   t h i s . e l e m e n t . o f f s e t ( ) ; 
 
 	 	 / / I n i t i a l i z e   m o u s e   e v e n t s   f o r   i n t e r a c t i o n 
 	 	 t h i s . _ m o u s e I n i t ( ) ; 
 
 	 	 / / W e ' r e   r e a d y   t o   g o 
 	 	 t h i s . r e a d y   =   t r u e ; 
 
 	 } , 
 
 	 _ d e s t r o y :   f u n c t i o n ( )   { 
 	 	 t h i s . e l e m e n t 
 	 	 	 . r e m o v e C l a s s ( " u i - s o r t a b l e   u i - s o r t a b l e - d i s a b l e d " ) ; 
 	 	 t h i s . _ m o u s e D e s t r o y ( ) ; 
 
 	 	 f o r   (   v a r   i   =   t h i s . i t e m s . l e n g t h   -   1 ;   i   > =   0 ;   i - -   )   { 
 	 	 	 t h i s . i t e m s [ i ] . i t e m . r e m o v e D a t a ( t h i s . w i d g e t N a m e   +   " - i t e m " ) ; 
 	 	 } 
 
 	 	 r e t u r n   t h i s ; 
 	 } , 
 
 	 _ s e t O p t i o n :   f u n c t i o n ( k e y ,   v a l u e ) { 
 	 	 i f   (   k e y   = = =   " d i s a b l e d "   )   { 
 	 	 	 t h i s . o p t i o n s [   k e y   ]   =   v a l u e ; 
 
 	 	 	 t h i s . w i d g e t ( ) . t o g g l e C l a s s (   " u i - s o r t a b l e - d i s a b l e d " ,   ! ! v a l u e   ) ; 
 	 	 }   e l s e   { 
 	 	 	 / /   D o n ' t   c a l l   w i d g e t   b a s e   _ s e t O p t i o n   f o r   d i s a b l e   a s   i t   a d d s   u i - s t a t e - d i s a b l e d   c l a s s 
 	 	 	 $ . W i d g e t . p r o t o t y p e . _ s e t O p t i o n . a p p l y ( t h i s ,   a r g u m e n t s ) ; 
 	 	 } 
 	 } , 
 
 	 _ m o u s e C a p t u r e :   f u n c t i o n ( e v e n t ,   o v e r r i d e H a n d l e )   { 
 	 	 v a r   c u r r e n t I t e m   =   n u l l , 
 	 	 	 v a l i d H a n d l e   =   f a l s e , 
 	 	 	 t h a t   =   t h i s ; 
 
 	 	 i f   ( t h i s . r e v e r t i n g )   { 
 	 	 	 r e t u r n   f a l s e ; 
 	 	 } 
 
 	 	 i f ( t h i s . o p t i o n s . d i s a b l e d   | |   t h i s . o p t i o n s . t y p e   = = =   " s t a t i c " )   { 
 	 	 	 r e t u r n   f a l s e ; 
 	 	 } 
 
 	 	 / / W e   h a v e   t o   r e f r e s h   t h e   i t e m s   d a t a   o n c e   f i r s t 
 	 	 t h i s . _ r e f r e s h I t e m s ( e v e n t ) ; 
 
 	 	 / / F i n d   o u t   i f   t h e   c l i c k e d   n o d e   ( o r   o n e   o f   i t s   p a r e n t s )   i s   a   a c t u a l   i t e m   i n   t h i s . i t e m s 
 	 	 $ ( e v e n t . t a r g e t ) . p a r e n t s ( ) . e a c h ( f u n c t i o n ( )   { 
 	 	 	 i f ( $ . d a t a ( t h i s ,   t h a t . w i d g e t N a m e   +   " - i t e m " )   = = =   t h a t )   { 
 	 	 	 	 c u r r e n t I t e m   =   $ ( t h i s ) ; 
 	 	 	 	 r e t u r n   f a l s e ; 
 	 	 	 } 
 	 	 } ) ; 
 	 	 i f ( $ . d a t a ( e v e n t . t a r g e t ,   t h a t . w i d g e t N a m e   +   " - i t e m " )   = = =   t h a t )   { 
 	 	 	 c u r r e n t I t e m   =   $ ( e v e n t . t a r g e t ) ; 
 	 	 } 
 
 	 	 i f ( ! c u r r e n t I t e m )   { 
 	 	 	 r e t u r n   f a l s e ; 
 	 	 } 
 	 	 i f ( t h i s . o p t i o n s . h a n d l e   & &   ! o v e r r i d e H a n d l e )   { 
 	 	 	 $ ( t h i s . o p t i o n s . h a n d l e ,   c u r r e n t I t e m ) . f i n d ( " * " ) . a d d B a c k ( ) . e a c h ( f u n c t i o n ( )   { 
 	 	 	 	 i f ( t h i s   = = =   e v e n t . t a r g e t )   { 
 	 	 	 	 	 v a l i d H a n d l e   =   t r u e ; 
 	 	 	 	 } 
 	 	 	 } ) ; 
 	 	 	 i f ( ! v a l i d H a n d l e )   { 
 	 	 	 	 r e t u r n   f a l s e ; 
 	 	 	 } 
 	 	 } 
 
 	 	 t h i s . c u r r e n t I t e m   =   c u r r e n t I t e m ; 
 	 	 t h i s . _ r e m o v e C u r r e n t s F r o m I t e m s ( ) ; 
 	 	 r e t u r n   t r u e ; 
 
 	 } , 
 
 	 _ m o u s e S t a r t :   f u n c t i o n ( e v e n t ,   o v e r r i d e H a n d l e ,   n o A c t i v a t i o n )   { 
 
 	 	 v a r   i ,   b o d y , 
 	 	 	 o   =   t h i s . o p t i o n s ; 
 
 	 	 t h i s . c u r r e n t C o n t a i n e r   =   t h i s ; 
 
 	 	 / / W e   o n l y   n e e d   t o   c a l l   r e f r e s h P o s i t i o n s ,   b e c a u s e   t h e   r e f r e s h I t e m s   c a l l   h a s   b e e n   m o v e d   t o   m o u s e C a p t u r e 
 	 	 t h i s . r e f r e s h P o s i t i o n s ( ) ; 
 
 	 	 / / C r e a t e   a n d   a p p e n d   t h e   v i s i b l e   h e l p e r 
 	 	 t h i s . h e l p e r   =   t h i s . _ c r e a t e H e l p e r ( e v e n t ) ; 
 
 	 	 / / C a c h e   t h e   h e l p e r   s i z e 
 	 	 t h i s . _ c a c h e H e l p e r P r o p o r t i o n s ( ) ; 
 
 	 	 / * 
 	 	   *   -   P o s i t i o n   g e n e r a t i o n   - 
 	 	   *   T h i s   b l o c k   g e n e r a t e s   e v e r y t h i n g   p o s i t i o n   r e l a t e d   -   i t ' s   t h e   c o r e   o f   d r a g g a b l e s . 
 	 	   * / 
 
 	 	 / / C a c h e   t h e   m a r g i n s   o f   t h e   o r i g i n a l   e l e m e n t 
 	 	 t h i s . _ c a c h e M a r g i n s ( ) ; 
 
 	 	 / / G e t   t h e   n e x t   s c r o l l i n g   p a r e n t 
 	 	 t h i s . s c r o l l P a r e n t   =   t h i s . h e l p e r . s c r o l l P a r e n t ( ) ; 
 
 	 	 / / T h e   e l e m e n t ' s   a b s o l u t e   p o s i t i o n   o n   t h e   p a g e   m i n u s   m a r g i n s 
 	 	 t h i s . o f f s e t   =   t h i s . c u r r e n t I t e m . o f f s e t ( ) ; 
 	 	 t h i s . o f f s e t   =   { 
 	 	 	 t o p :   t h i s . o f f s e t . t o p   -   t h i s . m a r g i n s . t o p , 
 	 	 	 l e f t :   t h i s . o f f s e t . l e f t   -   t h i s . m a r g i n s . l e f t 
 	 	 } ; 
 
 	 	 $ . e x t e n d ( t h i s . o f f s e t ,   { 
 	 	 	 c l i c k :   {   / / W h e r e   t h e   c l i c k   h a p p e n e d ,   r e l a t i v e   t o   t h e   e l e m e n t 
 	 	 	 	 l e f t :   e v e n t . p a g e X   -   t h i s . o f f s e t . l e f t , 
 	 	 	 	 t o p :   e v e n t . p a g e Y   -   t h i s . o f f s e t . t o p 
 	 	 	 } , 
 	 	 	 p a r e n t :   t h i s . _ g e t P a r e n t O f f s e t ( ) , 
 	 	 	 r e l a t i v e :   t h i s . _ g e t R e l a t i v e O f f s e t ( )   / / T h i s   i s   a   r e l a t i v e   t o   a b s o l u t e   p o s i t i o n   m i n u s   t h e   a c t u a l   p o s i t i o n   c a l c u l a t i o n   -   o n l y   u s e d   f o r   r e l a t i v e   p o s i t i o n e d   h e l p e r 
 	 	 } ) ; 
 
 	 	 / /   O n l y   a f t e r   w e   g o t   t h e   o f f s e t ,   w e   c a n   c h a n g e   t h e   h e l p e r ' s   p o s i t i o n   t o   a b s o l u t e 
 	 	 / /   T O D O :   S t i l l   n e e d   t o   f i g u r e   o u t   a   w a y   t o   m a k e   r e l a t i v e   s o r t i n g   p o s s i b l e 
 	 	 t h i s . h e l p e r . c s s ( " p o s i t i o n " ,   " a b s o l u t e " ) ; 
 	 	 t h i s . c s s P o s i t i o n   =   t h i s . h e l p e r . c s s ( " p o s i t i o n " ) ; 
 
 	 	 / / G e n e r a t e   t h e   o r i g i n a l   p o s i t i o n 
 	 	 t h i s . o r i g i n a l P o s i t i o n   =   t h i s . _ g e n e r a t e P o s i t i o n ( e v e n t ) ; 
 	 	 t h i s . o r i g i n a l P a g e X   =   e v e n t . p a g e X ; 
 	 	 t h i s . o r i g i n a l P a g e Y   =   e v e n t . p a g e Y ; 
 
 	 	 / / A d j u s t   t h e   m o u s e   o f f s e t   r e l a t i v e   t o   t h e   h e l p e r   i f   " c u r s o r A t "   i s   s u p p l i e d 
 	 	 ( o . c u r s o r A t   & &   t h i s . _ a d j u s t O f f s e t F r o m H e l p e r ( o . c u r s o r A t ) ) ; 
 
 	 	 / / C a c h e   t h e   f o r m e r   D O M   p o s i t i o n 
 	 	 t h i s . d o m P o s i t i o n   =   {   p r e v :   t h i s . c u r r e n t I t e m . p r e v ( ) [ 0 ] ,   p a r e n t :   t h i s . c u r r e n t I t e m . p a r e n t ( ) [ 0 ]   } ; 
 
 	 	 / / I f   t h e   h e l p e r   i s   n o t   t h e   o r i g i n a l ,   h i d e   t h e   o r i g i n a l   s o   i t ' s   n o t   p l a y i n g   a n y   r o l e   d u r i n g   t h e   d r a g ,   w o n ' t   c a u s e   a n y t h i n g   b a d   t h i s   w a y 
 	 	 i f ( t h i s . h e l p e r [ 0 ]   ! = =   t h i s . c u r r e n t I t e m [ 0 ] )   { 
 	 	 	 t h i s . c u r r e n t I t e m . h i d e ( ) ; 
 	 	 } 
 
 	 	 / / C r e a t e   t h e   p l a c e h o l d e r 
 	 	 t h i s . _ c r e a t e P l a c e h o l d e r ( ) ; 
 
 	 	 / / S e t   a   c o n t a i n m e n t   i f   g i v e n   i n   t h e   o p t i o n s 
 	 	 i f ( o . c o n t a i n m e n t )   { 
 	 	 	 t h i s . _ s e t C o n t a i n m e n t ( ) ; 
 	 	 } 
 
 	 	 i f (   o . c u r s o r   & &   o . c u r s o r   ! = =   " a u t o "   )   {   / /   c u r s o r   o p t i o n 
 	 	 	 b o d y   =   t h i s . d o c u m e n t . f i n d (   " b o d y "   ) ; 
 
 	 	 	 / /   s u p p o r t :   I E 
 	 	 	 t h i s . s t o r e d C u r s o r   =   b o d y . c s s (   " c u r s o r "   ) ; 
 	 	 	 b o d y . c s s (   " c u r s o r " ,   o . c u r s o r   ) ; 
 
 	 	 	 t h i s . s t o r e d S t y l e s h e e t   =   $ (   " < s t y l e > * {   c u r s o r :   " + o . c u r s o r + "   ! i m p o r t a n t ;   } < / s t y l e > "   ) . a p p e n d T o (   b o d y   ) ; 
 	 	 } 
 
 	 	 i f ( o . o p a c i t y )   {   / /   o p a c i t y   o p t i o n 
 	 	 	 i f   ( t h i s . h e l p e r . c s s ( " o p a c i t y " ) )   { 
 	 	 	 	 t h i s . _ s t o r e d O p a c i t y   =   t h i s . h e l p e r . c s s ( " o p a c i t y " ) ; 
 	 	 	 } 
 	 	 	 t h i s . h e l p e r . c s s ( " o p a c i t y " ,   o . o p a c i t y ) ; 
 	 	 } 
 
 	 	 i f ( o . z I n d e x )   {   / /   z I n d e x   o p t i o n 
 	 	 	 i f   ( t h i s . h e l p e r . c s s ( " z I n d e x " ) )   { 
 	 	 	 	 t h i s . _ s t o r e d Z I n d e x   =   t h i s . h e l p e r . c s s ( " z I n d e x " ) ; 
 	 	 	 } 
 	 	 	 t h i s . h e l p e r . c s s ( " z I n d e x " ,   o . z I n d e x ) ; 
 	 	 } 
 
 	 	 / / P r e p a r e   s c r o l l i n g 
 	 	 i f ( t h i s . s c r o l l P a r e n t [ 0 ]   ! = =   d o c u m e n t   & &   t h i s . s c r o l l P a r e n t [ 0 ] . t a g N a m e   ! = =   " H T M L " )   { 
 	 	 	 t h i s . o v e r f l o w O f f s e t   =   t h i s . s c r o l l P a r e n t . o f f s e t ( ) ; 
 	 	 } 
 
 	 	 / / C a l l   c a l l b a c k s 
 	 	 t h i s . _ t r i g g e r ( " s t a r t " ,   e v e n t ,   t h i s . _ u i H a s h ( ) ) ; 
 
 	 	 / / R e c a c h e   t h e   h e l p e r   s i z e 
 	 	 i f ( ! t h i s . _ p r e s e r v e H e l p e r P r o p o r t i o n s )   { 
 	 	 	 t h i s . _ c a c h e H e l p e r P r o p o r t i o n s ( ) ; 
 	 	 } 
 
 
 	 	 / / P o s t   " a c t i v a t e "   e v e n t s   t o   p o s s i b l e   c o n t a i n e r s 
 	 	 i f (   ! n o A c t i v a t i o n   )   { 
 	 	 	 f o r   (   i   =   t h i s . c o n t a i n e r s . l e n g t h   -   1 ;   i   > =   0 ;   i - -   )   { 
 	 	 	 	 t h i s . c o n t a i n e r s [   i   ] . _ t r i g g e r (   " a c t i v a t e " ,   e v e n t ,   t h i s . _ u i H a s h (   t h i s   )   ) ; 
 	 	 	 } 
 	 	 } 
 
 	 	 / / P r e p a r e   p o s s i b l e   d r o p p a b l e s 
 	 	 i f ( $ . u i . d d m a n a g e r )   { 
 	 	 	 $ . u i . d d m a n a g e r . c u r r e n t   =   t h i s ; 
 	 	 } 
 
 	 	 i f   ( $ . u i . d d m a n a g e r   & &   ! o . d r o p B e h a v i o u r )   { 
 	 	 	 $ . u i . d d m a n a g e r . p r e p a r e O f f s e t s ( t h i s ,   e v e n t ) ; 
 	 	 } 
 
 	 	 t h i s . d r a g g i n g   =   t r u e ; 
 
 	 	 t h i s . h e l p e r . a d d C l a s s ( " u i - s o r t a b l e - h e l p e r " ) ; 
 	 	 t h i s . _ m o u s e D r a g ( e v e n t ) ;   / / E x e c u t e   t h e   d r a g   o n c e   -   t h i s   c a u s e s   t h e   h e l p e r   n o t   t o   b e   v i s i b l e   b e f o r e   g e t t i n g   i t s   c o r r e c t   p o s i t i o n 
 	 	 r e t u r n   t r u e ; 
 
 	 } , 
 
 	 _ m o u s e D r a g :   f u n c t i o n ( e v e n t )   { 
 	 	 v a r   i ,   i t e m ,   i t e m E l e m e n t ,   i n t e r s e c t i o n , 
 	 	 	 o   =   t h i s . o p t i o n s , 
 	 	 	 s c r o l l e d   =   f a l s e ; 
 
 	 	 / / C o m p u t e   t h e   h e l p e r s   p o s i t i o n 
 	 	 t h i s . p o s i t i o n   =   t h i s . _ g e n e r a t e P o s i t i o n ( e v e n t ) ; 
 	 	 t h i s . p o s i t i o n A b s   =   t h i s . _ c o n v e r t P o s i t i o n T o ( " a b s o l u t e " ) ; 
 
 	 	 i f   ( ! t h i s . l a s t P o s i t i o n A b s )   { 
 	 	 	 t h i s . l a s t P o s i t i o n A b s   =   t h i s . p o s i t i o n A b s ; 
 	 	 } 
 
 	 	 / / D o   s c r o l l i n g 
 	 	 i f ( t h i s . o p t i o n s . s c r o l l )   { 
 	 	 	 i f ( t h i s . s c r o l l P a r e n t [ 0 ]   ! = =   d o c u m e n t   & &   t h i s . s c r o l l P a r e n t [ 0 ] . t a g N a m e   ! = =   " H T M L " )   { 
 
 	 	 	 	 i f ( ( t h i s . o v e r f l o w O f f s e t . t o p   +   t h i s . s c r o l l P a r e n t [ 0 ] . o f f s e t H e i g h t )   -   e v e n t . p a g e Y   <   o . s c r o l l S e n s i t i v i t y )   { 
 	 	 	 	 	 t h i s . s c r o l l P a r e n t [ 0 ] . s c r o l l T o p   =   s c r o l l e d   =   t h i s . s c r o l l P a r e n t [ 0 ] . s c r o l l T o p   +   o . s c r o l l S p e e d ; 
 	 	 	 	 }   e l s e   i f ( e v e n t . p a g e Y   -   t h i s . o v e r f l o w O f f s e t . t o p   <   o . s c r o l l S e n s i t i v i t y )   { 
 	 	 	 	 	 t h i s . s c r o l l P a r e n t [ 0 ] . s c r o l l T o p   =   s c r o l l e d   =   t h i s . s c r o l l P a r e n t [ 0 ] . s c r o l l T o p   -   o . s c r o l l S p e e d ; 
 	 	 	 	 } 
 
 	 	 	 	 i f ( ( t h i s . o v e r f l o w O f f s e t . l e f t   +   t h i s . s c r o l l P a r e n t [ 0 ] . o f f s e t W i d t h )   -   e v e n t . p a g e X   <   o . s c r o l l S e n s i t i v i t y )   { 
 	 	 	 	 	 t h i s . s c r o l l P a r e n t [ 0 ] . s c r o l l L e f t   =   s c r o l l e d   =   t h i s . s c r o l l P a r e n t [ 0 ] . s c r o l l L e f t   +   o . s c r o l l S p e e d ; 
 	 	 	 	 }   e l s e   i f ( e v e n t . p a g e X   -   t h i s . o v e r f l o w O f f s e t . l e f t   <   o . s c r o l l S e n s i t i v i t y )   { 
 	 	 	 	 	 t h i s . s c r o l l P a r e n t [ 0 ] . s c r o l l L e f t   =   s c r o l l e d   =   t h i s . s c r o l l P a r e n t [ 0 ] . s c r o l l L e f t   -   o . s c r o l l S p e e d ; 
 	 	 	 	 } 
 
 	 	 	 }   e l s e   { 
 
 	 	 	 	 i f ( e v e n t . p a g e Y   -   $ ( d o c u m e n t ) . s c r o l l T o p ( )   <   o . s c r o l l S e n s i t i v i t y )   { 
 	 	 	 	 	 s c r o l l e d   =   $ ( d o c u m e n t ) . s c r o l l T o p ( $ ( d o c u m e n t ) . s c r o l l T o p ( )   -   o . s c r o l l S p e e d ) ; 
 	 	 	 	 }   e l s e   i f ( $ ( w i n d o w ) . h e i g h t ( )   -   ( e v e n t . p a g e Y   -   $ ( d o c u m e n t ) . s c r o l l T o p ( ) )   <   o . s c r o l l S e n s i t i v i t y )   { 
 	 	 	 	 	 s c r o l l e d   =   $ ( d o c u m e n t ) . s c r o l l T o p ( $ ( d o c u m e n t ) . s c r o l l T o p ( )   +   o . s c r o l l S p e e d ) ; 
 	 	 	 	 } 
 
 	 	 	 	 i f ( e v e n t . p a g e X   -   $ ( d o c u m e n t ) . s c r o l l L e f t ( )   <   o . s c r o l l S e n s i t i v i t y )   { 
 	 	 	 	 	 s c r o l l e d   =   $ ( d o c u m e n t ) . s c r o l l L e f t ( $ ( d o c u m e n t ) . s c r o l l L e f t ( )   -   o . s c r o l l S p e e d ) ; 
 	 	 	 	 }   e l s e   i f ( $ ( w i n d o w ) . w i d t h ( )   -   ( e v e n t . p a g e X   -   $ ( d o c u m e n t ) . s c r o l l L e f t ( ) )   <   o . s c r o l l S e n s i t i v i t y )   { 
 	 	 	 	 	 s c r o l l e d   =   $ ( d o c u m e n t ) . s c r o l l L e f t ( $ ( d o c u m e n t ) . s c r o l l L e f t ( )   +   o . s c r o l l S p e e d ) ; 
 	 	 	 	 } 
 
 	 	 	 } 
 
 	 	 	 i f ( s c r o l l e d   ! = =   f a l s e   & &   $ . u i . d d m a n a g e r   & &   ! o . d r o p B e h a v i o u r )   { 
 	 	 	 	 $ . u i . d d m a n a g e r . p r e p a r e O f f s e t s ( t h i s ,   e v e n t ) ; 
 	 	 	 } 
 	 	 } 
 
 	 	 / / R e g e n e r a t e   t h e   a b s o l u t e   p o s i t i o n   u s e d   f o r   p o s i t i o n   c h e c k s 
 	 	 t h i s . p o s i t i o n A b s   =   t h i s . _ c o n v e r t P o s i t i o n T o ( " a b s o l u t e " ) ; 
 
 	 	 / / S e t   t h e   h e l p e r   p o s i t i o n 
 	 	 i f ( ! t h i s . o p t i o n s . a x i s   | |   t h i s . o p t i o n s . a x i s   ! = =   " y " )   { 
 	 	 	 t h i s . h e l p e r [ 0 ] . s t y l e . l e f t   =   t h i s . p o s i t i o n . l e f t + " p x " ; 
 	 	 } 
 	 	 i f ( ! t h i s . o p t i o n s . a x i s   | |   t h i s . o p t i o n s . a x i s   ! = =   " x " )   { 
 	 	 	 t h i s . h e l p e r [ 0 ] . s t y l e . t o p   =   t h i s . p o s i t i o n . t o p + " p x " ; 
 	 	 } 
 
 	 	 / / R e a r r a n g e 
 	 	 f o r   ( i   =   t h i s . i t e m s . l e n g t h   -   1 ;   i   > =   0 ;   i - - )   { 
 
 	 	 	 / / C a c h e   v a r i a b l e s   a n d   i n t e r s e c t i o n ,   c o n t i n u e   i f   n o   i n t e r s e c t i o n 
 	 	 	 i t e m   =   t h i s . i t e m s [ i ] ; 
 	 	 	 i t e m E l e m e n t   =   i t e m . i t e m [ 0 ] ; 
 	 	 	 i n t e r s e c t i o n   =   t h i s . _ i n t e r s e c t s W i t h P o i n t e r ( i t e m ) ; 
 	 	 	 i f   ( ! i n t e r s e c t i o n )   { 
 	 	 	 	 c o n t i n u e ; 
 	 	 	 } 
 
 	 	 	 / /   O n l y   p u t   t h e   p l a c e h o l d e r   i n s i d e   t h e   c u r r e n t   C o n t a i n e r ,   s k i p   a l l 
 	 	 	 / /   i t e m s   f o r m   o t h e r   c o n t a i n e r s .   T h i s   w o r k s   b e c a u s e   w h e n   m o v i n g 
 	 	 	 / /   a n   i t e m   f r o m   o n e   c o n t a i n e r   t o   a n o t h e r   t h e 
 	 	 	 / /   c u r r e n t C o n t a i n e r   i s   s w i t c h e d   b e f o r e   t h e   p l a c e h o l d e r   i s   m o v e d . 
 	 	 	 / / 
 	 	 	 / /   W i t h o u t   t h i s   m o v i n g   i t e m s   i n   " s u b - s o r t a b l e s "   c a n   c a u s e   t h e   p l a c e h o l d e r   t o   j i t t e r 
 	 	 	 / /   b e e t w e e n   t h e   o u t e r   a n d   i n n e r   c o n t a i n e r . 
 	 	 	 i f   ( i t e m . i n s t a n c e   ! = =   t h i s . c u r r e n t C o n t a i n e r )   { 
 	 	 	 	 c o n t i n u e ; 
 	 	 	 } 
 
 	 	 	 / /   c a n n o t   i n t e r s e c t   w i t h   i t s e l f 
 	 	 	 / /   n o   u s e l e s s   a c t i o n s   t h a t   h a v e   b e e n   d o n e   b e f o r e 
 	 	 	 / /   n o   a c t i o n   i f   t h e   i t e m   m o v e d   i s   t h e   p a r e n t   o f   t h e   i t e m   c h e c k e d 
 	 	 	 i f   ( i t e m E l e m e n t   ! = =   t h i s . c u r r e n t I t e m [ 0 ]   & & 
 	 	 	 	 t h i s . p l a c e h o l d e r [ i n t e r s e c t i o n   = = =   1   ?   " n e x t "   :   " p r e v " ] ( ) [ 0 ]   ! = =   i t e m E l e m e n t   & & 
 	 	 	 	 ! $ . c o n t a i n s ( t h i s . p l a c e h o l d e r [ 0 ] ,   i t e m E l e m e n t )   & & 
 	 	 	 	 ( t h i s . o p t i o n s . t y p e   = = =   " s e m i - d y n a m i c "   ?   ! $ . c o n t a i n s ( t h i s . e l e m e n t [ 0 ] ,   i t e m E l e m e n t )   :   t r u e ) 
 	 	 	 )   { 
 
 	 	 	 	 t h i s . d i r e c t i o n   =   i n t e r s e c t i o n   = = =   1   ?   " d o w n "   :   " u p " ; 
 
 	 	 	 	 i f   ( t h i s . o p t i o n s . t o l e r a n c e   = = =   " p o i n t e r "   | |   t h i s . _ i n t e r s e c t s W i t h S i d e s ( i t e m ) )   { 
 	 	 	 	 	 t h i s . _ r e a r r a n g e ( e v e n t ,   i t e m ) ; 
 	 	 	 	 }   e l s e   { 
 	 	 	 	 	 b r e a k ; 
 	 	 	 	 } 
 
 	 	 	 	 t h i s . _ t r i g g e r ( " c h a n g e " ,   e v e n t ,   t h i s . _ u i H a s h ( ) ) ; 
 	 	 	 	 b r e a k ; 
 	 	 	 } 
 	 	 } 
 
 	 	 / / P o s t   e v e n t s   t o   c o n t a i n e r s 
 	 	 t h i s . _ c o n t a c t C o n t a i n e r s ( e v e n t ) ; 
 
 	 	 / / I n t e r c o n n e c t   w i t h   d r o p p a b l e s 
 	 	 i f ( $ . u i . d d m a n a g e r )   { 
 	 	 	 $ . u i . d d m a n a g e r . d r a g ( t h i s ,   e v e n t ) ; 
 	 	 } 
 
 	 	 / / C a l l   c a l l b a c k s 
 	 	 t h i s . _ t r i g g e r ( " s o r t " ,   e v e n t ,   t h i s . _ u i H a s h ( ) ) ; 
 
 	 	 t h i s . l a s t P o s i t i o n A b s   =   t h i s . p o s i t i o n A b s ; 
 	 	 r e t u r n   f a l s e ; 
 
 	 } , 
 
 	 _ m o u s e S t o p :   f u n c t i o n ( e v e n t ,   n o P r o p a g a t i o n )   { 
 
 	 	 i f ( ! e v e n t )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 / / I f   w e   a r e   u s i n g   d r o p p a b l e s ,   i n f o r m   t h e   m a n a g e r   a b o u t   t h e   d r o p 
 	 	 i f   ( $ . u i . d d m a n a g e r   & &   ! t h i s . o p t i o n s . d r o p B e h a v i o u r )   { 
 	 	 	 $ . u i . d d m a n a g e r . d r o p ( t h i s ,   e v e n t ) ; 
 	 	 } 
 
 	 	 i f ( t h i s . o p t i o n s . r e v e r t )   { 
 	 	 	 v a r   t h a t   =   t h i s , 
 	 	 	 	 c u r   =   t h i s . p l a c e h o l d e r . o f f s e t ( ) , 
 	 	 	 	 a x i s   =   t h i s . o p t i o n s . a x i s , 
 	 	 	 	 a n i m a t i o n   =   { } ; 
 
 	 	 	 i f   (   ! a x i s   | |   a x i s   = = =   " x "   )   { 
 	 	 	 	 a n i m a t i o n . l e f t   =   c u r . l e f t   -   t h i s . o f f s e t . p a r e n t . l e f t   -   t h i s . m a r g i n s . l e f t   +   ( t h i s . o f f s e t P a r e n t [ 0 ]   = = =   d o c u m e n t . b o d y   ?   0   :   t h i s . o f f s e t P a r e n t [ 0 ] . s c r o l l L e f t ) ; 
 	 	 	 } 
 	 	 	 i f   (   ! a x i s   | |   a x i s   = = =   " y "   )   { 
 	 	 	 	 a n i m a t i o n . t o p   =   c u r . t o p   -   t h i s . o f f s e t . p a r e n t . t o p   -   t h i s . m a r g i n s . t o p   +   ( t h i s . o f f s e t P a r e n t [ 0 ]   = = =   d o c u m e n t . b o d y   ?   0   :   t h i s . o f f s e t P a r e n t [ 0 ] . s c r o l l T o p ) ; 
 	 	 	 } 
 	 	 	 t h i s . r e v e r t i n g   =   t r u e ; 
 	 	 	 $ ( t h i s . h e l p e r ) . a n i m a t e (   a n i m a t i o n ,   p a r s e I n t ( t h i s . o p t i o n s . r e v e r t ,   1 0 )   | |   5 0 0 ,   f u n c t i o n ( )   { 
 	 	 	 	 t h a t . _ c l e a r ( e v e n t ) ; 
 	 	 	 } ) ; 
 	 	 }   e l s e   { 
 	 	 	 t h i s . _ c l e a r ( e v e n t ,   n o P r o p a g a t i o n ) ; 
 	 	 } 
 
 	 	 r e t u r n   f a l s e ; 
 
 	 } , 
 
 	 c a n c e l :   f u n c t i o n ( )   { 
 
 	 	 i f ( t h i s . d r a g g i n g )   { 
 
 	 	 	 t h i s . _ m o u s e U p ( {   t a r g e t :   n u l l   } ) ; 
 
 	 	 	 i f ( t h i s . o p t i o n s . h e l p e r   = = =   " o r i g i n a l " )   { 
 	 	 	 	 t h i s . c u r r e n t I t e m . c s s ( t h i s . _ s t o r e d C S S ) . r e m o v e C l a s s ( " u i - s o r t a b l e - h e l p e r " ) ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 t h i s . c u r r e n t I t e m . s h o w ( ) ; 
 	 	 	 } 
 
 	 	 	 / / P o s t   d e a c t i v a t i n g   e v e n t s   t o   c o n t a i n e r s 
 	 	 	 f o r   ( v a r   i   =   t h i s . c o n t a i n e r s . l e n g t h   -   1 ;   i   > =   0 ;   i - - ) { 
 	 	 	 	 t h i s . c o n t a i n e r s [ i ] . _ t r i g g e r ( " d e a c t i v a t e " ,   n u l l ,   t h i s . _ u i H a s h ( t h i s ) ) ; 
 	 	 	 	 i f ( t h i s . c o n t a i n e r s [ i ] . c o n t a i n e r C a c h e . o v e r )   { 
 	 	 	 	 	 t h i s . c o n t a i n e r s [ i ] . _ t r i g g e r ( " o u t " ,   n u l l ,   t h i s . _ u i H a s h ( t h i s ) ) ; 
 	 	 	 	 	 t h i s . c o n t a i n e r s [ i ] . c o n t a i n e r C a c h e . o v e r   =   0 ; 
 	 	 	 	 } 
 	 	 	 } 
 
 	 	 } 
 
 	 	 i f   ( t h i s . p l a c e h o l d e r )   { 
 	 	 	 / / $ ( t h i s . p l a c e h o l d e r [ 0 ] ) . r e m o v e ( ) ;   w o u l d   h a v e   b e e n   t h e   j Q u e r y   w a y   -   u n f o r t u n a t e l y ,   i t   u n b i n d s   A L L   e v e n t s   f r o m   t h e   o r i g i n a l   n o d e ! 
 	 	 	 i f ( t h i s . p l a c e h o l d e r [ 0 ] . p a r e n t N o d e )   { 
 	 	 	 	 t h i s . p l a c e h o l d e r [ 0 ] . p a r e n t N o d e . r e m o v e C h i l d ( t h i s . p l a c e h o l d e r [ 0 ] ) ; 
 	 	 	 } 
 	 	 	 i f ( t h i s . o p t i o n s . h e l p e r   ! = =   " o r i g i n a l "   & &   t h i s . h e l p e r   & &   t h i s . h e l p e r [ 0 ] . p a r e n t N o d e )   { 
 	 	 	 	 t h i s . h e l p e r . r e m o v e ( ) ; 
 	 	 	 } 
 
 	 	 	 $ . e x t e n d ( t h i s ,   { 
 	 	 	 	 h e l p e r :   n u l l , 
 	 	 	 	 d r a g g i n g :   f a l s e , 
 	 	 	 	 r e v e r t i n g :   f a l s e , 
 	 	 	 	 _ n o F i n a l S o r t :   n u l l 
 	 	 	 } ) ; 
 
 	 	 	 i f ( t h i s . d o m P o s i t i o n . p r e v )   { 
 	 	 	 	 $ ( t h i s . d o m P o s i t i o n . p r e v ) . a f t e r ( t h i s . c u r r e n t I t e m ) ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 $ ( t h i s . d o m P o s i t i o n . p a r e n t ) . p r e p e n d ( t h i s . c u r r e n t I t e m ) ; 
 	 	 	 } 
 	 	 } 
 
 	 	 r e t u r n   t h i s ; 
 
 	 } , 
 
 	 s e r i a l i z e :   f u n c t i o n ( o )   { 
 
 	 	 v a r   i t e m s   =   t h i s . _ g e t I t e m s A s j Q u e r y ( o   & &   o . c o n n e c t e d ) , 
 	 	 	 s t r   =   [ ] ; 
 	 	 o   =   o   | |   { } ; 
 
 	 	 $ ( i t e m s ) . e a c h ( f u n c t i o n ( )   { 
 	 	 	 v a r   r e s   =   ( $ ( o . i t e m   | |   t h i s ) . a t t r ( o . a t t r i b u t e   | |   " i d " )   | |   " " ) . m a t c h ( o . e x p r e s s i o n   | |   ( / ( . + ) [ \ - = _ ] ( . + ) / ) ) ; 
 	 	 	 i f   ( r e s )   { 
 	 	 	 	 s t r . p u s h ( ( o . k e y   | |   r e s [ 1 ] + " [ ] " ) + " = " + ( o . k e y   & &   o . e x p r e s s i o n   ?   r e s [ 1 ]   :   r e s [ 2 ] ) ) ; 
 	 	 	 } 
 	 	 } ) ; 
 
 	 	 i f ( ! s t r . l e n g t h   & &   o . k e y )   { 
 	 	 	 s t r . p u s h ( o . k e y   +   " = " ) ; 
 	 	 } 
 
 	 	 r e t u r n   s t r . j o i n ( " & " ) ; 
 
 	 } , 
 
 	 t o A r r a y :   f u n c t i o n ( o )   { 
 
 	 	 v a r   i t e m s   =   t h i s . _ g e t I t e m s A s j Q u e r y ( o   & &   o . c o n n e c t e d ) , 
 	 	 	 r e t   =   [ ] ; 
 
 	 	 o   =   o   | |   { } ; 
 
 	 	 i t e m s . e a c h ( f u n c t i o n ( )   {   r e t . p u s h ( $ ( o . i t e m   | |   t h i s ) . a t t r ( o . a t t r i b u t e   | |   " i d " )   | |   " " ) ;   } ) ; 
 	 	 r e t u r n   r e t ; 
 
 	 } , 
 
 	 / *   B e   c a r e f u l   w i t h   t h e   f o l l o w i n g   c o r e   f u n c t i o n s   * / 
 	 _ i n t e r s e c t s W i t h :   f u n c t i o n ( i t e m )   { 
 
 	 	 v a r   x 1   =   t h i s . p o s i t i o n A b s . l e f t , 
 	 	 	 x 2   =   x 1   +   t h i s . h e l p e r P r o p o r t i o n s . w i d t h , 
 	 	 	 y 1   =   t h i s . p o s i t i o n A b s . t o p , 
 	 	 	 y 2   =   y 1   +   t h i s . h e l p e r P r o p o r t i o n s . h e i g h t , 
 	 	 	 l   =   i t e m . l e f t , 
 	 	 	 r   =   l   +   i t e m . w i d t h , 
 	 	 	 t   =   i t e m . t o p , 
 	 	 	 b   =   t   +   i t e m . h e i g h t , 
 	 	 	 d y C l i c k   =   t h i s . o f f s e t . c l i c k . t o p , 
 	 	 	 d x C l i c k   =   t h i s . o f f s e t . c l i c k . l e f t , 
 	 	 	 i s O v e r E l e m e n t H e i g h t   =   (   t h i s . o p t i o n s . a x i s   = = =   " x "   )   | |   (   (   y 1   +   d y C l i c k   )   >   t   & &   (   y 1   +   d y C l i c k   )   <   b   ) , 
 	 	 	 i s O v e r E l e m e n t W i d t h   =   (   t h i s . o p t i o n s . a x i s   = = =   " y "   )   | |   (   (   x 1   +   d x C l i c k   )   >   l   & &   (   x 1   +   d x C l i c k   )   <   r   ) , 
 	 	 	 i s O v e r E l e m e n t   =   i s O v e r E l e m e n t H e i g h t   & &   i s O v e r E l e m e n t W i d t h ; 
 
 	 	 i f   (   t h i s . o p t i o n s . t o l e r a n c e   = = =   " p o i n t e r "   | | 
 	 	 	 t h i s . o p t i o n s . f o r c e P o i n t e r F o r C o n t a i n e r s   | | 
 	 	 	 ( t h i s . o p t i o n s . t o l e r a n c e   ! = =   " p o i n t e r "   & &   t h i s . h e l p e r P r o p o r t i o n s [ t h i s . f l o a t i n g   ?   " w i d t h "   :   " h e i g h t " ]   >   i t e m [ t h i s . f l o a t i n g   ?   " w i d t h "   :   " h e i g h t " ] ) 
 	 	 )   { 
 	 	 	 r e t u r n   i s O v e r E l e m e n t ; 
 	 	 }   e l s e   { 
 
 	 	 	 r e t u r n   ( l   <   x 1   +   ( t h i s . h e l p e r P r o p o r t i o n s . w i d t h   /   2 )   & &   / /   R i g h t   H a l f 
 	 	 	 	 x 2   -   ( t h i s . h e l p e r P r o p o r t i o n s . w i d t h   /   2 )   <   r   & &   / /   L e f t   H a l f 
 	 	 	 	 t   <   y 1   +   ( t h i s . h e l p e r P r o p o r t i o n s . h e i g h t   /   2 )   & &   / /   B o t t o m   H a l f 
 	 	 	 	 y 2   -   ( t h i s . h e l p e r P r o p o r t i o n s . h e i g h t   /   2 )   <   b   ) ;   / /   T o p   H a l f 
 
 	 	 } 
 	 } , 
 
 	 _ i n t e r s e c t s W i t h P o i n t e r :   f u n c t i o n ( i t e m )   { 
 
 	 	 v a r   i s O v e r E l e m e n t H e i g h t   =   ( t h i s . o p t i o n s . a x i s   = = =   " x " )   | |   i s O v e r A x i s ( t h i s . p o s i t i o n A b s . t o p   +   t h i s . o f f s e t . c l i c k . t o p ,   i t e m . t o p ,   i t e m . h e i g h t ) , 
 	 	 	 i s O v e r E l e m e n t W i d t h   =   ( t h i s . o p t i o n s . a x i s   = = =   " y " )   | |   i s O v e r A x i s ( t h i s . p o s i t i o n A b s . l e f t   +   t h i s . o f f s e t . c l i c k . l e f t ,   i t e m . l e f t ,   i t e m . w i d t h ) , 
 	 	 	 i s O v e r E l e m e n t   =   i s O v e r E l e m e n t H e i g h t   & &   i s O v e r E l e m e n t W i d t h , 
 	 	 	 v e r t i c a l D i r e c t i o n   =   t h i s . _ g e t D r a g V e r t i c a l D i r e c t i o n ( ) , 
 	 	 	 h o r i z o n t a l D i r e c t i o n   =   t h i s . _ g e t D r a g H o r i z o n t a l D i r e c t i o n ( ) ; 
 
 	 	 i f   ( ! i s O v e r E l e m e n t )   { 
 	 	 	 r e t u r n   f a l s e ; 
 	 	 } 
 
 	 	 r e t u r n   t h i s . f l o a t i n g   ? 
 	 	 	 (   ( ( h o r i z o n t a l D i r e c t i o n   & &   h o r i z o n t a l D i r e c t i o n   = = =   " r i g h t " )   | |   v e r t i c a l D i r e c t i o n   = = =   " d o w n " )   ?   2   :   1   ) 
 	 	 	 :   (   v e r t i c a l D i r e c t i o n   & &   ( v e r t i c a l D i r e c t i o n   = = =   " d o w n "   ?   2   :   1 )   ) ; 
 
 	 } , 
 
 	 _ i n t e r s e c t s W i t h S i d e s :   f u n c t i o n ( i t e m )   { 
 
 	 	 v a r   i s O v e r B o t t o m H a l f   =   i s O v e r A x i s ( t h i s . p o s i t i o n A b s . t o p   +   t h i s . o f f s e t . c l i c k . t o p ,   i t e m . t o p   +   ( i t e m . h e i g h t / 2 ) ,   i t e m . h e i g h t ) , 
 	 	 	 i s O v e r R i g h t H a l f   =   i s O v e r A x i s ( t h i s . p o s i t i o n A b s . l e f t   +   t h i s . o f f s e t . c l i c k . l e f t ,   i t e m . l e f t   +   ( i t e m . w i d t h / 2 ) ,   i t e m . w i d t h ) , 
 	 	 	 v e r t i c a l D i r e c t i o n   =   t h i s . _ g e t D r a g V e r t i c a l D i r e c t i o n ( ) , 
 	 	 	 h o r i z o n t a l D i r e c t i o n   =   t h i s . _ g e t D r a g H o r i z o n t a l D i r e c t i o n ( ) ; 
 
 	 	 i f   ( t h i s . f l o a t i n g   & &   h o r i z o n t a l D i r e c t i o n )   { 
 	 	 	 r e t u r n   ( ( h o r i z o n t a l D i r e c t i o n   = = =   " r i g h t "   & &   i s O v e r R i g h t H a l f )   | |   ( h o r i z o n t a l D i r e c t i o n   = = =   " l e f t "   & &   ! i s O v e r R i g h t H a l f ) ) ; 
 	 	 }   e l s e   { 
 	 	 	 r e t u r n   v e r t i c a l D i r e c t i o n   & &   ( ( v e r t i c a l D i r e c t i o n   = = =   " d o w n "   & &   i s O v e r B o t t o m H a l f )   | |   ( v e r t i c a l D i r e c t i o n   = = =   " u p "   & &   ! i s O v e r B o t t o m H a l f ) ) ; 
 	 	 } 
 
 	 } , 
 
 	 _ g e t D r a g V e r t i c a l D i r e c t i o n :   f u n c t i o n ( )   { 
 	 	 v a r   d e l t a   =   t h i s . p o s i t i o n A b s . t o p   -   t h i s . l a s t P o s i t i o n A b s . t o p ; 
 	 	 r e t u r n   d e l t a   ! = =   0   & &   ( d e l t a   >   0   ?   " d o w n "   :   " u p " ) ; 
 	 } , 
 
 	 _ g e t D r a g H o r i z o n t a l D i r e c t i o n :   f u n c t i o n ( )   { 
 	 	 v a r   d e l t a   =   t h i s . p o s i t i o n A b s . l e f t   -   t h i s . l a s t P o s i t i o n A b s . l e f t ; 
 	 	 r e t u r n   d e l t a   ! = =   0   & &   ( d e l t a   >   0   ?   " r i g h t "   :   " l e f t " ) ; 
 	 } , 
 
 	 r e f r e s h :   f u n c t i o n ( e v e n t )   { 
 	 	 t h i s . _ r e f r e s h I t e m s ( e v e n t ) ; 
 	 	 t h i s . r e f r e s h P o s i t i o n s ( ) ; 
 	 	 r e t u r n   t h i s ; 
 	 } , 
 
 	 _ c o n n e c t W i t h :   f u n c t i o n ( )   { 
 	 	 v a r   o p t i o n s   =   t h i s . o p t i o n s ; 
 	 	 r e t u r n   o p t i o n s . c o n n e c t W i t h . c o n s t r u c t o r   = = =   S t r i n g   ?   [ o p t i o n s . c o n n e c t W i t h ]   :   o p t i o n s . c o n n e c t W i t h ; 
 	 } , 
 
 	 _ g e t I t e m s A s j Q u e r y :   f u n c t i o n ( c o n n e c t e d )   { 
 
 	 	 v a r   i ,   j ,   c u r ,   i n s t , 
 	 	 	 i t e m s   =   [ ] , 
 	 	 	 q u e r i e s   =   [ ] , 
 	 	 	 c o n n e c t W i t h   =   t h i s . _ c o n n e c t W i t h ( ) ; 
 
 	 	 i f ( c o n n e c t W i t h   & &   c o n n e c t e d )   { 
 	 	 	 f o r   ( i   =   c o n n e c t W i t h . l e n g t h   -   1 ;   i   > =   0 ;   i - - ) { 
 	 	 	 	 c u r   =   $ ( c o n n e c t W i t h [ i ] ) ; 
 	 	 	 	 f o r   (   j   =   c u r . l e n g t h   -   1 ;   j   > =   0 ;   j - - ) { 
 	 	 	 	 	 i n s t   =   $ . d a t a ( c u r [ j ] ,   t h i s . w i d g e t F u l l N a m e ) ; 
 	 	 	 	 	 i f ( i n s t   & &   i n s t   ! = =   t h i s   & &   ! i n s t . o p t i o n s . d i s a b l e d )   { 
 	 	 	 	 	 	 q u e r i e s . p u s h ( [ $ . i s F u n c t i o n ( i n s t . o p t i o n s . i t e m s )   ?   i n s t . o p t i o n s . i t e m s . c a l l ( i n s t . e l e m e n t )   :   $ ( i n s t . o p t i o n s . i t e m s ,   i n s t . e l e m e n t ) . n o t ( " . u i - s o r t a b l e - h e l p e r " ) . n o t ( " . u i - s o r t a b l e - p l a c e h o l d e r " ) ,   i n s t ] ) ; 
 	 	 	 	 	 } 
 	 	 	 	 } 
 	 	 	 } 
 	 	 } 
 
 	 	 q u e r i e s . p u s h ( [ $ . i s F u n c t i o n ( t h i s . o p t i o n s . i t e m s )   ?   t h i s . o p t i o n s . i t e m s . c a l l ( t h i s . e l e m e n t ,   n u l l ,   {   o p t i o n s :   t h i s . o p t i o n s ,   i t e m :   t h i s . c u r r e n t I t e m   } )   :   $ ( t h i s . o p t i o n s . i t e m s ,   t h i s . e l e m e n t ) . n o t ( " . u i - s o r t a b l e - h e l p e r " ) . n o t ( " . u i - s o r t a b l e - p l a c e h o l d e r " ) ,   t h i s ] ) ; 
 
 	 	 f o r   ( i   =   q u e r i e s . l e n g t h   -   1 ;   i   > =   0 ;   i - - ) { 
 	 	 	 q u e r i e s [ i ] [ 0 ] . e a c h ( f u n c t i o n ( )   { 
 	 	 	 	 i t e m s . p u s h ( t h i s ) ; 
 	 	 	 } ) ; 
 	 	 } 
 
 	 	 r e t u r n   $ ( i t e m s ) ; 
 
 	 } , 
 
 	 _ r e m o v e C u r r e n t s F r o m I t e m s :   f u n c t i o n ( )   { 
 
 	 	 v a r   l i s t   =   t h i s . c u r r e n t I t e m . f i n d ( " : d a t a ( "   +   t h i s . w i d g e t N a m e   +   " - i t e m ) " ) ; 
 
 	 	 t h i s . i t e m s   =   $ . g r e p ( t h i s . i t e m s ,   f u n c t i o n   ( i t e m )   { 
 	 	 	 f o r   ( v a r   j = 0 ;   j   <   l i s t . l e n g t h ;   j + + )   { 
 	 	 	 	 i f ( l i s t [ j ]   = = =   i t e m . i t e m [ 0 ] )   { 
 	 	 	 	 	 r e t u r n   f a l s e ; 
 	 	 	 	 } 
 	 	 	 } 
 	 	 	 r e t u r n   t r u e ; 
 	 	 } ) ; 
 
 	 } , 
 
 	 _ r e f r e s h I t e m s :   f u n c t i o n ( e v e n t )   { 
 
 	 	 t h i s . i t e m s   =   [ ] ; 
 	 	 t h i s . c o n t a i n e r s   =   [ t h i s ] ; 
 
 	 	 v a r   i ,   j ,   c u r ,   i n s t ,   t a r g e t D a t a ,   _ q u e r i e s ,   i t e m ,   q u e r i e s L e n g t h , 
 	 	 	 i t e m s   =   t h i s . i t e m s , 
 	 	 	 q u e r i e s   =   [ [ $ . i s F u n c t i o n ( t h i s . o p t i o n s . i t e m s )   ?   t h i s . o p t i o n s . i t e m s . c a l l ( t h i s . e l e m e n t [ 0 ] ,   e v e n t ,   {   i t e m :   t h i s . c u r r e n t I t e m   } )   :   $ ( t h i s . o p t i o n s . i t e m s ,   t h i s . e l e m e n t ) ,   t h i s ] ] , 
 	 	 	 c o n n e c t W i t h   =   t h i s . _ c o n n e c t W i t h ( ) ; 
 
 	 	 i f ( c o n n e c t W i t h   & &   t h i s . r e a d y )   {   / / S h o u l d n ' t   b e   r u n   t h e   f i r s t   t i m e   t h r o u g h   d u e   t o   m a s s i v e   s l o w - d o w n 
 	 	 	 f o r   ( i   =   c o n n e c t W i t h . l e n g t h   -   1 ;   i   > =   0 ;   i - - ) { 
 	 	 	 	 c u r   =   $ ( c o n n e c t W i t h [ i ] ) ; 
 	 	 	 	 f o r   ( j   =   c u r . l e n g t h   -   1 ;   j   > =   0 ;   j - - ) { 
 	 	 	 	 	 i n s t   =   $ . d a t a ( c u r [ j ] ,   t h i s . w i d g e t F u l l N a m e ) ; 
 	 	 	 	 	 i f ( i n s t   & &   i n s t   ! = =   t h i s   & &   ! i n s t . o p t i o n s . d i s a b l e d )   { 
 	 	 	 	 	 	 q u e r i e s . p u s h ( [ $ . i s F u n c t i o n ( i n s t . o p t i o n s . i t e m s )   ?   i n s t . o p t i o n s . i t e m s . c a l l ( i n s t . e l e m e n t [ 0 ] ,   e v e n t ,   {   i t e m :   t h i s . c u r r e n t I t e m   } )   :   $ ( i n s t . o p t i o n s . i t e m s ,   i n s t . e l e m e n t ) ,   i n s t ] ) ; 
 	 	 	 	 	 	 t h i s . c o n t a i n e r s . p u s h ( i n s t ) ; 
 	 	 	 	 	 } 
 	 	 	 	 } 
 	 	 	 } 
 	 	 } 
 
 	 	 f o r   ( i   =   q u e r i e s . l e n g t h   -   1 ;   i   > =   0 ;   i - - )   { 
 	 	 	 t a r g e t D a t a   =   q u e r i e s [ i ] [ 1 ] ; 
 	 	 	 _ q u e r i e s   =   q u e r i e s [ i ] [ 0 ] ; 
 
 	 	 	 f o r   ( j = 0 ,   q u e r i e s L e n g t h   =   _ q u e r i e s . l e n g t h ;   j   <   q u e r i e s L e n g t h ;   j + + )   { 
 	 	 	 	 i t e m   =   $ ( _ q u e r i e s [ j ] ) ; 
 
 	 	 	 	 i t e m . d a t a ( t h i s . w i d g e t N a m e   +   " - i t e m " ,   t a r g e t D a t a ) ;   / /   D a t a   f o r   t a r g e t   c h e c k i n g   ( m o u s e   m a n a g e r ) 
 
 	 	 	 	 i t e m s . p u s h ( { 
 	 	 	 	 	 i t e m :   i t e m , 
 	 	 	 	 	 i n s t a n c e :   t a r g e t D a t a , 
 	 	 	 	 	 w i d t h :   0 ,   h e i g h t :   0 , 
 	 	 	 	 	 l e f t :   0 ,   t o p :   0 
 	 	 	 	 } ) ; 
 	 	 	 } 
 	 	 } 
 
 	 } , 
 
 	 r e f r e s h P o s i t i o n s :   f u n c t i o n ( f a s t )   { 
 
 	 	 / / T h i s   h a s   t o   b e   r e d o n e   b e c a u s e   d u e   t o   t h e   i t e m   b e i n g   m o v e d   o u t / i n t o   t h e   o f f s e t P a r e n t ,   t h e   o f f s e t P a r e n t ' s   p o s i t i o n   w i l l   c h a n g e 
 	 	 i f ( t h i s . o f f s e t P a r e n t   & &   t h i s . h e l p e r )   { 
 	 	 	 t h i s . o f f s e t . p a r e n t   =   t h i s . _ g e t P a r e n t O f f s e t ( ) ; 
 	 	 } 
 
 	 	 v a r   i ,   i t e m ,   t ,   p ; 
 
 	 	 f o r   ( i   =   t h i s . i t e m s . l e n g t h   -   1 ;   i   > =   0 ;   i - - ) { 
 	 	 	 i t e m   =   t h i s . i t e m s [ i ] ; 
 
 	 	 	 / / W e   i g n o r e   c a l c u l a t i n g   p o s i t i o n s   o f   a l l   c o n n e c t e d   c o n t a i n e r s   w h e n   w e ' r e   n o t   o v e r   t h e m 
 	 	 	 i f ( i t e m . i n s t a n c e   ! = =   t h i s . c u r r e n t C o n t a i n e r   & &   t h i s . c u r r e n t C o n t a i n e r   & &   i t e m . i t e m [ 0 ]   ! = =   t h i s . c u r r e n t I t e m [ 0 ] )   { 
 	 	 	 	 c o n t i n u e ; 
 	 	 	 } 
 
 	 	 	 t   =   t h i s . o p t i o n s . t o l e r a n c e E l e m e n t   ?   $ ( t h i s . o p t i o n s . t o l e r a n c e E l e m e n t ,   i t e m . i t e m )   :   i t e m . i t e m ; 
 
 	 	 	 i f   ( ! f a s t )   { 
 	 	 	 	 i t e m . w i d t h   =   t . o u t e r W i d t h ( ) ; 
 	 	 	 	 i t e m . h e i g h t   =   t . o u t e r H e i g h t ( ) ; 
 	 	 	 } 
 
 	 	 	 p   =   t . o f f s e t ( ) ; 
 	 	 	 i t e m . l e f t   =   p . l e f t ; 
 	 	 	 i t e m . t o p   =   p . t o p ; 
 	 	 } 
 
 	 	 i f ( t h i s . o p t i o n s . c u s t o m   & &   t h i s . o p t i o n s . c u s t o m . r e f r e s h C o n t a i n e r s )   { 
 	 	 	 t h i s . o p t i o n s . c u s t o m . r e f r e s h C o n t a i n e r s . c a l l ( t h i s ) ; 
 	 	 }   e l s e   { 
 	 	 	 f o r   ( i   =   t h i s . c o n t a i n e r s . l e n g t h   -   1 ;   i   > =   0 ;   i - - ) { 
 	 	 	 	 p   =   t h i s . c o n t a i n e r s [ i ] . e l e m e n t . o f f s e t ( ) ; 
 	 	 	 	 t h i s . c o n t a i n e r s [ i ] . c o n t a i n e r C a c h e . l e f t   =   p . l e f t ; 
 	 	 	 	 t h i s . c o n t a i n e r s [ i ] . c o n t a i n e r C a c h e . t o p   =   p . t o p ; 
 	 	 	 	 t h i s . c o n t a i n e r s [ i ] . c o n t a i n e r C a c h e . w i d t h 	 =   t h i s . c o n t a i n e r s [ i ] . e l e m e n t . o u t e r W i d t h ( ) ; 
 	 	 	 	 t h i s . c o n t a i n e r s [ i ] . c o n t a i n e r C a c h e . h e i g h t   =   t h i s . c o n t a i n e r s [ i ] . e l e m e n t . o u t e r H e i g h t ( ) ; 
 	 	 	 } 
 	 	 } 
 
 	 	 r e t u r n   t h i s ; 
 	 } , 
 
 	 _ c r e a t e P l a c e h o l d e r :   f u n c t i o n ( t h a t )   { 
 	 	 t h a t   =   t h a t   | |   t h i s ; 
 	 	 v a r   c l a s s N a m e , 
 	 	 	 o   =   t h a t . o p t i o n s ; 
 
 	 	 i f ( ! o . p l a c e h o l d e r   | |   o . p l a c e h o l d e r . c o n s t r u c t o r   = = =   S t r i n g )   { 
 	 	 	 c l a s s N a m e   =   o . p l a c e h o l d e r ; 
 	 	 	 o . p l a c e h o l d e r   =   { 
 	 	 	 	 e l e m e n t :   f u n c t i o n ( )   { 
 
 	 	 	 	 	 v a r   n o d e N a m e   =   t h a t . c u r r e n t I t e m [ 0 ] . n o d e N a m e . t o L o w e r C a s e ( ) , 
 	 	 	 	 	 	 e l e m e n t   =   $ (   " < "   +   n o d e N a m e   +   " > " ,   t h a t . d o c u m e n t [ 0 ]   ) 
 	 	 	 	 	 	 	 . a d d C l a s s ( c l a s s N a m e   | |   t h a t . c u r r e n t I t e m [ 0 ] . c l a s s N a m e + "   u i - s o r t a b l e - p l a c e h o l d e r " ) 
 	 	 	 	 	 	 	 . r e m o v e C l a s s ( " u i - s o r t a b l e - h e l p e r " ) ; 
 
 	 	 	 	 	 i f   (   n o d e N a m e   = = =   " t r "   )   { 
 	 	 	 	 	 	 t h a t . c u r r e n t I t e m . c h i l d r e n ( ) . e a c h ( f u n c t i o n ( )   { 
 	 	 	 	 	 	 	 $ (   " < t d > & # 1 6 0 ; < / t d > " ,   t h a t . d o c u m e n t [ 0 ]   ) 
 	 	 	 	 	 	 	 	 . a t t r (   " c o l s p a n " ,   $ (   t h i s   ) . a t t r (   " c o l s p a n "   )   | |   1   ) 
 	 	 	 	 	 	 	 	 . a p p e n d T o (   e l e m e n t   ) ; 
 	 	 	 	 	 	 } ) ; 
 	 	 	 	 	 }   e l s e   i f   (   n o d e N a m e   = = =   " i m g "   )   { 
 	 	 	 	 	 	 e l e m e n t . a t t r (   " s r c " ,   t h a t . c u r r e n t I t e m . a t t r (   " s r c "   )   ) ; 
 	 	 	 	 	 } 
 
 	 	 	 	 	 i f   (   ! c l a s s N a m e   )   { 
 	 	 	 	 	 	 e l e m e n t . c s s (   " v i s i b i l i t y " ,   " h i d d e n "   ) ; 
 	 	 	 	 	 } 
 
 	 	 	 	 	 r e t u r n   e l e m e n t ; 
 	 	 	 	 } , 
 	 	 	 	 u p d a t e :   f u n c t i o n ( c o n t a i n e r ,   p )   { 
 
 	 	 	 	 	 / /   1 .   I f   a   c l a s s N a m e   i s   s e t   a s   ' p l a c e h o l d e r   o p t i o n ,   w e   d o n ' t   f o r c e   s i z e s   -   t h e   c l a s s   i s   r e s p o n s i b l e   f o r   t h a t 
 	 	 	 	 	 / /   2 .   T h e   o p t i o n   ' f o r c e P l a c e h o l d e r S i z e   c a n   b e   e n a b l e d   t o   f o r c e   i t   e v e n   i f   a   c l a s s   n a m e   i s   s p e c i f i e d 
 	 	 	 	 	 i f ( c l a s s N a m e   & &   ! o . f o r c e P l a c e h o l d e r S i z e )   { 
 	 	 	 	 	 	 r e t u r n ; 
 	 	 	 	 	 } 
 
 	 	 	 	 	 / / I f   t h e   e l e m e n t   d o e s n ' t   h a v e   a   a c t u a l   h e i g h t   b y   i t s e l f   ( w i t h o u t   s t y l e s   c o m i n g   f r o m   a   s t y l e s h e e t ) ,   i t   r e c e i v e s   t h e   i n l i n e   h e i g h t   f r o m   t h e   d r a g g e d   i t e m 
 	 	 	 	 	 i f ( ! p . h e i g h t ( ) )   {   p . h e i g h t ( t h a t . c u r r e n t I t e m . i n n e r H e i g h t ( )   -   p a r s e I n t ( t h a t . c u r r e n t I t e m . c s s ( " p a d d i n g T o p " ) | | 0 ,   1 0 )   -   p a r s e I n t ( t h a t . c u r r e n t I t e m . c s s ( " p a d d i n g B o t t o m " ) | | 0 ,   1 0 ) ) ;   } 
 	 	 	 	 	 i f ( ! p . w i d t h ( ) )   {   p . w i d t h ( t h a t . c u r r e n t I t e m . i n n e r W i d t h ( )   -   p a r s e I n t ( t h a t . c u r r e n t I t e m . c s s ( " p a d d i n g L e f t " ) | | 0 ,   1 0 )   -   p a r s e I n t ( t h a t . c u r r e n t I t e m . c s s ( " p a d d i n g R i g h t " ) | | 0 ,   1 0 ) ) ;   } 
 	 	 	 	 } 
 	 	 	 } ; 
 	 	 } 
 
 	 	 / / C r e a t e   t h e   p l a c e h o l d e r 
 	 	 t h a t . p l a c e h o l d e r   =   $ ( o . p l a c e h o l d e r . e l e m e n t . c a l l ( t h a t . e l e m e n t ,   t h a t . c u r r e n t I t e m ) ) ; 
 
 	 	 / / A p p e n d   i t   a f t e r   t h e   a c t u a l   c u r r e n t   i t e m 
 	 	 t h a t . c u r r e n t I t e m . a f t e r ( t h a t . p l a c e h o l d e r ) ; 
 
 	 	 / / U p d a t e   t h e   s i z e   o f   t h e   p l a c e h o l d e r   ( T O D O :   L o g i c   t o   f u z z y ,   s e e   l i n e   3 1 6 / 3 1 7 ) 
 	 	 o . p l a c e h o l d e r . u p d a t e ( t h a t ,   t h a t . p l a c e h o l d e r ) ; 
 
 	 } , 
 
 	 _ c o n t a c t C o n t a i n e r s :   f u n c t i o n ( e v e n t )   { 
 	 	 v a r   i ,   j ,   d i s t ,   i t e m W i t h L e a s t D i s t a n c e ,   p o s P r o p e r t y ,   s i z e P r o p e r t y ,   b a s e ,   c u r ,   n e a r B o t t o m ,   f l o a t i n g , 
 	 	 	 i n n e r m o s t C o n t a i n e r   =   n u l l , 
 	 	 	 i n n e r m o s t I n d e x   =   n u l l ; 
 
 	 	 / /   g e t   i n n e r m o s t   c o n t a i n e r   t h a t   i n t e r s e c t s   w i t h   i t e m 
 	 	 f o r   ( i   =   t h i s . c o n t a i n e r s . l e n g t h   -   1 ;   i   > =   0 ;   i - - )   { 
 
 	 	 	 / /   n e v e r   c o n s i d e r   a   c o n t a i n e r   t h a t ' s   l o c a t e d   w i t h i n   t h e   i t e m   i t s e l f 
 	 	 	 i f ( $ . c o n t a i n s ( t h i s . c u r r e n t I t e m [ 0 ] ,   t h i s . c o n t a i n e r s [ i ] . e l e m e n t [ 0 ] ) )   { 
 	 	 	 	 c o n t i n u e ; 
 	 	 	 } 
 
 	 	 	 i f ( t h i s . _ i n t e r s e c t s W i t h ( t h i s . c o n t a i n e r s [ i ] . c o n t a i n e r C a c h e ) )   { 
 
 	 	 	 	 / /   i f   w e ' v e   a l r e a d y   f o u n d   a   c o n t a i n e r   a n d   i t ' s   m o r e   " i n n e r "   t h a n   t h i s ,   t h e n   c o n t i n u e 
 	 	 	 	 i f ( i n n e r m o s t C o n t a i n e r   & &   $ . c o n t a i n s ( t h i s . c o n t a i n e r s [ i ] . e l e m e n t [ 0 ] ,   i n n e r m o s t C o n t a i n e r . e l e m e n t [ 0 ] ) )   { 
 	 	 	 	 	 c o n t i n u e ; 
 	 	 	 	 } 
 
 	 	 	 	 i n n e r m o s t C o n t a i n e r   =   t h i s . c o n t a i n e r s [ i ] ; 
 	 	 	 	 i n n e r m o s t I n d e x   =   i ; 
 
 	 	 	 }   e l s e   { 
 	 	 	 	 / /   c o n t a i n e r   d o e s n ' t   i n t e r s e c t .   t r i g g e r   " o u t "   e v e n t   i f   n e c e s s a r y 
 	 	 	 	 i f ( t h i s . c o n t a i n e r s [ i ] . c o n t a i n e r C a c h e . o v e r )   { 
 	 	 	 	 	 t h i s . c o n t a i n e r s [ i ] . _ t r i g g e r ( " o u t " ,   e v e n t ,   t h i s . _ u i H a s h ( t h i s ) ) ; 
 	 	 	 	 	 t h i s . c o n t a i n e r s [ i ] . c o n t a i n e r C a c h e . o v e r   =   0 ; 
 	 	 	 	 } 
 	 	 	 } 
 
 	 	 } 
 
 	 	 / /   i f   n o   i n t e r s e c t i n g   c o n t a i n e r s   f o u n d ,   r e t u r n 
 	 	 i f ( ! i n n e r m o s t C o n t a i n e r )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 / /   m o v e   t h e   i t e m   i n t o   t h e   c o n t a i n e r   i f   i t ' s   n o t   t h e r e   a l r e a d y 
 	 	 i f ( t h i s . c o n t a i n e r s . l e n g t h   = = =   1 )   { 
 	 	 	 i f   ( ! t h i s . c o n t a i n e r s [ i n n e r m o s t I n d e x ] . c o n t a i n e r C a c h e . o v e r )   { 
 	 	 	 	 t h i s . c o n t a i n e r s [ i n n e r m o s t I n d e x ] . _ t r i g g e r ( " o v e r " ,   e v e n t ,   t h i s . _ u i H a s h ( t h i s ) ) ; 
 	 	 	 	 t h i s . c o n t a i n e r s [ i n n e r m o s t I n d e x ] . c o n t a i n e r C a c h e . o v e r   =   1 ; 
 	 	 	 } 
 	 	 }   e l s e   { 
 
 	 	 	 / / W h e n   e n t e r i n g   a   n e w   c o n t a i n e r ,   w e   w i l l   f i n d   t h e   i t e m   w i t h   t h e   l e a s t   d i s t a n c e   a n d   a p p e n d   o u r   i t e m   n e a r   i t 
 	 	 	 d i s t   =   1 0 0 0 0 ; 
 	 	 	 i t e m W i t h L e a s t D i s t a n c e   =   n u l l ; 
 	 	 	 f l o a t i n g   =   i n n e r m o s t C o n t a i n e r . f l o a t i n g   | |   i s F l o a t i n g ( t h i s . c u r r e n t I t e m ) ; 
 	 	 	 p o s P r o p e r t y   =   f l o a t i n g   ?   " l e f t "   :   " t o p " ; 
 	 	 	 s i z e P r o p e r t y   =   f l o a t i n g   ?   " w i d t h "   :   " h e i g h t " ; 
 	 	 	 b a s e   =   t h i s . p o s i t i o n A b s [ p o s P r o p e r t y ]   +   t h i s . o f f s e t . c l i c k [ p o s P r o p e r t y ] ; 
 	 	 	 f o r   ( j   =   t h i s . i t e m s . l e n g t h   -   1 ;   j   > =   0 ;   j - - )   { 
 	 	 	 	 i f ( ! $ . c o n t a i n s ( t h i s . c o n t a i n e r s [ i n n e r m o s t I n d e x ] . e l e m e n t [ 0 ] ,   t h i s . i t e m s [ j ] . i t e m [ 0 ] ) )   { 
 	 	 	 	 	 c o n t i n u e ; 
 	 	 	 	 } 
 	 	 	 	 i f ( t h i s . i t e m s [ j ] . i t e m [ 0 ]   = = =   t h i s . c u r r e n t I t e m [ 0 ] )   { 
 	 	 	 	 	 c o n t i n u e ; 
 	 	 	 	 } 
 	 	 	 	 i f   ( f l o a t i n g   & &   ! i s O v e r A x i s ( t h i s . p o s i t i o n A b s . t o p   +   t h i s . o f f s e t . c l i c k . t o p ,   t h i s . i t e m s [ j ] . t o p ,   t h i s . i t e m s [ j ] . h e i g h t ) )   { 
 	 	 	 	 	 c o n t i n u e ; 
 	 	 	 	 } 
 	 	 	 	 c u r   =   t h i s . i t e m s [ j ] . i t e m . o f f s e t ( ) [ p o s P r o p e r t y ] ; 
 	 	 	 	 n e a r B o t t o m   =   f a l s e ; 
 	 	 	 	 i f ( M a t h . a b s ( c u r   -   b a s e )   >   M a t h . a b s ( c u r   +   t h i s . i t e m s [ j ] [ s i z e P r o p e r t y ]   -   b a s e ) ) { 
 	 	 	 	 	 n e a r B o t t o m   =   t r u e ; 
 	 	 	 	 	 c u r   + =   t h i s . i t e m s [ j ] [ s i z e P r o p e r t y ] ; 
 	 	 	 	 } 
 
 	 	 	 	 i f ( M a t h . a b s ( c u r   -   b a s e )   <   d i s t )   { 
 	 	 	 	 	 d i s t   =   M a t h . a b s ( c u r   -   b a s e ) ;   i t e m W i t h L e a s t D i s t a n c e   =   t h i s . i t e m s [ j ] ; 
 	 	 	 	 	 t h i s . d i r e c t i o n   =   n e a r B o t t o m   ?   " u p " :   " d o w n " ; 
 	 	 	 	 } 
 	 	 	 } 
 
 	 	 	 / / C h e c k   i f   d r o p O n E m p t y   i s   e n a b l e d 
 	 	 	 i f ( ! i t e m W i t h L e a s t D i s t a n c e   & &   ! t h i s . o p t i o n s . d r o p O n E m p t y )   { 
 	 	 	 	 r e t u r n ; 
 	 	 	 } 
 
 	 	 	 i f ( t h i s . c u r r e n t C o n t a i n e r   = = =   t h i s . c o n t a i n e r s [ i n n e r m o s t I n d e x ] )   { 
 	 	 	 	 r e t u r n ; 
 	 	 	 } 
 
 	 	 	 i t e m W i t h L e a s t D i s t a n c e   ?   t h i s . _ r e a r r a n g e ( e v e n t ,   i t e m W i t h L e a s t D i s t a n c e ,   n u l l ,   t r u e )   :   t h i s . _ r e a r r a n g e ( e v e n t ,   n u l l ,   t h i s . c o n t a i n e r s [ i n n e r m o s t I n d e x ] . e l e m e n t ,   t r u e ) ; 
 	 	 	 t h i s . _ t r i g g e r ( " c h a n g e " ,   e v e n t ,   t h i s . _ u i H a s h ( ) ) ; 
 	 	 	 t h i s . c o n t a i n e r s [ i n n e r m o s t I n d e x ] . _ t r i g g e r ( " c h a n g e " ,   e v e n t ,   t h i s . _ u i H a s h ( t h i s ) ) ; 
 	 	 	 t h i s . c u r r e n t C o n t a i n e r   =   t h i s . c o n t a i n e r s [ i n n e r m o s t I n d e x ] ; 
 
 	 	 	 / / U p d a t e   t h e   p l a c e h o l d e r 
 	 	 	 t h i s . o p t i o n s . p l a c e h o l d e r . u p d a t e ( t h i s . c u r r e n t C o n t a i n e r ,   t h i s . p l a c e h o l d e r ) ; 
 
 	 	 	 t h i s . c o n t a i n e r s [ i n n e r m o s t I n d e x ] . _ t r i g g e r ( " o v e r " ,   e v e n t ,   t h i s . _ u i H a s h ( t h i s ) ) ; 
 	 	 	 t h i s . c o n t a i n e r s [ i n n e r m o s t I n d e x ] . c o n t a i n e r C a c h e . o v e r   =   1 ; 
 	 	 } 
 
 
 	 } , 
 
 	 _ c r e a t e H e l p e r :   f u n c t i o n ( e v e n t )   { 
 
 	 	 v a r   o   =   t h i s . o p t i o n s , 
 	 	 	 h e l p e r   =   $ . i s F u n c t i o n ( o . h e l p e r )   ?   $ ( o . h e l p e r . a p p l y ( t h i s . e l e m e n t [ 0 ] ,   [ e v e n t ,   t h i s . c u r r e n t I t e m ] ) )   :   ( o . h e l p e r   = = =   " c l o n e "   ?   t h i s . c u r r e n t I t e m . c l o n e ( )   :   t h i s . c u r r e n t I t e m ) ; 
 
 	 	 / / A d d   t h e   h e l p e r   t o   t h e   D O M   i f   t h a t   d i d n ' t   h a p p e n   a l r e a d y 
 	 	 i f ( ! h e l p e r . p a r e n t s ( " b o d y " ) . l e n g t h )   { 
 	 	 	 $ ( o . a p p e n d T o   ! = =   " p a r e n t "   ?   o . a p p e n d T o   :   t h i s . c u r r e n t I t e m [ 0 ] . p a r e n t N o d e ) [ 0 ] . a p p e n d C h i l d ( h e l p e r [ 0 ] ) ; 
 	 	 } 
 
 	 	 i f ( h e l p e r [ 0 ]   = = =   t h i s . c u r r e n t I t e m [ 0 ] )   { 
 	 	 	 t h i s . _ s t o r e d C S S   =   {   w i d t h :   t h i s . c u r r e n t I t e m [ 0 ] . s t y l e . w i d t h ,   h e i g h t :   t h i s . c u r r e n t I t e m [ 0 ] . s t y l e . h e i g h t ,   p o s i t i o n :   t h i s . c u r r e n t I t e m . c s s ( " p o s i t i o n " ) ,   t o p :   t h i s . c u r r e n t I t e m . c s s ( " t o p " ) ,   l e f t :   t h i s . c u r r e n t I t e m . c s s ( " l e f t " )   } ; 
 	 	 } 
 
 	 	 i f ( ! h e l p e r [ 0 ] . s t y l e . w i d t h   | |   o . f o r c e H e l p e r S i z e )   { 
 	 	 	 h e l p e r . w i d t h ( t h i s . c u r r e n t I t e m . w i d t h ( ) ) ; 
 	 	 } 
 	 	 i f ( ! h e l p e r [ 0 ] . s t y l e . h e i g h t   | |   o . f o r c e H e l p e r S i z e )   { 
 	 	 	 h e l p e r . h e i g h t ( t h i s . c u r r e n t I t e m . h e i g h t ( ) ) ; 
 	 	 } 
 
 	 	 r e t u r n   h e l p e r ; 
 
 	 } , 
 
 	 _ a d j u s t O f f s e t F r o m H e l p e r :   f u n c t i o n ( o b j )   { 
 	 	 i f   ( t y p e o f   o b j   = = =   " s t r i n g " )   { 
 	 	 	 o b j   =   o b j . s p l i t ( "   " ) ; 
 	 	 } 
 	 	 i f   ( $ . i s A r r a y ( o b j ) )   { 
 	 	 	 o b j   =   { l e f t :   + o b j [ 0 ] ,   t o p :   + o b j [ 1 ]   | |   0 } ; 
 	 	 } 
 	 	 i f   ( " l e f t "   i n   o b j )   { 
 	 	 	 t h i s . o f f s e t . c l i c k . l e f t   =   o b j . l e f t   +   t h i s . m a r g i n s . l e f t ; 
 	 	 } 
 	 	 i f   ( " r i g h t "   i n   o b j )   { 
 	 	 	 t h i s . o f f s e t . c l i c k . l e f t   =   t h i s . h e l p e r P r o p o r t i o n s . w i d t h   -   o b j . r i g h t   +   t h i s . m a r g i n s . l e f t ; 
 	 	 } 
 	 	 i f   ( " t o p "   i n   o b j )   { 
 	 	 	 t h i s . o f f s e t . c l i c k . t o p   =   o b j . t o p   +   t h i s . m a r g i n s . t o p ; 
 	 	 } 
 	 	 i f   ( " b o t t o m "   i n   o b j )   { 
 	 	 	 t h i s . o f f s e t . c l i c k . t o p   =   t h i s . h e l p e r P r o p o r t i o n s . h e i g h t   -   o b j . b o t t o m   +   t h i s . m a r g i n s . t o p ; 
 	 	 } 
 	 } , 
 
 	 _ g e t P a r e n t O f f s e t :   f u n c t i o n ( )   { 
 
 
 	 	 / / G e t   t h e   o f f s e t P a r e n t   a n d   c a c h e   i t s   p o s i t i o n 
 	 	 t h i s . o f f s e t P a r e n t   =   t h i s . h e l p e r . o f f s e t P a r e n t ( ) ; 
 	 	 v a r   p o   =   t h i s . o f f s e t P a r e n t . o f f s e t ( ) ; 
 
 	 	 / /   T h i s   i s   a   s p e c i a l   c a s e   w h e r e   w e   n e e d   t o   m o d i f y   a   o f f s e t   c a l c u l a t e d   o n   s t a r t ,   s i n c e   t h e   f o l l o w i n g   h a p p e n e d : 
 	 	 / /   1 .   T h e   p o s i t i o n   o f   t h e   h e l p e r   i s   a b s o l u t e ,   s o   i t ' s   p o s i t i o n   i s   c a l c u l a t e d   b a s e d   o n   t h e   n e x t   p o s i t i o n e d   p a r e n t 
 	 	 / /   2 .   T h e   a c t u a l   o f f s e t   p a r e n t   i s   a   c h i l d   o f   t h e   s c r o l l   p a r e n t ,   a n d   t h e   s c r o l l   p a r e n t   i s n ' t   t h e   d o c u m e n t ,   w h i c h   m e a n s   t h a t 
 	 	 / /         t h e   s c r o l l   i s   i n c l u d e d   i n   t h e   i n i t i a l   c a l c u l a t i o n   o f   t h e   o f f s e t   o f   t h e   p a r e n t ,   a n d   n e v e r   r e c a l c u l a t e d   u p o n   d r a g 
 	 	 i f ( t h i s . c s s P o s i t i o n   = = =   " a b s o l u t e "   & &   t h i s . s c r o l l P a r e n t [ 0 ]   ! = =   d o c u m e n t   & &   $ . c o n t a i n s ( t h i s . s c r o l l P a r e n t [ 0 ] ,   t h i s . o f f s e t P a r e n t [ 0 ] ) )   { 
 	 	 	 p o . l e f t   + =   t h i s . s c r o l l P a r e n t . s c r o l l L e f t ( ) ; 
 	 	 	 p o . t o p   + =   t h i s . s c r o l l P a r e n t . s c r o l l T o p ( ) ; 
 	 	 } 
 
 	 	 / /   T h i s   n e e d s   t o   b e   a c t u a l l y   d o n e   f o r   a l l   b r o w s e r s ,   s i n c e   p a g e X / p a g e Y   i n c l u d e s   t h i s   i n f o r m a t i o n 
 	 	 / /   w i t h   a n   u g l y   I E   f i x 
 	 	 i f (   t h i s . o f f s e t P a r e n t [ 0 ]   = = =   d o c u m e n t . b o d y   | |   ( t h i s . o f f s e t P a r e n t [ 0 ] . t a g N a m e   & &   t h i s . o f f s e t P a r e n t [ 0 ] . t a g N a m e . t o L o w e r C a s e ( )   = = =   " h t m l "   & &   $ . u i . i e ) )   { 
 	 	 	 p o   =   {   t o p :   0 ,   l e f t :   0   } ; 
 	 	 } 
 
 	 	 r e t u r n   { 
 	 	 	 t o p :   p o . t o p   +   ( p a r s e I n t ( t h i s . o f f s e t P a r e n t . c s s ( " b o r d e r T o p W i d t h " ) , 1 0 )   | |   0 ) , 
 	 	 	 l e f t :   p o . l e f t   +   ( p a r s e I n t ( t h i s . o f f s e t P a r e n t . c s s ( " b o r d e r L e f t W i d t h " ) , 1 0 )   | |   0 ) 
 	 	 } ; 
 
 	 } , 
 
 	 _ g e t R e l a t i v e O f f s e t :   f u n c t i o n ( )   { 
 
 	 	 i f ( t h i s . c s s P o s i t i o n   = = =   " r e l a t i v e " )   { 
 	 	 	 v a r   p   =   t h i s . c u r r e n t I t e m . p o s i t i o n ( ) ; 
 	 	 	 r e t u r n   { 
 	 	 	 	 t o p :   p . t o p   -   ( p a r s e I n t ( t h i s . h e l p e r . c s s ( " t o p " ) , 1 0 )   | |   0 )   +   t h i s . s c r o l l P a r e n t . s c r o l l T o p ( ) , 
 	 	 	 	 l e f t :   p . l e f t   -   ( p a r s e I n t ( t h i s . h e l p e r . c s s ( " l e f t " ) , 1 0 )   | |   0 )   +   t h i s . s c r o l l P a r e n t . s c r o l l L e f t ( ) 
 	 	 	 } ; 
 	 	 }   e l s e   { 
 	 	 	 r e t u r n   {   t o p :   0 ,   l e f t :   0   } ; 
 	 	 } 
 
 	 } , 
 
 	 _ c a c h e M a r g i n s :   f u n c t i o n ( )   { 
 	 	 t h i s . m a r g i n s   =   { 
 	 	 	 l e f t :   ( p a r s e I n t ( t h i s . c u r r e n t I t e m . c s s ( " m a r g i n L e f t " ) , 1 0 )   | |   0 ) , 
 	 	 	 t o p :   ( p a r s e I n t ( t h i s . c u r r e n t I t e m . c s s ( " m a r g i n T o p " ) , 1 0 )   | |   0 ) 
 	 	 } ; 
 	 } , 
 
 	 _ c a c h e H e l p e r P r o p o r t i o n s :   f u n c t i o n ( )   { 
 	 	 t h i s . h e l p e r P r o p o r t i o n s   =   { 
 	 	 	 w i d t h :   t h i s . h e l p e r . o u t e r W i d t h ( ) , 
 	 	 	 h e i g h t :   t h i s . h e l p e r . o u t e r H e i g h t ( ) 
 	 	 } ; 
 	 } , 
 
 	 _ s e t C o n t a i n m e n t :   f u n c t i o n ( )   { 
 
 	 	 v a r   c e ,   c o ,   o v e r , 
 	 	 	 o   =   t h i s . o p t i o n s ; 
 	 	 i f ( o . c o n t a i n m e n t   = = =   " p a r e n t " )   { 
 	 	 	 o . c o n t a i n m e n t   =   t h i s . h e l p e r [ 0 ] . p a r e n t N o d e ; 
 	 	 } 
 	 	 i f ( o . c o n t a i n m e n t   = = =   " d o c u m e n t "   | |   o . c o n t a i n m e n t   = = =   " w i n d o w " )   { 
 	 	 	 t h i s . c o n t a i n m e n t   =   [ 
 	 	 	 	 0   -   t h i s . o f f s e t . r e l a t i v e . l e f t   -   t h i s . o f f s e t . p a r e n t . l e f t , 
 	 	 	 	 0   -   t h i s . o f f s e t . r e l a t i v e . t o p   -   t h i s . o f f s e t . p a r e n t . t o p , 
 	 	 	 	 $ ( o . c o n t a i n m e n t   = = =   " d o c u m e n t "   ?   d o c u m e n t   :   w i n d o w ) . w i d t h ( )   -   t h i s . h e l p e r P r o p o r t i o n s . w i d t h   -   t h i s . m a r g i n s . l e f t , 
 	 	 	 	 ( $ ( o . c o n t a i n m e n t   = = =   " d o c u m e n t "   ?   d o c u m e n t   :   w i n d o w ) . h e i g h t ( )   | |   d o c u m e n t . b o d y . p a r e n t N o d e . s c r o l l H e i g h t )   -   t h i s . h e l p e r P r o p o r t i o n s . h e i g h t   -   t h i s . m a r g i n s . t o p 
 	 	 	 ] ; 
 	 	 } 
 
 	 	 i f ( ! ( / ^ ( d o c u m e n t | w i n d o w | p a r e n t ) $ / ) . t e s t ( o . c o n t a i n m e n t ) )   { 
 	 	 	 c e   =   $ ( o . c o n t a i n m e n t ) [ 0 ] ; 
 	 	 	 c o   =   $ ( o . c o n t a i n m e n t ) . o f f s e t ( ) ; 
 	 	 	 o v e r   =   ( $ ( c e ) . c s s ( " o v e r f l o w " )   ! = =   " h i d d e n " ) ; 
 
 	 	 	 t h i s . c o n t a i n m e n t   =   [ 
 	 	 	 	 c o . l e f t   +   ( p a r s e I n t ( $ ( c e ) . c s s ( " b o r d e r L e f t W i d t h " ) , 1 0 )   | |   0 )   +   ( p a r s e I n t ( $ ( c e ) . c s s ( " p a d d i n g L e f t " ) , 1 0 )   | |   0 )   -   t h i s . m a r g i n s . l e f t , 
 	 	 	 	 c o . t o p   +   ( p a r s e I n t ( $ ( c e ) . c s s ( " b o r d e r T o p W i d t h " ) , 1 0 )   | |   0 )   +   ( p a r s e I n t ( $ ( c e ) . c s s ( " p a d d i n g T o p " ) , 1 0 )   | |   0 )   -   t h i s . m a r g i n s . t o p , 
 	 	 	 	 c o . l e f t + ( o v e r   ?   M a t h . m a x ( c e . s c r o l l W i d t h , c e . o f f s e t W i d t h )   :   c e . o f f s e t W i d t h )   -   ( p a r s e I n t ( $ ( c e ) . c s s ( " b o r d e r L e f t W i d t h " ) , 1 0 )   | |   0 )   -   ( p a r s e I n t ( $ ( c e ) . c s s ( " p a d d i n g R i g h t " ) , 1 0 )   | |   0 )   -   t h i s . h e l p e r P r o p o r t i o n s . w i d t h   -   t h i s . m a r g i n s . l e f t , 
 	 	 	 	 c o . t o p + ( o v e r   ?   M a t h . m a x ( c e . s c r o l l H e i g h t , c e . o f f s e t H e i g h t )   :   c e . o f f s e t H e i g h t )   -   ( p a r s e I n t ( $ ( c e ) . c s s ( " b o r d e r T o p W i d t h " ) , 1 0 )   | |   0 )   -   ( p a r s e I n t ( $ ( c e ) . c s s ( " p a d d i n g B o t t o m " ) , 1 0 )   | |   0 )   -   t h i s . h e l p e r P r o p o r t i o n s . h e i g h t   -   t h i s . m a r g i n s . t o p 
 	 	 	 ] ; 
 	 	 } 
 
 	 } , 
 
 	 _ c o n v e r t P o s i t i o n T o :   f u n c t i o n ( d ,   p o s )   { 
 
 	 	 i f ( ! p o s )   { 
 	 	 	 p o s   =   t h i s . p o s i t i o n ; 
 	 	 } 
 	 	 v a r   m o d   =   d   = = =   " a b s o l u t e "   ?   1   :   - 1 , 
 	 	 	 s c r o l l   =   t h i s . c s s P o s i t i o n   = = =   " a b s o l u t e "   & &   ! ( t h i s . s c r o l l P a r e n t [ 0 ]   ! = =   d o c u m e n t   & &   $ . c o n t a i n s ( t h i s . s c r o l l P a r e n t [ 0 ] ,   t h i s . o f f s e t P a r e n t [ 0 ] ) )   ?   t h i s . o f f s e t P a r e n t   :   t h i s . s c r o l l P a r e n t , 
 	 	 	 s c r o l l I s R o o t N o d e   =   ( / ( h t m l | b o d y ) / i ) . t e s t ( s c r o l l [ 0 ] . t a g N a m e ) ; 
 
 	 	 r e t u r n   { 
 	 	 	 t o p :   ( 
 	 	 	 	 p o s . t o p 	 + 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 / /   T h e   a b s o l u t e   m o u s e   p o s i t i o n 
 	 	 	 	 t h i s . o f f s e t . r e l a t i v e . t o p   *   m o d   + 	 	 	 	 	 	 	 	 	 	 / /   O n l y   f o r   r e l a t i v e   p o s i t i o n e d   n o d e s :   R e l a t i v e   o f f s e t   f r o m   e l e m e n t   t o   o f f s e t   p a r e n t 
 	 	 	 	 t h i s . o f f s e t . p a r e n t . t o p   *   m o d   - 	 	 	 	 	 	 	 	 	 	 	 / /   T h e   o f f s e t P a r e n t ' s   o f f s e t   w i t h o u t   b o r d e r s   ( o f f s e t   +   b o r d e r ) 
 	 	 	 	 (   (   t h i s . c s s P o s i t i o n   = = =   " f i x e d "   ?   - t h i s . s c r o l l P a r e n t . s c r o l l T o p ( )   :   (   s c r o l l I s R o o t N o d e   ?   0   :   s c r o l l . s c r o l l T o p ( )   )   )   *   m o d ) 
 	 	 	 ) , 
 	 	 	 l e f t :   ( 
 	 	 	 	 p o s . l e f t   + 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 / /   T h e   a b s o l u t e   m o u s e   p o s i t i o n 
 	 	 	 	 t h i s . o f f s e t . r e l a t i v e . l e f t   *   m o d   + 	 	 	 	 	 	 	 	 	 	 / /   O n l y   f o r   r e l a t i v e   p o s i t i o n e d   n o d e s :   R e l a t i v e   o f f s e t   f r o m   e l e m e n t   t o   o f f s e t   p a r e n t 
 	 	 	 	 t h i s . o f f s e t . p a r e n t . l e f t   *   m o d 	 - 	 	 	 	 	 	 	 	 	 	 / /   T h e   o f f s e t P a r e n t ' s   o f f s e t   w i t h o u t   b o r d e r s   ( o f f s e t   +   b o r d e r ) 
 	 	 	 	 (   (   t h i s . c s s P o s i t i o n   = = =   " f i x e d "   ?   - t h i s . s c r o l l P a r e n t . s c r o l l L e f t ( )   :   s c r o l l I s R o o t N o d e   ?   0   :   s c r o l l . s c r o l l L e f t ( )   )   *   m o d ) 
 	 	 	 ) 
 	 	 } ; 
 
 	 } , 
 
 	 _ g e n e r a t e P o s i t i o n :   f u n c t i o n ( e v e n t )   { 
 
 	 	 v a r   t o p ,   l e f t , 
 	 	 	 o   =   t h i s . o p t i o n s , 
 	 	 	 p a g e X   =   e v e n t . p a g e X , 
 	 	 	 p a g e Y   =   e v e n t . p a g e Y , 
 	 	 	 s c r o l l   =   t h i s . c s s P o s i t i o n   = = =   " a b s o l u t e "   & &   ! ( t h i s . s c r o l l P a r e n t [ 0 ]   ! = =   d o c u m e n t   & &   $ . c o n t a i n s ( t h i s . s c r o l l P a r e n t [ 0 ] ,   t h i s . o f f s e t P a r e n t [ 0 ] ) )   ?   t h i s . o f f s e t P a r e n t   :   t h i s . s c r o l l P a r e n t ,   s c r o l l I s R o o t N o d e   =   ( / ( h t m l | b o d y ) / i ) . t e s t ( s c r o l l [ 0 ] . t a g N a m e ) ; 
 
 	 	 / /   T h i s   i s   a n o t h e r   v e r y   w e i r d   s p e c i a l   c a s e   t h a t   o n l y   h a p p e n s   f o r   r e l a t i v e   e l e m e n t s : 
 	 	 / /   1 .   I f   t h e   c s s   p o s i t i o n   i s   r e l a t i v e 
 	 	 / /   2 .   a n d   t h e   s c r o l l   p a r e n t   i s   t h e   d o c u m e n t   o r   s i m i l a r   t o   t h e   o f f s e t   p a r e n t 
 	 	 / /   w e   h a v e   t o   r e f r e s h   t h e   r e l a t i v e   o f f s e t   d u r i n g   t h e   s c r o l l   s o   t h e r e   a r e   n o   j u m p s 
 	 	 i f ( t h i s . c s s P o s i t i o n   = = =   " r e l a t i v e "   & &   ! ( t h i s . s c r o l l P a r e n t [ 0 ]   ! = =   d o c u m e n t   & &   t h i s . s c r o l l P a r e n t [ 0 ]   ! = =   t h i s . o f f s e t P a r e n t [ 0 ] ) )   { 
 	 	 	 t h i s . o f f s e t . r e l a t i v e   =   t h i s . _ g e t R e l a t i v e O f f s e t ( ) ; 
 	 	 } 
 
 	 	 / * 
 	 	   *   -   P o s i t i o n   c o n s t r a i n i n g   - 
 	 	   *   C o n s t r a i n   t h e   p o s i t i o n   t o   a   m i x   o f   g r i d ,   c o n t a i n m e n t . 
 	 	   * / 
 
 	 	 i f ( t h i s . o r i g i n a l P o s i t i o n )   {   / / I f   w e   a r e   n o t   d r a g g i n g   y e t ,   w e   w o n ' t   c h e c k   f o r   o p t i o n s 
 
 	 	 	 i f ( t h i s . c o n t a i n m e n t )   { 
 	 	 	 	 i f ( e v e n t . p a g e X   -   t h i s . o f f s e t . c l i c k . l e f t   <   t h i s . c o n t a i n m e n t [ 0 ] )   { 
 	 	 	 	 	 p a g e X   =   t h i s . c o n t a i n m e n t [ 0 ]   +   t h i s . o f f s e t . c l i c k . l e f t ; 
 	 	 	 	 } 
 	 	 	 	 i f ( e v e n t . p a g e Y   -   t h i s . o f f s e t . c l i c k . t o p   <   t h i s . c o n t a i n m e n t [ 1 ] )   { 
 	 	 	 	 	 p a g e Y   =   t h i s . c o n t a i n m e n t [ 1 ]   +   t h i s . o f f s e t . c l i c k . t o p ; 
 	 	 	 	 } 
 	 	 	 	 i f ( e v e n t . p a g e X   -   t h i s . o f f s e t . c l i c k . l e f t   >   t h i s . c o n t a i n m e n t [ 2 ] )   { 
 	 	 	 	 	 p a g e X   =   t h i s . c o n t a i n m e n t [ 2 ]   +   t h i s . o f f s e t . c l i c k . l e f t ; 
 	 	 	 	 } 
 	 	 	 	 i f ( e v e n t . p a g e Y   -   t h i s . o f f s e t . c l i c k . t o p   >   t h i s . c o n t a i n m e n t [ 3 ] )   { 
 	 	 	 	 	 p a g e Y   =   t h i s . c o n t a i n m e n t [ 3 ]   +   t h i s . o f f s e t . c l i c k . t o p ; 
 	 	 	 	 } 
 	 	 	 } 
 
 	 	 	 i f ( o . g r i d )   { 
 	 	 	 	 t o p   =   t h i s . o r i g i n a l P a g e Y   +   M a t h . r o u n d ( ( p a g e Y   -   t h i s . o r i g i n a l P a g e Y )   /   o . g r i d [ 1 ] )   *   o . g r i d [ 1 ] ; 
 	 	 	 	 p a g e Y   =   t h i s . c o n t a i n m e n t   ?   (   ( t o p   -   t h i s . o f f s e t . c l i c k . t o p   > =   t h i s . c o n t a i n m e n t [ 1 ]   & &   t o p   -   t h i s . o f f s e t . c l i c k . t o p   < =   t h i s . c o n t a i n m e n t [ 3 ] )   ?   t o p   :   ( ( t o p   -   t h i s . o f f s e t . c l i c k . t o p   > =   t h i s . c o n t a i n m e n t [ 1 ] )   ?   t o p   -   o . g r i d [ 1 ]   :   t o p   +   o . g r i d [ 1 ] ) )   :   t o p ; 
 
 	 	 	 	 l e f t   =   t h i s . o r i g i n a l P a g e X   +   M a t h . r o u n d ( ( p a g e X   -   t h i s . o r i g i n a l P a g e X )   /   o . g r i d [ 0 ] )   *   o . g r i d [ 0 ] ; 
 	 	 	 	 p a g e X   =   t h i s . c o n t a i n m e n t   ?   (   ( l e f t   -   t h i s . o f f s e t . c l i c k . l e f t   > =   t h i s . c o n t a i n m e n t [ 0 ]   & &   l e f t   -   t h i s . o f f s e t . c l i c k . l e f t   < =   t h i s . c o n t a i n m e n t [ 2 ] )   ?   l e f t   :   ( ( l e f t   -   t h i s . o f f s e t . c l i c k . l e f t   > =   t h i s . c o n t a i n m e n t [ 0 ] )   ?   l e f t   -   o . g r i d [ 0 ]   :   l e f t   +   o . g r i d [ 0 ] ) )   :   l e f t ; 
 	 	 	 } 
 
 	 	 } 
 
 	 	 r e t u r n   { 
 	 	 	 t o p :   ( 
 	 	 	 	 p a g e Y   - 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 / /   T h e   a b s o l u t e   m o u s e   p o s i t i o n 
 	 	 	 	 t h i s . o f f s e t . c l i c k . t o p   - 	 	 	 	 	 	 	 	 	 	 	 	 	 / /   C l i c k   o f f s e t   ( r e l a t i v e   t o   t h e   e l e m e n t ) 
 	 	 	 	 t h i s . o f f s e t . r e l a t i v e . t o p 	 - 	 	 	 	 	 	 	 	 	 	 	 / /   O n l y   f o r   r e l a t i v e   p o s i t i o n e d   n o d e s :   R e l a t i v e   o f f s e t   f r o m   e l e m e n t   t o   o f f s e t   p a r e n t 
 	 	 	 	 t h i s . o f f s e t . p a r e n t . t o p   + 	 	 	 	 	 	 	 	 	 	 	 	 / /   T h e   o f f s e t P a r e n t ' s   o f f s e t   w i t h o u t   b o r d e r s   ( o f f s e t   +   b o r d e r ) 
 	 	 	 	 (   (   t h i s . c s s P o s i t i o n   = = =   " f i x e d "   ?   - t h i s . s c r o l l P a r e n t . s c r o l l T o p ( )   :   (   s c r o l l I s R o o t N o d e   ?   0   :   s c r o l l . s c r o l l T o p ( )   )   ) ) 
 	 	 	 ) , 
 	 	 	 l e f t :   ( 
 	 	 	 	 p a g e X   - 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 / /   T h e   a b s o l u t e   m o u s e   p o s i t i o n 
 	 	 	 	 t h i s . o f f s e t . c l i c k . l e f t   - 	 	 	 	 	 	 	 	 	 	 	 	 / /   C l i c k   o f f s e t   ( r e l a t i v e   t o   t h e   e l e m e n t ) 
 	 	 	 	 t h i s . o f f s e t . r e l a t i v e . l e f t 	 - 	 	 	 	 	 	 	 	 	 	 	 / /   O n l y   f o r   r e l a t i v e   p o s i t i o n e d   n o d e s :   R e l a t i v e   o f f s e t   f r o m   e l e m e n t   t o   o f f s e t   p a r e n t 
 	 	 	 	 t h i s . o f f s e t . p a r e n t . l e f t   + 	 	 	 	 	 	 	 	 	 	 	 	 / /   T h e   o f f s e t P a r e n t ' s   o f f s e t   w i t h o u t   b o r d e r s   ( o f f s e t   +   b o r d e r ) 
 	 	 	 	 (   (   t h i s . c s s P o s i t i o n   = = =   " f i x e d "   ?   - t h i s . s c r o l l P a r e n t . s c r o l l L e f t ( )   :   s c r o l l I s R o o t N o d e   ?   0   :   s c r o l l . s c r o l l L e f t ( )   ) ) 
 	 	 	 ) 
 	 	 } ; 
 
 	 } , 
 
 	 _ r e a r r a n g e :   f u n c t i o n ( e v e n t ,   i ,   a ,   h a r d R e f r e s h )   { 
 
 	 	 a   ?   a [ 0 ] . a p p e n d C h i l d ( t h i s . p l a c e h o l d e r [ 0 ] )   :   i . i t e m [ 0 ] . p a r e n t N o d e . i n s e r t B e f o r e ( t h i s . p l a c e h o l d e r [ 0 ] ,   ( t h i s . d i r e c t i o n   = = =   " d o w n "   ?   i . i t e m [ 0 ]   :   i . i t e m [ 0 ] . n e x t S i b l i n g ) ) ; 
 
 	 	 / / V a r i o u s   t h i n g s   d o n e   h e r e   t o   i m p r o v e   t h e   p e r f o r m a n c e : 
 	 	 / /   1 .   w e   c r e a t e   a   s e t T i m e o u t ,   t h a t   c a l l s   r e f r e s h P o s i t i o n s 
 	 	 / /   2 .   o n   t h e   i n s t a n c e ,   w e   h a v e   a   c o u n t e r   v a r i a b l e ,   t h a t   g e t ' s   h i g h e r   a f t e r   e v e r y   a p p e n d 
 	 	 / /   3 .   o n   t h e   l o c a l   s c o p e ,   w e   c o p y   t h e   c o u n t e r   v a r i a b l e ,   a n d   c h e c k   i n   t h e   t i m e o u t ,   i f   i t ' s   s t i l l   t h e   s a m e 
 	 	 / /   4 .   t h i s   l e t s   o n l y   t h e   l a s t   a d d i t i o n   t o   t h e   t i m e o u t   s t a c k   t h r o u g h 
 	 	 t h i s . c o u n t e r   =   t h i s . c o u n t e r   ?   + + t h i s . c o u n t e r   :   1 ; 
 	 	 v a r   c o u n t e r   =   t h i s . c o u n t e r ; 
 
 	 	 t h i s . _ d e l a y ( f u n c t i o n ( )   { 
 	 	 	 i f ( c o u n t e r   = = =   t h i s . c o u n t e r )   { 
 	 	 	 	 t h i s . r e f r e s h P o s i t i o n s ( ! h a r d R e f r e s h ) ;   / / P r e c o m p u t e   a f t e r   e a c h   D O M   i n s e r t i o n ,   N O T   o n   m o u s e m o v e 
 	 	 	 } 
 	 	 } ) ; 
 
 	 } , 
 
 	 _ c l e a r :   f u n c t i o n ( e v e n t ,   n o P r o p a g a t i o n )   { 
 
 	 	 t h i s . r e v e r t i n g   =   f a l s e ; 
 	 	 / /   W e   d e l a y   a l l   e v e n t s   t h a t   h a v e   t o   b e   t r i g g e r e d   t o   a f t e r   t h e   p o i n t   w h e r e   t h e   p l a c e h o l d e r   h a s   b e e n   r e m o v e d   a n d 
 	 	 / /   e v e r y t h i n g   e l s e   n o r m a l i z e d   a g a i n 
 	 	 v a r   i , 
 	 	 	 d e l a y e d T r i g g e r s   =   [ ] ; 
 
 	 	 / /   W e   f i r s t   h a v e   t o   u p d a t e   t h e   d o m   p o s i t i o n   o f   t h e   a c t u a l   c u r r e n t I t e m 
 	 	 / /   N o t e :   d o n ' t   d o   i t   i f   t h e   c u r r e n t   i t e m   i s   a l r e a d y   r e m o v e d   ( b y   a   u s e r ) ,   o r   i t   g e t s   r e a p p e n d e d   ( s e e   # 4 0 8 8 ) 
 	 	 i f ( ! t h i s . _ n o F i n a l S o r t   & &   t h i s . c u r r e n t I t e m . p a r e n t ( ) . l e n g t h )   { 
 	 	 	 t h i s . p l a c e h o l d e r . b e f o r e ( t h i s . c u r r e n t I t e m ) ; 
 	 	 } 
 	 	 t h i s . _ n o F i n a l S o r t   =   n u l l ; 
 
 	 	 i f ( t h i s . h e l p e r [ 0 ]   = = =   t h i s . c u r r e n t I t e m [ 0 ] )   { 
 	 	 	 f o r ( i   i n   t h i s . _ s t o r e d C S S )   { 
 	 	 	 	 i f ( t h i s . _ s t o r e d C S S [ i ]   = = =   " a u t o "   | |   t h i s . _ s t o r e d C S S [ i ]   = = =   " s t a t i c " )   { 
 	 	 	 	 	 t h i s . _ s t o r e d C S S [ i ]   =   " " ; 
 	 	 	 	 } 
 	 	 	 } 
 	 	 	 t h i s . c u r r e n t I t e m . c s s ( t h i s . _ s t o r e d C S S ) . r e m o v e C l a s s ( " u i - s o r t a b l e - h e l p e r " ) ; 
 	 	 }   e l s e   { 
 	 	 	 t h i s . c u r r e n t I t e m . s h o w ( ) ; 
 	 	 } 
 
 	 	 i f ( t h i s . f r o m O u t s i d e   & &   ! n o P r o p a g a t i o n )   { 
 	 	 	 d e l a y e d T r i g g e r s . p u s h ( f u n c t i o n ( e v e n t )   {   t h i s . _ t r i g g e r ( " r e c e i v e " ,   e v e n t ,   t h i s . _ u i H a s h ( t h i s . f r o m O u t s i d e ) ) ;   } ) ; 
 	 	 } 
 	 	 i f ( ( t h i s . f r o m O u t s i d e   | |   t h i s . d o m P o s i t i o n . p r e v   ! = =   t h i s . c u r r e n t I t e m . p r e v ( ) . n o t ( " . u i - s o r t a b l e - h e l p e r " ) [ 0 ]   | |   t h i s . d o m P o s i t i o n . p a r e n t   ! = =   t h i s . c u r r e n t I t e m . p a r e n t ( ) [ 0 ] )   & &   ! n o P r o p a g a t i o n )   { 
 	 	 	 d e l a y e d T r i g g e r s . p u s h ( f u n c t i o n ( e v e n t )   {   t h i s . _ t r i g g e r ( " u p d a t e " ,   e v e n t ,   t h i s . _ u i H a s h ( ) ) ;   } ) ;   / / T r i g g e r   u p d a t e   c a l l b a c k   i f   t h e   D O M   p o s i t i o n   h a s   c h a n g e d 
 	 	 } 
 
 	 	 / /   C h e c k   i f   t h e   i t e m s   C o n t a i n e r   h a s   C h a n g e d   a n d   t r i g g e r   a p p r o p r i a t e 
 	 	 / /   e v e n t s . 
 	 	 i f   ( t h i s   ! = =   t h i s . c u r r e n t C o n t a i n e r )   { 
 	 	 	 i f ( ! n o P r o p a g a t i o n )   { 
 	 	 	 	 d e l a y e d T r i g g e r s . p u s h ( f u n c t i o n ( e v e n t )   {   t h i s . _ t r i g g e r ( " r e m o v e " ,   e v e n t ,   t h i s . _ u i H a s h ( ) ) ;   } ) ; 
 	 	 	 	 d e l a y e d T r i g g e r s . p u s h ( ( f u n c t i o n ( c )   {   r e t u r n   f u n c t i o n ( e v e n t )   {   c . _ t r i g g e r ( " r e c e i v e " ,   e v e n t ,   t h i s . _ u i H a s h ( t h i s ) ) ;   } ;     } ) . c a l l ( t h i s ,   t h i s . c u r r e n t C o n t a i n e r ) ) ; 
 	 	 	 	 d e l a y e d T r i g g e r s . p u s h ( ( f u n c t i o n ( c )   {   r e t u r n   f u n c t i o n ( e v e n t )   {   c . _ t r i g g e r ( " u p d a t e " ,   e v e n t ,   t h i s . _ u i H a s h ( t h i s ) ) ;     } ;   } ) . c a l l ( t h i s ,   t h i s . c u r r e n t C o n t a i n e r ) ) ; 
 	 	 	 } 
 	 	 } 
 
 
 	 	 / / P o s t   e v e n t s   t o   c o n t a i n e r s 
 	 	 f o r   ( i   =   t h i s . c o n t a i n e r s . l e n g t h   -   1 ;   i   > =   0 ;   i - - ) { 
 	 	 	 i f ( ! n o P r o p a g a t i o n )   { 
 	 	 	 	 d e l a y e d T r i g g e r s . p u s h ( ( f u n c t i o n ( c )   {   r e t u r n   f u n c t i o n ( e v e n t )   {   c . _ t r i g g e r ( " d e a c t i v a t e " ,   e v e n t ,   t h i s . _ u i H a s h ( t h i s ) ) ;   } ;     } ) . c a l l ( t h i s ,   t h i s . c o n t a i n e r s [ i ] ) ) ; 
 	 	 	 } 
 	 	 	 i f ( t h i s . c o n t a i n e r s [ i ] . c o n t a i n e r C a c h e . o v e r )   { 
 	 	 	 	 d e l a y e d T r i g g e r s . p u s h ( ( f u n c t i o n ( c )   {   r e t u r n   f u n c t i o n ( e v e n t )   {   c . _ t r i g g e r ( " o u t " ,   e v e n t ,   t h i s . _ u i H a s h ( t h i s ) ) ;   } ;     } ) . c a l l ( t h i s ,   t h i s . c o n t a i n e r s [ i ] ) ) ; 
 	 	 	 	 t h i s . c o n t a i n e r s [ i ] . c o n t a i n e r C a c h e . o v e r   =   0 ; 
 	 	 	 } 
 	 	 } 
 
 	 	 / / D o   w h a t   w a s   o r i g i n a l l y   i n   p l u g i n s 
 	 	 i f   (   t h i s . s t o r e d C u r s o r   )   { 
 	 	 	 t h i s . d o c u m e n t . f i n d (   " b o d y "   ) . c s s (   " c u r s o r " ,   t h i s . s t o r e d C u r s o r   ) ; 
 	 	 	 t h i s . s t o r e d S t y l e s h e e t . r e m o v e ( ) ; 
 	 	 } 
 	 	 i f ( t h i s . _ s t o r e d O p a c i t y )   { 
 	 	 	 t h i s . h e l p e r . c s s ( " o p a c i t y " ,   t h i s . _ s t o r e d O p a c i t y ) ; 
 	 	 } 
 	 	 i f ( t h i s . _ s t o r e d Z I n d e x )   { 
 	 	 	 t h i s . h e l p e r . c s s ( " z I n d e x " ,   t h i s . _ s t o r e d Z I n d e x   = = =   " a u t o "   ?   " "   :   t h i s . _ s t o r e d Z I n d e x ) ; 
 	 	 } 
 
 	 	 t h i s . d r a g g i n g   =   f a l s e ; 
 	 	 i f ( t h i s . c a n c e l H e l p e r R e m o v a l )   { 
 	 	 	 i f ( ! n o P r o p a g a t i o n )   { 
 	 	 	 	 t h i s . _ t r i g g e r ( " b e f o r e S t o p " ,   e v e n t ,   t h i s . _ u i H a s h ( ) ) ; 
 	 	 	 	 f o r   ( i = 0 ;   i   <   d e l a y e d T r i g g e r s . l e n g t h ;   i + + )   { 
 	 	 	 	 	 d e l a y e d T r i g g e r s [ i ] . c a l l ( t h i s ,   e v e n t ) ; 
 	 	 	 	 }   / / T r i g g e r   a l l   d e l a y e d   e v e n t s 
 	 	 	 	 t h i s . _ t r i g g e r ( " s t o p " ,   e v e n t ,   t h i s . _ u i H a s h ( ) ) ; 
 	 	 	 } 
 
 	 	 	 t h i s . f r o m O u t s i d e   =   f a l s e ; 
 	 	 	 r e t u r n   f a l s e ; 
 	 	 } 
 
 	 	 i f ( ! n o P r o p a g a t i o n )   { 
 	 	 	 t h i s . _ t r i g g e r ( " b e f o r e S t o p " ,   e v e n t ,   t h i s . _ u i H a s h ( ) ) ; 
 	 	 } 
 
 	 	 / / $ ( t h i s . p l a c e h o l d e r [ 0 ] ) . r e m o v e ( ) ;   w o u l d   h a v e   b e e n   t h e   j Q u e r y   w a y   -   u n f o r t u n a t e l y ,   i t   u n b i n d s   A L L   e v e n t s   f r o m   t h e   o r i g i n a l   n o d e ! 
 	 	 t h i s . p l a c e h o l d e r [ 0 ] . p a r e n t N o d e . r e m o v e C h i l d ( t h i s . p l a c e h o l d e r [ 0 ] ) ; 
 
 	 	 i f ( t h i s . h e l p e r [ 0 ]   ! = =   t h i s . c u r r e n t I t e m [ 0 ] )   { 
 	 	 	 t h i s . h e l p e r . r e m o v e ( ) ; 
 	 	 } 
 	 	 t h i s . h e l p e r   =   n u l l ; 
 
 	 	 i f ( ! n o P r o p a g a t i o n )   { 
 	 	 	 f o r   ( i = 0 ;   i   <   d e l a y e d T r i g g e r s . l e n g t h ;   i + + )   { 
 	 	 	 	 d e l a y e d T r i g g e r s [ i ] . c a l l ( t h i s ,   e v e n t ) ; 
 	 	 	 }   / / T r i g g e r   a l l   d e l a y e d   e v e n t s 
 	 	 	 t h i s . _ t r i g g e r ( " s t o p " ,   e v e n t ,   t h i s . _ u i H a s h ( ) ) ; 
 	 	 } 
 
 	 	 t h i s . f r o m O u t s i d e   =   f a l s e ; 
 	 	 r e t u r n   t r u e ; 
 
 	 } , 
 
 	 _ t r i g g e r :   f u n c t i o n ( )   { 
 	 	 i f   ( $ . W i d g e t . p r o t o t y p e . _ t r i g g e r . a p p l y ( t h i s ,   a r g u m e n t s )   = = =   f a l s e )   { 
 	 	 	 t h i s . c a n c e l ( ) ; 
 	 	 } 
 	 } , 
 
 	 _ u i H a s h :   f u n c t i o n ( _ i n s t )   { 
 	 	 v a r   i n s t   =   _ i n s t   | |   t h i s ; 
 	 	 r e t u r n   { 
 	 	 	 h e l p e r :   i n s t . h e l p e r , 
 	 	 	 p l a c e h o l d e r :   i n s t . p l a c e h o l d e r   | |   $ ( [ ] ) , 
 	 	 	 p o s i t i o n :   i n s t . p o s i t i o n , 
 	 	 	 o r i g i n a l P o s i t i o n :   i n s t . o r i g i n a l P o s i t i o n , 
 	 	 	 o f f s e t :   i n s t . p o s i t i o n A b s , 
 	 	 	 i t e m :   i n s t . c u r r e n t I t e m , 
 	 	 	 s e n d e r :   _ i n s t   ?   _ i n s t . e l e m e n t   :   n u l l 
 	 	 } ; 
 	 } 
 
 } ) ; 
 
 } ) ( j Q u e r y ) ; 
 
 ( f u n c t i o n ( $ ,   u n d e f i n e d )   { 
 
 v a r   d a t a S p a c e   =   " u i - e f f e c t s - " ; 
 
 $ . e f f e c t s   =   { 
 	 e f f e c t :   { } 
 } ; 
 
 / * ! 
   *   j Q u e r y   C o l o r   A n i m a t i o n s   v 2 . 1 . 2 
   *   h t t p s : / / g i t h u b . c o m / j q u e r y / j q u e r y - c o l o r 
   * 
   *   C o p y r i g h t   2 0 1 3   j Q u e r y   F o u n d a t i o n   a n d   o t h e r   c o n t r i b u t o r s 
   *   R e l e a s e d   u n d e r   t h e   M I T   l i c e n s e . 
   *   h t t p : / / j q u e r y . o r g / l i c e n s e 
   * 
   *   D a t e :   W e d   J a n   1 6   0 8 : 4 7 : 0 9   2 0 1 3   - 0 6 0 0 
   * / 
 ( f u n c t i o n (   j Q u e r y ,   u n d e f i n e d   )   { 
 
 	 v a r   s t e p H o o k s   =   " b a c k g r o u n d C o l o r   b o r d e r B o t t o m C o l o r   b o r d e r L e f t C o l o r   b o r d e r R i g h t C o l o r   b o r d e r T o p C o l o r   c o l o r   c o l u m n R u l e C o l o r   o u t l i n e C o l o r   t e x t D e c o r a t i o n C o l o r   t e x t E m p h a s i s C o l o r " , 
 
 	 / /   p l u s e q u a l s   t e s t   f o r   + =   1 0 0   - =   1 0 0 
 	 r p l u s e q u a l s   =   / ^ ( [ \ - + ] ) = \ s * ( \ d + \ . ? \ d * ) / , 
 	 / /   a   s e t   o f   R E ' s   t h a t   c a n   m a t c h   s t r i n g s   a n d   g e n e r a t e   c o l o r   t u p l e s . 
 	 s t r i n g P a r s e r s   =   [ { 
 	 	 	 r e :   / r g b a ? \ ( \ s * ( \ d { 1 , 3 } ) \ s * , \ s * ( \ d { 1 , 3 } ) \ s * , \ s * ( \ d { 1 , 3 } ) \ s * ( ? : , \ s * ( \ d ? ( ? : \ . \ d + ) ? ) \ s * ) ? \ ) / , 
 	 	 	 p a r s e :   f u n c t i o n (   e x e c R e s u l t   )   { 
 	 	 	 	 r e t u r n   [ 
 	 	 	 	 	 e x e c R e s u l t [   1   ] , 
 	 	 	 	 	 e x e c R e s u l t [   2   ] , 
 	 	 	 	 	 e x e c R e s u l t [   3   ] , 
 	 	 	 	 	 e x e c R e s u l t [   4   ] 
 	 	 	 	 ] ; 
 	 	 	 } 
 	 	 } ,   { 
 	 	 	 r e :   / r g b a ? \ ( \ s * ( \ d + ( ? : \ . \ d + ) ? ) \ % \ s * , \ s * ( \ d + ( ? : \ . \ d + ) ? ) \ % \ s * , \ s * ( \ d + ( ? : \ . \ d + ) ? ) \ % \ s * ( ? : , \ s * ( \ d ? ( ? : \ . \ d + ) ? ) \ s * ) ? \ ) / , 
 	 	 	 p a r s e :   f u n c t i o n (   e x e c R e s u l t   )   { 
 	 	 	 	 r e t u r n   [ 
 	 	 	 	 	 e x e c R e s u l t [   1   ]   *   2 . 5 5 , 
 	 	 	 	 	 e x e c R e s u l t [   2   ]   *   2 . 5 5 , 
 	 	 	 	 	 e x e c R e s u l t [   3   ]   *   2 . 5 5 , 
 	 	 	 	 	 e x e c R e s u l t [   4   ] 
 	 	 	 	 ] ; 
 	 	 	 } 
 	 	 } ,   { 
 	 	 	 / /   t h i s   r e g e x   i g n o r e s   A - F   b e c a u s e   i t ' s   c o m p a r e d   a g a i n s t   a n   a l r e a d y   l o w e r c a s e d   s t r i n g 
 	 	 	 r e :   / # ( [ a - f 0 - 9 ] { 2 } ) ( [ a - f 0 - 9 ] { 2 } ) ( [ a - f 0 - 9 ] { 2 } ) / , 
 	 	 	 p a r s e :   f u n c t i o n (   e x e c R e s u l t   )   { 
 	 	 	 	 r e t u r n   [ 
 	 	 	 	 	 p a r s e I n t (   e x e c R e s u l t [   1   ] ,   1 6   ) , 
 	 	 	 	 	 p a r s e I n t (   e x e c R e s u l t [   2   ] ,   1 6   ) , 
 	 	 	 	 	 p a r s e I n t (   e x e c R e s u l t [   3   ] ,   1 6   ) 
 	 	 	 	 ] ; 
 	 	 	 } 
 	 	 } ,   { 
 	 	 	 / /   t h i s   r e g e x   i g n o r e s   A - F   b e c a u s e   i t ' s   c o m p a r e d   a g a i n s t   a n   a l r e a d y   l o w e r c a s e d   s t r i n g 
 	 	 	 r e :   / # ( [ a - f 0 - 9 ] ) ( [ a - f 0 - 9 ] ) ( [ a - f 0 - 9 ] ) / , 
 	 	 	 p a r s e :   f u n c t i o n (   e x e c R e s u l t   )   { 
 	 	 	 	 r e t u r n   [ 
 	 	 	 	 	 p a r s e I n t (   e x e c R e s u l t [   1   ]   +   e x e c R e s u l t [   1   ] ,   1 6   ) , 
 	 	 	 	 	 p a r s e I n t (   e x e c R e s u l t [   2   ]   +   e x e c R e s u l t [   2   ] ,   1 6   ) , 
 	 	 	 	 	 p a r s e I n t (   e x e c R e s u l t [   3   ]   +   e x e c R e s u l t [   3   ] ,   1 6   ) 
 	 	 	 	 ] ; 
 	 	 	 } 
 	 	 } ,   { 
 	 	 	 r e :   / h s l a ? \ ( \ s * ( \ d + ( ? : \ . \ d + ) ? ) \ s * , \ s * ( \ d + ( ? : \ . \ d + ) ? ) \ % \ s * , \ s * ( \ d + ( ? : \ . \ d + ) ? ) \ % \ s * ( ? : , \ s * ( \ d ? ( ? : \ . \ d + ) ? ) \ s * ) ? \ ) / , 
 	 	 	 s p a c e :   " h s l a " , 
 	 	 	 p a r s e :   f u n c t i o n (   e x e c R e s u l t   )   { 
 	 	 	 	 r e t u r n   [ 
 	 	 	 	 	 e x e c R e s u l t [   1   ] , 
 	 	 	 	 	 e x e c R e s u l t [   2   ]   /   1 0 0 , 
 	 	 	 	 	 e x e c R e s u l t [   3   ]   /   1 0 0 , 
 	 	 	 	 	 e x e c R e s u l t [   4   ] 
 	 	 	 	 ] ; 
 	 	 	 } 
 	 	 } ] , 
 
 	 / /   j Q u e r y . C o l o r (   ) 
 	 c o l o r   =   j Q u e r y . C o l o r   =   f u n c t i o n (   c o l o r ,   g r e e n ,   b l u e ,   a l p h a   )   { 
 	 	 r e t u r n   n e w   j Q u e r y . C o l o r . f n . p a r s e (   c o l o r ,   g r e e n ,   b l u e ,   a l p h a   ) ; 
 	 } , 
 	 s p a c e s   =   { 
 	 	 r g b a :   { 
 	 	 	 p r o p s :   { 
 	 	 	 	 r e d :   { 
 	 	 	 	 	 i d x :   0 , 
 	 	 	 	 	 t y p e :   " b y t e " 
 	 	 	 	 } , 
 	 	 	 	 g r e e n :   { 
 	 	 	 	 	 i d x :   1 , 
 	 	 	 	 	 t y p e :   " b y t e " 
 	 	 	 	 } , 
 	 	 	 	 b l u e :   { 
 	 	 	 	 	 i d x :   2 , 
 	 	 	 	 	 t y p e :   " b y t e " 
 	 	 	 	 } 
 	 	 	 } 
 	 	 } , 
 
 	 	 h s l a :   { 
 	 	 	 p r o p s :   { 
 	 	 	 	 h u e :   { 
 	 	 	 	 	 i d x :   0 , 
 	 	 	 	 	 t y p e :   " d e g r e e s " 
 	 	 	 	 } , 
 	 	 	 	 s a t u r a t i o n :   { 
 	 	 	 	 	 i d x :   1 , 
 	 	 	 	 	 t y p e :   " p e r c e n t " 
 	 	 	 	 } , 
 	 	 	 	 l i g h t n e s s :   { 
 	 	 	 	 	 i d x :   2 , 
 	 	 	 	 	 t y p e :   " p e r c e n t " 
 	 	 	 	 } 
 	 	 	 } 
 	 	 } 
 	 } , 
 	 p r o p T y p e s   =   { 
 	 	 " b y t e " :   { 
 	 	 	 f l o o r :   t r u e , 
 	 	 	 m a x :   2 5 5 
 	 	 } , 
 	 	 " p e r c e n t " :   { 
 	 	 	 m a x :   1 
 	 	 } , 
 	 	 " d e g r e e s " :   { 
 	 	 	 m o d :   3 6 0 , 
 	 	 	 f l o o r :   t r u e 
 	 	 } 
 	 } , 
 	 s u p p o r t   =   c o l o r . s u p p o r t   =   { } , 
 
 	 / /   e l e m e n t   f o r   s u p p o r t   t e s t s 
 	 s u p p o r t E l e m   =   j Q u e r y (   " < p > "   ) [   0   ] , 
 
 	 / /   c o l o r s   =   j Q u e r y . C o l o r . n a m e s 
 	 c o l o r s , 
 
 	 / /   l o c a l   a l i a s e s   o f   f u n c t i o n s   c a l l e d   o f t e n 
 	 e a c h   =   j Q u e r y . e a c h ; 
 
 / /   d e t e r m i n e   r g b a   s u p p o r t   i m m e d i a t e l y 
 s u p p o r t E l e m . s t y l e . c s s T e x t   =   " b a c k g r o u n d - c o l o r : r g b a ( 1 , 1 , 1 , . 5 ) " ; 
 s u p p o r t . r g b a   =   s u p p o r t E l e m . s t y l e . b a c k g r o u n d C o l o r . i n d e x O f (   " r g b a "   )   >   - 1 ; 
 
 / /   d e f i n e   c a c h e   n a m e   a n d   a l p h a   p r o p e r t i e s 
 / /   f o r   r g b a   a n d   h s l a   s p a c e s 
 e a c h (   s p a c e s ,   f u n c t i o n (   s p a c e N a m e ,   s p a c e   )   { 
 	 s p a c e . c a c h e   =   " _ "   +   s p a c e N a m e ; 
 	 s p a c e . p r o p s . a l p h a   =   { 
 	 	 i d x :   3 , 
 	 	 t y p e :   " p e r c e n t " , 
 	 	 d e f :   1 
 	 } ; 
 } ) ; 
 
 f u n c t i o n   c l a m p (   v a l u e ,   p r o p ,   a l l o w E m p t y   )   { 
 	 v a r   t y p e   =   p r o p T y p e s [   p r o p . t y p e   ]   | |   { } ; 
 
 	 i f   (   v a l u e   = =   n u l l   )   { 
 	 	 r e t u r n   ( a l l o w E m p t y   | |   ! p r o p . d e f )   ?   n u l l   :   p r o p . d e f ; 
 	 } 
 
 	 / /   ~ ~   i s   a n   s h o r t   w a y   o f   d o i n g   f l o o r   f o r   p o s i t i v e   n u m b e r s 
 	 v a l u e   =   t y p e . f l o o r   ?   ~ ~ v a l u e   :   p a r s e F l o a t (   v a l u e   ) ; 
 
 	 / /   I E   w i l l   p a s s   i n   e m p t y   s t r i n g s   a s   v a l u e   f o r   a l p h a , 
 	 / /   w h i c h   w i l l   h i t   t h i s   c a s e 
 	 i f   (   i s N a N (   v a l u e   )   )   { 
 	 	 r e t u r n   p r o p . d e f ; 
 	 } 
 
 	 i f   (   t y p e . m o d   )   { 
 	 	 / /   w e   a d d   m o d   b e f o r e   m o d d i n g   t o   m a k e   s u r e   t h a t   n e g a t i v e s   v a l u e s 
 	 	 / /   g e t   c o n v e r t e d   p r o p e r l y :   - 1 0   - >   3 5 0 
 	 	 r e t u r n   ( v a l u e   +   t y p e . m o d )   %   t y p e . m o d ; 
 	 } 
 
 	 / /   f o r   n o w   a l l   p r o p e r t y   t y p e s   w i t h o u t   m o d   h a v e   m i n   a n d   m a x 
 	 r e t u r n   0   >   v a l u e   ?   0   :   t y p e . m a x   <   v a l u e   ?   t y p e . m a x   :   v a l u e ; 
 } 
 
 f u n c t i o n   s t r i n g P a r s e (   s t r i n g   )   { 
 	 v a r   i n s t   =   c o l o r ( ) , 
 	 	 r g b a   =   i n s t . _ r g b a   =   [ ] ; 
 
 	 s t r i n g   =   s t r i n g . t o L o w e r C a s e ( ) ; 
 
 	 e a c h (   s t r i n g P a r s e r s ,   f u n c t i o n (   i ,   p a r s e r   )   { 
 	 	 v a r   p a r s e d , 
 	 	 	 m a t c h   =   p a r s e r . r e . e x e c (   s t r i n g   ) , 
 	 	 	 v a l u e s   =   m a t c h   & &   p a r s e r . p a r s e (   m a t c h   ) , 
 	 	 	 s p a c e N a m e   =   p a r s e r . s p a c e   | |   " r g b a " ; 
 
 	 	 i f   (   v a l u e s   )   { 
 	 	 	 p a r s e d   =   i n s t [   s p a c e N a m e   ] (   v a l u e s   ) ; 
 
 	 	 	 / /   i f   t h i s   w a s   a n   r g b a   p a r s e   t h e   a s s i g n m e n t   m i g h t   h a p p e n   t w i c e 
 	 	 	 / /   o h   w e l l . . . . 
 	 	 	 i n s t [   s p a c e s [   s p a c e N a m e   ] . c a c h e   ]   =   p a r s e d [   s p a c e s [   s p a c e N a m e   ] . c a c h e   ] ; 
 	 	 	 r g b a   =   i n s t . _ r g b a   =   p a r s e d . _ r g b a ; 
 
 	 	 	 / /   e x i t   e a c h (   s t r i n g P a r s e r s   )   h e r e   b e c a u s e   w e   m a t c h e d 
 	 	 	 r e t u r n   f a l s e ; 
 	 	 } 
 	 } ) ; 
 
 	 / /   F o u n d   a   s t r i n g P a r s e r   t h a t   h a n d l e d   i t 
 	 i f   (   r g b a . l e n g t h   )   { 
 
 	 	 / /   i f   t h i s   c a m e   f r o m   a   p a r s e d   s t r i n g ,   f o r c e   " t r a n s p a r e n t "   w h e n   a l p h a   i s   0 
 	 	 / /   c h r o m e ,   ( a n d   m a y b e   o t h e r s )   r e t u r n   " t r a n s p a r e n t "   a s   r g b a ( 0 , 0 , 0 , 0 ) 
 	 	 i f   (   r g b a . j o i n ( )   = = =   " 0 , 0 , 0 , 0 "   )   { 
 	 	 	 j Q u e r y . e x t e n d (   r g b a ,   c o l o r s . t r a n s p a r e n t   ) ; 
 	 	 } 
 	 	 r e t u r n   i n s t ; 
 	 } 
 
 	 / /   n a m e d   c o l o r s 
 	 r e t u r n   c o l o r s [   s t r i n g   ] ; 
 } 
 
 c o l o r . f n   =   j Q u e r y . e x t e n d (   c o l o r . p r o t o t y p e ,   { 
 	 p a r s e :   f u n c t i o n (   r e d ,   g r e e n ,   b l u e ,   a l p h a   )   { 
 	 	 i f   (   r e d   = = =   u n d e f i n e d   )   { 
 	 	 	 t h i s . _ r g b a   =   [   n u l l ,   n u l l ,   n u l l ,   n u l l   ] ; 
 	 	 	 r e t u r n   t h i s ; 
 	 	 } 
 	 	 i f   (   r e d . j q u e r y   | |   r e d . n o d e T y p e   )   { 
 	 	 	 r e d   =   j Q u e r y (   r e d   ) . c s s (   g r e e n   ) ; 
 	 	 	 g r e e n   =   u n d e f i n e d ; 
 	 	 } 
 
 	 	 v a r   i n s t   =   t h i s , 
 	 	 	 t y p e   =   j Q u e r y . t y p e (   r e d   ) , 
 	 	 	 r g b a   =   t h i s . _ r g b a   =   [ ] ; 
 
 	 	 / /   m o r e   t h a n   1   a r g u m e n t   s p e c i f i e d   -   a s s u m e   (   r e d ,   g r e e n ,   b l u e ,   a l p h a   ) 
 	 	 i f   (   g r e e n   ! = =   u n d e f i n e d   )   { 
 	 	 	 r e d   =   [   r e d ,   g r e e n ,   b l u e ,   a l p h a   ] ; 
 	 	 	 t y p e   =   " a r r a y " ; 
 	 	 } 
 
 	 	 i f   (   t y p e   = = =   " s t r i n g "   )   { 
 	 	 	 r e t u r n   t h i s . p a r s e (   s t r i n g P a r s e (   r e d   )   | |   c o l o r s . _ d e f a u l t   ) ; 
 	 	 } 
 
 	 	 i f   (   t y p e   = = =   " a r r a y "   )   { 
 	 	 	 e a c h (   s p a c e s . r g b a . p r o p s ,   f u n c t i o n (   k e y ,   p r o p   )   { 
 	 	 	 	 r g b a [   p r o p . i d x   ]   =   c l a m p (   r e d [   p r o p . i d x   ] ,   p r o p   ) ; 
 	 	 	 } ) ; 
 	 	 	 r e t u r n   t h i s ; 
 	 	 } 
 
 	 	 i f   (   t y p e   = = =   " o b j e c t "   )   { 
 	 	 	 i f   (   r e d   i n s t a n c e o f   c o l o r   )   { 
 	 	 	 	 e a c h (   s p a c e s ,   f u n c t i o n (   s p a c e N a m e ,   s p a c e   )   { 
 	 	 	 	 	 i f   (   r e d [   s p a c e . c a c h e   ]   )   { 
 	 	 	 	 	 	 i n s t [   s p a c e . c a c h e   ]   =   r e d [   s p a c e . c a c h e   ] . s l i c e ( ) ; 
 	 	 	 	 	 } 
 	 	 	 	 } ) ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 e a c h (   s p a c e s ,   f u n c t i o n (   s p a c e N a m e ,   s p a c e   )   { 
 	 	 	 	 	 v a r   c a c h e   =   s p a c e . c a c h e ; 
 	 	 	 	 	 e a c h (   s p a c e . p r o p s ,   f u n c t i o n (   k e y ,   p r o p   )   { 
 
 	 	 	 	 	 	 / /   i f   t h e   c a c h e   d o e s n ' t   e x i s t ,   a n d   w e   k n o w   h o w   t o   c o n v e r t 
 	 	 	 	 	 	 i f   (   ! i n s t [   c a c h e   ]   & &   s p a c e . t o   )   { 
 
 	 	 	 	 	 	 	 / /   i f   t h e   v a l u e   w a s   n u l l ,   w e   d o n ' t   n e e d   t o   c o p y   i t 
 	 	 	 	 	 	 	 / /   i f   t h e   k e y   w a s   a l p h a ,   w e   d o n ' t   n e e d   t o   c o p y   i t   e i t h e r 
 	 	 	 	 	 	 	 i f   (   k e y   = = =   " a l p h a "   | |   r e d [   k e y   ]   = =   n u l l   )   { 
 	 	 	 	 	 	 	 	 r e t u r n ; 
 	 	 	 	 	 	 	 } 
 	 	 	 	 	 	 	 i n s t [   c a c h e   ]   =   s p a c e . t o (   i n s t . _ r g b a   ) ; 
 	 	 	 	 	 	 } 
 
 	 	 	 	 	 	 / /   t h i s   i s   t h e   o n l y   c a s e   w h e r e   w e   a l l o w   n u l l s   f o r   A L L   p r o p e r t i e s . 
 	 	 	 	 	 	 / /   c a l l   c l a m p   w i t h   a l w a y s A l l o w E m p t y 
 	 	 	 	 	 	 i n s t [   c a c h e   ] [   p r o p . i d x   ]   =   c l a m p (   r e d [   k e y   ] ,   p r o p ,   t r u e   ) ; 
 	 	 	 	 	 } ) ; 
 
 	 	 	 	 	 / /   e v e r y t h i n g   d e f i n e d   b u t   a l p h a ? 
 	 	 	 	 	 i f   (   i n s t [   c a c h e   ]   & &   j Q u e r y . i n A r r a y (   n u l l ,   i n s t [   c a c h e   ] . s l i c e (   0 ,   3   )   )   <   0   )   { 
 	 	 	 	 	 	 / /   u s e   t h e   d e f a u l t   o f   1 
 	 	 	 	 	 	 i n s t [   c a c h e   ] [   3   ]   =   1 ; 
 	 	 	 	 	 	 i f   (   s p a c e . f r o m   )   { 
 	 	 	 	 	 	 	 i n s t . _ r g b a   =   s p a c e . f r o m (   i n s t [   c a c h e   ]   ) ; 
 	 	 	 	 	 	 } 
 	 	 	 	 	 } 
 	 	 	 	 } ) ; 
 	 	 	 } 
 	 	 	 r e t u r n   t h i s ; 
 	 	 } 
 	 } , 
 	 i s :   f u n c t i o n (   c o m p a r e   )   { 
 	 	 v a r   i s   =   c o l o r (   c o m p a r e   ) , 
 	 	 	 s a m e   =   t r u e , 
 	 	 	 i n s t   =   t h i s ; 
 
 	 	 e a c h (   s p a c e s ,   f u n c t i o n (   _ ,   s p a c e   )   { 
 	 	 	 v a r   l o c a l C a c h e , 
 	 	 	 	 i s C a c h e   =   i s [   s p a c e . c a c h e   ] ; 
 	 	 	 i f   ( i s C a c h e )   { 
 	 	 	 	 l o c a l C a c h e   =   i n s t [   s p a c e . c a c h e   ]   | |   s p a c e . t o   & &   s p a c e . t o (   i n s t . _ r g b a   )   | |   [ ] ; 
 	 	 	 	 e a c h (   s p a c e . p r o p s ,   f u n c t i o n (   _ ,   p r o p   )   { 
 	 	 	 	 	 i f   (   i s C a c h e [   p r o p . i d x   ]   ! =   n u l l   )   { 
 	 	 	 	 	 	 s a m e   =   (   i s C a c h e [   p r o p . i d x   ]   = = =   l o c a l C a c h e [   p r o p . i d x   ]   ) ; 
 	 	 	 	 	 	 r e t u r n   s a m e ; 
 	 	 	 	 	 } 
 	 	 	 	 } ) ; 
 	 	 	 } 
 	 	 	 r e t u r n   s a m e ; 
 	 	 } ) ; 
 	 	 r e t u r n   s a m e ; 
 	 } , 
 	 _ s p a c e :   f u n c t i o n ( )   { 
 	 	 v a r   u s e d   =   [ ] , 
 	 	 	 i n s t   =   t h i s ; 
 	 	 e a c h (   s p a c e s ,   f u n c t i o n (   s p a c e N a m e ,   s p a c e   )   { 
 	 	 	 i f   (   i n s t [   s p a c e . c a c h e   ]   )   { 
 	 	 	 	 u s e d . p u s h (   s p a c e N a m e   ) ; 
 	 	 	 } 
 	 	 } ) ; 
 	 	 r e t u r n   u s e d . p o p ( ) ; 
 	 } , 
 	 t r a n s i t i o n :   f u n c t i o n (   o t h e r ,   d i s t a n c e   )   { 
 	 	 v a r   e n d   =   c o l o r (   o t h e r   ) , 
 	 	 	 s p a c e N a m e   =   e n d . _ s p a c e ( ) , 
 	 	 	 s p a c e   =   s p a c e s [   s p a c e N a m e   ] , 
 	 	 	 s t a r t C o l o r   =   t h i s . a l p h a ( )   = = =   0   ?   c o l o r (   " t r a n s p a r e n t "   )   :   t h i s , 
 	 	 	 s t a r t   =   s t a r t C o l o r [   s p a c e . c a c h e   ]   | |   s p a c e . t o (   s t a r t C o l o r . _ r g b a   ) , 
 	 	 	 r e s u l t   =   s t a r t . s l i c e ( ) ; 
 
 	 	 e n d   =   e n d [   s p a c e . c a c h e   ] ; 
 	 	 e a c h (   s p a c e . p r o p s ,   f u n c t i o n (   k e y ,   p r o p   )   { 
 	 	 	 v a r   i n d e x   =   p r o p . i d x , 
 	 	 	 	 s t a r t V a l u e   =   s t a r t [   i n d e x   ] , 
 	 	 	 	 e n d V a l u e   =   e n d [   i n d e x   ] , 
 	 	 	 	 t y p e   =   p r o p T y p e s [   p r o p . t y p e   ]   | |   { } ; 
 
 	 	 	 / /   i f   n u l l ,   d o n ' t   o v e r r i d e   s t a r t   v a l u e 
 	 	 	 i f   (   e n d V a l u e   = = =   n u l l   )   { 
 	 	 	 	 r e t u r n ; 
 	 	 	 } 
 	 	 	 / /   i f   n u l l   -   u s e   e n d 
 	 	 	 i f   (   s t a r t V a l u e   = = =   n u l l   )   { 
 	 	 	 	 r e s u l t [   i n d e x   ]   =   e n d V a l u e ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 i f   (   t y p e . m o d   )   { 
 	 	 	 	 	 i f   (   e n d V a l u e   -   s t a r t V a l u e   >   t y p e . m o d   /   2   )   { 
 	 	 	 	 	 	 s t a r t V a l u e   + =   t y p e . m o d ; 
 	 	 	 	 	 }   e l s e   i f   (   s t a r t V a l u e   -   e n d V a l u e   >   t y p e . m o d   /   2   )   { 
 	 	 	 	 	 	 s t a r t V a l u e   - =   t y p e . m o d ; 
 	 	 	 	 	 } 
 	 	 	 	 } 
 	 	 	 	 r e s u l t [   i n d e x   ]   =   c l a m p (   (   e n d V a l u e   -   s t a r t V a l u e   )   *   d i s t a n c e   +   s t a r t V a l u e ,   p r o p   ) ; 
 	 	 	 } 
 	 	 } ) ; 
 	 	 r e t u r n   t h i s [   s p a c e N a m e   ] (   r e s u l t   ) ; 
 	 } , 
 	 b l e n d :   f u n c t i o n (   o p a q u e   )   { 
 	 	 / /   i f   w e   a r e   a l r e a d y   o p a q u e   -   r e t u r n   o u r s e l f 
 	 	 i f   (   t h i s . _ r g b a [   3   ]   = = =   1   )   { 
 	 	 	 r e t u r n   t h i s ; 
 	 	 } 
 
 	 	 v a r   r g b   =   t h i s . _ r g b a . s l i c e ( ) , 
 	 	 	 a   =   r g b . p o p ( ) , 
 	 	 	 b l e n d   =   c o l o r (   o p a q u e   ) . _ r g b a ; 
 
 	 	 r e t u r n   c o l o r (   j Q u e r y . m a p (   r g b ,   f u n c t i o n (   v ,   i   )   { 
 	 	 	 r e t u r n   (   1   -   a   )   *   b l e n d [   i   ]   +   a   *   v ; 
 	 	 } ) ) ; 
 	 } , 
 	 t o R g b a S t r i n g :   f u n c t i o n ( )   { 
 	 	 v a r   p r e f i x   =   " r g b a ( " , 
 	 	 	 r g b a   =   j Q u e r y . m a p (   t h i s . _ r g b a ,   f u n c t i o n (   v ,   i   )   { 
 	 	 	 	 r e t u r n   v   = =   n u l l   ?   (   i   >   2   ?   1   :   0   )   :   v ; 
 	 	 	 } ) ; 
 
 	 	 i f   (   r g b a [   3   ]   = = =   1   )   { 
 	 	 	 r g b a . p o p ( ) ; 
 	 	 	 p r e f i x   =   " r g b ( " ; 
 	 	 } 
 
 	 	 r e t u r n   p r e f i x   +   r g b a . j o i n ( )   +   " ) " ; 
 	 } , 
 	 t o H s l a S t r i n g :   f u n c t i o n ( )   { 
 	 	 v a r   p r e f i x   =   " h s l a ( " , 
 	 	 	 h s l a   =   j Q u e r y . m a p (   t h i s . h s l a ( ) ,   f u n c t i o n (   v ,   i   )   { 
 	 	 	 	 i f   (   v   = =   n u l l   )   { 
 	 	 	 	 	 v   =   i   >   2   ?   1   :   0 ; 
 	 	 	 	 } 
 
 	 	 	 	 / /   c a t c h   1   a n d   2 
 	 	 	 	 i f   (   i   & &   i   <   3   )   { 
 	 	 	 	 	 v   =   M a t h . r o u n d (   v   *   1 0 0   )   +   " % " ; 
 	 	 	 	 } 
 	 	 	 	 r e t u r n   v ; 
 	 	 	 } ) ; 
 
 	 	 i f   (   h s l a [   3   ]   = = =   1   )   { 
 	 	 	 h s l a . p o p ( ) ; 
 	 	 	 p r e f i x   =   " h s l ( " ; 
 	 	 } 
 	 	 r e t u r n   p r e f i x   +   h s l a . j o i n ( )   +   " ) " ; 
 	 } , 
 	 t o H e x S t r i n g :   f u n c t i o n (   i n c l u d e A l p h a   )   { 
 	 	 v a r   r g b a   =   t h i s . _ r g b a . s l i c e ( ) , 
 	 	 	 a l p h a   =   r g b a . p o p ( ) ; 
 
 	 	 i f   (   i n c l u d e A l p h a   )   { 
 	 	 	 r g b a . p u s h (   ~ ~ (   a l p h a   *   2 5 5   )   ) ; 
 	 	 } 
 
 	 	 r e t u r n   " # "   +   j Q u e r y . m a p (   r g b a ,   f u n c t i o n (   v   )   { 
 
 	 	 	 / /   d e f a u l t   t o   0   w h e n   n u l l s   e x i s t 
 	 	 	 v   =   (   v   | |   0   ) . t o S t r i n g (   1 6   ) ; 
 	 	 	 r e t u r n   v . l e n g t h   = = =   1   ?   " 0 "   +   v   :   v ; 
 	 	 } ) . j o i n ( " " ) ; 
 	 } , 
 	 t o S t r i n g :   f u n c t i o n ( )   { 
 	 	 r e t u r n   t h i s . _ r g b a [   3   ]   = = =   0   ?   " t r a n s p a r e n t "   :   t h i s . t o R g b a S t r i n g ( ) ; 
 	 } 
 } ) ; 
 c o l o r . f n . p a r s e . p r o t o t y p e   =   c o l o r . f n ; 
 
 / /   h s l a   c o n v e r s i o n s   a d a p t e d   f r o m : 
 / /   h t t p s : / / c o d e . g o o g l e . c o m / p / m a a s h a a c k / s o u r c e / b r o w s e / p a c k a g e s / g r a p h i c s / t r u n k / s r c / g r a p h i c s / c o l o r s / H U E 2 R G B . a s ? r = 5 0 2 1 
 
 f u n c t i o n   h u e 2 r g b (   p ,   q ,   h   )   { 
 	 h   =   (   h   +   1   )   %   1 ; 
 	 i f   (   h   *   6   <   1   )   { 
 	 	 r e t u r n   p   +   ( q   -   p )   *   h   *   6 ; 
 	 } 
 	 i f   (   h   *   2   <   1 )   { 
 	 	 r e t u r n   q ; 
 	 } 
 	 i f   (   h   *   3   <   2   )   { 
 	 	 r e t u r n   p   +   ( q   -   p )   *   ( ( 2 / 3 )   -   h )   *   6 ; 
 	 } 
 	 r e t u r n   p ; 
 } 
 
 s p a c e s . h s l a . t o   =   f u n c t i o n   (   r g b a   )   { 
 	 i f   (   r g b a [   0   ]   = =   n u l l   | |   r g b a [   1   ]   = =   n u l l   | |   r g b a [   2   ]   = =   n u l l   )   { 
 	 	 r e t u r n   [   n u l l ,   n u l l ,   n u l l ,   r g b a [   3   ]   ] ; 
 	 } 
 	 v a r   r   =   r g b a [   0   ]   /   2 5 5 , 
 	 	 g   =   r g b a [   1   ]   /   2 5 5 , 
 	 	 b   =   r g b a [   2   ]   /   2 5 5 , 
 	 	 a   =   r g b a [   3   ] , 
 	 	 m a x   =   M a t h . m a x (   r ,   g ,   b   ) , 
 	 	 m i n   =   M a t h . m i n (   r ,   g ,   b   ) , 
 	 	 d i f f   =   m a x   -   m i n , 
 	 	 a d d   =   m a x   +   m i n , 
 	 	 l   =   a d d   *   0 . 5 , 
 	 	 h ,   s ; 
 
 	 i f   (   m i n   = = =   m a x   )   { 
 	 	 h   =   0 ; 
 	 }   e l s e   i f   (   r   = = =   m a x   )   { 
 	 	 h   =   (   6 0   *   (   g   -   b   )   /   d i f f   )   +   3 6 0 ; 
 	 }   e l s e   i f   (   g   = = =   m a x   )   { 
 	 	 h   =   (   6 0   *   (   b   -   r   )   /   d i f f   )   +   1 2 0 ; 
 	 }   e l s e   { 
 	 	 h   =   (   6 0   *   (   r   -   g   )   /   d i f f   )   +   2 4 0 ; 
 	 } 
 
 	 / /   c h r o m a   ( d i f f )   = =   0   m e a n s   g r e y s c a l e   w h i c h ,   b y   d e f i n i t i o n ,   s a t u r a t i o n   =   0 % 
 	 / /   o t h e r w i s e ,   s a t u r a t i o n   i s   b a s e d   o n   t h e   r a t i o   o f   c h r o m a   ( d i f f )   t o   l i g h t n e s s   ( a d d ) 
 	 i f   (   d i f f   = = =   0   )   { 
 	 	 s   =   0 ; 
 	 }   e l s e   i f   (   l   < =   0 . 5   )   { 
 	 	 s   =   d i f f   /   a d d ; 
 	 }   e l s e   { 
 	 	 s   =   d i f f   /   (   2   -   a d d   ) ; 
 	 } 
 	 r e t u r n   [   M a t h . r o u n d ( h )   %   3 6 0 ,   s ,   l ,   a   = =   n u l l   ?   1   :   a   ] ; 
 } ; 
 
 s p a c e s . h s l a . f r o m   =   f u n c t i o n   (   h s l a   )   { 
 	 i f   (   h s l a [   0   ]   = =   n u l l   | |   h s l a [   1   ]   = =   n u l l   | |   h s l a [   2   ]   = =   n u l l   )   { 
 	 	 r e t u r n   [   n u l l ,   n u l l ,   n u l l ,   h s l a [   3   ]   ] ; 
 	 } 
 	 v a r   h   =   h s l a [   0   ]   /   3 6 0 , 
 	 	 s   =   h s l a [   1   ] , 
 	 	 l   =   h s l a [   2   ] , 
 	 	 a   =   h s l a [   3   ] , 
 	 	 q   =   l   < =   0 . 5   ?   l   *   (   1   +   s   )   :   l   +   s   -   l   *   s , 
 	 	 p   =   2   *   l   -   q ; 
 
 	 r e t u r n   [ 
 	 	 M a t h . r o u n d (   h u e 2 r g b (   p ,   q ,   h   +   (   1   /   3   )   )   *   2 5 5   ) , 
 	 	 M a t h . r o u n d (   h u e 2 r g b (   p ,   q ,   h   )   *   2 5 5   ) , 
 	 	 M a t h . r o u n d (   h u e 2 r g b (   p ,   q ,   h   -   (   1   /   3   )   )   *   2 5 5   ) , 
 	 	 a 
 	 ] ; 
 } ; 
 
 
 e a c h (   s p a c e s ,   f u n c t i o n (   s p a c e N a m e ,   s p a c e   )   { 
 	 v a r   p r o p s   =   s p a c e . p r o p s , 
 	 	 c a c h e   =   s p a c e . c a c h e , 
 	 	 t o   =   s p a c e . t o , 
 	 	 f r o m   =   s p a c e . f r o m ; 
 
 	 / /   m a k e s   r g b a ( )   a n d   h s l a ( ) 
 	 c o l o r . f n [   s p a c e N a m e   ]   =   f u n c t i o n (   v a l u e   )   { 
 
 	 	 / /   g e n e r a t e   a   c a c h e   f o r   t h i s   s p a c e   i f   i t   d o e s n ' t   e x i s t 
 	 	 i f   (   t o   & &   ! t h i s [   c a c h e   ]   )   { 
 	 	 	 t h i s [   c a c h e   ]   =   t o (   t h i s . _ r g b a   ) ; 
 	 	 } 
 	 	 i f   (   v a l u e   = = =   u n d e f i n e d   )   { 
 	 	 	 r e t u r n   t h i s [   c a c h e   ] . s l i c e ( ) ; 
 	 	 } 
 
 	 	 v a r   r e t , 
 	 	 	 t y p e   =   j Q u e r y . t y p e (   v a l u e   ) , 
 	 	 	 a r r   =   (   t y p e   = = =   " a r r a y "   | |   t y p e   = = =   " o b j e c t "   )   ?   v a l u e   :   a r g u m e n t s , 
 	 	 	 l o c a l   =   t h i s [   c a c h e   ] . s l i c e ( ) ; 
 
 	 	 e a c h (   p r o p s ,   f u n c t i o n (   k e y ,   p r o p   )   { 
 	 	 	 v a r   v a l   =   a r r [   t y p e   = = =   " o b j e c t "   ?   k e y   :   p r o p . i d x   ] ; 
 	 	 	 i f   (   v a l   = =   n u l l   )   { 
 	 	 	 	 v a l   =   l o c a l [   p r o p . i d x   ] ; 
 	 	 	 } 
 	 	 	 l o c a l [   p r o p . i d x   ]   =   c l a m p (   v a l ,   p r o p   ) ; 
 	 	 } ) ; 
 
 	 	 i f   (   f r o m   )   { 
 	 	 	 r e t   =   c o l o r (   f r o m (   l o c a l   )   ) ; 
 	 	 	 r e t [   c a c h e   ]   =   l o c a l ; 
 	 	 	 r e t u r n   r e t ; 
 	 	 }   e l s e   { 
 	 	 	 r e t u r n   c o l o r (   l o c a l   ) ; 
 	 	 } 
 	 } ; 
 
 	 / /   m a k e s   r e d ( )   g r e e n ( )   b l u e ( )   a l p h a ( )   h u e ( )   s a t u r a t i o n ( )   l i g h t n e s s ( ) 
 	 e a c h (   p r o p s ,   f u n c t i o n (   k e y ,   p r o p   )   { 
 	 	 / /   a l p h a   i s   i n c l u d e d   i n   m o r e   t h a n   o n e   s p a c e 
 	 	 i f   (   c o l o r . f n [   k e y   ]   )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 	 	 c o l o r . f n [   k e y   ]   =   f u n c t i o n (   v a l u e   )   { 
 	 	 	 v a r   v t y p e   =   j Q u e r y . t y p e (   v a l u e   ) , 
 	 	 	 	 f n   =   (   k e y   = = =   " a l p h a "   ?   (   t h i s . _ h s l a   ?   " h s l a "   :   " r g b a "   )   :   s p a c e N a m e   ) , 
 	 	 	 	 l o c a l   =   t h i s [   f n   ] ( ) , 
 	 	 	 	 c u r   =   l o c a l [   p r o p . i d x   ] , 
 	 	 	 	 m a t c h ; 
 
 	 	 	 i f   (   v t y p e   = = =   " u n d e f i n e d "   )   { 
 	 	 	 	 r e t u r n   c u r ; 
 	 	 	 } 
 
 	 	 	 i f   (   v t y p e   = = =   " f u n c t i o n "   )   { 
 	 	 	 	 v a l u e   =   v a l u e . c a l l (   t h i s ,   c u r   ) ; 
 	 	 	 	 v t y p e   =   j Q u e r y . t y p e (   v a l u e   ) ; 
 	 	 	 } 
 	 	 	 i f   (   v a l u e   = =   n u l l   & &   p r o p . e m p t y   )   { 
 	 	 	 	 r e t u r n   t h i s ; 
 	 	 	 } 
 	 	 	 i f   (   v t y p e   = = =   " s t r i n g "   )   { 
 	 	 	 	 m a t c h   =   r p l u s e q u a l s . e x e c (   v a l u e   ) ; 
 	 	 	 	 i f   (   m a t c h   )   { 
 	 	 	 	 	 v a l u e   =   c u r   +   p a r s e F l o a t (   m a t c h [   2   ]   )   *   (   m a t c h [   1   ]   = = =   " + "   ?   1   :   - 1   ) ; 
 	 	 	 	 } 
 	 	 	 } 
 	 	 	 l o c a l [   p r o p . i d x   ]   =   v a l u e ; 
 	 	 	 r e t u r n   t h i s [   f n   ] (   l o c a l   ) ; 
 	 	 } ; 
 	 } ) ; 
 } ) ; 
 
 / /   a d d   c s s H o o k   a n d   . f x . s t e p   f u n c t i o n   f o r   e a c h   n a m e d   h o o k . 
 / /   a c c e p t   a   s p a c e   s e p a r a t e d   s t r i n g   o f   p r o p e r t i e s 
 c o l o r . h o o k   =   f u n c t i o n (   h o o k   )   { 
 	 v a r   h o o k s   =   h o o k . s p l i t (   "   "   ) ; 
 	 e a c h (   h o o k s ,   f u n c t i o n (   i ,   h o o k   )   { 
 	 	 j Q u e r y . c s s H o o k s [   h o o k   ]   =   { 
 	 	 	 s e t :   f u n c t i o n (   e l e m ,   v a l u e   )   { 
 	 	 	 	 v a r   p a r s e d ,   c u r E l e m , 
 	 	 	 	 	 b a c k g r o u n d C o l o r   =   " " ; 
 
 	 	 	 	 i f   (   v a l u e   ! = =   " t r a n s p a r e n t "   & &   (   j Q u e r y . t y p e (   v a l u e   )   ! = =   " s t r i n g "   | |   (   p a r s e d   =   s t r i n g P a r s e (   v a l u e   )   )   )   )   { 
 	 	 	 	 	 v a l u e   =   c o l o r (   p a r s e d   | |   v a l u e   ) ; 
 	 	 	 	 	 i f   (   ! s u p p o r t . r g b a   & &   v a l u e . _ r g b a [   3   ]   ! = =   1   )   { 
 	 	 	 	 	 	 c u r E l e m   =   h o o k   = = =   " b a c k g r o u n d C o l o r "   ?   e l e m . p a r e n t N o d e   :   e l e m ; 
 	 	 	 	 	 	 w h i l e   ( 
 	 	 	 	 	 	 	 ( b a c k g r o u n d C o l o r   = = =   " "   | |   b a c k g r o u n d C o l o r   = = =   " t r a n s p a r e n t " )   & & 
 	 	 	 	 	 	 	 c u r E l e m   & &   c u r E l e m . s t y l e 
 	 	 	 	 	 	 )   { 
 	 	 	 	 	 	 	 t r y   { 
 	 	 	 	 	 	 	 	 b a c k g r o u n d C o l o r   =   j Q u e r y . c s s (   c u r E l e m ,   " b a c k g r o u n d C o l o r "   ) ; 
 	 	 	 	 	 	 	 	 c u r E l e m   =   c u r E l e m . p a r e n t N o d e ; 
 	 	 	 	 	 	 	 }   c a t c h   (   e   )   { 
 	 	 	 	 	 	 	 } 
 	 	 	 	 	 	 } 
 
 	 	 	 	 	 	 v a l u e   =   v a l u e . b l e n d (   b a c k g r o u n d C o l o r   & &   b a c k g r o u n d C o l o r   ! = =   " t r a n s p a r e n t "   ? 
 	 	 	 	 	 	 	 b a c k g r o u n d C o l o r   : 
 	 	 	 	 	 	 	 " _ d e f a u l t "   ) ; 
 	 	 	 	 	 } 
 
 	 	 	 	 	 v a l u e   =   v a l u e . t o R g b a S t r i n g ( ) ; 
 	 	 	 	 } 
 	 	 	 	 t r y   { 
 	 	 	 	 	 e l e m . s t y l e [   h o o k   ]   =   v a l u e ; 
 	 	 	 	 }   c a t c h (   e   )   { 
 	 	 	 	 	 / /   w r a p p e d   t o   p r e v e n t   I E   f r o m   t h r o w i n g   e r r o r s   o n   " i n v a l i d "   v a l u e s   l i k e   ' a u t o '   o r   ' i n h e r i t ' 
 	 	 	 	 } 
 	 	 	 } 
 	 	 } ; 
 	 	 j Q u e r y . f x . s t e p [   h o o k   ]   =   f u n c t i o n (   f x   )   { 
 	 	 	 i f   (   ! f x . c o l o r I n i t   )   { 
 	 	 	 	 f x . s t a r t   =   c o l o r (   f x . e l e m ,   h o o k   ) ; 
 	 	 	 	 f x . e n d   =   c o l o r (   f x . e n d   ) ; 
 	 	 	 	 f x . c o l o r I n i t   =   t r u e ; 
 	 	 	 } 
 	 	 	 j Q u e r y . c s s H o o k s [   h o o k   ] . s e t (   f x . e l e m ,   f x . s t a r t . t r a n s i t i o n (   f x . e n d ,   f x . p o s   )   ) ; 
 	 	 } ; 
 	 } ) ; 
 
 } ; 
 
 c o l o r . h o o k (   s t e p H o o k s   ) ; 
 
 j Q u e r y . c s s H o o k s . b o r d e r C o l o r   =   { 
 	 e x p a n d :   f u n c t i o n (   v a l u e   )   { 
 	 	 v a r   e x p a n d e d   =   { } ; 
 
 	 	 e a c h (   [   " T o p " ,   " R i g h t " ,   " B o t t o m " ,   " L e f t "   ] ,   f u n c t i o n (   i ,   p a r t   )   { 
 	 	 	 e x p a n d e d [   " b o r d e r "   +   p a r t   +   " C o l o r "   ]   =   v a l u e ; 
 	 	 } ) ; 
 	 	 r e t u r n   e x p a n d e d ; 
 	 } 
 } ; 
 
 / /   B a s i c   c o l o r   n a m e s   o n l y . 
 / /   U s a g e   o f   a n y   o f   t h e   o t h e r   c o l o r   n a m e s   r e q u i r e s   a d d i n g   y o u r s e l f   o r   i n c l u d i n g 
 / /   j q u e r y . c o l o r . s v g - n a m e s . j s . 
 c o l o r s   =   j Q u e r y . C o l o r . n a m e s   =   { 
 	 / /   4 . 1 .   B a s i c   c o l o r   k e y w o r d s 
 	 a q u a :   " # 0 0 f f f f " , 
 	 b l a c k :   " # 0 0 0 0 0 0 " , 
 	 b l u e :   " # 0 0 0 0 f f " , 
 	 f u c h s i a :   " # f f 0 0 f f " , 
 	 g r a y :   " # 8 0 8 0 8 0 " , 
 	 g r e e n :   " # 0 0 8 0 0 0 " , 
 	 l i m e :   " # 0 0 f f 0 0 " , 
 	 m a r o o n :   " # 8 0 0 0 0 0 " , 
 	 n a v y :   " # 0 0 0 0 8 0 " , 
 	 o l i v e :   " # 8 0 8 0 0 0 " , 
 	 p u r p l e :   " # 8 0 0 0 8 0 " , 
 	 r e d :   " # f f 0 0 0 0 " , 
 	 s i l v e r :   " # c 0 c 0 c 0 " , 
 	 t e a l :   " # 0 0 8 0 8 0 " , 
 	 w h i t e :   " # f f f f f f " , 
 	 y e l l o w :   " # f f f f 0 0 " , 
 
 	 / /   4 . 2 . 3 .   " t r a n s p a r e n t "   c o l o r   k e y w o r d 
 	 t r a n s p a r e n t :   [   n u l l ,   n u l l ,   n u l l ,   0   ] , 
 
 	 _ d e f a u l t :   " # f f f f f f " 
 } ; 
 
 } ) (   j Q u e r y   ) ; 
 
 
 / * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * / 
 / * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *   C L A S S   A N I M A T I O N S   * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * / 
 / * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * / 
 ( f u n c t i o n ( )   { 
 
 v a r   c l a s s A n i m a t i o n A c t i o n s   =   [   " a d d " ,   " r e m o v e " ,   " t o g g l e "   ] , 
 	 s h o r t h a n d S t y l e s   =   { 
 	 	 b o r d e r :   1 , 
 	 	 b o r d e r B o t t o m :   1 , 
 	 	 b o r d e r C o l o r :   1 , 
 	 	 b o r d e r L e f t :   1 , 
 	 	 b o r d e r R i g h t :   1 , 
 	 	 b o r d e r T o p :   1 , 
 	 	 b o r d e r W i d t h :   1 , 
 	 	 m a r g i n :   1 , 
 	 	 p a d d i n g :   1 
 	 } ; 
 
 $ . e a c h ( [   " b o r d e r L e f t S t y l e " ,   " b o r d e r R i g h t S t y l e " ,   " b o r d e r B o t t o m S t y l e " ,   " b o r d e r T o p S t y l e "   ] ,   f u n c t i o n (   _ ,   p r o p   )   { 
 	 $ . f x . s t e p [   p r o p   ]   =   f u n c t i o n (   f x   )   { 
 	 	 i f   (   f x . e n d   ! = =   " n o n e "   & &   ! f x . s e t A t t r   | |   f x . p o s   = = =   1   & &   ! f x . s e t A t t r   )   { 
 	 	 	 j Q u e r y . s t y l e (   f x . e l e m ,   p r o p ,   f x . e n d   ) ; 
 	 	 	 f x . s e t A t t r   =   t r u e ; 
 	 	 } 
 	 } ; 
 } ) ; 
 
 f u n c t i o n   g e t E l e m e n t S t y l e s (   e l e m   )   { 
 	 v a r   k e y ,   l e n , 
 	 	 s t y l e   =   e l e m . o w n e r D o c u m e n t . d e f a u l t V i e w   ? 
 	 	 	 e l e m . o w n e r D o c u m e n t . d e f a u l t V i e w . g e t C o m p u t e d S t y l e (   e l e m ,   n u l l   )   : 
 	 	 	 e l e m . c u r r e n t S t y l e , 
 	 	 s t y l e s   =   { } ; 
 
 	 i f   (   s t y l e   & &   s t y l e . l e n g t h   & &   s t y l e [   0   ]   & &   s t y l e [   s t y l e [   0   ]   ]   )   { 
 	 	 l e n   =   s t y l e . l e n g t h ; 
 	 	 w h i l e   (   l e n - -   )   { 
 	 	 	 k e y   =   s t y l e [   l e n   ] ; 
 	 	 	 i f   (   t y p e o f   s t y l e [   k e y   ]   = = =   " s t r i n g "   )   { 
 	 	 	 	 s t y l e s [   $ . c a m e l C a s e (   k e y   )   ]   =   s t y l e [   k e y   ] ; 
 	 	 	 } 
 	 	 } 
 	 / /   s u p p o r t :   O p e r a ,   I E   < 9 
 	 }   e l s e   { 
 	 	 f o r   (   k e y   i n   s t y l e   )   { 
 	 	 	 i f   (   t y p e o f   s t y l e [   k e y   ]   = = =   " s t r i n g "   )   { 
 	 	 	 	 s t y l e s [   k e y   ]   =   s t y l e [   k e y   ] ; 
 	 	 	 } 
 	 	 } 
 	 } 
 
 	 r e t u r n   s t y l e s ; 
 } 
 
 
 f u n c t i o n   s t y l e D i f f e r e n c e (   o l d S t y l e ,   n e w S t y l e   )   { 
 	 v a r   d i f f   =   { } , 
 	 	 n a m e ,   v a l u e ; 
 
 	 f o r   (   n a m e   i n   n e w S t y l e   )   { 
 	 	 v a l u e   =   n e w S t y l e [   n a m e   ] ; 
 	 	 i f   (   o l d S t y l e [   n a m e   ]   ! = =   v a l u e   )   { 
 	 	 	 i f   (   ! s h o r t h a n d S t y l e s [   n a m e   ]   )   { 
 	 	 	 	 i f   (   $ . f x . s t e p [   n a m e   ]   | |   ! i s N a N (   p a r s e F l o a t (   v a l u e   )   )   )   { 
 	 	 	 	 	 d i f f [   n a m e   ]   =   v a l u e ; 
 	 	 	 	 } 
 	 	 	 } 
 	 	 } 
 	 } 
 
 	 r e t u r n   d i f f ; 
 } 
 
 / /   s u p p o r t :   j Q u e r y   < 1 . 8 
 i f   (   ! $ . f n . a d d B a c k   )   { 
 	 $ . f n . a d d B a c k   =   f u n c t i o n (   s e l e c t o r   )   { 
 	 	 r e t u r n   t h i s . a d d (   s e l e c t o r   = =   n u l l   ? 
 	 	 	 t h i s . p r e v O b j e c t   :   t h i s . p r e v O b j e c t . f i l t e r (   s e l e c t o r   ) 
 	 	 ) ; 
 	 } ; 
 } 
 
 $ . e f f e c t s . a n i m a t e C l a s s   =   f u n c t i o n (   v a l u e ,   d u r a t i o n ,   e a s i n g ,   c a l l b a c k   )   { 
 	 v a r   o   =   $ . s p e e d (   d u r a t i o n ,   e a s i n g ,   c a l l b a c k   ) ; 
 
 	 r e t u r n   t h i s . q u e u e (   f u n c t i o n ( )   { 
 	 	 v a r   a n i m a t e d   =   $ (   t h i s   ) , 
 	 	 	 b a s e C l a s s   =   a n i m a t e d . a t t r (   " c l a s s "   )   | |   " " , 
 	 	 	 a p p l y C l a s s C h a n g e , 
 	 	 	 a l l A n i m a t i o n s   =   o . c h i l d r e n   ?   a n i m a t e d . f i n d (   " * "   ) . a d d B a c k ( )   :   a n i m a t e d ; 
 
 	 	 / /   m a p   t h e   a n i m a t e d   o b j e c t s   t o   s t o r e   t h e   o r i g i n a l   s t y l e s . 
 	 	 a l l A n i m a t i o n s   =   a l l A n i m a t i o n s . m a p ( f u n c t i o n ( )   { 
 	 	 	 v a r   e l   =   $ (   t h i s   ) ; 
 	 	 	 r e t u r n   { 
 	 	 	 	 e l :   e l , 
 	 	 	 	 s t a r t :   g e t E l e m e n t S t y l e s (   t h i s   ) 
 	 	 	 } ; 
 	 	 } ) ; 
 
 	 	 / /   a p p l y   c l a s s   c h a n g e 
 	 	 a p p l y C l a s s C h a n g e   =   f u n c t i o n ( )   { 
 	 	 	 $ . e a c h (   c l a s s A n i m a t i o n A c t i o n s ,   f u n c t i o n ( i ,   a c t i o n )   { 
 	 	 	 	 i f   (   v a l u e [   a c t i o n   ]   )   { 
 	 	 	 	 	 a n i m a t e d [   a c t i o n   +   " C l a s s "   ] (   v a l u e [   a c t i o n   ]   ) ; 
 	 	 	 	 } 
 	 	 	 } ) ; 
 	 	 } ; 
 	 	 a p p l y C l a s s C h a n g e ( ) ; 
 
 	 	 / /   m a p   a l l   a n i m a t e d   o b j e c t s   a g a i n   -   c a l c u l a t e   n e w   s t y l e s   a n d   d i f f 
 	 	 a l l A n i m a t i o n s   =   a l l A n i m a t i o n s . m a p ( f u n c t i o n ( )   { 
 	 	 	 t h i s . e n d   =   g e t E l e m e n t S t y l e s (   t h i s . e l [   0   ]   ) ; 
 	 	 	 t h i s . d i f f   =   s t y l e D i f f e r e n c e (   t h i s . s t a r t ,   t h i s . e n d   ) ; 
 	 	 	 r e t u r n   t h i s ; 
 	 	 } ) ; 
 
 	 	 / /   a p p l y   o r i g i n a l   c l a s s 
 	 	 a n i m a t e d . a t t r (   " c l a s s " ,   b a s e C l a s s   ) ; 
 
 	 	 / /   m a p   a l l   a n i m a t e d   o b j e c t s   a g a i n   -   t h i s   t i m e   c o l l e c t i n g   a   p r o m i s e 
 	 	 a l l A n i m a t i o n s   =   a l l A n i m a t i o n s . m a p ( f u n c t i o n ( )   { 
 	 	 	 v a r   s t y l e I n f o   =   t h i s , 
 	 	 	 	 d f d   =   $ . D e f e r r e d ( ) , 
 	 	 	 	 o p t s   =   $ . e x t e n d ( { } ,   o ,   { 
 	 	 	 	 	 q u e u e :   f a l s e , 
 	 	 	 	 	 c o m p l e t e :   f u n c t i o n ( )   { 
 	 	 	 	 	 	 d f d . r e s o l v e (   s t y l e I n f o   ) ; 
 	 	 	 	 	 } 
 	 	 	 	 } ) ; 
 
 	 	 	 t h i s . e l . a n i m a t e (   t h i s . d i f f ,   o p t s   ) ; 
 	 	 	 r e t u r n   d f d . p r o m i s e ( ) ; 
 	 	 } ) ; 
 
 	 	 / /   o n c e   a l l   a n i m a t i o n s   h a v e   c o m p l e t e d : 
 	 	 $ . w h e n . a p p l y (   $ ,   a l l A n i m a t i o n s . g e t ( )   ) . d o n e ( f u n c t i o n ( )   { 
 
 	 	 	 / /   s e t   t h e   f i n a l   c l a s s 
 	 	 	 a p p l y C l a s s C h a n g e ( ) ; 
 
 	 	 	 / /   f o r   e a c h   a n i m a t e d   e l e m e n t , 
 	 	 	 / /   c l e a r   a l l   c s s   p r o p e r t i e s   t h a t   w e r e   a n i m a t e d 
 	 	 	 $ . e a c h (   a r g u m e n t s ,   f u n c t i o n ( )   { 
 	 	 	 	 v a r   e l   =   t h i s . e l ; 
 	 	 	 	 $ . e a c h (   t h i s . d i f f ,   f u n c t i o n ( k e y )   { 
 	 	 	 	 	 e l . c s s (   k e y ,   " "   ) ; 
 	 	 	 	 } ) ; 
 	 	 	 } ) ; 
 
 	 	 	 / /   t h i s   i s   g u a r n t e e d   t o   b e   t h e r e   i f   y o u   u s e   j Q u e r y . s p e e d ( ) 
 	 	 	 / /   i t   a l s o   h a n d l e s   d e q u e u i n g   t h e   n e x t   a n i m . . . 
 	 	 	 o . c o m p l e t e . c a l l (   a n i m a t e d [   0   ]   ) ; 
 	 	 } ) ; 
 	 } ) ; 
 } ; 
 
 $ . f n . e x t e n d ( { 
 	 a d d C l a s s :   ( f u n c t i o n (   o r i g   )   { 
 	 	 r e t u r n   f u n c t i o n (   c l a s s N a m e s ,   s p e e d ,   e a s i n g ,   c a l l b a c k   )   { 
 	 	 	 r e t u r n   s p e e d   ? 
 	 	 	 	 $ . e f f e c t s . a n i m a t e C l a s s . c a l l (   t h i s , 
 	 	 	 	 	 {   a d d :   c l a s s N a m e s   } ,   s p e e d ,   e a s i n g ,   c a l l b a c k   )   : 
 	 	 	 	 o r i g . a p p l y (   t h i s ,   a r g u m e n t s   ) ; 
 	 	 } ; 
 	 } ) (   $ . f n . a d d C l a s s   ) , 
 
 	 r e m o v e C l a s s :   ( f u n c t i o n (   o r i g   )   { 
 	 	 r e t u r n   f u n c t i o n (   c l a s s N a m e s ,   s p e e d ,   e a s i n g ,   c a l l b a c k   )   { 
 	 	 	 r e t u r n   a r g u m e n t s . l e n g t h   >   1   ? 
 	 	 	 	 $ . e f f e c t s . a n i m a t e C l a s s . c a l l (   t h i s , 
 	 	 	 	 	 {   r e m o v e :   c l a s s N a m e s   } ,   s p e e d ,   e a s i n g ,   c a l l b a c k   )   : 
 	 	 	 	 o r i g . a p p l y (   t h i s ,   a r g u m e n t s   ) ; 
 	 	 } ; 
 	 } ) (   $ . f n . r e m o v e C l a s s   ) , 
 
 	 t o g g l e C l a s s :   ( f u n c t i o n (   o r i g   )   { 
 	 	 r e t u r n   f u n c t i o n (   c l a s s N a m e s ,   f o r c e ,   s p e e d ,   e a s i n g ,   c a l l b a c k   )   { 
 	 	 	 i f   (   t y p e o f   f o r c e   = = =   " b o o l e a n "   | |   f o r c e   = = =   u n d e f i n e d   )   { 
 	 	 	 	 i f   (   ! s p e e d   )   { 
 	 	 	 	 	 / /   w i t h o u t   s p e e d   p a r a m e t e r 
 	 	 	 	 	 r e t u r n   o r i g . a p p l y (   t h i s ,   a r g u m e n t s   ) ; 
 	 	 	 	 }   e l s e   { 
 	 	 	 	 	 r e t u r n   $ . e f f e c t s . a n i m a t e C l a s s . c a l l (   t h i s , 
 	 	 	 	 	 	 ( f o r c e   ?   {   a d d :   c l a s s N a m e s   }   :   {   r e m o v e :   c l a s s N a m e s   } ) , 
 	 	 	 	 	 	 s p e e d ,   e a s i n g ,   c a l l b a c k   ) ; 
 	 	 	 	 } 
 	 	 	 }   e l s e   { 
 	 	 	 	 / /   w i t h o u t   f o r c e   p a r a m e t e r 
 	 	 	 	 r e t u r n   $ . e f f e c t s . a n i m a t e C l a s s . c a l l (   t h i s , 
 	 	 	 	 	 {   t o g g l e :   c l a s s N a m e s   } ,   f o r c e ,   s p e e d ,   e a s i n g   ) ; 
 	 	 	 } 
 	 	 } ; 
 	 } ) (   $ . f n . t o g g l e C l a s s   ) , 
 
 	 s w i t c h C l a s s :   f u n c t i o n (   r e m o v e ,   a d d ,   s p e e d ,   e a s i n g ,   c a l l b a c k )   { 
 	 	 r e t u r n   $ . e f f e c t s . a n i m a t e C l a s s . c a l l (   t h i s ,   { 
 	 	 	 a d d :   a d d , 
 	 	 	 r e m o v e :   r e m o v e 
 	 	 } ,   s p e e d ,   e a s i n g ,   c a l l b a c k   ) ; 
 	 } 
 } ) ; 
 
 } ) ( ) ; 
 
 / * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * / 
 / * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *   E F F E C T S   * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * / 
 / * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * / 
 
 ( f u n c t i o n ( )   { 
 
 $ . e x t e n d (   $ . e f f e c t s ,   { 
 	 v e r s i o n :   " 1 . 1 0 . 3 " , 
 
 	 / /   S a v e s   a   s e t   o f   p r o p e r t i e s   i n   a   d a t a   s t o r a g e 
 	 s a v e :   f u n c t i o n (   e l e m e n t ,   s e t   )   { 
 	 	 f o r (   v a r   i = 0 ;   i   <   s e t . l e n g t h ;   i + +   )   { 
 	 	 	 i f   (   s e t [   i   ]   ! = =   n u l l   )   { 
 	 	 	 	 e l e m e n t . d a t a (   d a t a S p a c e   +   s e t [   i   ] ,   e l e m e n t [   0   ] . s t y l e [   s e t [   i   ]   ]   ) ; 
 	 	 	 } 
 	 	 } 
 	 } , 
 
 	 / /   R e s t o r e s   a   s e t   o f   p r e v i o u s l y   s a v e d   p r o p e r t i e s   f r o m   a   d a t a   s t o r a g e 
 	 r e s t o r e :   f u n c t i o n (   e l e m e n t ,   s e t   )   { 
 	 	 v a r   v a l ,   i ; 
 	 	 f o r (   i = 0 ;   i   <   s e t . l e n g t h ;   i + +   )   { 
 	 	 	 i f   (   s e t [   i   ]   ! = =   n u l l   )   { 
 	 	 	 	 v a l   =   e l e m e n t . d a t a (   d a t a S p a c e   +   s e t [   i   ]   ) ; 
 	 	 	 	 / /   s u p p o r t :   j Q u e r y   1 . 6 . 2 
 	 	 	 	 / /   h t t p : / / b u g s . j q u e r y . c o m / t i c k e t / 9 9 1 7 
 	 	 	 	 / /   j Q u e r y   1 . 6 . 2   i n c o r r e c t l y   r e t u r n s   u n d e f i n e d   f o r   a n y   f a l s y   v a l u e . 
 	 	 	 	 / /   W e   c a n ' t   d i f f e r e n t i a t e   b e t w e e n   " "   a n d   0   h e r e ,   s o   w e   j u s t   a s s u m e 
 	 	 	 	 / /   e m p t y   s t r i n g   s i n c e   i t ' s   l i k e l y   t o   b e   a   m o r e   c o m m o n   v a l u e . . . 
 	 	 	 	 i f   (   v a l   = = =   u n d e f i n e d   )   { 
 	 	 	 	 	 v a l   =   " " ; 
 	 	 	 	 } 
 	 	 	 	 e l e m e n t . c s s (   s e t [   i   ] ,   v a l   ) ; 
 	 	 	 } 
 	 	 } 
 	 } , 
 
 	 s e t M o d e :   f u n c t i o n (   e l ,   m o d e   )   { 
 	 	 i f   ( m o d e   = = =   " t o g g l e " )   { 
 	 	 	 m o d e   =   e l . i s (   " : h i d d e n "   )   ?   " s h o w "   :   " h i d e " ; 
 	 	 } 
 	 	 r e t u r n   m o d e ; 
 	 } , 
 
 	 / /   T r a n s l a t e s   a   [ t o p , l e f t ]   a r r a y   i n t o   a   b a s e l i n e   v a l u e 
 	 / /   t h i s   s h o u l d   b e   a   l i t t l e   m o r e   f l e x i b l e   i n   t h e   f u t u r e   t o   h a n d l e   a   s t r i n g   &   h a s h 
 	 g e t B a s e l i n e :   f u n c t i o n (   o r i g i n ,   o r i g i n a l   )   { 
 	 	 v a r   y ,   x ; 
 	 	 s w i t c h   (   o r i g i n [   0   ]   )   { 
 	 	 	 c a s e   " t o p " :   y   =   0 ;   b r e a k ; 
 	 	 	 c a s e   " m i d d l e " :   y   =   0 . 5 ;   b r e a k ; 
 	 	 	 c a s e   " b o t t o m " :   y   =   1 ;   b r e a k ; 
 	 	 	 d e f a u l t :   y   =   o r i g i n [   0   ]   /   o r i g i n a l . h e i g h t ; 
 	 	 } 
 	 	 s w i t c h   (   o r i g i n [   1   ]   )   { 
 	 	 	 c a s e   " l e f t " :   x   =   0 ;   b r e a k ; 
 	 	 	 c a s e   " c e n t e r " :   x   =   0 . 5 ;   b r e a k ; 
 	 	 	 c a s e   " r i g h t " :   x   =   1 ;   b r e a k ; 
 	 	 	 d e f a u l t :   x   =   o r i g i n [   1   ]   /   o r i g i n a l . w i d t h ; 
 	 	 } 
 	 	 r e t u r n   { 
 	 	 	 x :   x , 
 	 	 	 y :   y 
 	 	 } ; 
 	 } , 
 
 	 / /   W r a p s   t h e   e l e m e n t   a r o u n d   a   w r a p p e r   t h a t   c o p i e s   p o s i t i o n   p r o p e r t i e s 
 	 c r e a t e W r a p p e r :   f u n c t i o n (   e l e m e n t   )   { 
 
 	 	 / /   i f   t h e   e l e m e n t   i s   a l r e a d y   w r a p p e d ,   r e t u r n   i t 
 	 	 i f   (   e l e m e n t . p a r e n t ( ) . i s (   " . u i - e f f e c t s - w r a p p e r "   ) )   { 
 	 	 	 r e t u r n   e l e m e n t . p a r e n t ( ) ; 
 	 	 } 
 
 	 	 / /   w r a p   t h e   e l e m e n t 
 	 	 v a r   p r o p s   =   { 
 	 	 	 	 w i d t h :   e l e m e n t . o u t e r W i d t h ( t r u e ) , 
 	 	 	 	 h e i g h t :   e l e m e n t . o u t e r H e i g h t ( t r u e ) , 
 	 	 	 	 " f l o a t " :   e l e m e n t . c s s (   " f l o a t "   ) 
 	 	 	 } , 
 	 	 	 w r a p p e r   =   $ (   " < d i v > < / d i v > "   ) 
 	 	 	 	 . a d d C l a s s (   " u i - e f f e c t s - w r a p p e r "   ) 
 	 	 	 	 . c s s ( { 
 	 	 	 	 	 f o n t S i z e :   " 1 0 0 % " , 
 	 	 	 	 	 b a c k g r o u n d :   " t r a n s p a r e n t " , 
 	 	 	 	 	 b o r d e r :   " n o n e " , 
 	 	 	 	 	 m a r g i n :   0 , 
 	 	 	 	 	 p a d d i n g :   0 
 	 	 	 	 } ) , 
 	 	 	 / /   S t o r e   t h e   s i z e   i n   c a s e   w i d t h / h e i g h t   a r e   d e f i n e d   i n   %   -   F i x e s   # 5 2 4 5 
 	 	 	 s i z e   =   { 
 	 	 	 	 w i d t h :   e l e m e n t . w i d t h ( ) , 
 	 	 	 	 h e i g h t :   e l e m e n t . h e i g h t ( ) 
 	 	 	 } , 
 	 	 	 a c t i v e   =   d o c u m e n t . a c t i v e E l e m e n t ; 
 
 	 	 / /   s u p p o r t :   F i r e f o x 
 	 	 / /   F i r e f o x   i n c o r r e c t l y   e x p o s e s   a n o n y m o u s   c o n t e n t 
 	 	 / /   h t t p s : / / b u g z i l l a . m o z i l l a . o r g / s h o w _ b u g . c g i ? i d = 5 6 1 6 6 4 
 	 	 t r y   { 
 	 	 	 a c t i v e . i d ; 
 	 	 }   c a t c h (   e   )   { 
 	 	 	 a c t i v e   =   d o c u m e n t . b o d y ; 
 	 	 } 
 
 	 	 e l e m e n t . w r a p (   w r a p p e r   ) ; 
 
 	 	 / /   F i x e s   # 7 5 9 5   -   E l e m e n t s   l o s e   f o c u s   w h e n   w r a p p e d . 
 	 	 i f   (   e l e m e n t [   0   ]   = = =   a c t i v e   | |   $ . c o n t a i n s (   e l e m e n t [   0   ] ,   a c t i v e   )   )   { 
 	 	 	 $ (   a c t i v e   ) . f o c u s ( ) ; 
 	 	 } 
 
 	 	 w r a p p e r   =   e l e m e n t . p a r e n t ( ) ;   / / H o t f i x   f o r   j Q u e r y   1 . 4   s i n c e   s o m e   c h a n g e   i n   w r a p ( )   s e e m s   t o   a c t u a l l y   l o s e   t h e   r e f e r e n c e   t o   t h e   w r a p p e d   e l e m e n t 
 
 	 	 / /   t r a n s f e r   p o s i t i o n i n g   p r o p e r t i e s   t o   t h e   w r a p p e r 
 	 	 i f   (   e l e m e n t . c s s (   " p o s i t i o n "   )   = = =   " s t a t i c "   )   { 
 	 	 	 w r a p p e r . c s s ( {   p o s i t i o n :   " r e l a t i v e "   } ) ; 
 	 	 	 e l e m e n t . c s s ( {   p o s i t i o n :   " r e l a t i v e "   } ) ; 
 	 	 }   e l s e   { 
 	 	 	 $ . e x t e n d (   p r o p s ,   { 
 	 	 	 	 p o s i t i o n :   e l e m e n t . c s s (   " p o s i t i o n "   ) , 
 	 	 	 	 z I n d e x :   e l e m e n t . c s s (   " z - i n d e x "   ) 
 	 	 	 } ) ; 
 	 	 	 $ . e a c h ( [   " t o p " ,   " l e f t " ,   " b o t t o m " ,   " r i g h t "   ] ,   f u n c t i o n ( i ,   p o s )   { 
 	 	 	 	 p r o p s [   p o s   ]   =   e l e m e n t . c s s (   p o s   ) ; 
 	 	 	 	 i f   (   i s N a N (   p a r s e I n t (   p r o p s [   p o s   ] ,   1 0   )   )   )   { 
 	 	 	 	 	 p r o p s [   p o s   ]   =   " a u t o " ; 
 	 	 	 	 } 
 	 	 	 } ) ; 
 	 	 	 e l e m e n t . c s s ( { 
 	 	 	 	 p o s i t i o n :   " r e l a t i v e " , 
 	 	 	 	 t o p :   0 , 
 	 	 	 	 l e f t :   0 , 
 	 	 	 	 r i g h t :   " a u t o " , 
 	 	 	 	 b o t t o m :   " a u t o " 
 	 	 	 } ) ; 
 	 	 } 
 	 	 e l e m e n t . c s s ( s i z e ) ; 
 
 	 	 r e t u r n   w r a p p e r . c s s (   p r o p s   ) . s h o w ( ) ; 
 	 } , 
 
 	 r e m o v e W r a p p e r :   f u n c t i o n (   e l e m e n t   )   { 
 	 	 v a r   a c t i v e   =   d o c u m e n t . a c t i v e E l e m e n t ; 
 
 	 	 i f   (   e l e m e n t . p a r e n t ( ) . i s (   " . u i - e f f e c t s - w r a p p e r "   )   )   { 
 	 	 	 e l e m e n t . p a r e n t ( ) . r e p l a c e W i t h (   e l e m e n t   ) ; 
 
 	 	 	 / /   F i x e s   # 7 5 9 5   -   E l e m e n t s   l o s e   f o c u s   w h e n   w r a p p e d . 
 	 	 	 i f   (   e l e m e n t [   0   ]   = = =   a c t i v e   | |   $ . c o n t a i n s (   e l e m e n t [   0   ] ,   a c t i v e   )   )   { 
 	 	 	 	 $ (   a c t i v e   ) . f o c u s ( ) ; 
 	 	 	 } 
 	 	 } 
 
 
 	 	 r e t u r n   e l e m e n t ; 
 	 } , 
 
 	 s e t T r a n s i t i o n :   f u n c t i o n (   e l e m e n t ,   l i s t ,   f a c t o r ,   v a l u e   )   { 
 	 	 v a l u e   =   v a l u e   | |   { } ; 
 	 	 $ . e a c h (   l i s t ,   f u n c t i o n (   i ,   x   )   { 
 	 	 	 v a r   u n i t   =   e l e m e n t . c s s U n i t (   x   ) ; 
 	 	 	 i f   (   u n i t [   0   ]   >   0   )   { 
 	 	 	 	 v a l u e [   x   ]   =   u n i t [   0   ]   *   f a c t o r   +   u n i t [   1   ] ; 
 	 	 	 } 
 	 	 } ) ; 
 	 	 r e t u r n   v a l u e ; 
 	 } 
 } ) ; 
 
 / /   r e t u r n   a n   e f f e c t   o p t i o n s   o b j e c t   f o r   t h e   g i v e n   p a r a m e t e r s : 
 f u n c t i o n   _ n o r m a l i z e A r g u m e n t s (   e f f e c t ,   o p t i o n s ,   s p e e d ,   c a l l b a c k   )   { 
 
 	 / /   a l l o w   p a s s i n g   a l l   o p t i o n s   a s   t h e   f i r s t   p a r a m e t e r 
 	 i f   (   $ . i s P l a i n O b j e c t (   e f f e c t   )   )   { 
 	 	 o p t i o n s   =   e f f e c t ; 
 	 	 e f f e c t   =   e f f e c t . e f f e c t ; 
 	 } 
 
 	 / /   c o n v e r t   t o   a n   o b j e c t 
 	 e f f e c t   =   {   e f f e c t :   e f f e c t   } ; 
 
 	 / /   c a t c h   ( e f f e c t ,   n u l l ,   . . . ) 
 	 i f   (   o p t i o n s   = =   n u l l   )   { 
 	 	 o p t i o n s   =   { } ; 
 	 } 
 
 	 / /   c a t c h   ( e f f e c t ,   c a l l b a c k ) 
 	 i f   (   $ . i s F u n c t i o n (   o p t i o n s   )   )   { 
 	 	 c a l l b a c k   =   o p t i o n s ; 
 	 	 s p e e d   =   n u l l ; 
 	 	 o p t i o n s   =   { } ; 
 	 } 
 
 	 / /   c a t c h   ( e f f e c t ,   s p e e d ,   ? ) 
 	 i f   (   t y p e o f   o p t i o n s   = = =   " n u m b e r "   | |   $ . f x . s p e e d s [   o p t i o n s   ]   )   { 
 	 	 c a l l b a c k   =   s p e e d ; 
 	 	 s p e e d   =   o p t i o n s ; 
 	 	 o p t i o n s   =   { } ; 
 	 } 
 
 	 / /   c a t c h   ( e f f e c t ,   o p t i o n s ,   c a l l b a c k ) 
 	 i f   (   $ . i s F u n c t i o n (   s p e e d   )   )   { 
 	 	 c a l l b a c k   =   s p e e d ; 
 	 	 s p e e d   =   n u l l ; 
 	 } 
 
 	 / /   a d d   o p t i o n s   t o   e f f e c t 
 	 i f   (   o p t i o n s   )   { 
 	 	 $ . e x t e n d (   e f f e c t ,   o p t i o n s   ) ; 
 	 } 
 
 	 s p e e d   =   s p e e d   | |   o p t i o n s . d u r a t i o n ; 
 	 e f f e c t . d u r a t i o n   =   $ . f x . o f f   ?   0   : 
 	 	 t y p e o f   s p e e d   = = =   " n u m b e r "   ?   s p e e d   : 
 	 	 s p e e d   i n   $ . f x . s p e e d s   ?   $ . f x . s p e e d s [   s p e e d   ]   : 
 	 	 $ . f x . s p e e d s . _ d e f a u l t ; 
 
 	 e f f e c t . c o m p l e t e   =   c a l l b a c k   | |   o p t i o n s . c o m p l e t e ; 
 
 	 r e t u r n   e f f e c t ; 
 } 
 
 f u n c t i o n   s t a n d a r d A n i m a t i o n O p t i o n (   o p t i o n   )   { 
 	 / /   V a l i d   s t a n d a r d   s p e e d s   ( n o t h i n g ,   n u m b e r ,   n a m e d   s p e e d ) 
 	 i f   (   ! o p t i o n   | |   t y p e o f   o p t i o n   = = =   " n u m b e r "   | |   $ . f x . s p e e d s [   o p t i o n   ]   )   { 
 	 	 r e t u r n   t r u e ; 
 	 } 
 
 	 / /   I n v a l i d   s t r i n g s   -   t r e a t   a s   " n o r m a l "   s p e e d 
 	 i f   (   t y p e o f   o p t i o n   = = =   " s t r i n g "   & &   ! $ . e f f e c t s . e f f e c t [   o p t i o n   ]   )   { 
 	 	 r e t u r n   t r u e ; 
 	 } 
 
 	 / /   C o m p l e t e   c a l l b a c k 
 	 i f   (   $ . i s F u n c t i o n (   o p t i o n   )   )   { 
 	 	 r e t u r n   t r u e ; 
 	 } 
 
 	 / /   O p t i o n s   h a s h   ( b u t   n o t   n a m i n g   a n   e f f e c t ) 
 	 i f   (   t y p e o f   o p t i o n   = = =   " o b j e c t "   & &   ! o p t i o n . e f f e c t   )   { 
 	 	 r e t u r n   t r u e ; 
 	 } 
 
 	 / /   D i d n ' t   m a t c h   a n y   s t a n d a r d   A P I 
 	 r e t u r n   f a l s e ; 
 } 
 
 $ . f n . e x t e n d ( { 
 	 e f f e c t :   f u n c t i o n (   / *   e f f e c t ,   o p t i o n s ,   s p e e d ,   c a l l b a c k   * /   )   { 
 	 	 v a r   a r g s   =   _ n o r m a l i z e A r g u m e n t s . a p p l y (   t h i s ,   a r g u m e n t s   ) , 
 	 	 	 m o d e   =   a r g s . m o d e , 
 	 	 	 q u e u e   =   a r g s . q u e u e , 
 	 	 	 e f f e c t M e t h o d   =   $ . e f f e c t s . e f f e c t [   a r g s . e f f e c t   ] ; 
 
 	 	 i f   (   $ . f x . o f f   | |   ! e f f e c t M e t h o d   )   { 
 	 	 	 / /   d e l e g a t e   t o   t h e   o r i g i n a l   m e t h o d   ( e . g . ,   . s h o w ( ) )   i f   p o s s i b l e 
 	 	 	 i f   (   m o d e   )   { 
 	 	 	 	 r e t u r n   t h i s [   m o d e   ] (   a r g s . d u r a t i o n ,   a r g s . c o m p l e t e   ) ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 r e t u r n   t h i s . e a c h (   f u n c t i o n ( )   { 
 	 	 	 	 	 i f   (   a r g s . c o m p l e t e   )   { 
 	 	 	 	 	 	 a r g s . c o m p l e t e . c a l l (   t h i s   ) ; 
 	 	 	 	 	 } 
 	 	 	 	 } ) ; 
 	 	 	 } 
 	 	 } 
 
 	 	 f u n c t i o n   r u n (   n e x t   )   { 
 	 	 	 v a r   e l e m   =   $ (   t h i s   ) , 
 	 	 	 	 c o m p l e t e   =   a r g s . c o m p l e t e , 
 	 	 	 	 m o d e   =   a r g s . m o d e ; 
 
 	 	 	 f u n c t i o n   d o n e ( )   { 
 	 	 	 	 i f   (   $ . i s F u n c t i o n (   c o m p l e t e   )   )   { 
 	 	 	 	 	 c o m p l e t e . c a l l (   e l e m [ 0 ]   ) ; 
 	 	 	 	 } 
 	 	 	 	 i f   (   $ . i s F u n c t i o n (   n e x t   )   )   { 
 	 	 	 	 	 n e x t ( ) ; 
 	 	 	 	 } 
 	 	 	 } 
 
 	 	 	 / /   I f   t h e   e l e m e n t   a l r e a d y   h a s   t h e   c o r r e c t   f i n a l   s t a t e ,   d e l e g a t e   t o 
 	 	 	 / /   t h e   c o r e   m e t h o d s   s o   t h e   i n t e r n a l   t r a c k i n g   o f   " o l d d i s p l a y "   w o r k s . 
 	 	 	 i f   (   e l e m . i s (   " : h i d d e n "   )   ?   m o d e   = = =   " h i d e "   :   m o d e   = = =   " s h o w "   )   { 
 	 	 	 	 e l e m [   m o d e   ] ( ) ; 
 	 	 	 	 d o n e ( ) ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 e f f e c t M e t h o d . c a l l (   e l e m [ 0 ] ,   a r g s ,   d o n e   ) ; 
 	 	 	 } 
 	 	 } 
 
 	 	 r e t u r n   q u e u e   = = =   f a l s e   ?   t h i s . e a c h (   r u n   )   :   t h i s . q u e u e (   q u e u e   | |   " f x " ,   r u n   ) ; 
 	 } , 
 
 	 s h o w :   ( f u n c t i o n (   o r i g   )   { 
 	 	 r e t u r n   f u n c t i o n (   o p t i o n   )   { 
 	 	 	 i f   (   s t a n d a r d A n i m a t i o n O p t i o n (   o p t i o n   )   )   { 
 	 	 	 	 r e t u r n   o r i g . a p p l y (   t h i s ,   a r g u m e n t s   ) ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 v a r   a r g s   =   _ n o r m a l i z e A r g u m e n t s . a p p l y (   t h i s ,   a r g u m e n t s   ) ; 
 	 	 	 	 a r g s . m o d e   =   " s h o w " ; 
 	 	 	 	 r e t u r n   t h i s . e f f e c t . c a l l (   t h i s ,   a r g s   ) ; 
 	 	 	 } 
 	 	 } ; 
 	 } ) (   $ . f n . s h o w   ) , 
 
 	 h i d e :   ( f u n c t i o n (   o r i g   )   { 
 	 	 r e t u r n   f u n c t i o n (   o p t i o n   )   { 
 	 	 	 i f   (   s t a n d a r d A n i m a t i o n O p t i o n (   o p t i o n   )   )   { 
 	 	 	 	 r e t u r n   o r i g . a p p l y (   t h i s ,   a r g u m e n t s   ) ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 v a r   a r g s   =   _ n o r m a l i z e A r g u m e n t s . a p p l y (   t h i s ,   a r g u m e n t s   ) ; 
 	 	 	 	 a r g s . m o d e   =   " h i d e " ; 
 	 	 	 	 r e t u r n   t h i s . e f f e c t . c a l l (   t h i s ,   a r g s   ) ; 
 	 	 	 } 
 	 	 } ; 
 	 } ) (   $ . f n . h i d e   ) , 
 
 	 t o g g l e :   ( f u n c t i o n (   o r i g   )   { 
 	 	 r e t u r n   f u n c t i o n (   o p t i o n   )   { 
 	 	 	 i f   (   s t a n d a r d A n i m a t i o n O p t i o n (   o p t i o n   )   | |   t y p e o f   o p t i o n   = = =   " b o o l e a n "   )   { 
 	 	 	 	 r e t u r n   o r i g . a p p l y (   t h i s ,   a r g u m e n t s   ) ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 v a r   a r g s   =   _ n o r m a l i z e A r g u m e n t s . a p p l y (   t h i s ,   a r g u m e n t s   ) ; 
 	 	 	 	 a r g s . m o d e   =   " t o g g l e " ; 
 	 	 	 	 r e t u r n   t h i s . e f f e c t . c a l l (   t h i s ,   a r g s   ) ; 
 	 	 	 } 
 	 	 } ; 
 	 } ) (   $ . f n . t o g g l e   ) , 
 
 	 / /   h e l p e r   f u n c t i o n s 
 	 c s s U n i t :   f u n c t i o n ( k e y )   { 
 	 	 v a r   s t y l e   =   t h i s . c s s (   k e y   ) , 
 	 	 	 v a l   =   [ ] ; 
 
 	 	 $ . e a c h (   [   " e m " ,   " p x " ,   " % " ,   " p t "   ] ,   f u n c t i o n (   i ,   u n i t   )   { 
 	 	 	 i f   (   s t y l e . i n d e x O f (   u n i t   )   >   0   )   { 
 	 	 	 	 v a l   =   [   p a r s e F l o a t (   s t y l e   ) ,   u n i t   ] ; 
 	 	 	 } 
 	 	 } ) ; 
 	 	 r e t u r n   v a l ; 
 	 } 
 } ) ; 
 
 } ) ( ) ; 
 
 / * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * / 
 / * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *   E A S I N G   * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * / 
 / * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * / 
 
 ( f u n c t i o n ( )   { 
 
 / /   b a s e d   o n   e a s i n g   e q u a t i o n s   f r o m   R o b e r t   P e n n e r   ( h t t p : / / w w w . r o b e r t p e n n e r . c o m / e a s i n g ) 
 
 v a r   b a s e E a s i n g s   =   { } ; 
 
 $ . e a c h (   [   " Q u a d " ,   " C u b i c " ,   " Q u a r t " ,   " Q u i n t " ,   " E x p o "   ] ,   f u n c t i o n (   i ,   n a m e   )   { 
 	 b a s e E a s i n g s [   n a m e   ]   =   f u n c t i o n (   p   )   { 
 	 	 r e t u r n   M a t h . p o w (   p ,   i   +   2   ) ; 
 	 } ; 
 } ) ; 
 
 $ . e x t e n d (   b a s e E a s i n g s ,   { 
 	 S i n e :   f u n c t i o n   (   p   )   { 
 	 	 r e t u r n   1   -   M a t h . c o s (   p   *   M a t h . P I   /   2   ) ; 
 	 } , 
 	 C i r c :   f u n c t i o n   (   p   )   { 
 	 	 r e t u r n   1   -   M a t h . s q r t (   1   -   p   *   p   ) ; 
 	 } , 
 	 E l a s t i c :   f u n c t i o n (   p   )   { 
 	 	 r e t u r n   p   = = =   0   | |   p   = = =   1   ?   p   : 
 	 	 	 - M a t h . p o w (   2 ,   8   *   ( p   -   1 )   )   *   M a t h . s i n (   (   ( p   -   1 )   *   8 0   -   7 . 5   )   *   M a t h . P I   /   1 5   ) ; 
 	 } , 
 	 B a c k :   f u n c t i o n (   p   )   { 
 	 	 r e t u r n   p   *   p   *   (   3   *   p   -   2   ) ; 
 	 } , 
 	 B o u n c e :   f u n c t i o n   (   p   )   { 
 	 	 v a r   p o w 2 , 
 	 	 	 b o u n c e   =   4 ; 
 
 	 	 w h i l e   (   p   <   (   (   p o w 2   =   M a t h . p o w (   2 ,   - - b o u n c e   )   )   -   1   )   /   1 1   )   { } 
 	 	 r e t u r n   1   /   M a t h . p o w (   4 ,   3   -   b o u n c e   )   -   7 . 5 6 2 5   *   M a t h . p o w (   (   p o w 2   *   3   -   2   )   /   2 2   -   p ,   2   ) ; 
 	 } 
 } ) ; 
 
 $ . e a c h (   b a s e E a s i n g s ,   f u n c t i o n (   n a m e ,   e a s e I n   )   { 
 	 $ . e a s i n g [   " e a s e I n "   +   n a m e   ]   =   e a s e I n ; 
 	 $ . e a s i n g [   " e a s e O u t "   +   n a m e   ]   =   f u n c t i o n (   p   )   { 
 	 	 r e t u r n   1   -   e a s e I n (   1   -   p   ) ; 
 	 } ; 
 	 $ . e a s i n g [   " e a s e I n O u t "   +   n a m e   ]   =   f u n c t i o n (   p   )   { 
 	 	 r e t u r n   p   <   0 . 5   ? 
 	 	 	 e a s e I n (   p   *   2   )   /   2   : 
 	 	 	 1   -   e a s e I n (   p   *   - 2   +   2   )   /   2 ; 
 	 } ; 
 } ) ; 
 
 } ) ( ) ; 
 
 } ) ( j Q u e r y ) ; 
 
 ( f u n c t i o n (   $ ,   u n d e f i n e d   )   { 
 
 v a r   u i d   =   0 , 
 	 h i d e P r o p s   =   { } , 
 	 s h o w P r o p s   =   { } ; 
 
 h i d e P r o p s . h e i g h t   =   h i d e P r o p s . p a d d i n g T o p   =   h i d e P r o p s . p a d d i n g B o t t o m   = 
 	 h i d e P r o p s . b o r d e r T o p W i d t h   =   h i d e P r o p s . b o r d e r B o t t o m W i d t h   =   " h i d e " ; 
 s h o w P r o p s . h e i g h t   =   s h o w P r o p s . p a d d i n g T o p   =   s h o w P r o p s . p a d d i n g B o t t o m   = 
 	 s h o w P r o p s . b o r d e r T o p W i d t h   =   s h o w P r o p s . b o r d e r B o t t o m W i d t h   =   " s h o w " ; 
 
 $ . w i d g e t (   " u i . a c c o r d i o n " ,   { 
 	 v e r s i o n :   " 1 . 1 0 . 3 " , 
 	 o p t i o n s :   { 
 	 	 a c t i v e :   0 , 
 	 	 a n i m a t e :   { } , 
 	 	 c o l l a p s i b l e :   f a l s e , 
 	 	 e v e n t :   " c l i c k " , 
 	 	 h e a d e r :   " >   l i   >   : f i r s t - c h i l d , >   : n o t ( l i ) : e v e n " , 
 	 	 h e i g h t S t y l e :   " a u t o " , 
 	 	 i c o n s :   { 
 	 	 	 a c t i v e H e a d e r :   " u i - i c o n - t r i a n g l e - 1 - s " , 
 	 	 	 h e a d e r :   " u i - i c o n - t r i a n g l e - 1 - e " 
 	 	 } , 
 
 	 	 / /   c a l l b a c k s 
 	 	 a c t i v a t e :   n u l l , 
 	 	 b e f o r e A c t i v a t e :   n u l l 
 	 } , 
 
 	 _ c r e a t e :   f u n c t i o n ( )   { 
 	 	 v a r   o p t i o n s   =   t h i s . o p t i o n s ; 
 	 	 t h i s . p r e v S h o w   =   t h i s . p r e v H i d e   =   $ ( ) ; 
 	 	 t h i s . e l e m e n t . a d d C l a s s (   " u i - a c c o r d i o n   u i - w i d g e t   u i - h e l p e r - r e s e t "   ) 
 	 	 	 / /   A R I A 
 	 	 	 . a t t r (   " r o l e " ,   " t a b l i s t "   ) ; 
 
 	 	 / /   d o n ' t   a l l o w   c o l l a p s i b l e :   f a l s e   a n d   a c t i v e :   f a l s e   /   n u l l 
 	 	 i f   (   ! o p t i o n s . c o l l a p s i b l e   & &   ( o p t i o n s . a c t i v e   = = =   f a l s e   | |   o p t i o n s . a c t i v e   = =   n u l l )   )   { 
 	 	 	 o p t i o n s . a c t i v e   =   0 ; 
 	 	 } 
 
 	 	 t h i s . _ p r o c e s s P a n e l s ( ) ; 
 	 	 / /   h a n d l e   n e g a t i v e   v a l u e s 
 	 	 i f   (   o p t i o n s . a c t i v e   <   0   )   { 
 	 	 	 o p t i o n s . a c t i v e   + =   t h i s . h e a d e r s . l e n g t h ; 
 	 	 } 
 	 	 t h i s . _ r e f r e s h ( ) ; 
 	 } , 
 
 	 _ g e t C r e a t e E v e n t D a t a :   f u n c t i o n ( )   { 
 	 	 r e t u r n   { 
 	 	 	 h e a d e r :   t h i s . a c t i v e , 
 	 	 	 p a n e l :   ! t h i s . a c t i v e . l e n g t h   ?   $ ( )   :   t h i s . a c t i v e . n e x t ( ) , 
 	 	 	 c o n t e n t :   ! t h i s . a c t i v e . l e n g t h   ?   $ ( )   :   t h i s . a c t i v e . n e x t ( ) 
 	 	 } ; 
 	 } , 
 
 	 _ c r e a t e I c o n s :   f u n c t i o n ( )   { 
 	 	 v a r   i c o n s   =   t h i s . o p t i o n s . i c o n s ; 
 	 	 i f   (   i c o n s   )   { 
 	 	 	 $ (   " < s p a n > "   ) 
 	 	 	 	 . a d d C l a s s (   " u i - a c c o r d i o n - h e a d e r - i c o n   u i - i c o n   "   +   i c o n s . h e a d e r   ) 
 	 	 	 	 . p r e p e n d T o (   t h i s . h e a d e r s   ) ; 
 	 	 	 t h i s . a c t i v e . c h i l d r e n (   " . u i - a c c o r d i o n - h e a d e r - i c o n "   ) 
 	 	 	 	 . r e m o v e C l a s s (   i c o n s . h e a d e r   ) 
 	 	 	 	 . a d d C l a s s (   i c o n s . a c t i v e H e a d e r   ) ; 
 	 	 	 t h i s . h e a d e r s . a d d C l a s s (   " u i - a c c o r d i o n - i c o n s "   ) ; 
 	 	 } 
 	 } , 
 
 	 _ d e s t r o y I c o n s :   f u n c t i o n ( )   { 
 	 	 t h i s . h e a d e r s 
 	 	 	 . r e m o v e C l a s s (   " u i - a c c o r d i o n - i c o n s "   ) 
 	 	 	 . c h i l d r e n (   " . u i - a c c o r d i o n - h e a d e r - i c o n "   ) 
 	 	 	 	 . r e m o v e ( ) ; 
 	 } , 
 
 	 _ d e s t r o y :   f u n c t i o n ( )   { 
 	 	 v a r   c o n t e n t s ; 
 
 	 	 / /   c l e a n   u p   m a i n   e l e m e n t 
 	 	 t h i s . e l e m e n t 
 	 	 	 . r e m o v e C l a s s (   " u i - a c c o r d i o n   u i - w i d g e t   u i - h e l p e r - r e s e t "   ) 
 	 	 	 . r e m o v e A t t r (   " r o l e "   ) ; 
 
 	 	 / /   c l e a n   u p   h e a d e r s 
 	 	 t h i s . h e a d e r s 
 	 	 	 . r e m o v e C l a s s (   " u i - a c c o r d i o n - h e a d e r   u i - a c c o r d i o n - h e a d e r - a c t i v e   u i - h e l p e r - r e s e t   u i - s t a t e - d e f a u l t   u i - c o r n e r - a l l   u i - s t a t e - a c t i v e   u i - s t a t e - d i s a b l e d   u i - c o r n e r - t o p "   ) 
 	 	 	 . r e m o v e A t t r (   " r o l e "   ) 
 	 	 	 . r e m o v e A t t r (   " a r i a - s e l e c t e d "   ) 
 	 	 	 . r e m o v e A t t r (   " a r i a - c o n t r o l s "   ) 
 	 	 	 . r e m o v e A t t r (   " t a b I n d e x "   ) 
 	 	 	 . e a c h ( f u n c t i o n ( )   { 
 	 	 	 	 i f   (   / ^ u i - a c c o r d i o n / . t e s t (   t h i s . i d   )   )   { 
 	 	 	 	 	 t h i s . r e m o v e A t t r i b u t e (   " i d "   ) ; 
 	 	 	 	 } 
 	 	 	 } ) ; 
 	 	 t h i s . _ d e s t r o y I c o n s ( ) ; 
 
 	 	 / /   c l e a n   u p   c o n t e n t   p a n e l s 
 	 	 c o n t e n t s   =   t h i s . h e a d e r s . n e x t ( ) 
 	 	 	 . c s s (   " d i s p l a y " ,   " "   ) 
 	 	 	 . r e m o v e A t t r (   " r o l e "   ) 
 	 	 	 . r e m o v e A t t r (   " a r i a - e x p a n d e d "   ) 
 	 	 	 . r e m o v e A t t r (   " a r i a - h i d d e n "   ) 
 	 	 	 . r e m o v e A t t r (   " a r i a - l a b e l l e d b y "   ) 
 	 	 	 . r e m o v e C l a s s (   " u i - h e l p e r - r e s e t   u i - w i d g e t - c o n t e n t   u i - c o r n e r - b o t t o m   u i - a c c o r d i o n - c o n t e n t   u i - a c c o r d i o n - c o n t e n t - a c t i v e   u i - s t a t e - d i s a b l e d "   ) 
 	 	 	 . e a c h ( f u n c t i o n ( )   { 
 	 	 	 	 i f   (   / ^ u i - a c c o r d i o n / . t e s t (   t h i s . i d   )   )   { 
 	 	 	 	 	 t h i s . r e m o v e A t t r i b u t e (   " i d "   ) ; 
 	 	 	 	 } 
 	 	 	 } ) ; 
 	 	 i f   (   t h i s . o p t i o n s . h e i g h t S t y l e   ! = =   " c o n t e n t "   )   { 
 	 	 	 c o n t e n t s . c s s (   " h e i g h t " ,   " "   ) ; 
 	 	 } 
 	 } , 
 
 	 _ s e t O p t i o n :   f u n c t i o n (   k e y ,   v a l u e   )   { 
 	 	 i f   (   k e y   = = =   " a c t i v e "   )   { 
 	 	 	 / /   _ a c t i v a t e ( )   w i l l   h a n d l e   i n v a l i d   v a l u e s   a n d   u p d a t e   t h i s . o p t i o n s 
 	 	 	 t h i s . _ a c t i v a t e (   v a l u e   ) ; 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 i f   (   k e y   = = =   " e v e n t "   )   { 
 	 	 	 i f   (   t h i s . o p t i o n s . e v e n t   )   { 
 	 	 	 	 t h i s . _ o f f (   t h i s . h e a d e r s ,   t h i s . o p t i o n s . e v e n t   ) ; 
 	 	 	 } 
 	 	 	 t h i s . _ s e t u p E v e n t s (   v a l u e   ) ; 
 	 	 } 
 
 	 	 t h i s . _ s u p e r (   k e y ,   v a l u e   ) ; 
 
 	 	 / /   s e t t i n g   c o l l a p s i b l e :   f a l s e   w h i l e   c o l l a p s e d ;   o p e n   f i r s t   p a n e l 
 	 	 i f   (   k e y   = = =   " c o l l a p s i b l e "   & &   ! v a l u e   & &   t h i s . o p t i o n s . a c t i v e   = = =   f a l s e   )   { 
 	 	 	 t h i s . _ a c t i v a t e (   0   ) ; 
 	 	 } 
 
 	 	 i f   (   k e y   = = =   " i c o n s "   )   { 
 	 	 	 t h i s . _ d e s t r o y I c o n s ( ) ; 
 	 	 	 i f   (   v a l u e   )   { 
 	 	 	 	 t h i s . _ c r e a t e I c o n s ( ) ; 
 	 	 	 } 
 	 	 } 
 
 	 	 / /   # 5 3 3 2   -   o p a c i t y   d o e s n ' t   c a s c a d e   t o   p o s i t i o n e d   e l e m e n t s   i n   I E 
 	 	 / /   s o   w e   n e e d   t o   a d d   t h e   d i s a b l e d   c l a s s   t o   t h e   h e a d e r s   a n d   p a n e l s 
 	 	 i f   (   k e y   = = =   " d i s a b l e d "   )   { 
 	 	 	 t h i s . h e a d e r s . a d d (   t h i s . h e a d e r s . n e x t ( )   ) 
 	 	 	 	 . t o g g l e C l a s s (   " u i - s t a t e - d i s a b l e d " ,   ! ! v a l u e   ) ; 
 	 	 } 
 	 } , 
 
 	 _ k e y d o w n :   f u n c t i o n (   e v e n t   )   { 
 	 	 / * j s h i n t   m a x c o m p l e x i t y : 1 5 * / 
 	 	 i f   (   e v e n t . a l t K e y   | |   e v e n t . c t r l K e y   )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 v a r   k e y C o d e   =   $ . u i . k e y C o d e , 
 	 	 	 l e n g t h   =   t h i s . h e a d e r s . l e n g t h , 
 	 	 	 c u r r e n t I n d e x   =   t h i s . h e a d e r s . i n d e x (   e v e n t . t a r g e t   ) , 
 	 	 	 t o F o c u s   =   f a l s e ; 
 
 	 	 s w i t c h   (   e v e n t . k e y C o d e   )   { 
 	 	 	 c a s e   k e y C o d e . R I G H T : 
 	 	 	 c a s e   k e y C o d e . D O W N : 
 	 	 	 	 t o F o c u s   =   t h i s . h e a d e r s [   (   c u r r e n t I n d e x   +   1   )   %   l e n g t h   ] ; 
 	 	 	 	 b r e a k ; 
 	 	 	 c a s e   k e y C o d e . L E F T : 
 	 	 	 c a s e   k e y C o d e . U P : 
 	 	 	 	 t o F o c u s   =   t h i s . h e a d e r s [   (   c u r r e n t I n d e x   -   1   +   l e n g t h   )   %   l e n g t h   ] ; 
 	 	 	 	 b r e a k ; 
 	 	 	 c a s e   k e y C o d e . S P A C E : 
 	 	 	 c a s e   k e y C o d e . E N T E R : 
 	 	 	 	 t h i s . _ e v e n t H a n d l e r (   e v e n t   ) ; 
 	 	 	 	 b r e a k ; 
 	 	 	 c a s e   k e y C o d e . H O M E : 
 	 	 	 	 t o F o c u s   =   t h i s . h e a d e r s [   0   ] ; 
 	 	 	 	 b r e a k ; 
 	 	 	 c a s e   k e y C o d e . E N D : 
 	 	 	 	 t o F o c u s   =   t h i s . h e a d e r s [   l e n g t h   -   1   ] ; 
 	 	 	 	 b r e a k ; 
 	 	 } 
 
 	 	 i f   (   t o F o c u s   )   { 
 	 	 	 $ (   e v e n t . t a r g e t   ) . a t t r (   " t a b I n d e x " ,   - 1   ) ; 
 	 	 	 $ (   t o F o c u s   ) . a t t r (   " t a b I n d e x " ,   0   ) ; 
 	 	 	 t o F o c u s . f o c u s ( ) ; 
 	 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 	 	 } 
 	 } , 
 
 	 _ p a n e l K e y D o w n   :   f u n c t i o n (   e v e n t   )   { 
 	 	 i f   (   e v e n t . k e y C o d e   = = =   $ . u i . k e y C o d e . U P   & &   e v e n t . c t r l K e y   )   { 
 	 	 	 $ (   e v e n t . c u r r e n t T a r g e t   ) . p r e v ( ) . f o c u s ( ) ; 
 	 	 } 
 	 } , 
 
 	 r e f r e s h :   f u n c t i o n ( )   { 
 	 	 v a r   o p t i o n s   =   t h i s . o p t i o n s ; 
 	 	 t h i s . _ p r o c e s s P a n e l s ( ) ; 
 
 	 	 / /   w a s   c o l l a p s e d   o r   n o   p a n e l 
 	 	 i f   (   (   o p t i o n s . a c t i v e   = = =   f a l s e   & &   o p t i o n s . c o l l a p s i b l e   = = =   t r u e   )   | |   ! t h i s . h e a d e r s . l e n g t h   )   { 
 	 	 	 o p t i o n s . a c t i v e   =   f a l s e ; 
 	 	 	 t h i s . a c t i v e   =   $ ( ) ; 
 	 	 / /   a c t i v e   f a l s e   o n l y   w h e n   c o l l a p s i b l e   i s   t r u e 
 	 	 }   e l s e   i f   (   o p t i o n s . a c t i v e   = = =   f a l s e   )   { 
 	 	 	 t h i s . _ a c t i v a t e (   0   ) ; 
 	 	 / /   w a s   a c t i v e ,   b u t   a c t i v e   p a n e l   i s   g o n e 
 	 	 }   e l s e   i f   (   t h i s . a c t i v e . l e n g t h   & &   ! $ . c o n t a i n s (   t h i s . e l e m e n t [   0   ] ,   t h i s . a c t i v e [   0   ]   )   )   { 
 	 	 	 / /   a l l   r e m a i n i n g   p a n e l   a r e   d i s a b l e d 
 	 	 	 i f   (   t h i s . h e a d e r s . l e n g t h   = = =   t h i s . h e a d e r s . f i n d ( " . u i - s t a t e - d i s a b l e d " ) . l e n g t h   )   { 
 	 	 	 	 o p t i o n s . a c t i v e   =   f a l s e ; 
 	 	 	 	 t h i s . a c t i v e   =   $ ( ) ; 
 	 	 	 / /   a c t i v a t e   p r e v i o u s   p a n e l 
 	 	 	 }   e l s e   { 
 	 	 	 	 t h i s . _ a c t i v a t e (   M a t h . m a x (   0 ,   o p t i o n s . a c t i v e   -   1   )   ) ; 
 	 	 	 } 
 	 	 / /   w a s   a c t i v e ,   a c t i v e   p a n e l   s t i l l   e x i s t s 
 	 	 }   e l s e   { 
 	 	 	 / /   m a k e   s u r e   a c t i v e   i n d e x   i s   c o r r e c t 
 	 	 	 o p t i o n s . a c t i v e   =   t h i s . h e a d e r s . i n d e x (   t h i s . a c t i v e   ) ; 
 	 	 } 
 
 	 	 t h i s . _ d e s t r o y I c o n s ( ) ; 
 
 	 	 t h i s . _ r e f r e s h ( ) ; 
 	 } , 
 
 	 _ p r o c e s s P a n e l s :   f u n c t i o n ( )   { 
 	 	 t h i s . h e a d e r s   =   t h i s . e l e m e n t . f i n d (   t h i s . o p t i o n s . h e a d e r   ) 
 	 	 	 . a d d C l a s s (   " u i - a c c o r d i o n - h e a d e r   u i - h e l p e r - r e s e t   u i - s t a t e - d e f a u l t   u i - c o r n e r - a l l "   ) ; 
 
 	 	 t h i s . h e a d e r s . n e x t ( ) 
 	 	 	 . a d d C l a s s (   " u i - a c c o r d i o n - c o n t e n t   u i - h e l p e r - r e s e t   u i - w i d g e t - c o n t e n t   u i - c o r n e r - b o t t o m "   ) 
 	 	 	 . f i l t e r ( " : n o t ( . u i - a c c o r d i o n - c o n t e n t - a c t i v e ) " ) 
 	 	 	 . h i d e ( ) ; 
 	 } , 
 
 	 _ r e f r e s h :   f u n c t i o n ( )   { 
 	 	 v a r   m a x H e i g h t , 
 	 	 	 o p t i o n s   =   t h i s . o p t i o n s , 
 	 	 	 h e i g h t S t y l e   =   o p t i o n s . h e i g h t S t y l e , 
 	 	 	 p a r e n t   =   t h i s . e l e m e n t . p a r e n t ( ) , 
 	 	 	 a c c o r d i o n I d   =   t h i s . a c c o r d i o n I d   =   " u i - a c c o r d i o n - "   + 
 	 	 	 	 ( t h i s . e l e m e n t . a t t r (   " i d "   )   | |   + + u i d ) ; 
 
 	 	 t h i s . a c t i v e   =   t h i s . _ f i n d A c t i v e (   o p t i o n s . a c t i v e   ) 
 	 	 	 . a d d C l a s s (   " u i - a c c o r d i o n - h e a d e r - a c t i v e   u i - s t a t e - a c t i v e   u i - c o r n e r - t o p "   ) 
 	 	 	 . r e m o v e C l a s s (   " u i - c o r n e r - a l l "   ) ; 
 	 	 t h i s . a c t i v e . n e x t ( ) 
 	 	 	 . a d d C l a s s (   " u i - a c c o r d i o n - c o n t e n t - a c t i v e "   ) 
 	 	 	 . s h o w ( ) ; 
 
 	 	 t h i s . h e a d e r s 
 	 	 	 . a t t r (   " r o l e " ,   " t a b "   ) 
 	 	 	 . e a c h ( f u n c t i o n (   i   )   { 
 	 	 	 	 v a r   h e a d e r   =   $ (   t h i s   ) , 
 	 	 	 	 	 h e a d e r I d   =   h e a d e r . a t t r (   " i d "   ) , 
 	 	 	 	 	 p a n e l   =   h e a d e r . n e x t ( ) , 
 	 	 	 	 	 p a n e l I d   =   p a n e l . a t t r (   " i d "   ) ; 
 	 	 	 	 i f   (   ! h e a d e r I d   )   { 
 	 	 	 	 	 h e a d e r I d   =   a c c o r d i o n I d   +   " - h e a d e r - "   +   i ; 
 	 	 	 	 	 h e a d e r . a t t r (   " i d " ,   h e a d e r I d   ) ; 
 	 	 	 	 } 
 	 	 	 	 i f   (   ! p a n e l I d   )   { 
 	 	 	 	 	 p a n e l I d   =   a c c o r d i o n I d   +   " - p a n e l - "   +   i ; 
 	 	 	 	 	 p a n e l . a t t r (   " i d " ,   p a n e l I d   ) ; 
 	 	 	 	 } 
 	 	 	 	 h e a d e r . a t t r (   " a r i a - c o n t r o l s " ,   p a n e l I d   ) ; 
 	 	 	 	 p a n e l . a t t r (   " a r i a - l a b e l l e d b y " ,   h e a d e r I d   ) ; 
 	 	 	 } ) 
 	 	 	 . n e x t ( ) 
 	 	 	 	 . a t t r (   " r o l e " ,   " t a b p a n e l "   ) ; 
 
 	 	 t h i s . h e a d e r s 
 	 	 	 . n o t (   t h i s . a c t i v e   ) 
 	 	 	 . a t t r ( { 
 	 	 	 	 " a r i a - s e l e c t e d " :   " f a l s e " , 
 	 	 	 	 t a b I n d e x :   - 1 
 	 	 	 } ) 
 	 	 	 . n e x t ( ) 
 	 	 	 	 . a t t r ( { 
 	 	 	 	 	 " a r i a - e x p a n d e d " :   " f a l s e " , 
 	 	 	 	 	 " a r i a - h i d d e n " :   " t r u e " 
 	 	 	 	 } ) 
 	 	 	 	 . h i d e ( ) ; 
 
 	 	 / /   m a k e   s u r e   a t   l e a s t   o n e   h e a d e r   i s   i n   t h e   t a b   o r d e r 
 	 	 i f   (   ! t h i s . a c t i v e . l e n g t h   )   { 
 	 	 	 t h i s . h e a d e r s . e q (   0   ) . a t t r (   " t a b I n d e x " ,   0   ) ; 
 	 	 }   e l s e   { 
 	 	 	 t h i s . a c t i v e . a t t r ( { 
 	 	 	 	 " a r i a - s e l e c t e d " :   " t r u e " , 
 	 	 	 	 t a b I n d e x :   0 
 	 	 	 } ) 
 	 	 	 . n e x t ( ) 
 	 	 	 	 . a t t r ( { 
 	 	 	 	 	 " a r i a - e x p a n d e d " :   " t r u e " , 
 	 	 	 	 	 " a r i a - h i d d e n " :   " f a l s e " 
 	 	 	 	 } ) ; 
 	 	 } 
 
 	 	 t h i s . _ c r e a t e I c o n s ( ) ; 
 
 	 	 t h i s . _ s e t u p E v e n t s (   o p t i o n s . e v e n t   ) ; 
 
 	 	 i f   (   h e i g h t S t y l e   = = =   " f i l l "   )   { 
 	 	 	 m a x H e i g h t   =   p a r e n t . h e i g h t ( ) ; 
 	 	 	 t h i s . e l e m e n t . s i b l i n g s (   " : v i s i b l e "   ) . e a c h ( f u n c t i o n ( )   { 
 	 	 	 	 v a r   e l e m   =   $ (   t h i s   ) , 
 	 	 	 	 	 p o s i t i o n   =   e l e m . c s s (   " p o s i t i o n "   ) ; 
 
 	 	 	 	 i f   (   p o s i t i o n   = = =   " a b s o l u t e "   | |   p o s i t i o n   = = =   " f i x e d "   )   { 
 	 	 	 	 	 r e t u r n ; 
 	 	 	 	 } 
 	 	 	 	 m a x H e i g h t   - =   e l e m . o u t e r H e i g h t (   t r u e   ) ; 
 	 	 	 } ) ; 
 
 	 	 	 t h i s . h e a d e r s . e a c h ( f u n c t i o n ( )   { 
 	 	 	 	 m a x H e i g h t   - =   $ (   t h i s   ) . o u t e r H e i g h t (   t r u e   ) ; 
 	 	 	 } ) ; 
 
 	 	 	 t h i s . h e a d e r s . n e x t ( ) 
 	 	 	 	 . e a c h ( f u n c t i o n ( )   { 
 	 	 	 	 	 $ (   t h i s   ) . h e i g h t (   M a t h . m a x (   0 ,   m a x H e i g h t   - 
 	 	 	 	 	 	 $ (   t h i s   ) . i n n e r H e i g h t ( )   +   $ (   t h i s   ) . h e i g h t ( )   )   ) ; 
 	 	 	 	 } ) 
 	 	 	 	 . c s s (   " o v e r f l o w " ,   " a u t o "   ) ; 
 	 	 }   e l s e   i f   (   h e i g h t S t y l e   = = =   " a u t o "   )   { 
 	 	 	 m a x H e i g h t   =   0 ; 
 	 	 	 t h i s . h e a d e r s . n e x t ( ) 
 	 	 	 	 . e a c h ( f u n c t i o n ( )   { 
 	 	 	 	 	 m a x H e i g h t   =   M a t h . m a x (   m a x H e i g h t ,   $ (   t h i s   ) . c s s (   " h e i g h t " ,   " "   ) . h e i g h t ( )   ) ; 
 	 	 	 	 } ) 
 	 	 	 	 . h e i g h t (   m a x H e i g h t   ) ; 
 	 	 } 
 	 } , 
 
 	 _ a c t i v a t e :   f u n c t i o n (   i n d e x   )   { 
 	 	 v a r   a c t i v e   =   t h i s . _ f i n d A c t i v e (   i n d e x   ) [   0   ] ; 
 
 	 	 / /   t r y i n g   t o   a c t i v a t e   t h e   a l r e a d y   a c t i v e   p a n e l 
 	 	 i f   (   a c t i v e   = = =   t h i s . a c t i v e [   0   ]   )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 / /   t r y i n g   t o   c o l l a p s e ,   s i m u l a t e   a   c l i c k   o n   t h e   c u r r e n t l y   a c t i v e   h e a d e r 
 	 	 a c t i v e   =   a c t i v e   | |   t h i s . a c t i v e [   0   ] ; 
 
 	 	 t h i s . _ e v e n t H a n d l e r ( { 
 	 	 	 t a r g e t :   a c t i v e , 
 	 	 	 c u r r e n t T a r g e t :   a c t i v e , 
 	 	 	 p r e v e n t D e f a u l t :   $ . n o o p 
 	 	 } ) ; 
 	 } , 
 
 	 _ f i n d A c t i v e :   f u n c t i o n (   s e l e c t o r   )   { 
 	 	 r e t u r n   t y p e o f   s e l e c t o r   = = =   " n u m b e r "   ?   t h i s . h e a d e r s . e q (   s e l e c t o r   )   :   $ ( ) ; 
 	 } , 
 
 	 _ s e t u p E v e n t s :   f u n c t i o n (   e v e n t   )   { 
 	 	 v a r   e v e n t s   =   { 
 	 	 	 k e y d o w n :   " _ k e y d o w n " 
 	 	 } ; 
 	 	 i f   (   e v e n t   )   { 
 	 	 	 $ . e a c h (   e v e n t . s p l i t ( "   " ) ,   f u n c t i o n (   i n d e x ,   e v e n t N a m e   )   { 
 	 	 	 	 e v e n t s [   e v e n t N a m e   ]   =   " _ e v e n t H a n d l e r " ; 
 	 	 	 } ) ; 
 	 	 } 
 
 	 	 t h i s . _ o f f (   t h i s . h e a d e r s . a d d (   t h i s . h e a d e r s . n e x t ( )   )   ) ; 
 	 	 t h i s . _ o n (   t h i s . h e a d e r s ,   e v e n t s   ) ; 
 	 	 t h i s . _ o n (   t h i s . h e a d e r s . n e x t ( ) ,   {   k e y d o w n :   " _ p a n e l K e y D o w n "   } ) ; 
 	 	 t h i s . _ h o v e r a b l e (   t h i s . h e a d e r s   ) ; 
 	 	 t h i s . _ f o c u s a b l e (   t h i s . h e a d e r s   ) ; 
 	 } , 
 
 	 _ e v e n t H a n d l e r :   f u n c t i o n (   e v e n t   )   { 
 	 	 v a r   o p t i o n s   =   t h i s . o p t i o n s , 
 	 	 	 a c t i v e   =   t h i s . a c t i v e , 
 	 	 	 c l i c k e d   =   $ (   e v e n t . c u r r e n t T a r g e t   ) , 
 	 	 	 c l i c k e d I s A c t i v e   =   c l i c k e d [   0   ]   = = =   a c t i v e [   0   ] , 
 	 	 	 c o l l a p s i n g   =   c l i c k e d I s A c t i v e   & &   o p t i o n s . c o l l a p s i b l e , 
 	 	 	 t o S h o w   =   c o l l a p s i n g   ?   $ ( )   :   c l i c k e d . n e x t ( ) , 
 	 	 	 t o H i d e   =   a c t i v e . n e x t ( ) , 
 	 	 	 e v e n t D a t a   =   { 
 	 	 	 	 o l d H e a d e r :   a c t i v e , 
 	 	 	 	 o l d P a n e l :   t o H i d e , 
 	 	 	 	 n e w H e a d e r :   c o l l a p s i n g   ?   $ ( )   :   c l i c k e d , 
 	 	 	 	 n e w P a n e l :   t o S h o w 
 	 	 	 } ; 
 
 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 
 	 	 i f   ( 
 	 	 	 	 / /   c l i c k   o n   a c t i v e   h e a d e r ,   b u t   n o t   c o l l a p s i b l e 
 	 	 	 	 (   c l i c k e d I s A c t i v e   & &   ! o p t i o n s . c o l l a p s i b l e   )   | | 
 	 	 	 	 / /   a l l o w   c a n c e l i n g   a c t i v a t i o n 
 	 	 	 	 (   t h i s . _ t r i g g e r (   " b e f o r e A c t i v a t e " ,   e v e n t ,   e v e n t D a t a   )   = = =   f a l s e   )   )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 o p t i o n s . a c t i v e   =   c o l l a p s i n g   ?   f a l s e   :   t h i s . h e a d e r s . i n d e x (   c l i c k e d   ) ; 
 
 	 	 / /   w h e n   t h e   c a l l   t o   . _ t o g g l e ( )   c o m e s   a f t e r   t h e   c l a s s   c h a n g e s 
 	 	 / /   i t   c a u s e s   a   v e r y   o d d   b u g   i n   I E   8   ( s e e   # 6 7 2 0 ) 
 	 	 t h i s . a c t i v e   =   c l i c k e d I s A c t i v e   ?   $ ( )   :   c l i c k e d ; 
 	 	 t h i s . _ t o g g l e (   e v e n t D a t a   ) ; 
 
 	 	 / /   s w i t c h   c l a s s e s 
 	 	 / /   c o r n e r   c l a s s e s   o n   t h e   p r e v i o u s l y   a c t i v e   h e a d e r   s t a y   a f t e r   t h e   a n i m a t i o n 
 	 	 a c t i v e . r e m o v e C l a s s (   " u i - a c c o r d i o n - h e a d e r - a c t i v e   u i - s t a t e - a c t i v e "   ) ; 
 	 	 i f   (   o p t i o n s . i c o n s   )   { 
 	 	 	 a c t i v e . c h i l d r e n (   " . u i - a c c o r d i o n - h e a d e r - i c o n "   ) 
 	 	 	 	 . r e m o v e C l a s s (   o p t i o n s . i c o n s . a c t i v e H e a d e r   ) 
 	 	 	 	 . a d d C l a s s (   o p t i o n s . i c o n s . h e a d e r   ) ; 
 	 	 } 
 
 	 	 i f   (   ! c l i c k e d I s A c t i v e   )   { 
 	 	 	 c l i c k e d 
 	 	 	 	 . r e m o v e C l a s s (   " u i - c o r n e r - a l l "   ) 
 	 	 	 	 . a d d C l a s s (   " u i - a c c o r d i o n - h e a d e r - a c t i v e   u i - s t a t e - a c t i v e   u i - c o r n e r - t o p "   ) ; 
 	 	 	 i f   (   o p t i o n s . i c o n s   )   { 
 	 	 	 	 c l i c k e d . c h i l d r e n (   " . u i - a c c o r d i o n - h e a d e r - i c o n "   ) 
 	 	 	 	 	 . r e m o v e C l a s s (   o p t i o n s . i c o n s . h e a d e r   ) 
 	 	 	 	 	 . a d d C l a s s (   o p t i o n s . i c o n s . a c t i v e H e a d e r   ) ; 
 	 	 	 } 
 
 	 	 	 c l i c k e d 
 	 	 	 	 . n e x t ( ) 
 	 	 	 	 . a d d C l a s s (   " u i - a c c o r d i o n - c o n t e n t - a c t i v e "   ) ; 
 	 	 } 
 	 } , 
 
 	 _ t o g g l e :   f u n c t i o n (   d a t a   )   { 
 	 	 v a r   t o S h o w   =   d a t a . n e w P a n e l , 
 	 	 	 t o H i d e   =   t h i s . p r e v S h o w . l e n g t h   ?   t h i s . p r e v S h o w   :   d a t a . o l d P a n e l ; 
 
 	 	 / /   h a n d l e   a c t i v a t i n g   a   p a n e l   d u r i n g   t h e   a n i m a t i o n   f o r   a n o t h e r   a c t i v a t i o n 
 	 	 t h i s . p r e v S h o w . a d d (   t h i s . p r e v H i d e   ) . s t o p (   t r u e ,   t r u e   ) ; 
 	 	 t h i s . p r e v S h o w   =   t o S h o w ; 
 	 	 t h i s . p r e v H i d e   =   t o H i d e ; 
 
 	 	 i f   (   t h i s . o p t i o n s . a n i m a t e   )   { 
 	 	 	 t h i s . _ a n i m a t e (   t o S h o w ,   t o H i d e ,   d a t a   ) ; 
 	 	 }   e l s e   { 
 	 	 	 t o H i d e . h i d e ( ) ; 
 	 	 	 t o S h o w . s h o w ( ) ; 
 	 	 	 t h i s . _ t o g g l e C o m p l e t e (   d a t a   ) ; 
 	 	 } 
 
 	 	 t o H i d e . a t t r ( { 
 	 	 	 " a r i a - e x p a n d e d " :   " f a l s e " , 
 	 	 	 " a r i a - h i d d e n " :   " t r u e " 
 	 	 } ) ; 
 	 	 t o H i d e . p r e v ( ) . a t t r (   " a r i a - s e l e c t e d " ,   " f a l s e "   ) ; 
 	 	 / /   i f   w e ' r e   s w i t c h i n g   p a n e l s ,   r e m o v e   t h e   o l d   h e a d e r   f r o m   t h e   t a b   o r d e r 
 	 	 / /   i f   w e ' r e   o p e n i n g   f r o m   c o l l a p s e d   s t a t e ,   r e m o v e   t h e   p r e v i o u s   h e a d e r   f r o m   t h e   t a b   o r d e r 
 	 	 / /   i f   w e ' r e   c o l l a p s i n g ,   t h e n   k e e p   t h e   c o l l a p s i n g   h e a d e r   i n   t h e   t a b   o r d e r 
 	 	 i f   (   t o S h o w . l e n g t h   & &   t o H i d e . l e n g t h   )   { 
 	 	 	 t o H i d e . p r e v ( ) . a t t r (   " t a b I n d e x " ,   - 1   ) ; 
 	 	 }   e l s e   i f   (   t o S h o w . l e n g t h   )   { 
 	 	 	 t h i s . h e a d e r s . f i l t e r ( f u n c t i o n ( )   { 
 	 	 	 	 r e t u r n   $ (   t h i s   ) . a t t r (   " t a b I n d e x "   )   = = =   0 ; 
 	 	 	 } ) 
 	 	 	 . a t t r (   " t a b I n d e x " ,   - 1   ) ; 
 	 	 } 
 
 	 	 t o S h o w 
 	 	 	 . a t t r ( { 
 	 	 	 	 " a r i a - e x p a n d e d " :   " t r u e " , 
 	 	 	 	 " a r i a - h i d d e n " :   " f a l s e " 
 	 	 	 } ) 
 	 	 	 . p r e v ( ) 
 	 	 	 	 . a t t r ( { 
 	 	 	 	 	 " a r i a - s e l e c t e d " :   " t r u e " , 
 	 	 	 	 	 t a b I n d e x :   0 
 	 	 	 	 } ) ; 
 	 } , 
 
 	 _ a n i m a t e :   f u n c t i o n (   t o S h o w ,   t o H i d e ,   d a t a   )   { 
 	 	 v a r   t o t a l ,   e a s i n g ,   d u r a t i o n , 
 	 	 	 t h a t   =   t h i s , 
 	 	 	 a d j u s t   =   0 , 
 	 	 	 d o w n   =   t o S h o w . l e n g t h   & & 
 	 	 	 	 (   ! t o H i d e . l e n g t h   | |   (   t o S h o w . i n d e x ( )   <   t o H i d e . i n d e x ( )   )   ) , 
 	 	 	 a n i m a t e   =   t h i s . o p t i o n s . a n i m a t e   | |   { } , 
 	 	 	 o p t i o n s   =   d o w n   & &   a n i m a t e . d o w n   | |   a n i m a t e , 
 	 	 	 c o m p l e t e   =   f u n c t i o n ( )   { 
 	 	 	 	 t h a t . _ t o g g l e C o m p l e t e (   d a t a   ) ; 
 	 	 	 } ; 
 
 	 	 i f   (   t y p e o f   o p t i o n s   = = =   " n u m b e r "   )   { 
 	 	 	 d u r a t i o n   =   o p t i o n s ; 
 	 	 } 
 	 	 i f   (   t y p e o f   o p t i o n s   = = =   " s t r i n g "   )   { 
 	 	 	 e a s i n g   =   o p t i o n s ; 
 	 	 } 
 	 	 / /   f a l l   b a c k   f r o m   o p t i o n s   t o   a n i m a t i o n   i n   c a s e   o f   p a r t i a l   d o w n   s e t t i n g s 
 	 	 e a s i n g   =   e a s i n g   | |   o p t i o n s . e a s i n g   | |   a n i m a t e . e a s i n g ; 
 	 	 d u r a t i o n   =   d u r a t i o n   | |   o p t i o n s . d u r a t i o n   | |   a n i m a t e . d u r a t i o n ; 
 
 	 	 i f   (   ! t o H i d e . l e n g t h   )   { 
 	 	 	 r e t u r n   t o S h o w . a n i m a t e (   s h o w P r o p s ,   d u r a t i o n ,   e a s i n g ,   c o m p l e t e   ) ; 
 	 	 } 
 	 	 i f   (   ! t o S h o w . l e n g t h   )   { 
 	 	 	 r e t u r n   t o H i d e . a n i m a t e (   h i d e P r o p s ,   d u r a t i o n ,   e a s i n g ,   c o m p l e t e   ) ; 
 	 	 } 
 
 	 	 t o t a l   =   t o S h o w . s h o w ( ) . o u t e r H e i g h t ( ) ; 
 	 	 t o H i d e . a n i m a t e (   h i d e P r o p s ,   { 
 	 	 	 d u r a t i o n :   d u r a t i o n , 
 	 	 	 e a s i n g :   e a s i n g , 
 	 	 	 s t e p :   f u n c t i o n (   n o w ,   f x   )   { 
 	 	 	 	 f x . n o w   =   M a t h . r o u n d (   n o w   ) ; 
 	 	 	 } 
 	 	 } ) ; 
 	 	 t o S h o w 
 	 	 	 . h i d e ( ) 
 	 	 	 . a n i m a t e (   s h o w P r o p s ,   { 
 	 	 	 	 d u r a t i o n :   d u r a t i o n , 
 	 	 	 	 e a s i n g :   e a s i n g , 
 	 	 	 	 c o m p l e t e :   c o m p l e t e , 
 	 	 	 	 s t e p :   f u n c t i o n (   n o w ,   f x   )   { 
 	 	 	 	 	 f x . n o w   =   M a t h . r o u n d (   n o w   ) ; 
 	 	 	 	 	 i f   (   f x . p r o p   ! = =   " h e i g h t "   )   { 
 	 	 	 	 	 	 a d j u s t   + =   f x . n o w ; 
 	 	 	 	 	 }   e l s e   i f   (   t h a t . o p t i o n s . h e i g h t S t y l e   ! = =   " c o n t e n t "   )   { 
 	 	 	 	 	 	 f x . n o w   =   M a t h . r o u n d (   t o t a l   -   t o H i d e . o u t e r H e i g h t ( )   -   a d j u s t   ) ; 
 	 	 	 	 	 	 a d j u s t   =   0 ; 
 	 	 	 	 	 } 
 	 	 	 	 } 
 	 	 	 } ) ; 
 	 } , 
 
 	 _ t o g g l e C o m p l e t e :   f u n c t i o n (   d a t a   )   { 
 	 	 v a r   t o H i d e   =   d a t a . o l d P a n e l ; 
 
 	 	 t o H i d e 
 	 	 	 . r e m o v e C l a s s (   " u i - a c c o r d i o n - c o n t e n t - a c t i v e "   ) 
 	 	 	 . p r e v ( ) 
 	 	 	 	 . r e m o v e C l a s s (   " u i - c o r n e r - t o p "   ) 
 	 	 	 	 . a d d C l a s s (   " u i - c o r n e r - a l l "   ) ; 
 
 	 	 / /   W o r k   a r o u n d   f o r   r e n d e r i n g   b u g   i n   I E   ( # 5 4 2 1 ) 
 	 	 i f   (   t o H i d e . l e n g t h   )   { 
 	 	 	 t o H i d e . p a r e n t ( ) [ 0 ] . c l a s s N a m e   =   t o H i d e . p a r e n t ( ) [ 0 ] . c l a s s N a m e ; 
 	 	 } 
 
 	 	 t h i s . _ t r i g g e r (   " a c t i v a t e " ,   n u l l ,   d a t a   ) ; 
 	 } 
 } ) ; 
 
 } ) (   j Q u e r y   ) ; 
 
 ( f u n c t i o n (   $ ,   u n d e f i n e d   )   { 
 
 / /   u s e d   t o   p r e v e n t   r a c e   c o n d i t i o n s   w i t h   r e m o t e   d a t a   s o u r c e s 
 v a r   r e q u e s t I n d e x   =   0 ; 
 
 $ . w i d g e t (   " u i . a u t o c o m p l e t e " ,   { 
 	 v e r s i o n :   " 1 . 1 0 . 3 " , 
 	 d e f a u l t E l e m e n t :   " < i n p u t > " , 
 	 o p t i o n s :   { 
 	 	 a p p e n d T o :   n u l l , 
 	 	 a u t o F o c u s :   f a l s e , 
 	 	 d e l a y :   3 0 0 , 
 	 	 m i n L e n g t h :   1 , 
 	 	 p o s i t i o n :   { 
 	 	 	 m y :   " l e f t   t o p " , 
 	 	 	 a t :   " l e f t   b o t t o m " , 
 	 	 	 c o l l i s i o n :   " n o n e " 
 	 	 } , 
 	 	 s o u r c e :   n u l l , 
 
 	 	 / /   c a l l b a c k s 
 	 	 c h a n g e :   n u l l , 
 	 	 c l o s e :   n u l l , 
 	 	 f o c u s :   n u l l , 
 	 	 o p e n :   n u l l , 
 	 	 r e s p o n s e :   n u l l , 
 	 	 s e a r c h :   n u l l , 
 	 	 s e l e c t :   n u l l 
 	 } , 
 
 	 p e n d i n g :   0 , 
 
 	 _ c r e a t e :   f u n c t i o n ( )   { 
 	 	 / /   S o m e   b r o w s e r s   o n l y   r e p e a t   k e y d o w n   e v e n t s ,   n o t   k e y p r e s s   e v e n t s , 
 	 	 / /   s o   w e   u s e   t h e   s u p p r e s s K e y P r e s s   f l a g   t o   d e t e r m i n e   i f   w e ' v e   a l r e a d y 
 	 	 / /   h a n d l e d   t h e   k e y d o w n   e v e n t .   # 7 2 6 9 
 	 	 / /   U n f o r t u n a t e l y   t h e   c o d e   f o r   &   i n   k e y p r e s s   i s   t h e   s a m e   a s   t h e   u p   a r r o w , 
 	 	 / /   s o   w e   u s e   t h e   s u p p r e s s K e y P r e s s R e p e a t   f l a g   t o   a v o i d   h a n d l i n g   k e y p r e s s 
 	 	 / /   e v e n t s   w h e n   w e   k n o w   t h e   k e y d o w n   e v e n t   w a s   u s e d   t o   m o d i f y   t h e 
 	 	 / /   s e a r c h   t e r m .   # 7 7 9 9 
 	 	 v a r   s u p p r e s s K e y P r e s s ,   s u p p r e s s K e y P r e s s R e p e a t ,   s u p p r e s s I n p u t , 
 	 	 	 n o d e N a m e   =   t h i s . e l e m e n t [ 0 ] . n o d e N a m e . t o L o w e r C a s e ( ) , 
 	 	 	 i s T e x t a r e a   =   n o d e N a m e   = = =   " t e x t a r e a " , 
 	 	 	 i s I n p u t   =   n o d e N a m e   = = =   " i n p u t " ; 
 
 	 	 t h i s . i s M u l t i L i n e   = 
 	 	 	 / /   T e x t a r e a s   a r e   a l w a y s   m u l t i - l i n e 
 	 	 	 i s T e x t a r e a   ?   t r u e   : 
 	 	 	 / /   I n p u t s   a r e   a l w a y s   s i n g l e - l i n e ,   e v e n   i f   i n s i d e   a   c o n t e n t E d i t a b l e   e l e m e n t 
 	 	 	 / /   I E   a l s o   t r e a t s   i n p u t s   a s   c o n t e n t E d i t a b l e 
 	 	 	 i s I n p u t   ?   f a l s e   : 
 	 	 	 / /   A l l   o t h e r   e l e m e n t   t y p e s   a r e   d e t e r m i n e d   b y   w h e t h e r   o r   n o t   t h e y ' r e   c o n t e n t E d i t a b l e 
 	 	 	 t h i s . e l e m e n t . p r o p (   " i s C o n t e n t E d i t a b l e "   ) ; 
 
 	 	 t h i s . v a l u e M e t h o d   =   t h i s . e l e m e n t [   i s T e x t a r e a   | |   i s I n p u t   ?   " v a l "   :   " t e x t "   ] ; 
 	 	 t h i s . i s N e w M e n u   =   t r u e ; 
 
 	 	 t h i s . e l e m e n t 
 	 	 	 . a d d C l a s s (   " u i - a u t o c o m p l e t e - i n p u t "   ) 
 	 	 	 . a t t r (   " a u t o c o m p l e t e " ,   " o f f "   ) ; 
 
 	 	 t h i s . _ o n (   t h i s . e l e m e n t ,   { 
 	 	 	 k e y d o w n :   f u n c t i o n (   e v e n t   )   { 
 	 	 	 	 / * j s h i n t   m a x c o m p l e x i t y : 1 5 * / 
 	 	 	 	 i f   (   t h i s . e l e m e n t . p r o p (   " r e a d O n l y "   )   )   { 
 	 	 	 	 	 s u p p r e s s K e y P r e s s   =   t r u e ; 
 	 	 	 	 	 s u p p r e s s I n p u t   =   t r u e ; 
 	 	 	 	 	 s u p p r e s s K e y P r e s s R e p e a t   =   t r u e ; 
 	 	 	 	 	 r e t u r n ; 
 	 	 	 	 } 
 
 	 	 	 	 s u p p r e s s K e y P r e s s   =   f a l s e ; 
 	 	 	 	 s u p p r e s s I n p u t   =   f a l s e ; 
 	 	 	 	 s u p p r e s s K e y P r e s s R e p e a t   =   f a l s e ; 
 	 	 	 	 v a r   k e y C o d e   =   $ . u i . k e y C o d e ; 
 	 	 	 	 s w i t c h (   e v e n t . k e y C o d e   )   { 
 	 	 	 	 c a s e   k e y C o d e . P A G E _ U P : 
 	 	 	 	 	 s u p p r e s s K e y P r e s s   =   t r u e ; 
 	 	 	 	 	 t h i s . _ m o v e (   " p r e v i o u s P a g e " ,   e v e n t   ) ; 
 	 	 	 	 	 b r e a k ; 
 	 	 	 	 c a s e   k e y C o d e . P A G E _ D O W N : 
 	 	 	 	 	 s u p p r e s s K e y P r e s s   =   t r u e ; 
 	 	 	 	 	 t h i s . _ m o v e (   " n e x t P a g e " ,   e v e n t   ) ; 
 	 	 	 	 	 b r e a k ; 
 	 	 	 	 c a s e   k e y C o d e . U P : 
 	 	 	 	 	 s u p p r e s s K e y P r e s s   =   t r u e ; 
 	 	 	 	 	 t h i s . _ k e y E v e n t (   " p r e v i o u s " ,   e v e n t   ) ; 
 	 	 	 	 	 b r e a k ; 
 	 	 	 	 c a s e   k e y C o d e . D O W N : 
 	 	 	 	 	 s u p p r e s s K e y P r e s s   =   t r u e ; 
 	 	 	 	 	 t h i s . _ k e y E v e n t (   " n e x t " ,   e v e n t   ) ; 
 	 	 	 	 	 b r e a k ; 
 	 	 	 	 c a s e   k e y C o d e . E N T E R : 
 	 	 	 	 c a s e   k e y C o d e . N U M P A D _ E N T E R : 
 	 	 	 	 	 / /   w h e n   m e n u   i s   o p e n   a n d   h a s   f o c u s 
 	 	 	 	 	 i f   (   t h i s . m e n u . a c t i v e   )   { 
 	 	 	 	 	 	 / /   # 6 0 5 5   -   O p e r a   s t i l l   a l l o w s   t h e   k e y p r e s s   t o   o c c u r 
 	 	 	 	 	 	 / /   w h i c h   c a u s e s   f o r m s   t o   s u b m i t 
 	 	 	 	 	 	 s u p p r e s s K e y P r e s s   =   t r u e ; 
 	 	 	 	 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 	 	 	 	 	 	 t h i s . m e n u . s e l e c t (   e v e n t   ) ; 
 	 	 	 	 	 } 
 	 	 	 	 	 b r e a k ; 
 	 	 	 	 c a s e   k e y C o d e . T A B : 
 	 	 	 	 	 i f   (   t h i s . m e n u . a c t i v e   )   { 
 	 	 	 	 	 	 t h i s . m e n u . s e l e c t (   e v e n t   ) ; 
 	 	 	 	 	 } 
 	 	 	 	 	 b r e a k ; 
 	 	 	 	 c a s e   k e y C o d e . E S C A P E : 
 	 	 	 	 	 i f   (   t h i s . m e n u . e l e m e n t . i s (   " : v i s i b l e "   )   )   { 
 	 	 	 	 	 	 t h i s . _ v a l u e (   t h i s . t e r m   ) ; 
 	 	 	 	 	 	 t h i s . c l o s e (   e v e n t   ) ; 
 	 	 	 	 	 	 / /   D i f f e r e n t   b r o w s e r s   h a v e   d i f f e r e n t   d e f a u l t   b e h a v i o r   f o r   e s c a p e 
 	 	 	 	 	 	 / /   S i n g l e   p r e s s   c a n   m e a n   u n d o   o r   c l e a r 
 	 	 	 	 	 	 / /   D o u b l e   p r e s s   i n   I E   m e a n s   c l e a r   t h e   w h o l e   f o r m 
 	 	 	 	 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 	 	 	 	 	 } 
 	 	 	 	 	 b r e a k ; 
 	 	 	 	 d e f a u l t : 
 	 	 	 	 	 s u p p r e s s K e y P r e s s R e p e a t   =   t r u e ; 
 	 	 	 	 	 / /   s e a r c h   t i m e o u t   s h o u l d   b e   t r i g g e r e d   b e f o r e   t h e   i n p u t   v a l u e   i s   c h a n g e d 
 	 	 	 	 	 t h i s . _ s e a r c h T i m e o u t (   e v e n t   ) ; 
 	 	 	 	 	 b r e a k ; 
 	 	 	 	 } 
 	 	 	 } , 
 	 	 	 k e y p r e s s :   f u n c t i o n (   e v e n t   )   { 
 	 	 	 	 i f   (   s u p p r e s s K e y P r e s s   )   { 
 	 	 	 	 	 s u p p r e s s K e y P r e s s   =   f a l s e ; 
 	 	 	 	 	 i f   (   ! t h i s . i s M u l t i L i n e   | |   t h i s . m e n u . e l e m e n t . i s (   " : v i s i b l e "   )   )   { 
 	 	 	 	 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 	 	 	 	 	 } 
 	 	 	 	 	 r e t u r n ; 
 	 	 	 	 } 
 	 	 	 	 i f   (   s u p p r e s s K e y P r e s s R e p e a t   )   { 
 	 	 	 	 	 r e t u r n ; 
 	 	 	 	 } 
 
 	 	 	 	 / /   r e p l i c a t e   s o m e   k e y   h a n d l e r s   t o   a l l o w   t h e m   t o   r e p e a t   i n   F i r e f o x   a n d   O p e r a 
 	 	 	 	 v a r   k e y C o d e   =   $ . u i . k e y C o d e ; 
 	 	 	 	 s w i t c h (   e v e n t . k e y C o d e   )   { 
 	 	 	 	 c a s e   k e y C o d e . P A G E _ U P : 
 	 	 	 	 	 t h i s . _ m o v e (   " p r e v i o u s P a g e " ,   e v e n t   ) ; 
 	 	 	 	 	 b r e a k ; 
 	 	 	 	 c a s e   k e y C o d e . P A G E _ D O W N : 
 	 	 	 	 	 t h i s . _ m o v e (   " n e x t P a g e " ,   e v e n t   ) ; 
 	 	 	 	 	 b r e a k ; 
 	 	 	 	 c a s e   k e y C o d e . U P : 
 	 	 	 	 	 t h i s . _ k e y E v e n t (   " p r e v i o u s " ,   e v e n t   ) ; 
 	 	 	 	 	 b r e a k ; 
 	 	 	 	 c a s e   k e y C o d e . D O W N : 
 	 	 	 	 	 t h i s . _ k e y E v e n t (   " n e x t " ,   e v e n t   ) ; 
 	 	 	 	 	 b r e a k ; 
 	 	 	 	 } 
 	 	 	 } , 
 	 	 	 i n p u t :   f u n c t i o n (   e v e n t   )   { 
 	 	 	 	 i f   (   s u p p r e s s I n p u t   )   { 
 	 	 	 	 	 s u p p r e s s I n p u t   =   f a l s e ; 
 	 	 	 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 	 	 	 	 	 r e t u r n ; 
 	 	 	 	 } 
 	 	 	 	 t h i s . _ s e a r c h T i m e o u t (   e v e n t   ) ; 
 	 	 	 } , 
 	 	 	 f o c u s :   f u n c t i o n ( )   { 
 	 	 	 	 t h i s . s e l e c t e d I t e m   =   n u l l ; 
 	 	 	 	 t h i s . p r e v i o u s   =   t h i s . _ v a l u e ( ) ; 
 	 	 	 } , 
 	 	 	 b l u r :   f u n c t i o n (   e v e n t   )   { 
 	 	 	 	 i f   (   t h i s . c a n c e l B l u r   )   { 
 	 	 	 	 	 d e l e t e   t h i s . c a n c e l B l u r ; 
 	 	 	 	 	 r e t u r n ; 
 	 	 	 	 } 
 
 	 	 	 	 c l e a r T i m e o u t (   t h i s . s e a r c h i n g   ) ; 
 	 	 	 	 t h i s . c l o s e (   e v e n t   ) ; 
 	 	 	 	 t h i s . _ c h a n g e (   e v e n t   ) ; 
 	 	 	 } 
 	 	 } ) ; 
 
 	 	 t h i s . _ i n i t S o u r c e ( ) ; 
 	 	 t h i s . m e n u   =   $ (   " < u l > "   ) 
 	 	 	 . a d d C l a s s (   " u i - a u t o c o m p l e t e   u i - f r o n t "   ) 
 	 	 	 . a p p e n d T o (   t h i s . _ a p p e n d T o ( )   ) 
 	 	 	 . m e n u ( { 
 	 	 	 	 / /   d i s a b l e   A R I A   s u p p o r t ,   t h e   l i v e   r e g i o n   t a k e s   c a r e   o f   t h a t 
 	 	 	 	 r o l e :   n u l l 
 	 	 	 } ) 
 	 	 	 . h i d e ( ) 
 	 	 	 . d a t a (   " u i - m e n u "   ) ; 
 
 	 	 t h i s . _ o n (   t h i s . m e n u . e l e m e n t ,   { 
 	 	 	 m o u s e d o w n :   f u n c t i o n (   e v e n t   )   { 
 	 	 	 	 / /   p r e v e n t   m o v i n g   f o c u s   o u t   o f   t h e   t e x t   f i e l d 
 	 	 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 
 	 	 	 	 / /   I E   d o e s n ' t   p r e v e n t   m o v i n g   f o c u s   e v e n   w i t h   e v e n t . p r e v e n t D e f a u l t ( ) 
 	 	 	 	 / /   s o   w e   s e t   a   f l a g   t o   k n o w   w h e n   w e   s h o u l d   i g n o r e   t h e   b l u r   e v e n t 
 	 	 	 	 t h i s . c a n c e l B l u r   =   t r u e ; 
 	 	 	 	 t h i s . _ d e l a y ( f u n c t i o n ( )   { 
 	 	 	 	 	 d e l e t e   t h i s . c a n c e l B l u r ; 
 	 	 	 	 } ) ; 
 
 	 	 	 	 / /   c l i c k i n g   o n   t h e   s c r o l l b a r   c a u s e s   f o c u s   t o   s h i f t   t o   t h e   b o d y 
 	 	 	 	 / /   b u t   w e   c a n ' t   d e t e c t   a   m o u s e u p   o r   a   c l i c k   i m m e d i a t e l y   a f t e r w a r d 
 	 	 	 	 / /   s o   w e   h a v e   t o   t r a c k   t h e   n e x t   m o u s e d o w n   a n d   c l o s e   t h e   m e n u   i f 
 	 	 	 	 / /   t h e   u s e r   c l i c k s   s o m e w h e r e   o u t s i d e   o f   t h e   a u t o c o m p l e t e 
 	 	 	 	 v a r   m e n u E l e m e n t   =   t h i s . m e n u . e l e m e n t [   0   ] ; 
 	 	 	 	 i f   (   ! $ (   e v e n t . t a r g e t   ) . c l o s e s t (   " . u i - m e n u - i t e m "   ) . l e n g t h   )   { 
 	 	 	 	 	 t h i s . _ d e l a y ( f u n c t i o n ( )   { 
 	 	 	 	 	 	 v a r   t h a t   =   t h i s ; 
 	 	 	 	 	 	 t h i s . d o c u m e n t . o n e (   " m o u s e d o w n " ,   f u n c t i o n (   e v e n t   )   { 
 	 	 	 	 	 	 	 i f   (   e v e n t . t a r g e t   ! = =   t h a t . e l e m e n t [   0   ]   & & 
 	 	 	 	 	 	 	 	 	 e v e n t . t a r g e t   ! = =   m e n u E l e m e n t   & & 
 	 	 	 	 	 	 	 	 	 ! $ . c o n t a i n s (   m e n u E l e m e n t ,   e v e n t . t a r g e t   )   )   { 
 	 	 	 	 	 	 	 	 t h a t . c l o s e ( ) ; 
 	 	 	 	 	 	 	 } 
 	 	 	 	 	 	 } ) ; 
 	 	 	 	 	 } ) ; 
 	 	 	 	 } 
 	 	 	 } , 
 	 	 	 m e n u f o c u s :   f u n c t i o n (   e v e n t ,   u i   )   { 
 	 	 	 	 / /   s u p p o r t :   F i r e f o x 
 	 	 	 	 / /   P r e v e n t   a c c i d e n t a l   a c t i v a t i o n   o f   m e n u   i t e m s   i n   F i r e f o x   ( # 7 0 2 4   # 9 1 1 8 ) 
 	 	 	 	 i f   (   t h i s . i s N e w M e n u   )   { 
 	 	 	 	 	 t h i s . i s N e w M e n u   =   f a l s e ; 
 	 	 	 	 	 i f   (   e v e n t . o r i g i n a l E v e n t   & &   / ^ m o u s e / . t e s t (   e v e n t . o r i g i n a l E v e n t . t y p e   )   )   { 
 	 	 	 	 	 	 t h i s . m e n u . b l u r ( ) ; 
 
 	 	 	 	 	 	 t h i s . d o c u m e n t . o n e (   " m o u s e m o v e " ,   f u n c t i o n ( )   { 
 	 	 	 	 	 	 	 $ (   e v e n t . t a r g e t   ) . t r i g g e r (   e v e n t . o r i g i n a l E v e n t   ) ; 
 	 	 	 	 	 	 } ) ; 
 
 	 	 	 	 	 	 r e t u r n ; 
 	 	 	 	 	 } 
 	 	 	 	 } 
 
 	 	 	 	 v a r   i t e m   =   u i . i t e m . d a t a (   " u i - a u t o c o m p l e t e - i t e m "   ) ; 
 	 	 	 	 i f   (   f a l s e   ! = =   t h i s . _ t r i g g e r (   " f o c u s " ,   e v e n t ,   {   i t e m :   i t e m   }   )   )   { 
 	 	 	 	 	 / /   u s e   v a l u e   t o   m a t c h   w h a t   w i l l   e n d   u p   i n   t h e   i n p u t ,   i f   i t   w a s   a   k e y   e v e n t 
 	 	 	 	 	 i f   (   e v e n t . o r i g i n a l E v e n t   & &   / ^ k e y / . t e s t (   e v e n t . o r i g i n a l E v e n t . t y p e   )   )   { 
 	 	 	 	 	 	 t h i s . _ v a l u e (   i t e m . v a l u e   ) ; 
 	 	 	 	 	 } 
 	 	 	 	 }   e l s e   { 
 	 	 	 	 	 / /   N o r m a l l y   t h e   i n p u t   i s   p o p u l a t e d   w i t h   t h e   i t e m ' s   v a l u e   a s   t h e 
 	 	 	 	 	 / /   m e n u   i s   n a v i g a t e d ,   c a u s i n g   s c r e e n   r e a d e r s   t o   n o t i c e   a   c h a n g e   a n d 
 	 	 	 	 	 / /   a n n o u n c e   t h e   i t e m .   S i n c e   t h e   f o c u s   e v e n t   w a s   c a n c e l e d ,   t h i s   d o e s n ' t 
 	 	 	 	 	 / /   h a p p e n ,   s o   w e   u p d a t e   t h e   l i v e   r e g i o n   s o   t h a t   s c r e e n   r e a d e r s   c a n 
 	 	 	 	 	 / /   s t i l l   n o t i c e   t h e   c h a n g e   a n d   a n n o u n c e   i t . 
 	 	 	 	 	 t h i s . l i v e R e g i o n . t e x t (   i t e m . v a l u e   ) ; 
 	 	 	 	 } 
 	 	 	 } , 
 	 	 	 m e n u s e l e c t :   f u n c t i o n (   e v e n t ,   u i   )   { 
 	 	 	 	 v a r   i t e m   =   u i . i t e m . d a t a (   " u i - a u t o c o m p l e t e - i t e m "   ) , 
 	 	 	 	 	 p r e v i o u s   =   t h i s . p r e v i o u s ; 
 
 	 	 	 	 / /   o n l y   t r i g g e r   w h e n   f o c u s   w a s   l o s t   ( c l i c k   o n   m e n u ) 
 	 	 	 	 i f   (   t h i s . e l e m e n t [ 0 ]   ! = =   t h i s . d o c u m e n t [ 0 ] . a c t i v e E l e m e n t   )   { 
 	 	 	 	 	 t h i s . e l e m e n t . f o c u s ( ) ; 
 	 	 	 	 	 t h i s . p r e v i o u s   =   p r e v i o u s ; 
 	 	 	 	 	 / /   # 6 1 0 9   -   I E   t r i g g e r s   t w o   f o c u s   e v e n t s   a n d   t h e   s e c o n d 
 	 	 	 	 	 / /   i s   a s y n c h r o n o u s ,   s o   w e   n e e d   t o   r e s e t   t h e   p r e v i o u s 
 	 	 	 	 	 / /   t e r m   s y n c h r o n o u s l y   a n d   a s y n c h r o n o u s l y   : - ( 
 	 	 	 	 	 t h i s . _ d e l a y ( f u n c t i o n ( )   { 
 	 	 	 	 	 	 t h i s . p r e v i o u s   =   p r e v i o u s ; 
 	 	 	 	 	 	 t h i s . s e l e c t e d I t e m   =   i t e m ; 
 	 	 	 	 	 } ) ; 
 	 	 	 	 } 
 
 	 	 	 	 i f   (   f a l s e   ! = =   t h i s . _ t r i g g e r (   " s e l e c t " ,   e v e n t ,   {   i t e m :   i t e m   }   )   )   { 
 	 	 	 	 	 t h i s . _ v a l u e (   i t e m . v a l u e   ) ; 
 	 	 	 	 } 
 	 	 	 	 / /   r e s e t   t h e   t e r m   a f t e r   t h e   s e l e c t   e v e n t 
 	 	 	 	 / /   t h i s   a l l o w s   c u s t o m   s e l e c t   h a n d l i n g   t o   w o r k   p r o p e r l y 
 	 	 	 	 t h i s . t e r m   =   t h i s . _ v a l u e ( ) ; 
 
 	 	 	 	 t h i s . c l o s e (   e v e n t   ) ; 
 	 	 	 	 t h i s . s e l e c t e d I t e m   =   i t e m ; 
 	 	 	 } 
 	 	 } ) ; 
 
 	 	 t h i s . l i v e R e g i o n   =   $ (   " < s p a n > " ,   { 
 	 	 	 	 r o l e :   " s t a t u s " , 
 	 	 	 	 " a r i a - l i v e " :   " p o l i t e " 
 	 	 	 } ) 
 	 	 	 . a d d C l a s s (   " u i - h e l p e r - h i d d e n - a c c e s s i b l e "   ) 
 	 	 	 . i n s e r t B e f o r e (   t h i s . e l e m e n t   ) ; 
 
 	 	 / /   t u r n i n g   o f f   a u t o c o m p l e t e   p r e v e n t s   t h e   b r o w s e r   f r o m   r e m e m b e r i n g   t h e 
 	 	 / /   v a l u e   w h e n   n a v i g a t i n g   t h r o u g h   h i s t o r y ,   s o   w e   r e - e n a b l e   a u t o c o m p l e t e 
 	 	 / /   i f   t h e   p a g e   i s   u n l o a d e d   b e f o r e   t h e   w i d g e t   i s   d e s t r o y e d .   # 7 7 9 0 
 	 	 t h i s . _ o n (   t h i s . w i n d o w ,   { 
 	 	 	 b e f o r e u n l o a d :   f u n c t i o n ( )   { 
 	 	 	 	 t h i s . e l e m e n t . r e m o v e A t t r (   " a u t o c o m p l e t e "   ) ; 
 	 	 	 } 
 	 	 } ) ; 
 	 } , 
 
 	 _ d e s t r o y :   f u n c t i o n ( )   { 
 	 	 c l e a r T i m e o u t (   t h i s . s e a r c h i n g   ) ; 
 	 	 t h i s . e l e m e n t 
 	 	 	 . r e m o v e C l a s s (   " u i - a u t o c o m p l e t e - i n p u t "   ) 
 	 	 	 . r e m o v e A t t r (   " a u t o c o m p l e t e "   ) ; 
 	 	 t h i s . m e n u . e l e m e n t . r e m o v e ( ) ; 
 	 	 t h i s . l i v e R e g i o n . r e m o v e ( ) ; 
 	 } , 
 
 	 _ s e t O p t i o n :   f u n c t i o n (   k e y ,   v a l u e   )   { 
 	 	 t h i s . _ s u p e r (   k e y ,   v a l u e   ) ; 
 	 	 i f   (   k e y   = = =   " s o u r c e "   )   { 
 	 	 	 t h i s . _ i n i t S o u r c e ( ) ; 
 	 	 } 
 	 	 i f   (   k e y   = = =   " a p p e n d T o "   )   { 
 	 	 	 t h i s . m e n u . e l e m e n t . a p p e n d T o (   t h i s . _ a p p e n d T o ( )   ) ; 
 	 	 } 
 	 	 i f   (   k e y   = = =   " d i s a b l e d "   & &   v a l u e   & &   t h i s . x h r   )   { 
 	 	 	 t h i s . x h r . a b o r t ( ) ; 
 	 	 } 
 	 } , 
 
 	 _ a p p e n d T o :   f u n c t i o n ( )   { 
 	 	 v a r   e l e m e n t   =   t h i s . o p t i o n s . a p p e n d T o ; 
 
 	 	 i f   (   e l e m e n t   )   { 
 	 	 	 e l e m e n t   =   e l e m e n t . j q u e r y   | |   e l e m e n t . n o d e T y p e   ? 
 	 	 	 	 $ (   e l e m e n t   )   : 
 	 	 	 	 t h i s . d o c u m e n t . f i n d (   e l e m e n t   ) . e q (   0   ) ; 
 	 	 } 
 
 	 	 i f   (   ! e l e m e n t   )   { 
 	 	 	 e l e m e n t   =   t h i s . e l e m e n t . c l o s e s t (   " . u i - f r o n t "   ) ; 
 	 	 } 
 
 	 	 i f   (   ! e l e m e n t . l e n g t h   )   { 
 	 	 	 e l e m e n t   =   t h i s . d o c u m e n t [ 0 ] . b o d y ; 
 	 	 } 
 
 	 	 r e t u r n   e l e m e n t ; 
 	 } , 
 
 	 _ i n i t S o u r c e :   f u n c t i o n ( )   { 
 	 	 v a r   a r r a y ,   u r l , 
 	 	 	 t h a t   =   t h i s ; 
 	 	 i f   (   $ . i s A r r a y ( t h i s . o p t i o n s . s o u r c e )   )   { 
 	 	 	 a r r a y   =   t h i s . o p t i o n s . s o u r c e ; 
 	 	 	 t h i s . s o u r c e   =   f u n c t i o n (   r e q u e s t ,   r e s p o n s e   )   { 
 	 	 	 	 r e s p o n s e (   $ . u i . a u t o c o m p l e t e . f i l t e r (   a r r a y ,   r e q u e s t . t e r m   )   ) ; 
 	 	 	 } ; 
 	 	 }   e l s e   i f   (   t y p e o f   t h i s . o p t i o n s . s o u r c e   = = =   " s t r i n g "   )   { 
 	 	 	 u r l   =   t h i s . o p t i o n s . s o u r c e ; 
 	 	 	 t h i s . s o u r c e   =   f u n c t i o n (   r e q u e s t ,   r e s p o n s e   )   { 
 	 	 	 	 i f   (   t h a t . x h r   )   { 
 	 	 	 	 	 t h a t . x h r . a b o r t ( ) ; 
 	 	 	 	 } 
 	 	 	 	 t h a t . x h r   =   $ . a j a x ( { 
 	 	 	 	 	 u r l :   u r l , 
 	 	 	 	 	 d a t a :   r e q u e s t , 
 	 	 	 	 	 d a t a T y p e :   " j s o n " , 
 	 	 	 	 	 s u c c e s s :   f u n c t i o n (   d a t a   )   { 
 	 	 	 	 	 	 r e s p o n s e (   d a t a   ) ; 
 	 	 	 	 	 } , 
 	 	 	 	 	 e r r o r :   f u n c t i o n ( )   { 
 	 	 	 	 	 	 r e s p o n s e (   [ ]   ) ; 
 	 	 	 	 	 } 
 	 	 	 	 } ) ; 
 	 	 	 } ; 
 	 	 }   e l s e   { 
 	 	 	 t h i s . s o u r c e   =   t h i s . o p t i o n s . s o u r c e ; 
 	 	 } 
 	 } , 
 
 	 _ s e a r c h T i m e o u t :   f u n c t i o n (   e v e n t   )   { 
 	 	 c l e a r T i m e o u t (   t h i s . s e a r c h i n g   ) ; 
 	 	 t h i s . s e a r c h i n g   =   t h i s . _ d e l a y ( f u n c t i o n ( )   { 
 	 	 	 / /   o n l y   s e a r c h   i f   t h e   v a l u e   h a s   c h a n g e d 
 	 	 	 i f   (   t h i s . t e r m   ! = =   t h i s . _ v a l u e ( )   )   { 
 	 	 	 	 t h i s . s e l e c t e d I t e m   =   n u l l ; 
 	 	 	 	 t h i s . s e a r c h (   n u l l ,   e v e n t   ) ; 
 	 	 	 } 
 	 	 } ,   t h i s . o p t i o n s . d e l a y   ) ; 
 	 } , 
 
 	 s e a r c h :   f u n c t i o n (   v a l u e ,   e v e n t   )   { 
 	 	 v a l u e   =   v a l u e   ! =   n u l l   ?   v a l u e   :   t h i s . _ v a l u e ( ) ; 
 
 	 	 / /   a l w a y s   s a v e   t h e   a c t u a l   v a l u e ,   n o t   t h e   o n e   p a s s e d   a s   a n   a r g u m e n t 
 	 	 t h i s . t e r m   =   t h i s . _ v a l u e ( ) ; 
 
 	 	 i f   (   v a l u e . l e n g t h   <   t h i s . o p t i o n s . m i n L e n g t h   )   { 
 	 	 	 r e t u r n   t h i s . c l o s e (   e v e n t   ) ; 
 	 	 } 
 
 	 	 i f   (   t h i s . _ t r i g g e r (   " s e a r c h " ,   e v e n t   )   = = =   f a l s e   )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 r e t u r n   t h i s . _ s e a r c h (   v a l u e   ) ; 
 	 } , 
 
 	 _ s e a r c h :   f u n c t i o n (   v a l u e   )   { 
 	 	 t h i s . p e n d i n g + + ; 
 	 	 t h i s . e l e m e n t . a d d C l a s s (   " u i - a u t o c o m p l e t e - l o a d i n g "   ) ; 
 	 	 t h i s . c a n c e l S e a r c h   =   f a l s e ; 
 
 	 	 t h i s . s o u r c e (   {   t e r m :   v a l u e   } ,   t h i s . _ r e s p o n s e ( )   ) ; 
 	 } , 
 
 	 _ r e s p o n s e :   f u n c t i o n ( )   { 
 	 	 v a r   t h a t   =   t h i s , 
 	 	 	 i n d e x   =   + + r e q u e s t I n d e x ; 
 
 	 	 r e t u r n   f u n c t i o n (   c o n t e n t   )   { 
 	 	 	 i f   (   i n d e x   = = =   r e q u e s t I n d e x   )   { 
 	 	 	 	 t h a t . _ _ r e s p o n s e (   c o n t e n t   ) ; 
 	 	 	 } 
 
 	 	 	 t h a t . p e n d i n g - - ; 
 	 	 	 i f   (   ! t h a t . p e n d i n g   )   { 
 	 	 	 	 t h a t . e l e m e n t . r e m o v e C l a s s (   " u i - a u t o c o m p l e t e - l o a d i n g "   ) ; 
 	 	 	 } 
 	 	 } ; 
 	 } , 
 
 	 _ _ r e s p o n s e :   f u n c t i o n (   c o n t e n t   )   { 
 	 	 i f   (   c o n t e n t   )   { 
 	 	 	 c o n t e n t   =   t h i s . _ n o r m a l i z e (   c o n t e n t   ) ; 
 	 	 } 
 	 	 t h i s . _ t r i g g e r (   " r e s p o n s e " ,   n u l l ,   {   c o n t e n t :   c o n t e n t   }   ) ; 
 	 	 i f   (   ! t h i s . o p t i o n s . d i s a b l e d   & &   c o n t e n t   & &   c o n t e n t . l e n g t h   & &   ! t h i s . c a n c e l S e a r c h   )   { 
 	 	 	 t h i s . _ s u g g e s t (   c o n t e n t   ) ; 
 	 	 	 t h i s . _ t r i g g e r (   " o p e n "   ) ; 
 	 	 }   e l s e   { 
 	 	 	 / /   u s e   . _ c l o s e ( )   i n s t e a d   o f   . c l o s e ( )   s o   w e   d o n ' t   c a n c e l   f u t u r e   s e a r c h e s 
 	 	 	 t h i s . _ c l o s e ( ) ; 
 	 	 } 
 	 } , 
 
 	 c l o s e :   f u n c t i o n (   e v e n t   )   { 
 	 	 t h i s . c a n c e l S e a r c h   =   t r u e ; 
 	 	 t h i s . _ c l o s e (   e v e n t   ) ; 
 	 } , 
 
 	 _ c l o s e :   f u n c t i o n (   e v e n t   )   { 
 	 	 i f   (   t h i s . m e n u . e l e m e n t . i s (   " : v i s i b l e "   )   )   { 
 	 	 	 t h i s . m e n u . e l e m e n t . h i d e ( ) ; 
 	 	 	 t h i s . m e n u . b l u r ( ) ; 
 	 	 	 t h i s . i s N e w M e n u   =   t r u e ; 
 	 	 	 t h i s . _ t r i g g e r (   " c l o s e " ,   e v e n t   ) ; 
 	 	 } 
 	 } , 
 
 	 _ c h a n g e :   f u n c t i o n (   e v e n t   )   { 
 	 	 i f   (   t h i s . p r e v i o u s   ! = =   t h i s . _ v a l u e ( )   )   { 
 	 	 	 t h i s . _ t r i g g e r (   " c h a n g e " ,   e v e n t ,   {   i t e m :   t h i s . s e l e c t e d I t e m   }   ) ; 
 	 	 } 
 	 } , 
 
 	 _ n o r m a l i z e :   f u n c t i o n (   i t e m s   )   { 
 	 	 / /   a s s u m e   a l l   i t e m s   h a v e   t h e   r i g h t   f o r m a t   w h e n   t h e   f i r s t   i t e m   i s   c o m p l e t e 
 	 	 i f   (   i t e m s . l e n g t h   & &   i t e m s [ 0 ] . l a b e l   & &   i t e m s [ 0 ] . v a l u e   )   { 
 	 	 	 r e t u r n   i t e m s ; 
 	 	 } 
 	 	 r e t u r n   $ . m a p (   i t e m s ,   f u n c t i o n (   i t e m   )   { 
 	 	 	 i f   (   t y p e o f   i t e m   = = =   " s t r i n g "   )   { 
 	 	 	 	 r e t u r n   { 
 	 	 	 	 	 l a b e l :   i t e m , 
 	 	 	 	 	 v a l u e :   i t e m 
 	 	 	 	 } ; 
 	 	 	 } 
 	 	 	 r e t u r n   $ . e x t e n d ( { 
 	 	 	 	 l a b e l :   i t e m . l a b e l   | |   i t e m . v a l u e , 
 	 	 	 	 v a l u e :   i t e m . v a l u e   | |   i t e m . l a b e l 
 	 	 	 } ,   i t e m   ) ; 
 	 	 } ) ; 
 	 } , 
 
 	 _ s u g g e s t :   f u n c t i o n (   i t e m s   )   { 
 	 	 v a r   u l   =   t h i s . m e n u . e l e m e n t . e m p t y ( ) ; 
 	 	 t h i s . _ r e n d e r M e n u (   u l ,   i t e m s   ) ; 
 	 	 t h i s . i s N e w M e n u   =   t r u e ; 
 	 	 t h i s . m e n u . r e f r e s h ( ) ; 
 
 	 	 / /   s i z e   a n d   p o s i t i o n   m e n u 
 	 	 u l . s h o w ( ) ; 
 	 	 t h i s . _ r e s i z e M e n u ( ) ; 
 	 	 u l . p o s i t i o n (   $ . e x t e n d ( { 
 	 	 	 o f :   t h i s . e l e m e n t 
 	 	 } ,   t h i s . o p t i o n s . p o s i t i o n   ) ) ; 
 
 	 	 i f   (   t h i s . o p t i o n s . a u t o F o c u s   )   { 
 	 	 	 t h i s . m e n u . n e x t ( ) ; 
 	 	 } 
 	 } , 
 
 	 _ r e s i z e M e n u :   f u n c t i o n ( )   { 
 	 	 v a r   u l   =   t h i s . m e n u . e l e m e n t ; 
 	 	 u l . o u t e r W i d t h (   M a t h . m a x ( 
 	 	 	 / /   F i r e f o x   w r a p s   l o n g   t e x t   ( p o s s i b l y   a   r o u n d i n g   b u g ) 
 	 	 	 / /   s o   w e   a d d   1 p x   t o   a v o i d   t h e   w r a p p i n g   ( # 7 5 1 3 ) 
 	 	 	 u l . w i d t h (   " "   ) . o u t e r W i d t h ( )   +   1 , 
 	 	 	 t h i s . e l e m e n t . o u t e r W i d t h ( ) 
 	 	 )   ) ; 
 	 } , 
 
 	 _ r e n d e r M e n u :   f u n c t i o n (   u l ,   i t e m s   )   { 
 	 	 v a r   t h a t   =   t h i s ; 
 	 	 $ . e a c h (   i t e m s ,   f u n c t i o n (   i n d e x ,   i t e m   )   { 
 	 	 	 t h a t . _ r e n d e r I t e m D a t a (   u l ,   i t e m   ) ; 
 	 	 } ) ; 
 	 } , 
 
 	 _ r e n d e r I t e m D a t a :   f u n c t i o n (   u l ,   i t e m   )   { 
 	 	 r e t u r n   t h i s . _ r e n d e r I t e m (   u l ,   i t e m   ) . d a t a (   " u i - a u t o c o m p l e t e - i t e m " ,   i t e m   ) ; 
 	 } , 
 
 	 _ r e n d e r I t e m :   f u n c t i o n (   u l ,   i t e m   )   { 
 	 	 r e t u r n   $ (   " < l i > "   ) 
 	 	 	 . a p p e n d (   $ (   " < a > "   ) . t e x t (   i t e m . l a b e l   )   ) 
 	 	 	 . a p p e n d T o (   u l   ) ; 
 	 } , 
 
 	 _ m o v e :   f u n c t i o n (   d i r e c t i o n ,   e v e n t   )   { 
 	 	 i f   (   ! t h i s . m e n u . e l e m e n t . i s (   " : v i s i b l e "   )   )   { 
 	 	 	 t h i s . s e a r c h (   n u l l ,   e v e n t   ) ; 
 	 	 	 r e t u r n ; 
 	 	 } 
 	 	 i f   (   t h i s . m e n u . i s F i r s t I t e m ( )   & &   / ^ p r e v i o u s / . t e s t (   d i r e c t i o n   )   | | 
 	 	 	 	 t h i s . m e n u . i s L a s t I t e m ( )   & &   / ^ n e x t / . t e s t (   d i r e c t i o n   )   )   { 
 	 	 	 t h i s . _ v a l u e (   t h i s . t e r m   ) ; 
 	 	 	 t h i s . m e n u . b l u r ( ) ; 
 	 	 	 r e t u r n ; 
 	 	 } 
 	 	 t h i s . m e n u [   d i r e c t i o n   ] (   e v e n t   ) ; 
 	 } , 
 
 	 w i d g e t :   f u n c t i o n ( )   { 
 	 	 r e t u r n   t h i s . m e n u . e l e m e n t ; 
 	 } , 
 
 	 _ v a l u e :   f u n c t i o n ( )   { 
 	 	 r e t u r n   t h i s . v a l u e M e t h o d . a p p l y (   t h i s . e l e m e n t ,   a r g u m e n t s   ) ; 
 	 } , 
 
 	 _ k e y E v e n t :   f u n c t i o n (   k e y E v e n t ,   e v e n t   )   { 
 	 	 i f   (   ! t h i s . i s M u l t i L i n e   | |   t h i s . m e n u . e l e m e n t . i s (   " : v i s i b l e "   )   )   { 
 	 	 	 t h i s . _ m o v e (   k e y E v e n t ,   e v e n t   ) ; 
 
 	 	 	 / /   p r e v e n t s   m o v i n g   c u r s o r   t o   b e g i n n i n g / e n d   o f   t h e   t e x t   f i e l d   i n   s o m e   b r o w s e r s 
 	 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 	 	 } 
 	 } 
 } ) ; 
 
 $ . e x t e n d (   $ . u i . a u t o c o m p l e t e ,   { 
 	 e s c a p e R e g e x :   f u n c t i o n (   v a l u e   )   { 
 	 	 r e t u r n   v a l u e . r e p l a c e ( / [ \ - \ [ \ ] { } ( ) * + ? . , \ \ \ ^ $ | # \ s ] / g ,   " \ \ $ & " ) ; 
 	 } , 
 	 f i l t e r :   f u n c t i o n ( a r r a y ,   t e r m )   { 
 	 	 v a r   m a t c h e r   =   n e w   R e g E x p (   $ . u i . a u t o c o m p l e t e . e s c a p e R e g e x ( t e r m ) ,   " i "   ) ; 
 	 	 r e t u r n   $ . g r e p (   a r r a y ,   f u n c t i o n ( v a l u e )   { 
 	 	 	 r e t u r n   m a t c h e r . t e s t (   v a l u e . l a b e l   | |   v a l u e . v a l u e   | |   v a l u e   ) ; 
 	 	 } ) ; 
 	 } 
 } ) ; 
 
 
 / /   l i v e   r e g i o n   e x t e n s i o n ,   a d d i n g   a   ` m e s s a g e s `   o p t i o n 
 / /   N O T E :   T h i s   i s   a n   e x p e r i m e n t a l   A P I .   W e   a r e   s t i l l   i n v e s t i g a t i n g 
 / /   a   f u l l   s o l u t i o n   f o r   s t r i n g   m a n i p u l a t i o n   a n d   i n t e r n a t i o n a l i z a t i o n . 
 $ . w i d g e t (   " u i . a u t o c o m p l e t e " ,   $ . u i . a u t o c o m p l e t e ,   { 
 	 o p t i o n s :   { 
 	 	 m e s s a g e s :   { 
 	 	 	 n o R e s u l t s :   " N o   s e a r c h   r e s u l t s . " , 
 	 	 	 r e s u l t s :   f u n c t i o n (   a m o u n t   )   { 
 	 	 	 	 r e t u r n   a m o u n t   +   (   a m o u n t   >   1   ?   "   r e s u l t s   a r e "   :   "   r e s u l t   i s "   )   + 
 	 	 	 	 	 "   a v a i l a b l e ,   u s e   u p   a n d   d o w n   a r r o w   k e y s   t o   n a v i g a t e . " ; 
 	 	 	 } 
 	 	 } 
 	 } , 
 
 	 _ _ r e s p o n s e :   f u n c t i o n (   c o n t e n t   )   { 
 	 	 v a r   m e s s a g e ; 
 	 	 t h i s . _ s u p e r A p p l y (   a r g u m e n t s   ) ; 
 	 	 i f   (   t h i s . o p t i o n s . d i s a b l e d   | |   t h i s . c a n c e l S e a r c h   )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 	 	 i f   (   c o n t e n t   & &   c o n t e n t . l e n g t h   )   { 
 	 	 	 m e s s a g e   =   t h i s . o p t i o n s . m e s s a g e s . r e s u l t s (   c o n t e n t . l e n g t h   ) ; 
 	 	 }   e l s e   { 
 	 	 	 m e s s a g e   =   t h i s . o p t i o n s . m e s s a g e s . n o R e s u l t s ; 
 	 	 } 
 	 	 t h i s . l i v e R e g i o n . t e x t (   m e s s a g e   ) ; 
 	 } 
 } ) ; 
 
 } (   j Q u e r y   ) ) ; 
 
 ( f u n c t i o n (   $ ,   u n d e f i n e d   )   { 
 
 v a r   l a s t A c t i v e ,   s t a r t X P o s ,   s t a r t Y P o s ,   c l i c k D r a g g e d , 
 	 b a s e C l a s s e s   =   " u i - b u t t o n   u i - w i d g e t   u i - s t a t e - d e f a u l t   u i - c o r n e r - a l l " , 
 	 s t a t e C l a s s e s   =   " u i - s t a t e - h o v e r   u i - s t a t e - a c t i v e   " , 
 	 t y p e C l a s s e s   =   " u i - b u t t o n - i c o n s - o n l y   u i - b u t t o n - i c o n - o n l y   u i - b u t t o n - t e x t - i c o n s   u i - b u t t o n - t e x t - i c o n - p r i m a r y   u i - b u t t o n - t e x t - i c o n - s e c o n d a r y   u i - b u t t o n - t e x t - o n l y " , 
 	 f o r m R e s e t H a n d l e r   =   f u n c t i o n ( )   { 
 	 	 v a r   f o r m   =   $ (   t h i s   ) ; 
 	 	 s e t T i m e o u t ( f u n c t i o n ( )   { 
 	 	 	 f o r m . f i n d (   " : u i - b u t t o n "   ) . b u t t o n (   " r e f r e s h "   ) ; 
 	 	 } ,   1   ) ; 
 	 } , 
 	 r a d i o G r o u p   =   f u n c t i o n (   r a d i o   )   { 
 	 	 v a r   n a m e   =   r a d i o . n a m e , 
 	 	 	 f o r m   =   r a d i o . f o r m , 
 	 	 	 r a d i o s   =   $ (   [ ]   ) ; 
 	 	 i f   (   n a m e   )   { 
 	 	 	 n a m e   =   n a m e . r e p l a c e (   / ' / g ,   " \ \ ' "   ) ; 
 	 	 	 i f   (   f o r m   )   { 
 	 	 	 	 r a d i o s   =   $ (   f o r m   ) . f i n d (   " [ n a m e = ' "   +   n a m e   +   " ' ] "   ) ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 r a d i o s   =   $ (   " [ n a m e = ' "   +   n a m e   +   " ' ] " ,   r a d i o . o w n e r D o c u m e n t   ) 
 	 	 	 	 	 . f i l t e r ( f u n c t i o n ( )   { 
 	 	 	 	 	 	 r e t u r n   ! t h i s . f o r m ; 
 	 	 	 	 	 } ) ; 
 	 	 	 } 
 	 	 } 
 	 	 r e t u r n   r a d i o s ; 
 	 } ; 
 
 $ . w i d g e t (   " u i . b u t t o n " ,   { 
 	 v e r s i o n :   " 1 . 1 0 . 3 " , 
 	 d e f a u l t E l e m e n t :   " < b u t t o n > " , 
 	 o p t i o n s :   { 
 	 	 d i s a b l e d :   n u l l , 
 	 	 t e x t :   t r u e , 
 	 	 l a b e l :   n u l l , 
 	 	 i c o n s :   { 
 	 	 	 p r i m a r y :   n u l l , 
 	 	 	 s e c o n d a r y :   n u l l 
 	 	 } 
 	 } , 
 	 _ c r e a t e :   f u n c t i o n ( )   { 
 	 	 t h i s . e l e m e n t . c l o s e s t (   " f o r m "   ) 
 	 	 	 . u n b i n d (   " r e s e t "   +   t h i s . e v e n t N a m e s p a c e   ) 
 	 	 	 . b i n d (   " r e s e t "   +   t h i s . e v e n t N a m e s p a c e ,   f o r m R e s e t H a n d l e r   ) ; 
 
 	 	 i f   (   t y p e o f   t h i s . o p t i o n s . d i s a b l e d   ! = =   " b o o l e a n "   )   { 
 	 	 	 t h i s . o p t i o n s . d i s a b l e d   =   ! ! t h i s . e l e m e n t . p r o p (   " d i s a b l e d "   ) ; 
 	 	 }   e l s e   { 
 	 	 	 t h i s . e l e m e n t . p r o p (   " d i s a b l e d " ,   t h i s . o p t i o n s . d i s a b l e d   ) ; 
 	 	 } 
 
 	 	 t h i s . _ d e t e r m i n e B u t t o n T y p e ( ) ; 
 	 	 t h i s . h a s T i t l e   =   ! ! t h i s . b u t t o n E l e m e n t . a t t r (   " t i t l e "   ) ; 
 
 	 	 v a r   t h a t   =   t h i s , 
 	 	 	 o p t i o n s   =   t h i s . o p t i o n s , 
 	 	 	 t o g g l e B u t t o n   =   t h i s . t y p e   = = =   " c h e c k b o x "   | |   t h i s . t y p e   = = =   " r a d i o " , 
 	 	 	 a c t i v e C l a s s   =   ! t o g g l e B u t t o n   ?   " u i - s t a t e - a c t i v e "   :   " " , 
 	 	 	 f o c u s C l a s s   =   " u i - s t a t e - f o c u s " ; 
 
 	 	 i f   (   o p t i o n s . l a b e l   = = =   n u l l   )   { 
 	 	 	 o p t i o n s . l a b e l   =   ( t h i s . t y p e   = = =   " i n p u t "   ?   t h i s . b u t t o n E l e m e n t . v a l ( )   :   t h i s . b u t t o n E l e m e n t . h t m l ( ) ) ; 
 	 	 } 
 
 	 	 t h i s . _ h o v e r a b l e (   t h i s . b u t t o n E l e m e n t   ) ; 
 
 	 	 t h i s . b u t t o n E l e m e n t 
 	 	 	 . a d d C l a s s (   b a s e C l a s s e s   ) 
 	 	 	 . a t t r (   " r o l e " ,   " b u t t o n "   ) 
 	 	 	 . b i n d (   " m o u s e e n t e r "   +   t h i s . e v e n t N a m e s p a c e ,   f u n c t i o n ( )   { 
 	 	 	 	 i f   (   o p t i o n s . d i s a b l e d   )   { 
 	 	 	 	 	 r e t u r n ; 
 	 	 	 	 } 
 	 	 	 	 i f   (   t h i s   = = =   l a s t A c t i v e   )   { 
 	 	 	 	 	 $ (   t h i s   ) . a d d C l a s s (   " u i - s t a t e - a c t i v e "   ) ; 
 	 	 	 	 } 
 	 	 	 } ) 
 	 	 	 . b i n d (   " m o u s e l e a v e "   +   t h i s . e v e n t N a m e s p a c e ,   f u n c t i o n ( )   { 
 	 	 	 	 i f   (   o p t i o n s . d i s a b l e d   )   { 
 	 	 	 	 	 r e t u r n ; 
 	 	 	 	 } 
 	 	 	 	 $ (   t h i s   ) . r e m o v e C l a s s (   a c t i v e C l a s s   ) ; 
 	 	 	 } ) 
 	 	 	 . b i n d (   " c l i c k "   +   t h i s . e v e n t N a m e s p a c e ,   f u n c t i o n (   e v e n t   )   { 
 	 	 	 	 i f   (   o p t i o n s . d i s a b l e d   )   { 
 	 	 	 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 	 	 	 	 	 e v e n t . s t o p I m m e d i a t e P r o p a g a t i o n ( ) ; 
 	 	 	 	 } 
 	 	 	 } ) ; 
 
 	 	 t h i s . e l e m e n t 
 	 	 	 . b i n d (   " f o c u s "   +   t h i s . e v e n t N a m e s p a c e ,   f u n c t i o n ( )   { 
 	 	 	 	 / /   n o   n e e d   t o   c h e c k   d i s a b l e d ,   f o c u s   w o n ' t   b e   t r i g g e r e d   a n y w a y 
 	 	 	 	 t h a t . b u t t o n E l e m e n t . a d d C l a s s (   f o c u s C l a s s   ) ; 
 	 	 	 } ) 
 	 	 	 . b i n d (   " b l u r "   +   t h i s . e v e n t N a m e s p a c e ,   f u n c t i o n ( )   { 
 	 	 	 	 t h a t . b u t t o n E l e m e n t . r e m o v e C l a s s (   f o c u s C l a s s   ) ; 
 	 	 	 } ) ; 
 
 	 	 i f   (   t o g g l e B u t t o n   )   { 
 	 	 	 t h i s . e l e m e n t . b i n d (   " c h a n g e "   +   t h i s . e v e n t N a m e s p a c e ,   f u n c t i o n ( )   { 
 	 	 	 	 i f   (   c l i c k D r a g g e d   )   { 
 	 	 	 	 	 r e t u r n ; 
 	 	 	 	 } 
 	 	 	 	 t h a t . r e f r e s h ( ) ; 
 	 	 	 } ) ; 
 	 	 	 / /   i f   m o u s e   m o v e s   b e t w e e n   m o u s e d o w n   a n d   m o u s e u p   ( d r a g )   s e t   c l i c k D r a g g e d   f l a g 
 	 	 	 / /   p r e v e n t s   i s s u e   w h e r e   b u t t o n   s t a t e   c h a n g e s   b u t   c h e c k b o x / r a d i o   c h e c k e d   s t a t e 
 	 	 	 / /   d o e s   n o t   i n   F i r e f o x   ( s e e   t i c k e t   # 6 9 7 0 ) 
 	 	 	 t h i s . b u t t o n E l e m e n t 
 	 	 	 	 . b i n d (   " m o u s e d o w n "   +   t h i s . e v e n t N a m e s p a c e ,   f u n c t i o n (   e v e n t   )   { 
 	 	 	 	 	 i f   (   o p t i o n s . d i s a b l e d   )   { 
 	 	 	 	 	 	 r e t u r n ; 
 	 	 	 	 	 } 
 	 	 	 	 	 c l i c k D r a g g e d   =   f a l s e ; 
 	 	 	 	 	 s t a r t X P o s   =   e v e n t . p a g e X ; 
 	 	 	 	 	 s t a r t Y P o s   =   e v e n t . p a g e Y ; 
 	 	 	 	 } ) 
 	 	 	 	 . b i n d (   " m o u s e u p "   +   t h i s . e v e n t N a m e s p a c e ,   f u n c t i o n (   e v e n t   )   { 
 	 	 	 	 	 i f   (   o p t i o n s . d i s a b l e d   )   { 
 	 	 	 	 	 	 r e t u r n ; 
 	 	 	 	 	 } 
 	 	 	 	 	 i f   (   s t a r t X P o s   ! = =   e v e n t . p a g e X   | |   s t a r t Y P o s   ! = =   e v e n t . p a g e Y   )   { 
 	 	 	 	 	 	 c l i c k D r a g g e d   =   t r u e ; 
 	 	 	 	 	 } 
 	 	 	 } ) ; 
 	 	 } 
 
 	 	 i f   (   t h i s . t y p e   = = =   " c h e c k b o x "   )   { 
 	 	 	 t h i s . b u t t o n E l e m e n t . b i n d (   " c l i c k "   +   t h i s . e v e n t N a m e s p a c e ,   f u n c t i o n ( )   { 
 	 	 	 	 i f   (   o p t i o n s . d i s a b l e d   | |   c l i c k D r a g g e d   )   { 
 	 	 	 	 	 r e t u r n   f a l s e ; 
 	 	 	 	 } 
 	 	 	 } ) ; 
 	 	 }   e l s e   i f   (   t h i s . t y p e   = = =   " r a d i o "   )   { 
 	 	 	 t h i s . b u t t o n E l e m e n t . b i n d (   " c l i c k "   +   t h i s . e v e n t N a m e s p a c e ,   f u n c t i o n ( )   { 
 	 	 	 	 i f   (   o p t i o n s . d i s a b l e d   | |   c l i c k D r a g g e d   )   { 
 	 	 	 	 	 r e t u r n   f a l s e ; 
 	 	 	 	 } 
 	 	 	 	 $ (   t h i s   ) . a d d C l a s s (   " u i - s t a t e - a c t i v e "   ) ; 
 	 	 	 	 t h a t . b u t t o n E l e m e n t . a t t r (   " a r i a - p r e s s e d " ,   " t r u e "   ) ; 
 
 	 	 	 	 v a r   r a d i o   =   t h a t . e l e m e n t [   0   ] ; 
 	 	 	 	 r a d i o G r o u p (   r a d i o   ) 
 	 	 	 	 	 . n o t (   r a d i o   ) 
 	 	 	 	 	 . m a p ( f u n c t i o n ( )   { 
 	 	 	 	 	 	 r e t u r n   $ (   t h i s   ) . b u t t o n (   " w i d g e t "   ) [   0   ] ; 
 	 	 	 	 	 } ) 
 	 	 	 	 	 . r e m o v e C l a s s (   " u i - s t a t e - a c t i v e "   ) 
 	 	 	 	 	 . a t t r (   " a r i a - p r e s s e d " ,   " f a l s e "   ) ; 
 	 	 	 } ) ; 
 	 	 }   e l s e   { 
 	 	 	 t h i s . b u t t o n E l e m e n t 
 	 	 	 	 . b i n d (   " m o u s e d o w n "   +   t h i s . e v e n t N a m e s p a c e ,   f u n c t i o n ( )   { 
 	 	 	 	 	 i f   (   o p t i o n s . d i s a b l e d   )   { 
 	 	 	 	 	 	 r e t u r n   f a l s e ; 
 	 	 	 	 	 } 
 	 	 	 	 	 $ (   t h i s   ) . a d d C l a s s (   " u i - s t a t e - a c t i v e "   ) ; 
 	 	 	 	 	 l a s t A c t i v e   =   t h i s ; 
 	 	 	 	 	 t h a t . d o c u m e n t . o n e (   " m o u s e u p " ,   f u n c t i o n ( )   { 
 	 	 	 	 	 	 l a s t A c t i v e   =   n u l l ; 
 	 	 	 	 	 } ) ; 
 	 	 	 	 } ) 
 	 	 	 	 . b i n d (   " m o u s e u p "   +   t h i s . e v e n t N a m e s p a c e ,   f u n c t i o n ( )   { 
 	 	 	 	 	 i f   (   o p t i o n s . d i s a b l e d   )   { 
 	 	 	 	 	 	 r e t u r n   f a l s e ; 
 	 	 	 	 	 } 
 	 	 	 	 	 $ (   t h i s   ) . r e m o v e C l a s s (   " u i - s t a t e - a c t i v e "   ) ; 
 	 	 	 	 } ) 
 	 	 	 	 . b i n d (   " k e y d o w n "   +   t h i s . e v e n t N a m e s p a c e ,   f u n c t i o n ( e v e n t )   { 
 	 	 	 	 	 i f   (   o p t i o n s . d i s a b l e d   )   { 
 	 	 	 	 	 	 r e t u r n   f a l s e ; 
 	 	 	 	 	 } 
 	 	 	 	 	 i f   (   e v e n t . k e y C o d e   = = =   $ . u i . k e y C o d e . S P A C E   | |   e v e n t . k e y C o d e   = = =   $ . u i . k e y C o d e . E N T E R   )   { 
 	 	 	 	 	 	 $ (   t h i s   ) . a d d C l a s s (   " u i - s t a t e - a c t i v e "   ) ; 
 	 	 	 	 	 } 
 	 	 	 	 } ) 
 	 	 	 	 / /   s e e   # 8 5 5 9 ,   w e   b i n d   t o   b l u r   h e r e   i n   c a s e   t h e   b u t t o n   e l e m e n t   l o s e s 
 	 	 	 	 / /   f o c u s   b e t w e e n   k e y d o w n   a n d   k e y u p ,   i t   w o u l d   b e   l e f t   i n   a n   " a c t i v e "   s t a t e 
 	 	 	 	 . b i n d (   " k e y u p "   +   t h i s . e v e n t N a m e s p a c e   +   "   b l u r "   +   t h i s . e v e n t N a m e s p a c e ,   f u n c t i o n ( )   { 
 	 	 	 	 	 $ (   t h i s   ) . r e m o v e C l a s s (   " u i - s t a t e - a c t i v e "   ) ; 
 	 	 	 	 } ) ; 
 
 	 	 	 i f   (   t h i s . b u t t o n E l e m e n t . i s ( " a " )   )   { 
 	 	 	 	 t h i s . b u t t o n E l e m e n t . k e y u p ( f u n c t i o n ( e v e n t )   { 
 	 	 	 	 	 i f   (   e v e n t . k e y C o d e   = = =   $ . u i . k e y C o d e . S P A C E   )   { 
 	 	 	 	 	 	 / /   T O D O   p a s s   t h r o u g h   o r i g i n a l   e v e n t   c o r r e c t l y   ( j u s t   a s   2 n d   a r g u m e n t   d o e s n ' t   w o r k ) 
 	 	 	 	 	 	 $ (   t h i s   ) . c l i c k ( ) ; 
 	 	 	 	 	 } 
 	 	 	 	 } ) ; 
 	 	 	 } 
 	 	 } 
 
 	 	 / /   T O D O :   p u l l   o u t   $ . W i d g e t ' s   h a n d l i n g   f o r   t h e   d i s a b l e d   o p t i o n   i n t o 
 	 	 / /   $ . W i d g e t . p r o t o t y p e . _ s e t O p t i o n D i s a b l e d   s o   i t ' s   e a s y   t o   p r o x y   a n d   c a n 
 	 	 / /   b e   o v e r r i d d e n   b y   i n d i v i d u a l   p l u g i n s 
 	 	 t h i s . _ s e t O p t i o n (   " d i s a b l e d " ,   o p t i o n s . d i s a b l e d   ) ; 
 	 	 t h i s . _ r e s e t B u t t o n ( ) ; 
 	 } , 
 
 	 _ d e t e r m i n e B u t t o n T y p e :   f u n c t i o n ( )   { 
 	 	 v a r   a n c e s t o r ,   l a b e l S e l e c t o r ,   c h e c k e d ; 
 
 	 	 i f   (   t h i s . e l e m e n t . i s ( " [ t y p e = c h e c k b o x ] " )   )   { 
 	 	 	 t h i s . t y p e   =   " c h e c k b o x " ; 
 	 	 }   e l s e   i f   (   t h i s . e l e m e n t . i s ( " [ t y p e = r a d i o ] " )   )   { 
 	 	 	 t h i s . t y p e   =   " r a d i o " ; 
 	 	 }   e l s e   i f   (   t h i s . e l e m e n t . i s ( " i n p u t " )   )   { 
 	 	 	 t h i s . t y p e   =   " i n p u t " ; 
 	 	 }   e l s e   { 
 	 	 	 t h i s . t y p e   =   " b u t t o n " ; 
 	 	 } 
 
 	 	 i f   (   t h i s . t y p e   = = =   " c h e c k b o x "   | |   t h i s . t y p e   = = =   " r a d i o "   )   { 
 	 	 	 / /   w e   d o n ' t   s e a r c h   a g a i n s t   t h e   d o c u m e n t   i n   c a s e   t h e   e l e m e n t 
 	 	 	 / /   i s   d i s c o n n e c t e d   f r o m   t h e   D O M 
 	 	 	 a n c e s t o r   =   t h i s . e l e m e n t . p a r e n t s ( ) . l a s t ( ) ; 
 	 	 	 l a b e l S e l e c t o r   =   " l a b e l [ f o r = ' "   +   t h i s . e l e m e n t . a t t r ( " i d " )   +   " ' ] " ; 
 	 	 	 t h i s . b u t t o n E l e m e n t   =   a n c e s t o r . f i n d (   l a b e l S e l e c t o r   ) ; 
 	 	 	 i f   (   ! t h i s . b u t t o n E l e m e n t . l e n g t h   )   { 
 	 	 	 	 a n c e s t o r   =   a n c e s t o r . l e n g t h   ?   a n c e s t o r . s i b l i n g s ( )   :   t h i s . e l e m e n t . s i b l i n g s ( ) ; 
 	 	 	 	 t h i s . b u t t o n E l e m e n t   =   a n c e s t o r . f i l t e r (   l a b e l S e l e c t o r   ) ; 
 	 	 	 	 i f   (   ! t h i s . b u t t o n E l e m e n t . l e n g t h   )   { 
 	 	 	 	 	 t h i s . b u t t o n E l e m e n t   =   a n c e s t o r . f i n d (   l a b e l S e l e c t o r   ) ; 
 	 	 	 	 } 
 	 	 	 } 
 	 	 	 t h i s . e l e m e n t . a d d C l a s s (   " u i - h e l p e r - h i d d e n - a c c e s s i b l e "   ) ; 
 
 	 	 	 c h e c k e d   =   t h i s . e l e m e n t . i s (   " : c h e c k e d "   ) ; 
 	 	 	 i f   (   c h e c k e d   )   { 
 	 	 	 	 t h i s . b u t t o n E l e m e n t . a d d C l a s s (   " u i - s t a t e - a c t i v e "   ) ; 
 	 	 	 } 
 	 	 	 t h i s . b u t t o n E l e m e n t . p r o p (   " a r i a - p r e s s e d " ,   c h e c k e d   ) ; 
 	 	 }   e l s e   { 
 	 	 	 t h i s . b u t t o n E l e m e n t   =   t h i s . e l e m e n t ; 
 	 	 } 
 	 } , 
 
 	 w i d g e t :   f u n c t i o n ( )   { 
 	 	 r e t u r n   t h i s . b u t t o n E l e m e n t ; 
 	 } , 
 
 	 _ d e s t r o y :   f u n c t i o n ( )   { 
 	 	 t h i s . e l e m e n t 
 	 	 	 . r e m o v e C l a s s (   " u i - h e l p e r - h i d d e n - a c c e s s i b l e "   ) ; 
 	 	 t h i s . b u t t o n E l e m e n t 
 	 	 	 . r e m o v e C l a s s (   b a s e C l a s s e s   +   "   "   +   s t a t e C l a s s e s   +   "   "   +   t y p e C l a s s e s   ) 
 	 	 	 . r e m o v e A t t r (   " r o l e "   ) 
 	 	 	 . r e m o v e A t t r (   " a r i a - p r e s s e d "   ) 
 	 	 	 . h t m l (   t h i s . b u t t o n E l e m e n t . f i n d ( " . u i - b u t t o n - t e x t " ) . h t m l ( )   ) ; 
 
 	 	 i f   (   ! t h i s . h a s T i t l e   )   { 
 	 	 	 t h i s . b u t t o n E l e m e n t . r e m o v e A t t r (   " t i t l e "   ) ; 
 	 	 } 
 	 } , 
 
 	 _ s e t O p t i o n :   f u n c t i o n (   k e y ,   v a l u e   )   { 
 	 	 t h i s . _ s u p e r (   k e y ,   v a l u e   ) ; 
 	 	 i f   (   k e y   = = =   " d i s a b l e d "   )   { 
 	 	 	 i f   (   v a l u e   )   { 
 	 	 	 	 t h i s . e l e m e n t . p r o p (   " d i s a b l e d " ,   t r u e   ) ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 t h i s . e l e m e n t . p r o p (   " d i s a b l e d " ,   f a l s e   ) ; 
 	 	 	 } 
 	 	 	 r e t u r n ; 
 	 	 } 
 	 	 t h i s . _ r e s e t B u t t o n ( ) ; 
 	 } , 
 
 	 r e f r e s h :   f u n c t i o n ( )   { 
 	 	 / / S e e   # 8 2 3 7   &   # 8 8 2 8 
 	 	 v a r   i s D i s a b l e d   =   t h i s . e l e m e n t . i s (   " i n p u t ,   b u t t o n "   )   ?   t h i s . e l e m e n t . i s (   " : d i s a b l e d "   )   :   t h i s . e l e m e n t . h a s C l a s s (   " u i - b u t t o n - d i s a b l e d "   ) ; 
 
 	 	 i f   (   i s D i s a b l e d   ! = =   t h i s . o p t i o n s . d i s a b l e d   )   { 
 	 	 	 t h i s . _ s e t O p t i o n (   " d i s a b l e d " ,   i s D i s a b l e d   ) ; 
 	 	 } 
 	 	 i f   (   t h i s . t y p e   = = =   " r a d i o "   )   { 
 	 	 	 r a d i o G r o u p (   t h i s . e l e m e n t [ 0 ]   ) . e a c h ( f u n c t i o n ( )   { 
 	 	 	 	 i f   (   $ (   t h i s   ) . i s (   " : c h e c k e d "   )   )   { 
 	 	 	 	 	 $ (   t h i s   ) . b u t t o n (   " w i d g e t "   ) 
 	 	 	 	 	 	 . a d d C l a s s (   " u i - s t a t e - a c t i v e "   ) 
 	 	 	 	 	 	 . a t t r (   " a r i a - p r e s s e d " ,   " t r u e "   ) ; 
 	 	 	 	 }   e l s e   { 
 	 	 	 	 	 $ (   t h i s   ) . b u t t o n (   " w i d g e t "   ) 
 	 	 	 	 	 	 . r e m o v e C l a s s (   " u i - s t a t e - a c t i v e "   ) 
 	 	 	 	 	 	 . a t t r (   " a r i a - p r e s s e d " ,   " f a l s e "   ) ; 
 	 	 	 	 } 
 	 	 	 } ) ; 
 	 	 }   e l s e   i f   (   t h i s . t y p e   = = =   " c h e c k b o x "   )   { 
 	 	 	 i f   (   t h i s . e l e m e n t . i s (   " : c h e c k e d "   )   )   { 
 	 	 	 	 t h i s . b u t t o n E l e m e n t 
 	 	 	 	 	 . a d d C l a s s (   " u i - s t a t e - a c t i v e "   ) 
 	 	 	 	 	 . a t t r (   " a r i a - p r e s s e d " ,   " t r u e "   ) ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 t h i s . b u t t o n E l e m e n t 
 	 	 	 	 	 . r e m o v e C l a s s (   " u i - s t a t e - a c t i v e "   ) 
 	 	 	 	 	 . a t t r (   " a r i a - p r e s s e d " ,   " f a l s e "   ) ; 
 	 	 	 } 
 	 	 } 
 	 } , 
 
 	 _ r e s e t B u t t o n :   f u n c t i o n ( )   { 
 	 	 i f   (   t h i s . t y p e   = = =   " i n p u t "   )   { 
 	 	 	 i f   (   t h i s . o p t i o n s . l a b e l   )   { 
 	 	 	 	 t h i s . e l e m e n t . v a l (   t h i s . o p t i o n s . l a b e l   ) ; 
 	 	 	 } 
 	 	 	 r e t u r n ; 
 	 	 } 
 	 	 v a r   b u t t o n E l e m e n t   =   t h i s . b u t t o n E l e m e n t . r e m o v e C l a s s (   t y p e C l a s s e s   ) , 
 	 	 	 b u t t o n T e x t   =   $ (   " < s p a n > < / s p a n > " ,   t h i s . d o c u m e n t [ 0 ]   ) 
 	 	 	 	 . a d d C l a s s (   " u i - b u t t o n - t e x t "   ) 
 	 	 	 	 . h t m l (   t h i s . o p t i o n s . l a b e l   ) 
 	 	 	 	 . a p p e n d T o (   b u t t o n E l e m e n t . e m p t y ( )   ) 
 	 	 	 	 . t e x t ( ) , 
 	 	 	 i c o n s   =   t h i s . o p t i o n s . i c o n s , 
 	 	 	 m u l t i p l e I c o n s   =   i c o n s . p r i m a r y   & &   i c o n s . s e c o n d a r y , 
 	 	 	 b u t t o n C l a s s e s   =   [ ] ; 
 
 	 	 i f   (   i c o n s . p r i m a r y   | |   i c o n s . s e c o n d a r y   )   { 
 	 	 	 i f   (   t h i s . o p t i o n s . t e x t   )   { 
 	 	 	 	 b u t t o n C l a s s e s . p u s h (   " u i - b u t t o n - t e x t - i c o n "   +   (   m u l t i p l e I c o n s   ?   " s "   :   (   i c o n s . p r i m a r y   ?   " - p r i m a r y "   :   " - s e c o n d a r y "   )   )   ) ; 
 	 	 	 } 
 
 	 	 	 i f   (   i c o n s . p r i m a r y   )   { 
 	 	 	 	 b u t t o n E l e m e n t . p r e p e n d (   " < s p a n   c l a s s = ' u i - b u t t o n - i c o n - p r i m a r y   u i - i c o n   "   +   i c o n s . p r i m a r y   +   " ' > < / s p a n > "   ) ; 
 	 	 	 } 
 
 	 	 	 i f   (   i c o n s . s e c o n d a r y   )   { 
 	 	 	 	 b u t t o n E l e m e n t . a p p e n d (   " < s p a n   c l a s s = ' u i - b u t t o n - i c o n - s e c o n d a r y   u i - i c o n   "   +   i c o n s . s e c o n d a r y   +   " ' > < / s p a n > "   ) ; 
 	 	 	 } 
 
 	 	 	 i f   (   ! t h i s . o p t i o n s . t e x t   )   { 
 	 	 	 	 b u t t o n C l a s s e s . p u s h (   m u l t i p l e I c o n s   ?   " u i - b u t t o n - i c o n s - o n l y "   :   " u i - b u t t o n - i c o n - o n l y "   ) ; 
 
 	 	 	 	 i f   (   ! t h i s . h a s T i t l e   )   { 
 	 	 	 	 	 b u t t o n E l e m e n t . a t t r (   " t i t l e " ,   $ . t r i m (   b u t t o n T e x t   )   ) ; 
 	 	 	 	 } 
 	 	 	 } 
 	 	 }   e l s e   { 
 	 	 	 b u t t o n C l a s s e s . p u s h (   " u i - b u t t o n - t e x t - o n l y "   ) ; 
 	 	 } 
 	 	 b u t t o n E l e m e n t . a d d C l a s s (   b u t t o n C l a s s e s . j o i n (   "   "   )   ) ; 
 	 } 
 } ) ; 
 
 $ . w i d g e t (   " u i . b u t t o n s e t " ,   { 
 	 v e r s i o n :   " 1 . 1 0 . 3 " , 
 	 o p t i o n s :   { 
 	 	 i t e m s :   " b u t t o n ,   i n p u t [ t y p e = b u t t o n ] ,   i n p u t [ t y p e = s u b m i t ] ,   i n p u t [ t y p e = r e s e t ] ,   i n p u t [ t y p e = c h e c k b o x ] ,   i n p u t [ t y p e = r a d i o ] ,   a ,   : d a t a ( u i - b u t t o n ) " 
 	 } , 
 
 	 _ c r e a t e :   f u n c t i o n ( )   { 
 	 	 t h i s . e l e m e n t . a d d C l a s s (   " u i - b u t t o n s e t "   ) ; 
 	 } , 
 
 	 _ i n i t :   f u n c t i o n ( )   { 
 	 	 t h i s . r e f r e s h ( ) ; 
 	 } , 
 
 	 _ s e t O p t i o n :   f u n c t i o n (   k e y ,   v a l u e   )   { 
 	 	 i f   (   k e y   = = =   " d i s a b l e d "   )   { 
 	 	 	 t h i s . b u t t o n s . b u t t o n (   " o p t i o n " ,   k e y ,   v a l u e   ) ; 
 	 	 } 
 
 	 	 t h i s . _ s u p e r (   k e y ,   v a l u e   ) ; 
 	 } , 
 
 	 r e f r e s h :   f u n c t i o n ( )   { 
 	 	 v a r   r t l   =   t h i s . e l e m e n t . c s s (   " d i r e c t i o n "   )   = = =   " r t l " ; 
 
 	 	 t h i s . b u t t o n s   =   t h i s . e l e m e n t . f i n d (   t h i s . o p t i o n s . i t e m s   ) 
 	 	 	 . f i l t e r (   " : u i - b u t t o n "   ) 
 	 	 	 	 . b u t t o n (   " r e f r e s h "   ) 
 	 	 	 . e n d ( ) 
 	 	 	 . n o t (   " : u i - b u t t o n "   ) 
 	 	 	 	 . b u t t o n ( ) 
 	 	 	 . e n d ( ) 
 	 	 	 . m a p ( f u n c t i o n ( )   { 
 	 	 	 	 r e t u r n   $ (   t h i s   ) . b u t t o n (   " w i d g e t "   ) [   0   ] ; 
 	 	 	 } ) 
 	 	 	 	 . r e m o v e C l a s s (   " u i - c o r n e r - a l l   u i - c o r n e r - l e f t   u i - c o r n e r - r i g h t "   ) 
 	 	 	 	 . f i l t e r (   " : f i r s t "   ) 
 	 	 	 	 	 . a d d C l a s s (   r t l   ?   " u i - c o r n e r - r i g h t "   :   " u i - c o r n e r - l e f t "   ) 
 	 	 	 	 . e n d ( ) 
 	 	 	 	 . f i l t e r (   " : l a s t "   ) 
 	 	 	 	 	 . a d d C l a s s (   r t l   ?   " u i - c o r n e r - l e f t "   :   " u i - c o r n e r - r i g h t "   ) 
 	 	 	 	 . e n d ( ) 
 	 	 	 . e n d ( ) ; 
 	 } , 
 
 	 _ d e s t r o y :   f u n c t i o n ( )   { 
 	 	 t h i s . e l e m e n t . r e m o v e C l a s s (   " u i - b u t t o n s e t "   ) ; 
 	 	 t h i s . b u t t o n s 
 	 	 	 . m a p ( f u n c t i o n ( )   { 
 	 	 	 	 r e t u r n   $ (   t h i s   ) . b u t t o n (   " w i d g e t "   ) [   0   ] ; 
 	 	 	 } ) 
 	 	 	 	 . r e m o v e C l a s s (   " u i - c o r n e r - l e f t   u i - c o r n e r - r i g h t "   ) 
 	 	 	 . e n d ( ) 
 	 	 	 . b u t t o n (   " d e s t r o y "   ) ; 
 	 } 
 } ) ; 
 
 } (   j Q u e r y   )   ) ; 
 
 ( f u n c t i o n (   $ ,   u n d e f i n e d   )   { 
 
 $ . e x t e n d ( $ . u i ,   {   d a t e p i c k e r :   {   v e r s i o n :   " 1 . 1 0 . 3 "   }   } ) ; 
 
 v a r   P R O P _ N A M E   =   " d a t e p i c k e r " , 
 	 i n s t A c t i v e ; 
 
 / *   D a t e   p i c k e r   m a n a g e r . 
       U s e   t h e   s i n g l e t o n   i n s t a n c e   o f   t h i s   c l a s s ,   $ . d a t e p i c k e r ,   t o   i n t e r a c t   w i t h   t h e   d a t e   p i c k e r . 
       S e t t i n g s   f o r   ( g r o u p s   o f )   d a t e   p i c k e r s   a r e   m a i n t a i n e d   i n   a n   i n s t a n c e   o b j e c t , 
       a l l o w i n g   m u l t i p l e   d i f f e r e n t   s e t t i n g s   o n   t h e   s a m e   p a g e .   * / 
 
 f u n c t i o n   D a t e p i c k e r ( )   { 
 	 t h i s . _ c u r I n s t   =   n u l l ;   / /   T h e   c u r r e n t   i n s t a n c e   i n   u s e 
 	 t h i s . _ k e y E v e n t   =   f a l s e ;   / /   I f   t h e   l a s t   e v e n t   w a s   a   k e y   e v e n t 
 	 t h i s . _ d i s a b l e d I n p u t s   =   [ ] ;   / /   L i s t   o f   d a t e   p i c k e r   i n p u t s   t h a t   h a v e   b e e n   d i s a b l e d 
 	 t h i s . _ d a t e p i c k e r S h o w i n g   =   f a l s e ;   / /   T r u e   i f   t h e   p o p u p   p i c k e r   i s   s h o w i n g   ,   f a l s e   i f   n o t 
 	 t h i s . _ i n D i a l o g   =   f a l s e ;   / /   T r u e   i f   s h o w i n g   w i t h i n   a   " d i a l o g " ,   f a l s e   i f   n o t 
 	 t h i s . _ m a i n D i v I d   =   " u i - d a t e p i c k e r - d i v " ;   / /   T h e   I D   o f   t h e   m a i n   d a t e p i c k e r   d i v i s i o n 
 	 t h i s . _ i n l i n e C l a s s   =   " u i - d a t e p i c k e r - i n l i n e " ;   / /   T h e   n a m e   o f   t h e   i n l i n e   m a r k e r   c l a s s 
 	 t h i s . _ a p p e n d C l a s s   =   " u i - d a t e p i c k e r - a p p e n d " ;   / /   T h e   n a m e   o f   t h e   a p p e n d   m a r k e r   c l a s s 
 	 t h i s . _ t r i g g e r C l a s s   =   " u i - d a t e p i c k e r - t r i g g e r " ;   / /   T h e   n a m e   o f   t h e   t r i g g e r   m a r k e r   c l a s s 
 	 t h i s . _ d i a l o g C l a s s   =   " u i - d a t e p i c k e r - d i a l o g " ;   / /   T h e   n a m e   o f   t h e   d i a l o g   m a r k e r   c l a s s 
 	 t h i s . _ d i s a b l e C l a s s   =   " u i - d a t e p i c k e r - d i s a b l e d " ;   / /   T h e   n a m e   o f   t h e   d i s a b l e d   c o v e r i n g   m a r k e r   c l a s s 
 	 t h i s . _ u n s e l e c t a b l e C l a s s   =   " u i - d a t e p i c k e r - u n s e l e c t a b l e " ;   / /   T h e   n a m e   o f   t h e   u n s e l e c t a b l e   c e l l   m a r k e r   c l a s s 
 	 t h i s . _ c u r r e n t C l a s s   =   " u i - d a t e p i c k e r - c u r r e n t - d a y " ;   / /   T h e   n a m e   o f   t h e   c u r r e n t   d a y   m a r k e r   c l a s s 
 	 t h i s . _ d a y O v e r C l a s s   =   " u i - d a t e p i c k e r - d a y s - c e l l - o v e r " ;   / /   T h e   n a m e   o f   t h e   d a y   h o v e r   m a r k e r   c l a s s 
 	 t h i s . r e g i o n a l   =   [ ] ;   / /   A v a i l a b l e   r e g i o n a l   s e t t i n g s ,   i n d e x e d   b y   l a n g u a g e   c o d e 
 	 t h i s . r e g i o n a l [ " " ]   =   {   / /   D e f a u l t   r e g i o n a l   s e t t i n g s 
 	 	 c l o s e T e x t :   " D o n e " ,   / /   D i s p l a y   t e x t   f o r   c l o s e   l i n k 
 	 	 p r e v T e x t :   " P r e v " ,   / /   D i s p l a y   t e x t   f o r   p r e v i o u s   m o n t h   l i n k 
 	 	 n e x t T e x t :   " N e x t " ,   / /   D i s p l a y   t e x t   f o r   n e x t   m o n t h   l i n k 
 	 	 c u r r e n t T e x t :   " T o d a y " ,   / /   D i s p l a y   t e x t   f o r   c u r r e n t   m o n t h   l i n k 
 	 	 m o n t h N a m e s :   [ " J a n u a r y " , " F e b r u a r y " , " M a r c h " , " A p r i l " , " M a y " , " J u n e " , 
 	 	 	 " J u l y " , " A u g u s t " , " S e p t e m b e r " , " O c t o b e r " , " N o v e m b e r " , " D e c e m b e r " ] ,   / /   N a m e s   o f   m o n t h s   f o r   d r o p - d o w n   a n d   f o r m a t t i n g 
 	 	 m o n t h N a m e s S h o r t :   [ " J a n " ,   " F e b " ,   " M a r " ,   " A p r " ,   " M a y " ,   " J u n " ,   " J u l " ,   " A u g " ,   " S e p " ,   " O c t " ,   " N o v " ,   " D e c " ] ,   / /   F o r   f o r m a t t i n g 
 	 	 d a y N a m e s :   [ " S u n d a y " ,   " M o n d a y " ,   " T u e s d a y " ,   " W e d n e s d a y " ,   " T h u r s d a y " ,   " F r i d a y " ,   " S a t u r d a y " ] ,   / /   F o r   f o r m a t t i n g 
 	 	 d a y N a m e s S h o r t :   [ " S u n " ,   " M o n " ,   " T u e " ,   " W e d " ,   " T h u " ,   " F r i " ,   " S a t " ] ,   / /   F o r   f o r m a t t i n g 
 	 	 d a y N a m e s M i n :   [ " S u " , " M o " , " T u " , " W e " , " T h " , " F r " , " S a " ] ,   / /   C o l u m n   h e a d i n g s   f o r   d a y s   s t a r t i n g   a t   S u n d a y 
 	 	 w e e k H e a d e r :   " W k " ,   / /   C o l u m n   h e a d e r   f o r   w e e k   o f   t h e   y e a r 
 	 	 d a t e F o r m a t :   " m m / d d / y y " ,   / /   S e e   f o r m a t   o p t i o n s   o n   p a r s e D a t e 
 	 	 f i r s t D a y :   0 ,   / /   T h e   f i r s t   d a y   o f   t h e   w e e k ,   S u n   =   0 ,   M o n   =   1 ,   . . . 
 	 	 i s R T L :   f a l s e ,   / /   T r u e   i f   r i g h t - t o - l e f t   l a n g u a g e ,   f a l s e   i f   l e f t - t o - r i g h t 
 	 	 s h o w M o n t h A f t e r Y e a r :   f a l s e ,   / /   T r u e   i f   t h e   y e a r   s e l e c t   p r e c e d e s   m o n t h ,   f a l s e   f o r   m o n t h   t h e n   y e a r 
 	 	 y e a r S u f f i x :   " "   / /   A d d i t i o n a l   t e x t   t o   a p p e n d   t o   t h e   y e a r   i n   t h e   m o n t h   h e a d e r s 
 	 } ; 
 	 t h i s . _ d e f a u l t s   =   {   / /   G l o b a l   d e f a u l t s   f o r   a l l   t h e   d a t e   p i c k e r   i n s t a n c e s 
 	 	 s h o w O n :   " f o c u s " ,   / /   " f o c u s "   f o r   p o p u p   o n   f o c u s , 
 	 	 	 / /   " b u t t o n "   f o r   t r i g g e r   b u t t o n ,   o r   " b o t h "   f o r   e i t h e r 
 	 	 s h o w A n i m :   " f a d e I n " ,   / /   N a m e   o f   j Q u e r y   a n i m a t i o n   f o r   p o p u p 
 	 	 s h o w O p t i o n s :   { } ,   / /   O p t i o n s   f o r   e n h a n c e d   a n i m a t i o n s 
 	 	 d e f a u l t D a t e :   n u l l ,   / /   U s e d   w h e n   f i e l d   i s   b l a n k :   a c t u a l   d a t e , 
 	 	 	 / /   + / - n u m b e r   f o r   o f f s e t   f r o m   t o d a y ,   n u l l   f o r   t o d a y 
 	 	 a p p e n d T e x t :   " " ,   / /   D i s p l a y   t e x t   f o l l o w i n g   t h e   i n p u t   b o x ,   e . g .   s h o w i n g   t h e   f o r m a t 
 	 	 b u t t o n T e x t :   " . . . " ,   / /   T e x t   f o r   t r i g g e r   b u t t o n 
 	 	 b u t t o n I m a g e :   " " ,   / /   U R L   f o r   t r i g g e r   b u t t o n   i m a g e 
 	 	 b u t t o n I m a g e O n l y :   f a l s e ,   / /   T r u e   i f   t h e   i m a g e   a p p e a r s   a l o n e ,   f a l s e   i f   i t   a p p e a r s   o n   a   b u t t o n 
 	 	 h i d e I f N o P r e v N e x t :   f a l s e ,   / /   T r u e   t o   h i d e   n e x t / p r e v i o u s   m o n t h   l i n k s 
 	 	 	 / /   i f   n o t   a p p l i c a b l e ,   f a l s e   t o   j u s t   d i s a b l e   t h e m 
 	 	 n a v i g a t i o n A s D a t e F o r m a t :   f a l s e ,   / /   T r u e   i f   d a t e   f o r m a t t i n g   a p p l i e d   t o   p r e v / t o d a y / n e x t   l i n k s 
 	 	 g o t o C u r r e n t :   f a l s e ,   / /   T r u e   i f   t o d a y   l i n k   g o e s   b a c k   t o   c u r r e n t   s e l e c t i o n   i n s t e a d 
 	 	 c h a n g e M o n t h :   f a l s e ,   / /   T r u e   i f   m o n t h   c a n   b e   s e l e c t e d   d i r e c t l y ,   f a l s e   i f   o n l y   p r e v / n e x t 
 	 	 c h a n g e Y e a r :   f a l s e ,   / /   T r u e   i f   y e a r   c a n   b e   s e l e c t e d   d i r e c t l y ,   f a l s e   i f   o n l y   p r e v / n e x t 
 	 	 y e a r R a n g e :   " c - 1 0 : c + 1 0 " ,   / /   R a n g e   o f   y e a r s   t o   d i s p l a y   i n   d r o p - d o w n , 
 	 	 	 / /   e i t h e r   r e l a t i v e   t o   t o d a y ' s   y e a r   ( - n n : + n n ) ,   r e l a t i v e   t o   c u r r e n t l y   d i s p l a y e d   y e a r 
 	 	 	 / /   ( c - n n : c + n n ) ,   a b s o l u t e   ( n n n n : n n n n ) ,   o r   a   c o m b i n a t i o n   o f   t h e   a b o v e   ( n n n n : - n ) 
 	 	 s h o w O t h e r M o n t h s :   f a l s e ,   / /   T r u e   t o   s h o w   d a t e s   i n   o t h e r   m o n t h s ,   f a l s e   t o   l e a v e   b l a n k 
 	 	 s e l e c t O t h e r M o n t h s :   f a l s e ,   / /   T r u e   t o   a l l o w   s e l e c t i o n   o f   d a t e s   i n   o t h e r   m o n t h s ,   f a l s e   f o r   u n s e l e c t a b l e 
 	 	 s h o w W e e k :   f a l s e ,   / /   T r u e   t o   s h o w   w e e k   o f   t h e   y e a r ,   f a l s e   t o   n o t   s h o w   i t 
 	 	 c a l c u l a t e W e e k :   t h i s . i s o 8 6 0 1 W e e k ,   / /   H o w   t o   c a l c u l a t e   t h e   w e e k   o f   t h e   y e a r , 
 	 	 	 / /   t a k e s   a   D a t e   a n d   r e t u r n s   t h e   n u m b e r   o f   t h e   w e e k   f o r   i t 
 	 	 s h o r t Y e a r C u t o f f :   " + 1 0 " ,   / /   S h o r t   y e a r   v a l u e s   <   t h i s   a r e   i n   t h e   c u r r e n t   c e n t u r y , 
 	 	 	 / /   >   t h i s   a r e   i n   t h e   p r e v i o u s   c e n t u r y , 
 	 	 	 / /   s t r i n g   v a l u e   s t a r t i n g   w i t h   " + "   f o r   c u r r e n t   y e a r   +   v a l u e 
 	 	 m i n D a t e :   n u l l ,   / /   T h e   e a r l i e s t   s e l e c t a b l e   d a t e ,   o r   n u l l   f o r   n o   l i m i t 
 	 	 m a x D a t e :   n u l l ,   / /   T h e   l a t e s t   s e l e c t a b l e   d a t e ,   o r   n u l l   f o r   n o   l i m i t 
 	 	 d u r a t i o n :   " f a s t " ,   / /   D u r a t i o n   o f   d i s p l a y / c l o s u r e 
 	 	 b e f o r e S h o w D a y :   n u l l ,   / /   F u n c t i o n   t h a t   t a k e s   a   d a t e   a n d   r e t u r n s   a n   a r r a y   w i t h 
 	 	 	 / /   [ 0 ]   =   t r u e   i f   s e l e c t a b l e ,   f a l s e   i f   n o t ,   [ 1 ]   =   c u s t o m   C S S   c l a s s   n a m e ( s )   o r   " " , 
 	 	 	 / /   [ 2 ]   =   c e l l   t i t l e   ( o p t i o n a l ) ,   e . g .   $ . d a t e p i c k e r . n o W e e k e n d s 
 	 	 b e f o r e S h o w :   n u l l ,   / /   F u n c t i o n   t h a t   t a k e s   a n   i n p u t   f i e l d   a n d 
 	 	 	 / /   r e t u r n s   a   s e t   o f   c u s t o m   s e t t i n g s   f o r   t h e   d a t e   p i c k e r 
 	 	 o n S e l e c t :   n u l l ,   / /   D e f i n e   a   c a l l b a c k   f u n c t i o n   w h e n   a   d a t e   i s   s e l e c t e d 
 	 	 o n C h a n g e M o n t h Y e a r :   n u l l ,   / /   D e f i n e   a   c a l l b a c k   f u n c t i o n   w h e n   t h e   m o n t h   o r   y e a r   i s   c h a n g e d 
 	 	 o n C l o s e :   n u l l ,   / /   D e f i n e   a   c a l l b a c k   f u n c t i o n   w h e n   t h e   d a t e p i c k e r   i s   c l o s e d 
 	 	 n u m b e r O f M o n t h s :   1 ,   / /   N u m b e r   o f   m o n t h s   t o   s h o w   a t   a   t i m e 
 	 	 s h o w C u r r e n t A t P o s :   0 ,   / /   T h e   p o s i t i o n   i n   m u l t i p e   m o n t h s   a t   w h i c h   t o   s h o w   t h e   c u r r e n t   m o n t h   ( s t a r t i n g   a t   0 ) 
 	 	 s t e p M o n t h s :   1 ,   / /   N u m b e r   o f   m o n t h s   t o   s t e p   b a c k / f o r w a r d 
 	 	 s t e p B i g M o n t h s :   1 2 ,   / /   N u m b e r   o f   m o n t h s   t o   s t e p   b a c k / f o r w a r d   f o r   t h e   b i g   l i n k s 
 	 	 a l t F i e l d :   " " ,   / /   S e l e c t o r   f o r   a n   a l t e r n a t e   f i e l d   t o   s t o r e   s e l e c t e d   d a t e s   i n t o 
 	 	 a l t F o r m a t :   " " ,   / /   T h e   d a t e   f o r m a t   t o   u s e   f o r   t h e   a l t e r n a t e   f i e l d 
 	 	 c o n s t r a i n I n p u t :   t r u e ,   / /   T h e   i n p u t   i s   c o n s t r a i n e d   b y   t h e   c u r r e n t   d a t e   f o r m a t 
 	 	 s h o w B u t t o n P a n e l :   f a l s e ,   / /   T r u e   t o   s h o w   b u t t o n   p a n e l ,   f a l s e   t o   n o t   s h o w   i t 
 	 	 a u t o S i z e :   f a l s e ,   / /   T r u e   t o   s i z e   t h e   i n p u t   f o r   t h e   d a t e   f o r m a t ,   f a l s e   t o   l e a v e   a s   i s 
 	 	 d i s a b l e d :   f a l s e   / /   T h e   i n i t i a l   d i s a b l e d   s t a t e 
 	 } ; 
 	 $ . e x t e n d ( t h i s . _ d e f a u l t s ,   t h i s . r e g i o n a l [ " " ] ) ; 
 	 t h i s . d p D i v   =   b i n d H o v e r ( $ ( " < d i v   i d = ' "   +   t h i s . _ m a i n D i v I d   +   " '   c l a s s = ' u i - d a t e p i c k e r   u i - w i d g e t   u i - w i d g e t - c o n t e n t   u i - h e l p e r - c l e a r f i x   u i - c o r n e r - a l l ' > < / d i v > " ) ) ; 
 } 
 
 $ . e x t e n d ( D a t e p i c k e r . p r o t o t y p e ,   { 
 	 / *   C l a s s   n a m e   a d d e d   t o   e l e m e n t s   t o   i n d i c a t e   a l r e a d y   c o n f i g u r e d   w i t h   a   d a t e   p i c k e r .   * / 
 	 m a r k e r C l a s s N a m e :   " h a s D a t e p i c k e r " , 
 
 	 / / K e e p   t r a c k   o f   t h e   m a x i m u m   n u m b e r   o f   r o w s   d i s p l a y e d   ( s e e   # 7 0 4 3 ) 
 	 m a x R o w s :   4 , 
 
 	 / /   T O D O   r e n a m e   t o   " w i d g e t "   w h e n   s w i t c h i n g   t o   w i d g e t   f a c t o r y 
 	 _ w i d g e t D a t e p i c k e r :   f u n c t i o n ( )   { 
 	 	 r e t u r n   t h i s . d p D i v ; 
 	 } , 
 
 	 / *   O v e r r i d e   t h e   d e f a u l t   s e t t i n g s   f o r   a l l   i n s t a n c e s   o f   t h e   d a t e   p i c k e r . 
 	   *   @ p a r a m     s e t t i n g s     o b j e c t   -   t h e   n e w   s e t t i n g s   t o   u s e   a s   d e f a u l t s   ( a n o n y m o u s   o b j e c t ) 
 	   *   @ r e t u r n   t h e   m a n a g e r   o b j e c t 
 	   * / 
 	 s e t D e f a u l t s :   f u n c t i o n ( s e t t i n g s )   { 
 	 	 e x t e n d R e m o v e ( t h i s . _ d e f a u l t s ,   s e t t i n g s   | |   { } ) ; 
 	 	 r e t u r n   t h i s ; 
 	 } , 
 
 	 / *   A t t a c h   t h e   d a t e   p i c k e r   t o   a   j Q u e r y   s e l e c t i o n . 
 	   *   @ p a r a m     t a r g e t 	 e l e m e n t   -   t h e   t a r g e t   i n p u t   f i e l d   o r   d i v i s i o n   o r   s p a n 
 	   *   @ p a r a m     s e t t i n g s     o b j e c t   -   t h e   n e w   s e t t i n g s   t o   u s e   f o r   t h i s   d a t e   p i c k e r   i n s t a n c e   ( a n o n y m o u s ) 
 	   * / 
 	 _ a t t a c h D a t e p i c k e r :   f u n c t i o n ( t a r g e t ,   s e t t i n g s )   { 
 	 	 v a r   n o d e N a m e ,   i n l i n e ,   i n s t ; 
 	 	 n o d e N a m e   =   t a r g e t . n o d e N a m e . t o L o w e r C a s e ( ) ; 
 	 	 i n l i n e   =   ( n o d e N a m e   = = =   " d i v "   | |   n o d e N a m e   = = =   " s p a n " ) ; 
 	 	 i f   ( ! t a r g e t . i d )   { 
 	 	 	 t h i s . u u i d   + =   1 ; 
 	 	 	 t a r g e t . i d   =   " d p "   +   t h i s . u u i d ; 
 	 	 } 
 	 	 i n s t   =   t h i s . _ n e w I n s t ( $ ( t a r g e t ) ,   i n l i n e ) ; 
 	 	 i n s t . s e t t i n g s   =   $ . e x t e n d ( { } ,   s e t t i n g s   | |   { } ) ; 
 	 	 i f   ( n o d e N a m e   = = =   " i n p u t " )   { 
 	 	 	 t h i s . _ c o n n e c t D a t e p i c k e r ( t a r g e t ,   i n s t ) ; 
 	 	 }   e l s e   i f   ( i n l i n e )   { 
 	 	 	 t h i s . _ i n l i n e D a t e p i c k e r ( t a r g e t ,   i n s t ) ; 
 	 	 } 
 	 } , 
 
 	 / *   C r e a t e   a   n e w   i n s t a n c e   o b j e c t .   * / 
 	 _ n e w I n s t :   f u n c t i o n ( t a r g e t ,   i n l i n e )   { 
 	 	 v a r   i d   =   t a r g e t [ 0 ] . i d . r e p l a c e ( / ( [ ^ A - Z a - z 0 - 9 _ \ - ] ) / g ,   " \ \ \ \ $ 1 " ) ;   / /   e s c a p e   j Q u e r y   m e t a   c h a r s 
 	 	 r e t u r n   { i d :   i d ,   i n p u t :   t a r g e t ,   / /   a s s o c i a t e d   t a r g e t 
 	 	 	 s e l e c t e d D a y :   0 ,   s e l e c t e d M o n t h :   0 ,   s e l e c t e d Y e a r :   0 ,   / /   c u r r e n t   s e l e c t i o n 
 	 	 	 d r a w M o n t h :   0 ,   d r a w Y e a r :   0 ,   / /   m o n t h   b e i n g   d r a w n 
 	 	 	 i n l i n e :   i n l i n e ,   / /   i s   d a t e p i c k e r   i n l i n e   o r   n o t 
 	 	 	 d p D i v :   ( ! i n l i n e   ?   t h i s . d p D i v   :   / /   p r e s e n t a t i o n   d i v 
 	 	 	 b i n d H o v e r ( $ ( " < d i v   c l a s s = ' "   +   t h i s . _ i n l i n e C l a s s   +   "   u i - d a t e p i c k e r   u i - w i d g e t   u i - w i d g e t - c o n t e n t   u i - h e l p e r - c l e a r f i x   u i - c o r n e r - a l l ' > < / d i v > " ) ) ) } ; 
 	 } , 
 
 	 / *   A t t a c h   t h e   d a t e   p i c k e r   t o   a n   i n p u t   f i e l d .   * / 
 	 _ c o n n e c t D a t e p i c k e r :   f u n c t i o n ( t a r g e t ,   i n s t )   { 
 	 	 v a r   i n p u t   =   $ ( t a r g e t ) ; 
 	 	 i n s t . a p p e n d   =   $ ( [ ] ) ; 
 	 	 i n s t . t r i g g e r   =   $ ( [ ] ) ; 
 	 	 i f   ( i n p u t . h a s C l a s s ( t h i s . m a r k e r C l a s s N a m e ) )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 	 	 t h i s . _ a t t a c h m e n t s ( i n p u t ,   i n s t ) ; 
 	 	 i n p u t . a d d C l a s s ( t h i s . m a r k e r C l a s s N a m e ) . k e y d o w n ( t h i s . _ d o K e y D o w n ) . 
 	 	 	 k e y p r e s s ( t h i s . _ d o K e y P r e s s ) . k e y u p ( t h i s . _ d o K e y U p ) ; 
 	 	 t h i s . _ a u t o S i z e ( i n s t ) ; 
 	 	 $ . d a t a ( t a r g e t ,   P R O P _ N A M E ,   i n s t ) ; 
 	 	 / / I f   d i s a b l e d   o p t i o n   i s   t r u e ,   d i s a b l e   t h e   d a t e p i c k e r   o n c e   i t   h a s   b e e n   a t t a c h e d   t o   t h e   i n p u t   ( s e e   t i c k e t   # 5 6 6 5 ) 
 	 	 i f (   i n s t . s e t t i n g s . d i s a b l e d   )   { 
 	 	 	 t h i s . _ d i s a b l e D a t e p i c k e r (   t a r g e t   ) ; 
 	 	 } 
 	 } , 
 
 	 / *   M a k e   a t t a c h m e n t s   b a s e d   o n   s e t t i n g s .   * / 
 	 _ a t t a c h m e n t s :   f u n c t i o n ( i n p u t ,   i n s t )   { 
 	 	 v a r   s h o w O n ,   b u t t o n T e x t ,   b u t t o n I m a g e , 
 	 	 	 a p p e n d T e x t   =   t h i s . _ g e t ( i n s t ,   " a p p e n d T e x t " ) , 
 	 	 	 i s R T L   =   t h i s . _ g e t ( i n s t ,   " i s R T L " ) ; 
 
 	 	 i f   ( i n s t . a p p e n d )   { 
 	 	 	 i n s t . a p p e n d . r e m o v e ( ) ; 
 	 	 } 
 	 	 i f   ( a p p e n d T e x t )   { 
 	 	 	 i n s t . a p p e n d   =   $ ( " < s p a n   c l a s s = ' "   +   t h i s . _ a p p e n d C l a s s   +   " ' > "   +   a p p e n d T e x t   +   " < / s p a n > " ) ; 
 	 	 	 i n p u t [ i s R T L   ?   " b e f o r e "   :   " a f t e r " ] ( i n s t . a p p e n d ) ; 
 	 	 } 
 
 	 	 i n p u t . u n b i n d ( " f o c u s " ,   t h i s . _ s h o w D a t e p i c k e r ) ; 
 
 	 	 i f   ( i n s t . t r i g g e r )   { 
 	 	 	 i n s t . t r i g g e r . r e m o v e ( ) ; 
 	 	 } 
 
 	 	 s h o w O n   =   t h i s . _ g e t ( i n s t ,   " s h o w O n " ) ; 
 	 	 i f   ( s h o w O n   = = =   " f o c u s "   | |   s h o w O n   = = =   " b o t h " )   {   / /   p o p - u p   d a t e   p i c k e r   w h e n   i n   t h e   m a r k e d   f i e l d 
 	 	 	 i n p u t . f o c u s ( t h i s . _ s h o w D a t e p i c k e r ) ; 
 	 	 } 
 	 	 i f   ( s h o w O n   = = =   " b u t t o n "   | |   s h o w O n   = = =   " b o t h " )   {   / /   p o p - u p   d a t e   p i c k e r   w h e n   b u t t o n   c l i c k e d 
 	 	 	 b u t t o n T e x t   =   t h i s . _ g e t ( i n s t ,   " b u t t o n T e x t " ) ; 
 	 	 	 b u t t o n I m a g e   =   t h i s . _ g e t ( i n s t ,   " b u t t o n I m a g e " ) ; 
 	 	 	 i n s t . t r i g g e r   =   $ ( t h i s . _ g e t ( i n s t ,   " b u t t o n I m a g e O n l y " )   ? 
 	 	 	 	 $ ( " < i m g / > " ) . a d d C l a s s ( t h i s . _ t r i g g e r C l a s s ) . 
 	 	 	 	 	 a t t r ( {   s r c :   b u t t o n I m a g e ,   a l t :   b u t t o n T e x t ,   t i t l e :   b u t t o n T e x t   } )   : 
 	 	 	 	 $ ( " < b u t t o n   t y p e = ' b u t t o n ' > < / b u t t o n > " ) . a d d C l a s s ( t h i s . _ t r i g g e r C l a s s ) . 
 	 	 	 	 	 h t m l ( ! b u t t o n I m a g e   ?   b u t t o n T e x t   :   $ ( " < i m g / > " ) . a t t r ( 
 	 	 	 	 	 {   s r c : b u t t o n I m a g e ,   a l t : b u t t o n T e x t ,   t i t l e : b u t t o n T e x t   } ) ) ) ; 
 	 	 	 i n p u t [ i s R T L   ?   " b e f o r e "   :   " a f t e r " ] ( i n s t . t r i g g e r ) ; 
 	 	 	 i n s t . t r i g g e r . c l i c k ( f u n c t i o n ( )   { 
 	 	 	 	 i f   ( $ . d a t e p i c k e r . _ d a t e p i c k e r S h o w i n g   & &   $ . d a t e p i c k e r . _ l a s t I n p u t   = = =   i n p u t [ 0 ] )   { 
 	 	 	 	 	 $ . d a t e p i c k e r . _ h i d e D a t e p i c k e r ( ) ; 
 	 	 	 	 }   e l s e   i f   ( $ . d a t e p i c k e r . _ d a t e p i c k e r S h o w i n g   & &   $ . d a t e p i c k e r . _ l a s t I n p u t   ! = =   i n p u t [ 0 ] )   { 
 	 	 	 	 	 $ . d a t e p i c k e r . _ h i d e D a t e p i c k e r ( ) ; 
 	 	 	 	 	 $ . d a t e p i c k e r . _ s h o w D a t e p i c k e r ( i n p u t [ 0 ] ) ; 
 	 	 	 	 }   e l s e   { 
 	 	 	 	 	 $ . d a t e p i c k e r . _ s h o w D a t e p i c k e r ( i n p u t [ 0 ] ) ; 
 	 	 	 	 } 
 	 	 	 	 r e t u r n   f a l s e ; 
 	 	 	 } ) ; 
 	 	 } 
 	 } , 
 
 	 / *   A p p l y   t h e   m a x i m u m   l e n g t h   f o r   t h e   d a t e   f o r m a t .   * / 
 	 _ a u t o S i z e :   f u n c t i o n ( i n s t )   { 
 	 	 i f   ( t h i s . _ g e t ( i n s t ,   " a u t o S i z e " )   & &   ! i n s t . i n l i n e )   { 
 	 	 	 v a r   f i n d M a x ,   m a x ,   m a x I ,   i , 
 	 	 	 	 d a t e   =   n e w   D a t e ( 2 0 0 9 ,   1 2   -   1 ,   2 0 ) ,   / /   E n s u r e   d o u b l e   d i g i t s 
 	 	 	 	 d a t e F o r m a t   =   t h i s . _ g e t ( i n s t ,   " d a t e F o r m a t " ) ; 
 
 	 	 	 i f   ( d a t e F o r m a t . m a t c h ( / [ D M ] / ) )   { 
 	 	 	 	 f i n d M a x   =   f u n c t i o n ( n a m e s )   { 
 	 	 	 	 	 m a x   =   0 ; 
 	 	 	 	 	 m a x I   =   0 ; 
 	 	 	 	 	 f o r   ( i   =   0 ;   i   <   n a m e s . l e n g t h ;   i + + )   { 
 	 	 	 	 	 	 i f   ( n a m e s [ i ] . l e n g t h   >   m a x )   { 
 	 	 	 	 	 	 	 m a x   =   n a m e s [ i ] . l e n g t h ; 
 	 	 	 	 	 	 	 m a x I   =   i ; 
 	 	 	 	 	 	 } 
 	 	 	 	 	 } 
 	 	 	 	 	 r e t u r n   m a x I ; 
 	 	 	 	 } ; 
 	 	 	 	 d a t e . s e t M o n t h ( f i n d M a x ( t h i s . _ g e t ( i n s t ,   ( d a t e F o r m a t . m a t c h ( / M M / )   ? 
 	 	 	 	 	 " m o n t h N a m e s "   :   " m o n t h N a m e s S h o r t " ) ) ) ) ; 
 	 	 	 	 d a t e . s e t D a t e ( f i n d M a x ( t h i s . _ g e t ( i n s t ,   ( d a t e F o r m a t . m a t c h ( / D D / )   ? 
 	 	 	 	 	 " d a y N a m e s "   :   " d a y N a m e s S h o r t " ) ) )   +   2 0   -   d a t e . g e t D a y ( ) ) ; 
 	 	 	 } 
 	 	 	 i n s t . i n p u t . a t t r ( " s i z e " ,   t h i s . _ f o r m a t D a t e ( i n s t ,   d a t e ) . l e n g t h ) ; 
 	 	 } 
 	 } , 
 
 	 / *   A t t a c h   a n   i n l i n e   d a t e   p i c k e r   t o   a   d i v .   * / 
 	 _ i n l i n e D a t e p i c k e r :   f u n c t i o n ( t a r g e t ,   i n s t )   { 
 	 	 v a r   d i v S p a n   =   $ ( t a r g e t ) ; 
 	 	 i f   ( d i v S p a n . h a s C l a s s ( t h i s . m a r k e r C l a s s N a m e ) )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 	 	 d i v S p a n . a d d C l a s s ( t h i s . m a r k e r C l a s s N a m e ) . a p p e n d ( i n s t . d p D i v ) ; 
 	 	 $ . d a t a ( t a r g e t ,   P R O P _ N A M E ,   i n s t ) ; 
 	 	 t h i s . _ s e t D a t e ( i n s t ,   t h i s . _ g e t D e f a u l t D a t e ( i n s t ) ,   t r u e ) ; 
 	 	 t h i s . _ u p d a t e D a t e p i c k e r ( i n s t ) ; 
 	 	 t h i s . _ u p d a t e A l t e r n a t e ( i n s t ) ; 
 	 	 / / I f   d i s a b l e d   o p t i o n   i s   t r u e ,   d i s a b l e   t h e   d a t e p i c k e r   b e f o r e   s h o w i n g   i t   ( s e e   t i c k e t   # 5 6 6 5 ) 
 	 	 i f (   i n s t . s e t t i n g s . d i s a b l e d   )   { 
 	 	 	 t h i s . _ d i s a b l e D a t e p i c k e r (   t a r g e t   ) ; 
 	 	 } 
 	 	 / /   S e t   d i s p l a y : b l o c k   i n   p l a c e   o f   i n s t . d p D i v . s h o w ( )   w h i c h   w o n ' t   w o r k   o n   d i s c o n n e c t e d   e l e m e n t s 
 	 	 / /   h t t p : / / b u g s . j q u e r y u i . c o m / t i c k e t / 7 5 5 2   -   A   D a t e p i c k e r   c r e a t e d   o n   a   d e t a c h e d   d i v   h a s   z e r o   h e i g h t 
 	 	 i n s t . d p D i v . c s s (   " d i s p l a y " ,   " b l o c k "   ) ; 
 	 } , 
 
 	 / *   P o p - u p   t h e   d a t e   p i c k e r   i n   a   " d i a l o g "   b o x . 
 	   *   @ p a r a m     i n p u t   e l e m e n t   -   i g n o r e d 
 	   *   @ p a r a m     d a t e 	 s t r i n g   o r   D a t e   -   t h e   i n i t i a l   d a t e   t o   d i s p l a y 
 	   *   @ p a r a m     o n S e l e c t     f u n c t i o n   -   t h e   f u n c t i o n   t o   c a l l   w h e n   a   d a t e   i s   s e l e c t e d 
 	   *   @ p a r a m     s e t t i n g s     o b j e c t   -   u p d a t e   t h e   d i a l o g   d a t e   p i c k e r   i n s t a n c e ' s   s e t t i n g s   ( a n o n y m o u s   o b j e c t ) 
 	   *   @ p a r a m     p o s   i n t [ 2 ]   -   c o o r d i n a t e s   f o r   t h e   d i a l o g ' s   p o s i t i o n   w i t h i n   t h e   s c r e e n   o r 
 	   * 	 	 	 	 	 e v e n t   -   w i t h   x / y   c o o r d i n a t e s   o r 
 	   * 	 	 	 	 	 l e a v e   e m p t y   f o r   d e f a u l t   ( s c r e e n   c e n t r e ) 
 	   *   @ r e t u r n   t h e   m a n a g e r   o b j e c t 
 	   * / 
 	 _ d i a l o g D a t e p i c k e r :   f u n c t i o n ( i n p u t ,   d a t e ,   o n S e l e c t ,   s e t t i n g s ,   p o s )   { 
 	 	 v a r   i d ,   b r o w s e r W i d t h ,   b r o w s e r H e i g h t ,   s c r o l l X ,   s c r o l l Y , 
 	 	 	 i n s t   =   t h i s . _ d i a l o g I n s t ;   / /   i n t e r n a l   i n s t a n c e 
 
 	 	 i f   ( ! i n s t )   { 
 	 	 	 t h i s . u u i d   + =   1 ; 
 	 	 	 i d   =   " d p "   +   t h i s . u u i d ; 
 	 	 	 t h i s . _ d i a l o g I n p u t   =   $ ( " < i n p u t   t y p e = ' t e x t '   i d = ' "   +   i d   + 
 	 	 	 	 " '   s t y l e = ' p o s i t i o n :   a b s o l u t e ;   t o p :   - 1 0 0 p x ;   w i d t h :   0 p x ; ' / > " ) ; 
 	 	 	 t h i s . _ d i a l o g I n p u t . k e y d o w n ( t h i s . _ d o K e y D o w n ) ; 
 	 	 	 $ ( " b o d y " ) . a p p e n d ( t h i s . _ d i a l o g I n p u t ) ; 
 	 	 	 i n s t   =   t h i s . _ d i a l o g I n s t   =   t h i s . _ n e w I n s t ( t h i s . _ d i a l o g I n p u t ,   f a l s e ) ; 
 	 	 	 i n s t . s e t t i n g s   =   { } ; 
 	 	 	 $ . d a t a ( t h i s . _ d i a l o g I n p u t [ 0 ] ,   P R O P _ N A M E ,   i n s t ) ; 
 	 	 } 
 	 	 e x t e n d R e m o v e ( i n s t . s e t t i n g s ,   s e t t i n g s   | |   { } ) ; 
 	 	 d a t e   =   ( d a t e   & &   d a t e . c o n s t r u c t o r   = = =   D a t e   ?   t h i s . _ f o r m a t D a t e ( i n s t ,   d a t e )   :   d a t e ) ; 
 	 	 t h i s . _ d i a l o g I n p u t . v a l ( d a t e ) ; 
 
 	 	 t h i s . _ p o s   =   ( p o s   ?   ( p o s . l e n g t h   ?   p o s   :   [ p o s . p a g e X ,   p o s . p a g e Y ] )   :   n u l l ) ; 
 	 	 i f   ( ! t h i s . _ p o s )   { 
 	 	 	 b r o w s e r W i d t h   =   d o c u m e n t . d o c u m e n t E l e m e n t . c l i e n t W i d t h ; 
 	 	 	 b r o w s e r H e i g h t   =   d o c u m e n t . d o c u m e n t E l e m e n t . c l i e n t H e i g h t ; 
 	 	 	 s c r o l l X   =   d o c u m e n t . d o c u m e n t E l e m e n t . s c r o l l L e f t   | |   d o c u m e n t . b o d y . s c r o l l L e f t ; 
 	 	 	 s c r o l l Y   =   d o c u m e n t . d o c u m e n t E l e m e n t . s c r o l l T o p   | |   d o c u m e n t . b o d y . s c r o l l T o p ; 
 	 	 	 t h i s . _ p o s   =   / /   s h o u l d   u s e   a c t u a l   w i d t h / h e i g h t   b e l o w 
 	 	 	 	 [ ( b r o w s e r W i d t h   /   2 )   -   1 0 0   +   s c r o l l X ,   ( b r o w s e r H e i g h t   /   2 )   -   1 5 0   +   s c r o l l Y ] ; 
 	 	 } 
 
 	 	 / /   m o v e   i n p u t   o n   s c r e e n   f o r   f o c u s ,   b u t   h i d d e n   b e h i n d   d i a l o g 
 	 	 t h i s . _ d i a l o g I n p u t . c s s ( " l e f t " ,   ( t h i s . _ p o s [ 0 ]   +   2 0 )   +   " p x " ) . c s s ( " t o p " ,   t h i s . _ p o s [ 1 ]   +   " p x " ) ; 
 	 	 i n s t . s e t t i n g s . o n S e l e c t   =   o n S e l e c t ; 
 	 	 t h i s . _ i n D i a l o g   =   t r u e ; 
 	 	 t h i s . d p D i v . a d d C l a s s ( t h i s . _ d i a l o g C l a s s ) ; 
 	 	 t h i s . _ s h o w D a t e p i c k e r ( t h i s . _ d i a l o g I n p u t [ 0 ] ) ; 
 	 	 i f   ( $ . b l o c k U I )   { 
 	 	 	 $ . b l o c k U I ( t h i s . d p D i v ) ; 
 	 	 } 
 	 	 $ . d a t a ( t h i s . _ d i a l o g I n p u t [ 0 ] ,   P R O P _ N A M E ,   i n s t ) ; 
 	 	 r e t u r n   t h i s ; 
 	 } , 
 
 	 / *   D e t a c h   a   d a t e p i c k e r   f r o m   i t s   c o n t r o l . 
 	   *   @ p a r a m     t a r g e t 	 e l e m e n t   -   t h e   t a r g e t   i n p u t   f i e l d   o r   d i v i s i o n   o r   s p a n 
 	   * / 
 	 _ d e s t r o y D a t e p i c k e r :   f u n c t i o n ( t a r g e t )   { 
 	 	 v a r   n o d e N a m e , 
 	 	 	 $ t a r g e t   =   $ ( t a r g e t ) , 
 	 	 	 i n s t   =   $ . d a t a ( t a r g e t ,   P R O P _ N A M E ) ; 
 
 	 	 i f   ( ! $ t a r g e t . h a s C l a s s ( t h i s . m a r k e r C l a s s N a m e ) )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 n o d e N a m e   =   t a r g e t . n o d e N a m e . t o L o w e r C a s e ( ) ; 
 	 	 $ . r e m o v e D a t a ( t a r g e t ,   P R O P _ N A M E ) ; 
 	 	 i f   ( n o d e N a m e   = = =   " i n p u t " )   { 
 	 	 	 i n s t . a p p e n d . r e m o v e ( ) ; 
 	 	 	 i n s t . t r i g g e r . r e m o v e ( ) ; 
 	 	 	 $ t a r g e t . r e m o v e C l a s s ( t h i s . m a r k e r C l a s s N a m e ) . 
 	 	 	 	 u n b i n d ( " f o c u s " ,   t h i s . _ s h o w D a t e p i c k e r ) . 
 	 	 	 	 u n b i n d ( " k e y d o w n " ,   t h i s . _ d o K e y D o w n ) . 
 	 	 	 	 u n b i n d ( " k e y p r e s s " ,   t h i s . _ d o K e y P r e s s ) . 
 	 	 	 	 u n b i n d ( " k e y u p " ,   t h i s . _ d o K e y U p ) ; 
 	 	 }   e l s e   i f   ( n o d e N a m e   = = =   " d i v "   | |   n o d e N a m e   = = =   " s p a n " )   { 
 	 	 	 $ t a r g e t . r e m o v e C l a s s ( t h i s . m a r k e r C l a s s N a m e ) . e m p t y ( ) ; 
 	 	 } 
 	 } , 
 
 	 / *   E n a b l e   t h e   d a t e   p i c k e r   t o   a   j Q u e r y   s e l e c t i o n . 
 	   *   @ p a r a m     t a r g e t 	 e l e m e n t   -   t h e   t a r g e t   i n p u t   f i e l d   o r   d i v i s i o n   o r   s p a n 
 	   * / 
 	 _ e n a b l e D a t e p i c k e r :   f u n c t i o n ( t a r g e t )   { 
 	 	 v a r   n o d e N a m e ,   i n l i n e , 
 	 	 	 $ t a r g e t   =   $ ( t a r g e t ) , 
 	 	 	 i n s t   =   $ . d a t a ( t a r g e t ,   P R O P _ N A M E ) ; 
 
 	 	 i f   ( ! $ t a r g e t . h a s C l a s s ( t h i s . m a r k e r C l a s s N a m e ) )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 n o d e N a m e   =   t a r g e t . n o d e N a m e . t o L o w e r C a s e ( ) ; 
 	 	 i f   ( n o d e N a m e   = = =   " i n p u t " )   { 
 	 	 	 t a r g e t . d i s a b l e d   =   f a l s e ; 
 	 	 	 i n s t . t r i g g e r . f i l t e r ( " b u t t o n " ) . 
 	 	 	 	 e a c h ( f u n c t i o n ( )   {   t h i s . d i s a b l e d   =   f a l s e ;   } ) . e n d ( ) . 
 	 	 	 	 f i l t e r ( " i m g " ) . c s s ( { o p a c i t y :   " 1 . 0 " ,   c u r s o r :   " " } ) ; 
 	 	 }   e l s e   i f   ( n o d e N a m e   = = =   " d i v "   | |   n o d e N a m e   = = =   " s p a n " )   { 
 	 	 	 i n l i n e   =   $ t a r g e t . c h i l d r e n ( " . "   +   t h i s . _ i n l i n e C l a s s ) ; 
 	 	 	 i n l i n e . c h i l d r e n ( ) . r e m o v e C l a s s ( " u i - s t a t e - d i s a b l e d " ) ; 
 	 	 	 i n l i n e . f i n d ( " s e l e c t . u i - d a t e p i c k e r - m o n t h ,   s e l e c t . u i - d a t e p i c k e r - y e a r " ) . 
 	 	 	 	 p r o p ( " d i s a b l e d " ,   f a l s e ) ; 
 	 	 } 
 	 	 t h i s . _ d i s a b l e d I n p u t s   =   $ . m a p ( t h i s . _ d i s a b l e d I n p u t s , 
 	 	 	 f u n c t i o n ( v a l u e )   {   r e t u r n   ( v a l u e   = = =   t a r g e t   ?   n u l l   :   v a l u e ) ;   } ) ;   / /   d e l e t e   e n t r y 
 	 } , 
 
 	 / *   D i s a b l e   t h e   d a t e   p i c k e r   t o   a   j Q u e r y   s e l e c t i o n . 
 	   *   @ p a r a m     t a r g e t 	 e l e m e n t   -   t h e   t a r g e t   i n p u t   f i e l d   o r   d i v i s i o n   o r   s p a n 
 	   * / 
 	 _ d i s a b l e D a t e p i c k e r :   f u n c t i o n ( t a r g e t )   { 
 	 	 v a r   n o d e N a m e ,   i n l i n e , 
 	 	 	 $ t a r g e t   =   $ ( t a r g e t ) , 
 	 	 	 i n s t   =   $ . d a t a ( t a r g e t ,   P R O P _ N A M E ) ; 
 
 	 	 i f   ( ! $ t a r g e t . h a s C l a s s ( t h i s . m a r k e r C l a s s N a m e ) )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 n o d e N a m e   =   t a r g e t . n o d e N a m e . t o L o w e r C a s e ( ) ; 
 	 	 i f   ( n o d e N a m e   = = =   " i n p u t " )   { 
 	 	 	 t a r g e t . d i s a b l e d   =   t r u e ; 
 	 	 	 i n s t . t r i g g e r . f i l t e r ( " b u t t o n " ) . 
 	 	 	 	 e a c h ( f u n c t i o n ( )   {   t h i s . d i s a b l e d   =   t r u e ;   } ) . e n d ( ) . 
 	 	 	 	 f i l t e r ( " i m g " ) . c s s ( { o p a c i t y :   " 0 . 5 " ,   c u r s o r :   " d e f a u l t " } ) ; 
 	 	 }   e l s e   i f   ( n o d e N a m e   = = =   " d i v "   | |   n o d e N a m e   = = =   " s p a n " )   { 
 	 	 	 i n l i n e   =   $ t a r g e t . c h i l d r e n ( " . "   +   t h i s . _ i n l i n e C l a s s ) ; 
 	 	 	 i n l i n e . c h i l d r e n ( ) . a d d C l a s s ( " u i - s t a t e - d i s a b l e d " ) ; 
 	 	 	 i n l i n e . f i n d ( " s e l e c t . u i - d a t e p i c k e r - m o n t h ,   s e l e c t . u i - d a t e p i c k e r - y e a r " ) . 
 	 	 	 	 p r o p ( " d i s a b l e d " ,   t r u e ) ; 
 	 	 } 
 	 	 t h i s . _ d i s a b l e d I n p u t s   =   $ . m a p ( t h i s . _ d i s a b l e d I n p u t s , 
 	 	 	 f u n c t i o n ( v a l u e )   {   r e t u r n   ( v a l u e   = = =   t a r g e t   ?   n u l l   :   v a l u e ) ;   } ) ;   / /   d e l e t e   e n t r y 
 	 	 t h i s . _ d i s a b l e d I n p u t s [ t h i s . _ d i s a b l e d I n p u t s . l e n g t h ]   =   t a r g e t ; 
 	 } , 
 
 	 / *   I s   t h e   f i r s t   f i e l d   i n   a   j Q u e r y   c o l l e c t i o n   d i s a b l e d   a s   a   d a t e p i c k e r ? 
 	   *   @ p a r a m     t a r g e t 	 e l e m e n t   -   t h e   t a r g e t   i n p u t   f i e l d   o r   d i v i s i o n   o r   s p a n 
 	   *   @ r e t u r n   b o o l e a n   -   t r u e   i f   d i s a b l e d ,   f a l s e   i f   e n a b l e d 
 	   * / 
 	 _ i s D i s a b l e d D a t e p i c k e r :   f u n c t i o n ( t a r g e t )   { 
 	 	 i f   ( ! t a r g e t )   { 
 	 	 	 r e t u r n   f a l s e ; 
 	 	 } 
 	 	 f o r   ( v a r   i   =   0 ;   i   <   t h i s . _ d i s a b l e d I n p u t s . l e n g t h ;   i + + )   { 
 	 	 	 i f   ( t h i s . _ d i s a b l e d I n p u t s [ i ]   = = =   t a r g e t )   { 
 	 	 	 	 r e t u r n   t r u e ; 
 	 	 	 } 
 	 	 } 
 	 	 r e t u r n   f a l s e ; 
 	 } , 
 
 	 / *   R e t r i e v e   t h e   i n s t a n c e   d a t a   f o r   t h e   t a r g e t   c o n t r o l . 
 	   *   @ p a r a m     t a r g e t     e l e m e n t   -   t h e   t a r g e t   i n p u t   f i e l d   o r   d i v i s i o n   o r   s p a n 
 	   *   @ r e t u r n     o b j e c t   -   t h e   a s s o c i a t e d   i n s t a n c e   d a t a 
 	   *   @ t h r o w s     e r r o r   i f   a   j Q u e r y   p r o b l e m   g e t t i n g   d a t a 
 	   * / 
 	 _ g e t I n s t :   f u n c t i o n ( t a r g e t )   { 
 	 	 t r y   { 
 	 	 	 r e t u r n   $ . d a t a ( t a r g e t ,   P R O P _ N A M E ) ; 
 	 	 } 
 	 	 c a t c h   ( e r r )   { 
 	 	 	 t h r o w   " M i s s i n g   i n s t a n c e   d a t a   f o r   t h i s   d a t e p i c k e r " ; 
 	 	 } 
 	 } , 
 
 	 / *   U p d a t e   o r   r e t r i e v e   t h e   s e t t i n g s   f o r   a   d a t e   p i c k e r   a t t a c h e d   t o   a n   i n p u t   f i e l d   o r   d i v i s i o n . 
 	   *   @ p a r a m     t a r g e t     e l e m e n t   -   t h e   t a r g e t   i n p u t   f i e l d   o r   d i v i s i o n   o r   s p a n 
 	   *   @ p a r a m     n a m e 	 o b j e c t   -   t h e   n e w   s e t t i n g s   t o   u p d a t e   o r 
 	   * 	 	 	 	 s t r i n g   -   t h e   n a m e   o f   t h e   s e t t i n g   t o   c h a n g e   o r   r e t r i e v e , 
 	   * 	 	 	 	 w h e n   r e t r i e v i n g   a l s o   " a l l "   f o r   a l l   i n s t a n c e   s e t t i n g s   o r 
 	   * 	 	 	 	 " d e f a u l t s "   f o r   a l l   g l o b a l   d e f a u l t s 
 	   *   @ p a r a m     v a l u e       a n y   -   t h e   n e w   v a l u e   f o r   t h e   s e t t i n g 
 	   * 	 	 	 	 ( o m i t   i f   a b o v e   i s   a n   o b j e c t   o r   t o   r e t r i e v e   a   v a l u e ) 
 	   * / 
 	 _ o p t i o n D a t e p i c k e r :   f u n c t i o n ( t a r g e t ,   n a m e ,   v a l u e )   { 
 	 	 v a r   s e t t i n g s ,   d a t e ,   m i n D a t e ,   m a x D a t e , 
 	 	 	 i n s t   =   t h i s . _ g e t I n s t ( t a r g e t ) ; 
 
 	 	 i f   ( a r g u m e n t s . l e n g t h   = = =   2   & &   t y p e o f   n a m e   = = =   " s t r i n g " )   { 
 	 	 	 r e t u r n   ( n a m e   = = =   " d e f a u l t s "   ?   $ . e x t e n d ( { } ,   $ . d a t e p i c k e r . _ d e f a u l t s )   : 
 	 	 	 	 ( i n s t   ?   ( n a m e   = = =   " a l l "   ?   $ . e x t e n d ( { } ,   i n s t . s e t t i n g s )   : 
 	 	 	 	 t h i s . _ g e t ( i n s t ,   n a m e ) )   :   n u l l ) ) ; 
 	 	 } 
 
 	 	 s e t t i n g s   =   n a m e   | |   { } ; 
 	 	 i f   ( t y p e o f   n a m e   = = =   " s t r i n g " )   { 
 	 	 	 s e t t i n g s   =   { } ; 
 	 	 	 s e t t i n g s [ n a m e ]   =   v a l u e ; 
 	 	 } 
 
 	 	 i f   ( i n s t )   { 
 	 	 	 i f   ( t h i s . _ c u r I n s t   = = =   i n s t )   { 
 	 	 	 	 t h i s . _ h i d e D a t e p i c k e r ( ) ; 
 	 	 	 } 
 
 	 	 	 d a t e   =   t h i s . _ g e t D a t e D a t e p i c k e r ( t a r g e t ,   t r u e ) ; 
 	 	 	 m i n D a t e   =   t h i s . _ g e t M i n M a x D a t e ( i n s t ,   " m i n " ) ; 
 	 	 	 m a x D a t e   =   t h i s . _ g e t M i n M a x D a t e ( i n s t ,   " m a x " ) ; 
 	 	 	 e x t e n d R e m o v e ( i n s t . s e t t i n g s ,   s e t t i n g s ) ; 
 	 	 	 / /   r e f o r m a t   t h e   o l d   m i n D a t e / m a x D a t e   v a l u e s   i f   d a t e F o r m a t   c h a n g e s   a n d   a   n e w   m i n D a t e / m a x D a t e   i s n ' t   p r o v i d e d 
 	 	 	 i f   ( m i n D a t e   ! = =   n u l l   & &   s e t t i n g s . d a t e F o r m a t   ! = =   u n d e f i n e d   & &   s e t t i n g s . m i n D a t e   = = =   u n d e f i n e d )   { 
 	 	 	 	 i n s t . s e t t i n g s . m i n D a t e   =   t h i s . _ f o r m a t D a t e ( i n s t ,   m i n D a t e ) ; 
 	 	 	 } 
 	 	 	 i f   ( m a x D a t e   ! = =   n u l l   & &   s e t t i n g s . d a t e F o r m a t   ! = =   u n d e f i n e d   & &   s e t t i n g s . m a x D a t e   = = =   u n d e f i n e d )   { 
 	 	 	 	 i n s t . s e t t i n g s . m a x D a t e   =   t h i s . _ f o r m a t D a t e ( i n s t ,   m a x D a t e ) ; 
 	 	 	 } 
 	 	 	 i f   (   " d i s a b l e d "   i n   s e t t i n g s   )   { 
 	 	 	 	 i f   (   s e t t i n g s . d i s a b l e d   )   { 
 	 	 	 	 	 t h i s . _ d i s a b l e D a t e p i c k e r ( t a r g e t ) ; 
 	 	 	 	 }   e l s e   { 
 	 	 	 	 	 t h i s . _ e n a b l e D a t e p i c k e r ( t a r g e t ) ; 
 	 	 	 	 } 
 	 	 	 } 
 	 	 	 t h i s . _ a t t a c h m e n t s ( $ ( t a r g e t ) ,   i n s t ) ; 
 	 	 	 t h i s . _ a u t o S i z e ( i n s t ) ; 
 	 	 	 t h i s . _ s e t D a t e ( i n s t ,   d a t e ) ; 
 	 	 	 t h i s . _ u p d a t e A l t e r n a t e ( i n s t ) ; 
 	 	 	 t h i s . _ u p d a t e D a t e p i c k e r ( i n s t ) ; 
 	 	 } 
 	 } , 
 
 	 / /   c h a n g e   m e t h o d   d e p r e c a t e d 
 	 _ c h a n g e D a t e p i c k e r :   f u n c t i o n ( t a r g e t ,   n a m e ,   v a l u e )   { 
 	 	 t h i s . _ o p t i o n D a t e p i c k e r ( t a r g e t ,   n a m e ,   v a l u e ) ; 
 	 } , 
 
 	 / *   R e d r a w   t h e   d a t e   p i c k e r   a t t a c h e d   t o   a n   i n p u t   f i e l d   o r   d i v i s i o n . 
 	   *   @ p a r a m     t a r g e t     e l e m e n t   -   t h e   t a r g e t   i n p u t   f i e l d   o r   d i v i s i o n   o r   s p a n 
 	   * / 
 	 _ r e f r e s h D a t e p i c k e r :   f u n c t i o n ( t a r g e t )   { 
 	 	 v a r   i n s t   =   t h i s . _ g e t I n s t ( t a r g e t ) ; 
 	 	 i f   ( i n s t )   { 
 	 	 	 t h i s . _ u p d a t e D a t e p i c k e r ( i n s t ) ; 
 	 	 } 
 	 } , 
 
 	 / *   S e t   t h e   d a t e s   f o r   a   j Q u e r y   s e l e c t i o n . 
 	   *   @ p a r a m     t a r g e t   e l e m e n t   -   t h e   t a r g e t   i n p u t   f i e l d   o r   d i v i s i o n   o r   s p a n 
 	   *   @ p a r a m     d a t e 	 D a t e   -   t h e   n e w   d a t e 
 	   * / 
 	 _ s e t D a t e D a t e p i c k e r :   f u n c t i o n ( t a r g e t ,   d a t e )   { 
 	 	 v a r   i n s t   =   t h i s . _ g e t I n s t ( t a r g e t ) ; 
 	 	 i f   ( i n s t )   { 
 	 	 	 t h i s . _ s e t D a t e ( i n s t ,   d a t e ) ; 
 	 	 	 t h i s . _ u p d a t e D a t e p i c k e r ( i n s t ) ; 
 	 	 	 t h i s . _ u p d a t e A l t e r n a t e ( i n s t ) ; 
 	 	 } 
 	 } , 
 
 	 / *   G e t   t h e   d a t e ( s )   f o r   t h e   f i r s t   e n t r y   i n   a   j Q u e r y   s e l e c t i o n . 
 	   *   @ p a r a m     t a r g e t   e l e m e n t   -   t h e   t a r g e t   i n p u t   f i e l d   o r   d i v i s i o n   o r   s p a n 
 	   *   @ p a r a m     n o D e f a u l t   b o o l e a n   -   t r u e   i f   n o   d e f a u l t   d a t e   i s   t o   b e   u s e d 
 	   *   @ r e t u r n   D a t e   -   t h e   c u r r e n t   d a t e 
 	   * / 
 	 _ g e t D a t e D a t e p i c k e r :   f u n c t i o n ( t a r g e t ,   n o D e f a u l t )   { 
 	 	 v a r   i n s t   =   t h i s . _ g e t I n s t ( t a r g e t ) ; 
 	 	 i f   ( i n s t   & &   ! i n s t . i n l i n e )   { 
 	 	 	 t h i s . _ s e t D a t e F r o m F i e l d ( i n s t ,   n o D e f a u l t ) ; 
 	 	 } 
 	 	 r e t u r n   ( i n s t   ?   t h i s . _ g e t D a t e ( i n s t )   :   n u l l ) ; 
 	 } , 
 
 	 / *   H a n d l e   k e y s t r o k e s .   * / 
 	 _ d o K e y D o w n :   f u n c t i o n ( e v e n t )   { 
 	 	 v a r   o n S e l e c t ,   d a t e S t r ,   s e l , 
 	 	 	 i n s t   =   $ . d a t e p i c k e r . _ g e t I n s t ( e v e n t . t a r g e t ) , 
 	 	 	 h a n d l e d   =   t r u e , 
 	 	 	 i s R T L   =   i n s t . d p D i v . i s ( " . u i - d a t e p i c k e r - r t l " ) ; 
 
 	 	 i n s t . _ k e y E v e n t   =   t r u e ; 
 	 	 i f   ( $ . d a t e p i c k e r . _ d a t e p i c k e r S h o w i n g )   { 
 	 	 	 s w i t c h   ( e v e n t . k e y C o d e )   { 
 	 	 	 	 c a s e   9 :   $ . d a t e p i c k e r . _ h i d e D a t e p i c k e r ( ) ; 
 	 	 	 	 	 	 h a n d l e d   =   f a l s e ; 
 	 	 	 	 	 	 b r e a k ;   / /   h i d e   o n   t a b   o u t 
 	 	 	 	 c a s e   1 3 :   s e l   =   $ ( " t d . "   +   $ . d a t e p i c k e r . _ d a y O v e r C l a s s   +   " : n o t ( . "   + 
 	 	 	 	 	 	 	 	 	 $ . d a t e p i c k e r . _ c u r r e n t C l a s s   +   " ) " ,   i n s t . d p D i v ) ; 
 	 	 	 	 	 	 i f   ( s e l [ 0 ] )   { 
 	 	 	 	 	 	 	 $ . d a t e p i c k e r . _ s e l e c t D a y ( e v e n t . t a r g e t ,   i n s t . s e l e c t e d M o n t h ,   i n s t . s e l e c t e d Y e a r ,   s e l [ 0 ] ) ; 
 	 	 	 	 	 	 } 
 
 	 	 	 	 	 	 o n S e l e c t   =   $ . d a t e p i c k e r . _ g e t ( i n s t ,   " o n S e l e c t " ) ; 
 	 	 	 	 	 	 i f   ( o n S e l e c t )   { 
 	 	 	 	 	 	 	 d a t e S t r   =   $ . d a t e p i c k e r . _ f o r m a t D a t e ( i n s t ) ; 
 
 	 	 	 	 	 	 	 / /   t r i g g e r   c u s t o m   c a l l b a c k 
 	 	 	 	 	 	 	 o n S e l e c t . a p p l y ( ( i n s t . i n p u t   ?   i n s t . i n p u t [ 0 ]   :   n u l l ) ,   [ d a t e S t r ,   i n s t ] ) ; 
 	 	 	 	 	 	 }   e l s e   { 
 	 	 	 	 	 	 	 $ . d a t e p i c k e r . _ h i d e D a t e p i c k e r ( ) ; 
 	 	 	 	 	 	 } 
 
 	 	 	 	 	 	 r e t u r n   f a l s e ;   / /   d o n ' t   s u b m i t   t h e   f o r m 
 	 	 	 	 c a s e   2 7 :   $ . d a t e p i c k e r . _ h i d e D a t e p i c k e r ( ) ; 
 	 	 	 	 	 	 b r e a k ;   / /   h i d e   o n   e s c a p e 
 	 	 	 	 c a s e   3 3 :   $ . d a t e p i c k e r . _ a d j u s t D a t e ( e v e n t . t a r g e t ,   ( e v e n t . c t r l K e y   ? 
 	 	 	 	 	 	 	 - $ . d a t e p i c k e r . _ g e t ( i n s t ,   " s t e p B i g M o n t h s " )   : 
 	 	 	 	 	 	 	 - $ . d a t e p i c k e r . _ g e t ( i n s t ,   " s t e p M o n t h s " ) ) ,   " M " ) ; 
 	 	 	 	 	 	 b r e a k ;   / /   p r e v i o u s   m o n t h / y e a r   o n   p a g e   u p / +   c t r l 
 	 	 	 	 c a s e   3 4 :   $ . d a t e p i c k e r . _ a d j u s t D a t e ( e v e n t . t a r g e t ,   ( e v e n t . c t r l K e y   ? 
 	 	 	 	 	 	 	 + $ . d a t e p i c k e r . _ g e t ( i n s t ,   " s t e p B i g M o n t h s " )   : 
 	 	 	 	 	 	 	 + $ . d a t e p i c k e r . _ g e t ( i n s t ,   " s t e p M o n t h s " ) ) ,   " M " ) ; 
 	 	 	 	 	 	 b r e a k ;   / /   n e x t   m o n t h / y e a r   o n   p a g e   d o w n / +   c t r l 
 	 	 	 	 c a s e   3 5 :   i f   ( e v e n t . c t r l K e y   | |   e v e n t . m e t a K e y )   { 
 	 	 	 	 	 	 	 $ . d a t e p i c k e r . _ c l e a r D a t e ( e v e n t . t a r g e t ) ; 
 	 	 	 	 	 	 } 
 	 	 	 	 	 	 h a n d l e d   =   e v e n t . c t r l K e y   | |   e v e n t . m e t a K e y ; 
 	 	 	 	 	 	 b r e a k ;   / /   c l e a r   o n   c t r l   o r   c o m m a n d   + e n d 
 	 	 	 	 c a s e   3 6 :   i f   ( e v e n t . c t r l K e y   | |   e v e n t . m e t a K e y )   { 
 	 	 	 	 	 	 	 $ . d a t e p i c k e r . _ g o t o T o d a y ( e v e n t . t a r g e t ) ; 
 	 	 	 	 	 	 } 
 	 	 	 	 	 	 h a n d l e d   =   e v e n t . c t r l K e y   | |   e v e n t . m e t a K e y ; 
 	 	 	 	 	 	 b r e a k ;   / /   c u r r e n t   o n   c t r l   o r   c o m m a n d   + h o m e 
 	 	 	 	 c a s e   3 7 :   i f   ( e v e n t . c t r l K e y   | |   e v e n t . m e t a K e y )   { 
 	 	 	 	 	 	 	 $ . d a t e p i c k e r . _ a d j u s t D a t e ( e v e n t . t a r g e t ,   ( i s R T L   ?   + 1   :   - 1 ) ,   " D " ) ; 
 	 	 	 	 	 	 } 
 	 	 	 	 	 	 h a n d l e d   =   e v e n t . c t r l K e y   | |   e v e n t . m e t a K e y ; 
 	 	 	 	 	 	 / /   - 1   d a y   o n   c t r l   o r   c o m m a n d   + l e f t 
 	 	 	 	 	 	 i f   ( e v e n t . o r i g i n a l E v e n t . a l t K e y )   { 
 	 	 	 	 	 	 	 $ . d a t e p i c k e r . _ a d j u s t D a t e ( e v e n t . t a r g e t ,   ( e v e n t . c t r l K e y   ? 
 	 	 	 	 	 	 	 	 - $ . d a t e p i c k e r . _ g e t ( i n s t ,   " s t e p B i g M o n t h s " )   : 
 	 	 	 	 	 	 	 	 - $ . d a t e p i c k e r . _ g e t ( i n s t ,   " s t e p M o n t h s " ) ) ,   " M " ) ; 
 	 	 	 	 	 	 } 
 	 	 	 	 	 	 / /   n e x t   m o n t h / y e a r   o n   a l t   + l e f t   o n   M a c 
 	 	 	 	 	 	 b r e a k ; 
 	 	 	 	 c a s e   3 8 :   i f   ( e v e n t . c t r l K e y   | |   e v e n t . m e t a K e y )   { 
 	 	 	 	 	 	 	 $ . d a t e p i c k e r . _ a d j u s t D a t e ( e v e n t . t a r g e t ,   - 7 ,   " D " ) ; 
 	 	 	 	 	 	 } 
 	 	 	 	 	 	 h a n d l e d   =   e v e n t . c t r l K e y   | |   e v e n t . m e t a K e y ; 
 	 	 	 	 	 	 b r e a k ;   / /   - 1   w e e k   o n   c t r l   o r   c o m m a n d   + u p 
 	 	 	 	 c a s e   3 9 :   i f   ( e v e n t . c t r l K e y   | |   e v e n t . m e t a K e y )   { 
 	 	 	 	 	 	 	 $ . d a t e p i c k e r . _ a d j u s t D a t e ( e v e n t . t a r g e t ,   ( i s R T L   ?   - 1   :   + 1 ) ,   " D " ) ; 
 	 	 	 	 	 	 } 
 	 	 	 	 	 	 h a n d l e d   =   e v e n t . c t r l K e y   | |   e v e n t . m e t a K e y ; 
 	 	 	 	 	 	 / /   + 1   d a y   o n   c t r l   o r   c o m m a n d   + r i g h t 
 	 	 	 	 	 	 i f   ( e v e n t . o r i g i n a l E v e n t . a l t K e y )   { 
 	 	 	 	 	 	 	 $ . d a t e p i c k e r . _ a d j u s t D a t e ( e v e n t . t a r g e t ,   ( e v e n t . c t r l K e y   ? 
 	 	 	 	 	 	 	 	 + $ . d a t e p i c k e r . _ g e t ( i n s t ,   " s t e p B i g M o n t h s " )   : 
 	 	 	 	 	 	 	 	 + $ . d a t e p i c k e r . _ g e t ( i n s t ,   " s t e p M o n t h s " ) ) ,   " M " ) ; 
 	 	 	 	 	 	 } 
 	 	 	 	 	 	 / /   n e x t   m o n t h / y e a r   o n   a l t   + r i g h t 
 	 	 	 	 	 	 b r e a k ; 
 	 	 	 	 c a s e   4 0 :   i f   ( e v e n t . c t r l K e y   | |   e v e n t . m e t a K e y )   { 
 	 	 	 	 	 	 	 $ . d a t e p i c k e r . _ a d j u s t D a t e ( e v e n t . t a r g e t ,   + 7 ,   " D " ) ; 
 	 	 	 	 	 	 } 
 	 	 	 	 	 	 h a n d l e d   =   e v e n t . c t r l K e y   | |   e v e n t . m e t a K e y ; 
 	 	 	 	 	 	 b r e a k ;   / /   + 1   w e e k   o n   c t r l   o r   c o m m a n d   + d o w n 
 	 	 	 	 d e f a u l t :   h a n d l e d   =   f a l s e ; 
 	 	 	 } 
 	 	 }   e l s e   i f   ( e v e n t . k e y C o d e   = = =   3 6   & &   e v e n t . c t r l K e y )   {   / /   d i s p l a y   t h e   d a t e   p i c k e r   o n   c t r l + h o m e 
 	 	 	 $ . d a t e p i c k e r . _ s h o w D a t e p i c k e r ( t h i s ) ; 
 	 	 }   e l s e   { 
 	 	 	 h a n d l e d   =   f a l s e ; 
 	 	 } 
 
 	 	 i f   ( h a n d l e d )   { 
 	 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 	 	 	 e v e n t . s t o p P r o p a g a t i o n ( ) ; 
 	 	 } 
 	 } , 
 
 	 / *   F i l t e r   e n t e r e d   c h a r a c t e r s   -   b a s e d   o n   d a t e   f o r m a t .   * / 
 	 _ d o K e y P r e s s :   f u n c t i o n ( e v e n t )   { 
 	 	 v a r   c h a r s ,   c h r , 
 	 	 	 i n s t   =   $ . d a t e p i c k e r . _ g e t I n s t ( e v e n t . t a r g e t ) ; 
 
 	 	 i f   ( $ . d a t e p i c k e r . _ g e t ( i n s t ,   " c o n s t r a i n I n p u t " ) )   { 
 	 	 	 c h a r s   =   $ . d a t e p i c k e r . _ p o s s i b l e C h a r s ( $ . d a t e p i c k e r . _ g e t ( i n s t ,   " d a t e F o r m a t " ) ) ; 
 	 	 	 c h r   =   S t r i n g . f r o m C h a r C o d e ( e v e n t . c h a r C o d e   = =   n u l l   ?   e v e n t . k e y C o d e   :   e v e n t . c h a r C o d e ) ; 
 	 	 	 r e t u r n   e v e n t . c t r l K e y   | |   e v e n t . m e t a K e y   | |   ( c h r   <   "   "   | |   ! c h a r s   | |   c h a r s . i n d e x O f ( c h r )   >   - 1 ) ; 
 	 	 } 
 	 } , 
 
 	 / *   S y n c h r o n i s e   m a n u a l   e n t r y   a n d   f i e l d / a l t e r n a t e   f i e l d .   * / 
 	 _ d o K e y U p :   f u n c t i o n ( e v e n t )   { 
 	 	 v a r   d a t e , 
 	 	 	 i n s t   =   $ . d a t e p i c k e r . _ g e t I n s t ( e v e n t . t a r g e t ) ; 
 
 	 	 i f   ( i n s t . i n p u t . v a l ( )   ! = =   i n s t . l a s t V a l )   { 
 	 	 	 t r y   { 
 	 	 	 	 d a t e   =   $ . d a t e p i c k e r . p a r s e D a t e ( $ . d a t e p i c k e r . _ g e t ( i n s t ,   " d a t e F o r m a t " ) , 
 	 	 	 	 	 ( i n s t . i n p u t   ?   i n s t . i n p u t . v a l ( )   :   n u l l ) , 
 	 	 	 	 	 $ . d a t e p i c k e r . _ g e t F o r m a t C o n f i g ( i n s t ) ) ; 
 
 	 	 	 	 i f   ( d a t e )   {   / /   o n l y   i f   v a l i d 
 	 	 	 	 	 $ . d a t e p i c k e r . _ s e t D a t e F r o m F i e l d ( i n s t ) ; 
 	 	 	 	 	 $ . d a t e p i c k e r . _ u p d a t e A l t e r n a t e ( i n s t ) ; 
 	 	 	 	 	 $ . d a t e p i c k e r . _ u p d a t e D a t e p i c k e r ( i n s t ) ; 
 	 	 	 	 } 
 	 	 	 } 
 	 	 	 c a t c h   ( e r r )   { 
 	 	 	 } 
 	 	 } 
 	 	 r e t u r n   t r u e ; 
 	 } , 
 
 	 / *   P o p - u p   t h e   d a t e   p i c k e r   f o r   a   g i v e n   i n p u t   f i e l d . 
 	   *   I f   f a l s e   r e t u r n e d   f r o m   b e f o r e S h o w   e v e n t   h a n d l e r   d o   n o t   s h o w . 
 	   *   @ p a r a m     i n p u t     e l e m e n t   -   t h e   i n p u t   f i e l d   a t t a c h e d   t o   t h e   d a t e   p i c k e r   o r 
 	   * 	 	 	 	 	 e v e n t   -   i f   t r i g g e r e d   b y   f o c u s 
 	   * / 
 	 _ s h o w D a t e p i c k e r :   f u n c t i o n ( i n p u t )   { 
 	 	 i n p u t   =   i n p u t . t a r g e t   | |   i n p u t ; 
 	 	 i f   ( i n p u t . n o d e N a m e . t o L o w e r C a s e ( )   ! = =   " i n p u t " )   {   / /   f i n d   f r o m   b u t t o n / i m a g e   t r i g g e r 
 	 	 	 i n p u t   =   $ ( " i n p u t " ,   i n p u t . p a r e n t N o d e ) [ 0 ] ; 
 	 	 } 
 
 	 	 i f   ( $ . d a t e p i c k e r . _ i s D i s a b l e d D a t e p i c k e r ( i n p u t )   | |   $ . d a t e p i c k e r . _ l a s t I n p u t   = = =   i n p u t )   {   / /   a l r e a d y   h e r e 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 v a r   i n s t ,   b e f o r e S h o w ,   b e f o r e S h o w S e t t i n g s ,   i s F i x e d , 
 	 	 	 o f f s e t ,   s h o w A n i m ,   d u r a t i o n ; 
 
 	 	 i n s t   =   $ . d a t e p i c k e r . _ g e t I n s t ( i n p u t ) ; 
 	 	 i f   ( $ . d a t e p i c k e r . _ c u r I n s t   & &   $ . d a t e p i c k e r . _ c u r I n s t   ! = =   i n s t )   { 
 	 	 	 $ . d a t e p i c k e r . _ c u r I n s t . d p D i v . s t o p ( t r u e ,   t r u e ) ; 
 	 	 	 i f   (   i n s t   & &   $ . d a t e p i c k e r . _ d a t e p i c k e r S h o w i n g   )   { 
 	 	 	 	 $ . d a t e p i c k e r . _ h i d e D a t e p i c k e r (   $ . d a t e p i c k e r . _ c u r I n s t . i n p u t [ 0 ]   ) ; 
 	 	 	 } 
 	 	 } 
 
 	 	 b e f o r e S h o w   =   $ . d a t e p i c k e r . _ g e t ( i n s t ,   " b e f o r e S h o w " ) ; 
 	 	 b e f o r e S h o w S e t t i n g s   =   b e f o r e S h o w   ?   b e f o r e S h o w . a p p l y ( i n p u t ,   [ i n p u t ,   i n s t ] )   :   { } ; 
 	 	 i f ( b e f o r e S h o w S e t t i n g s   = = =   f a l s e ) { 
 	 	 	 r e t u r n ; 
 	 	 } 
 	 	 e x t e n d R e m o v e ( i n s t . s e t t i n g s ,   b e f o r e S h o w S e t t i n g s ) ; 
 
 	 	 i n s t . l a s t V a l   =   n u l l ; 
 	 	 $ . d a t e p i c k e r . _ l a s t I n p u t   =   i n p u t ; 
 	 	 $ . d a t e p i c k e r . _ s e t D a t e F r o m F i e l d ( i n s t ) ; 
 
 	 	 i f   ( $ . d a t e p i c k e r . _ i n D i a l o g )   {   / /   h i d e   c u r s o r 
 	 	 	 i n p u t . v a l u e   =   " " ; 
 	 	 } 
 	 	 i f   ( ! $ . d a t e p i c k e r . _ p o s )   {   / /   p o s i t i o n   b e l o w   i n p u t 
 	 	 	 $ . d a t e p i c k e r . _ p o s   =   $ . d a t e p i c k e r . _ f i n d P o s ( i n p u t ) ; 
 	 	 	 $ . d a t e p i c k e r . _ p o s [ 1 ]   + =   i n p u t . o f f s e t H e i g h t ;   / /   a d d   t h e   h e i g h t 
 	 	 } 
 
 	 	 i s F i x e d   =   f a l s e ; 
 	 	 $ ( i n p u t ) . p a r e n t s ( ) . e a c h ( f u n c t i o n ( )   { 
 	 	 	 i s F i x e d   | =   $ ( t h i s ) . c s s ( " p o s i t i o n " )   = = =   " f i x e d " ; 
 	 	 	 r e t u r n   ! i s F i x e d ; 
 	 	 } ) ; 
 
 	 	 o f f s e t   =   { l e f t :   $ . d a t e p i c k e r . _ p o s [ 0 ] ,   t o p :   $ . d a t e p i c k e r . _ p o s [ 1 ] } ; 
 	 	 $ . d a t e p i c k e r . _ p o s   =   n u l l ; 
 	 	 / / t o   a v o i d   f l a s h e s   o n   F i r e f o x 
 	 	 i n s t . d p D i v . e m p t y ( ) ; 
 	 	 / /   d e t e r m i n e   s i z i n g   o f f s c r e e n 
 	 	 i n s t . d p D i v . c s s ( { p o s i t i o n :   " a b s o l u t e " ,   d i s p l a y :   " b l o c k " ,   t o p :   " - 1 0 0 0 p x " } ) ; 
 	 	 $ . d a t e p i c k e r . _ u p d a t e D a t e p i c k e r ( i n s t ) ; 
 	 	 / /   f i x   w i d t h   f o r   d y n a m i c   n u m b e r   o f   d a t e   p i c k e r s 
 	 	 / /   a n d   a d j u s t   p o s i t i o n   b e f o r e   s h o w i n g 
 	 	 o f f s e t   =   $ . d a t e p i c k e r . _ c h e c k O f f s e t ( i n s t ,   o f f s e t ,   i s F i x e d ) ; 
 	 	 i n s t . d p D i v . c s s ( { p o s i t i o n :   ( $ . d a t e p i c k e r . _ i n D i a l o g   & &   $ . b l o c k U I   ? 
 	 	 	 " s t a t i c "   :   ( i s F i x e d   ?   " f i x e d "   :   " a b s o l u t e " ) ) ,   d i s p l a y :   " n o n e " , 
 	 	 	 l e f t :   o f f s e t . l e f t   +   " p x " ,   t o p :   o f f s e t . t o p   +   " p x " } ) ; 
 
 	 	 i f   ( ! i n s t . i n l i n e )   { 
 	 	 	 s h o w A n i m   =   $ . d a t e p i c k e r . _ g e t ( i n s t ,   " s h o w A n i m " ) ; 
 	 	 	 d u r a t i o n   =   $ . d a t e p i c k e r . _ g e t ( i n s t ,   " d u r a t i o n " ) ; 
 	 	 	 i n s t . d p D i v . z I n d e x ( $ ( i n p u t ) . z I n d e x ( ) + 1 ) ; 
 	 	 	 $ . d a t e p i c k e r . _ d a t e p i c k e r S h o w i n g   =   t r u e ; 
 
 	 	 	 i f   (   $ . e f f e c t s   & &   $ . e f f e c t s . e f f e c t [   s h o w A n i m   ]   )   { 
 	 	 	 	 i n s t . d p D i v . s h o w ( s h o w A n i m ,   $ . d a t e p i c k e r . _ g e t ( i n s t ,   " s h o w O p t i o n s " ) ,   d u r a t i o n ) ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 i n s t . d p D i v [ s h o w A n i m   | |   " s h o w " ] ( s h o w A n i m   ?   d u r a t i o n   :   n u l l ) ; 
 	 	 	 } 
 
 	 	 	 i f   (   $ . d a t e p i c k e r . _ s h o u l d F o c u s I n p u t (   i n s t   )   )   { 
 	 	 	 	 i n s t . i n p u t . f o c u s ( ) ; 
 	 	 	 } 
 
 	 	 	 $ . d a t e p i c k e r . _ c u r I n s t   =   i n s t ; 
 	 	 } 
 	 } , 
 
 	 / *   G e n e r a t e   t h e   d a t e   p i c k e r   c o n t e n t .   * / 
 	 _ u p d a t e D a t e p i c k e r :   f u n c t i o n ( i n s t )   { 
 	 	 t h i s . m a x R o w s   =   4 ;   / / R e s e t   t h e   m a x   n u m b e r   o f   r o w s   b e i n g   d i s p l a y e d   ( s e e   # 7 0 4 3 ) 
 	 	 i n s t A c t i v e   =   i n s t ;   / /   f o r   d e l e g a t e   h o v e r   e v e n t s 
 	 	 i n s t . d p D i v . e m p t y ( ) . a p p e n d ( t h i s . _ g e n e r a t e H T M L ( i n s t ) ) ; 
 	 	 t h i s . _ a t t a c h H a n d l e r s ( i n s t ) ; 
 	 	 i n s t . d p D i v . f i n d ( " . "   +   t h i s . _ d a y O v e r C l a s s   +   "   a " ) . m o u s e o v e r ( ) ; 
 
 	 	 v a r   o r i g y e a r s h t m l , 
 	 	 	 n u m M o n t h s   =   t h i s . _ g e t N u m b e r O f M o n t h s ( i n s t ) , 
 	 	 	 c o l s   =   n u m M o n t h s [ 1 ] , 
 	 	 	 w i d t h   =   1 7 ; 
 
 	 	 i n s t . d p D i v . r e m o v e C l a s s ( " u i - d a t e p i c k e r - m u l t i - 2   u i - d a t e p i c k e r - m u l t i - 3   u i - d a t e p i c k e r - m u l t i - 4 " ) . w i d t h ( " " ) ; 
 	 	 i f   ( c o l s   >   1 )   { 
 	 	 	 i n s t . d p D i v . a d d C l a s s ( " u i - d a t e p i c k e r - m u l t i - "   +   c o l s ) . c s s ( " w i d t h " ,   ( w i d t h   *   c o l s )   +   " e m " ) ; 
 	 	 } 
 	 	 i n s t . d p D i v [ ( n u m M o n t h s [ 0 ]   ! = =   1   | |   n u m M o n t h s [ 1 ]   ! = =   1   ?   " a d d "   :   " r e m o v e " )   + 
 	 	 	 " C l a s s " ] ( " u i - d a t e p i c k e r - m u l t i " ) ; 
 	 	 i n s t . d p D i v [ ( t h i s . _ g e t ( i n s t ,   " i s R T L " )   ?   " a d d "   :   " r e m o v e " )   + 
 	 	 	 " C l a s s " ] ( " u i - d a t e p i c k e r - r t l " ) ; 
 
 	 	 i f   ( i n s t   = = =   $ . d a t e p i c k e r . _ c u r I n s t   & &   $ . d a t e p i c k e r . _ d a t e p i c k e r S h o w i n g   & &   $ . d a t e p i c k e r . _ s h o u l d F o c u s I n p u t (   i n s t   )   )   { 
 	 	 	 i n s t . i n p u t . f o c u s ( ) ; 
 	 	 } 
 
 	 	 / /   d e f f e r e d   r e n d e r   o f   t h e   y e a r s   s e l e c t   ( t o   a v o i d   f l a s h e s   o n   F i r e f o x ) 
 	 	 i f (   i n s t . y e a r s h t m l   ) { 
 	 	 	 o r i g y e a r s h t m l   =   i n s t . y e a r s h t m l ; 
 	 	 	 s e t T i m e o u t ( f u n c t i o n ( ) { 
 	 	 	 	 / / a s s u r e   t h a t   i n s t . y e a r s h t m l   d i d n ' t   c h a n g e . 
 	 	 	 	 i f (   o r i g y e a r s h t m l   = = =   i n s t . y e a r s h t m l   & &   i n s t . y e a r s h t m l   ) { 
 	 	 	 	 	 i n s t . d p D i v . f i n d ( " s e l e c t . u i - d a t e p i c k e r - y e a r : f i r s t " ) . r e p l a c e W i t h ( i n s t . y e a r s h t m l ) ; 
 	 	 	 	 } 
 	 	 	 	 o r i g y e a r s h t m l   =   i n s t . y e a r s h t m l   =   n u l l ; 
 	 	 	 } ,   0 ) ; 
 	 	 } 
 	 } , 
 
 	 / /   # 6 6 9 4   -   d o n ' t   f o c u s   t h e   i n p u t   i f   i t ' s   a l r e a d y   f o c u s e d 
 	 / /   t h i s   b r e a k s   t h e   c h a n g e   e v e n t   i n   I E 
 	 / /   S u p p o r t :   I E   a n d   j Q u e r y   < 1 . 9 
 	 _ s h o u l d F o c u s I n p u t :   f u n c t i o n (   i n s t   )   { 
 	 	 r e t u r n   i n s t . i n p u t   & &   i n s t . i n p u t . i s (   " : v i s i b l e "   )   & &   ! i n s t . i n p u t . i s (   " : d i s a b l e d "   )   & &   ! i n s t . i n p u t . i s (   " : f o c u s "   ) ; 
 	 } , 
 
 	 / *   C h e c k   p o s i t i o n i n g   t o   r e m a i n   o n   s c r e e n .   * / 
 	 _ c h e c k O f f s e t :   f u n c t i o n ( i n s t ,   o f f s e t ,   i s F i x e d )   { 
 	 	 v a r   d p W i d t h   =   i n s t . d p D i v . o u t e r W i d t h ( ) , 
 	 	 	 d p H e i g h t   =   i n s t . d p D i v . o u t e r H e i g h t ( ) , 
 	 	 	 i n p u t W i d t h   =   i n s t . i n p u t   ?   i n s t . i n p u t . o u t e r W i d t h ( )   :   0 , 
 	 	 	 i n p u t H e i g h t   =   i n s t . i n p u t   ?   i n s t . i n p u t . o u t e r H e i g h t ( )   :   0 , 
 	 	 	 v i e w W i d t h   =   d o c u m e n t . d o c u m e n t E l e m e n t . c l i e n t W i d t h   +   ( i s F i x e d   ?   0   :   $ ( d o c u m e n t ) . s c r o l l L e f t ( ) ) , 
 	 	 	 v i e w H e i g h t   =   d o c u m e n t . d o c u m e n t E l e m e n t . c l i e n t H e i g h t   +   ( i s F i x e d   ?   0   :   $ ( d o c u m e n t ) . s c r o l l T o p ( ) ) ; 
 
 	 	 o f f s e t . l e f t   - =   ( t h i s . _ g e t ( i n s t ,   " i s R T L " )   ?   ( d p W i d t h   -   i n p u t W i d t h )   :   0 ) ; 
 	 	 o f f s e t . l e f t   - =   ( i s F i x e d   & &   o f f s e t . l e f t   = = =   i n s t . i n p u t . o f f s e t ( ) . l e f t )   ?   $ ( d o c u m e n t ) . s c r o l l L e f t ( )   :   0 ; 
 	 	 o f f s e t . t o p   - =   ( i s F i x e d   & &   o f f s e t . t o p   = = =   ( i n s t . i n p u t . o f f s e t ( ) . t o p   +   i n p u t H e i g h t ) )   ?   $ ( d o c u m e n t ) . s c r o l l T o p ( )   :   0 ; 
 
 	 	 / /   n o w   c h e c k   i f   d a t e p i c k e r   i s   s h o w i n g   o u t s i d e   w i n d o w   v i e w p o r t   -   m o v e   t o   a   b e t t e r   p l a c e   i f   s o . 
 	 	 o f f s e t . l e f t   - =   M a t h . m i n ( o f f s e t . l e f t ,   ( o f f s e t . l e f t   +   d p W i d t h   >   v i e w W i d t h   & &   v i e w W i d t h   >   d p W i d t h )   ? 
 	 	 	 M a t h . a b s ( o f f s e t . l e f t   +   d p W i d t h   -   v i e w W i d t h )   :   0 ) ; 
 	 	 o f f s e t . t o p   - =   M a t h . m i n ( o f f s e t . t o p ,   ( o f f s e t . t o p   +   d p H e i g h t   >   v i e w H e i g h t   & &   v i e w H e i g h t   >   d p H e i g h t )   ? 
 	 	 	 M a t h . a b s ( d p H e i g h t   +   i n p u t H e i g h t )   :   0 ) ; 
 
 	 	 r e t u r n   o f f s e t ; 
 	 } , 
 
 	 / *   F i n d   a n   o b j e c t ' s   p o s i t i o n   o n   t h e   s c r e e n .   * / 
 	 _ f i n d P o s :   f u n c t i o n ( o b j )   { 
 	 	 v a r   p o s i t i o n , 
 	 	 	 i n s t   =   t h i s . _ g e t I n s t ( o b j ) , 
 	 	 	 i s R T L   =   t h i s . _ g e t ( i n s t ,   " i s R T L " ) ; 
 
 	 	 w h i l e   ( o b j   & &   ( o b j . t y p e   = = =   " h i d d e n "   | |   o b j . n o d e T y p e   ! = =   1   | |   $ . e x p r . f i l t e r s . h i d d e n ( o b j ) ) )   { 
 	 	 	 o b j   =   o b j [ i s R T L   ?   " p r e v i o u s S i b l i n g "   :   " n e x t S i b l i n g " ] ; 
 	 	 } 
 
 	 	 p o s i t i o n   =   $ ( o b j ) . o f f s e t ( ) ; 
 	 	 r e t u r n   [ p o s i t i o n . l e f t ,   p o s i t i o n . t o p ] ; 
 	 } , 
 
 	 / *   H i d e   t h e   d a t e   p i c k e r   f r o m   v i e w . 
 	   *   @ p a r a m     i n p u t     e l e m e n t   -   t h e   i n p u t   f i e l d   a t t a c h e d   t o   t h e   d a t e   p i c k e r 
 	   * / 
 	 _ h i d e D a t e p i c k e r :   f u n c t i o n ( i n p u t )   { 
 	 	 v a r   s h o w A n i m ,   d u r a t i o n ,   p o s t P r o c e s s ,   o n C l o s e , 
 	 	 	 i n s t   =   t h i s . _ c u r I n s t ; 
 
 	 	 i f   ( ! i n s t   | |   ( i n p u t   & &   i n s t   ! = =   $ . d a t a ( i n p u t ,   P R O P _ N A M E ) ) )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 i f   ( t h i s . _ d a t e p i c k e r S h o w i n g )   { 
 	 	 	 s h o w A n i m   =   t h i s . _ g e t ( i n s t ,   " s h o w A n i m " ) ; 
 	 	 	 d u r a t i o n   =   t h i s . _ g e t ( i n s t ,   " d u r a t i o n " ) ; 
 	 	 	 p o s t P r o c e s s   =   f u n c t i o n ( )   { 
 	 	 	 	 $ . d a t e p i c k e r . _ t i d y D i a l o g ( i n s t ) ; 
 	 	 	 } ; 
 
 	 	 	 / /   D E P R E C A T E D :   a f t e r   B C   f o r   1 . 8 . x   $ . e f f e c t s [   s h o w A n i m   ]   i s   n o t   n e e d e d 
 	 	 	 i f   (   $ . e f f e c t s   & &   (   $ . e f f e c t s . e f f e c t [   s h o w A n i m   ]   | |   $ . e f f e c t s [   s h o w A n i m   ]   )   )   { 
 	 	 	 	 i n s t . d p D i v . h i d e ( s h o w A n i m ,   $ . d a t e p i c k e r . _ g e t ( i n s t ,   " s h o w O p t i o n s " ) ,   d u r a t i o n ,   p o s t P r o c e s s ) ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 i n s t . d p D i v [ ( s h o w A n i m   = = =   " s l i d e D o w n "   ?   " s l i d e U p "   : 
 	 	 	 	 	 ( s h o w A n i m   = = =   " f a d e I n "   ?   " f a d e O u t "   :   " h i d e " ) ) ] ( ( s h o w A n i m   ?   d u r a t i o n   :   n u l l ) ,   p o s t P r o c e s s ) ; 
 	 	 	 } 
 
 	 	 	 i f   ( ! s h o w A n i m )   { 
 	 	 	 	 p o s t P r o c e s s ( ) ; 
 	 	 	 } 
 	 	 	 t h i s . _ d a t e p i c k e r S h o w i n g   =   f a l s e ; 
 
 	 	 	 o n C l o s e   =   t h i s . _ g e t ( i n s t ,   " o n C l o s e " ) ; 
 	 	 	 i f   ( o n C l o s e )   { 
 	 	 	 	 o n C l o s e . a p p l y ( ( i n s t . i n p u t   ?   i n s t . i n p u t [ 0 ]   :   n u l l ) ,   [ ( i n s t . i n p u t   ?   i n s t . i n p u t . v a l ( )   :   " " ) ,   i n s t ] ) ; 
 	 	 	 } 
 
 	 	 	 t h i s . _ l a s t I n p u t   =   n u l l ; 
 	 	 	 i f   ( t h i s . _ i n D i a l o g )   { 
 	 	 	 	 t h i s . _ d i a l o g I n p u t . c s s ( {   p o s i t i o n :   " a b s o l u t e " ,   l e f t :   " 0 " ,   t o p :   " - 1 0 0 p x "   } ) ; 
 	 	 	 	 i f   ( $ . b l o c k U I )   { 
 	 	 	 	 	 $ . u n b l o c k U I ( ) ; 
 	 	 	 	 	 $ ( " b o d y " ) . a p p e n d ( t h i s . d p D i v ) ; 
 	 	 	 	 } 
 	 	 	 } 
 	 	 	 t h i s . _ i n D i a l o g   =   f a l s e ; 
 	 	 } 
 	 } , 
 
 	 / *   T i d y   u p   a f t e r   a   d i a l o g   d i s p l a y .   * / 
 	 _ t i d y D i a l o g :   f u n c t i o n ( i n s t )   { 
 	 	 i n s t . d p D i v . r e m o v e C l a s s ( t h i s . _ d i a l o g C l a s s ) . u n b i n d ( " . u i - d a t e p i c k e r - c a l e n d a r " ) ; 
 	 } , 
 
 	 / *   C l o s e   d a t e   p i c k e r   i f   c l i c k e d   e l s e w h e r e .   * / 
 	 _ c h e c k E x t e r n a l C l i c k :   f u n c t i o n ( e v e n t )   { 
 	 	 i f   ( ! $ . d a t e p i c k e r . _ c u r I n s t )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 v a r   $ t a r g e t   =   $ ( e v e n t . t a r g e t ) , 
 	 	 	 i n s t   =   $ . d a t e p i c k e r . _ g e t I n s t ( $ t a r g e t [ 0 ] ) ; 
 
 	 	 i f   (   (   (   $ t a r g e t [ 0 ] . i d   ! = =   $ . d a t e p i c k e r . _ m a i n D i v I d   & & 
 	 	 	 	 $ t a r g e t . p a r e n t s ( " # "   +   $ . d a t e p i c k e r . _ m a i n D i v I d ) . l e n g t h   = = =   0   & & 
 	 	 	 	 ! $ t a r g e t . h a s C l a s s ( $ . d a t e p i c k e r . m a r k e r C l a s s N a m e )   & & 
 	 	 	 	 ! $ t a r g e t . c l o s e s t ( " . "   +   $ . d a t e p i c k e r . _ t r i g g e r C l a s s ) . l e n g t h   & & 
 	 	 	 	 $ . d a t e p i c k e r . _ d a t e p i c k e r S h o w i n g   & &   ! ( $ . d a t e p i c k e r . _ i n D i a l o g   & &   $ . b l o c k U I )   )   )   | | 
 	 	 	 (   $ t a r g e t . h a s C l a s s ( $ . d a t e p i c k e r . m a r k e r C l a s s N a m e )   & &   $ . d a t e p i c k e r . _ c u r I n s t   ! = =   i n s t   )   )   { 
 	 	 	 	 $ . d a t e p i c k e r . _ h i d e D a t e p i c k e r ( ) ; 
 	 	 } 
 	 } , 
 
 	 / *   A d j u s t   o n e   o f   t h e   d a t e   s u b - f i e l d s .   * / 
 	 _ a d j u s t D a t e :   f u n c t i o n ( i d ,   o f f s e t ,   p e r i o d )   { 
 	 	 v a r   t a r g e t   =   $ ( i d ) , 
 	 	 	 i n s t   =   t h i s . _ g e t I n s t ( t a r g e t [ 0 ] ) ; 
 
 	 	 i f   ( t h i s . _ i s D i s a b l e d D a t e p i c k e r ( t a r g e t [ 0 ] ) )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 	 	 t h i s . _ a d j u s t I n s t D a t e ( i n s t ,   o f f s e t   + 
 	 	 	 ( p e r i o d   = = =   " M "   ?   t h i s . _ g e t ( i n s t ,   " s h o w C u r r e n t A t P o s " )   :   0 ) ,   / /   u n d o   p o s i t i o n i n g 
 	 	 	 p e r i o d ) ; 
 	 	 t h i s . _ u p d a t e D a t e p i c k e r ( i n s t ) ; 
 	 } , 
 
 	 / *   A c t i o n   f o r   c u r r e n t   l i n k .   * / 
 	 _ g o t o T o d a y :   f u n c t i o n ( i d )   { 
 	 	 v a r   d a t e , 
 	 	 	 t a r g e t   =   $ ( i d ) , 
 	 	 	 i n s t   =   t h i s . _ g e t I n s t ( t a r g e t [ 0 ] ) ; 
 
 	 	 i f   ( t h i s . _ g e t ( i n s t ,   " g o t o C u r r e n t " )   & &   i n s t . c u r r e n t D a y )   { 
 	 	 	 i n s t . s e l e c t e d D a y   =   i n s t . c u r r e n t D a y ; 
 	 	 	 i n s t . d r a w M o n t h   =   i n s t . s e l e c t e d M o n t h   =   i n s t . c u r r e n t M o n t h ; 
 	 	 	 i n s t . d r a w Y e a r   =   i n s t . s e l e c t e d Y e a r   =   i n s t . c u r r e n t Y e a r ; 
 	 	 }   e l s e   { 
 	 	 	 d a t e   =   n e w   D a t e ( ) ; 
 	 	 	 i n s t . s e l e c t e d D a y   =   d a t e . g e t D a t e ( ) ; 
 	 	 	 i n s t . d r a w M o n t h   =   i n s t . s e l e c t e d M o n t h   =   d a t e . g e t M o n t h ( ) ; 
 	 	 	 i n s t . d r a w Y e a r   =   i n s t . s e l e c t e d Y e a r   =   d a t e . g e t F u l l Y e a r ( ) ; 
 	 	 } 
 	 	 t h i s . _ n o t i f y C h a n g e ( i n s t ) ; 
 	 	 t h i s . _ a d j u s t D a t e ( t a r g e t ) ; 
 	 } , 
 
 	 / *   A c t i o n   f o r   s e l e c t i n g   a   n e w   m o n t h / y e a r .   * / 
 	 _ s e l e c t M o n t h Y e a r :   f u n c t i o n ( i d ,   s e l e c t ,   p e r i o d )   { 
 	 	 v a r   t a r g e t   =   $ ( i d ) , 
 	 	 	 i n s t   =   t h i s . _ g e t I n s t ( t a r g e t [ 0 ] ) ; 
 
 	 	 i n s t [ " s e l e c t e d "   +   ( p e r i o d   = = =   " M "   ?   " M o n t h "   :   " Y e a r " ) ]   = 
 	 	 i n s t [ " d r a w "   +   ( p e r i o d   = = =   " M "   ?   " M o n t h "   :   " Y e a r " ) ]   = 
 	 	 	 p a r s e I n t ( s e l e c t . o p t i o n s [ s e l e c t . s e l e c t e d I n d e x ] . v a l u e , 1 0 ) ; 
 
 	 	 t h i s . _ n o t i f y C h a n g e ( i n s t ) ; 
 	 	 t h i s . _ a d j u s t D a t e ( t a r g e t ) ; 
 	 } , 
 
 	 / *   A c t i o n   f o r   s e l e c t i n g   a   d a y .   * / 
 	 _ s e l e c t D a y :   f u n c t i o n ( i d ,   m o n t h ,   y e a r ,   t d )   { 
 	 	 v a r   i n s t , 
 	 	 	 t a r g e t   =   $ ( i d ) ; 
 
 	 	 i f   ( $ ( t d ) . h a s C l a s s ( t h i s . _ u n s e l e c t a b l e C l a s s )   | |   t h i s . _ i s D i s a b l e d D a t e p i c k e r ( t a r g e t [ 0 ] ) )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 i n s t   =   t h i s . _ g e t I n s t ( t a r g e t [ 0 ] ) ; 
 	 	 i n s t . s e l e c t e d D a y   =   i n s t . c u r r e n t D a y   =   $ ( " a " ,   t d ) . h t m l ( ) ; 
 	 	 i n s t . s e l e c t e d M o n t h   =   i n s t . c u r r e n t M o n t h   =   m o n t h ; 
 	 	 i n s t . s e l e c t e d Y e a r   =   i n s t . c u r r e n t Y e a r   =   y e a r ; 
 	 	 t h i s . _ s e l e c t D a t e ( i d ,   t h i s . _ f o r m a t D a t e ( i n s t , 
 	 	 	 i n s t . c u r r e n t D a y ,   i n s t . c u r r e n t M o n t h ,   i n s t . c u r r e n t Y e a r ) ) ; 
 	 } , 
 
 	 / *   E r a s e   t h e   i n p u t   f i e l d   a n d   h i d e   t h e   d a t e   p i c k e r .   * / 
 	 _ c l e a r D a t e :   f u n c t i o n ( i d )   { 
 	 	 v a r   t a r g e t   =   $ ( i d ) ; 
 	 	 t h i s . _ s e l e c t D a t e ( t a r g e t ,   " " ) ; 
 	 } , 
 
 	 / *   U p d a t e   t h e   i n p u t   f i e l d   w i t h   t h e   s e l e c t e d   d a t e .   * / 
 	 _ s e l e c t D a t e :   f u n c t i o n ( i d ,   d a t e S t r )   { 
 	 	 v a r   o n S e l e c t , 
 	 	 	 t a r g e t   =   $ ( i d ) , 
 	 	 	 i n s t   =   t h i s . _ g e t I n s t ( t a r g e t [ 0 ] ) ; 
 
 	 	 d a t e S t r   =   ( d a t e S t r   ! =   n u l l   ?   d a t e S t r   :   t h i s . _ f o r m a t D a t e ( i n s t ) ) ; 
 	 	 i f   ( i n s t . i n p u t )   { 
 	 	 	 i n s t . i n p u t . v a l ( d a t e S t r ) ; 
 	 	 } 
 	 	 t h i s . _ u p d a t e A l t e r n a t e ( i n s t ) ; 
 
 	 	 o n S e l e c t   =   t h i s . _ g e t ( i n s t ,   " o n S e l e c t " ) ; 
 	 	 i f   ( o n S e l e c t )   { 
 	 	 	 o n S e l e c t . a p p l y ( ( i n s t . i n p u t   ?   i n s t . i n p u t [ 0 ]   :   n u l l ) ,   [ d a t e S t r ,   i n s t ] ) ;     / /   t r i g g e r   c u s t o m   c a l l b a c k 
 	 	 }   e l s e   i f   ( i n s t . i n p u t )   { 
 	 	 	 i n s t . i n p u t . t r i g g e r ( " c h a n g e " ) ;   / /   f i r e   t h e   c h a n g e   e v e n t 
 	 	 } 
 
 	 	 i f   ( i n s t . i n l i n e ) { 
 	 	 	 t h i s . _ u p d a t e D a t e p i c k e r ( i n s t ) ; 
 	 	 }   e l s e   { 
 	 	 	 t h i s . _ h i d e D a t e p i c k e r ( ) ; 
 	 	 	 t h i s . _ l a s t I n p u t   =   i n s t . i n p u t [ 0 ] ; 
 	 	 	 i f   ( t y p e o f ( i n s t . i n p u t [ 0 ] )   ! = =   " o b j e c t " )   { 
 	 	 	 	 i n s t . i n p u t . f o c u s ( ) ;   / /   r e s t o r e   f o c u s 
 	 	 	 } 
 	 	 	 t h i s . _ l a s t I n p u t   =   n u l l ; 
 	 	 } 
 	 } , 
 
 	 / *   U p d a t e   a n y   a l t e r n a t e   f i e l d   t o   s y n c h r o n i s e   w i t h   t h e   m a i n   f i e l d .   * / 
 	 _ u p d a t e A l t e r n a t e :   f u n c t i o n ( i n s t )   { 
 	 	 v a r   a l t F o r m a t ,   d a t e ,   d a t e S t r , 
 	 	 	 a l t F i e l d   =   t h i s . _ g e t ( i n s t ,   " a l t F i e l d " ) ; 
 
 	 	 i f   ( a l t F i e l d )   {   / /   u p d a t e   a l t e r n a t e   f i e l d   t o o 
 	 	 	 a l t F o r m a t   =   t h i s . _ g e t ( i n s t ,   " a l t F o r m a t " )   | |   t h i s . _ g e t ( i n s t ,   " d a t e F o r m a t " ) ; 
 	 	 	 d a t e   =   t h i s . _ g e t D a t e ( i n s t ) ; 
 	 	 	 d a t e S t r   =   t h i s . f o r m a t D a t e ( a l t F o r m a t ,   d a t e ,   t h i s . _ g e t F o r m a t C o n f i g ( i n s t ) ) ; 
 	 	 	 $ ( a l t F i e l d ) . e a c h ( f u n c t i o n ( )   {   $ ( t h i s ) . v a l ( d a t e S t r ) ;   } ) ; 
 	 	 } 
 	 } , 
 
 	 / *   S e t   a s   b e f o r e S h o w D a y   f u n c t i o n   t o   p r e v e n t   s e l e c t i o n   o f   w e e k e n d s . 
 	   *   @ p a r a m     d a t e     D a t e   -   t h e   d a t e   t o   c u s t o m i s e 
 	   *   @ r e t u r n   [ b o o l e a n ,   s t r i n g ]   -   i s   t h i s   d a t e   s e l e c t a b l e ? ,   w h a t   i s   i t s   C S S   c l a s s ? 
 	   * / 
 	 n o W e e k e n d s :   f u n c t i o n ( d a t e )   { 
 	 	 v a r   d a y   =   d a t e . g e t D a y ( ) ; 
 	 	 r e t u r n   [ ( d a y   >   0   & &   d a y   <   6 ) ,   " " ] ; 
 	 } , 
 
 	 / *   S e t   a s   c a l c u l a t e W e e k   t o   d e t e r m i n e   t h e   w e e k   o f   t h e   y e a r   b a s e d   o n   t h e   I S O   8 6 0 1   d e f i n i t i o n . 
 	   *   @ p a r a m     d a t e     D a t e   -   t h e   d a t e   t o   g e t   t h e   w e e k   f o r 
 	   *   @ r e t u r n     n u m b e r   -   t h e   n u m b e r   o f   t h e   w e e k   w i t h i n   t h e   y e a r   t h a t   c o n t a i n s   t h i s   d a t e 
 	   * / 
 	 i s o 8 6 0 1 W e e k :   f u n c t i o n ( d a t e )   { 
 	 	 v a r   t i m e , 
 	 	 	 c h e c k D a t e   =   n e w   D a t e ( d a t e . g e t T i m e ( ) ) ; 
 
 	 	 / /   F i n d   T h u r s d a y   o f   t h i s   w e e k   s t a r t i n g   o n   M o n d a y 
 	 	 c h e c k D a t e . s e t D a t e ( c h e c k D a t e . g e t D a t e ( )   +   4   -   ( c h e c k D a t e . g e t D a y ( )   | |   7 ) ) ; 
 
 	 	 t i m e   =   c h e c k D a t e . g e t T i m e ( ) ; 
 	 	 c h e c k D a t e . s e t M o n t h ( 0 ) ;   / /   C o m p a r e   w i t h   J a n   1 
 	 	 c h e c k D a t e . s e t D a t e ( 1 ) ; 
 	 	 r e t u r n   M a t h . f l o o r ( M a t h . r o u n d ( ( t i m e   -   c h e c k D a t e )   /   8 6 4 0 0 0 0 0 )   /   7 )   +   1 ; 
 	 } , 
 
 	 / *   P a r s e   a   s t r i n g   v a l u e   i n t o   a   d a t e   o b j e c t . 
 	   *   S e e   f o r m a t D a t e   b e l o w   f o r   t h e   p o s s i b l e   f o r m a t s . 
 	   * 
 	   *   @ p a r a m     f o r m a t   s t r i n g   -   t h e   e x p e c t e d   f o r m a t   o f   t h e   d a t e 
 	   *   @ p a r a m     v a l u e   s t r i n g   -   t h e   d a t e   i n   t h e   a b o v e   f o r m a t 
 	   *   @ p a r a m     s e t t i n g s   O b j e c t   -   a t t r i b u t e s   i n c l u d e : 
 	   * 	 	 	 	 	 s h o r t Y e a r C u t o f f     n u m b e r   -   t h e   c u t o f f   y e a r   f o r   d e t e r m i n i n g   t h e   c e n t u r y   ( o p t i o n a l ) 
 	   * 	 	 	 	 	 d a y N a m e s S h o r t 	 s t r i n g [ 7 ]   -   a b b r e v i a t e d   n a m e s   o f   t h e   d a y s   f r o m   S u n d a y   ( o p t i o n a l ) 
 	   * 	 	 	 	 	 d a y N a m e s 	 	 s t r i n g [ 7 ]   -   n a m e s   o f   t h e   d a y s   f r o m   S u n d a y   ( o p t i o n a l ) 
 	   * 	 	 	 	 	 m o n t h N a m e s S h o r t   s t r i n g [ 1 2 ]   -   a b b r e v i a t e d   n a m e s   o f   t h e   m o n t h s   ( o p t i o n a l ) 
 	   * 	 	 	 	 	 m o n t h N a m e s 	 	 s t r i n g [ 1 2 ]   -   n a m e s   o f   t h e   m o n t h s   ( o p t i o n a l ) 
 	   *   @ r e t u r n     D a t e   -   t h e   e x t r a c t e d   d a t e   v a l u e   o r   n u l l   i f   v a l u e   i s   b l a n k 
 	   * / 
 	 p a r s e D a t e :   f u n c t i o n   ( f o r m a t ,   v a l u e ,   s e t t i n g s )   { 
 	 	 i f   ( f o r m a t   = =   n u l l   | |   v a l u e   = =   n u l l )   { 
 	 	 	 t h r o w   " I n v a l i d   a r g u m e n t s " ; 
 	 	 } 
 
 	 	 v a l u e   =   ( t y p e o f   v a l u e   = = =   " o b j e c t "   ?   v a l u e . t o S t r i n g ( )   :   v a l u e   +   " " ) ; 
 	 	 i f   ( v a l u e   = = =   " " )   { 
 	 	 	 r e t u r n   n u l l ; 
 	 	 } 
 
 	 	 v a r   i F o r m a t ,   d i m ,   e x t r a , 
 	 	 	 i V a l u e   =   0 , 
 	 	 	 s h o r t Y e a r C u t o f f T e m p   =   ( s e t t i n g s   ?   s e t t i n g s . s h o r t Y e a r C u t o f f   :   n u l l )   | |   t h i s . _ d e f a u l t s . s h o r t Y e a r C u t o f f , 
 	 	 	 s h o r t Y e a r C u t o f f   =   ( t y p e o f   s h o r t Y e a r C u t o f f T e m p   ! = =   " s t r i n g "   ?   s h o r t Y e a r C u t o f f T e m p   : 
 	 	 	 	 n e w   D a t e ( ) . g e t F u l l Y e a r ( )   %   1 0 0   +   p a r s e I n t ( s h o r t Y e a r C u t o f f T e m p ,   1 0 ) ) , 
 	 	 	 d a y N a m e s S h o r t   =   ( s e t t i n g s   ?   s e t t i n g s . d a y N a m e s S h o r t   :   n u l l )   | |   t h i s . _ d e f a u l t s . d a y N a m e s S h o r t , 
 	 	 	 d a y N a m e s   =   ( s e t t i n g s   ?   s e t t i n g s . d a y N a m e s   :   n u l l )   | |   t h i s . _ d e f a u l t s . d a y N a m e s , 
 	 	 	 m o n t h N a m e s S h o r t   =   ( s e t t i n g s   ?   s e t t i n g s . m o n t h N a m e s S h o r t   :   n u l l )   | |   t h i s . _ d e f a u l t s . m o n t h N a m e s S h o r t , 
 	 	 	 m o n t h N a m e s   =   ( s e t t i n g s   ?   s e t t i n g s . m o n t h N a m e s   :   n u l l )   | |   t h i s . _ d e f a u l t s . m o n t h N a m e s , 
 	 	 	 y e a r   =   - 1 , 
 	 	 	 m o n t h   =   - 1 , 
 	 	 	 d a y   =   - 1 , 
 	 	 	 d o y   =   - 1 , 
 	 	 	 l i t e r a l   =   f a l s e , 
 	 	 	 d a t e , 
 	 	 	 / /   C h e c k   w h e t h e r   a   f o r m a t   c h a r a c t e r   i s   d o u b l e d 
 	 	 	 l o o k A h e a d   =   f u n c t i o n ( m a t c h )   { 
 	 	 	 	 v a r   m a t c h e s   =   ( i F o r m a t   +   1   <   f o r m a t . l e n g t h   & &   f o r m a t . c h a r A t ( i F o r m a t   +   1 )   = = =   m a t c h ) ; 
 	 	 	 	 i f   ( m a t c h e s )   { 
 	 	 	 	 	 i F o r m a t + + ; 
 	 	 	 	 } 
 	 	 	 	 r e t u r n   m a t c h e s ; 
 	 	 	 } , 
 	 	 	 / /   E x t r a c t   a   n u m b e r   f r o m   t h e   s t r i n g   v a l u e 
 	 	 	 g e t N u m b e r   =   f u n c t i o n ( m a t c h )   { 
 	 	 	 	 v a r   i s D o u b l e d   =   l o o k A h e a d ( m a t c h ) , 
 	 	 	 	 	 s i z e   =   ( m a t c h   = = =   " @ "   ?   1 4   :   ( m a t c h   = = =   " ! "   ?   2 0   : 
 	 	 	 	 	 ( m a t c h   = = =   " y "   & &   i s D o u b l e d   ?   4   :   ( m a t c h   = = =   " o "   ?   3   :   2 ) ) ) ) , 
 	 	 	 	 	 d i g i t s   =   n e w   R e g E x p ( " ^ \ \ d { 1 , "   +   s i z e   +   " } " ) , 
 	 	 	 	 	 n u m   =   v a l u e . s u b s t r i n g ( i V a l u e ) . m a t c h ( d i g i t s ) ; 
 	 	 	 	 i f   ( ! n u m )   { 
 	 	 	 	 	 t h r o w   " M i s s i n g   n u m b e r   a t   p o s i t i o n   "   +   i V a l u e ; 
 	 	 	 	 } 
 	 	 	 	 i V a l u e   + =   n u m [ 0 ] . l e n g t h ; 
 	 	 	 	 r e t u r n   p a r s e I n t ( n u m [ 0 ] ,   1 0 ) ; 
 	 	 	 } , 
 	 	 	 / /   E x t r a c t   a   n a m e   f r o m   t h e   s t r i n g   v a l u e   a n d   c o n v e r t   t o   a n   i n d e x 
 	 	 	 g e t N a m e   =   f u n c t i o n ( m a t c h ,   s h o r t N a m e s ,   l o n g N a m e s )   { 
 	 	 	 	 v a r   i n d e x   =   - 1 , 
 	 	 	 	 	 n a m e s   =   $ . m a p ( l o o k A h e a d ( m a t c h )   ?   l o n g N a m e s   :   s h o r t N a m e s ,   f u n c t i o n   ( v ,   k )   { 
 	 	 	 	 	 	 r e t u r n   [   [ k ,   v ]   ] ; 
 	 	 	 	 	 } ) . s o r t ( f u n c t i o n   ( a ,   b )   { 
 	 	 	 	 	 	 r e t u r n   - ( a [ 1 ] . l e n g t h   -   b [ 1 ] . l e n g t h ) ; 
 	 	 	 	 	 } ) ; 
 
 	 	 	 	 $ . e a c h ( n a m e s ,   f u n c t i o n   ( i ,   p a i r )   { 
 	 	 	 	 	 v a r   n a m e   =   p a i r [ 1 ] ; 
 	 	 	 	 	 i f   ( v a l u e . s u b s t r ( i V a l u e ,   n a m e . l e n g t h ) . t o L o w e r C a s e ( )   = = =   n a m e . t o L o w e r C a s e ( ) )   { 
 	 	 	 	 	 	 i n d e x   =   p a i r [ 0 ] ; 
 	 	 	 	 	 	 i V a l u e   + =   n a m e . l e n g t h ; 
 	 	 	 	 	 	 r e t u r n   f a l s e ; 
 	 	 	 	 	 } 
 	 	 	 	 } ) ; 
 	 	 	 	 i f   ( i n d e x   ! = =   - 1 )   { 
 	 	 	 	 	 r e t u r n   i n d e x   +   1 ; 
 	 	 	 	 }   e l s e   { 
 	 	 	 	 	 t h r o w   " U n k n o w n   n a m e   a t   p o s i t i o n   "   +   i V a l u e ; 
 	 	 	 	 } 
 	 	 	 } , 
 	 	 	 / /   C o n f i r m   t h a t   a   l i t e r a l   c h a r a c t e r   m a t c h e s   t h e   s t r i n g   v a l u e 
 	 	 	 c h e c k L i t e r a l   =   f u n c t i o n ( )   { 
 	 	 	 	 i f   ( v a l u e . c h a r A t ( i V a l u e )   ! = =   f o r m a t . c h a r A t ( i F o r m a t ) )   { 
 	 	 	 	 	 t h r o w   " U n e x p e c t e d   l i t e r a l   a t   p o s i t i o n   "   +   i V a l u e ; 
 	 	 	 	 } 
 	 	 	 	 i V a l u e + + ; 
 	 	 	 } ; 
 
 	 	 f o r   ( i F o r m a t   =   0 ;   i F o r m a t   <   f o r m a t . l e n g t h ;   i F o r m a t + + )   { 
 	 	 	 i f   ( l i t e r a l )   { 
 	 	 	 	 i f   ( f o r m a t . c h a r A t ( i F o r m a t )   = = =   " ' "   & &   ! l o o k A h e a d ( " ' " ) )   { 
 	 	 	 	 	 l i t e r a l   =   f a l s e ; 
 	 	 	 	 }   e l s e   { 
 	 	 	 	 	 c h e c k L i t e r a l ( ) ; 
 	 	 	 	 } 
 	 	 	 }   e l s e   { 
 	 	 	 	 s w i t c h   ( f o r m a t . c h a r A t ( i F o r m a t ) )   { 
 	 	 	 	 	 c a s e   " d " : 
 	 	 	 	 	 	 d a y   =   g e t N u m b e r ( " d " ) ; 
 	 	 	 	 	 	 b r e a k ; 
 	 	 	 	 	 c a s e   " D " : 
 	 	 	 	 	 	 g e t N a m e ( " D " ,   d a y N a m e s S h o r t ,   d a y N a m e s ) ; 
 	 	 	 	 	 	 b r e a k ; 
 	 	 	 	 	 c a s e   " o " : 
 	 	 	 	 	 	 d o y   =   g e t N u m b e r ( " o " ) ; 
 	 	 	 	 	 	 b r e a k ; 
 	 	 	 	 	 c a s e   " m " : 
 	 	 	 	 	 	 m o n t h   =   g e t N u m b e r ( " m " ) ; 
 	 	 	 	 	 	 b r e a k ; 
 	 	 	 	 	 c a s e   " M " : 
 	 	 	 	 	 	 m o n t h   =   g e t N a m e ( " M " ,   m o n t h N a m e s S h o r t ,   m o n t h N a m e s ) ; 
 	 	 	 	 	 	 b r e a k ; 
 	 	 	 	 	 c a s e   " y " : 
 	 	 	 	 	 	 y e a r   =   g e t N u m b e r ( " y " ) ; 
 	 	 	 	 	 	 b r e a k ; 
 	 	 	 	 	 c a s e   " @ " : 
 	 	 	 	 	 	 d a t e   =   n e w   D a t e ( g e t N u m b e r ( " @ " ) ) ; 
 	 	 	 	 	 	 y e a r   =   d a t e . g e t F u l l Y e a r ( ) ; 
 	 	 	 	 	 	 m o n t h   =   d a t e . g e t M o n t h ( )   +   1 ; 
 	 	 	 	 	 	 d a y   =   d a t e . g e t D a t e ( ) ; 
 	 	 	 	 	 	 b r e a k ; 
 	 	 	 	 	 c a s e   " ! " : 
 	 	 	 	 	 	 d a t e   =   n e w   D a t e ( ( g e t N u m b e r ( " ! " )   -   t h i s . _ t i c k s T o 1 9 7 0 )   /   1 0 0 0 0 ) ; 
 	 	 	 	 	 	 y e a r   =   d a t e . g e t F u l l Y e a r ( ) ; 
 	 	 	 	 	 	 m o n t h   =   d a t e . g e t M o n t h ( )   +   1 ; 
 	 	 	 	 	 	 d a y   =   d a t e . g e t D a t e ( ) ; 
 	 	 	 	 	 	 b r e a k ; 
 	 	 	 	 	 c a s e   " ' " : 
 	 	 	 	 	 	 i f   ( l o o k A h e a d ( " ' " ) ) { 
 	 	 	 	 	 	 	 c h e c k L i t e r a l ( ) ; 
 	 	 	 	 	 	 }   e l s e   { 
 	 	 	 	 	 	 	 l i t e r a l   =   t r u e ; 
 	 	 	 	 	 	 } 
 	 	 	 	 	 	 b r e a k ; 
 	 	 	 	 	 d e f a u l t : 
 	 	 	 	 	 	 c h e c k L i t e r a l ( ) ; 
 	 	 	 	 } 
 	 	 	 } 
 	 	 } 
 
 	 	 i f   ( i V a l u e   <   v a l u e . l e n g t h ) { 
 	 	 	 e x t r a   =   v a l u e . s u b s t r ( i V a l u e ) ; 
 	 	 	 i f   ( ! / ^ \ s + / . t e s t ( e x t r a ) )   { 
 	 	 	 	 t h r o w   " E x t r a / u n p a r s e d   c h a r a c t e r s   f o u n d   i n   d a t e :   "   +   e x t r a ; 
 	 	 	 } 
 	 	 } 
 
 	 	 i f   ( y e a r   = = =   - 1 )   { 
 	 	 	 y e a r   =   n e w   D a t e ( ) . g e t F u l l Y e a r ( ) ; 
 	 	 }   e l s e   i f   ( y e a r   <   1 0 0 )   { 
 	 	 	 y e a r   + =   n e w   D a t e ( ) . g e t F u l l Y e a r ( )   -   n e w   D a t e ( ) . g e t F u l l Y e a r ( )   %   1 0 0   + 
 	 	 	 	 ( y e a r   < =   s h o r t Y e a r C u t o f f   ?   0   :   - 1 0 0 ) ; 
 	 	 } 
 
 	 	 i f   ( d o y   >   - 1 )   { 
 	 	 	 m o n t h   =   1 ; 
 	 	 	 d a y   =   d o y ; 
 	 	 	 d o   { 
 	 	 	 	 d i m   =   t h i s . _ g e t D a y s I n M o n t h ( y e a r ,   m o n t h   -   1 ) ; 
 	 	 	 	 i f   ( d a y   < =   d i m )   { 
 	 	 	 	 	 b r e a k ; 
 	 	 	 	 } 
 	 	 	 	 m o n t h + + ; 
 	 	 	 	 d a y   - =   d i m ; 
 	 	 	 }   w h i l e   ( t r u e ) ; 
 	 	 } 
 
 	 	 d a t e   =   t h i s . _ d a y l i g h t S a v i n g A d j u s t ( n e w   D a t e ( y e a r ,   m o n t h   -   1 ,   d a y ) ) ; 
 	 	 i f   ( d a t e . g e t F u l l Y e a r ( )   ! = =   y e a r   | |   d a t e . g e t M o n t h ( )   +   1   ! = =   m o n t h   | |   d a t e . g e t D a t e ( )   ! = =   d a y )   { 
 	 	 	 t h r o w   " I n v a l i d   d a t e " ;   / /   E . g .   3 1 / 0 2 / 0 0 
 	 	 } 
 	 	 r e t u r n   d a t e ; 
 	 } , 
 
 	 / *   S t a n d a r d   d a t e   f o r m a t s .   * / 
 	 A T O M :   " y y - m m - d d " ,   / /   R F C   3 3 3 9   ( I S O   8 6 0 1 ) 
 	 C O O K I E :   " D ,   d d   M   y y " , 
 	 I S O _ 8 6 0 1 :   " y y - m m - d d " , 
 	 R F C _ 8 2 2 :   " D ,   d   M   y " , 
 	 R F C _ 8 5 0 :   " D D ,   d d - M - y " , 
 	 R F C _ 1 0 3 6 :   " D ,   d   M   y " , 
 	 R F C _ 1 1 2 3 :   " D ,   d   M   y y " , 
 	 R F C _ 2 8 2 2 :   " D ,   d   M   y y " , 
 	 R S S :   " D ,   d   M   y " ,   / /   R F C   8 2 2 
 	 T I C K S :   " ! " , 
 	 T I M E S T A M P :   " @ " , 
 	 W 3 C :   " y y - m m - d d " ,   / /   I S O   8 6 0 1 
 
 	 _ t i c k s T o 1 9 7 0 :   ( ( ( 1 9 7 0   -   1 )   *   3 6 5   +   M a t h . f l o o r ( 1 9 7 0   /   4 )   -   M a t h . f l o o r ( 1 9 7 0   /   1 0 0 )   + 
 	 	 M a t h . f l o o r ( 1 9 7 0   /   4 0 0 ) )   *   2 4   *   6 0   *   6 0   *   1 0 0 0 0 0 0 0 ) , 
 
 	 / *   F o r m a t   a   d a t e   o b j e c t   i n t o   a   s t r i n g   v a l u e . 
 	   *   T h e   f o r m a t   c a n   b e   c o m b i n a t i o n s   o f   t h e   f o l l o w i n g : 
 	   *   d     -   d a y   o f   m o n t h   ( n o   l e a d i n g   z e r o ) 
 	   *   d d   -   d a y   o f   m o n t h   ( t w o   d i g i t ) 
 	   *   o     -   d a y   o f   y e a r   ( n o   l e a d i n g   z e r o s ) 
 	   *   o o   -   d a y   o f   y e a r   ( t h r e e   d i g i t ) 
 	   *   D     -   d a y   n a m e   s h o r t 
 	   *   D D   -   d a y   n a m e   l o n g 
 	   *   m     -   m o n t h   o f   y e a r   ( n o   l e a d i n g   z e r o ) 
 	   *   m m   -   m o n t h   o f   y e a r   ( t w o   d i g i t ) 
 	   *   M     -   m o n t h   n a m e   s h o r t 
 	   *   M M   -   m o n t h   n a m e   l o n g 
 	   *   y     -   y e a r   ( t w o   d i g i t ) 
 	   *   y y   -   y e a r   ( f o u r   d i g i t ) 
 	   *   @   -   U n i x   t i m e s t a m p   ( m s   s i n c e   0 1 / 0 1 / 1 9 7 0 ) 
 	   *   !   -   W i n d o w s   t i c k s   ( 1 0 0 n s   s i n c e   0 1 / 0 1 / 0 0 0 1 ) 
 	   *   " . . . "   -   l i t e r a l   t e x t 
 	   *   ' '   -   s i n g l e   q u o t e 
 	   * 
 	   *   @ p a r a m     f o r m a t   s t r i n g   -   t h e   d e s i r e d   f o r m a t   o f   t h e   d a t e 
 	   *   @ p a r a m     d a t e   D a t e   -   t h e   d a t e   v a l u e   t o   f o r m a t 
 	   *   @ p a r a m     s e t t i n g s   O b j e c t   -   a t t r i b u t e s   i n c l u d e : 
 	   * 	 	 	 	 	 d a y N a m e s S h o r t 	 s t r i n g [ 7 ]   -   a b b r e v i a t e d   n a m e s   o f   t h e   d a y s   f r o m   S u n d a y   ( o p t i o n a l ) 
 	   * 	 	 	 	 	 d a y N a m e s 	 	 s t r i n g [ 7 ]   -   n a m e s   o f   t h e   d a y s   f r o m   S u n d a y   ( o p t i o n a l ) 
 	   * 	 	 	 	 	 m o n t h N a m e s S h o r t   s t r i n g [ 1 2 ]   -   a b b r e v i a t e d   n a m e s   o f   t h e   m o n t h s   ( o p t i o n a l ) 
 	   * 	 	 	 	 	 m o n t h N a m e s 	 	 s t r i n g [ 1 2 ]   -   n a m e s   o f   t h e   m o n t h s   ( o p t i o n a l ) 
 	   *   @ r e t u r n     s t r i n g   -   t h e   d a t e   i n   t h e   a b o v e   f o r m a t 
 	   * / 
 	 f o r m a t D a t e :   f u n c t i o n   ( f o r m a t ,   d a t e ,   s e t t i n g s )   { 
 	 	 i f   ( ! d a t e )   { 
 	 	 	 r e t u r n   " " ; 
 	 	 } 
 
 	 	 v a r   i F o r m a t , 
 	 	 	 d a y N a m e s S h o r t   =   ( s e t t i n g s   ?   s e t t i n g s . d a y N a m e s S h o r t   :   n u l l )   | |   t h i s . _ d e f a u l t s . d a y N a m e s S h o r t , 
 	 	 	 d a y N a m e s   =   ( s e t t i n g s   ?   s e t t i n g s . d a y N a m e s   :   n u l l )   | |   t h i s . _ d e f a u l t s . d a y N a m e s , 
 	 	 	 m o n t h N a m e s S h o r t   =   ( s e t t i n g s   ?   s e t t i n g s . m o n t h N a m e s S h o r t   :   n u l l )   | |   t h i s . _ d e f a u l t s . m o n t h N a m e s S h o r t , 
 	 	 	 m o n t h N a m e s   =   ( s e t t i n g s   ?   s e t t i n g s . m o n t h N a m e s   :   n u l l )   | |   t h i s . _ d e f a u l t s . m o n t h N a m e s , 
 	 	 	 / /   C h e c k   w h e t h e r   a   f o r m a t   c h a r a c t e r   i s   d o u b l e d 
 	 	 	 l o o k A h e a d   =   f u n c t i o n ( m a t c h )   { 
 	 	 	 	 v a r   m a t c h e s   =   ( i F o r m a t   +   1   <   f o r m a t . l e n g t h   & &   f o r m a t . c h a r A t ( i F o r m a t   +   1 )   = = =   m a t c h ) ; 
 	 	 	 	 i f   ( m a t c h e s )   { 
 	 	 	 	 	 i F o r m a t + + ; 
 	 	 	 	 } 
 	 	 	 	 r e t u r n   m a t c h e s ; 
 	 	 	 } , 
 	 	 	 / /   F o r m a t   a   n u m b e r ,   w i t h   l e a d i n g   z e r o   i f   n e c e s s a r y 
 	 	 	 f o r m a t N u m b e r   =   f u n c t i o n ( m a t c h ,   v a l u e ,   l e n )   { 
 	 	 	 	 v a r   n u m   =   " "   +   v a l u e ; 
 	 	 	 	 i f   ( l o o k A h e a d ( m a t c h ) )   { 
 	 	 	 	 	 w h i l e   ( n u m . l e n g t h   <   l e n )   { 
 	 	 	 	 	 	 n u m   =   " 0 "   +   n u m ; 
 	 	 	 	 	 } 
 	 	 	 	 } 
 	 	 	 	 r e t u r n   n u m ; 
 	 	 	 } , 
 	 	 	 / /   F o r m a t   a   n a m e ,   s h o r t   o r   l o n g   a s   r e q u e s t e d 
 	 	 	 f o r m a t N a m e   =   f u n c t i o n ( m a t c h ,   v a l u e ,   s h o r t N a m e s ,   l o n g N a m e s )   { 
 	 	 	 	 r e t u r n   ( l o o k A h e a d ( m a t c h )   ?   l o n g N a m e s [ v a l u e ]   :   s h o r t N a m e s [ v a l u e ] ) ; 
 	 	 	 } , 
 	 	 	 o u t p u t   =   " " , 
 	 	 	 l i t e r a l   =   f a l s e ; 
 
 	 	 i f   ( d a t e )   { 
 	 	 	 f o r   ( i F o r m a t   =   0 ;   i F o r m a t   <   f o r m a t . l e n g t h ;   i F o r m a t + + )   { 
 	 	 	 	 i f   ( l i t e r a l )   { 
 	 	 	 	 	 i f   ( f o r m a t . c h a r A t ( i F o r m a t )   = = =   " ' "   & &   ! l o o k A h e a d ( " ' " ) )   { 
 	 	 	 	 	 	 l i t e r a l   =   f a l s e ; 
 	 	 	 	 	 }   e l s e   { 
 	 	 	 	 	 	 o u t p u t   + =   f o r m a t . c h a r A t ( i F o r m a t ) ; 
 	 	 	 	 	 } 
 	 	 	 	 }   e l s e   { 
 	 	 	 	 	 s w i t c h   ( f o r m a t . c h a r A t ( i F o r m a t ) )   { 
 	 	 	 	 	 	 c a s e   " d " : 
 	 	 	 	 	 	 	 o u t p u t   + =   f o r m a t N u m b e r ( " d " ,   d a t e . g e t D a t e ( ) ,   2 ) ; 
 	 	 	 	 	 	 	 b r e a k ; 
 	 	 	 	 	 	 c a s e   " D " : 
 	 	 	 	 	 	 	 o u t p u t   + =   f o r m a t N a m e ( " D " ,   d a t e . g e t D a y ( ) ,   d a y N a m e s S h o r t ,   d a y N a m e s ) ; 
 	 	 	 	 	 	 	 b r e a k ; 
 	 	 	 	 	 	 c a s e   " o " : 
 	 	 	 	 	 	 	 o u t p u t   + =   f o r m a t N u m b e r ( " o " , 
 	 	 	 	 	 	 	 	 M a t h . r o u n d ( ( n e w   D a t e ( d a t e . g e t F u l l Y e a r ( ) ,   d a t e . g e t M o n t h ( ) ,   d a t e . g e t D a t e ( ) ) . g e t T i m e ( )   -   n e w   D a t e ( d a t e . g e t F u l l Y e a r ( ) ,   0 ,   0 ) . g e t T i m e ( ) )   /   8 6 4 0 0 0 0 0 ) ,   3 ) ; 
 	 	 	 	 	 	 	 b r e a k ; 
 	 	 	 	 	 	 c a s e   " m " : 
 	 	 	 	 	 	 	 o u t p u t   + =   f o r m a t N u m b e r ( " m " ,   d a t e . g e t M o n t h ( )   +   1 ,   2 ) ; 
 	 	 	 	 	 	 	 b r e a k ; 
 	 	 	 	 	 	 c a s e   " M " : 
 	 	 	 	 	 	 	 o u t p u t   + =   f o r m a t N a m e ( " M " ,   d a t e . g e t M o n t h ( ) ,   m o n t h N a m e s S h o r t ,   m o n t h N a m e s ) ; 
 	 	 	 	 	 	 	 b r e a k ; 
 	 	 	 	 	 	 c a s e   " y " : 
 	 	 	 	 	 	 	 o u t p u t   + =   ( l o o k A h e a d ( " y " )   ?   d a t e . g e t F u l l Y e a r ( )   : 
 	 	 	 	 	 	 	 	 ( d a t e . g e t Y e a r ( )   %   1 0 0   <   1 0   ?   " 0 "   :   " " )   +   d a t e . g e t Y e a r ( )   %   1 0 0 ) ; 
 	 	 	 	 	 	 	 b r e a k ; 
 	 	 	 	 	 	 c a s e   " @ " : 
 	 	 	 	 	 	 	 o u t p u t   + =   d a t e . g e t T i m e ( ) ; 
 	 	 	 	 	 	 	 b r e a k ; 
 	 	 	 	 	 	 c a s e   " ! " : 
 	 	 	 	 	 	 	 o u t p u t   + =   d a t e . g e t T i m e ( )   *   1 0 0 0 0   +   t h i s . _ t i c k s T o 1 9 7 0 ; 
 	 	 	 	 	 	 	 b r e a k ; 
 	 	 	 	 	 	 c a s e   " ' " : 
 	 	 	 	 	 	 	 i f   ( l o o k A h e a d ( " ' " ) )   { 
 	 	 	 	 	 	 	 	 o u t p u t   + =   " ' " ; 
 	 	 	 	 	 	 	 }   e l s e   { 
 	 	 	 	 	 	 	 	 l i t e r a l   =   t r u e ; 
 	 	 	 	 	 	 	 } 
 	 	 	 	 	 	 	 b r e a k ; 
 	 	 	 	 	 	 d e f a u l t : 
 	 	 	 	 	 	 	 o u t p u t   + =   f o r m a t . c h a r A t ( i F o r m a t ) ; 
 	 	 	 	 	 } 
 	 	 	 	 } 
 	 	 	 } 
 	 	 } 
 	 	 r e t u r n   o u t p u t ; 
 	 } , 
 
 	 / *   E x t r a c t   a l l   p o s s i b l e   c h a r a c t e r s   f r o m   t h e   d a t e   f o r m a t .   * / 
 	 _ p o s s i b l e C h a r s :   f u n c t i o n   ( f o r m a t )   { 
 	 	 v a r   i F o r m a t , 
 	 	 	 c h a r s   =   " " , 
 	 	 	 l i t e r a l   =   f a l s e , 
 	 	 	 / /   C h e c k   w h e t h e r   a   f o r m a t   c h a r a c t e r   i s   d o u b l e d 
 	 	 	 l o o k A h e a d   =   f u n c t i o n ( m a t c h )   { 
 	 	 	 	 v a r   m a t c h e s   =   ( i F o r m a t   +   1   <   f o r m a t . l e n g t h   & &   f o r m a t . c h a r A t ( i F o r m a t   +   1 )   = = =   m a t c h ) ; 
 	 	 	 	 i f   ( m a t c h e s )   { 
 	 	 	 	 	 i F o r m a t + + ; 
 	 	 	 	 } 
 	 	 	 	 r e t u r n   m a t c h e s ; 
 	 	 	 } ; 
 
 	 	 f o r   ( i F o r m a t   =   0 ;   i F o r m a t   <   f o r m a t . l e n g t h ;   i F o r m a t + + )   { 
 	 	 	 i f   ( l i t e r a l )   { 
 	 	 	 	 i f   ( f o r m a t . c h a r A t ( i F o r m a t )   = = =   " ' "   & &   ! l o o k A h e a d ( " ' " ) )   { 
 	 	 	 	 	 l i t e r a l   =   f a l s e ; 
 	 	 	 	 }   e l s e   { 
 	 	 	 	 	 c h a r s   + =   f o r m a t . c h a r A t ( i F o r m a t ) ; 
 	 	 	 	 } 
 	 	 	 }   e l s e   { 
 	 	 	 	 s w i t c h   ( f o r m a t . c h a r A t ( i F o r m a t ) )   { 
 	 	 	 	 	 c a s e   " d " :   c a s e   " m " :   c a s e   " y " :   c a s e   " @ " : 
 	 	 	 	 	 	 c h a r s   + =   " 0 1 2 3 4 5 6 7 8 9 " ; 
 	 	 	 	 	 	 b r e a k ; 
 	 	 	 	 	 c a s e   " D " :   c a s e   " M " : 
 	 	 	 	 	 	 r e t u r n   n u l l ;   / /   A c c e p t   a n y t h i n g 
 	 	 	 	 	 c a s e   " ' " : 
 	 	 	 	 	 	 i f   ( l o o k A h e a d ( " ' " ) )   { 
 	 	 	 	 	 	 	 c h a r s   + =   " ' " ; 
 	 	 	 	 	 	 }   e l s e   { 
 	 	 	 	 	 	 	 l i t e r a l   =   t r u e ; 
 	 	 	 	 	 	 } 
 	 	 	 	 	 	 b r e a k ; 
 	 	 	 	 	 d e f a u l t : 
 	 	 	 	 	 	 c h a r s   + =   f o r m a t . c h a r A t ( i F o r m a t ) ; 
 	 	 	 	 } 
 	 	 	 } 
 	 	 } 
 	 	 r e t u r n   c h a r s ; 
 	 } , 
 
 	 / *   G e t   a   s e t t i n g   v a l u e ,   d e f a u l t i n g   i f   n e c e s s a r y .   * / 
 	 _ g e t :   f u n c t i o n ( i n s t ,   n a m e )   { 
 	 	 r e t u r n   i n s t . s e t t i n g s [ n a m e ]   ! = =   u n d e f i n e d   ? 
 	 	 	 i n s t . s e t t i n g s [ n a m e ]   :   t h i s . _ d e f a u l t s [ n a m e ] ; 
 	 } , 
 
 	 / *   P a r s e   e x i s t i n g   d a t e   a n d   i n i t i a l i s e   d a t e   p i c k e r .   * / 
 	 _ s e t D a t e F r o m F i e l d :   f u n c t i o n ( i n s t ,   n o D e f a u l t )   { 
 	 	 i f   ( i n s t . i n p u t . v a l ( )   = = =   i n s t . l a s t V a l )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 v a r   d a t e F o r m a t   =   t h i s . _ g e t ( i n s t ,   " d a t e F o r m a t " ) , 
 	 	 	 d a t e s   =   i n s t . l a s t V a l   =   i n s t . i n p u t   ?   i n s t . i n p u t . v a l ( )   :   n u l l , 
 	 	 	 d e f a u l t D a t e   =   t h i s . _ g e t D e f a u l t D a t e ( i n s t ) , 
 	 	 	 d a t e   =   d e f a u l t D a t e , 
 	 	 	 s e t t i n g s   =   t h i s . _ g e t F o r m a t C o n f i g ( i n s t ) ; 
 
 	 	 t r y   { 
 	 	 	 d a t e   =   t h i s . p a r s e D a t e ( d a t e F o r m a t ,   d a t e s ,   s e t t i n g s )   | |   d e f a u l t D a t e ; 
 	 	 }   c a t c h   ( e v e n t )   { 
 	 	 	 d a t e s   =   ( n o D e f a u l t   ?   " "   :   d a t e s ) ; 
 	 	 } 
 	 	 i n s t . s e l e c t e d D a y   =   d a t e . g e t D a t e ( ) ; 
 	 	 i n s t . d r a w M o n t h   =   i n s t . s e l e c t e d M o n t h   =   d a t e . g e t M o n t h ( ) ; 
 	 	 i n s t . d r a w Y e a r   =   i n s t . s e l e c t e d Y e a r   =   d a t e . g e t F u l l Y e a r ( ) ; 
 	 	 i n s t . c u r r e n t D a y   =   ( d a t e s   ?   d a t e . g e t D a t e ( )   :   0 ) ; 
 	 	 i n s t . c u r r e n t M o n t h   =   ( d a t e s   ?   d a t e . g e t M o n t h ( )   :   0 ) ; 
 	 	 i n s t . c u r r e n t Y e a r   =   ( d a t e s   ?   d a t e . g e t F u l l Y e a r ( )   :   0 ) ; 
 	 	 t h i s . _ a d j u s t I n s t D a t e ( i n s t ) ; 
 	 } , 
 
 	 / *   R e t r i e v e   t h e   d e f a u l t   d a t e   s h o w n   o n   o p e n i n g .   * / 
 	 _ g e t D e f a u l t D a t e :   f u n c t i o n ( i n s t )   { 
 	 	 r e t u r n   t h i s . _ r e s t r i c t M i n M a x ( i n s t , 
 	 	 	 t h i s . _ d e t e r m i n e D a t e ( i n s t ,   t h i s . _ g e t ( i n s t ,   " d e f a u l t D a t e " ) ,   n e w   D a t e ( ) ) ) ; 
 	 } , 
 
 	 / *   A   d a t e   m a y   b e   s p e c i f i e d   a s   a n   e x a c t   v a l u e   o r   a   r e l a t i v e   o n e .   * / 
 	 _ d e t e r m i n e D a t e :   f u n c t i o n ( i n s t ,   d a t e ,   d e f a u l t D a t e )   { 
 	 	 v a r   o f f s e t N u m e r i c   =   f u n c t i o n ( o f f s e t )   { 
 	 	 	 	 v a r   d a t e   =   n e w   D a t e ( ) ; 
 	 	 	 	 d a t e . s e t D a t e ( d a t e . g e t D a t e ( )   +   o f f s e t ) ; 
 	 	 	 	 r e t u r n   d a t e ; 
 	 	 	 } , 
 	 	 	 o f f s e t S t r i n g   =   f u n c t i o n ( o f f s e t )   { 
 	 	 	 	 t r y   { 
 	 	 	 	 	 r e t u r n   $ . d a t e p i c k e r . p a r s e D a t e ( $ . d a t e p i c k e r . _ g e t ( i n s t ,   " d a t e F o r m a t " ) , 
 	 	 	 	 	 	 o f f s e t ,   $ . d a t e p i c k e r . _ g e t F o r m a t C o n f i g ( i n s t ) ) ; 
 	 	 	 	 } 
 	 	 	 	 c a t c h   ( e )   { 
 	 	 	 	 	 / /   I g n o r e 
 	 	 	 	 } 
 
 	 	 	 	 v a r   d a t e   =   ( o f f s e t . t o L o w e r C a s e ( ) . m a t c h ( / ^ c / )   ? 
 	 	 	 	 	 $ . d a t e p i c k e r . _ g e t D a t e ( i n s t )   :   n u l l )   | |   n e w   D a t e ( ) , 
 	 	 	 	 	 y e a r   =   d a t e . g e t F u l l Y e a r ( ) , 
 	 	 	 	 	 m o n t h   =   d a t e . g e t M o n t h ( ) , 
 	 	 	 	 	 d a y   =   d a t e . g e t D a t e ( ) , 
 	 	 	 	 	 p a t t e r n   =   / ( [ + \ - ] ? [ 0 - 9 ] + ) \ s * ( d | D | w | W | m | M | y | Y ) ? / g , 
 	 	 	 	 	 m a t c h e s   =   p a t t e r n . e x e c ( o f f s e t ) ; 
 
 	 	 	 	 w h i l e   ( m a t c h e s )   { 
 	 	 	 	 	 s w i t c h   ( m a t c h e s [ 2 ]   | |   " d " )   { 
 	 	 	 	 	 	 c a s e   " d "   :   c a s e   " D "   : 
 	 	 	 	 	 	 	 d a y   + =   p a r s e I n t ( m a t c h e s [ 1 ] , 1 0 ) ;   b r e a k ; 
 	 	 	 	 	 	 c a s e   " w "   :   c a s e   " W "   : 
 	 	 	 	 	 	 	 d a y   + =   p a r s e I n t ( m a t c h e s [ 1 ] , 1 0 )   *   7 ;   b r e a k ; 
 	 	 	 	 	 	 c a s e   " m "   :   c a s e   " M "   : 
 	 	 	 	 	 	 	 m o n t h   + =   p a r s e I n t ( m a t c h e s [ 1 ] , 1 0 ) ; 
 	 	 	 	 	 	 	 d a y   =   M a t h . m i n ( d a y ,   $ . d a t e p i c k e r . _ g e t D a y s I n M o n t h ( y e a r ,   m o n t h ) ) ; 
 	 	 	 	 	 	 	 b r e a k ; 
 	 	 	 	 	 	 c a s e   " y " :   c a s e   " Y "   : 
 	 	 	 	 	 	 	 y e a r   + =   p a r s e I n t ( m a t c h e s [ 1 ] , 1 0 ) ; 
 	 	 	 	 	 	 	 d a y   =   M a t h . m i n ( d a y ,   $ . d a t e p i c k e r . _ g e t D a y s I n M o n t h ( y e a r ,   m o n t h ) ) ; 
 	 	 	 	 	 	 	 b r e a k ; 
 	 	 	 	 	 } 
 	 	 	 	 	 m a t c h e s   =   p a t t e r n . e x e c ( o f f s e t ) ; 
 	 	 	 	 } 
 	 	 	 	 r e t u r n   n e w   D a t e ( y e a r ,   m o n t h ,   d a y ) ; 
 	 	 	 } , 
 	 	 	 n e w D a t e   =   ( d a t e   = =   n u l l   | |   d a t e   = = =   " "   ?   d e f a u l t D a t e   :   ( t y p e o f   d a t e   = = =   " s t r i n g "   ?   o f f s e t S t r i n g ( d a t e )   : 
 	 	 	 	 ( t y p e o f   d a t e   = = =   " n u m b e r "   ?   ( i s N a N ( d a t e )   ?   d e f a u l t D a t e   :   o f f s e t N u m e r i c ( d a t e ) )   :   n e w   D a t e ( d a t e . g e t T i m e ( ) ) ) ) ) ; 
 
 	 	 n e w D a t e   =   ( n e w D a t e   & &   n e w D a t e . t o S t r i n g ( )   = = =   " I n v a l i d   D a t e "   ?   d e f a u l t D a t e   :   n e w D a t e ) ; 
 	 	 i f   ( n e w D a t e )   { 
 	 	 	 n e w D a t e . s e t H o u r s ( 0 ) ; 
 	 	 	 n e w D a t e . s e t M i n u t e s ( 0 ) ; 
 	 	 	 n e w D a t e . s e t S e c o n d s ( 0 ) ; 
 	 	 	 n e w D a t e . s e t M i l l i s e c o n d s ( 0 ) ; 
 	 	 } 
 	 	 r e t u r n   t h i s . _ d a y l i g h t S a v i n g A d j u s t ( n e w D a t e ) ; 
 	 } , 
 
 	 / *   H a n d l e   s w i t c h   t o / f r o m   d a y l i g h t   s a v i n g . 
 	   *   H o u r s   m a y   b e   n o n - z e r o   o n   d a y l i g h t   s a v i n g   c u t - o v e r : 
 	   *   >   1 2   w h e n   m i d n i g h t   c h a n g e o v e r ,   b u t   t h e n   c a n n o t   g e n e r a t e 
 	   *   m i d n i g h t   d a t e t i m e ,   s o   j u m p   t o   1 A M ,   o t h e r w i s e   r e s e t . 
 	   *   @ p a r a m     d a t e     ( D a t e )   t h e   d a t e   t o   c h e c k 
 	   *   @ r e t u r n     ( D a t e )   t h e   c o r r e c t e d   d a t e 
 	   * / 
 	 _ d a y l i g h t S a v i n g A d j u s t :   f u n c t i o n ( d a t e )   { 
 	 	 i f   ( ! d a t e )   { 
 	 	 	 r e t u r n   n u l l ; 
 	 	 } 
 	 	 d a t e . s e t H o u r s ( d a t e . g e t H o u r s ( )   >   1 2   ?   d a t e . g e t H o u r s ( )   +   2   :   0 ) ; 
 	 	 r e t u r n   d a t e ; 
 	 } , 
 
 	 / *   S e t   t h e   d a t e ( s )   d i r e c t l y .   * / 
 	 _ s e t D a t e :   f u n c t i o n ( i n s t ,   d a t e ,   n o C h a n g e )   { 
 	 	 v a r   c l e a r   =   ! d a t e , 
 	 	 	 o r i g M o n t h   =   i n s t . s e l e c t e d M o n t h , 
 	 	 	 o r i g Y e a r   =   i n s t . s e l e c t e d Y e a r , 
 	 	 	 n e w D a t e   =   t h i s . _ r e s t r i c t M i n M a x ( i n s t ,   t h i s . _ d e t e r m i n e D a t e ( i n s t ,   d a t e ,   n e w   D a t e ( ) ) ) ; 
 
 	 	 i n s t . s e l e c t e d D a y   =   i n s t . c u r r e n t D a y   =   n e w D a t e . g e t D a t e ( ) ; 
 	 	 i n s t . d r a w M o n t h   =   i n s t . s e l e c t e d M o n t h   =   i n s t . c u r r e n t M o n t h   =   n e w D a t e . g e t M o n t h ( ) ; 
 	 	 i n s t . d r a w Y e a r   =   i n s t . s e l e c t e d Y e a r   =   i n s t . c u r r e n t Y e a r   =   n e w D a t e . g e t F u l l Y e a r ( ) ; 
 	 	 i f   ( ( o r i g M o n t h   ! = =   i n s t . s e l e c t e d M o n t h   | |   o r i g Y e a r   ! = =   i n s t . s e l e c t e d Y e a r )   & &   ! n o C h a n g e )   { 
 	 	 	 t h i s . _ n o t i f y C h a n g e ( i n s t ) ; 
 	 	 } 
 	 	 t h i s . _ a d j u s t I n s t D a t e ( i n s t ) ; 
 	 	 i f   ( i n s t . i n p u t )   { 
 	 	 	 i n s t . i n p u t . v a l ( c l e a r   ?   " "   :   t h i s . _ f o r m a t D a t e ( i n s t ) ) ; 
 	 	 } 
 	 } , 
 
 	 / *   R e t r i e v e   t h e   d a t e ( s )   d i r e c t l y .   * / 
 	 _ g e t D a t e :   f u n c t i o n ( i n s t )   { 
 	 	 v a r   s t a r t D a t e   =   ( ! i n s t . c u r r e n t Y e a r   | |   ( i n s t . i n p u t   & &   i n s t . i n p u t . v a l ( )   = = =   " " )   ?   n u l l   : 
 	 	 	 t h i s . _ d a y l i g h t S a v i n g A d j u s t ( n e w   D a t e ( 
 	 	 	 i n s t . c u r r e n t Y e a r ,   i n s t . c u r r e n t M o n t h ,   i n s t . c u r r e n t D a y ) ) ) ; 
 	 	 	 r e t u r n   s t a r t D a t e ; 
 	 } , 
 
 	 / *   A t t a c h   t h e   o n x x x   h a n d l e r s .     T h e s e   a r e   d e c l a r e d   s t a t i c a l l y   s o 
 	   *   t h e y   w o r k   w i t h   s t a t i c   c o d e   t r a n s f o r m e r s   l i k e   C a j a . 
 	   * / 
 	 _ a t t a c h H a n d l e r s :   f u n c t i o n ( i n s t )   { 
 	 	 v a r   s t e p M o n t h s   =   t h i s . _ g e t ( i n s t ,   " s t e p M o n t h s " ) , 
 	 	 	 i d   =   " # "   +   i n s t . i d . r e p l a c e (   / \ \ \ \ / g ,   " \ \ "   ) ; 
 	 	 i n s t . d p D i v . f i n d ( " [ d a t a - h a n d l e r ] " ) . m a p ( f u n c t i o n   ( )   { 
 	 	 	 v a r   h a n d l e r   =   { 
 	 	 	 	 p r e v :   f u n c t i o n   ( )   { 
 	 	 	 	 	 $ . d a t e p i c k e r . _ a d j u s t D a t e ( i d ,   - s t e p M o n t h s ,   " M " ) ; 
 	 	 	 	 } , 
 	 	 	 	 n e x t :   f u n c t i o n   ( )   { 
 	 	 	 	 	 $ . d a t e p i c k e r . _ a d j u s t D a t e ( i d ,   + s t e p M o n t h s ,   " M " ) ; 
 	 	 	 	 } , 
 	 	 	 	 h i d e :   f u n c t i o n   ( )   { 
 	 	 	 	 	 $ . d a t e p i c k e r . _ h i d e D a t e p i c k e r ( ) ; 
 	 	 	 	 } , 
 	 	 	 	 t o d a y :   f u n c t i o n   ( )   { 
 	 	 	 	 	 $ . d a t e p i c k e r . _ g o t o T o d a y ( i d ) ; 
 	 	 	 	 } , 
 	 	 	 	 s e l e c t D a y :   f u n c t i o n   ( )   { 
 	 	 	 	 	 $ . d a t e p i c k e r . _ s e l e c t D a y ( i d ,   + t h i s . g e t A t t r i b u t e ( " d a t a - m o n t h " ) ,   + t h i s . g e t A t t r i b u t e ( " d a t a - y e a r " ) ,   t h i s ) ; 
 	 	 	 	 	 r e t u r n   f a l s e ; 
 	 	 	 	 } , 
 	 	 	 	 s e l e c t M o n t h :   f u n c t i o n   ( )   { 
 	 	 	 	 	 $ . d a t e p i c k e r . _ s e l e c t M o n t h Y e a r ( i d ,   t h i s ,   " M " ) ; 
 	 	 	 	 	 r e t u r n   f a l s e ; 
 	 	 	 	 } , 
 	 	 	 	 s e l e c t Y e a r :   f u n c t i o n   ( )   { 
 	 	 	 	 	 $ . d a t e p i c k e r . _ s e l e c t M o n t h Y e a r ( i d ,   t h i s ,   " Y " ) ; 
 	 	 	 	 	 r e t u r n   f a l s e ; 
 	 	 	 	 } 
 	 	 	 } ; 
 	 	 	 $ ( t h i s ) . b i n d ( t h i s . g e t A t t r i b u t e ( " d a t a - e v e n t " ) ,   h a n d l e r [ t h i s . g e t A t t r i b u t e ( " d a t a - h a n d l e r " ) ] ) ; 
 	 	 } ) ; 
 	 } , 
 
 	 / *   G e n e r a t e   t h e   H T M L   f o r   t h e   c u r r e n t   s t a t e   o f   t h e   d a t e   p i c k e r .   * / 
 	 _ g e n e r a t e H T M L :   f u n c t i o n ( i n s t )   { 
 	 	 v a r   m a x D r a w ,   p r e v T e x t ,   p r e v ,   n e x t T e x t ,   n e x t ,   c u r r e n t T e x t ,   g o t o D a t e , 
 	 	 	 c o n t r o l s ,   b u t t o n P a n e l ,   f i r s t D a y ,   s h o w W e e k ,   d a y N a m e s ,   d a y N a m e s M i n , 
 	 	 	 m o n t h N a m e s ,   m o n t h N a m e s S h o r t ,   b e f o r e S h o w D a y ,   s h o w O t h e r M o n t h s , 
 	 	 	 s e l e c t O t h e r M o n t h s ,   d e f a u l t D a t e ,   h t m l ,   d o w ,   r o w ,   g r o u p ,   c o l ,   s e l e c t e d D a t e , 
 	 	 	 c o r n e r C l a s s ,   c a l e n d e r ,   t h e a d ,   d a y ,   d a y s I n M o n t h ,   l e a d D a y s ,   c u r R o w s ,   n u m R o w s , 
 	 	 	 p r i n t D a t e ,   d R o w ,   t b o d y ,   d a y S e t t i n g s ,   o t h e r M o n t h ,   u n s e l e c t a b l e , 
 	 	 	 t e m p D a t e   =   n e w   D a t e ( ) , 
 	 	 	 t o d a y   =   t h i s . _ d a y l i g h t S a v i n g A d j u s t ( 
 	 	 	 	 n e w   D a t e ( t e m p D a t e . g e t F u l l Y e a r ( ) ,   t e m p D a t e . g e t M o n t h ( ) ,   t e m p D a t e . g e t D a t e ( ) ) ) ,   / /   c l e a r   t i m e 
 	 	 	 i s R T L   =   t h i s . _ g e t ( i n s t ,   " i s R T L " ) , 
 	 	 	 s h o w B u t t o n P a n e l   =   t h i s . _ g e t ( i n s t ,   " s h o w B u t t o n P a n e l " ) , 
 	 	 	 h i d e I f N o P r e v N e x t   =   t h i s . _ g e t ( i n s t ,   " h i d e I f N o P r e v N e x t " ) , 
 	 	 	 n a v i g a t i o n A s D a t e F o r m a t   =   t h i s . _ g e t ( i n s t ,   " n a v i g a t i o n A s D a t e F o r m a t " ) , 
 	 	 	 n u m M o n t h s   =   t h i s . _ g e t N u m b e r O f M o n t h s ( i n s t ) , 
 	 	 	 s h o w C u r r e n t A t P o s   =   t h i s . _ g e t ( i n s t ,   " s h o w C u r r e n t A t P o s " ) , 
 	 	 	 s t e p M o n t h s   =   t h i s . _ g e t ( i n s t ,   " s t e p M o n t h s " ) , 
 	 	 	 i s M u l t i M o n t h   =   ( n u m M o n t h s [ 0 ]   ! = =   1   | |   n u m M o n t h s [ 1 ]   ! = =   1 ) , 
 	 	 	 c u r r e n t D a t e   =   t h i s . _ d a y l i g h t S a v i n g A d j u s t ( ( ! i n s t . c u r r e n t D a y   ?   n e w   D a t e ( 9 9 9 9 ,   9 ,   9 )   : 
 	 	 	 	 n e w   D a t e ( i n s t . c u r r e n t Y e a r ,   i n s t . c u r r e n t M o n t h ,   i n s t . c u r r e n t D a y ) ) ) , 
 	 	 	 m i n D a t e   =   t h i s . _ g e t M i n M a x D a t e ( i n s t ,   " m i n " ) , 
 	 	 	 m a x D a t e   =   t h i s . _ g e t M i n M a x D a t e ( i n s t ,   " m a x " ) , 
 	 	 	 d r a w M o n t h   =   i n s t . d r a w M o n t h   -   s h o w C u r r e n t A t P o s , 
 	 	 	 d r a w Y e a r   =   i n s t . d r a w Y e a r ; 
 
 	 	 i f   ( d r a w M o n t h   <   0 )   { 
 	 	 	 d r a w M o n t h   + =   1 2 ; 
 	 	 	 d r a w Y e a r - - ; 
 	 	 } 
 	 	 i f   ( m a x D a t e )   { 
 	 	 	 m a x D r a w   =   t h i s . _ d a y l i g h t S a v i n g A d j u s t ( n e w   D a t e ( m a x D a t e . g e t F u l l Y e a r ( ) , 
 	 	 	 	 m a x D a t e . g e t M o n t h ( )   -   ( n u m M o n t h s [ 0 ]   *   n u m M o n t h s [ 1 ] )   +   1 ,   m a x D a t e . g e t D a t e ( ) ) ) ; 
 	 	 	 m a x D r a w   =   ( m i n D a t e   & &   m a x D r a w   <   m i n D a t e   ?   m i n D a t e   :   m a x D r a w ) ; 
 	 	 	 w h i l e   ( t h i s . _ d a y l i g h t S a v i n g A d j u s t ( n e w   D a t e ( d r a w Y e a r ,   d r a w M o n t h ,   1 ) )   >   m a x D r a w )   { 
 	 	 	 	 d r a w M o n t h - - ; 
 	 	 	 	 i f   ( d r a w M o n t h   <   0 )   { 
 	 	 	 	 	 d r a w M o n t h   =   1 1 ; 
 	 	 	 	 	 d r a w Y e a r - - ; 
 	 	 	 	 } 
 	 	 	 } 
 	 	 } 
 	 	 i n s t . d r a w M o n t h   =   d r a w M o n t h ; 
 	 	 i n s t . d r a w Y e a r   =   d r a w Y e a r ; 
 
 	 	 p r e v T e x t   =   t h i s . _ g e t ( i n s t ,   " p r e v T e x t " ) ; 
 	 	 p r e v T e x t   =   ( ! n a v i g a t i o n A s D a t e F o r m a t   ?   p r e v T e x t   :   t h i s . f o r m a t D a t e ( p r e v T e x t , 
 	 	 	 t h i s . _ d a y l i g h t S a v i n g A d j u s t ( n e w   D a t e ( d r a w Y e a r ,   d r a w M o n t h   -   s t e p M o n t h s ,   1 ) ) , 
 	 	 	 t h i s . _ g e t F o r m a t C o n f i g ( i n s t ) ) ) ; 
 
 	 	 p r e v   =   ( t h i s . _ c a n A d j u s t M o n t h ( i n s t ,   - 1 ,   d r a w Y e a r ,   d r a w M o n t h )   ? 
 	 	 	 " < a   c l a s s = ' u i - d a t e p i c k e r - p r e v   u i - c o r n e r - a l l '   d a t a - h a n d l e r = ' p r e v '   d a t a - e v e n t = ' c l i c k ' "   + 
 	 	 	 "   t i t l e = ' "   +   p r e v T e x t   +   " ' > < s p a n   c l a s s = ' u i - i c o n   u i - i c o n - c i r c l e - t r i a n g l e - "   +   (   i s R T L   ?   " e "   :   " w " )   +   " ' > "   +   p r e v T e x t   +   " < / s p a n > < / a > "   : 
 	 	 	 ( h i d e I f N o P r e v N e x t   ?   " "   :   " < a   c l a s s = ' u i - d a t e p i c k e r - p r e v   u i - c o r n e r - a l l   u i - s t a t e - d i s a b l e d '   t i t l e = ' " +   p r e v T e x t   + " ' > < s p a n   c l a s s = ' u i - i c o n   u i - i c o n - c i r c l e - t r i a n g l e - "   +   (   i s R T L   ?   " e "   :   " w " )   +   " ' > "   +   p r e v T e x t   +   " < / s p a n > < / a > " ) ) ; 
 
 	 	 n e x t T e x t   =   t h i s . _ g e t ( i n s t ,   " n e x t T e x t " ) ; 
 	 	 n e x t T e x t   =   ( ! n a v i g a t i o n A s D a t e F o r m a t   ?   n e x t T e x t   :   t h i s . f o r m a t D a t e ( n e x t T e x t , 
 	 	 	 t h i s . _ d a y l i g h t S a v i n g A d j u s t ( n e w   D a t e ( d r a w Y e a r ,   d r a w M o n t h   +   s t e p M o n t h s ,   1 ) ) , 
 	 	 	 t h i s . _ g e t F o r m a t C o n f i g ( i n s t ) ) ) ; 
 
 	 	 n e x t   =   ( t h i s . _ c a n A d j u s t M o n t h ( i n s t ,   + 1 ,   d r a w Y e a r ,   d r a w M o n t h )   ? 
 	 	 	 " < a   c l a s s = ' u i - d a t e p i c k e r - n e x t   u i - c o r n e r - a l l '   d a t a - h a n d l e r = ' n e x t '   d a t a - e v e n t = ' c l i c k ' "   + 
 	 	 	 "   t i t l e = ' "   +   n e x t T e x t   +   " ' > < s p a n   c l a s s = ' u i - i c o n   u i - i c o n - c i r c l e - t r i a n g l e - "   +   (   i s R T L   ?   " w "   :   " e " )   +   " ' > "   +   n e x t T e x t   +   " < / s p a n > < / a > "   : 
 	 	 	 ( h i d e I f N o P r e v N e x t   ?   " "   :   " < a   c l a s s = ' u i - d a t e p i c k e r - n e x t   u i - c o r n e r - a l l   u i - s t a t e - d i s a b l e d '   t i t l e = ' " +   n e x t T e x t   +   " ' > < s p a n   c l a s s = ' u i - i c o n   u i - i c o n - c i r c l e - t r i a n g l e - "   +   (   i s R T L   ?   " w "   :   " e " )   +   " ' > "   +   n e x t T e x t   +   " < / s p a n > < / a > " ) ) ; 
 
 	 	 c u r r e n t T e x t   =   t h i s . _ g e t ( i n s t ,   " c u r r e n t T e x t " ) ; 
 	 	 g o t o D a t e   =   ( t h i s . _ g e t ( i n s t ,   " g o t o C u r r e n t " )   & &   i n s t . c u r r e n t D a y   ?   c u r r e n t D a t e   :   t o d a y ) ; 
 	 	 c u r r e n t T e x t   =   ( ! n a v i g a t i o n A s D a t e F o r m a t   ?   c u r r e n t T e x t   : 
 	 	 	 t h i s . f o r m a t D a t e ( c u r r e n t T e x t ,   g o t o D a t e ,   t h i s . _ g e t F o r m a t C o n f i g ( i n s t ) ) ) ; 
 
 	 	 c o n t r o l s   =   ( ! i n s t . i n l i n e   ?   " < b u t t o n   t y p e = ' b u t t o n '   c l a s s = ' u i - d a t e p i c k e r - c l o s e   u i - s t a t e - d e f a u l t   u i - p r i o r i t y - p r i m a r y   u i - c o r n e r - a l l '   d a t a - h a n d l e r = ' h i d e '   d a t a - e v e n t = ' c l i c k ' > "   + 
 	 	 	 t h i s . _ g e t ( i n s t ,   " c l o s e T e x t " )   +   " < / b u t t o n > "   :   " " ) ; 
 
 	 	 b u t t o n P a n e l   =   ( s h o w B u t t o n P a n e l )   ?   " < d i v   c l a s s = ' u i - d a t e p i c k e r - b u t t o n p a n e   u i - w i d g e t - c o n t e n t ' > "   +   ( i s R T L   ?   c o n t r o l s   :   " " )   + 
 	 	 	 ( t h i s . _ i s I n R a n g e ( i n s t ,   g o t o D a t e )   ?   " < b u t t o n   t y p e = ' b u t t o n '   c l a s s = ' u i - d a t e p i c k e r - c u r r e n t   u i - s t a t e - d e f a u l t   u i - p r i o r i t y - s e c o n d a r y   u i - c o r n e r - a l l '   d a t a - h a n d l e r = ' t o d a y '   d a t a - e v e n t = ' c l i c k ' "   + 
 	 	 	 " > "   +   c u r r e n t T e x t   +   " < / b u t t o n > "   :   " " )   +   ( i s R T L   ?   " "   :   c o n t r o l s )   +   " < / d i v > "   :   " " ; 
 
 	 	 f i r s t D a y   =   p a r s e I n t ( t h i s . _ g e t ( i n s t ,   " f i r s t D a y " ) , 1 0 ) ; 
 	 	 f i r s t D a y   =   ( i s N a N ( f i r s t D a y )   ?   0   :   f i r s t D a y ) ; 
 
 	 	 s h o w W e e k   =   t h i s . _ g e t ( i n s t ,   " s h o w W e e k " ) ; 
 	 	 d a y N a m e s   =   t h i s . _ g e t ( i n s t ,   " d a y N a m e s " ) ; 
 	 	 d a y N a m e s M i n   =   t h i s . _ g e t ( i n s t ,   " d a y N a m e s M i n " ) ; 
 	 	 m o n t h N a m e s   =   t h i s . _ g e t ( i n s t ,   " m o n t h N a m e s " ) ; 
 	 	 m o n t h N a m e s S h o r t   =   t h i s . _ g e t ( i n s t ,   " m o n t h N a m e s S h o r t " ) ; 
 	 	 b e f o r e S h o w D a y   =   t h i s . _ g e t ( i n s t ,   " b e f o r e S h o w D a y " ) ; 
 	 	 s h o w O t h e r M o n t h s   =   t h i s . _ g e t ( i n s t ,   " s h o w O t h e r M o n t h s " ) ; 
 	 	 s e l e c t O t h e r M o n t h s   =   t h i s . _ g e t ( i n s t ,   " s e l e c t O t h e r M o n t h s " ) ; 
 	 	 d e f a u l t D a t e   =   t h i s . _ g e t D e f a u l t D a t e ( i n s t ) ; 
 	 	 h t m l   =   " " ; 
 	 	 d o w ; 
 	 	 f o r   ( r o w   =   0 ;   r o w   <   n u m M o n t h s [ 0 ] ;   r o w + + )   { 
 	 	 	 g r o u p   =   " " ; 
 	 	 	 t h i s . m a x R o w s   =   4 ; 
 	 	 	 f o r   ( c o l   =   0 ;   c o l   <   n u m M o n t h s [ 1 ] ;   c o l + + )   { 
 	 	 	 	 s e l e c t e d D a t e   =   t h i s . _ d a y l i g h t S a v i n g A d j u s t ( n e w   D a t e ( d r a w Y e a r ,   d r a w M o n t h ,   i n s t . s e l e c t e d D a y ) ) ; 
 	 	 	 	 c o r n e r C l a s s   =   "   u i - c o r n e r - a l l " ; 
 	 	 	 	 c a l e n d e r   =   " " ; 
 	 	 	 	 i f   ( i s M u l t i M o n t h )   { 
 	 	 	 	 	 c a l e n d e r   + =   " < d i v   c l a s s = ' u i - d a t e p i c k e r - g r o u p " ; 
 	 	 	 	 	 i f   ( n u m M o n t h s [ 1 ]   >   1 )   { 
 	 	 	 	 	 	 s w i t c h   ( c o l )   { 
 	 	 	 	 	 	 	 c a s e   0 :   c a l e n d e r   + =   "   u i - d a t e p i c k e r - g r o u p - f i r s t " ; 
 	 	 	 	 	 	 	 	 c o r n e r C l a s s   =   "   u i - c o r n e r - "   +   ( i s R T L   ?   " r i g h t "   :   " l e f t " ) ;   b r e a k ; 
 	 	 	 	 	 	 	 c a s e   n u m M o n t h s [ 1 ] - 1 :   c a l e n d e r   + =   "   u i - d a t e p i c k e r - g r o u p - l a s t " ; 
 	 	 	 	 	 	 	 	 c o r n e r C l a s s   =   "   u i - c o r n e r - "   +   ( i s R T L   ?   " l e f t "   :   " r i g h t " ) ;   b r e a k ; 
 	 	 	 	 	 	 	 d e f a u l t :   c a l e n d e r   + =   "   u i - d a t e p i c k e r - g r o u p - m i d d l e " ;   c o r n e r C l a s s   =   " " ;   b r e a k ; 
 	 	 	 	 	 	 } 
 	 	 	 	 	 } 
 	 	 	 	 	 c a l e n d e r   + =   " ' > " ; 
 	 	 	 	 } 
 	 	 	 	 c a l e n d e r   + =   " < d i v   c l a s s = ' u i - d a t e p i c k e r - h e a d e r   u i - w i d g e t - h e a d e r   u i - h e l p e r - c l e a r f i x "   +   c o r n e r C l a s s   +   " ' > "   + 
 	 	 	 	 	 ( / a l l | l e f t / . t e s t ( c o r n e r C l a s s )   & &   r o w   = = =   0   ?   ( i s R T L   ?   n e x t   :   p r e v )   :   " " )   + 
 	 	 	 	 	 ( / a l l | r i g h t / . t e s t ( c o r n e r C l a s s )   & &   r o w   = = =   0   ?   ( i s R T L   ?   p r e v   :   n e x t )   :   " " )   + 
 	 	 	 	 	 t h i s . _ g e n e r a t e M o n t h Y e a r H e a d e r ( i n s t ,   d r a w M o n t h ,   d r a w Y e a r ,   m i n D a t e ,   m a x D a t e , 
 	 	 	 	 	 r o w   >   0   | |   c o l   >   0 ,   m o n t h N a m e s ,   m o n t h N a m e s S h o r t )   +   / /   d r a w   m o n t h   h e a d e r s 
 	 	 	 	 	 " < / d i v > < t a b l e   c l a s s = ' u i - d a t e p i c k e r - c a l e n d a r ' > < t h e a d > "   + 
 	 	 	 	 	 " < t r > " ; 
 	 	 	 	 t h e a d   =   ( s h o w W e e k   ?   " < t h   c l a s s = ' u i - d a t e p i c k e r - w e e k - c o l ' > "   +   t h i s . _ g e t ( i n s t ,   " w e e k H e a d e r " )   +   " < / t h > "   :   " " ) ; 
 	 	 	 	 f o r   ( d o w   =   0 ;   d o w   <   7 ;   d o w + + )   {   / /   d a y s   o f   t h e   w e e k 
 	 	 	 	 	 d a y   =   ( d o w   +   f i r s t D a y )   %   7 ; 
 	 	 	 	 	 t h e a d   + =   " < t h "   +   ( ( d o w   +   f i r s t D a y   +   6 )   %   7   > =   5   ?   "   c l a s s = ' u i - d a t e p i c k e r - w e e k - e n d ' "   :   " " )   +   " > "   + 
 	 	 	 	 	 	 " < s p a n   t i t l e = ' "   +   d a y N a m e s [ d a y ]   +   " ' > "   +   d a y N a m e s M i n [ d a y ]   +   " < / s p a n > < / t h > " ; 
 	 	 	 	 } 
 	 	 	 	 c a l e n d e r   + =   t h e a d   +   " < / t r > < / t h e a d > < t b o d y > " ; 
 	 	 	 	 d a y s I n M o n t h   =   t h i s . _ g e t D a y s I n M o n t h ( d r a w Y e a r ,   d r a w M o n t h ) ; 
 	 	 	 	 i f   ( d r a w Y e a r   = = =   i n s t . s e l e c t e d Y e a r   & &   d r a w M o n t h   = = =   i n s t . s e l e c t e d M o n t h )   { 
 	 	 	 	 	 i n s t . s e l e c t e d D a y   =   M a t h . m i n ( i n s t . s e l e c t e d D a y ,   d a y s I n M o n t h ) ; 
 	 	 	 	 } 
 	 	 	 	 l e a d D a y s   =   ( t h i s . _ g e t F i r s t D a y O f M o n t h ( d r a w Y e a r ,   d r a w M o n t h )   -   f i r s t D a y   +   7 )   %   7 ; 
 	 	 	 	 c u r R o w s   =   M a t h . c e i l ( ( l e a d D a y s   +   d a y s I n M o n t h )   /   7 ) ;   / /   c a l c u l a t e   t h e   n u m b e r   o f   r o w s   t o   g e n e r a t e 
 	 	 	 	 n u m R o w s   =   ( i s M u l t i M o n t h   ?   t h i s . m a x R o w s   >   c u r R o w s   ?   t h i s . m a x R o w s   :   c u r R o w s   :   c u r R o w s ) ;   / / I f   m u l t i p l e   m o n t h s ,   u s e   t h e   h i g h e r   n u m b e r   o f   r o w s   ( s e e   # 7 0 4 3 ) 
 	 	 	 	 t h i s . m a x R o w s   =   n u m R o w s ; 
 	 	 	 	 p r i n t D a t e   =   t h i s . _ d a y l i g h t S a v i n g A d j u s t ( n e w   D a t e ( d r a w Y e a r ,   d r a w M o n t h ,   1   -   l e a d D a y s ) ) ; 
 	 	 	 	 f o r   ( d R o w   =   0 ;   d R o w   <   n u m R o w s ;   d R o w + + )   {   / /   c r e a t e   d a t e   p i c k e r   r o w s 
 	 	 	 	 	 c a l e n d e r   + =   " < t r > " ; 
 	 	 	 	 	 t b o d y   =   ( ! s h o w W e e k   ?   " "   :   " < t d   c l a s s = ' u i - d a t e p i c k e r - w e e k - c o l ' > "   + 
 	 	 	 	 	 	 t h i s . _ g e t ( i n s t ,   " c a l c u l a t e W e e k " ) ( p r i n t D a t e )   +   " < / t d > " ) ; 
 	 	 	 	 	 f o r   ( d o w   =   0 ;   d o w   <   7 ;   d o w + + )   {   / /   c r e a t e   d a t e   p i c k e r   d a y s 
 	 	 	 	 	 	 d a y S e t t i n g s   =   ( b e f o r e S h o w D a y   ? 
 	 	 	 	 	 	 	 b e f o r e S h o w D a y . a p p l y ( ( i n s t . i n p u t   ?   i n s t . i n p u t [ 0 ]   :   n u l l ) ,   [ p r i n t D a t e ] )   :   [ t r u e ,   " " ] ) ; 
 	 	 	 	 	 	 o t h e r M o n t h   =   ( p r i n t D a t e . g e t M o n t h ( )   ! = =   d r a w M o n t h ) ; 
 	 	 	 	 	 	 u n s e l e c t a b l e   =   ( o t h e r M o n t h   & &   ! s e l e c t O t h e r M o n t h s )   | |   ! d a y S e t t i n g s [ 0 ]   | | 
 	 	 	 	 	 	 	 ( m i n D a t e   & &   p r i n t D a t e   <   m i n D a t e )   | |   ( m a x D a t e   & &   p r i n t D a t e   >   m a x D a t e ) ; 
 	 	 	 	 	 	 t b o d y   + =   " < t d   c l a s s = ' "   + 
 	 	 	 	 	 	 	 ( ( d o w   +   f i r s t D a y   +   6 )   %   7   > =   5   ?   "   u i - d a t e p i c k e r - w e e k - e n d "   :   " " )   +   / /   h i g h l i g h t   w e e k e n d s 
 	 	 	 	 	 	 	 ( o t h e r M o n t h   ?   "   u i - d a t e p i c k e r - o t h e r - m o n t h "   :   " " )   +   / /   h i g h l i g h t   d a y s   f r o m   o t h e r   m o n t h s 
 	 	 	 	 	 	 	 ( ( p r i n t D a t e . g e t T i m e ( )   = = =   s e l e c t e d D a t e . g e t T i m e ( )   & &   d r a w M o n t h   = = =   i n s t . s e l e c t e d M o n t h   & &   i n s t . _ k e y E v e n t )   | |   / /   u s e r   p r e s s e d   k e y 
 	 	 	 	 	 	 	 ( d e f a u l t D a t e . g e t T i m e ( )   = = =   p r i n t D a t e . g e t T i m e ( )   & &   d e f a u l t D a t e . g e t T i m e ( )   = = =   s e l e c t e d D a t e . g e t T i m e ( ) )   ? 
 	 	 	 	 	 	 	 / /   o r   d e f a u l t D a t e   i s   c u r r e n t   p r i n t e d D a t e   a n d   d e f a u l t D a t e   i s   s e l e c t e d D a t e 
 	 	 	 	 	 	 	 "   "   +   t h i s . _ d a y O v e r C l a s s   :   " " )   +   / /   h i g h l i g h t   s e l e c t e d   d a y 
 	 	 	 	 	 	 	 ( u n s e l e c t a b l e   ?   "   "   +   t h i s . _ u n s e l e c t a b l e C l a s s   +   "   u i - s t a t e - d i s a b l e d " :   " " )   +     / /   h i g h l i g h t   u n s e l e c t a b l e   d a y s 
 	 	 	 	 	 	 	 ( o t h e r M o n t h   & &   ! s h o w O t h e r M o n t h s   ?   " "   :   "   "   +   d a y S e t t i n g s [ 1 ]   +   / /   h i g h l i g h t   c u s t o m   d a t e s 
 	 	 	 	 	 	 	 ( p r i n t D a t e . g e t T i m e ( )   = = =   c u r r e n t D a t e . g e t T i m e ( )   ?   "   "   +   t h i s . _ c u r r e n t C l a s s   :   " " )   +   / /   h i g h l i g h t   s e l e c t e d   d a y 
 	 	 	 	 	 	 	 ( p r i n t D a t e . g e t T i m e ( )   = = =   t o d a y . g e t T i m e ( )   ?   "   u i - d a t e p i c k e r - t o d a y "   :   " " ) )   +   " ' "   +   / /   h i g h l i g h t   t o d a y   ( i f   d i f f e r e n t ) 
 	 	 	 	 	 	 	 ( ( ! o t h e r M o n t h   | |   s h o w O t h e r M o n t h s )   & &   d a y S e t t i n g s [ 2 ]   ?   "   t i t l e = ' "   +   d a y S e t t i n g s [ 2 ] . r e p l a c e ( / ' / g ,   " & # 3 9 ; " )   +   " ' "   :   " " )   +   / /   c e l l   t i t l e 
 	 	 	 	 	 	 	 ( u n s e l e c t a b l e   ?   " "   :   "   d a t a - h a n d l e r = ' s e l e c t D a y '   d a t a - e v e n t = ' c l i c k '   d a t a - m o n t h = ' "   +   p r i n t D a t e . g e t M o n t h ( )   +   " '   d a t a - y e a r = ' "   +   p r i n t D a t e . g e t F u l l Y e a r ( )   +   " ' " )   +   " > "   +   / /   a c t i o n s 
 	 	 	 	 	 	 	 ( o t h e r M o n t h   & &   ! s h o w O t h e r M o n t h s   ?   " & # x a 0 ; "   :   / /   d i s p l a y   f o r   o t h e r   m o n t h s 
 	 	 	 	 	 	 	 ( u n s e l e c t a b l e   ?   " < s p a n   c l a s s = ' u i - s t a t e - d e f a u l t ' > "   +   p r i n t D a t e . g e t D a t e ( )   +   " < / s p a n > "   :   " < a   c l a s s = ' u i - s t a t e - d e f a u l t "   + 
 	 	 	 	 	 	 	 ( p r i n t D a t e . g e t T i m e ( )   = = =   t o d a y . g e t T i m e ( )   ?   "   u i - s t a t e - h i g h l i g h t "   :   " " )   + 
 	 	 	 	 	 	 	 ( p r i n t D a t e . g e t T i m e ( )   = = =   c u r r e n t D a t e . g e t T i m e ( )   ?   "   u i - s t a t e - a c t i v e "   :   " " )   +   / /   h i g h l i g h t   s e l e c t e d   d a y 
 	 	 	 	 	 	 	 ( o t h e r M o n t h   ?   "   u i - p r i o r i t y - s e c o n d a r y "   :   " " )   +   / /   d i s t i n g u i s h   d a t e s   f r o m   o t h e r   m o n t h s 
 	 	 	 	 	 	 	 " '   h r e f = ' # ' > "   +   p r i n t D a t e . g e t D a t e ( )   +   " < / a > " ) )   +   " < / t d > " ;   / /   d i s p l a y   s e l e c t a b l e   d a t e 
 	 	 	 	 	 	 p r i n t D a t e . s e t D a t e ( p r i n t D a t e . g e t D a t e ( )   +   1 ) ; 
 	 	 	 	 	 	 p r i n t D a t e   =   t h i s . _ d a y l i g h t S a v i n g A d j u s t ( p r i n t D a t e ) ; 
 	 	 	 	 	 } 
 	 	 	 	 	 c a l e n d e r   + =   t b o d y   +   " < / t r > " ; 
 	 	 	 	 } 
 	 	 	 	 d r a w M o n t h + + ; 
 	 	 	 	 i f   ( d r a w M o n t h   >   1 1 )   { 
 	 	 	 	 	 d r a w M o n t h   =   0 ; 
 	 	 	 	 	 d r a w Y e a r + + ; 
 	 	 	 	 } 
 	 	 	 	 c a l e n d e r   + =   " < / t b o d y > < / t a b l e > "   +   ( i s M u l t i M o n t h   ?   " < / d i v > "   + 
 	 	 	 	 	 	 	 ( ( n u m M o n t h s [ 0 ]   >   0   & &   c o l   = = =   n u m M o n t h s [ 1 ] - 1 )   ?   " < d i v   c l a s s = ' u i - d a t e p i c k e r - r o w - b r e a k ' > < / d i v > "   :   " " )   :   " " ) ; 
 	 	 	 	 g r o u p   + =   c a l e n d e r ; 
 	 	 	 } 
 	 	 	 h t m l   + =   g r o u p ; 
 	 	 } 
 	 	 h t m l   + =   b u t t o n P a n e l ; 
 	 	 i n s t . _ k e y E v e n t   =   f a l s e ; 
 	 	 r e t u r n   h t m l ; 
 	 } , 
 
 	 / *   G e n e r a t e   t h e   m o n t h   a n d   y e a r   h e a d e r .   * / 
 	 _ g e n e r a t e M o n t h Y e a r H e a d e r :   f u n c t i o n ( i n s t ,   d r a w M o n t h ,   d r a w Y e a r ,   m i n D a t e ,   m a x D a t e , 
 	 	 	 s e c o n d a r y ,   m o n t h N a m e s ,   m o n t h N a m e s S h o r t )   { 
 
 	 	 v a r   i n M i n Y e a r ,   i n M a x Y e a r ,   m o n t h ,   y e a r s ,   t h i s Y e a r ,   d e t e r m i n e Y e a r ,   y e a r ,   e n d Y e a r , 
 	 	 	 c h a n g e M o n t h   =   t h i s . _ g e t ( i n s t ,   " c h a n g e M o n t h " ) , 
 	 	 	 c h a n g e Y e a r   =   t h i s . _ g e t ( i n s t ,   " c h a n g e Y e a r " ) , 
 	 	 	 s h o w M o n t h A f t e r Y e a r   =   t h i s . _ g e t ( i n s t ,   " s h o w M o n t h A f t e r Y e a r " ) , 
 	 	 	 h t m l   =   " < d i v   c l a s s = ' u i - d a t e p i c k e r - t i t l e ' > " , 
 	 	 	 m o n t h H t m l   =   " " ; 
 
 	 	 / /   m o n t h   s e l e c t i o n 
 	 	 i f   ( s e c o n d a r y   | |   ! c h a n g e M o n t h )   { 
 	 	 	 m o n t h H t m l   + =   " < s p a n   c l a s s = ' u i - d a t e p i c k e r - m o n t h ' > "   +   m o n t h N a m e s [ d r a w M o n t h ]   +   " < / s p a n > " ; 
 	 	 }   e l s e   { 
 	 	 	 i n M i n Y e a r   =   ( m i n D a t e   & &   m i n D a t e . g e t F u l l Y e a r ( )   = = =   d r a w Y e a r ) ; 
 	 	 	 i n M a x Y e a r   =   ( m a x D a t e   & &   m a x D a t e . g e t F u l l Y e a r ( )   = = =   d r a w Y e a r ) ; 
 	 	 	 m o n t h H t m l   + =   " < s e l e c t   c l a s s = ' u i - d a t e p i c k e r - m o n t h '   d a t a - h a n d l e r = ' s e l e c t M o n t h '   d a t a - e v e n t = ' c h a n g e ' > " ; 
 	 	 	 f o r   (   m o n t h   =   0 ;   m o n t h   <   1 2 ;   m o n t h + + )   { 
 	 	 	 	 i f   ( ( ! i n M i n Y e a r   | |   m o n t h   > =   m i n D a t e . g e t M o n t h ( ) )   & &   ( ! i n M a x Y e a r   | |   m o n t h   < =   m a x D a t e . g e t M o n t h ( ) ) )   { 
 	 	 	 	 	 m o n t h H t m l   + =   " < o p t i o n   v a l u e = ' "   +   m o n t h   +   " ' "   + 
 	 	 	 	 	 	 ( m o n t h   = = =   d r a w M o n t h   ?   "   s e l e c t e d = ' s e l e c t e d ' "   :   " " )   + 
 	 	 	 	 	 	 " > "   +   m o n t h N a m e s S h o r t [ m o n t h ]   +   " < / o p t i o n > " ; 
 	 	 	 	 } 
 	 	 	 } 
 	 	 	 m o n t h H t m l   + =   " < / s e l e c t > " ; 
 	 	 } 
 
 	 	 i f   ( ! s h o w M o n t h A f t e r Y e a r )   { 
 	 	 	 h t m l   + =   m o n t h H t m l   +   ( s e c o n d a r y   | |   ! ( c h a n g e M o n t h   & &   c h a n g e Y e a r )   ?   " & # x a 0 ; "   :   " " ) ; 
 	 	 } 
 
 	 	 / /   y e a r   s e l e c t i o n 
 	 	 i f   (   ! i n s t . y e a r s h t m l   )   { 
 	 	 	 i n s t . y e a r s h t m l   =   " " ; 
 	 	 	 i f   ( s e c o n d a r y   | |   ! c h a n g e Y e a r )   { 
 	 	 	 	 h t m l   + =   " < s p a n   c l a s s = ' u i - d a t e p i c k e r - y e a r ' > "   +   d r a w Y e a r   +   " < / s p a n > " ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 / /   d e t e r m i n e   r a n g e   o f   y e a r s   t o   d i s p l a y 
 	 	 	 	 y e a r s   =   t h i s . _ g e t ( i n s t ,   " y e a r R a n g e " ) . s p l i t ( " : " ) ; 
 	 	 	 	 t h i s Y e a r   =   n e w   D a t e ( ) . g e t F u l l Y e a r ( ) ; 
 	 	 	 	 d e t e r m i n e Y e a r   =   f u n c t i o n ( v a l u e )   { 
 	 	 	 	 	 v a r   y e a r   =   ( v a l u e . m a t c h ( / c [ + \ - ] . * / )   ?   d r a w Y e a r   +   p a r s e I n t ( v a l u e . s u b s t r i n g ( 1 ) ,   1 0 )   : 
 	 	 	 	 	 	 ( v a l u e . m a t c h ( / [ + \ - ] . * / )   ?   t h i s Y e a r   +   p a r s e I n t ( v a l u e ,   1 0 )   : 
 	 	 	 	 	 	 p a r s e I n t ( v a l u e ,   1 0 ) ) ) ; 
 	 	 	 	 	 r e t u r n   ( i s N a N ( y e a r )   ?   t h i s Y e a r   :   y e a r ) ; 
 	 	 	 	 } ; 
 	 	 	 	 y e a r   =   d e t e r m i n e Y e a r ( y e a r s [ 0 ] ) ; 
 	 	 	 	 e n d Y e a r   =   M a t h . m a x ( y e a r ,   d e t e r m i n e Y e a r ( y e a r s [ 1 ]   | |   " " ) ) ; 
 	 	 	 	 y e a r   =   ( m i n D a t e   ?   M a t h . m a x ( y e a r ,   m i n D a t e . g e t F u l l Y e a r ( ) )   :   y e a r ) ; 
 	 	 	 	 e n d Y e a r   =   ( m a x D a t e   ?   M a t h . m i n ( e n d Y e a r ,   m a x D a t e . g e t F u l l Y e a r ( ) )   :   e n d Y e a r ) ; 
 	 	 	 	 i n s t . y e a r s h t m l   + =   " < s e l e c t   c l a s s = ' u i - d a t e p i c k e r - y e a r '   d a t a - h a n d l e r = ' s e l e c t Y e a r '   d a t a - e v e n t = ' c h a n g e ' > " ; 
 	 	 	 	 f o r   ( ;   y e a r   < =   e n d Y e a r ;   y e a r + + )   { 
 	 	 	 	 	 i n s t . y e a r s h t m l   + =   " < o p t i o n   v a l u e = ' "   +   y e a r   +   " ' "   + 
 	 	 	 	 	 	 ( y e a r   = = =   d r a w Y e a r   ?   "   s e l e c t e d = ' s e l e c t e d ' "   :   " " )   + 
 	 	 	 	 	 	 " > "   +   y e a r   +   " < / o p t i o n > " ; 
 	 	 	 	 } 
 	 	 	 	 i n s t . y e a r s h t m l   + =   " < / s e l e c t > " ; 
 
 	 	 	 	 h t m l   + =   i n s t . y e a r s h t m l ; 
 	 	 	 	 i n s t . y e a r s h t m l   =   n u l l ; 
 	 	 	 } 
 	 	 } 
 
 	 	 h t m l   + =   t h i s . _ g e t ( i n s t ,   " y e a r S u f f i x " ) ; 
 	 	 i f   ( s h o w M o n t h A f t e r Y e a r )   { 
 	 	 	 h t m l   + =   ( s e c o n d a r y   | |   ! ( c h a n g e M o n t h   & &   c h a n g e Y e a r )   ?   " & # x a 0 ; "   :   " " )   +   m o n t h H t m l ; 
 	 	 } 
 	 	 h t m l   + =   " < / d i v > " ;   / /   C l o s e   d a t e p i c k e r _ h e a d e r 
 	 	 r e t u r n   h t m l ; 
 	 } , 
 
 	 / *   A d j u s t   o n e   o f   t h e   d a t e   s u b - f i e l d s .   * / 
 	 _ a d j u s t I n s t D a t e :   f u n c t i o n ( i n s t ,   o f f s e t ,   p e r i o d )   { 
 	 	 v a r   y e a r   =   i n s t . d r a w Y e a r   +   ( p e r i o d   = = =   " Y "   ?   o f f s e t   :   0 ) , 
 	 	 	 m o n t h   =   i n s t . d r a w M o n t h   +   ( p e r i o d   = = =   " M "   ?   o f f s e t   :   0 ) , 
 	 	 	 d a y   =   M a t h . m i n ( i n s t . s e l e c t e d D a y ,   t h i s . _ g e t D a y s I n M o n t h ( y e a r ,   m o n t h ) )   +   ( p e r i o d   = = =   " D "   ?   o f f s e t   :   0 ) , 
 	 	 	 d a t e   =   t h i s . _ r e s t r i c t M i n M a x ( i n s t ,   t h i s . _ d a y l i g h t S a v i n g A d j u s t ( n e w   D a t e ( y e a r ,   m o n t h ,   d a y ) ) ) ; 
 
 	 	 i n s t . s e l e c t e d D a y   =   d a t e . g e t D a t e ( ) ; 
 	 	 i n s t . d r a w M o n t h   =   i n s t . s e l e c t e d M o n t h   =   d a t e . g e t M o n t h ( ) ; 
 	 	 i n s t . d r a w Y e a r   =   i n s t . s e l e c t e d Y e a r   =   d a t e . g e t F u l l Y e a r ( ) ; 
 	 	 i f   ( p e r i o d   = = =   " M "   | |   p e r i o d   = = =   " Y " )   { 
 	 	 	 t h i s . _ n o t i f y C h a n g e ( i n s t ) ; 
 	 	 } 
 	 } , 
 
 	 / *   E n s u r e   a   d a t e   i s   w i t h i n   a n y   m i n / m a x   b o u n d s .   * / 
 	 _ r e s t r i c t M i n M a x :   f u n c t i o n ( i n s t ,   d a t e )   { 
 	 	 v a r   m i n D a t e   =   t h i s . _ g e t M i n M a x D a t e ( i n s t ,   " m i n " ) , 
 	 	 	 m a x D a t e   =   t h i s . _ g e t M i n M a x D a t e ( i n s t ,   " m a x " ) , 
 	 	 	 n e w D a t e   =   ( m i n D a t e   & &   d a t e   <   m i n D a t e   ?   m i n D a t e   :   d a t e ) ; 
 	 	 r e t u r n   ( m a x D a t e   & &   n e w D a t e   >   m a x D a t e   ?   m a x D a t e   :   n e w D a t e ) ; 
 	 } , 
 
 	 / *   N o t i f y   c h a n g e   o f   m o n t h / y e a r .   * / 
 	 _ n o t i f y C h a n g e :   f u n c t i o n ( i n s t )   { 
 	 	 v a r   o n C h a n g e   =   t h i s . _ g e t ( i n s t ,   " o n C h a n g e M o n t h Y e a r " ) ; 
 	 	 i f   ( o n C h a n g e )   { 
 	 	 	 o n C h a n g e . a p p l y ( ( i n s t . i n p u t   ?   i n s t . i n p u t [ 0 ]   :   n u l l ) , 
 	 	 	 	 [ i n s t . s e l e c t e d Y e a r ,   i n s t . s e l e c t e d M o n t h   +   1 ,   i n s t ] ) ; 
 	 	 } 
 	 } , 
 
 	 / *   D e t e r m i n e   t h e   n u m b e r   o f   m o n t h s   t o   s h o w .   * / 
 	 _ g e t N u m b e r O f M o n t h s :   f u n c t i o n ( i n s t )   { 
 	 	 v a r   n u m M o n t h s   =   t h i s . _ g e t ( i n s t ,   " n u m b e r O f M o n t h s " ) ; 
 	 	 r e t u r n   ( n u m M o n t h s   = =   n u l l   ?   [ 1 ,   1 ]   :   ( t y p e o f   n u m M o n t h s   = = =   " n u m b e r "   ?   [ 1 ,   n u m M o n t h s ]   :   n u m M o n t h s ) ) ; 
 	 } , 
 
 	 / *   D e t e r m i n e   t h e   c u r r e n t   m a x i m u m   d a t e   -   e n s u r e   n o   t i m e   c o m p o n e n t s   a r e   s e t .   * / 
 	 _ g e t M i n M a x D a t e :   f u n c t i o n ( i n s t ,   m i n M a x )   { 
 	 	 r e t u r n   t h i s . _ d e t e r m i n e D a t e ( i n s t ,   t h i s . _ g e t ( i n s t ,   m i n M a x   +   " D a t e " ) ,   n u l l ) ; 
 	 } , 
 
 	 / *   F i n d   t h e   n u m b e r   o f   d a y s   i n   a   g i v e n   m o n t h .   * / 
 	 _ g e t D a y s I n M o n t h :   f u n c t i o n ( y e a r ,   m o n t h )   { 
 	 	 r e t u r n   3 2   -   t h i s . _ d a y l i g h t S a v i n g A d j u s t ( n e w   D a t e ( y e a r ,   m o n t h ,   3 2 ) ) . g e t D a t e ( ) ; 
 	 } , 
 
 	 / *   F i n d   t h e   d a y   o f   t h e   w e e k   o f   t h e   f i r s t   o f   a   m o n t h .   * / 
 	 _ g e t F i r s t D a y O f M o n t h :   f u n c t i o n ( y e a r ,   m o n t h )   { 
 	 	 r e t u r n   n e w   D a t e ( y e a r ,   m o n t h ,   1 ) . g e t D a y ( ) ; 
 	 } , 
 
 	 / *   D e t e r m i n e s   i f   w e   s h o u l d   a l l o w   a   " n e x t / p r e v "   m o n t h   d i s p l a y   c h a n g e .   * / 
 	 _ c a n A d j u s t M o n t h :   f u n c t i o n ( i n s t ,   o f f s e t ,   c u r Y e a r ,   c u r M o n t h )   { 
 	 	 v a r   n u m M o n t h s   =   t h i s . _ g e t N u m b e r O f M o n t h s ( i n s t ) , 
 	 	 	 d a t e   =   t h i s . _ d a y l i g h t S a v i n g A d j u s t ( n e w   D a t e ( c u r Y e a r , 
 	 	 	 c u r M o n t h   +   ( o f f s e t   <   0   ?   o f f s e t   :   n u m M o n t h s [ 0 ]   *   n u m M o n t h s [ 1 ] ) ,   1 ) ) ; 
 
 	 	 i f   ( o f f s e t   <   0 )   { 
 	 	 	 d a t e . s e t D a t e ( t h i s . _ g e t D a y s I n M o n t h ( d a t e . g e t F u l l Y e a r ( ) ,   d a t e . g e t M o n t h ( ) ) ) ; 
 	 	 } 
 	 	 r e t u r n   t h i s . _ i s I n R a n g e ( i n s t ,   d a t e ) ; 
 	 } , 
 
 	 / *   I s   t h e   g i v e n   d a t e   i n   t h e   a c c e p t e d   r a n g e ?   * / 
 	 _ i s I n R a n g e :   f u n c t i o n ( i n s t ,   d a t e )   { 
 	 	 v a r   y e a r S p l i t ,   c u r r e n t Y e a r , 
 	 	 	 m i n D a t e   =   t h i s . _ g e t M i n M a x D a t e ( i n s t ,   " m i n " ) , 
 	 	 	 m a x D a t e   =   t h i s . _ g e t M i n M a x D a t e ( i n s t ,   " m a x " ) , 
 	 	 	 m i n Y e a r   =   n u l l , 
 	 	 	 m a x Y e a r   =   n u l l , 
 	 	 	 y e a r s   =   t h i s . _ g e t ( i n s t ,   " y e a r R a n g e " ) ; 
 	 	 	 i f   ( y e a r s ) { 
 	 	 	 	 y e a r S p l i t   =   y e a r s . s p l i t ( " : " ) ; 
 	 	 	 	 c u r r e n t Y e a r   =   n e w   D a t e ( ) . g e t F u l l Y e a r ( ) ; 
 	 	 	 	 m i n Y e a r   =   p a r s e I n t ( y e a r S p l i t [ 0 ] ,   1 0 ) ; 
 	 	 	 	 m a x Y e a r   =   p a r s e I n t ( y e a r S p l i t [ 1 ] ,   1 0 ) ; 
 	 	 	 	 i f   (   y e a r S p l i t [ 0 ] . m a t c h ( / [ + \ - ] . * / )   )   { 
 	 	 	 	 	 m i n Y e a r   + =   c u r r e n t Y e a r ; 
 	 	 	 	 } 
 	 	 	 	 i f   (   y e a r S p l i t [ 1 ] . m a t c h ( / [ + \ - ] . * / )   )   { 
 	 	 	 	 	 m a x Y e a r   + =   c u r r e n t Y e a r ; 
 	 	 	 	 } 
 	 	 	 } 
 
 	 	 r e t u r n   ( ( ! m i n D a t e   | |   d a t e . g e t T i m e ( )   > =   m i n D a t e . g e t T i m e ( ) )   & & 
 	 	 	 ( ! m a x D a t e   | |   d a t e . g e t T i m e ( )   < =   m a x D a t e . g e t T i m e ( ) )   & & 
 	 	 	 ( ! m i n Y e a r   | |   d a t e . g e t F u l l Y e a r ( )   > =   m i n Y e a r )   & & 
 	 	 	 ( ! m a x Y e a r   | |   d a t e . g e t F u l l Y e a r ( )   < =   m a x Y e a r ) ) ; 
 	 } , 
 
 	 / *   P r o v i d e   t h e   c o n f i g u r a t i o n   s e t t i n g s   f o r   f o r m a t t i n g / p a r s i n g .   * / 
 	 _ g e t F o r m a t C o n f i g :   f u n c t i o n ( i n s t )   { 
 	 	 v a r   s h o r t Y e a r C u t o f f   =   t h i s . _ g e t ( i n s t ,   " s h o r t Y e a r C u t o f f " ) ; 
 	 	 s h o r t Y e a r C u t o f f   =   ( t y p e o f   s h o r t Y e a r C u t o f f   ! = =   " s t r i n g "   ?   s h o r t Y e a r C u t o f f   : 
 	 	 	 n e w   D a t e ( ) . g e t F u l l Y e a r ( )   %   1 0 0   +   p a r s e I n t ( s h o r t Y e a r C u t o f f ,   1 0 ) ) ; 
 	 	 r e t u r n   { s h o r t Y e a r C u t o f f :   s h o r t Y e a r C u t o f f , 
 	 	 	 d a y N a m e s S h o r t :   t h i s . _ g e t ( i n s t ,   " d a y N a m e s S h o r t " ) ,   d a y N a m e s :   t h i s . _ g e t ( i n s t ,   " d a y N a m e s " ) , 
 	 	 	 m o n t h N a m e s S h o r t :   t h i s . _ g e t ( i n s t ,   " m o n t h N a m e s S h o r t " ) ,   m o n t h N a m e s :   t h i s . _ g e t ( i n s t ,   " m o n t h N a m e s " ) } ; 
 	 } , 
 
 	 / *   F o r m a t   t h e   g i v e n   d a t e   f o r   d i s p l a y .   * / 
 	 _ f o r m a t D a t e :   f u n c t i o n ( i n s t ,   d a y ,   m o n t h ,   y e a r )   { 
 	 	 i f   ( ! d a y )   { 
 	 	 	 i n s t . c u r r e n t D a y   =   i n s t . s e l e c t e d D a y ; 
 	 	 	 i n s t . c u r r e n t M o n t h   =   i n s t . s e l e c t e d M o n t h ; 
 	 	 	 i n s t . c u r r e n t Y e a r   =   i n s t . s e l e c t e d Y e a r ; 
 	 	 } 
 	 	 v a r   d a t e   =   ( d a y   ?   ( t y p e o f   d a y   = = =   " o b j e c t "   ?   d a y   : 
 	 	 	 t h i s . _ d a y l i g h t S a v i n g A d j u s t ( n e w   D a t e ( y e a r ,   m o n t h ,   d a y ) ) )   : 
 	 	 	 t h i s . _ d a y l i g h t S a v i n g A d j u s t ( n e w   D a t e ( i n s t . c u r r e n t Y e a r ,   i n s t . c u r r e n t M o n t h ,   i n s t . c u r r e n t D a y ) ) ) ; 
 	 	 r e t u r n   t h i s . f o r m a t D a t e ( t h i s . _ g e t ( i n s t ,   " d a t e F o r m a t " ) ,   d a t e ,   t h i s . _ g e t F o r m a t C o n f i g ( i n s t ) ) ; 
 	 } 
 } ) ; 
 
 / * 
   *   B i n d   h o v e r   e v e n t s   f o r   d a t e p i c k e r   e l e m e n t s . 
   *   D o n e   v i a   d e l e g a t e   s o   t h e   b i n d i n g   o n l y   o c c u r s   o n c e   i n   t h e   l i f e t i m e   o f   t h e   p a r e n t   d i v . 
   *   G l o b a l   i n s t A c t i v e ,   s e t   b y   _ u p d a t e D a t e p i c k e r   a l l o w s   t h e   h a n d l e r s   t o   f i n d   t h e i r   w a y   b a c k   t o   t h e   a c t i v e   p i c k e r . 
   * / 
 f u n c t i o n   b i n d H o v e r ( d p D i v )   { 
 	 v a r   s e l e c t o r   =   " b u t t o n ,   . u i - d a t e p i c k e r - p r e v ,   . u i - d a t e p i c k e r - n e x t ,   . u i - d a t e p i c k e r - c a l e n d a r   t d   a " ; 
 	 r e t u r n   d p D i v . d e l e g a t e ( s e l e c t o r ,   " m o u s e o u t " ,   f u n c t i o n ( )   { 
 	 	 	 $ ( t h i s ) . r e m o v e C l a s s ( " u i - s t a t e - h o v e r " ) ; 
 	 	 	 i f   ( t h i s . c l a s s N a m e . i n d e x O f ( " u i - d a t e p i c k e r - p r e v " )   ! = =   - 1 )   { 
 	 	 	 	 $ ( t h i s ) . r e m o v e C l a s s ( " u i - d a t e p i c k e r - p r e v - h o v e r " ) ; 
 	 	 	 } 
 	 	 	 i f   ( t h i s . c l a s s N a m e . i n d e x O f ( " u i - d a t e p i c k e r - n e x t " )   ! = =   - 1 )   { 
 	 	 	 	 $ ( t h i s ) . r e m o v e C l a s s ( " u i - d a t e p i c k e r - n e x t - h o v e r " ) ; 
 	 	 	 } 
 	 	 } ) 
 	 	 . d e l e g a t e ( s e l e c t o r ,   " m o u s e o v e r " ,   f u n c t i o n ( ) { 
 	 	 	 i f   ( ! $ . d a t e p i c k e r . _ i s D i s a b l e d D a t e p i c k e r (   i n s t A c t i v e . i n l i n e   ?   d p D i v . p a r e n t ( ) [ 0 ]   :   i n s t A c t i v e . i n p u t [ 0 ] ) )   { 
 	 	 	 	 $ ( t h i s ) . p a r e n t s ( " . u i - d a t e p i c k e r - c a l e n d a r " ) . f i n d ( " a " ) . r e m o v e C l a s s ( " u i - s t a t e - h o v e r " ) ; 
 	 	 	 	 $ ( t h i s ) . a d d C l a s s ( " u i - s t a t e - h o v e r " ) ; 
 	 	 	 	 i f   ( t h i s . c l a s s N a m e . i n d e x O f ( " u i - d a t e p i c k e r - p r e v " )   ! = =   - 1 )   { 
 	 	 	 	 	 $ ( t h i s ) . a d d C l a s s ( " u i - d a t e p i c k e r - p r e v - h o v e r " ) ; 
 	 	 	 	 } 
 	 	 	 	 i f   ( t h i s . c l a s s N a m e . i n d e x O f ( " u i - d a t e p i c k e r - n e x t " )   ! = =   - 1 )   { 
 	 	 	 	 	 $ ( t h i s ) . a d d C l a s s ( " u i - d a t e p i c k e r - n e x t - h o v e r " ) ; 
 	 	 	 	 } 
 	 	 	 } 
 	 	 } ) ; 
 } 
 
 / *   j Q u e r y   e x t e n d   n o w   i g n o r e s   n u l l s !   * / 
 f u n c t i o n   e x t e n d R e m o v e ( t a r g e t ,   p r o p s )   { 
 	 $ . e x t e n d ( t a r g e t ,   p r o p s ) ; 
 	 f o r   ( v a r   n a m e   i n   p r o p s )   { 
 	 	 i f   ( p r o p s [ n a m e ]   = =   n u l l )   { 
 	 	 	 t a r g e t [ n a m e ]   =   p r o p s [ n a m e ] ; 
 	 	 } 
 	 } 
 	 r e t u r n   t a r g e t ; 
 } 
 
 / *   I n v o k e   t h e   d a t e p i c k e r   f u n c t i o n a l i t y . 
       @ p a r a m     o p t i o n s     s t r i n g   -   a   c o m m a n d ,   o p t i o n a l l y   f o l l o w e d   b y   a d d i t i o n a l   p a r a m e t e r s   o r 
 	 	 	 	 	 O b j e c t   -   s e t t i n g s   f o r   a t t a c h i n g   n e w   d a t e p i c k e r   f u n c t i o n a l i t y 
       @ r e t u r n     j Q u e r y   o b j e c t   * / 
 $ . f n . d a t e p i c k e r   =   f u n c t i o n ( o p t i o n s ) { 
 
 	 / *   V e r i f y   a n   e m p t y   c o l l e c t i o n   w a s n ' t   p a s s e d   -   F i x e s   # 6 9 7 6   * / 
 	 i f   (   ! t h i s . l e n g t h   )   { 
 	 	 r e t u r n   t h i s ; 
 	 } 
 
 	 / *   I n i t i a l i s e   t h e   d a t e   p i c k e r .   * / 
 	 i f   ( ! $ . d a t e p i c k e r . i n i t i a l i z e d )   { 
 	 	 $ ( d o c u m e n t ) . m o u s e d o w n ( $ . d a t e p i c k e r . _ c h e c k E x t e r n a l C l i c k ) ; 
 	 	 $ . d a t e p i c k e r . i n i t i a l i z e d   =   t r u e ; 
 	 } 
 
 	 / *   A p p e n d   d a t e p i c k e r   m a i n   c o n t a i n e r   t o   b o d y   i f   n o t   e x i s t .   * / 
 	 i f   ( $ ( " # " + $ . d a t e p i c k e r . _ m a i n D i v I d ) . l e n g t h   = = =   0 )   { 
 	 	 $ ( " b o d y " ) . a p p e n d ( $ . d a t e p i c k e r . d p D i v ) ; 
 	 } 
 
 	 v a r   o t h e r A r g s   =   A r r a y . p r o t o t y p e . s l i c e . c a l l ( a r g u m e n t s ,   1 ) ; 
 	 i f   ( t y p e o f   o p t i o n s   = = =   " s t r i n g "   & &   ( o p t i o n s   = = =   " i s D i s a b l e d "   | |   o p t i o n s   = = =   " g e t D a t e "   | |   o p t i o n s   = = =   " w i d g e t " ) )   { 
 	 	 r e t u r n   $ . d a t e p i c k e r [ " _ "   +   o p t i o n s   +   " D a t e p i c k e r " ] . 
 	 	 	 a p p l y ( $ . d a t e p i c k e r ,   [ t h i s [ 0 ] ] . c o n c a t ( o t h e r A r g s ) ) ; 
 	 } 
 	 i f   ( o p t i o n s   = = =   " o p t i o n "   & &   a r g u m e n t s . l e n g t h   = = =   2   & &   t y p e o f   a r g u m e n t s [ 1 ]   = = =   " s t r i n g " )   { 
 	 	 r e t u r n   $ . d a t e p i c k e r [ " _ "   +   o p t i o n s   +   " D a t e p i c k e r " ] . 
 	 	 	 a p p l y ( $ . d a t e p i c k e r ,   [ t h i s [ 0 ] ] . c o n c a t ( o t h e r A r g s ) ) ; 
 	 } 
 	 r e t u r n   t h i s . e a c h ( f u n c t i o n ( )   { 
 	 	 t y p e o f   o p t i o n s   = = =   " s t r i n g "   ? 
 	 	 	 $ . d a t e p i c k e r [ " _ "   +   o p t i o n s   +   " D a t e p i c k e r " ] . 
 	 	 	 	 a p p l y ( $ . d a t e p i c k e r ,   [ t h i s ] . c o n c a t ( o t h e r A r g s ) )   : 
 	 	 	 $ . d a t e p i c k e r . _ a t t a c h D a t e p i c k e r ( t h i s ,   o p t i o n s ) ; 
 	 } ) ; 
 } ; 
 
 $ . d a t e p i c k e r   =   n e w   D a t e p i c k e r ( ) ;   / /   s i n g l e t o n   i n s t a n c e 
 $ . d a t e p i c k e r . i n i t i a l i z e d   =   f a l s e ; 
 $ . d a t e p i c k e r . u u i d   =   n e w   D a t e ( ) . g e t T i m e ( ) ; 
 $ . d a t e p i c k e r . v e r s i o n   =   " 1 . 1 0 . 3 " ; 
 
 } ) ( j Q u e r y ) ; 
 
 ( f u n c t i o n (   $ ,   u n d e f i n e d   )   { 
 
 v a r   s i z e R e l a t e d O p t i o n s   =   { 
 	 	 b u t t o n s :   t r u e , 
 	 	 h e i g h t :   t r u e , 
 	 	 m a x H e i g h t :   t r u e , 
 	 	 m a x W i d t h :   t r u e , 
 	 	 m i n H e i g h t :   t r u e , 
 	 	 m i n W i d t h :   t r u e , 
 	 	 w i d t h :   t r u e 
 	 } , 
 	 r e s i z a b l e R e l a t e d O p t i o n s   =   { 
 	 	 m a x H e i g h t :   t r u e , 
 	 	 m a x W i d t h :   t r u e , 
 	 	 m i n H e i g h t :   t r u e , 
 	 	 m i n W i d t h :   t r u e 
 	 } ; 
 
 $ . w i d g e t (   " u i . d i a l o g " ,   { 
 	 v e r s i o n :   " 1 . 1 0 . 3 " , 
 	 o p t i o n s :   { 
 	 	 a p p e n d T o :   " b o d y " , 
 	 	 a u t o O p e n :   t r u e , 
 	 	 b u t t o n s :   [ ] , 
 	 	 c l o s e O n E s c a p e :   t r u e , 
 	 	 c l o s e T e x t :   " c l o s e " , 
 	 	 d i a l o g C l a s s :   " " , 
 	 	 d r a g g a b l e :   t r u e , 
 	 	 h i d e :   n u l l , 
 	 	 h e i g h t :   " a u t o " , 
 	 	 m a x H e i g h t :   n u l l , 
 	 	 m a x W i d t h :   n u l l , 
 	 	 m i n H e i g h t :   1 5 0 , 
 	 	 m i n W i d t h :   1 5 0 , 
 	 	 m o d a l :   f a l s e , 
 	 	 p o s i t i o n :   { 
 	 	 	 m y :   " c e n t e r " , 
 	 	 	 a t :   " c e n t e r " , 
 	 	 	 o f :   w i n d o w , 
 	 	 	 c o l l i s i o n :   " f i t " , 
 	 	 	 / /   E n s u r e   t h e   t i t l e b a r   i s   a l w a y s   v i s i b l e 
 	 	 	 u s i n g :   f u n c t i o n (   p o s   )   { 
 	 	 	 	 v a r   t o p O f f s e t   =   $ (   t h i s   ) . c s s (   p o s   ) . o f f s e t ( ) . t o p ; 
 	 	 	 	 i f   (   t o p O f f s e t   <   0   )   { 
 	 	 	 	 	 $ (   t h i s   ) . c s s (   " t o p " ,   p o s . t o p   -   t o p O f f s e t   ) ; 
 	 	 	 	 } 
 	 	 	 } 
 	 	 } , 
 	 	 r e s i z a b l e :   t r u e , 
 	 	 s h o w :   n u l l , 
 	 	 t i t l e :   n u l l , 
 	 	 w i d t h :   3 0 0 , 
 
 	 	 / /   c a l l b a c k s 
 	 	 b e f o r e C l o s e :   n u l l , 
 	 	 c l o s e :   n u l l , 
 	 	 d r a g :   n u l l , 
 	 	 d r a g S t a r t :   n u l l , 
 	 	 d r a g S t o p :   n u l l , 
 	 	 f o c u s :   n u l l , 
 	 	 o p e n :   n u l l , 
 	 	 r e s i z e :   n u l l , 
 	 	 r e s i z e S t a r t :   n u l l , 
 	 	 r e s i z e S t o p :   n u l l 
 	 } , 
 
 	 _ c r e a t e :   f u n c t i o n ( )   { 
 	 	 t h i s . o r i g i n a l C s s   =   { 
 	 	 	 d i s p l a y :   t h i s . e l e m e n t [ 0 ] . s t y l e . d i s p l a y , 
 	 	 	 w i d t h :   t h i s . e l e m e n t [ 0 ] . s t y l e . w i d t h , 
 	 	 	 m i n H e i g h t :   t h i s . e l e m e n t [ 0 ] . s t y l e . m i n H e i g h t , 
 	 	 	 m a x H e i g h t :   t h i s . e l e m e n t [ 0 ] . s t y l e . m a x H e i g h t , 
 	 	 	 h e i g h t :   t h i s . e l e m e n t [ 0 ] . s t y l e . h e i g h t 
 	 	 } ; 
 	 	 t h i s . o r i g i n a l P o s i t i o n   =   { 
 	 	 	 p a r e n t :   t h i s . e l e m e n t . p a r e n t ( ) , 
 	 	 	 i n d e x :   t h i s . e l e m e n t . p a r e n t ( ) . c h i l d r e n ( ) . i n d e x (   t h i s . e l e m e n t   ) 
 	 	 } ; 
 	 	 t h i s . o r i g i n a l T i t l e   =   t h i s . e l e m e n t . a t t r ( " t i t l e " ) ; 
 	 	 t h i s . o p t i o n s . t i t l e   =   t h i s . o p t i o n s . t i t l e   | |   t h i s . o r i g i n a l T i t l e ; 
 
 	 	 t h i s . _ c r e a t e W r a p p e r ( ) ; 
 
 	 	 t h i s . e l e m e n t 
 	 	 	 . s h o w ( ) 
 	 	 	 . r e m o v e A t t r ( " t i t l e " ) 
 	 	 	 . a d d C l a s s ( " u i - d i a l o g - c o n t e n t   u i - w i d g e t - c o n t e n t " ) 
 	 	 	 . a p p e n d T o (   t h i s . u i D i a l o g   ) ; 
 
 	 	 t h i s . _ c r e a t e T i t l e b a r ( ) ; 
 	 	 t h i s . _ c r e a t e B u t t o n P a n e ( ) ; 
 
 	 	 i f   (   t h i s . o p t i o n s . d r a g g a b l e   & &   $ . f n . d r a g g a b l e   )   { 
 	 	 	 t h i s . _ m a k e D r a g g a b l e ( ) ; 
 	 	 } 
 	 	 i f   (   t h i s . o p t i o n s . r e s i z a b l e   & &   $ . f n . r e s i z a b l e   )   { 
 	 	 	 t h i s . _ m a k e R e s i z a b l e ( ) ; 
 	 	 } 
 
 	 	 t h i s . _ i s O p e n   =   f a l s e ; 
 	 } , 
 
 	 _ i n i t :   f u n c t i o n ( )   { 
 	 	 i f   (   t h i s . o p t i o n s . a u t o O p e n   )   { 
 	 	 	 t h i s . o p e n ( ) ; 
 	 	 } 
 	 } , 
 
 	 _ a p p e n d T o :   f u n c t i o n ( )   { 
 	 	 v a r   e l e m e n t   =   t h i s . o p t i o n s . a p p e n d T o ; 
 	 	 i f   (   e l e m e n t   & &   ( e l e m e n t . j q u e r y   | |   e l e m e n t . n o d e T y p e )   )   { 
 	 	 	 r e t u r n   $ (   e l e m e n t   ) ; 
 	 	 } 
 	 	 r e t u r n   t h i s . d o c u m e n t . f i n d (   e l e m e n t   | |   " b o d y "   ) . e q (   0   ) ; 
 	 } , 
 
 	 _ d e s t r o y :   f u n c t i o n ( )   { 
 	 	 v a r   n e x t , 
 	 	 	 o r i g i n a l P o s i t i o n   =   t h i s . o r i g i n a l P o s i t i o n ; 
 
 	 	 t h i s . _ d e s t r o y O v e r l a y ( ) ; 
 
 	 	 t h i s . e l e m e n t 
 	 	 	 . r e m o v e U n i q u e I d ( ) 
 	 	 	 . r e m o v e C l a s s ( " u i - d i a l o g - c o n t e n t   u i - w i d g e t - c o n t e n t " ) 
 	 	 	 . c s s (   t h i s . o r i g i n a l C s s   ) 
 	 	 	 / /   W i t h o u t   d e t a c h i n g   f i r s t ,   t h e   f o l l o w i n g   b e c o m e s   r e a l l y   s l o w 
 	 	 	 . d e t a c h ( ) ; 
 
 	 	 t h i s . u i D i a l o g . s t o p (   t r u e ,   t r u e   ) . r e m o v e ( ) ; 
 
 	 	 i f   (   t h i s . o r i g i n a l T i t l e   )   { 
 	 	 	 t h i s . e l e m e n t . a t t r (   " t i t l e " ,   t h i s . o r i g i n a l T i t l e   ) ; 
 	 	 } 
 
 	 	 n e x t   =   o r i g i n a l P o s i t i o n . p a r e n t . c h i l d r e n ( ) . e q (   o r i g i n a l P o s i t i o n . i n d e x   ) ; 
 	 	 / /   D o n ' t   t r y   t o   p l a c e   t h e   d i a l o g   n e x t   t o   i t s e l f   ( # 8 6 1 3 ) 
 	 	 i f   (   n e x t . l e n g t h   & &   n e x t [ 0 ]   ! = =   t h i s . e l e m e n t [ 0 ]   )   { 
 	 	 	 n e x t . b e f o r e (   t h i s . e l e m e n t   ) ; 
 	 	 }   e l s e   { 
 	 	 	 o r i g i n a l P o s i t i o n . p a r e n t . a p p e n d (   t h i s . e l e m e n t   ) ; 
 	 	 } 
 	 } , 
 
 	 w i d g e t :   f u n c t i o n ( )   { 
 	 	 r e t u r n   t h i s . u i D i a l o g ; 
 	 } , 
 
 	 d i s a b l e :   $ . n o o p , 
 	 e n a b l e :   $ . n o o p , 
 
 	 c l o s e :   f u n c t i o n (   e v e n t   )   { 
 	 	 v a r   t h a t   =   t h i s ; 
 
 	 	 i f   (   ! t h i s . _ i s O p e n   | |   t h i s . _ t r i g g e r (   " b e f o r e C l o s e " ,   e v e n t   )   = = =   f a l s e   )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 t h i s . _ i s O p e n   =   f a l s e ; 
 	 	 t h i s . _ d e s t r o y O v e r l a y ( ) ; 
 
 	 	 i f   (   ! t h i s . o p e n e r . f i l t e r ( " : f o c u s a b l e " ) . f o c u s ( ) . l e n g t h   )   { 
 	 	 	 / /   H i d i n g   a   f o c u s e d   e l e m e n t   d o e s n ' t   t r i g g e r   b l u r   i n   W e b K i t 
 	 	 	 / /   s o   i n   c a s e   w e   h a v e   n o t h i n g   t o   f o c u s   o n ,   e x p l i c i t l y   b l u r   t h e   a c t i v e   e l e m e n t 
 	 	 	 / /   h t t p s : / / b u g s . w e b k i t . o r g / s h o w _ b u g . c g i ? i d = 4 7 1 8 2 
 	 	 	 $ (   t h i s . d o c u m e n t [ 0 ] . a c t i v e E l e m e n t   ) . b l u r ( ) ; 
 	 	 } 
 
 	 	 t h i s . _ h i d e (   t h i s . u i D i a l o g ,   t h i s . o p t i o n s . h i d e ,   f u n c t i o n ( )   { 
 	 	 	 t h a t . _ t r i g g e r (   " c l o s e " ,   e v e n t   ) ; 
 	 	 } ) ; 
 	 } , 
 
 	 i s O p e n :   f u n c t i o n ( )   { 
 	 	 r e t u r n   t h i s . _ i s O p e n ; 
 	 } , 
 
 	 m o v e T o T o p :   f u n c t i o n ( )   { 
 	 	 t h i s . _ m o v e T o T o p ( ) ; 
 	 } , 
 
 	 _ m o v e T o T o p :   f u n c t i o n (   e v e n t ,   s i l e n t   )   { 
 	 	 v a r   m o v e d   =   ! ! t h i s . u i D i a l o g . n e x t A l l ( " : v i s i b l e " ) . i n s e r t B e f o r e (   t h i s . u i D i a l o g   ) . l e n g t h ; 
 	 	 i f   (   m o v e d   & &   ! s i l e n t   )   { 
 	 	 	 t h i s . _ t r i g g e r (   " f o c u s " ,   e v e n t   ) ; 
 	 	 } 
 	 	 r e t u r n   m o v e d ; 
 	 } , 
 
 	 o p e n :   f u n c t i o n ( )   { 
 	 	 v a r   t h a t   =   t h i s ; 
 	 	 i f   (   t h i s . _ i s O p e n   )   { 
 	 	 	 i f   (   t h i s . _ m o v e T o T o p ( )   )   { 
 	 	 	 	 t h i s . _ f o c u s T a b b a b l e ( ) ; 
 	 	 	 } 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 t h i s . _ i s O p e n   =   t r u e ; 
 	 	 t h i s . o p e n e r   =   $ (   t h i s . d o c u m e n t [ 0 ] . a c t i v e E l e m e n t   ) ; 
 
 	 	 t h i s . _ s i z e ( ) ; 
 	 	 t h i s . _ p o s i t i o n ( ) ; 
 	 	 t h i s . _ c r e a t e O v e r l a y ( ) ; 
 	 	 t h i s . _ m o v e T o T o p (   n u l l ,   t r u e   ) ; 
 	 	 t h i s . _ s h o w (   t h i s . u i D i a l o g ,   t h i s . o p t i o n s . s h o w ,   f u n c t i o n ( )   { 
 	 	 	 t h a t . _ f o c u s T a b b a b l e ( ) ; 
 	 	 	 t h a t . _ t r i g g e r ( " f o c u s " ) ; 
 	 	 } ) ; 
 
 	 	 t h i s . _ t r i g g e r ( " o p e n " ) ; 
 	 } , 
 
 	 _ f o c u s T a b b a b l e :   f u n c t i o n ( )   { 
 	 	 / /   S e t   f o c u s   t o   t h e   f i r s t   m a t c h : 
 	 	 / /   1 .   F i r s t   e l e m e n t   i n s i d e   t h e   d i a l o g   m a t c h i n g   [ a u t o f o c u s ] 
 	 	 / /   2 .   T a b b a b l e   e l e m e n t   i n s i d e   t h e   c o n t e n t   e l e m e n t 
 	 	 / /   3 .   T a b b a b l e   e l e m e n t   i n s i d e   t h e   b u t t o n p a n e 
 	 	 / /   4 .   T h e   c l o s e   b u t t o n 
 	 	 / /   5 .   T h e   d i a l o g   i t s e l f 
 	 	 v a r   h a s F o c u s   =   t h i s . e l e m e n t . f i n d ( " [ a u t o f o c u s ] " ) ; 
 	 	 i f   (   ! h a s F o c u s . l e n g t h   )   { 
 	 	 	 h a s F o c u s   =   t h i s . e l e m e n t . f i n d ( " : t a b b a b l e " ) ; 
 	 	 } 
 	 	 i f   (   ! h a s F o c u s . l e n g t h   )   { 
 	 	 	 h a s F o c u s   =   t h i s . u i D i a l o g B u t t o n P a n e . f i n d ( " : t a b b a b l e " ) ; 
 	 	 } 
 	 	 i f   (   ! h a s F o c u s . l e n g t h   )   { 
 	 	 	 h a s F o c u s   =   t h i s . u i D i a l o g T i t l e b a r C l o s e . f i l t e r ( " : t a b b a b l e " ) ; 
 	 	 } 
 	 	 i f   (   ! h a s F o c u s . l e n g t h   )   { 
 	 	 	 h a s F o c u s   =   t h i s . u i D i a l o g ; 
 	 	 } 
 	 	 h a s F o c u s . e q (   0   ) . f o c u s ( ) ; 
 	 } , 
 
 	 _ k e e p F o c u s :   f u n c t i o n (   e v e n t   )   { 
 	 	 f u n c t i o n   c h e c k F o c u s ( )   { 
 	 	 	 v a r   a c t i v e E l e m e n t   =   t h i s . d o c u m e n t [ 0 ] . a c t i v e E l e m e n t , 
 	 	 	 	 i s A c t i v e   =   t h i s . u i D i a l o g [ 0 ]   = = =   a c t i v e E l e m e n t   | | 
 	 	 	 	 	 $ . c o n t a i n s (   t h i s . u i D i a l o g [ 0 ] ,   a c t i v e E l e m e n t   ) ; 
 	 	 	 i f   (   ! i s A c t i v e   )   { 
 	 	 	 	 t h i s . _ f o c u s T a b b a b l e ( ) ; 
 	 	 	 } 
 	 	 } 
 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 	 	 c h e c k F o c u s . c a l l (   t h i s   ) ; 
 	 	 / /   s u p p o r t :   I E 
 	 	 / /   I E   < =   8   d o e s n ' t   p r e v e n t   m o v i n g   f o c u s   e v e n   w i t h   e v e n t . p r e v e n t D e f a u l t ( ) 
 	 	 / /   s o   w e   c h e c k   a g a i n   l a t e r 
 	 	 t h i s . _ d e l a y (   c h e c k F o c u s   ) ; 
 	 } , 
 
 	 _ c r e a t e W r a p p e r :   f u n c t i o n ( )   { 
 	 	 t h i s . u i D i a l o g   =   $ ( " < d i v > " ) 
 	 	 	 . a d d C l a s s (   " u i - d i a l o g   u i - w i d g e t   u i - w i d g e t - c o n t e n t   u i - c o r n e r - a l l   u i - f r o n t   "   + 
 	 	 	 	 t h i s . o p t i o n s . d i a l o g C l a s s   ) 
 	 	 	 . h i d e ( ) 
 	 	 	 . a t t r ( { 
 	 	 	 	 / /   S e t t i n g   t a b I n d e x   m a k e s   t h e   d i v   f o c u s a b l e 
 	 	 	 	 t a b I n d e x :   - 1 , 
 	 	 	 	 r o l e :   " d i a l o g " 
 	 	 	 } ) 
 	 	 	 . a p p e n d T o (   t h i s . _ a p p e n d T o ( )   ) ; 
 
 	 	 t h i s . _ o n (   t h i s . u i D i a l o g ,   { 
 	 	 	 k e y d o w n :   f u n c t i o n (   e v e n t   )   { 
 	 	 	 	 i f   (   t h i s . o p t i o n s . c l o s e O n E s c a p e   & &   ! e v e n t . i s D e f a u l t P r e v e n t e d ( )   & &   e v e n t . k e y C o d e   & & 
 	 	 	 	 	 	 e v e n t . k e y C o d e   = = =   $ . u i . k e y C o d e . E S C A P E   )   { 
 	 	 	 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 	 	 	 	 	 t h i s . c l o s e (   e v e n t   ) ; 
 	 	 	 	 	 r e t u r n ; 
 	 	 	 	 } 
 
 	 	 	 	 / /   p r e v e n t   t a b b i n g   o u t   o f   d i a l o g s 
 	 	 	 	 i f   (   e v e n t . k e y C o d e   ! = =   $ . u i . k e y C o d e . T A B   )   { 
 	 	 	 	 	 r e t u r n ; 
 	 	 	 	 } 
 	 	 	 	 v a r   t a b b a b l e s   =   t h i s . u i D i a l o g . f i n d ( " : t a b b a b l e " ) , 
 	 	 	 	 	 f i r s t   =   t a b b a b l e s . f i l t e r ( " : f i r s t " ) , 
 	 	 	 	 	 l a s t     =   t a b b a b l e s . f i l t e r ( " : l a s t " ) ; 
 
 	 	 	 	 i f   (   (   e v e n t . t a r g e t   = = =   l a s t [ 0 ]   | |   e v e n t . t a r g e t   = = =   t h i s . u i D i a l o g [ 0 ]   )   & &   ! e v e n t . s h i f t K e y   )   { 
 	 	 	 	 	 f i r s t . f o c u s (   1   ) ; 
 	 	 	 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 	 	 	 	 }   e l s e   i f   (   (   e v e n t . t a r g e t   = = =   f i r s t [ 0 ]   | |   e v e n t . t a r g e t   = = =   t h i s . u i D i a l o g [ 0 ]   )   & &   e v e n t . s h i f t K e y   )   { 
 	 	 	 	 	 l a s t . f o c u s (   1   ) ; 
 	 	 	 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 	 	 	 	 } 
 	 	 	 } , 
 	 	 	 m o u s e d o w n :   f u n c t i o n (   e v e n t   )   { 
 	 	 	 	 i f   (   t h i s . _ m o v e T o T o p (   e v e n t   )   )   { 
 	 	 	 	 	 t h i s . _ f o c u s T a b b a b l e ( ) ; 
 	 	 	 	 } 
 	 	 	 } 
 	 	 } ) ; 
 
 	 	 / /   W e   a s s u m e   t h a t   a n y   e x i s t i n g   a r i a - d e s c r i b e d b y   a t t r i b u t e   m e a n s 
 	 	 / /   t h a t   t h e   d i a l o g   c o n t e n t   i s   m a r k e d   u p   p r o p e r l y 
 	 	 / /   o t h e r w i s e   w e   b r u t e   f o r c e   t h e   c o n t e n t   a s   t h e   d e s c r i p t i o n 
 	 	 i f   (   ! t h i s . e l e m e n t . f i n d ( " [ a r i a - d e s c r i b e d b y ] " ) . l e n g t h   )   { 
 	 	 	 t h i s . u i D i a l o g . a t t r ( { 
 	 	 	 	 " a r i a - d e s c r i b e d b y " :   t h i s . e l e m e n t . u n i q u e I d ( ) . a t t r ( " i d " ) 
 	 	 	 } ) ; 
 	 	 } 
 	 } , 
 
 	 _ c r e a t e T i t l e b a r :   f u n c t i o n ( )   { 
 	 	 v a r   u i D i a l o g T i t l e ; 
 
 	 	 t h i s . u i D i a l o g T i t l e b a r   =   $ ( " < d i v > " ) 
 	 	 	 . a d d C l a s s ( " u i - d i a l o g - t i t l e b a r   u i - w i d g e t - h e a d e r   u i - c o r n e r - a l l   u i - h e l p e r - c l e a r f i x " ) 
 	 	 	 . p r e p e n d T o (   t h i s . u i D i a l o g   ) ; 
 	 	 t h i s . _ o n (   t h i s . u i D i a l o g T i t l e b a r ,   { 
 	 	 	 m o u s e d o w n :   f u n c t i o n (   e v e n t   )   { 
 	 	 	 	 / /   D o n ' t   p r e v e n t   c l i c k   o n   c l o s e   b u t t o n   ( # 8 8 3 8 ) 
 	 	 	 	 / /   F o c u s i n g   a   d i a l o g   t h a t   i s   p a r t i a l l y   s c r o l l e d   o u t   o f   v i e w 
 	 	 	 	 / /   c a u s e s   t h e   b r o w s e r   t o   s c r o l l   i t   i n t o   v i e w ,   p r e v e n t i n g   t h e   c l i c k   e v e n t 
 	 	 	 	 i f   (   ! $ (   e v e n t . t a r g e t   ) . c l o s e s t ( " . u i - d i a l o g - t i t l e b a r - c l o s e " )   )   { 
 	 	 	 	 	 / /   D i a l o g   i s n ' t   g e t t i n g   f o c u s   w h e n   d r a g g i n g   ( # 8 0 6 3 ) 
 	 	 	 	 	 t h i s . u i D i a l o g . f o c u s ( ) ; 
 	 	 	 	 } 
 	 	 	 } 
 	 	 } ) ; 
 
 	 	 t h i s . u i D i a l o g T i t l e b a r C l o s e   =   $ ( " < b u t t o n > < / b u t t o n > " ) 
 	 	 	 . b u t t o n ( { 
 	 	 	 	 l a b e l :   t h i s . o p t i o n s . c l o s e T e x t , 
 	 	 	 	 i c o n s :   { 
 	 	 	 	 	 p r i m a r y :   " u i - i c o n - c l o s e t h i c k " 
 	 	 	 	 } , 
 	 	 	 	 t e x t :   f a l s e 
 	 	 	 } ) 
 	 	 	 . a d d C l a s s ( " u i - d i a l o g - t i t l e b a r - c l o s e " ) 
 	 	 	 . a p p e n d T o (   t h i s . u i D i a l o g T i t l e b a r   ) ; 
 	 	 t h i s . _ o n (   t h i s . u i D i a l o g T i t l e b a r C l o s e ,   { 
 	 	 	 c l i c k :   f u n c t i o n (   e v e n t   )   { 
 	 	 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 	 	 	 	 t h i s . c l o s e (   e v e n t   ) ; 
 	 	 	 } 
 	 	 } ) ; 
 
 	 	 u i D i a l o g T i t l e   =   $ ( " < s p a n > " ) 
 	 	 	 . u n i q u e I d ( ) 
 	 	 	 . a d d C l a s s ( " u i - d i a l o g - t i t l e " ) 
 	 	 	 . p r e p e n d T o (   t h i s . u i D i a l o g T i t l e b a r   ) ; 
 	 	 t h i s . _ t i t l e (   u i D i a l o g T i t l e   ) ; 
 
 	 	 t h i s . u i D i a l o g . a t t r ( { 
 	 	 	 " a r i a - l a b e l l e d b y " :   u i D i a l o g T i t l e . a t t r ( " i d " ) 
 	 	 } ) ; 
 	 } , 
 
 	 _ t i t l e :   f u n c t i o n (   t i t l e   )   { 
 	 	 i f   (   ! t h i s . o p t i o n s . t i t l e   )   { 
 	 	 	 t i t l e . h t m l ( " & # 1 6 0 ; " ) ; 
 	 	 } 
 	 	 t i t l e . t e x t (   t h i s . o p t i o n s . t i t l e   ) ; 
 	 } , 
 
 	 _ c r e a t e B u t t o n P a n e :   f u n c t i o n ( )   { 
 	 	 t h i s . u i D i a l o g B u t t o n P a n e   =   $ ( " < d i v > " ) 
 	 	 	 . a d d C l a s s ( " u i - d i a l o g - b u t t o n p a n e   u i - w i d g e t - c o n t e n t   u i - h e l p e r - c l e a r f i x " ) ; 
 
 	 	 t h i s . u i B u t t o n S e t   =   $ ( " < d i v > " ) 
 	 	 	 . a d d C l a s s ( " u i - d i a l o g - b u t t o n s e t " ) 
 	 	 	 . a p p e n d T o (   t h i s . u i D i a l o g B u t t o n P a n e   ) ; 
 
 	 	 t h i s . _ c r e a t e B u t t o n s ( ) ; 
 	 } , 
 
 	 _ c r e a t e B u t t o n s :   f u n c t i o n ( )   { 
 	 	 v a r   t h a t   =   t h i s , 
 	 	 	 b u t t o n s   =   t h i s . o p t i o n s . b u t t o n s ; 
 
 	 	 / /   i f   w e   a l r e a d y   h a v e   a   b u t t o n   p a n e ,   r e m o v e   i t 
 	 	 t h i s . u i D i a l o g B u t t o n P a n e . r e m o v e ( ) ; 
 	 	 t h i s . u i B u t t o n S e t . e m p t y ( ) ; 
 
 	 	 i f   (   $ . i s E m p t y O b j e c t (   b u t t o n s   )   | |   ( $ . i s A r r a y (   b u t t o n s   )   & &   ! b u t t o n s . l e n g t h )   )   { 
 	 	 	 t h i s . u i D i a l o g . r e m o v e C l a s s ( " u i - d i a l o g - b u t t o n s " ) ; 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 $ . e a c h (   b u t t o n s ,   f u n c t i o n (   n a m e ,   p r o p s   )   { 
 	 	 	 v a r   c l i c k ,   b u t t o n O p t i o n s ; 
 	 	 	 p r o p s   =   $ . i s F u n c t i o n (   p r o p s   )   ? 
 	 	 	 	 {   c l i c k :   p r o p s ,   t e x t :   n a m e   }   : 
 	 	 	 	 p r o p s ; 
 	 	 	 / /   D e f a u l t   t o   a   n o n - s u b m i t t i n g   b u t t o n 
 	 	 	 p r o p s   =   $ . e x t e n d (   {   t y p e :   " b u t t o n "   } ,   p r o p s   ) ; 
 	 	 	 / /   C h a n g e   t h e   c o n t e x t   f o r   t h e   c l i c k   c a l l b a c k   t o   b e   t h e   m a i n   e l e m e n t 
 	 	 	 c l i c k   =   p r o p s . c l i c k ; 
 	 	 	 p r o p s . c l i c k   =   f u n c t i o n ( )   { 
 	 	 	 	 c l i c k . a p p l y (   t h a t . e l e m e n t [ 0 ] ,   a r g u m e n t s   ) ; 
 	 	 	 } ; 
 	 	 	 b u t t o n O p t i o n s   =   { 
 	 	 	 	 i c o n s :   p r o p s . i c o n s , 
 	 	 	 	 t e x t :   p r o p s . s h o w T e x t 
 	 	 	 } ; 
 	 	 	 d e l e t e   p r o p s . i c o n s ; 
 	 	 	 d e l e t e   p r o p s . s h o w T e x t ; 
 	 	 	 $ (   " < b u t t o n > < / b u t t o n > " ,   p r o p s   ) 
 	 	 	 	 . b u t t o n (   b u t t o n O p t i o n s   ) 
 	 	 	 	 . a p p e n d T o (   t h a t . u i B u t t o n S e t   ) ; 
 	 	 } ) ; 
 	 	 t h i s . u i D i a l o g . a d d C l a s s ( " u i - d i a l o g - b u t t o n s " ) ; 
 	 	 t h i s . u i D i a l o g B u t t o n P a n e . a p p e n d T o (   t h i s . u i D i a l o g   ) ; 
 	 } , 
 
 	 _ m a k e D r a g g a b l e :   f u n c t i o n ( )   { 
 	 	 v a r   t h a t   =   t h i s , 
 	 	 	 o p t i o n s   =   t h i s . o p t i o n s ; 
 
 	 	 f u n c t i o n   f i l t e r e d U i (   u i   )   { 
 	 	 	 r e t u r n   { 
 	 	 	 	 p o s i t i o n :   u i . p o s i t i o n , 
 	 	 	 	 o f f s e t :   u i . o f f s e t 
 	 	 	 } ; 
 	 	 } 
 
 	 	 t h i s . u i D i a l o g . d r a g g a b l e ( { 
 	 	 	 c a n c e l :   " . u i - d i a l o g - c o n t e n t ,   . u i - d i a l o g - t i t l e b a r - c l o s e " , 
 	 	 	 h a n d l e :   " . u i - d i a l o g - t i t l e b a r " , 
 	 	 	 c o n t a i n m e n t :   " d o c u m e n t " , 
 	 	 	 s t a r t :   f u n c t i o n (   e v e n t ,   u i   )   { 
 	 	 	 	 $ (   t h i s   ) . a d d C l a s s ( " u i - d i a l o g - d r a g g i n g " ) ; 
 	 	 	 	 t h a t . _ b l o c k F r a m e s ( ) ; 
 	 	 	 	 t h a t . _ t r i g g e r (   " d r a g S t a r t " ,   e v e n t ,   f i l t e r e d U i (   u i   )   ) ; 
 	 	 	 } , 
 	 	 	 d r a g :   f u n c t i o n (   e v e n t ,   u i   )   { 
 	 	 	 	 t h a t . _ t r i g g e r (   " d r a g " ,   e v e n t ,   f i l t e r e d U i (   u i   )   ) ; 
 	 	 	 } , 
 	 	 	 s t o p :   f u n c t i o n (   e v e n t ,   u i   )   { 
 	 	 	 	 o p t i o n s . p o s i t i o n   =   [ 
 	 	 	 	 	 u i . p o s i t i o n . l e f t   -   t h a t . d o c u m e n t . s c r o l l L e f t ( ) , 
 	 	 	 	 	 u i . p o s i t i o n . t o p   -   t h a t . d o c u m e n t . s c r o l l T o p ( ) 
 	 	 	 	 ] ; 
 	 	 	 	 $ (   t h i s   ) . r e m o v e C l a s s ( " u i - d i a l o g - d r a g g i n g " ) ; 
 	 	 	 	 t h a t . _ u n b l o c k F r a m e s ( ) ; 
 	 	 	 	 t h a t . _ t r i g g e r (   " d r a g S t o p " ,   e v e n t ,   f i l t e r e d U i (   u i   )   ) ; 
 	 	 	 } 
 	 	 } ) ; 
 	 } , 
 
 	 _ m a k e R e s i z a b l e :   f u n c t i o n ( )   { 
 	 	 v a r   t h a t   =   t h i s , 
 	 	 	 o p t i o n s   =   t h i s . o p t i o n s , 
 	 	 	 h a n d l e s   =   o p t i o n s . r e s i z a b l e , 
 	 	 	 / /   . u i - r e s i z a b l e   h a s   p o s i t i o n :   r e l a t i v e   d e f i n e d   i n   t h e   s t y l e s h e e t 
 	 	 	 / /   b u t   d i a l o g s   h a v e   t o   u s e   a b s o l u t e   o r   f i x e d   p o s i t i o n i n g 
 	 	 	 p o s i t i o n   =   t h i s . u i D i a l o g . c s s ( " p o s i t i o n " ) , 
 	 	 	 r e s i z e H a n d l e s   =   t y p e o f   h a n d l e s   = = =   " s t r i n g "   ? 
 	 	 	 	 h a n d l e s 	 : 
 	 	 	 	 " n , e , s , w , s e , s w , n e , n w " ; 
 
 	 	 f u n c t i o n   f i l t e r e d U i (   u i   )   { 
 	 	 	 r e t u r n   { 
 	 	 	 	 o r i g i n a l P o s i t i o n :   u i . o r i g i n a l P o s i t i o n , 
 	 	 	 	 o r i g i n a l S i z e :   u i . o r i g i n a l S i z e , 
 	 	 	 	 p o s i t i o n :   u i . p o s i t i o n , 
 	 	 	 	 s i z e :   u i . s i z e 
 	 	 	 } ; 
 	 	 } 
 
 	 	 t h i s . u i D i a l o g . r e s i z a b l e ( { 
 	 	 	 c a n c e l :   " . u i - d i a l o g - c o n t e n t " , 
 	 	 	 c o n t a i n m e n t :   " d o c u m e n t " , 
 	 	 	 a l s o R e s i z e :   t h i s . e l e m e n t , 
 	 	 	 m a x W i d t h :   o p t i o n s . m a x W i d t h , 
 	 	 	 m a x H e i g h t :   o p t i o n s . m a x H e i g h t , 
 	 	 	 m i n W i d t h :   o p t i o n s . m i n W i d t h , 
 	 	 	 m i n H e i g h t :   t h i s . _ m i n H e i g h t ( ) , 
 	 	 	 h a n d l e s :   r e s i z e H a n d l e s , 
 	 	 	 s t a r t :   f u n c t i o n (   e v e n t ,   u i   )   { 
 	 	 	 	 $ (   t h i s   ) . a d d C l a s s ( " u i - d i a l o g - r e s i z i n g " ) ; 
 	 	 	 	 t h a t . _ b l o c k F r a m e s ( ) ; 
 	 	 	 	 t h a t . _ t r i g g e r (   " r e s i z e S t a r t " ,   e v e n t ,   f i l t e r e d U i (   u i   )   ) ; 
 	 	 	 } , 
 	 	 	 r e s i z e :   f u n c t i o n (   e v e n t ,   u i   )   { 
 	 	 	 	 t h a t . _ t r i g g e r (   " r e s i z e " ,   e v e n t ,   f i l t e r e d U i (   u i   )   ) ; 
 	 	 	 } , 
 	 	 	 s t o p :   f u n c t i o n (   e v e n t ,   u i   )   { 
 	 	 	 	 o p t i o n s . h e i g h t   =   $ (   t h i s   ) . h e i g h t ( ) ; 
 	 	 	 	 o p t i o n s . w i d t h   =   $ (   t h i s   ) . w i d t h ( ) ; 
 	 	 	 	 $ (   t h i s   ) . r e m o v e C l a s s ( " u i - d i a l o g - r e s i z i n g " ) ; 
 	 	 	 	 t h a t . _ u n b l o c k F r a m e s ( ) ; 
 	 	 	 	 t h a t . _ t r i g g e r (   " r e s i z e S t o p " ,   e v e n t ,   f i l t e r e d U i (   u i   )   ) ; 
 	 	 	 } 
 	 	 } ) 
 	 	 . c s s (   " p o s i t i o n " ,   p o s i t i o n   ) ; 
 	 } , 
 
 	 _ m i n H e i g h t :   f u n c t i o n ( )   { 
 	 	 v a r   o p t i o n s   =   t h i s . o p t i o n s ; 
 
 	 	 r e t u r n   o p t i o n s . h e i g h t   = = =   " a u t o "   ? 
 	 	 	 o p t i o n s . m i n H e i g h t   : 
 	 	 	 M a t h . m i n (   o p t i o n s . m i n H e i g h t ,   o p t i o n s . h e i g h t   ) ; 
 	 } , 
 
 	 _ p o s i t i o n :   f u n c t i o n ( )   { 
 	 	 / /   N e e d   t o   s h o w   t h e   d i a l o g   t o   g e t   t h e   a c t u a l   o f f s e t   i n   t h e   p o s i t i o n   p l u g i n 
 	 	 v a r   i s V i s i b l e   =   t h i s . u i D i a l o g . i s ( " : v i s i b l e " ) ; 
 	 	 i f   (   ! i s V i s i b l e   )   { 
 	 	 	 t h i s . u i D i a l o g . s h o w ( ) ; 
 	 	 } 
 	 	 t h i s . u i D i a l o g . p o s i t i o n (   t h i s . o p t i o n s . p o s i t i o n   ) ; 
 	 	 i f   (   ! i s V i s i b l e   )   { 
 	 	 	 t h i s . u i D i a l o g . h i d e ( ) ; 
 	 	 } 
 	 } , 
 
 	 _ s e t O p t i o n s :   f u n c t i o n (   o p t i o n s   )   { 
 	 	 v a r   t h a t   =   t h i s , 
 	 	 	 r e s i z e   =   f a l s e , 
 	 	 	 r e s i z a b l e O p t i o n s   =   { } ; 
 
 	 	 $ . e a c h (   o p t i o n s ,   f u n c t i o n (   k e y ,   v a l u e   )   { 
 	 	 	 t h a t . _ s e t O p t i o n (   k e y ,   v a l u e   ) ; 
 
 	 	 	 i f   (   k e y   i n   s i z e R e l a t e d O p t i o n s   )   { 
 	 	 	 	 r e s i z e   =   t r u e ; 
 	 	 	 } 
 	 	 	 i f   (   k e y   i n   r e s i z a b l e R e l a t e d O p t i o n s   )   { 
 	 	 	 	 r e s i z a b l e O p t i o n s [   k e y   ]   =   v a l u e ; 
 	 	 	 } 
 	 	 } ) ; 
 
 	 	 i f   (   r e s i z e   )   { 
 	 	 	 t h i s . _ s i z e ( ) ; 
 	 	 	 t h i s . _ p o s i t i o n ( ) ; 
 	 	 } 
 	 	 i f   (   t h i s . u i D i a l o g . i s ( " : d a t a ( u i - r e s i z a b l e ) " )   )   { 
 	 	 	 t h i s . u i D i a l o g . r e s i z a b l e (   " o p t i o n " ,   r e s i z a b l e O p t i o n s   ) ; 
 	 	 } 
 	 } , 
 
 	 _ s e t O p t i o n :   f u n c t i o n (   k e y ,   v a l u e   )   { 
 	 	 / * j s h i n t   m a x c o m p l e x i t y : 1 5 * / 
 	 	 v a r   i s D r a g g a b l e ,   i s R e s i z a b l e , 
 	 	 	 u i D i a l o g   =   t h i s . u i D i a l o g ; 
 
 	 	 i f   (   k e y   = = =   " d i a l o g C l a s s "   )   { 
 	 	 	 u i D i a l o g 
 	 	 	 	 . r e m o v e C l a s s (   t h i s . o p t i o n s . d i a l o g C l a s s   ) 
 	 	 	 	 . a d d C l a s s (   v a l u e   ) ; 
 	 	 } 
 
 	 	 i f   (   k e y   = = =   " d i s a b l e d "   )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 t h i s . _ s u p e r (   k e y ,   v a l u e   ) ; 
 
 	 	 i f   (   k e y   = = =   " a p p e n d T o "   )   { 
 	 	 	 t h i s . u i D i a l o g . a p p e n d T o (   t h i s . _ a p p e n d T o ( )   ) ; 
 	 	 } 
 
 	 	 i f   (   k e y   = = =   " b u t t o n s "   )   { 
 	 	 	 t h i s . _ c r e a t e B u t t o n s ( ) ; 
 	 	 } 
 
 	 	 i f   (   k e y   = = =   " c l o s e T e x t "   )   { 
 	 	 	 t h i s . u i D i a l o g T i t l e b a r C l o s e . b u t t o n ( { 
 	 	 	 	 / /   E n s u r e   t h a t   w e   a l w a y s   p a s s   a   s t r i n g 
 	 	 	 	 l a b e l :   " "   +   v a l u e 
 	 	 	 } ) ; 
 	 	 } 
 
 	 	 i f   (   k e y   = = =   " d r a g g a b l e "   )   { 
 	 	 	 i s D r a g g a b l e   =   u i D i a l o g . i s ( " : d a t a ( u i - d r a g g a b l e ) " ) ; 
 	 	 	 i f   (   i s D r a g g a b l e   & &   ! v a l u e   )   { 
 	 	 	 	 u i D i a l o g . d r a g g a b l e ( " d e s t r o y " ) ; 
 	 	 	 } 
 
 	 	 	 i f   (   ! i s D r a g g a b l e   & &   v a l u e   )   { 
 	 	 	 	 t h i s . _ m a k e D r a g g a b l e ( ) ; 
 	 	 	 } 
 	 	 } 
 
 	 	 i f   (   k e y   = = =   " p o s i t i o n "   )   { 
 	 	 	 t h i s . _ p o s i t i o n ( ) ; 
 	 	 } 
 
 	 	 i f   (   k e y   = = =   " r e s i z a b l e "   )   { 
 	 	 	 / /   c u r r e n t l y   r e s i z a b l e ,   b e c o m i n g   n o n - r e s i z a b l e 
 	 	 	 i s R e s i z a b l e   =   u i D i a l o g . i s ( " : d a t a ( u i - r e s i z a b l e ) " ) ; 
 	 	 	 i f   (   i s R e s i z a b l e   & &   ! v a l u e   )   { 
 	 	 	 	 u i D i a l o g . r e s i z a b l e ( " d e s t r o y " ) ; 
 	 	 	 } 
 
 	 	 	 / /   c u r r e n t l y   r e s i z a b l e ,   c h a n g i n g   h a n d l e s 
 	 	 	 i f   (   i s R e s i z a b l e   & &   t y p e o f   v a l u e   = = =   " s t r i n g "   )   { 
 	 	 	 	 u i D i a l o g . r e s i z a b l e (   " o p t i o n " ,   " h a n d l e s " ,   v a l u e   ) ; 
 	 	 	 } 
 
 	 	 	 / /   c u r r e n t l y   n o n - r e s i z a b l e ,   b e c o m i n g   r e s i z a b l e 
 	 	 	 i f   (   ! i s R e s i z a b l e   & &   v a l u e   ! = =   f a l s e   )   { 
 	 	 	 	 t h i s . _ m a k e R e s i z a b l e ( ) ; 
 	 	 	 } 
 	 	 } 
 
 	 	 i f   (   k e y   = = =   " t i t l e "   )   { 
 	 	 	 t h i s . _ t i t l e (   t h i s . u i D i a l o g T i t l e b a r . f i n d ( " . u i - d i a l o g - t i t l e " )   ) ; 
 	 	 } 
 	 } , 
 
 	 _ s i z e :   f u n c t i o n ( )   { 
 	 	 / /   I f   t h e   u s e r   h a s   r e s i z e d   t h e   d i a l o g ,   t h e   . u i - d i a l o g   a n d   . u i - d i a l o g - c o n t e n t 
 	 	 / /   d i v s   w i l l   b o t h   h a v e   w i d t h   a n d   h e i g h t   s e t ,   s o   w e   n e e d   t o   r e s e t   t h e m 
 	 	 v a r   n o n C o n t e n t H e i g h t ,   m i n C o n t e n t H e i g h t ,   m a x C o n t e n t H e i g h t , 
 	 	 	 o p t i o n s   =   t h i s . o p t i o n s ; 
 
 	 	 / /   R e s e t   c o n t e n t   s i z i n g 
 	 	 t h i s . e l e m e n t . s h o w ( ) . c s s ( { 
 	 	 	 w i d t h :   " a u t o " , 
 	 	 	 m i n H e i g h t :   0 , 
 	 	 	 m a x H e i g h t :   " n o n e " , 
 	 	 	 h e i g h t :   0 
 	 	 } ) ; 
 
 	 	 i f   (   o p t i o n s . m i n W i d t h   >   o p t i o n s . w i d t h   )   { 
 	 	 	 o p t i o n s . w i d t h   =   o p t i o n s . m i n W i d t h ; 
 	 	 } 
 
 	 	 / /   r e s e t   w r a p p e r   s i z i n g 
 	 	 / /   d e t e r m i n e   t h e   h e i g h t   o f   a l l   t h e   n o n - c o n t e n t   e l e m e n t s 
 	 	 n o n C o n t e n t H e i g h t   =   t h i s . u i D i a l o g . c s s ( { 
 	 	 	 	 h e i g h t :   " a u t o " , 
 	 	 	 	 w i d t h :   o p t i o n s . w i d t h 
 	 	 	 } ) 
 	 	 	 . o u t e r H e i g h t ( ) ; 
 	 	 m i n C o n t e n t H e i g h t   =   M a t h . m a x (   0 ,   o p t i o n s . m i n H e i g h t   -   n o n C o n t e n t H e i g h t   ) ; 
 	 	 m a x C o n t e n t H e i g h t   =   t y p e o f   o p t i o n s . m a x H e i g h t   = = =   " n u m b e r "   ? 
 	 	 	 M a t h . m a x (   0 ,   o p t i o n s . m a x H e i g h t   -   n o n C o n t e n t H e i g h t   )   : 
 	 	 	 " n o n e " ; 
 
 	 	 i f   (   o p t i o n s . h e i g h t   = = =   " a u t o "   )   { 
 	 	 	 t h i s . e l e m e n t . c s s ( { 
 	 	 	 	 m i n H e i g h t :   m i n C o n t e n t H e i g h t , 
 	 	 	 	 m a x H e i g h t :   m a x C o n t e n t H e i g h t , 
 	 	 	 	 h e i g h t :   " a u t o " 
 	 	 	 } ) ; 
 	 	 }   e l s e   { 
 	 	 	 t h i s . e l e m e n t . h e i g h t (   M a t h . m a x (   0 ,   o p t i o n s . h e i g h t   -   n o n C o n t e n t H e i g h t   )   ) ; 
 	 	 } 
 
 	 	 i f   ( t h i s . u i D i a l o g . i s ( " : d a t a ( u i - r e s i z a b l e ) " )   )   { 
 	 	 	 t h i s . u i D i a l o g . r e s i z a b l e (   " o p t i o n " ,   " m i n H e i g h t " ,   t h i s . _ m i n H e i g h t ( )   ) ; 
 	 	 } 
 	 } , 
 
 	 _ b l o c k F r a m e s :   f u n c t i o n ( )   { 
 	 	 t h i s . i f r a m e B l o c k s   =   t h i s . d o c u m e n t . f i n d (   " i f r a m e "   ) . m a p ( f u n c t i o n ( )   { 
 	 	 	 v a r   i f r a m e   =   $ (   t h i s   ) ; 
 
 	 	 	 r e t u r n   $ (   " < d i v > "   ) 
 	 	 	 	 . c s s ( { 
 	 	 	 	 	 p o s i t i o n :   " a b s o l u t e " , 
 	 	 	 	 	 w i d t h :   i f r a m e . o u t e r W i d t h ( ) , 
 	 	 	 	 	 h e i g h t :   i f r a m e . o u t e r H e i g h t ( ) 
 	 	 	 	 } ) 
 	 	 	 	 . a p p e n d T o (   i f r a m e . p a r e n t ( )   ) 
 	 	 	 	 . o f f s e t (   i f r a m e . o f f s e t ( )   ) [ 0 ] ; 
 	 	 } ) ; 
 	 } , 
 
 	 _ u n b l o c k F r a m e s :   f u n c t i o n ( )   { 
 	 	 i f   (   t h i s . i f r a m e B l o c k s   )   { 
 	 	 	 t h i s . i f r a m e B l o c k s . r e m o v e ( ) ; 
 	 	 	 d e l e t e   t h i s . i f r a m e B l o c k s ; 
 	 	 } 
 	 } , 
 
 	 _ a l l o w I n t e r a c t i o n :   f u n c t i o n (   e v e n t   )   { 
 	 	 i f   (   $ (   e v e n t . t a r g e t   ) . c l o s e s t ( " . u i - d i a l o g " ) . l e n g t h   )   { 
 	 	 	 r e t u r n   t r u e ; 
 	 	 } 
 
 	 	 / /   T O D O :   R e m o v e   h a c k   w h e n   d a t e p i c k e r   i m p l e m e n t s 
 	 	 / /   t h e   . u i - f r o n t   l o g i c   ( # 8 9 8 9 ) 
 	 	 r e t u r n   ! ! $ (   e v e n t . t a r g e t   ) . c l o s e s t ( " . u i - d a t e p i c k e r " ) . l e n g t h ; 
 	 } , 
 
 	 _ c r e a t e O v e r l a y :   f u n c t i o n ( )   { 
 	 	 i f   (   ! t h i s . o p t i o n s . m o d a l   )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 v a r   t h a t   =   t h i s , 
 	 	 	 w i d g e t F u l l N a m e   =   t h i s . w i d g e t F u l l N a m e ; 
 	 	 i f   (   ! $ . u i . d i a l o g . o v e r l a y I n s t a n c e s   )   { 
 	 	 	 / /   P r e v e n t   u s e   o f   a n c h o r s   a n d   i n p u t s . 
 	 	 	 / /   W e   u s e   a   d e l a y   i n   c a s e   t h e   o v e r l a y   i s   c r e a t e d   f r o m   a n 
 	 	 	 / /   e v e n t   t h a t   w e ' r e   g o i n g   t o   b e   c a n c e l l i n g .   ( # 2 8 0 4 ) 
 	 	 	 t h i s . _ d e l a y ( f u n c t i o n ( )   { 
 	 	 	 	 / /   H a n d l e   . d i a l o g ( ) . d i a l o g ( " c l o s e " )   ( # 4 0 6 5 ) 
 	 	 	 	 i f   (   $ . u i . d i a l o g . o v e r l a y I n s t a n c e s   )   { 
 	 	 	 	 	 t h i s . d o c u m e n t . b i n d (   " f o c u s i n . d i a l o g " ,   f u n c t i o n (   e v e n t   )   { 
 	 	 	 	 	 	 i f   (   ! t h a t . _ a l l o w I n t e r a c t i o n (   e v e n t   )   )   { 
 	 	 	 	 	 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 	 	 	 	 	 	 	 $ ( " . u i - d i a l o g : v i s i b l e : l a s t   . u i - d i a l o g - c o n t e n t " ) 
 	 	 	 	 	 	 	 	 . d a t a (   w i d g e t F u l l N a m e   ) . _ f o c u s T a b b a b l e ( ) ; 
 	 	 	 	 	 	 } 
 	 	 	 	 	 } ) ; 
 	 	 	 	 } 
 	 	 	 } ) ; 
 	 	 } 
 
 	 	 t h i s . o v e r l a y   =   $ ( " < d i v > " ) 
 	 	 	 . a d d C l a s s ( " u i - w i d g e t - o v e r l a y   u i - f r o n t " ) 
 	 	 	 . a p p e n d T o (   t h i s . _ a p p e n d T o ( )   ) ; 
 	 	 t h i s . _ o n (   t h i s . o v e r l a y ,   { 
 	 	 	 m o u s e d o w n :   " _ k e e p F o c u s " 
 	 	 } ) ; 
 	 	 $ . u i . d i a l o g . o v e r l a y I n s t a n c e s + + ; 
 	 } , 
 
 	 _ d e s t r o y O v e r l a y :   f u n c t i o n ( )   { 
 	 	 i f   (   ! t h i s . o p t i o n s . m o d a l   )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 i f   (   t h i s . o v e r l a y   )   { 
 	 	 	 $ . u i . d i a l o g . o v e r l a y I n s t a n c e s - - ; 
 
 	 	 	 i f   (   ! $ . u i . d i a l o g . o v e r l a y I n s t a n c e s   )   { 
 	 	 	 	 t h i s . d o c u m e n t . u n b i n d (   " f o c u s i n . d i a l o g "   ) ; 
 	 	 	 } 
 	 	 	 t h i s . o v e r l a y . r e m o v e ( ) ; 
 	 	 	 t h i s . o v e r l a y   =   n u l l ; 
 	 	 } 
 	 } 
 } ) ; 
 
 $ . u i . d i a l o g . o v e r l a y I n s t a n c e s   =   0 ; 
 
 / /   D E P R E C A T E D 
 i f   (   $ . u i B a c k C o m p a t   ! = =   f a l s e   )   { 
 	 / /   p o s i t i o n   o p t i o n   w i t h   a r r a y   n o t a t i o n 
 	 / /   j u s t   o v e r r i d e   w i t h   o l d   i m p l e m e n t a t i o n 
 	 $ . w i d g e t (   " u i . d i a l o g " ,   $ . u i . d i a l o g ,   { 
 	 	 _ p o s i t i o n :   f u n c t i o n ( )   { 
 	 	 	 v a r   p o s i t i o n   =   t h i s . o p t i o n s . p o s i t i o n , 
 	 	 	 	 m y A t   =   [ ] , 
 	 	 	 	 o f f s e t   =   [   0 ,   0   ] , 
 	 	 	 	 i s V i s i b l e ; 
 
 	 	 	 i f   (   p o s i t i o n   )   { 
 	 	 	 	 i f   (   t y p e o f   p o s i t i o n   = = =   " s t r i n g "   | |   ( t y p e o f   p o s i t i o n   = = =   " o b j e c t "   & &   " 0 "   i n   p o s i t i o n   )   )   { 
 	 	 	 	 	 m y A t   =   p o s i t i o n . s p l i t   ?   p o s i t i o n . s p l i t ( "   " )   :   [   p o s i t i o n [ 0 ] ,   p o s i t i o n [ 1 ]   ] ; 
 	 	 	 	 	 i f   (   m y A t . l e n g t h   = = =   1   )   { 
 	 	 	 	 	 	 m y A t [ 1 ]   =   m y A t [ 0 ] ; 
 	 	 	 	 	 } 
 
 	 	 	 	 	 $ . e a c h (   [   " l e f t " ,   " t o p "   ] ,   f u n c t i o n (   i ,   o f f s e t P o s i t i o n   )   { 
 	 	 	 	 	 	 i f   (   + m y A t [   i   ]   = = =   m y A t [   i   ]   )   { 
 	 	 	 	 	 	 	 o f f s e t [   i   ]   =   m y A t [   i   ] ; 
 	 	 	 	 	 	 	 m y A t [   i   ]   =   o f f s e t P o s i t i o n ; 
 	 	 	 	 	 	 } 
 	 	 	 	 	 } ) ; 
 
 	 	 	 	 	 p o s i t i o n   =   { 
 	 	 	 	 	 	 m y :   m y A t [ 0 ]   +   ( o f f s e t [ 0 ]   <   0   ?   o f f s e t [ 0 ]   :   " + "   +   o f f s e t [ 0 ] )   +   "   "   + 
 	 	 	 	 	 	 	 m y A t [ 1 ]   +   ( o f f s e t [ 1 ]   <   0   ?   o f f s e t [ 1 ]   :   " + "   +   o f f s e t [ 1 ] ) , 
 	 	 	 	 	 	 a t :   m y A t . j o i n ( "   " ) 
 	 	 	 	 	 } ; 
 	 	 	 	 } 
 
 	 	 	 	 p o s i t i o n   =   $ . e x t e n d (   { } ,   $ . u i . d i a l o g . p r o t o t y p e . o p t i o n s . p o s i t i o n ,   p o s i t i o n   ) ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 p o s i t i o n   =   $ . u i . d i a l o g . p r o t o t y p e . o p t i o n s . p o s i t i o n ; 
 	 	 	 } 
 
 	 	 	 / /   n e e d   t o   s h o w   t h e   d i a l o g   t o   g e t   t h e   a c t u a l   o f f s e t   i n   t h e   p o s i t i o n   p l u g i n 
 	 	 	 i s V i s i b l e   =   t h i s . u i D i a l o g . i s ( " : v i s i b l e " ) ; 
 	 	 	 i f   (   ! i s V i s i b l e   )   { 
 	 	 	 	 t h i s . u i D i a l o g . s h o w ( ) ; 
 	 	 	 } 
 	 	 	 t h i s . u i D i a l o g . p o s i t i o n (   p o s i t i o n   ) ; 
 	 	 	 i f   (   ! i s V i s i b l e   )   { 
 	 	 	 	 t h i s . u i D i a l o g . h i d e ( ) ; 
 	 	 	 } 
 	 	 } 
 	 } ) ; 
 } 
 
 } (   j Q u e r y   )   ) ; 
 
 ( f u n c t i o n (   $ ,   u n d e f i n e d   )   { 
 
 v a r   r v e r t i c a l   =   / u p | d o w n | v e r t i c a l / , 
 	 r p o s i t i v e m o t i o n   =   / u p | l e f t | v e r t i c a l | h o r i z o n t a l / ; 
 
 $ . e f f e c t s . e f f e c t . b l i n d   =   f u n c t i o n (   o ,   d o n e   )   { 
 	 / /   C r e a t e   e l e m e n t 
 	 v a r   e l   =   $ (   t h i s   ) , 
 	 	 p r o p s   =   [   " p o s i t i o n " ,   " t o p " ,   " b o t t o m " ,   " l e f t " ,   " r i g h t " ,   " h e i g h t " ,   " w i d t h "   ] , 
 	 	 m o d e   =   $ . e f f e c t s . s e t M o d e (   e l ,   o . m o d e   | |   " h i d e "   ) , 
 	 	 d i r e c t i o n   =   o . d i r e c t i o n   | |   " u p " , 
 	 	 v e r t i c a l   =   r v e r t i c a l . t e s t (   d i r e c t i o n   ) , 
 	 	 r e f   =   v e r t i c a l   ?   " h e i g h t "   :   " w i d t h " , 
 	 	 r e f 2   =   v e r t i c a l   ?   " t o p "   :   " l e f t " , 
 	 	 m o t i o n   =   r p o s i t i v e m o t i o n . t e s t (   d i r e c t i o n   ) , 
 	 	 a n i m a t i o n   =   { } , 
 	 	 s h o w   =   m o d e   = = =   " s h o w " , 
 	 	 w r a p p e r ,   d i s t a n c e ,   m a r g i n ; 
 
 	 / /   i f   a l r e a d y   w r a p p e d ,   t h e   w r a p p e r ' s   p r o p e r t i e s   a r e   m y   p r o p e r t y .   # 6 2 4 5 
 	 i f   (   e l . p a r e n t ( ) . i s (   " . u i - e f f e c t s - w r a p p e r "   )   )   { 
 	 	 $ . e f f e c t s . s a v e (   e l . p a r e n t ( ) ,   p r o p s   ) ; 
 	 }   e l s e   { 
 	 	 $ . e f f e c t s . s a v e (   e l ,   p r o p s   ) ; 
 	 } 
 	 e l . s h o w ( ) ; 
 	 w r a p p e r   =   $ . e f f e c t s . c r e a t e W r a p p e r (   e l   ) . c s s ( { 
 	 	 o v e r f l o w :   " h i d d e n " 
 	 } ) ; 
 
 	 d i s t a n c e   =   w r a p p e r [   r e f   ] ( ) ; 
 	 m a r g i n   =   p a r s e F l o a t (   w r a p p e r . c s s (   r e f 2   )   )   | |   0 ; 
 
 	 a n i m a t i o n [   r e f   ]   =   s h o w   ?   d i s t a n c e   :   0 ; 
 	 i f   (   ! m o t i o n   )   { 
 	 	 e l 
 	 	 	 . c s s (   v e r t i c a l   ?   " b o t t o m "   :   " r i g h t " ,   0   ) 
 	 	 	 . c s s (   v e r t i c a l   ?   " t o p "   :   " l e f t " ,   " a u t o "   ) 
 	 	 	 . c s s ( {   p o s i t i o n :   " a b s o l u t e "   } ) ; 
 
 	 	 a n i m a t i o n [   r e f 2   ]   =   s h o w   ?   m a r g i n   :   d i s t a n c e   +   m a r g i n ; 
 	 } 
 
 	 / /   s t a r t   a t   0   i f   w e   a r e   s h o w i n g 
 	 i f   (   s h o w   )   { 
 	 	 w r a p p e r . c s s (   r e f ,   0   ) ; 
 	 	 i f   (   !   m o t i o n   )   { 
 	 	 	 w r a p p e r . c s s (   r e f 2 ,   m a r g i n   +   d i s t a n c e   ) ; 
 	 	 } 
 	 } 
 
 	 / /   A n i m a t e 
 	 w r a p p e r . a n i m a t e (   a n i m a t i o n ,   { 
 	 	 d u r a t i o n :   o . d u r a t i o n , 
 	 	 e a s i n g :   o . e a s i n g , 
 	 	 q u e u e :   f a l s e , 
 	 	 c o m p l e t e :   f u n c t i o n ( )   { 
 	 	 	 i f   (   m o d e   = = =   " h i d e "   )   { 
 	 	 	 	 e l . h i d e ( ) ; 
 	 	 	 } 
 	 	 	 $ . e f f e c t s . r e s t o r e (   e l ,   p r o p s   ) ; 
 	 	 	 $ . e f f e c t s . r e m o v e W r a p p e r (   e l   ) ; 
 	 	 	 d o n e ( ) ; 
 	 	 } 
 	 } ) ; 
 
 } ; 
 
 } ) ( j Q u e r y ) ; 
 
 ( f u n c t i o n (   $ ,   u n d e f i n e d   )   { 
 
 $ . e f f e c t s . e f f e c t . b o u n c e   =   f u n c t i o n (   o ,   d o n e   )   { 
 	 v a r   e l   =   $ (   t h i s   ) , 
 	 	 p r o p s   =   [   " p o s i t i o n " ,   " t o p " ,   " b o t t o m " ,   " l e f t " ,   " r i g h t " ,   " h e i g h t " ,   " w i d t h "   ] , 
 
 	 	 / /   d e f a u l t s : 
 	 	 m o d e   =   $ . e f f e c t s . s e t M o d e (   e l ,   o . m o d e   | |   " e f f e c t "   ) , 
 	 	 h i d e   =   m o d e   = = =   " h i d e " , 
 	 	 s h o w   =   m o d e   = = =   " s h o w " , 
 	 	 d i r e c t i o n   =   o . d i r e c t i o n   | |   " u p " , 
 	 	 d i s t a n c e   =   o . d i s t a n c e , 
 	 	 t i m e s   =   o . t i m e s   | |   5 , 
 
 	 	 / /   n u m b e r   o f   i n t e r n a l   a n i m a t i o n s 
 	 	 a n i m s   =   t i m e s   *   2   +   (   s h o w   | |   h i d e   ?   1   :   0   ) , 
 	 	 s p e e d   =   o . d u r a t i o n   /   a n i m s , 
 	 	 e a s i n g   =   o . e a s i n g , 
 
 	 	 / /   u t i l i t y : 
 	 	 r e f   =   (   d i r e c t i o n   = = =   " u p "   | |   d i r e c t i o n   = = =   " d o w n "   )   ?   " t o p "   :   " l e f t " , 
 	 	 m o t i o n   =   (   d i r e c t i o n   = = =   " u p "   | |   d i r e c t i o n   = = =   " l e f t "   ) , 
 	 	 i , 
 	 	 u p A n i m , 
 	 	 d o w n A n i m , 
 
 	 	 / /   w e   w i l l   n e e d   t o   r e - a s s e m b l e   t h e   q u e u e   t o   s t a c k   o u r   a n i m a t i o n s   i n   p l a c e 
 	 	 q u e u e   =   e l . q u e u e ( ) , 
 	 	 q u e u e l e n   =   q u e u e . l e n g t h ; 
 
 	 / /   A v o i d   t o u c h i n g   o p a c i t y   t o   p r e v e n t   c l e a r T y p e   a n d   P N G   i s s u e s   i n   I E 
 	 i f   (   s h o w   | |   h i d e   )   { 
 	 	 p r o p s . p u s h (   " o p a c i t y "   ) ; 
 	 } 
 
 	 $ . e f f e c t s . s a v e (   e l ,   p r o p s   ) ; 
 	 e l . s h o w ( ) ; 
 	 $ . e f f e c t s . c r e a t e W r a p p e r (   e l   ) ;   / /   C r e a t e   W r a p p e r 
 
 	 / /   d e f a u l t   d i s t a n c e   f o r   t h e   B I G G E S T   b o u n c e   i s   t h e   o u t e r   D i s t a n c e   /   3 
 	 i f   (   ! d i s t a n c e   )   { 
 	 	 d i s t a n c e   =   e l [   r e f   = = =   " t o p "   ?   " o u t e r H e i g h t "   :   " o u t e r W i d t h "   ] ( )   /   3 ; 
 	 } 
 
 	 i f   (   s h o w   )   { 
 	 	 d o w n A n i m   =   {   o p a c i t y :   1   } ; 
 	 	 d o w n A n i m [   r e f   ]   =   0 ; 
 
 	 	 / /   i f   w e   a r e   s h o w i n g ,   f o r c e   o p a c i t y   0   a n d   s e t   t h e   i n i t i a l   p o s i t i o n 
 	 	 / /   t h e n   d o   t h e   " f i r s t "   a n i m a t i o n 
 	 	 e l . c s s (   " o p a c i t y " ,   0   ) 
 	 	 	 . c s s (   r e f ,   m o t i o n   ?   - d i s t a n c e   *   2   :   d i s t a n c e   *   2   ) 
 	 	 	 . a n i m a t e (   d o w n A n i m ,   s p e e d ,   e a s i n g   ) ; 
 	 } 
 
 	 / /   s t a r t   a t   t h e   s m a l l e s t   d i s t a n c e   i f   w e   a r e   h i d i n g 
 	 i f   (   h i d e   )   { 
 	 	 d i s t a n c e   =   d i s t a n c e   /   M a t h . p o w (   2 ,   t i m e s   -   1   ) ; 
 	 } 
 
 	 d o w n A n i m   =   { } ; 
 	 d o w n A n i m [   r e f   ]   =   0 ; 
 	 / /   B o u n c e s   u p / d o w n / l e f t / r i g h t   t h e n   b a c k   t o   0   - -   t i m e s   *   2   a n i m a t i o n s   h a p p e n   h e r e 
 	 f o r   (   i   =   0 ;   i   <   t i m e s ;   i + +   )   { 
 	 	 u p A n i m   =   { } ; 
 	 	 u p A n i m [   r e f   ]   =   (   m o t i o n   ?   " - = "   :   " + = "   )   +   d i s t a n c e ; 
 
 	 	 e l . a n i m a t e (   u p A n i m ,   s p e e d ,   e a s i n g   ) 
 	 	 	 . a n i m a t e (   d o w n A n i m ,   s p e e d ,   e a s i n g   ) ; 
 
 	 	 d i s t a n c e   =   h i d e   ?   d i s t a n c e   *   2   :   d i s t a n c e   /   2 ; 
 	 } 
 
 	 / /   L a s t   B o u n c e   w h e n   H i d i n g 
 	 i f   (   h i d e   )   { 
 	 	 u p A n i m   =   {   o p a c i t y :   0   } ; 
 	 	 u p A n i m [   r e f   ]   =   (   m o t i o n   ?   " - = "   :   " + = "   )   +   d i s t a n c e ; 
 
 	 	 e l . a n i m a t e (   u p A n i m ,   s p e e d ,   e a s i n g   ) ; 
 	 } 
 
 	 e l . q u e u e ( f u n c t i o n ( )   { 
 	 	 i f   (   h i d e   )   { 
 	 	 	 e l . h i d e ( ) ; 
 	 	 } 
 	 	 $ . e f f e c t s . r e s t o r e (   e l ,   p r o p s   ) ; 
 	 	 $ . e f f e c t s . r e m o v e W r a p p e r (   e l   ) ; 
 	 	 d o n e ( ) ; 
 	 } ) ; 
 
 	 / /   i n j e c t   a l l   t h e   a n i m a t i o n s   w e   j u s t   q u e u e d   t o   b e   f i r s t   i n   l i n e   ( a f t e r   " i n p r o g r e s s " ) 
 	 i f   (   q u e u e l e n   >   1 )   { 
 	 	 q u e u e . s p l i c e . a p p l y (   q u e u e , 
 	 	 	 [   1 ,   0   ] . c o n c a t (   q u e u e . s p l i c e (   q u e u e l e n ,   a n i m s   +   1   )   )   ) ; 
 	 } 
 	 e l . d e q u e u e ( ) ; 
 
 } ; 
 
 } ) ( j Q u e r y ) ; 
 
 ( f u n c t i o n (   $ ,   u n d e f i n e d   )   { 
 
 $ . e f f e c t s . e f f e c t . c l i p   =   f u n c t i o n (   o ,   d o n e   )   { 
 	 / /   C r e a t e   e l e m e n t 
 	 v a r   e l   =   $ (   t h i s   ) , 
 	 	 p r o p s   =   [   " p o s i t i o n " ,   " t o p " ,   " b o t t o m " ,   " l e f t " ,   " r i g h t " ,   " h e i g h t " ,   " w i d t h "   ] , 
 	 	 m o d e   =   $ . e f f e c t s . s e t M o d e (   e l ,   o . m o d e   | |   " h i d e "   ) , 
 	 	 s h o w   =   m o d e   = = =   " s h o w " , 
 	 	 d i r e c t i o n   =   o . d i r e c t i o n   | |   " v e r t i c a l " , 
 	 	 v e r t   =   d i r e c t i o n   = = =   " v e r t i c a l " , 
 	 	 s i z e   =   v e r t   ?   " h e i g h t "   :   " w i d t h " , 
 	 	 p o s i t i o n   =   v e r t   ?   " t o p "   :   " l e f t " , 
 	 	 a n i m a t i o n   =   { } , 
 	 	 w r a p p e r ,   a n i m a t e ,   d i s t a n c e ; 
 
 	 / /   S a v e   &   S h o w 
 	 $ . e f f e c t s . s a v e (   e l ,   p r o p s   ) ; 
 	 e l . s h o w ( ) ; 
 
 	 / /   C r e a t e   W r a p p e r 
 	 w r a p p e r   =   $ . e f f e c t s . c r e a t e W r a p p e r (   e l   ) . c s s ( { 
 	 	 o v e r f l o w :   " h i d d e n " 
 	 } ) ; 
 	 a n i m a t e   =   (   e l [ 0 ] . t a g N a m e   = = =   " I M G "   )   ?   w r a p p e r   :   e l ; 
 	 d i s t a n c e   =   a n i m a t e [   s i z e   ] ( ) ; 
 
 	 / /   S h i f t 
 	 i f   (   s h o w   )   { 
 	 	 a n i m a t e . c s s (   s i z e ,   0   ) ; 
 	 	 a n i m a t e . c s s (   p o s i t i o n ,   d i s t a n c e   /   2   ) ; 
 	 } 
 
 	 / /   C r e a t e   A n i m a t i o n   O b j e c t : 
 	 a n i m a t i o n [   s i z e   ]   =   s h o w   ?   d i s t a n c e   :   0 ; 
 	 a n i m a t i o n [   p o s i t i o n   ]   =   s h o w   ?   0   :   d i s t a n c e   /   2 ; 
 
 	 / /   A n i m a t e 
 	 a n i m a t e . a n i m a t e (   a n i m a t i o n ,   { 
 	 	 q u e u e :   f a l s e , 
 	 	 d u r a t i o n :   o . d u r a t i o n , 
 	 	 e a s i n g :   o . e a s i n g , 
 	 	 c o m p l e t e :   f u n c t i o n ( )   { 
 	 	 	 i f   (   ! s h o w   )   { 
 	 	 	 	 e l . h i d e ( ) ; 
 	 	 	 } 
 	 	 	 $ . e f f e c t s . r e s t o r e (   e l ,   p r o p s   ) ; 
 	 	 	 $ . e f f e c t s . r e m o v e W r a p p e r (   e l   ) ; 
 	 	 	 d o n e ( ) ; 
 	 	 } 
 	 } ) ; 
 
 } ; 
 
 } ) ( j Q u e r y ) ; 
 
 ( f u n c t i o n (   $ ,   u n d e f i n e d   )   { 
 
 $ . e f f e c t s . e f f e c t . d r o p   =   f u n c t i o n (   o ,   d o n e   )   { 
 
 	 v a r   e l   =   $ (   t h i s   ) , 
 	 	 p r o p s   =   [   " p o s i t i o n " ,   " t o p " ,   " b o t t o m " ,   " l e f t " ,   " r i g h t " ,   " o p a c i t y " ,   " h e i g h t " ,   " w i d t h "   ] , 
 	 	 m o d e   =   $ . e f f e c t s . s e t M o d e (   e l ,   o . m o d e   | |   " h i d e "   ) , 
 	 	 s h o w   =   m o d e   = = =   " s h o w " , 
 	 	 d i r e c t i o n   =   o . d i r e c t i o n   | |   " l e f t " , 
 	 	 r e f   =   (   d i r e c t i o n   = = =   " u p "   | |   d i r e c t i o n   = = =   " d o w n "   )   ?   " t o p "   :   " l e f t " , 
 	 	 m o t i o n   =   (   d i r e c t i o n   = = =   " u p "   | |   d i r e c t i o n   = = =   " l e f t "   )   ?   " p o s "   :   " n e g " , 
 	 	 a n i m a t i o n   =   { 
 	 	 	 o p a c i t y :   s h o w   ?   1   :   0 
 	 	 } , 
 	 	 d i s t a n c e ; 
 
 	 / /   A d j u s t 
 	 $ . e f f e c t s . s a v e (   e l ,   p r o p s   ) ; 
 	 e l . s h o w ( ) ; 
 	 $ . e f f e c t s . c r e a t e W r a p p e r (   e l   ) ; 
 
 	 d i s t a n c e   =   o . d i s t a n c e   | |   e l [   r e f   = = =   " t o p "   ?   " o u t e r H e i g h t " :   " o u t e r W i d t h "   ] (   t r u e   )   /   2 ; 
 
 	 i f   (   s h o w   )   { 
 	 	 e l 
 	 	 	 . c s s (   " o p a c i t y " ,   0   ) 
 	 	 	 . c s s (   r e f ,   m o t i o n   = = =   " p o s "   ?   - d i s t a n c e   :   d i s t a n c e   ) ; 
 	 } 
 
 	 / /   A n i m a t i o n 
 	 a n i m a t i o n [   r e f   ]   =   (   s h o w   ? 
 	 	 (   m o t i o n   = = =   " p o s "   ?   " + = "   :   " - = "   )   : 
 	 	 (   m o t i o n   = = =   " p o s "   ?   " - = "   :   " + = "   )   )   + 
 	 	 d i s t a n c e ; 
 
 	 / /   A n i m a t e 
 	 e l . a n i m a t e (   a n i m a t i o n ,   { 
 	 	 q u e u e :   f a l s e , 
 	 	 d u r a t i o n :   o . d u r a t i o n , 
 	 	 e a s i n g :   o . e a s i n g , 
 	 	 c o m p l e t e :   f u n c t i o n ( )   { 
 	 	 	 i f   (   m o d e   = = =   " h i d e "   )   { 
 	 	 	 	 e l . h i d e ( ) ; 
 	 	 	 } 
 	 	 	 $ . e f f e c t s . r e s t o r e (   e l ,   p r o p s   ) ; 
 	 	 	 $ . e f f e c t s . r e m o v e W r a p p e r (   e l   ) ; 
 	 	 	 d o n e ( ) ; 
 	 	 } 
 	 } ) ; 
 } ; 
 
 } ) ( j Q u e r y ) ; 
 
 ( f u n c t i o n (   $ ,   u n d e f i n e d   )   { 
 
 $ . e f f e c t s . e f f e c t . e x p l o d e   =   f u n c t i o n (   o ,   d o n e   )   { 
 
 	 v a r   r o w s   =   o . p i e c e s   ?   M a t h . r o u n d (   M a t h . s q r t (   o . p i e c e s   )   )   :   3 , 
 	 	 c e l l s   =   r o w s , 
 	 	 e l   =   $ (   t h i s   ) , 
 	 	 m o d e   =   $ . e f f e c t s . s e t M o d e (   e l ,   o . m o d e   | |   " h i d e "   ) , 
 	 	 s h o w   =   m o d e   = = =   " s h o w " , 
 
 	 	 / /   s h o w   a n d   t h e n   v i s i b i l i t y : h i d d e n   t h e   e l e m e n t   b e f o r e   c a l c u l a t i n g   o f f s e t 
 	 	 o f f s e t   =   e l . s h o w ( ) . c s s (   " v i s i b i l i t y " ,   " h i d d e n "   ) . o f f s e t ( ) , 
 
 	 	 / /   w i d t h   a n d   h e i g h t   o f   a   p i e c e 
 	 	 w i d t h   =   M a t h . c e i l (   e l . o u t e r W i d t h ( )   /   c e l l s   ) , 
 	 	 h e i g h t   =   M a t h . c e i l (   e l . o u t e r H e i g h t ( )   /   r o w s   ) , 
 	 	 p i e c e s   =   [ ] , 
 
 	 	 / /   l o o p 
 	 	 i ,   j ,   l e f t ,   t o p ,   m x ,   m y ; 
 
 	 / /   c h i l d r e n   a n i m a t e   c o m p l e t e : 
 	 f u n c t i o n   c h i l d C o m p l e t e ( )   { 
 	 	 p i e c e s . p u s h (   t h i s   ) ; 
 	 	 i f   (   p i e c e s . l e n g t h   = = =   r o w s   *   c e l l s   )   { 
 	 	 	 a n i m C o m p l e t e ( ) ; 
 	 	 } 
 	 } 
 
 	 / /   c l o n e   t h e   e l e m e n t   f o r   e a c h   r o w   a n d   c e l l . 
 	 f o r (   i   =   0 ;   i   <   r o w s   ;   i + +   )   {   / /   = = = > 
 	 	 t o p   =   o f f s e t . t o p   +   i   *   h e i g h t ; 
 	 	 m y   =   i   -   (   r o w s   -   1   )   /   2   ; 
 
 	 	 f o r (   j   =   0 ;   j   <   c e l l s   ;   j + +   )   {   / /   | | | 
 	 	 	 l e f t   =   o f f s e t . l e f t   +   j   *   w i d t h ; 
 	 	 	 m x   =   j   -   (   c e l l s   -   1   )   /   2   ; 
 
 	 	 	 / /   C r e a t e   a   c l o n e   o f   t h e   n o w   h i d d e n   m a i n   e l e m e n t   t h a t   w i l l   b e   a b s o l u t e   p o s i t i o n e d 
 	 	 	 / /   w i t h i n   a   w r a p p e r   d i v   o f f   t h e   - l e f t   a n d   - t o p   e q u a l   t o   s i z e   o f   o u r   p i e c e s 
 	 	 	 e l 
 	 	 	 	 . c l o n e ( ) 
 	 	 	 	 . a p p e n d T o (   " b o d y "   ) 
 	 	 	 	 . w r a p (   " < d i v > < / d i v > "   ) 
 	 	 	 	 . c s s ( { 
 	 	 	 	 	 p o s i t i o n :   " a b s o l u t e " , 
 	 	 	 	 	 v i s i b i l i t y :   " v i s i b l e " , 
 	 	 	 	 	 l e f t :   - j   *   w i d t h , 
 	 	 	 	 	 t o p :   - i   *   h e i g h t 
 	 	 	 	 } ) 
 
 	 	 	 / /   s e l e c t   t h e   w r a p p e r   -   m a k e   i t   o v e r f l o w :   h i d d e n   a n d   a b s o l u t e   p o s i t i o n e d   b a s e d   o n 
 	 	 	 / /   w h e r e   t h e   o r i g i n a l   w a s   l o c a t e d   + l e f t   a n d   + t o p   e q u a l   t o   t h e   s i z e   o f   p i e c e s 
 	 	 	 	 . p a r e n t ( ) 
 	 	 	 	 . a d d C l a s s (   " u i - e f f e c t s - e x p l o d e "   ) 
 	 	 	 	 . c s s ( { 
 	 	 	 	 	 p o s i t i o n :   " a b s o l u t e " , 
 	 	 	 	 	 o v e r f l o w :   " h i d d e n " , 
 	 	 	 	 	 w i d t h :   w i d t h , 
 	 	 	 	 	 h e i g h t :   h e i g h t , 
 	 	 	 	 	 l e f t :   l e f t   +   (   s h o w   ?   m x   *   w i d t h   :   0   ) , 
 	 	 	 	 	 t o p :   t o p   +   (   s h o w   ?   m y   *   h e i g h t   :   0   ) , 
 	 	 	 	 	 o p a c i t y :   s h o w   ?   0   :   1 
 	 	 	 	 } ) . a n i m a t e ( { 
 	 	 	 	 	 l e f t :   l e f t   +   (   s h o w   ?   0   :   m x   *   w i d t h   ) , 
 	 	 	 	 	 t o p :   t o p   +   (   s h o w   ?   0   :   m y   *   h e i g h t   ) , 
 	 	 	 	 	 o p a c i t y :   s h o w   ?   1   :   0 
 	 	 	 	 } ,   o . d u r a t i o n   | |   5 0 0 ,   o . e a s i n g ,   c h i l d C o m p l e t e   ) ; 
 	 	 } 
 	 } 
 
 	 f u n c t i o n   a n i m C o m p l e t e ( )   { 
 	 	 e l . c s s ( { 
 	 	 	 v i s i b i l i t y :   " v i s i b l e " 
 	 	 } ) ; 
 	 	 $ (   p i e c e s   ) . r e m o v e ( ) ; 
 	 	 i f   (   ! s h o w   )   { 
 	 	 	 e l . h i d e ( ) ; 
 	 	 } 
 	 	 d o n e ( ) ; 
 	 } 
 } ; 
 
 } ) ( j Q u e r y ) ; 
 
 ( f u n c t i o n (   $ ,   u n d e f i n e d   )   { 
 
 $ . e f f e c t s . e f f e c t . f a d e   =   f u n c t i o n (   o ,   d o n e   )   { 
 	 v a r   e l   =   $ (   t h i s   ) , 
 	 	 m o d e   =   $ . e f f e c t s . s e t M o d e (   e l ,   o . m o d e   | |   " t o g g l e "   ) ; 
 
 	 e l . a n i m a t e ( { 
 	 	 o p a c i t y :   m o d e 
 	 } ,   { 
 	 	 q u e u e :   f a l s e , 
 	 	 d u r a t i o n :   o . d u r a t i o n , 
 	 	 e a s i n g :   o . e a s i n g , 
 	 	 c o m p l e t e :   d o n e 
 	 } ) ; 
 } ; 
 
 } ) (   j Q u e r y   ) ; 
 
 ( f u n c t i o n (   $ ,   u n d e f i n e d   )   { 
 
 $ . e f f e c t s . e f f e c t . f o l d   =   f u n c t i o n (   o ,   d o n e   )   { 
 
 	 / /   C r e a t e   e l e m e n t 
 	 v a r   e l   =   $ (   t h i s   ) , 
 	 	 p r o p s   =   [   " p o s i t i o n " ,   " t o p " ,   " b o t t o m " ,   " l e f t " ,   " r i g h t " ,   " h e i g h t " ,   " w i d t h "   ] , 
 	 	 m o d e   =   $ . e f f e c t s . s e t M o d e (   e l ,   o . m o d e   | |   " h i d e "   ) , 
 	 	 s h o w   =   m o d e   = = =   " s h o w " , 
 	 	 h i d e   =   m o d e   = = =   " h i d e " , 
 	 	 s i z e   =   o . s i z e   | |   1 5 , 
 	 	 p e r c e n t   =   / ( [ 0 - 9 ] + ) % / . e x e c (   s i z e   ) , 
 	 	 h o r i z F i r s t   =   ! ! o . h o r i z F i r s t , 
 	 	 w i d t h F i r s t   =   s h o w   ! = =   h o r i z F i r s t , 
 	 	 r e f   =   w i d t h F i r s t   ?   [   " w i d t h " ,   " h e i g h t "   ]   :   [   " h e i g h t " ,   " w i d t h "   ] , 
 	 	 d u r a t i o n   =   o . d u r a t i o n   /   2 , 
 	 	 w r a p p e r ,   d i s t a n c e , 
 	 	 a n i m a t i o n 1   =   { } , 
 	 	 a n i m a t i o n 2   =   { } ; 
 
 	 $ . e f f e c t s . s a v e (   e l ,   p r o p s   ) ; 
 	 e l . s h o w ( ) ; 
 
 	 / /   C r e a t e   W r a p p e r 
 	 w r a p p e r   =   $ . e f f e c t s . c r e a t e W r a p p e r (   e l   ) . c s s ( { 
 	 	 o v e r f l o w :   " h i d d e n " 
 	 } ) ; 
 	 d i s t a n c e   =   w i d t h F i r s t   ? 
 	 	 [   w r a p p e r . w i d t h ( ) ,   w r a p p e r . h e i g h t ( )   ]   : 
 	 	 [   w r a p p e r . h e i g h t ( ) ,   w r a p p e r . w i d t h ( )   ] ; 
 
 	 i f   (   p e r c e n t   )   { 
 	 	 s i z e   =   p a r s e I n t (   p e r c e n t [   1   ] ,   1 0   )   /   1 0 0   *   d i s t a n c e [   h i d e   ?   0   :   1   ] ; 
 	 } 
 	 i f   (   s h o w   )   { 
 	 	 w r a p p e r . c s s (   h o r i z F i r s t   ?   { 
 	 	 	 h e i g h t :   0 , 
 	 	 	 w i d t h :   s i z e 
 	 	 }   :   { 
 	 	 	 h e i g h t :   s i z e , 
 	 	 	 w i d t h :   0 
 	 	 } ) ; 
 	 } 
 
 	 / /   A n i m a t i o n 
 	 a n i m a t i o n 1 [   r e f [   0   ]   ]   =   s h o w   ?   d i s t a n c e [   0   ]   :   s i z e ; 
 	 a n i m a t i o n 2 [   r e f [   1   ]   ]   =   s h o w   ?   d i s t a n c e [   1   ]   :   0 ; 
 
 	 / /   A n i m a t e 
 	 w r a p p e r 
 	 	 . a n i m a t e (   a n i m a t i o n 1 ,   d u r a t i o n ,   o . e a s i n g   ) 
 	 	 . a n i m a t e (   a n i m a t i o n 2 ,   d u r a t i o n ,   o . e a s i n g ,   f u n c t i o n ( )   { 
 	 	 	 i f   (   h i d e   )   { 
 	 	 	 	 e l . h i d e ( ) ; 
 	 	 	 } 
 	 	 	 $ . e f f e c t s . r e s t o r e (   e l ,   p r o p s   ) ; 
 	 	 	 $ . e f f e c t s . r e m o v e W r a p p e r (   e l   ) ; 
 	 	 	 d o n e ( ) ; 
 	 	 } ) ; 
 
 } ; 
 
 } ) ( j Q u e r y ) ; 
 
 ( f u n c t i o n (   $ ,   u n d e f i n e d   )   { 
 
 $ . e f f e c t s . e f f e c t . h i g h l i g h t   =   f u n c t i o n (   o ,   d o n e   )   { 
 	 v a r   e l e m   =   $ (   t h i s   ) , 
 	 	 p r o p s   =   [   " b a c k g r o u n d I m a g e " ,   " b a c k g r o u n d C o l o r " ,   " o p a c i t y "   ] , 
 	 	 m o d e   =   $ . e f f e c t s . s e t M o d e (   e l e m ,   o . m o d e   | |   " s h o w "   ) , 
 	 	 a n i m a t i o n   =   { 
 	 	 	 b a c k g r o u n d C o l o r :   e l e m . c s s (   " b a c k g r o u n d C o l o r "   ) 
 	 	 } ; 
 
 	 i f   ( m o d e   = = =   " h i d e " )   { 
 	 	 a n i m a t i o n . o p a c i t y   =   0 ; 
 	 } 
 
 	 $ . e f f e c t s . s a v e (   e l e m ,   p r o p s   ) ; 
 
 	 e l e m 
 	 	 . s h o w ( ) 
 	 	 . c s s ( { 
 	 	 	 b a c k g r o u n d I m a g e :   " n o n e " , 
 	 	 	 b a c k g r o u n d C o l o r :   o . c o l o r   | |   " # f f f f 9 9 " 
 	 	 } ) 
 	 	 . a n i m a t e (   a n i m a t i o n ,   { 
 	 	 	 q u e u e :   f a l s e , 
 	 	 	 d u r a t i o n :   o . d u r a t i o n , 
 	 	 	 e a s i n g :   o . e a s i n g , 
 	 	 	 c o m p l e t e :   f u n c t i o n ( )   { 
 	 	 	 	 i f   (   m o d e   = = =   " h i d e "   )   { 
 	 	 	 	 	 e l e m . h i d e ( ) ; 
 	 	 	 	 } 
 	 	 	 	 $ . e f f e c t s . r e s t o r e (   e l e m ,   p r o p s   ) ; 
 	 	 	 	 d o n e ( ) ; 
 	 	 	 } 
 	 	 } ) ; 
 } ; 
 
 } ) ( j Q u e r y ) ; 
 
 ( f u n c t i o n (   $ ,   u n d e f i n e d   )   { 
 
 $ . e f f e c t s . e f f e c t . p u l s a t e   =   f u n c t i o n (   o ,   d o n e   )   { 
 	 v a r   e l e m   =   $ (   t h i s   ) , 
 	 	 m o d e   =   $ . e f f e c t s . s e t M o d e (   e l e m ,   o . m o d e   | |   " s h o w "   ) , 
 	 	 s h o w   =   m o d e   = = =   " s h o w " , 
 	 	 h i d e   =   m o d e   = = =   " h i d e " , 
 	 	 s h o w h i d e   =   (   s h o w   | |   m o d e   = = =   " h i d e "   ) , 
 
 	 	 / /   s h o w i n g   o r   h i d i n g   l e a v e s   o f   t h e   " l a s t "   a n i m a t i o n 
 	 	 a n i m s   =   (   (   o . t i m e s   | |   5   )   *   2   )   +   (   s h o w h i d e   ?   1   :   0   ) , 
 	 	 d u r a t i o n   =   o . d u r a t i o n   /   a n i m s , 
 	 	 a n i m a t e T o   =   0 , 
 	 	 q u e u e   =   e l e m . q u e u e ( ) , 
 	 	 q u e u e l e n   =   q u e u e . l e n g t h , 
 	 	 i ; 
 
 	 i f   (   s h o w   | |   ! e l e m . i s ( " : v i s i b l e " ) )   { 
 	 	 e l e m . c s s (   " o p a c i t y " ,   0   ) . s h o w ( ) ; 
 	 	 a n i m a t e T o   =   1 ; 
 	 } 
 
 	 / /   a n i m s   -   1   o p a c i t y   " t o g g l e s " 
 	 f o r   (   i   =   1 ;   i   <   a n i m s ;   i + +   )   { 
 	 	 e l e m . a n i m a t e ( { 
 	 	 	 o p a c i t y :   a n i m a t e T o 
 	 	 } ,   d u r a t i o n ,   o . e a s i n g   ) ; 
 	 	 a n i m a t e T o   =   1   -   a n i m a t e T o ; 
 	 } 
 
 	 e l e m . a n i m a t e ( { 
 	 	 o p a c i t y :   a n i m a t e T o 
 	 } ,   d u r a t i o n ,   o . e a s i n g ) ; 
 
 	 e l e m . q u e u e ( f u n c t i o n ( )   { 
 	 	 i f   (   h i d e   )   { 
 	 	 	 e l e m . h i d e ( ) ; 
 	 	 } 
 	 	 d o n e ( ) ; 
 	 } ) ; 
 
 	 / /   W e   j u s t   q u e u e d   u p   " a n i m s "   a n i m a t i o n s ,   w e   n e e d   t o   p u t   t h e m   n e x t   i n   t h e   q u e u e 
 	 i f   (   q u e u e l e n   >   1   )   { 
 	 	 q u e u e . s p l i c e . a p p l y (   q u e u e , 
 	 	 	 [   1 ,   0   ] . c o n c a t (   q u e u e . s p l i c e (   q u e u e l e n ,   a n i m s   +   1   )   )   ) ; 
 	 } 
 	 e l e m . d e q u e u e ( ) ; 
 } ; 
 
 } ) ( j Q u e r y ) ; 
 
 ( f u n c t i o n (   $ ,   u n d e f i n e d   )   { 
 
 $ . e f f e c t s . e f f e c t . p u f f   =   f u n c t i o n (   o ,   d o n e   )   { 
 	 v a r   e l e m   =   $ (   t h i s   ) , 
 	 	 m o d e   =   $ . e f f e c t s . s e t M o d e (   e l e m ,   o . m o d e   | |   " h i d e "   ) , 
 	 	 h i d e   =   m o d e   = = =   " h i d e " , 
 	 	 p e r c e n t   =   p a r s e I n t (   o . p e r c e n t ,   1 0   )   | |   1 5 0 , 
 	 	 f a c t o r   =   p e r c e n t   /   1 0 0 , 
 	 	 o r i g i n a l   =   { 
 	 	 	 h e i g h t :   e l e m . h e i g h t ( ) , 
 	 	 	 w i d t h :   e l e m . w i d t h ( ) , 
 	 	 	 o u t e r H e i g h t :   e l e m . o u t e r H e i g h t ( ) , 
 	 	 	 o u t e r W i d t h :   e l e m . o u t e r W i d t h ( ) 
 	 	 } ; 
 
 	 $ . e x t e n d (   o ,   { 
 	 	 e f f e c t :   " s c a l e " , 
 	 	 q u e u e :   f a l s e , 
 	 	 f a d e :   t r u e , 
 	 	 m o d e :   m o d e , 
 	 	 c o m p l e t e :   d o n e , 
 	 	 p e r c e n t :   h i d e   ?   p e r c e n t   :   1 0 0 , 
 	 	 f r o m :   h i d e   ? 
 	 	 	 o r i g i n a l   : 
 	 	 	 { 
 	 	 	 	 h e i g h t :   o r i g i n a l . h e i g h t   *   f a c t o r , 
 	 	 	 	 w i d t h :   o r i g i n a l . w i d t h   *   f a c t o r , 
 	 	 	 	 o u t e r H e i g h t :   o r i g i n a l . o u t e r H e i g h t   *   f a c t o r , 
 	 	 	 	 o u t e r W i d t h :   o r i g i n a l . o u t e r W i d t h   *   f a c t o r 
 	 	 	 } 
 	 } ) ; 
 
 	 e l e m . e f f e c t (   o   ) ; 
 } ; 
 
 $ . e f f e c t s . e f f e c t . s c a l e   =   f u n c t i o n (   o ,   d o n e   )   { 
 
 	 / /   C r e a t e   e l e m e n t 
 	 v a r   e l   =   $ (   t h i s   ) , 
 	 	 o p t i o n s   =   $ . e x t e n d (   t r u e ,   { } ,   o   ) , 
 	 	 m o d e   =   $ . e f f e c t s . s e t M o d e (   e l ,   o . m o d e   | |   " e f f e c t "   ) , 
 	 	 p e r c e n t   =   p a r s e I n t (   o . p e r c e n t ,   1 0   )   | | 
 	 	 	 (   p a r s e I n t (   o . p e r c e n t ,   1 0   )   = = =   0   ?   0   :   (   m o d e   = = =   " h i d e "   ?   0   :   1 0 0   )   ) , 
 	 	 d i r e c t i o n   =   o . d i r e c t i o n   | |   " b o t h " , 
 	 	 o r i g i n   =   o . o r i g i n , 
 	 	 o r i g i n a l   =   { 
 	 	 	 h e i g h t :   e l . h e i g h t ( ) , 
 	 	 	 w i d t h :   e l . w i d t h ( ) , 
 	 	 	 o u t e r H e i g h t :   e l . o u t e r H e i g h t ( ) , 
 	 	 	 o u t e r W i d t h :   e l . o u t e r W i d t h ( ) 
 	 	 } , 
 	 	 f a c t o r   =   { 
 	 	 	 y :   d i r e c t i o n   ! = =   " h o r i z o n t a l "   ?   ( p e r c e n t   /   1 0 0 )   :   1 , 
 	 	 	 x :   d i r e c t i o n   ! = =   " v e r t i c a l "   ?   ( p e r c e n t   /   1 0 0 )   :   1 
 	 	 } ; 
 
 	 / /   W e   a r e   g o i n g   t o   p a s s   t h i s   e f f e c t   t o   t h e   s i z e   e f f e c t : 
 	 o p t i o n s . e f f e c t   =   " s i z e " ; 
 	 o p t i o n s . q u e u e   =   f a l s e ; 
 	 o p t i o n s . c o m p l e t e   =   d o n e ; 
 
 	 / /   S e t   d e f a u l t   o r i g i n   a n d   r e s t o r e   f o r   s h o w / h i d e 
 	 i f   (   m o d e   ! = =   " e f f e c t "   )   { 
 	 	 o p t i o n s . o r i g i n   =   o r i g i n   | |   [ " m i d d l e " , " c e n t e r " ] ; 
 	 	 o p t i o n s . r e s t o r e   =   t r u e ; 
 	 } 
 
 	 o p t i o n s . f r o m   =   o . f r o m   | |   (   m o d e   = = =   " s h o w "   ?   { 
 	 	 h e i g h t :   0 , 
 	 	 w i d t h :   0 , 
 	 	 o u t e r H e i g h t :   0 , 
 	 	 o u t e r W i d t h :   0 
 	 }   :   o r i g i n a l   ) ; 
 	 o p t i o n s . t o   =   { 
 	 	 h e i g h t :   o r i g i n a l . h e i g h t   *   f a c t o r . y , 
 	 	 w i d t h :   o r i g i n a l . w i d t h   *   f a c t o r . x , 
 	 	 o u t e r H e i g h t :   o r i g i n a l . o u t e r H e i g h t   *   f a c t o r . y , 
 	 	 o u t e r W i d t h :   o r i g i n a l . o u t e r W i d t h   *   f a c t o r . x 
 	 } ; 
 
 	 / /   F a d e   o p t i o n   t o   s u p p o r t   p u f f 
 	 i f   (   o p t i o n s . f a d e   )   { 
 	 	 i f   (   m o d e   = = =   " s h o w "   )   { 
 	 	 	 o p t i o n s . f r o m . o p a c i t y   =   0 ; 
 	 	 	 o p t i o n s . t o . o p a c i t y   =   1 ; 
 	 	 } 
 	 	 i f   (   m o d e   = = =   " h i d e "   )   { 
 	 	 	 o p t i o n s . f r o m . o p a c i t y   =   1 ; 
 	 	 	 o p t i o n s . t o . o p a c i t y   =   0 ; 
 	 	 } 
 	 } 
 
 	 / /   A n i m a t e 
 	 e l . e f f e c t (   o p t i o n s   ) ; 
 
 } ; 
 
 $ . e f f e c t s . e f f e c t . s i z e   =   f u n c t i o n (   o ,   d o n e   )   { 
 
 	 / /   C r e a t e   e l e m e n t 
 	 v a r   o r i g i n a l ,   b a s e l i n e ,   f a c t o r , 
 	 	 e l   =   $ (   t h i s   ) , 
 	 	 p r o p s 0   =   [   " p o s i t i o n " ,   " t o p " ,   " b o t t o m " ,   " l e f t " ,   " r i g h t " ,   " w i d t h " ,   " h e i g h t " ,   " o v e r f l o w " ,   " o p a c i t y "   ] , 
 
 	 	 / /   A l w a y s   r e s t o r e 
 	 	 p r o p s 1   =   [   " p o s i t i o n " ,   " t o p " ,   " b o t t o m " ,   " l e f t " ,   " r i g h t " ,   " o v e r f l o w " ,   " o p a c i t y "   ] , 
 
 	 	 / /   C o p y   f o r   c h i l d r e n 
 	 	 p r o p s 2   =   [   " w i d t h " ,   " h e i g h t " ,   " o v e r f l o w "   ] , 
 	 	 c P r o p s   =   [   " f o n t S i z e "   ] , 
 	 	 v P r o p s   =   [   " b o r d e r T o p W i d t h " ,   " b o r d e r B o t t o m W i d t h " ,   " p a d d i n g T o p " ,   " p a d d i n g B o t t o m "   ] , 
 	 	 h P r o p s   =   [   " b o r d e r L e f t W i d t h " ,   " b o r d e r R i g h t W i d t h " ,   " p a d d i n g L e f t " ,   " p a d d i n g R i g h t "   ] , 
 
 	 	 / /   S e t   o p t i o n s 
 	 	 m o d e   =   $ . e f f e c t s . s e t M o d e (   e l ,   o . m o d e   | |   " e f f e c t "   ) , 
 	 	 r e s t o r e   =   o . r e s t o r e   | |   m o d e   ! = =   " e f f e c t " , 
 	 	 s c a l e   =   o . s c a l e   | |   " b o t h " , 
 	 	 o r i g i n   =   o . o r i g i n   | |   [   " m i d d l e " ,   " c e n t e r "   ] , 
 	 	 p o s i t i o n   =   e l . c s s (   " p o s i t i o n "   ) , 
 	 	 p r o p s   =   r e s t o r e   ?   p r o p s 0   :   p r o p s 1 , 
 	 	 z e r o   =   { 
 	 	 	 h e i g h t :   0 , 
 	 	 	 w i d t h :   0 , 
 	 	 	 o u t e r H e i g h t :   0 , 
 	 	 	 o u t e r W i d t h :   0 
 	 	 } ; 
 
 	 i f   (   m o d e   = = =   " s h o w "   )   { 
 	 	 e l . s h o w ( ) ; 
 	 } 
 	 o r i g i n a l   =   { 
 	 	 h e i g h t :   e l . h e i g h t ( ) , 
 	 	 w i d t h :   e l . w i d t h ( ) , 
 	 	 o u t e r H e i g h t :   e l . o u t e r H e i g h t ( ) , 
 	 	 o u t e r W i d t h :   e l . o u t e r W i d t h ( ) 
 	 } ; 
 
 	 i f   (   o . m o d e   = = =   " t o g g l e "   & &   m o d e   = = =   " s h o w "   )   { 
 	 	 e l . f r o m   =   o . t o   | |   z e r o ; 
 	 	 e l . t o   =   o . f r o m   | |   o r i g i n a l ; 
 	 }   e l s e   { 
 	 	 e l . f r o m   =   o . f r o m   | |   (   m o d e   = = =   " s h o w "   ?   z e r o   :   o r i g i n a l   ) ; 
 	 	 e l . t o   =   o . t o   | |   (   m o d e   = = =   " h i d e "   ?   z e r o   :   o r i g i n a l   ) ; 
 	 } 
 
 	 / /   S e t   s c a l i n g   f a c t o r 
 	 f a c t o r   =   { 
 	 	 f r o m :   { 
 	 	 	 y :   e l . f r o m . h e i g h t   /   o r i g i n a l . h e i g h t , 
 	 	 	 x :   e l . f r o m . w i d t h   /   o r i g i n a l . w i d t h 
 	 	 } , 
 	 	 t o :   { 
 	 	 	 y :   e l . t o . h e i g h t   /   o r i g i n a l . h e i g h t , 
 	 	 	 x :   e l . t o . w i d t h   /   o r i g i n a l . w i d t h 
 	 	 } 
 	 } ; 
 
 	 / /   S c a l e   t h e   c s s   b o x 
 	 i f   (   s c a l e   = = =   " b o x "   | |   s c a l e   = = =   " b o t h "   )   { 
 
 	 	 / /   V e r t i c a l   p r o p s   s c a l i n g 
 	 	 i f   (   f a c t o r . f r o m . y   ! = =   f a c t o r . t o . y   )   { 
 	 	 	 p r o p s   =   p r o p s . c o n c a t (   v P r o p s   ) ; 
 	 	 	 e l . f r o m   =   $ . e f f e c t s . s e t T r a n s i t i o n (   e l ,   v P r o p s ,   f a c t o r . f r o m . y ,   e l . f r o m   ) ; 
 	 	 	 e l . t o   =   $ . e f f e c t s . s e t T r a n s i t i o n (   e l ,   v P r o p s ,   f a c t o r . t o . y ,   e l . t o   ) ; 
 	 	 } 
 
 	 	 / /   H o r i z o n t a l   p r o p s   s c a l i n g 
 	 	 i f   (   f a c t o r . f r o m . x   ! = =   f a c t o r . t o . x   )   { 
 	 	 	 p r o p s   =   p r o p s . c o n c a t (   h P r o p s   ) ; 
 	 	 	 e l . f r o m   =   $ . e f f e c t s . s e t T r a n s i t i o n (   e l ,   h P r o p s ,   f a c t o r . f r o m . x ,   e l . f r o m   ) ; 
 	 	 	 e l . t o   =   $ . e f f e c t s . s e t T r a n s i t i o n (   e l ,   h P r o p s ,   f a c t o r . t o . x ,   e l . t o   ) ; 
 	 	 } 
 	 } 
 
 	 / /   S c a l e   t h e   c o n t e n t 
 	 i f   (   s c a l e   = = =   " c o n t e n t "   | |   s c a l e   = = =   " b o t h "   )   { 
 
 	 	 / /   V e r t i c a l   p r o p s   s c a l i n g 
 	 	 i f   (   f a c t o r . f r o m . y   ! = =   f a c t o r . t o . y   )   { 
 	 	 	 p r o p s   =   p r o p s . c o n c a t (   c P r o p s   ) . c o n c a t (   p r o p s 2   ) ; 
 	 	 	 e l . f r o m   =   $ . e f f e c t s . s e t T r a n s i t i o n (   e l ,   c P r o p s ,   f a c t o r . f r o m . y ,   e l . f r o m   ) ; 
 	 	 	 e l . t o   =   $ . e f f e c t s . s e t T r a n s i t i o n (   e l ,   c P r o p s ,   f a c t o r . t o . y ,   e l . t o   ) ; 
 	 	 } 
 	 } 
 
 	 $ . e f f e c t s . s a v e (   e l ,   p r o p s   ) ; 
 	 e l . s h o w ( ) ; 
 	 $ . e f f e c t s . c r e a t e W r a p p e r (   e l   ) ; 
 	 e l . c s s (   " o v e r f l o w " ,   " h i d d e n "   ) . c s s (   e l . f r o m   ) ; 
 
 	 / /   A d j u s t 
 	 i f   ( o r i g i n )   {   / /   C a l c u l a t e   b a s e l i n e   s h i f t s 
 	 	 b a s e l i n e   =   $ . e f f e c t s . g e t B a s e l i n e (   o r i g i n ,   o r i g i n a l   ) ; 
 	 	 e l . f r o m . t o p   =   (   o r i g i n a l . o u t e r H e i g h t   -   e l . o u t e r H e i g h t ( )   )   *   b a s e l i n e . y ; 
 	 	 e l . f r o m . l e f t   =   (   o r i g i n a l . o u t e r W i d t h   -   e l . o u t e r W i d t h ( )   )   *   b a s e l i n e . x ; 
 	 	 e l . t o . t o p   =   (   o r i g i n a l . o u t e r H e i g h t   -   e l . t o . o u t e r H e i g h t   )   *   b a s e l i n e . y ; 
 	 	 e l . t o . l e f t   =   (   o r i g i n a l . o u t e r W i d t h   -   e l . t o . o u t e r W i d t h   )   *   b a s e l i n e . x ; 
 	 } 
 	 e l . c s s (   e l . f r o m   ) ;   / /   s e t   t o p   &   l e f t 
 
 	 / /   A n i m a t e 
 	 i f   (   s c a l e   = = =   " c o n t e n t "   | |   s c a l e   = = =   " b o t h "   )   {   / /   S c a l e   t h e   c h i l d r e n 
 
 	 	 / /   A d d   m a r g i n s / f o n t - s i z e 
 	 	 v P r o p s   =   v P r o p s . c o n c a t ( [   " m a r g i n T o p " ,   " m a r g i n B o t t o m "   ] ) . c o n c a t ( c P r o p s ) ; 
 	 	 h P r o p s   =   h P r o p s . c o n c a t ( [   " m a r g i n L e f t " ,   " m a r g i n R i g h t "   ] ) ; 
 	 	 p r o p s 2   =   p r o p s 0 . c o n c a t ( v P r o p s ) . c o n c a t ( h P r o p s ) ; 
 
 	 	 e l . f i n d (   " * [ w i d t h ] "   ) . e a c h (   f u n c t i o n ( ) { 
 	 	 	 v a r   c h i l d   =   $ (   t h i s   ) , 
 	 	 	 	 c _ o r i g i n a l   =   { 
 	 	 	 	 	 h e i g h t :   c h i l d . h e i g h t ( ) , 
 	 	 	 	 	 w i d t h :   c h i l d . w i d t h ( ) , 
 	 	 	 	 	 o u t e r H e i g h t :   c h i l d . o u t e r H e i g h t ( ) , 
 	 	 	 	 	 o u t e r W i d t h :   c h i l d . o u t e r W i d t h ( ) 
 	 	 	 	 } ; 
 	 	 	 i f   ( r e s t o r e )   { 
 	 	 	 	 $ . e f f e c t s . s a v e ( c h i l d ,   p r o p s 2 ) ; 
 	 	 	 } 
 
 	 	 	 c h i l d . f r o m   =   { 
 	 	 	 	 h e i g h t :   c _ o r i g i n a l . h e i g h t   *   f a c t o r . f r o m . y , 
 	 	 	 	 w i d t h :   c _ o r i g i n a l . w i d t h   *   f a c t o r . f r o m . x , 
 	 	 	 	 o u t e r H e i g h t :   c _ o r i g i n a l . o u t e r H e i g h t   *   f a c t o r . f r o m . y , 
 	 	 	 	 o u t e r W i d t h :   c _ o r i g i n a l . o u t e r W i d t h   *   f a c t o r . f r o m . x 
 	 	 	 } ; 
 	 	 	 c h i l d . t o   =   { 
 	 	 	 	 h e i g h t :   c _ o r i g i n a l . h e i g h t   *   f a c t o r . t o . y , 
 	 	 	 	 w i d t h :   c _ o r i g i n a l . w i d t h   *   f a c t o r . t o . x , 
 	 	 	 	 o u t e r H e i g h t :   c _ o r i g i n a l . h e i g h t   *   f a c t o r . t o . y , 
 	 	 	 	 o u t e r W i d t h :   c _ o r i g i n a l . w i d t h   *   f a c t o r . t o . x 
 	 	 	 } ; 
 
 	 	 	 / /   V e r t i c a l   p r o p s   s c a l i n g 
 	 	 	 i f   (   f a c t o r . f r o m . y   ! = =   f a c t o r . t o . y   )   { 
 	 	 	 	 c h i l d . f r o m   =   $ . e f f e c t s . s e t T r a n s i t i o n (   c h i l d ,   v P r o p s ,   f a c t o r . f r o m . y ,   c h i l d . f r o m   ) ; 
 	 	 	 	 c h i l d . t o   =   $ . e f f e c t s . s e t T r a n s i t i o n (   c h i l d ,   v P r o p s ,   f a c t o r . t o . y ,   c h i l d . t o   ) ; 
 	 	 	 } 
 
 	 	 	 / /   H o r i z o n t a l   p r o p s   s c a l i n g 
 	 	 	 i f   (   f a c t o r . f r o m . x   ! = =   f a c t o r . t o . x   )   { 
 	 	 	 	 c h i l d . f r o m   =   $ . e f f e c t s . s e t T r a n s i t i o n (   c h i l d ,   h P r o p s ,   f a c t o r . f r o m . x ,   c h i l d . f r o m   ) ; 
 	 	 	 	 c h i l d . t o   =   $ . e f f e c t s . s e t T r a n s i t i o n (   c h i l d ,   h P r o p s ,   f a c t o r . t o . x ,   c h i l d . t o   ) ; 
 	 	 	 } 
 
 	 	 	 / /   A n i m a t e   c h i l d r e n 
 	 	 	 c h i l d . c s s (   c h i l d . f r o m   ) ; 
 	 	 	 c h i l d . a n i m a t e (   c h i l d . t o ,   o . d u r a t i o n ,   o . e a s i n g ,   f u n c t i o n ( )   { 
 
 	 	 	 	 / /   R e s t o r e   c h i l d r e n 
 	 	 	 	 i f   (   r e s t o r e   )   { 
 	 	 	 	 	 $ . e f f e c t s . r e s t o r e (   c h i l d ,   p r o p s 2   ) ; 
 	 	 	 	 } 
 	 	 	 } ) ; 
 	 	 } ) ; 
 	 } 
 
 	 / /   A n i m a t e 
 	 e l . a n i m a t e (   e l . t o ,   { 
 	 	 q u e u e :   f a l s e , 
 	 	 d u r a t i o n :   o . d u r a t i o n , 
 	 	 e a s i n g :   o . e a s i n g , 
 	 	 c o m p l e t e :   f u n c t i o n ( )   { 
 	 	 	 i f   (   e l . t o . o p a c i t y   = = =   0   )   { 
 	 	 	 	 e l . c s s (   " o p a c i t y " ,   e l . f r o m . o p a c i t y   ) ; 
 	 	 	 } 
 	 	 	 i f (   m o d e   = = =   " h i d e "   )   { 
 	 	 	 	 e l . h i d e ( ) ; 
 	 	 	 } 
 	 	 	 $ . e f f e c t s . r e s t o r e (   e l ,   p r o p s   ) ; 
 	 	 	 i f   (   ! r e s t o r e   )   { 
 
 	 	 	 	 / /   w e   n e e d   t o   c a l c u l a t e   o u r   n e w   p o s i t i o n i n g   b a s e d   o n   t h e   s c a l i n g 
 	 	 	 	 i f   (   p o s i t i o n   = = =   " s t a t i c "   )   { 
 	 	 	 	 	 e l . c s s ( { 
 	 	 	 	 	 	 p o s i t i o n :   " r e l a t i v e " , 
 	 	 	 	 	 	 t o p :   e l . t o . t o p , 
 	 	 	 	 	 	 l e f t :   e l . t o . l e f t 
 	 	 	 	 	 } ) ; 
 	 	 	 	 }   e l s e   { 
 	 	 	 	 	 $ . e a c h ( [   " t o p " ,   " l e f t "   ] ,   f u n c t i o n (   i d x ,   p o s   )   { 
 	 	 	 	 	 	 e l . c s s (   p o s ,   f u n c t i o n (   _ ,   s t r   )   { 
 	 	 	 	 	 	 	 v a r   v a l   =   p a r s e I n t (   s t r ,   1 0   ) , 
 	 	 	 	 	 	 	 	 t o R e f   =   i d x   ?   e l . t o . l e f t   :   e l . t o . t o p ; 
 
 	 	 	 	 	 	 	 / /   i f   o r i g i n a l   w a s   " a u t o " ,   r e c a l c u l a t e   t h e   n e w   v a l u e   f r o m   w r a p p e r 
 	 	 	 	 	 	 	 i f   (   s t r   = = =   " a u t o "   )   { 
 	 	 	 	 	 	 	 	 r e t u r n   t o R e f   +   " p x " ; 
 	 	 	 	 	 	 	 } 
 
 	 	 	 	 	 	 	 r e t u r n   v a l   +   t o R e f   +   " p x " ; 
 	 	 	 	 	 	 } ) ; 
 	 	 	 	 	 } ) ; 
 	 	 	 	 } 
 	 	 	 } 
 
 	 	 	 $ . e f f e c t s . r e m o v e W r a p p e r (   e l   ) ; 
 	 	 	 d o n e ( ) ; 
 	 	 } 
 	 } ) ; 
 
 } ; 
 
 } ) ( j Q u e r y ) ; 
 
 ( f u n c t i o n (   $ ,   u n d e f i n e d   )   { 
 
 $ . e f f e c t s . e f f e c t . s h a k e   =   f u n c t i o n (   o ,   d o n e   )   { 
 
 	 v a r   e l   =   $ (   t h i s   ) , 
 	 	 p r o p s   =   [   " p o s i t i o n " ,   " t o p " ,   " b o t t o m " ,   " l e f t " ,   " r i g h t " ,   " h e i g h t " ,   " w i d t h "   ] , 
 	 	 m o d e   =   $ . e f f e c t s . s e t M o d e (   e l ,   o . m o d e   | |   " e f f e c t "   ) , 
 	 	 d i r e c t i o n   =   o . d i r e c t i o n   | |   " l e f t " , 
 	 	 d i s t a n c e   =   o . d i s t a n c e   | |   2 0 , 
 	 	 t i m e s   =   o . t i m e s   | |   3 , 
 	 	 a n i m s   =   t i m e s   *   2   +   1 , 
 	 	 s p e e d   =   M a t h . r o u n d ( o . d u r a t i o n / a n i m s ) , 
 	 	 r e f   =   ( d i r e c t i o n   = = =   " u p "   | |   d i r e c t i o n   = = =   " d o w n " )   ?   " t o p "   :   " l e f t " , 
 	 	 p o s i t i v e M o t i o n   =   ( d i r e c t i o n   = = =   " u p "   | |   d i r e c t i o n   = = =   " l e f t " ) , 
 	 	 a n i m a t i o n   =   { } , 
 	 	 a n i m a t i o n 1   =   { } , 
 	 	 a n i m a t i o n 2   =   { } , 
 	 	 i , 
 
 	 	 / /   w e   w i l l   n e e d   t o   r e - a s s e m b l e   t h e   q u e u e   t o   s t a c k   o u r   a n i m a t i o n s   i n   p l a c e 
 	 	 q u e u e   =   e l . q u e u e ( ) , 
 	 	 q u e u e l e n   =   q u e u e . l e n g t h ; 
 
 	 $ . e f f e c t s . s a v e (   e l ,   p r o p s   ) ; 
 	 e l . s h o w ( ) ; 
 	 $ . e f f e c t s . c r e a t e W r a p p e r (   e l   ) ; 
 
 	 / /   A n i m a t i o n 
 	 a n i m a t i o n [   r e f   ]   =   (   p o s i t i v e M o t i o n   ?   " - = "   :   " + = "   )   +   d i s t a n c e ; 
 	 a n i m a t i o n 1 [   r e f   ]   =   (   p o s i t i v e M o t i o n   ?   " + = "   :   " - = "   )   +   d i s t a n c e   *   2 ; 
 	 a n i m a t i o n 2 [   r e f   ]   =   (   p o s i t i v e M o t i o n   ?   " - = "   :   " + = "   )   +   d i s t a n c e   *   2 ; 
 
 	 / /   A n i m a t e 
 	 e l . a n i m a t e (   a n i m a t i o n ,   s p e e d ,   o . e a s i n g   ) ; 
 
 	 / /   S h a k e s 
 	 f o r   (   i   =   1 ;   i   <   t i m e s ;   i + +   )   { 
 	 	 e l . a n i m a t e (   a n i m a t i o n 1 ,   s p e e d ,   o . e a s i n g   ) . a n i m a t e (   a n i m a t i o n 2 ,   s p e e d ,   o . e a s i n g   ) ; 
 	 } 
 	 e l 
 	 	 . a n i m a t e (   a n i m a t i o n 1 ,   s p e e d ,   o . e a s i n g   ) 
 	 	 . a n i m a t e (   a n i m a t i o n ,   s p e e d   /   2 ,   o . e a s i n g   ) 
 	 	 . q u e u e ( f u n c t i o n ( )   { 
 	 	 	 i f   (   m o d e   = = =   " h i d e "   )   { 
 	 	 	 	 e l . h i d e ( ) ; 
 	 	 	 } 
 	 	 	 $ . e f f e c t s . r e s t o r e (   e l ,   p r o p s   ) ; 
 	 	 	 $ . e f f e c t s . r e m o v e W r a p p e r (   e l   ) ; 
 	 	 	 d o n e ( ) ; 
 	 	 } ) ; 
 
 	 / /   i n j e c t   a l l   t h e   a n i m a t i o n s   w e   j u s t   q u e u e d   t o   b e   f i r s t   i n   l i n e   ( a f t e r   " i n p r o g r e s s " ) 
 	 i f   (   q u e u e l e n   >   1 )   { 
 	 	 q u e u e . s p l i c e . a p p l y (   q u e u e , 
 	 	 	 [   1 ,   0   ] . c o n c a t (   q u e u e . s p l i c e (   q u e u e l e n ,   a n i m s   +   1   )   )   ) ; 
 	 } 
 	 e l . d e q u e u e ( ) ; 
 
 } ; 
 
 } ) ( j Q u e r y ) ; 
 
 ( f u n c t i o n (   $ ,   u n d e f i n e d   )   { 
 
 $ . e f f e c t s . e f f e c t . s l i d e   =   f u n c t i o n (   o ,   d o n e   )   { 
 
 	 / /   C r e a t e   e l e m e n t 
 	 v a r   e l   =   $ (   t h i s   ) , 
 	 	 p r o p s   =   [   " p o s i t i o n " ,   " t o p " ,   " b o t t o m " ,   " l e f t " ,   " r i g h t " ,   " w i d t h " ,   " h e i g h t "   ] , 
 	 	 m o d e   =   $ . e f f e c t s . s e t M o d e (   e l ,   o . m o d e   | |   " s h o w "   ) , 
 	 	 s h o w   =   m o d e   = = =   " s h o w " , 
 	 	 d i r e c t i o n   =   o . d i r e c t i o n   | |   " l e f t " , 
 	 	 r e f   =   ( d i r e c t i o n   = = =   " u p "   | |   d i r e c t i o n   = = =   " d o w n " )   ?   " t o p "   :   " l e f t " , 
 	 	 p o s i t i v e M o t i o n   =   ( d i r e c t i o n   = = =   " u p "   | |   d i r e c t i o n   = = =   " l e f t " ) , 
 	 	 d i s t a n c e , 
 	 	 a n i m a t i o n   =   { } ; 
 
 	 / /   A d j u s t 
 	 $ . e f f e c t s . s a v e (   e l ,   p r o p s   ) ; 
 	 e l . s h o w ( ) ; 
 	 d i s t a n c e   =   o . d i s t a n c e   | |   e l [   r e f   = = =   " t o p "   ?   " o u t e r H e i g h t "   :   " o u t e r W i d t h "   ] (   t r u e   ) ; 
 
 	 $ . e f f e c t s . c r e a t e W r a p p e r (   e l   ) . c s s ( { 
 	 	 o v e r f l o w :   " h i d d e n " 
 	 } ) ; 
 
 	 i f   (   s h o w   )   { 
 	 	 e l . c s s (   r e f ,   p o s i t i v e M o t i o n   ?   ( i s N a N ( d i s t a n c e )   ?   " - "   +   d i s t a n c e   :   - d i s t a n c e )   :   d i s t a n c e   ) ; 
 	 } 
 
 	 / /   A n i m a t i o n 
 	 a n i m a t i o n [   r e f   ]   =   (   s h o w   ? 
 	 	 (   p o s i t i v e M o t i o n   ?   " + = "   :   " - = " )   : 
 	 	 (   p o s i t i v e M o t i o n   ?   " - = "   :   " + = " ) )   + 
 	 	 d i s t a n c e ; 
 
 	 / /   A n i m a t e 
 	 e l . a n i m a t e (   a n i m a t i o n ,   { 
 	 	 q u e u e :   f a l s e , 
 	 	 d u r a t i o n :   o . d u r a t i o n , 
 	 	 e a s i n g :   o . e a s i n g , 
 	 	 c o m p l e t e :   f u n c t i o n ( )   { 
 	 	 	 i f   (   m o d e   = = =   " h i d e "   )   { 
 	 	 	 	 e l . h i d e ( ) ; 
 	 	 	 } 
 	 	 	 $ . e f f e c t s . r e s t o r e (   e l ,   p r o p s   ) ; 
 	 	 	 $ . e f f e c t s . r e m o v e W r a p p e r (   e l   ) ; 
 	 	 	 d o n e ( ) ; 
 	 	 } 
 	 } ) ; 
 } ; 
 
 } ) ( j Q u e r y ) ; 
 
 ( f u n c t i o n (   $ ,   u n d e f i n e d   )   { 
 
 $ . e f f e c t s . e f f e c t . t r a n s f e r   =   f u n c t i o n (   o ,   d o n e   )   { 
 	 v a r   e l e m   =   $ (   t h i s   ) , 
 	 	 t a r g e t   =   $ (   o . t o   ) , 
 	 	 t a r g e t F i x e d   =   t a r g e t . c s s (   " p o s i t i o n "   )   = = =   " f i x e d " , 
 	 	 b o d y   =   $ ( " b o d y " ) , 
 	 	 f i x T o p   =   t a r g e t F i x e d   ?   b o d y . s c r o l l T o p ( )   :   0 , 
 	 	 f i x L e f t   =   t a r g e t F i x e d   ?   b o d y . s c r o l l L e f t ( )   :   0 , 
 	 	 e n d P o s i t i o n   =   t a r g e t . o f f s e t ( ) , 
 	 	 a n i m a t i o n   =   { 
 	 	 	 t o p :   e n d P o s i t i o n . t o p   -   f i x T o p   , 
 	 	 	 l e f t :   e n d P o s i t i o n . l e f t   -   f i x L e f t   , 
 	 	 	 h e i g h t :   t a r g e t . i n n e r H e i g h t ( ) , 
 	 	 	 w i d t h :   t a r g e t . i n n e r W i d t h ( ) 
 	 	 } , 
 	 	 s t a r t P o s i t i o n   =   e l e m . o f f s e t ( ) , 
 	 	 t r a n s f e r   =   $ (   " < d i v   c l a s s = ' u i - e f f e c t s - t r a n s f e r ' > < / d i v > "   ) 
 	 	 	 . a p p e n d T o (   d o c u m e n t . b o d y   ) 
 	 	 	 . a d d C l a s s (   o . c l a s s N a m e   ) 
 	 	 	 . c s s ( { 
 	 	 	 	 t o p :   s t a r t P o s i t i o n . t o p   -   f i x T o p   , 
 	 	 	 	 l e f t :   s t a r t P o s i t i o n . l e f t   -   f i x L e f t   , 
 	 	 	 	 h e i g h t :   e l e m . i n n e r H e i g h t ( ) , 
 	 	 	 	 w i d t h :   e l e m . i n n e r W i d t h ( ) , 
 	 	 	 	 p o s i t i o n :   t a r g e t F i x e d   ?   " f i x e d "   :   " a b s o l u t e " 
 	 	 	 } ) 
 	 	 	 . a n i m a t e (   a n i m a t i o n ,   o . d u r a t i o n ,   o . e a s i n g ,   f u n c t i o n ( )   { 
 	 	 	 	 t r a n s f e r . r e m o v e ( ) ; 
 	 	 	 	 d o n e ( ) ; 
 	 	 	 } ) ; 
 } ; 
 
 } ) ( j Q u e r y ) ; 
 
 ( f u n c t i o n (   $ ,   u n d e f i n e d   )   { 
 
 $ . w i d g e t (   " u i . m e n u " ,   { 
 	 v e r s i o n :   " 1 . 1 0 . 3 " , 
 	 d e f a u l t E l e m e n t :   " < u l > " , 
 	 d e l a y :   3 0 0 , 
 	 o p t i o n s :   { 
 	 	 i c o n s :   { 
 	 	 	 s u b m e n u :   " u i - i c o n - c a r a t - 1 - e " 
 	 	 } , 
 	 	 m e n u s :   " u l " , 
 	 	 p o s i t i o n :   { 
 	 	 	 m y :   " l e f t   t o p " , 
 	 	 	 a t :   " r i g h t   t o p " 
 	 	 } , 
 	 	 r o l e :   " m e n u " , 
 
 	 	 / /   c a l l b a c k s 
 	 	 b l u r :   n u l l , 
 	 	 f o c u s :   n u l l , 
 	 	 s e l e c t :   n u l l 
 	 } , 
 
 	 _ c r e a t e :   f u n c t i o n ( )   { 
 	 	 t h i s . a c t i v e M e n u   =   t h i s . e l e m e n t ; 
 	 	 / /   f l a g   u s e d   t o   p r e v e n t   f i r i n g   o f   t h e   c l i c k   h a n d l e r 
 	 	 / /   a s   t h e   e v e n t   b u b b l e s   u p   t h r o u g h   n e s t e d   m e n u s 
 	 	 t h i s . m o u s e H a n d l e d   =   f a l s e ; 
 	 	 t h i s . e l e m e n t 
 	 	 	 . u n i q u e I d ( ) 
 	 	 	 . a d d C l a s s (   " u i - m e n u   u i - w i d g e t   u i - w i d g e t - c o n t e n t   u i - c o r n e r - a l l "   ) 
 	 	 	 . t o g g l e C l a s s (   " u i - m e n u - i c o n s " ,   ! ! t h i s . e l e m e n t . f i n d (   " . u i - i c o n "   ) . l e n g t h   ) 
 	 	 	 . a t t r ( { 
 	 	 	 	 r o l e :   t h i s . o p t i o n s . r o l e , 
 	 	 	 	 t a b I n d e x :   0 
 	 	 	 } ) 
 	 	 	 / /   n e e d   t o   c a t c h   a l l   c l i c k s   o n   d i s a b l e d   m e n u 
 	 	 	 / /   n o t   p o s s i b l e   t h r o u g h   _ o n 
 	 	 	 . b i n d (   " c l i c k "   +   t h i s . e v e n t N a m e s p a c e ,   $ . p r o x y ( f u n c t i o n (   e v e n t   )   { 
 	 	 	 	 i f   (   t h i s . o p t i o n s . d i s a b l e d   )   { 
 	 	 	 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 	 	 	 	 } 
 	 	 	 } ,   t h i s   ) ) ; 
 
 	 	 i f   (   t h i s . o p t i o n s . d i s a b l e d   )   { 
 	 	 	 t h i s . e l e m e n t 
 	 	 	 	 . a d d C l a s s (   " u i - s t a t e - d i s a b l e d "   ) 
 	 	 	 	 . a t t r (   " a r i a - d i s a b l e d " ,   " t r u e "   ) ; 
 	 	 } 
 
 	 	 t h i s . _ o n ( { 
 	 	 	 / /   P r e v e n t   f o c u s   f r o m   s t i c k i n g   t o   l i n k s   i n s i d e   m e n u   a f t e r   c l i c k i n g 
 	 	 	 / /   t h e m   ( f o c u s   s h o u l d   a l w a y s   s t a y   o n   U L   d u r i n g   n a v i g a t i o n ) . 
 	 	 	 " m o u s e d o w n   . u i - m e n u - i t e m   >   a " :   f u n c t i o n (   e v e n t   )   { 
 	 	 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 	 	 	 } , 
 	 	 	 " c l i c k   . u i - s t a t e - d i s a b l e d   >   a " :   f u n c t i o n (   e v e n t   )   { 
 	 	 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 	 	 	 } , 
 	 	 	 " c l i c k   . u i - m e n u - i t e m : h a s ( a ) " :   f u n c t i o n (   e v e n t   )   { 
 	 	 	 	 v a r   t a r g e t   =   $ (   e v e n t . t a r g e t   ) . c l o s e s t (   " . u i - m e n u - i t e m "   ) ; 
 	 	 	 	 i f   (   ! t h i s . m o u s e H a n d l e d   & &   t a r g e t . n o t (   " . u i - s t a t e - d i s a b l e d "   ) . l e n g t h   )   { 
 	 	 	 	 	 t h i s . m o u s e H a n d l e d   =   t r u e ; 
 
 	 	 	 	 	 t h i s . s e l e c t (   e v e n t   ) ; 
 	 	 	 	 	 / /   O p e n   s u b m e n u   o n   c l i c k 
 	 	 	 	 	 i f   (   t a r g e t . h a s (   " . u i - m e n u "   ) . l e n g t h   )   { 
 	 	 	 	 	 	 t h i s . e x p a n d (   e v e n t   ) ; 
 	 	 	 	 	 }   e l s e   i f   (   ! t h i s . e l e m e n t . i s (   " : f o c u s "   )   )   { 
 	 	 	 	 	 	 / /   R e d i r e c t   f o c u s   t o   t h e   m e n u 
 	 	 	 	 	 	 t h i s . e l e m e n t . t r i g g e r (   " f o c u s " ,   [   t r u e   ]   ) ; 
 
 	 	 	 	 	 	 / /   I f   t h e   a c t i v e   i t e m   i s   o n   t h e   t o p   l e v e l ,   l e t   i t   s t a y   a c t i v e . 
 	 	 	 	 	 	 / /   O t h e r w i s e ,   b l u r   t h e   a c t i v e   i t e m   s i n c e   i t   i s   n o   l o n g e r   v i s i b l e . 
 	 	 	 	 	 	 i f   (   t h i s . a c t i v e   & &   t h i s . a c t i v e . p a r e n t s (   " . u i - m e n u "   ) . l e n g t h   = = =   1   )   { 
 	 	 	 	 	 	 	 c l e a r T i m e o u t (   t h i s . t i m e r   ) ; 
 	 	 	 	 	 	 } 
 	 	 	 	 	 } 
 	 	 	 	 } 
 	 	 	 } , 
 	 	 	 " m o u s e e n t e r   . u i - m e n u - i t e m " :   f u n c t i o n (   e v e n t   )   { 
 	 	 	 	 v a r   t a r g e t   =   $ (   e v e n t . c u r r e n t T a r g e t   ) ; 
 	 	 	 	 / /   R e m o v e   u i - s t a t e - a c t i v e   c l a s s   f r o m   s i b l i n g s   o f   t h e   n e w l y   f o c u s e d   m e n u   i t e m 
 	 	 	 	 / /   t o   a v o i d   a   j u m p   c a u s e d   b y   a d j a c e n t   e l e m e n t s   b o t h   h a v i n g   a   c l a s s   w i t h   a   b o r d e r 
 	 	 	 	 t a r g e t . s i b l i n g s ( ) . c h i l d r e n (   " . u i - s t a t e - a c t i v e "   ) . r e m o v e C l a s s (   " u i - s t a t e - a c t i v e "   ) ; 
 	 	 	 	 t h i s . f o c u s (   e v e n t ,   t a r g e t   ) ; 
 	 	 	 } , 
 	 	 	 m o u s e l e a v e :   " c o l l a p s e A l l " , 
 	 	 	 " m o u s e l e a v e   . u i - m e n u " :   " c o l l a p s e A l l " , 
 	 	 	 f o c u s :   f u n c t i o n (   e v e n t ,   k e e p A c t i v e I t e m   )   { 
 	 	 	 	 / /   I f   t h e r e ' s   a l r e a d y   a n   a c t i v e   i t e m ,   k e e p   i t   a c t i v e 
 	 	 	 	 / /   I f   n o t ,   a c t i v a t e   t h e   f i r s t   i t e m 
 	 	 	 	 v a r   i t e m   =   t h i s . a c t i v e   | |   t h i s . e l e m e n t . c h i l d r e n (   " . u i - m e n u - i t e m "   ) . e q (   0   ) ; 
 
 	 	 	 	 i f   (   ! k e e p A c t i v e I t e m   )   { 
 	 	 	 	 	 t h i s . f o c u s (   e v e n t ,   i t e m   ) ; 
 	 	 	 	 } 
 	 	 	 } , 
 	 	 	 b l u r :   f u n c t i o n (   e v e n t   )   { 
 	 	 	 	 t h i s . _ d e l a y ( f u n c t i o n ( )   { 
 	 	 	 	 	 i f   (   ! $ . c o n t a i n s (   t h i s . e l e m e n t [ 0 ] ,   t h i s . d o c u m e n t [ 0 ] . a c t i v e E l e m e n t   )   )   { 
 	 	 	 	 	 	 t h i s . c o l l a p s e A l l (   e v e n t   ) ; 
 	 	 	 	 	 } 
 	 	 	 	 } ) ; 
 	 	 	 } , 
 	 	 	 k e y d o w n :   " _ k e y d o w n " 
 	 	 } ) ; 
 
 	 	 t h i s . r e f r e s h ( ) ; 
 
 	 	 / /   C l i c k s   o u t s i d e   o f   a   m e n u   c o l l a p s e   a n y   o p e n   m e n u s 
 	 	 t h i s . _ o n (   t h i s . d o c u m e n t ,   { 
 	 	 	 c l i c k :   f u n c t i o n (   e v e n t   )   { 
 	 	 	 	 i f   (   ! $ (   e v e n t . t a r g e t   ) . c l o s e s t (   " . u i - m e n u "   ) . l e n g t h   )   { 
 	 	 	 	 	 t h i s . c o l l a p s e A l l (   e v e n t   ) ; 
 	 	 	 	 } 
 
 	 	 	 	 / /   R e s e t   t h e   m o u s e H a n d l e d   f l a g 
 	 	 	 	 t h i s . m o u s e H a n d l e d   =   f a l s e ; 
 	 	 	 } 
 	 	 } ) ; 
 	 } , 
 
 	 _ d e s t r o y :   f u n c t i o n ( )   { 
 	 	 / /   D e s t r o y   ( s u b ) m e n u s 
 	 	 t h i s . e l e m e n t 
 	 	 	 . r e m o v e A t t r (   " a r i a - a c t i v e d e s c e n d a n t "   ) 
 	 	 	 . f i n d (   " . u i - m e n u "   ) . a d d B a c k ( ) 
 	 	 	 	 . r e m o v e C l a s s (   " u i - m e n u   u i - w i d g e t   u i - w i d g e t - c o n t e n t   u i - c o r n e r - a l l   u i - m e n u - i c o n s "   ) 
 	 	 	 	 . r e m o v e A t t r (   " r o l e "   ) 
 	 	 	 	 . r e m o v e A t t r (   " t a b I n d e x "   ) 
 	 	 	 	 . r e m o v e A t t r (   " a r i a - l a b e l l e d b y "   ) 
 	 	 	 	 . r e m o v e A t t r (   " a r i a - e x p a n d e d "   ) 
 	 	 	 	 . r e m o v e A t t r (   " a r i a - h i d d e n "   ) 
 	 	 	 	 . r e m o v e A t t r (   " a r i a - d i s a b l e d "   ) 
 	 	 	 	 . r e m o v e U n i q u e I d ( ) 
 	 	 	 	 . s h o w ( ) ; 
 
 	 	 / /   D e s t r o y   m e n u   i t e m s 
 	 	 t h i s . e l e m e n t . f i n d (   " . u i - m e n u - i t e m "   ) 
 	 	 	 . r e m o v e C l a s s (   " u i - m e n u - i t e m "   ) 
 	 	 	 . r e m o v e A t t r (   " r o l e "   ) 
 	 	 	 . r e m o v e A t t r (   " a r i a - d i s a b l e d "   ) 
 	 	 	 . c h i l d r e n (   " a "   ) 
 	 	 	 	 . r e m o v e U n i q u e I d ( ) 
 	 	 	 	 . r e m o v e C l a s s (   " u i - c o r n e r - a l l   u i - s t a t e - h o v e r "   ) 
 	 	 	 	 . r e m o v e A t t r (   " t a b I n d e x "   ) 
 	 	 	 	 . r e m o v e A t t r (   " r o l e "   ) 
 	 	 	 	 . r e m o v e A t t r (   " a r i a - h a s p o p u p "   ) 
 	 	 	 	 . c h i l d r e n ( ) . e a c h (   f u n c t i o n ( )   { 
 	 	 	 	 	 v a r   e l e m   =   $ (   t h i s   ) ; 
 	 	 	 	 	 i f   (   e l e m . d a t a (   " u i - m e n u - s u b m e n u - c a r a t "   )   )   { 
 	 	 	 	 	 	 e l e m . r e m o v e ( ) ; 
 	 	 	 	 	 } 
 	 	 	 	 } ) ; 
 
 	 	 / /   D e s t r o y   m e n u   d i v i d e r s 
 	 	 t h i s . e l e m e n t . f i n d (   " . u i - m e n u - d i v i d e r "   ) . r e m o v e C l a s s (   " u i - m e n u - d i v i d e r   u i - w i d g e t - c o n t e n t "   ) ; 
 	 } , 
 
 	 _ k e y d o w n :   f u n c t i o n (   e v e n t   )   { 
 	 	 / * j s h i n t   m a x c o m p l e x i t y : 2 0 * / 
 	 	 v a r   m a t c h ,   p r e v ,   c h a r a c t e r ,   s k i p ,   r e g e x , 
 	 	 	 p r e v e n t D e f a u l t   =   t r u e ; 
 
 	 	 f u n c t i o n   e s c a p e (   v a l u e   )   { 
 	 	 	 r e t u r n   v a l u e . r e p l a c e (   / [ \ - \ [ \ ] { } ( ) * + ? . , \ \ \ ^ $ | # \ s ] / g ,   " \ \ $ & "   ) ; 
 	 	 } 
 
 	 	 s w i t c h   (   e v e n t . k e y C o d e   )   { 
 	 	 c a s e   $ . u i . k e y C o d e . P A G E _ U P : 
 	 	 	 t h i s . p r e v i o u s P a g e (   e v e n t   ) ; 
 	 	 	 b r e a k ; 
 	 	 c a s e   $ . u i . k e y C o d e . P A G E _ D O W N : 
 	 	 	 t h i s . n e x t P a g e (   e v e n t   ) ; 
 	 	 	 b r e a k ; 
 	 	 c a s e   $ . u i . k e y C o d e . H O M E : 
 	 	 	 t h i s . _ m o v e (   " f i r s t " ,   " f i r s t " ,   e v e n t   ) ; 
 	 	 	 b r e a k ; 
 	 	 c a s e   $ . u i . k e y C o d e . E N D : 
 	 	 	 t h i s . _ m o v e (   " l a s t " ,   " l a s t " ,   e v e n t   ) ; 
 	 	 	 b r e a k ; 
 	 	 c a s e   $ . u i . k e y C o d e . U P : 
 	 	 	 t h i s . p r e v i o u s (   e v e n t   ) ; 
 	 	 	 b r e a k ; 
 	 	 c a s e   $ . u i . k e y C o d e . D O W N : 
 	 	 	 t h i s . n e x t (   e v e n t   ) ; 
 	 	 	 b r e a k ; 
 	 	 c a s e   $ . u i . k e y C o d e . L E F T : 
 	 	 	 t h i s . c o l l a p s e (   e v e n t   ) ; 
 	 	 	 b r e a k ; 
 	 	 c a s e   $ . u i . k e y C o d e . R I G H T : 
 	 	 	 i f   (   t h i s . a c t i v e   & &   ! t h i s . a c t i v e . i s (   " . u i - s t a t e - d i s a b l e d "   )   )   { 
 	 	 	 	 t h i s . e x p a n d (   e v e n t   ) ; 
 	 	 	 } 
 	 	 	 b r e a k ; 
 	 	 c a s e   $ . u i . k e y C o d e . E N T E R : 
 	 	 c a s e   $ . u i . k e y C o d e . S P A C E : 
 	 	 	 t h i s . _ a c t i v a t e (   e v e n t   ) ; 
 	 	 	 b r e a k ; 
 	 	 c a s e   $ . u i . k e y C o d e . E S C A P E : 
 	 	 	 t h i s . c o l l a p s e (   e v e n t   ) ; 
 	 	 	 b r e a k ; 
 	 	 d e f a u l t : 
 	 	 	 p r e v e n t D e f a u l t   =   f a l s e ; 
 	 	 	 p r e v   =   t h i s . p r e v i o u s F i l t e r   | |   " " ; 
 	 	 	 c h a r a c t e r   =   S t r i n g . f r o m C h a r C o d e (   e v e n t . k e y C o d e   ) ; 
 	 	 	 s k i p   =   f a l s e ; 
 
 	 	 	 c l e a r T i m e o u t (   t h i s . f i l t e r T i m e r   ) ; 
 
 	 	 	 i f   (   c h a r a c t e r   = = =   p r e v   )   { 
 	 	 	 	 s k i p   =   t r u e ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 c h a r a c t e r   =   p r e v   +   c h a r a c t e r ; 
 	 	 	 } 
 
 	 	 	 r e g e x   =   n e w   R e g E x p (   " ^ "   +   e s c a p e (   c h a r a c t e r   ) ,   " i "   ) ; 
 	 	 	 m a t c h   =   t h i s . a c t i v e M e n u . c h i l d r e n (   " . u i - m e n u - i t e m "   ) . f i l t e r ( f u n c t i o n ( )   { 
 	 	 	 	 r e t u r n   r e g e x . t e s t (   $ (   t h i s   ) . c h i l d r e n (   " a "   ) . t e x t ( )   ) ; 
 	 	 	 } ) ; 
 	 	 	 m a t c h   =   s k i p   & &   m a t c h . i n d e x (   t h i s . a c t i v e . n e x t ( )   )   ! = =   - 1   ? 
 	 	 	 	 t h i s . a c t i v e . n e x t A l l (   " . u i - m e n u - i t e m "   )   : 
 	 	 	 	 m a t c h ; 
 
 	 	 	 / /   I f   n o   m a t c h e s   o n   t h e   c u r r e n t   f i l t e r ,   r e s e t   t o   t h e   l a s t   c h a r a c t e r   p r e s s e d 
 	 	 	 / /   t o   m o v e   d o w n   t h e   m e n u   t o   t h e   f i r s t   i t e m   t h a t   s t a r t s   w i t h   t h a t   c h a r a c t e r 
 	 	 	 i f   (   ! m a t c h . l e n g t h   )   { 
 	 	 	 	 c h a r a c t e r   =   S t r i n g . f r o m C h a r C o d e (   e v e n t . k e y C o d e   ) ; 
 	 	 	 	 r e g e x   =   n e w   R e g E x p (   " ^ "   +   e s c a p e (   c h a r a c t e r   ) ,   " i "   ) ; 
 	 	 	 	 m a t c h   =   t h i s . a c t i v e M e n u . c h i l d r e n (   " . u i - m e n u - i t e m "   ) . f i l t e r ( f u n c t i o n ( )   { 
 	 	 	 	 	 r e t u r n   r e g e x . t e s t (   $ (   t h i s   ) . c h i l d r e n (   " a "   ) . t e x t ( )   ) ; 
 	 	 	 	 } ) ; 
 	 	 	 } 
 
 	 	 	 i f   (   m a t c h . l e n g t h   )   { 
 	 	 	 	 t h i s . f o c u s (   e v e n t ,   m a t c h   ) ; 
 	 	 	 	 i f   (   m a t c h . l e n g t h   >   1   )   { 
 	 	 	 	 	 t h i s . p r e v i o u s F i l t e r   =   c h a r a c t e r ; 
 	 	 	 	 	 t h i s . f i l t e r T i m e r   =   t h i s . _ d e l a y ( f u n c t i o n ( )   { 
 	 	 	 	 	 	 d e l e t e   t h i s . p r e v i o u s F i l t e r ; 
 	 	 	 	 	 } ,   1 0 0 0   ) ; 
 	 	 	 	 }   e l s e   { 
 	 	 	 	 	 d e l e t e   t h i s . p r e v i o u s F i l t e r ; 
 	 	 	 	 } 
 	 	 	 }   e l s e   { 
 	 	 	 	 d e l e t e   t h i s . p r e v i o u s F i l t e r ; 
 	 	 	 } 
 	 	 } 
 
 	 	 i f   (   p r e v e n t D e f a u l t   )   { 
 	 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 	 	 } 
 	 } , 
 
 	 _ a c t i v a t e :   f u n c t i o n (   e v e n t   )   { 
 	 	 i f   (   ! t h i s . a c t i v e . i s (   " . u i - s t a t e - d i s a b l e d "   )   )   { 
 	 	 	 i f   (   t h i s . a c t i v e . c h i l d r e n (   " a [ a r i a - h a s p o p u p = ' t r u e ' ] "   ) . l e n g t h   )   { 
 	 	 	 	 t h i s . e x p a n d (   e v e n t   ) ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 t h i s . s e l e c t (   e v e n t   ) ; 
 	 	 	 } 
 	 	 } 
 	 } , 
 
 	 r e f r e s h :   f u n c t i o n ( )   { 
 	 	 v a r   m e n u s , 
 	 	 	 i c o n   =   t h i s . o p t i o n s . i c o n s . s u b m e n u , 
 	 	 	 s u b m e n u s   =   t h i s . e l e m e n t . f i n d (   t h i s . o p t i o n s . m e n u s   ) ; 
 
 	 	 / /   I n i t i a l i z e   n e s t e d   m e n u s 
 	 	 s u b m e n u s . f i l t e r (   " : n o t ( . u i - m e n u ) "   ) 
 	 	 	 . a d d C l a s s (   " u i - m e n u   u i - w i d g e t   u i - w i d g e t - c o n t e n t   u i - c o r n e r - a l l "   ) 
 	 	 	 . h i d e ( ) 
 	 	 	 . a t t r ( { 
 	 	 	 	 r o l e :   t h i s . o p t i o n s . r o l e , 
 	 	 	 	 " a r i a - h i d d e n " :   " t r u e " , 
 	 	 	 	 " a r i a - e x p a n d e d " :   " f a l s e " 
 	 	 	 } ) 
 	 	 	 . e a c h ( f u n c t i o n ( )   { 
 	 	 	 	 v a r   m e n u   =   $ (   t h i s   ) , 
 	 	 	 	 	 i t e m   =   m e n u . p r e v (   " a "   ) , 
 	 	 	 	 	 s u b m e n u C a r a t   =   $ (   " < s p a n > "   ) 
 	 	 	 	 	 	 . a d d C l a s s (   " u i - m e n u - i c o n   u i - i c o n   "   +   i c o n   ) 
 	 	 	 	 	 	 . d a t a (   " u i - m e n u - s u b m e n u - c a r a t " ,   t r u e   ) ; 
 
 	 	 	 	 i t e m 
 	 	 	 	 	 . a t t r (   " a r i a - h a s p o p u p " ,   " t r u e "   ) 
 	 	 	 	 	 . p r e p e n d (   s u b m e n u C a r a t   ) ; 
 	 	 	 	 m e n u . a t t r (   " a r i a - l a b e l l e d b y " ,   i t e m . a t t r (   " i d "   )   ) ; 
 	 	 	 } ) ; 
 
 	 	 m e n u s   =   s u b m e n u s . a d d (   t h i s . e l e m e n t   ) ; 
 
 	 	 / /   D o n ' t   r e f r e s h   l i s t   i t e m s   t h a t   a r e   a l r e a d y   a d a p t e d 
 	 	 m e n u s . c h i l d r e n (   " : n o t ( . u i - m e n u - i t e m ) : h a s ( a ) "   ) 
 	 	 	 . a d d C l a s s (   " u i - m e n u - i t e m "   ) 
 	 	 	 . a t t r (   " r o l e " ,   " p r e s e n t a t i o n "   ) 
 	 	 	 . c h i l d r e n (   " a "   ) 
 	 	 	 	 . u n i q u e I d ( ) 
 	 	 	 	 . a d d C l a s s (   " u i - c o r n e r - a l l "   ) 
 	 	 	 	 . a t t r ( { 
 	 	 	 	 	 t a b I n d e x :   - 1 , 
 	 	 	 	 	 r o l e :   t h i s . _ i t e m R o l e ( ) 
 	 	 	 	 } ) ; 
 
 	 	 / /   I n i t i a l i z e   u n l i n k e d   m e n u - i t e m s   c o n t a i n i n g   s p a c e s   a n d / o r   d a s h e s   o n l y   a s   d i v i d e r s 
 	 	 m e n u s . c h i l d r e n (   " : n o t ( . u i - m e n u - i t e m ) "   ) . e a c h ( f u n c t i o n ( )   { 
 	 	 	 v a r   i t e m   =   $ (   t h i s   ) ; 
 	 	 	 / /   h y p h e n ,   e m   d a s h ,   e n   d a s h 
 	 	 	 i f   (   ! / [ ^ \ - \ u 2 0 1 4 \ u 2 0 1 3 \ s ] / . t e s t (   i t e m . t e x t ( )   )   )   { 
 	 	 	 	 i t e m . a d d C l a s s (   " u i - w i d g e t - c o n t e n t   u i - m e n u - d i v i d e r "   ) ; 
 	 	 	 } 
 	 	 } ) ; 
 
 	 	 / /   A d d   a r i a - d i s a b l e d   a t t r i b u t e   t o   a n y   d i s a b l e d   m e n u   i t e m 
 	 	 m e n u s . c h i l d r e n (   " . u i - s t a t e - d i s a b l e d "   ) . a t t r (   " a r i a - d i s a b l e d " ,   " t r u e "   ) ; 
 
 	 	 / /   I f   t h e   a c t i v e   i t e m   h a s   b e e n   r e m o v e d ,   b l u r   t h e   m e n u 
 	 	 i f   (   t h i s . a c t i v e   & &   ! $ . c o n t a i n s (   t h i s . e l e m e n t [   0   ] ,   t h i s . a c t i v e [   0   ]   )   )   { 
 	 	 	 t h i s . b l u r ( ) ; 
 	 	 } 
 	 } , 
 
 	 _ i t e m R o l e :   f u n c t i o n ( )   { 
 	 	 r e t u r n   { 
 	 	 	 m e n u :   " m e n u i t e m " , 
 	 	 	 l i s t b o x :   " o p t i o n " 
 	 	 } [   t h i s . o p t i o n s . r o l e   ] ; 
 	 } , 
 
 	 _ s e t O p t i o n :   f u n c t i o n (   k e y ,   v a l u e   )   { 
 	 	 i f   (   k e y   = = =   " i c o n s "   )   { 
 	 	 	 t h i s . e l e m e n t . f i n d (   " . u i - m e n u - i c o n "   ) 
 	 	 	 	 . r e m o v e C l a s s (   t h i s . o p t i o n s . i c o n s . s u b m e n u   ) 
 	 	 	 	 . a d d C l a s s (   v a l u e . s u b m e n u   ) ; 
 	 	 } 
 	 	 t h i s . _ s u p e r (   k e y ,   v a l u e   ) ; 
 	 } , 
 
 	 f o c u s :   f u n c t i o n (   e v e n t ,   i t e m   )   { 
 	 	 v a r   n e s t e d ,   f o c u s e d ; 
 	 	 t h i s . b l u r (   e v e n t ,   e v e n t   & &   e v e n t . t y p e   = = =   " f o c u s "   ) ; 
 
 	 	 t h i s . _ s c r o l l I n t o V i e w (   i t e m   ) ; 
 
 	 	 t h i s . a c t i v e   =   i t e m . f i r s t ( ) ; 
 	 	 f o c u s e d   =   t h i s . a c t i v e . c h i l d r e n (   " a "   ) . a d d C l a s s (   " u i - s t a t e - f o c u s "   ) ; 
 	 	 / /   O n l y   u p d a t e   a r i a - a c t i v e d e s c e n d a n t   i f   t h e r e ' s   a   r o l e 
 	 	 / /   o t h e r w i s e   w e   a s s u m e   f o c u s   i s   m a n a g e d   e l s e w h e r e 
 	 	 i f   (   t h i s . o p t i o n s . r o l e   )   { 
 	 	 	 t h i s . e l e m e n t . a t t r (   " a r i a - a c t i v e d e s c e n d a n t " ,   f o c u s e d . a t t r (   " i d "   )   ) ; 
 	 	 } 
 
 	 	 / /   H i g h l i g h t   a c t i v e   p a r e n t   m e n u   i t e m ,   i f   a n y 
 	 	 t h i s . a c t i v e 
 	 	 	 . p a r e n t ( ) 
 	 	 	 . c l o s e s t (   " . u i - m e n u - i t e m "   ) 
 	 	 	 . c h i l d r e n (   " a : f i r s t "   ) 
 	 	 	 . a d d C l a s s (   " u i - s t a t e - a c t i v e "   ) ; 
 
 	 	 i f   (   e v e n t   & &   e v e n t . t y p e   = = =   " k e y d o w n "   )   { 
 	 	 	 t h i s . _ c l o s e ( ) ; 
 	 	 }   e l s e   { 
 	 	 	 t h i s . t i m e r   =   t h i s . _ d e l a y ( f u n c t i o n ( )   { 
 	 	 	 	 t h i s . _ c l o s e ( ) ; 
 	 	 	 } ,   t h i s . d e l a y   ) ; 
 	 	 } 
 
 	 	 n e s t e d   =   i t e m . c h i l d r e n (   " . u i - m e n u "   ) ; 
 	 	 i f   (   n e s t e d . l e n g t h   & &   (   / ^ m o u s e / . t e s t (   e v e n t . t y p e   )   )   )   { 
 	 	 	 t h i s . _ s t a r t O p e n i n g ( n e s t e d ) ; 
 	 	 } 
 	 	 t h i s . a c t i v e M e n u   =   i t e m . p a r e n t ( ) ; 
 
 	 	 t h i s . _ t r i g g e r (   " f o c u s " ,   e v e n t ,   {   i t e m :   i t e m   }   ) ; 
 	 } , 
 
 	 _ s c r o l l I n t o V i e w :   f u n c t i o n (   i t e m   )   { 
 	 	 v a r   b o r d e r T o p ,   p a d d i n g T o p ,   o f f s e t ,   s c r o l l ,   e l e m e n t H e i g h t ,   i t e m H e i g h t ; 
 	 	 i f   (   t h i s . _ h a s S c r o l l ( )   )   { 
 	 	 	 b o r d e r T o p   =   p a r s e F l o a t (   $ . c s s (   t h i s . a c t i v e M e n u [ 0 ] ,   " b o r d e r T o p W i d t h "   )   )   | |   0 ; 
 	 	 	 p a d d i n g T o p   =   p a r s e F l o a t (   $ . c s s (   t h i s . a c t i v e M e n u [ 0 ] ,   " p a d d i n g T o p "   )   )   | |   0 ; 
 	 	 	 o f f s e t   =   i t e m . o f f s e t ( ) . t o p   -   t h i s . a c t i v e M e n u . o f f s e t ( ) . t o p   -   b o r d e r T o p   -   p a d d i n g T o p ; 
 	 	 	 s c r o l l   =   t h i s . a c t i v e M e n u . s c r o l l T o p ( ) ; 
 	 	 	 e l e m e n t H e i g h t   =   t h i s . a c t i v e M e n u . h e i g h t ( ) ; 
 	 	 	 i t e m H e i g h t   =   i t e m . h e i g h t ( ) ; 
 
 	 	 	 i f   (   o f f s e t   <   0   )   { 
 	 	 	 	 t h i s . a c t i v e M e n u . s c r o l l T o p (   s c r o l l   +   o f f s e t   ) ; 
 	 	 	 }   e l s e   i f   (   o f f s e t   +   i t e m H e i g h t   >   e l e m e n t H e i g h t   )   { 
 	 	 	 	 t h i s . a c t i v e M e n u . s c r o l l T o p (   s c r o l l   +   o f f s e t   -   e l e m e n t H e i g h t   +   i t e m H e i g h t   ) ; 
 	 	 	 } 
 	 	 } 
 	 } , 
 
 	 b l u r :   f u n c t i o n (   e v e n t ,   f r o m F o c u s   )   { 
 	 	 i f   (   ! f r o m F o c u s   )   { 
 	 	 	 c l e a r T i m e o u t (   t h i s . t i m e r   ) ; 
 	 	 } 
 
 	 	 i f   (   ! t h i s . a c t i v e   )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 t h i s . a c t i v e . c h i l d r e n (   " a "   ) . r e m o v e C l a s s (   " u i - s t a t e - f o c u s "   ) ; 
 	 	 t h i s . a c t i v e   =   n u l l ; 
 
 	 	 t h i s . _ t r i g g e r (   " b l u r " ,   e v e n t ,   {   i t e m :   t h i s . a c t i v e   }   ) ; 
 	 } , 
 
 	 _ s t a r t O p e n i n g :   f u n c t i o n (   s u b m e n u   )   { 
 	 	 c l e a r T i m e o u t (   t h i s . t i m e r   ) ; 
 
 	 	 / /   D o n ' t   o p e n   i f   a l r e a d y   o p e n   f i x e s   a   F i r e f o x   b u g   t h a t   c a u s e d   a   . 5   p i x e l 
 	 	 / /   s h i f t   i n   t h e   s u b m e n u   p o s i t i o n   w h e n   m o u s i n g   o v e r   t h e   c a r a t   i c o n 
 	 	 i f   (   s u b m e n u . a t t r (   " a r i a - h i d d e n "   )   ! = =   " t r u e "   )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 t h i s . t i m e r   =   t h i s . _ d e l a y ( f u n c t i o n ( )   { 
 	 	 	 t h i s . _ c l o s e ( ) ; 
 	 	 	 t h i s . _ o p e n (   s u b m e n u   ) ; 
 	 	 } ,   t h i s . d e l a y   ) ; 
 	 } , 
 
 	 _ o p e n :   f u n c t i o n (   s u b m e n u   )   { 
 	 	 v a r   p o s i t i o n   =   $ . e x t e n d ( { 
 	 	 	 o f :   t h i s . a c t i v e 
 	 	 } ,   t h i s . o p t i o n s . p o s i t i o n   ) ; 
 
 	 	 c l e a r T i m e o u t (   t h i s . t i m e r   ) ; 
 	 	 t h i s . e l e m e n t . f i n d (   " . u i - m e n u "   ) . n o t (   s u b m e n u . p a r e n t s (   " . u i - m e n u "   )   ) 
 	 	 	 . h i d e ( ) 
 	 	 	 . a t t r (   " a r i a - h i d d e n " ,   " t r u e "   ) ; 
 
 	 	 s u b m e n u 
 	 	 	 . s h o w ( ) 
 	 	 	 . r e m o v e A t t r (   " a r i a - h i d d e n "   ) 
 	 	 	 . a t t r (   " a r i a - e x p a n d e d " ,   " t r u e "   ) 
 	 	 	 . p o s i t i o n (   p o s i t i o n   ) ; 
 	 } , 
 
 	 c o l l a p s e A l l :   f u n c t i o n (   e v e n t ,   a l l   )   { 
 	 	 c l e a r T i m e o u t (   t h i s . t i m e r   ) ; 
 	 	 t h i s . t i m e r   =   t h i s . _ d e l a y ( f u n c t i o n ( )   { 
 	 	 	 / /   I f   w e   w e r e   p a s s e d   a n   e v e n t ,   l o o k   f o r   t h e   s u b m e n u   t h a t   c o n t a i n s   t h e   e v e n t 
 	 	 	 v a r   c u r r e n t M e n u   =   a l l   ?   t h i s . e l e m e n t   : 
 	 	 	 	 $ (   e v e n t   & &   e v e n t . t a r g e t   ) . c l o s e s t (   t h i s . e l e m e n t . f i n d (   " . u i - m e n u "   )   ) ; 
 
 	 	 	 / /   I f   w e   f o u n d   n o   v a l i d   s u b m e n u   a n c e s t o r ,   u s e   t h e   m a i n   m e n u   t o   c l o s e   a l l   s u b   m e n u s   a n y w a y 
 	 	 	 i f   (   ! c u r r e n t M e n u . l e n g t h   )   { 
 	 	 	 	 c u r r e n t M e n u   =   t h i s . e l e m e n t ; 
 	 	 	 } 
 
 	 	 	 t h i s . _ c l o s e (   c u r r e n t M e n u   ) ; 
 
 	 	 	 t h i s . b l u r (   e v e n t   ) ; 
 	 	 	 t h i s . a c t i v e M e n u   =   c u r r e n t M e n u ; 
 	 	 } ,   t h i s . d e l a y   ) ; 
 	 } , 
 
 	 / /   W i t h   n o   a r g u m e n t s ,   c l o s e s   t h e   c u r r e n t l y   a c t i v e   m e n u   -   i f   n o t h i n g   i s   a c t i v e 
 	 / /   i t   c l o s e s   a l l   m e n u s .     I f   p a s s e d   a n   a r g u m e n t ,   i t   w i l l   s e a r c h   f o r   m e n u s   B E L O W 
 	 _ c l o s e :   f u n c t i o n (   s t a r t M e n u   )   { 
 	 	 i f   (   ! s t a r t M e n u   )   { 
 	 	 	 s t a r t M e n u   =   t h i s . a c t i v e   ?   t h i s . a c t i v e . p a r e n t ( )   :   t h i s . e l e m e n t ; 
 	 	 } 
 
 	 	 s t a r t M e n u 
 	 	 	 . f i n d (   " . u i - m e n u "   ) 
 	 	 	 	 . h i d e ( ) 
 	 	 	 	 . a t t r (   " a r i a - h i d d e n " ,   " t r u e "   ) 
 	 	 	 	 . a t t r (   " a r i a - e x p a n d e d " ,   " f a l s e "   ) 
 	 	 	 . e n d ( ) 
 	 	 	 . f i n d (   " a . u i - s t a t e - a c t i v e "   ) 
 	 	 	 	 . r e m o v e C l a s s (   " u i - s t a t e - a c t i v e "   ) ; 
 	 } , 
 
 	 c o l l a p s e :   f u n c t i o n (   e v e n t   )   { 
 	 	 v a r   n e w I t e m   =   t h i s . a c t i v e   & & 
 	 	 	 t h i s . a c t i v e . p a r e n t ( ) . c l o s e s t (   " . u i - m e n u - i t e m " ,   t h i s . e l e m e n t   ) ; 
 	 	 i f   (   n e w I t e m   & &   n e w I t e m . l e n g t h   )   { 
 	 	 	 t h i s . _ c l o s e ( ) ; 
 	 	 	 t h i s . f o c u s (   e v e n t ,   n e w I t e m   ) ; 
 	 	 } 
 	 } , 
 
 	 e x p a n d :   f u n c t i o n (   e v e n t   )   { 
 	 	 v a r   n e w I t e m   =   t h i s . a c t i v e   & & 
 	 	 	 t h i s . a c t i v e 
 	 	 	 	 . c h i l d r e n (   " . u i - m e n u   "   ) 
 	 	 	 	 . c h i l d r e n (   " . u i - m e n u - i t e m "   ) 
 	 	 	 	 . f i r s t ( ) ; 
 
 	 	 i f   (   n e w I t e m   & &   n e w I t e m . l e n g t h   )   { 
 	 	 	 t h i s . _ o p e n (   n e w I t e m . p a r e n t ( )   ) ; 
 
 	 	 	 / /   D e l a y   s o   F i r e f o x   w i l l   n o t   h i d e   a c t i v e d e s c e n d a n t   c h a n g e   i n   e x p a n d i n g   s u b m e n u   f r o m   A T 
 	 	 	 t h i s . _ d e l a y ( f u n c t i o n ( )   { 
 	 	 	 	 t h i s . f o c u s (   e v e n t ,   n e w I t e m   ) ; 
 	 	 	 } ) ; 
 	 	 } 
 	 } , 
 
 	 n e x t :   f u n c t i o n (   e v e n t   )   { 
 	 	 t h i s . _ m o v e (   " n e x t " ,   " f i r s t " ,   e v e n t   ) ; 
 	 } , 
 
 	 p r e v i o u s :   f u n c t i o n (   e v e n t   )   { 
 	 	 t h i s . _ m o v e (   " p r e v " ,   " l a s t " ,   e v e n t   ) ; 
 	 } , 
 
 	 i s F i r s t I t e m :   f u n c t i o n ( )   { 
 	 	 r e t u r n   t h i s . a c t i v e   & &   ! t h i s . a c t i v e . p r e v A l l (   " . u i - m e n u - i t e m "   ) . l e n g t h ; 
 	 } , 
 
 	 i s L a s t I t e m :   f u n c t i o n ( )   { 
 	 	 r e t u r n   t h i s . a c t i v e   & &   ! t h i s . a c t i v e . n e x t A l l (   " . u i - m e n u - i t e m "   ) . l e n g t h ; 
 	 } , 
 
 	 _ m o v e :   f u n c t i o n (   d i r e c t i o n ,   f i l t e r ,   e v e n t   )   { 
 	 	 v a r   n e x t ; 
 	 	 i f   (   t h i s . a c t i v e   )   { 
 	 	 	 i f   (   d i r e c t i o n   = = =   " f i r s t "   | |   d i r e c t i o n   = = =   " l a s t "   )   { 
 	 	 	 	 n e x t   =   t h i s . a c t i v e 
 	 	 	 	 	 [   d i r e c t i o n   = = =   " f i r s t "   ?   " p r e v A l l "   :   " n e x t A l l "   ] (   " . u i - m e n u - i t e m "   ) 
 	 	 	 	 	 . e q (   - 1   ) ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 n e x t   =   t h i s . a c t i v e 
 	 	 	 	 	 [   d i r e c t i o n   +   " A l l "   ] (   " . u i - m e n u - i t e m "   ) 
 	 	 	 	 	 . e q (   0   ) ; 
 	 	 	 } 
 	 	 } 
 	 	 i f   (   ! n e x t   | |   ! n e x t . l e n g t h   | |   ! t h i s . a c t i v e   )   { 
 	 	 	 n e x t   =   t h i s . a c t i v e M e n u . c h i l d r e n (   " . u i - m e n u - i t e m "   ) [   f i l t e r   ] ( ) ; 
 	 	 } 
 
 	 	 t h i s . f o c u s (   e v e n t ,   n e x t   ) ; 
 	 } , 
 
 	 n e x t P a g e :   f u n c t i o n (   e v e n t   )   { 
 	 	 v a r   i t e m ,   b a s e ,   h e i g h t ; 
 
 	 	 i f   (   ! t h i s . a c t i v e   )   { 
 	 	 	 t h i s . n e x t (   e v e n t   ) ; 
 	 	 	 r e t u r n ; 
 	 	 } 
 	 	 i f   (   t h i s . i s L a s t I t e m ( )   )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 	 	 i f   (   t h i s . _ h a s S c r o l l ( )   )   { 
 	 	 	 b a s e   =   t h i s . a c t i v e . o f f s e t ( ) . t o p ; 
 	 	 	 h e i g h t   =   t h i s . e l e m e n t . h e i g h t ( ) ; 
 	 	 	 t h i s . a c t i v e . n e x t A l l (   " . u i - m e n u - i t e m "   ) . e a c h ( f u n c t i o n ( )   { 
 	 	 	 	 i t e m   =   $ (   t h i s   ) ; 
 	 	 	 	 r e t u r n   i t e m . o f f s e t ( ) . t o p   -   b a s e   -   h e i g h t   <   0 ; 
 	 	 	 } ) ; 
 
 	 	 	 t h i s . f o c u s (   e v e n t ,   i t e m   ) ; 
 	 	 }   e l s e   { 
 	 	 	 t h i s . f o c u s (   e v e n t ,   t h i s . a c t i v e M e n u . c h i l d r e n (   " . u i - m e n u - i t e m "   ) 
 	 	 	 	 [   ! t h i s . a c t i v e   ?   " f i r s t "   :   " l a s t "   ] ( )   ) ; 
 	 	 } 
 	 } , 
 
 	 p r e v i o u s P a g e :   f u n c t i o n (   e v e n t   )   { 
 	 	 v a r   i t e m ,   b a s e ,   h e i g h t ; 
 	 	 i f   (   ! t h i s . a c t i v e   )   { 
 	 	 	 t h i s . n e x t (   e v e n t   ) ; 
 	 	 	 r e t u r n ; 
 	 	 } 
 	 	 i f   (   t h i s . i s F i r s t I t e m ( )   )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 	 	 i f   (   t h i s . _ h a s S c r o l l ( )   )   { 
 	 	 	 b a s e   =   t h i s . a c t i v e . o f f s e t ( ) . t o p ; 
 	 	 	 h e i g h t   =   t h i s . e l e m e n t . h e i g h t ( ) ; 
 	 	 	 t h i s . a c t i v e . p r e v A l l (   " . u i - m e n u - i t e m "   ) . e a c h ( f u n c t i o n ( )   { 
 	 	 	 	 i t e m   =   $ (   t h i s   ) ; 
 	 	 	 	 r e t u r n   i t e m . o f f s e t ( ) . t o p   -   b a s e   +   h e i g h t   >   0 ; 
 	 	 	 } ) ; 
 
 	 	 	 t h i s . f o c u s (   e v e n t ,   i t e m   ) ; 
 	 	 }   e l s e   { 
 	 	 	 t h i s . f o c u s (   e v e n t ,   t h i s . a c t i v e M e n u . c h i l d r e n (   " . u i - m e n u - i t e m "   ) . f i r s t ( )   ) ; 
 	 	 } 
 	 } , 
 
 	 _ h a s S c r o l l :   f u n c t i o n ( )   { 
 	 	 r e t u r n   t h i s . e l e m e n t . o u t e r H e i g h t ( )   <   t h i s . e l e m e n t . p r o p (   " s c r o l l H e i g h t "   ) ; 
 	 } , 
 
 	 s e l e c t :   f u n c t i o n (   e v e n t   )   { 
 	 	 / /   T O D O :   I t   s h o u l d   n e v e r   b e   p o s s i b l e   t o   n o t   h a v e   a n   a c t i v e   i t e m   a t   t h i s 
 	 	 / /   p o i n t ,   b u t   t h e   t e s t s   d o n ' t   t r i g g e r   m o u s e e n t e r   b e f o r e   c l i c k . 
 	 	 t h i s . a c t i v e   =   t h i s . a c t i v e   | |   $ (   e v e n t . t a r g e t   ) . c l o s e s t (   " . u i - m e n u - i t e m "   ) ; 
 	 	 v a r   u i   =   {   i t e m :   t h i s . a c t i v e   } ; 
 	 	 i f   (   ! t h i s . a c t i v e . h a s (   " . u i - m e n u "   ) . l e n g t h   )   { 
 	 	 	 t h i s . c o l l a p s e A l l (   e v e n t ,   t r u e   ) ; 
 	 	 } 
 	 	 t h i s . _ t r i g g e r (   " s e l e c t " ,   e v e n t ,   u i   ) ; 
 	 } 
 } ) ; 
 
 } (   j Q u e r y   ) ) ; 
 
 ( f u n c t i o n (   $ ,   u n d e f i n e d   )   { 
 
 $ . u i   =   $ . u i   | |   { } ; 
 
 v a r   c a c h e d S c r o l l b a r W i d t h , 
 	 m a x   =   M a t h . m a x , 
 	 a b s   =   M a t h . a b s , 
 	 r o u n d   =   M a t h . r o u n d , 
 	 r h o r i z o n t a l   =   / l e f t | c e n t e r | r i g h t / , 
 	 r v e r t i c a l   =   / t o p | c e n t e r | b o t t o m / , 
 	 r o f f s e t   =   / [ \ + \ - ] \ d + ( \ . [ \ d ] + ) ? % ? / , 
 	 r p o s i t i o n   =   / ^ \ w + / , 
 	 r p e r c e n t   =   / % $ / , 
 	 _ p o s i t i o n   =   $ . f n . p o s i t i o n ; 
 
 f u n c t i o n   g e t O f f s e t s (   o f f s e t s ,   w i d t h ,   h e i g h t   )   { 
 	 r e t u r n   [ 
 	 	 p a r s e F l o a t (   o f f s e t s [   0   ]   )   *   (   r p e r c e n t . t e s t (   o f f s e t s [   0   ]   )   ?   w i d t h   /   1 0 0   :   1   ) , 
 	 	 p a r s e F l o a t (   o f f s e t s [   1   ]   )   *   (   r p e r c e n t . t e s t (   o f f s e t s [   1   ]   )   ?   h e i g h t   /   1 0 0   :   1   ) 
 	 ] ; 
 } 
 
 f u n c t i o n   p a r s e C s s (   e l e m e n t ,   p r o p e r t y   )   { 
 	 r e t u r n   p a r s e I n t (   $ . c s s (   e l e m e n t ,   p r o p e r t y   ) ,   1 0   )   | |   0 ; 
 } 
 
 f u n c t i o n   g e t D i m e n s i o n s (   e l e m   )   { 
 	 v a r   r a w   =   e l e m [ 0 ] ; 
 	 i f   (   r a w . n o d e T y p e   = = =   9   )   { 
 	 	 r e t u r n   { 
 	 	 	 w i d t h :   e l e m . w i d t h ( ) , 
 	 	 	 h e i g h t :   e l e m . h e i g h t ( ) , 
 	 	 	 o f f s e t :   {   t o p :   0 ,   l e f t :   0   } 
 	 	 } ; 
 	 } 
 	 i f   (   $ . i s W i n d o w (   r a w   )   )   { 
 	 	 r e t u r n   { 
 	 	 	 w i d t h :   e l e m . w i d t h ( ) , 
 	 	 	 h e i g h t :   e l e m . h e i g h t ( ) , 
 	 	 	 o f f s e t :   {   t o p :   e l e m . s c r o l l T o p ( ) ,   l e f t :   e l e m . s c r o l l L e f t ( )   } 
 	 	 } ; 
 	 } 
 	 i f   (   r a w . p r e v e n t D e f a u l t   )   { 
 	 	 r e t u r n   { 
 	 	 	 w i d t h :   0 , 
 	 	 	 h e i g h t :   0 , 
 	 	 	 o f f s e t :   {   t o p :   r a w . p a g e Y ,   l e f t :   r a w . p a g e X   } 
 	 	 } ; 
 	 } 
 	 r e t u r n   { 
 	 	 w i d t h :   e l e m . o u t e r W i d t h ( ) , 
 	 	 h e i g h t :   e l e m . o u t e r H e i g h t ( ) , 
 	 	 o f f s e t :   e l e m . o f f s e t ( ) 
 	 } ; 
 } 
 
 $ . p o s i t i o n   =   { 
 	 s c r o l l b a r W i d t h :   f u n c t i o n ( )   { 
 	 	 i f   (   c a c h e d S c r o l l b a r W i d t h   ! = =   u n d e f i n e d   )   { 
 	 	 	 r e t u r n   c a c h e d S c r o l l b a r W i d t h ; 
 	 	 } 
 	 	 v a r   w 1 ,   w 2 , 
 	 	 	 d i v   =   $ (   " < d i v   s t y l e = ' d i s p l a y : b l o c k ; w i d t h : 5 0 p x ; h e i g h t : 5 0 p x ; o v e r f l o w : h i d d e n ; ' > < d i v   s t y l e = ' h e i g h t : 1 0 0 p x ; w i d t h : a u t o ; ' > < / d i v > < / d i v > "   ) , 
 	 	 	 i n n e r D i v   =   d i v . c h i l d r e n ( ) [ 0 ] ; 
 
 	 	 $ (   " b o d y "   ) . a p p e n d (   d i v   ) ; 
 	 	 w 1   =   i n n e r D i v . o f f s e t W i d t h ; 
 	 	 d i v . c s s (   " o v e r f l o w " ,   " s c r o l l "   ) ; 
 
 	 	 w 2   =   i n n e r D i v . o f f s e t W i d t h ; 
 
 	 	 i f   (   w 1   = = =   w 2   )   { 
 	 	 	 w 2   =   d i v [ 0 ] . c l i e n t W i d t h ; 
 	 	 } 
 
 	 	 d i v . r e m o v e ( ) ; 
 
 	 	 r e t u r n   ( c a c h e d S c r o l l b a r W i d t h   =   w 1   -   w 2 ) ; 
 	 } , 
 	 g e t S c r o l l I n f o :   f u n c t i o n (   w i t h i n   )   { 
 	 	 v a r   o v e r f l o w X   =   w i t h i n . i s W i n d o w   ?   " "   :   w i t h i n . e l e m e n t . c s s (   " o v e r f l o w - x "   ) , 
 	 	 	 o v e r f l o w Y   =   w i t h i n . i s W i n d o w   ?   " "   :   w i t h i n . e l e m e n t . c s s (   " o v e r f l o w - y "   ) , 
 	 	 	 h a s O v e r f l o w X   =   o v e r f l o w X   = = =   " s c r o l l "   | | 
 	 	 	 	 (   o v e r f l o w X   = = =   " a u t o "   & &   w i t h i n . w i d t h   <   w i t h i n . e l e m e n t [ 0 ] . s c r o l l W i d t h   ) , 
 	 	 	 h a s O v e r f l o w Y   =   o v e r f l o w Y   = = =   " s c r o l l "   | | 
 	 	 	 	 (   o v e r f l o w Y   = = =   " a u t o "   & &   w i t h i n . h e i g h t   <   w i t h i n . e l e m e n t [ 0 ] . s c r o l l H e i g h t   ) ; 
 	 	 r e t u r n   { 
 	 	 	 w i d t h :   h a s O v e r f l o w Y   ?   $ . p o s i t i o n . s c r o l l b a r W i d t h ( )   :   0 , 
 	 	 	 h e i g h t :   h a s O v e r f l o w X   ?   $ . p o s i t i o n . s c r o l l b a r W i d t h ( )   :   0 
 	 	 } ; 
 	 } , 
 	 g e t W i t h i n I n f o :   f u n c t i o n (   e l e m e n t   )   { 
 	 	 v a r   w i t h i n E l e m e n t   =   $ (   e l e m e n t   | |   w i n d o w   ) , 
 	 	 	 i s W i n d o w   =   $ . i s W i n d o w (   w i t h i n E l e m e n t [ 0 ]   ) ; 
 	 	 r e t u r n   { 
 	 	 	 e l e m e n t :   w i t h i n E l e m e n t , 
 	 	 	 i s W i n d o w :   i s W i n d o w , 
 	 	 	 o f f s e t :   w i t h i n E l e m e n t . o f f s e t ( )   | |   {   l e f t :   0 ,   t o p :   0   } , 
 	 	 	 s c r o l l L e f t :   w i t h i n E l e m e n t . s c r o l l L e f t ( ) , 
 	 	 	 s c r o l l T o p :   w i t h i n E l e m e n t . s c r o l l T o p ( ) , 
 	 	 	 w i d t h :   i s W i n d o w   ?   w i t h i n E l e m e n t . w i d t h ( )   :   w i t h i n E l e m e n t . o u t e r W i d t h ( ) , 
 	 	 	 h e i g h t :   i s W i n d o w   ?   w i t h i n E l e m e n t . h e i g h t ( )   :   w i t h i n E l e m e n t . o u t e r H e i g h t ( ) 
 	 	 } ; 
 	 } 
 } ; 
 
 $ . f n . p o s i t i o n   =   f u n c t i o n (   o p t i o n s   )   { 
 	 i f   (   ! o p t i o n s   | |   ! o p t i o n s . o f   )   { 
 	 	 r e t u r n   _ p o s i t i o n . a p p l y (   t h i s ,   a r g u m e n t s   ) ; 
 	 } 
 
 	 / /   m a k e   a   c o p y ,   w e   d o n ' t   w a n t   t o   m o d i f y   a r g u m e n t s 
 	 o p t i o n s   =   $ . e x t e n d (   { } ,   o p t i o n s   ) ; 
 
 	 v a r   a t O f f s e t ,   t a r g e t W i d t h ,   t a r g e t H e i g h t ,   t a r g e t O f f s e t ,   b a s e P o s i t i o n ,   d i m e n s i o n s , 
 	 	 t a r g e t   =   $ (   o p t i o n s . o f   ) , 
 	 	 w i t h i n   =   $ . p o s i t i o n . g e t W i t h i n I n f o (   o p t i o n s . w i t h i n   ) , 
 	 	 s c r o l l I n f o   =   $ . p o s i t i o n . g e t S c r o l l I n f o (   w i t h i n   ) , 
 	 	 c o l l i s i o n   =   (   o p t i o n s . c o l l i s i o n   | |   " f l i p "   ) . s p l i t (   "   "   ) , 
 	 	 o f f s e t s   =   { } ; 
 
 	 d i m e n s i o n s   =   g e t D i m e n s i o n s (   t a r g e t   ) ; 
 	 i f   (   t a r g e t [ 0 ] . p r e v e n t D e f a u l t   )   { 
 	 	 / /   f o r c e   l e f t   t o p   t o   a l l o w   f l i p p i n g 
 	 	 o p t i o n s . a t   =   " l e f t   t o p " ; 
 	 } 
 	 t a r g e t W i d t h   =   d i m e n s i o n s . w i d t h ; 
 	 t a r g e t H e i g h t   =   d i m e n s i o n s . h e i g h t ; 
 	 t a r g e t O f f s e t   =   d i m e n s i o n s . o f f s e t ; 
 	 / /   c l o n e   t o   r e u s e   o r i g i n a l   t a r g e t O f f s e t   l a t e r 
 	 b a s e P o s i t i o n   =   $ . e x t e n d (   { } ,   t a r g e t O f f s e t   ) ; 
 
 	 / /   f o r c e   m y   a n d   a t   t o   h a v e   v a l i d   h o r i z o n t a l   a n d   v e r t i c a l   p o s i t i o n s 
 	 / /   i f   a   v a l u e   i s   m i s s i n g   o r   i n v a l i d ,   i t   w i l l   b e   c o n v e r t e d   t o   c e n t e r 
 	 $ . e a c h (   [   " m y " ,   " a t "   ] ,   f u n c t i o n ( )   { 
 	 	 v a r   p o s   =   (   o p t i o n s [   t h i s   ]   | |   " "   ) . s p l i t (   "   "   ) , 
 	 	 	 h o r i z o n t a l O f f s e t , 
 	 	 	 v e r t i c a l O f f s e t ; 
 
 	 	 i f   (   p o s . l e n g t h   = = =   1 )   { 
 	 	 	 p o s   =   r h o r i z o n t a l . t e s t (   p o s [   0   ]   )   ? 
 	 	 	 	 p o s . c o n c a t (   [   " c e n t e r "   ]   )   : 
 	 	 	 	 r v e r t i c a l . t e s t (   p o s [   0   ]   )   ? 
 	 	 	 	 	 [   " c e n t e r "   ] . c o n c a t (   p o s   )   : 
 	 	 	 	 	 [   " c e n t e r " ,   " c e n t e r "   ] ; 
 	 	 } 
 	 	 p o s [   0   ]   =   r h o r i z o n t a l . t e s t (   p o s [   0   ]   )   ?   p o s [   0   ]   :   " c e n t e r " ; 
 	 	 p o s [   1   ]   =   r v e r t i c a l . t e s t (   p o s [   1   ]   )   ?   p o s [   1   ]   :   " c e n t e r " ; 
 
 	 	 / /   c a l c u l a t e   o f f s e t s 
 	 	 h o r i z o n t a l O f f s e t   =   r o f f s e t . e x e c (   p o s [   0   ]   ) ; 
 	 	 v e r t i c a l O f f s e t   =   r o f f s e t . e x e c (   p o s [   1   ]   ) ; 
 	 	 o f f s e t s [   t h i s   ]   =   [ 
 	 	 	 h o r i z o n t a l O f f s e t   ?   h o r i z o n t a l O f f s e t [   0   ]   :   0 , 
 	 	 	 v e r t i c a l O f f s e t   ?   v e r t i c a l O f f s e t [   0   ]   :   0 
 	 	 ] ; 
 
 	 	 / /   r e d u c e   t o   j u s t   t h e   p o s i t i o n s   w i t h o u t   t h e   o f f s e t s 
 	 	 o p t i o n s [   t h i s   ]   =   [ 
 	 	 	 r p o s i t i o n . e x e c (   p o s [   0   ]   ) [   0   ] , 
 	 	 	 r p o s i t i o n . e x e c (   p o s [   1   ]   ) [   0   ] 
 	 	 ] ; 
 	 } ) ; 
 
 	 / /   n o r m a l i z e   c o l l i s i o n   o p t i o n 
 	 i f   (   c o l l i s i o n . l e n g t h   = = =   1   )   { 
 	 	 c o l l i s i o n [   1   ]   =   c o l l i s i o n [   0   ] ; 
 	 } 
 
 	 i f   (   o p t i o n s . a t [   0   ]   = = =   " r i g h t "   )   { 
 	 	 b a s e P o s i t i o n . l e f t   + =   t a r g e t W i d t h ; 
 	 }   e l s e   i f   (   o p t i o n s . a t [   0   ]   = = =   " c e n t e r "   )   { 
 	 	 b a s e P o s i t i o n . l e f t   + =   t a r g e t W i d t h   /   2 ; 
 	 } 
 
 	 i f   (   o p t i o n s . a t [   1   ]   = = =   " b o t t o m "   )   { 
 	 	 b a s e P o s i t i o n . t o p   + =   t a r g e t H e i g h t ; 
 	 }   e l s e   i f   (   o p t i o n s . a t [   1   ]   = = =   " c e n t e r "   )   { 
 	 	 b a s e P o s i t i o n . t o p   + =   t a r g e t H e i g h t   /   2 ; 
 	 } 
 
 	 a t O f f s e t   =   g e t O f f s e t s (   o f f s e t s . a t ,   t a r g e t W i d t h ,   t a r g e t H e i g h t   ) ; 
 	 b a s e P o s i t i o n . l e f t   + =   a t O f f s e t [   0   ] ; 
 	 b a s e P o s i t i o n . t o p   + =   a t O f f s e t [   1   ] ; 
 
 	 r e t u r n   t h i s . e a c h ( f u n c t i o n ( )   { 
 	 	 v a r   c o l l i s i o n P o s i t i o n ,   u s i n g , 
 	 	 	 e l e m   =   $ (   t h i s   ) , 
 	 	 	 e l e m W i d t h   =   e l e m . o u t e r W i d t h ( ) , 
 	 	 	 e l e m H e i g h t   =   e l e m . o u t e r H e i g h t ( ) , 
 	 	 	 m a r g i n L e f t   =   p a r s e C s s (   t h i s ,   " m a r g i n L e f t "   ) , 
 	 	 	 m a r g i n T o p   =   p a r s e C s s (   t h i s ,   " m a r g i n T o p "   ) , 
 	 	 	 c o l l i s i o n W i d t h   =   e l e m W i d t h   +   m a r g i n L e f t   +   p a r s e C s s (   t h i s ,   " m a r g i n R i g h t "   )   +   s c r o l l I n f o . w i d t h , 
 	 	 	 c o l l i s i o n H e i g h t   =   e l e m H e i g h t   +   m a r g i n T o p   +   p a r s e C s s (   t h i s ,   " m a r g i n B o t t o m "   )   +   s c r o l l I n f o . h e i g h t , 
 	 	 	 p o s i t i o n   =   $ . e x t e n d (   { } ,   b a s e P o s i t i o n   ) , 
 	 	 	 m y O f f s e t   =   g e t O f f s e t s (   o f f s e t s . m y ,   e l e m . o u t e r W i d t h ( ) ,   e l e m . o u t e r H e i g h t ( )   ) ; 
 
 	 	 i f   (   o p t i o n s . m y [   0   ]   = = =   " r i g h t "   )   { 
 	 	 	 p o s i t i o n . l e f t   - =   e l e m W i d t h ; 
 	 	 }   e l s e   i f   (   o p t i o n s . m y [   0   ]   = = =   " c e n t e r "   )   { 
 	 	 	 p o s i t i o n . l e f t   - =   e l e m W i d t h   /   2 ; 
 	 	 } 
 
 	 	 i f   (   o p t i o n s . m y [   1   ]   = = =   " b o t t o m "   )   { 
 	 	 	 p o s i t i o n . t o p   - =   e l e m H e i g h t ; 
 	 	 }   e l s e   i f   (   o p t i o n s . m y [   1   ]   = = =   " c e n t e r "   )   { 
 	 	 	 p o s i t i o n . t o p   - =   e l e m H e i g h t   /   2 ; 
 	 	 } 
 
 	 	 p o s i t i o n . l e f t   + =   m y O f f s e t [   0   ] ; 
 	 	 p o s i t i o n . t o p   + =   m y O f f s e t [   1   ] ; 
 
 	 	 / /   i f   t h e   b r o w s e r   d o e s n ' t   s u p p o r t   f r a c t i o n s ,   t h e n   r o u n d   f o r   c o n s i s t e n t   r e s u l t s 
 	 	 i f   (   ! $ . s u p p o r t . o f f s e t F r a c t i o n s   )   { 
 	 	 	 p o s i t i o n . l e f t   =   r o u n d (   p o s i t i o n . l e f t   ) ; 
 	 	 	 p o s i t i o n . t o p   =   r o u n d (   p o s i t i o n . t o p   ) ; 
 	 	 } 
 
 	 	 c o l l i s i o n P o s i t i o n   =   { 
 	 	 	 m a r g i n L e f t :   m a r g i n L e f t , 
 	 	 	 m a r g i n T o p :   m a r g i n T o p 
 	 	 } ; 
 
 	 	 $ . e a c h (   [   " l e f t " ,   " t o p "   ] ,   f u n c t i o n (   i ,   d i r   )   { 
 	 	 	 i f   (   $ . u i . p o s i t i o n [   c o l l i s i o n [   i   ]   ]   )   { 
 	 	 	 	 $ . u i . p o s i t i o n [   c o l l i s i o n [   i   ]   ] [   d i r   ] (   p o s i t i o n ,   { 
 	 	 	 	 	 t a r g e t W i d t h :   t a r g e t W i d t h , 
 	 	 	 	 	 t a r g e t H e i g h t :   t a r g e t H e i g h t , 
 	 	 	 	 	 e l e m W i d t h :   e l e m W i d t h , 
 	 	 	 	 	 e l e m H e i g h t :   e l e m H e i g h t , 
 	 	 	 	 	 c o l l i s i o n P o s i t i o n :   c o l l i s i o n P o s i t i o n , 
 	 	 	 	 	 c o l l i s i o n W i d t h :   c o l l i s i o n W i d t h , 
 	 	 	 	 	 c o l l i s i o n H e i g h t :   c o l l i s i o n H e i g h t , 
 	 	 	 	 	 o f f s e t :   [   a t O f f s e t [   0   ]   +   m y O f f s e t [   0   ] ,   a t O f f s e t   [   1   ]   +   m y O f f s e t [   1   ]   ] , 
 	 	 	 	 	 m y :   o p t i o n s . m y , 
 	 	 	 	 	 a t :   o p t i o n s . a t , 
 	 	 	 	 	 w i t h i n :   w i t h i n , 
 	 	 	 	 	 e l e m   :   e l e m 
 	 	 	 	 } ) ; 
 	 	 	 } 
 	 	 } ) ; 
 
 	 	 i f   (   o p t i o n s . u s i n g   )   { 
 	 	 	 / /   a d d s   f e e d b a c k   a s   s e c o n d   a r g u m e n t   t o   u s i n g   c a l l b a c k ,   i f   p r e s e n t 
 	 	 	 u s i n g   =   f u n c t i o n (   p r o p s   )   { 
 	 	 	 	 v a r   l e f t   =   t a r g e t O f f s e t . l e f t   -   p o s i t i o n . l e f t , 
 	 	 	 	 	 r i g h t   =   l e f t   +   t a r g e t W i d t h   -   e l e m W i d t h , 
 	 	 	 	 	 t o p   =   t a r g e t O f f s e t . t o p   -   p o s i t i o n . t o p , 
 	 	 	 	 	 b o t t o m   =   t o p   +   t a r g e t H e i g h t   -   e l e m H e i g h t , 
 	 	 	 	 	 f e e d b a c k   =   { 
 	 	 	 	 	 	 t a r g e t :   { 
 	 	 	 	 	 	 	 e l e m e n t :   t a r g e t , 
 	 	 	 	 	 	 	 l e f t :   t a r g e t O f f s e t . l e f t , 
 	 	 	 	 	 	 	 t o p :   t a r g e t O f f s e t . t o p , 
 	 	 	 	 	 	 	 w i d t h :   t a r g e t W i d t h , 
 	 	 	 	 	 	 	 h e i g h t :   t a r g e t H e i g h t 
 	 	 	 	 	 	 } , 
 	 	 	 	 	 	 e l e m e n t :   { 
 	 	 	 	 	 	 	 e l e m e n t :   e l e m , 
 	 	 	 	 	 	 	 l e f t :   p o s i t i o n . l e f t , 
 	 	 	 	 	 	 	 t o p :   p o s i t i o n . t o p , 
 	 	 	 	 	 	 	 w i d t h :   e l e m W i d t h , 
 	 	 	 	 	 	 	 h e i g h t :   e l e m H e i g h t 
 	 	 	 	 	 	 } , 
 	 	 	 	 	 	 h o r i z o n t a l :   r i g h t   <   0   ?   " l e f t "   :   l e f t   >   0   ?   " r i g h t "   :   " c e n t e r " , 
 	 	 	 	 	 	 v e r t i c a l :   b o t t o m   <   0   ?   " t o p "   :   t o p   >   0   ?   " b o t t o m "   :   " m i d d l e " 
 	 	 	 	 	 } ; 
 	 	 	 	 i f   (   t a r g e t W i d t h   <   e l e m W i d t h   & &   a b s (   l e f t   +   r i g h t   )   <   t a r g e t W i d t h   )   { 
 	 	 	 	 	 f e e d b a c k . h o r i z o n t a l   =   " c e n t e r " ; 
 	 	 	 	 } 
 	 	 	 	 i f   (   t a r g e t H e i g h t   <   e l e m H e i g h t   & &   a b s (   t o p   +   b o t t o m   )   <   t a r g e t H e i g h t   )   { 
 	 	 	 	 	 f e e d b a c k . v e r t i c a l   =   " m i d d l e " ; 
 	 	 	 	 } 
 	 	 	 	 i f   (   m a x (   a b s (   l e f t   ) ,   a b s (   r i g h t   )   )   >   m a x (   a b s (   t o p   ) ,   a b s (   b o t t o m   )   )   )   { 
 	 	 	 	 	 f e e d b a c k . i m p o r t a n t   =   " h o r i z o n t a l " ; 
 	 	 	 	 }   e l s e   { 
 	 	 	 	 	 f e e d b a c k . i m p o r t a n t   =   " v e r t i c a l " ; 
 	 	 	 	 } 
 	 	 	 	 o p t i o n s . u s i n g . c a l l (   t h i s ,   p r o p s ,   f e e d b a c k   ) ; 
 	 	 	 } ; 
 	 	 } 
 
 	 	 e l e m . o f f s e t (   $ . e x t e n d (   p o s i t i o n ,   {   u s i n g :   u s i n g   }   )   ) ; 
 	 } ) ; 
 } ; 
 
 $ . u i . p o s i t i o n   =   { 
 	 f i t :   { 
 	 	 l e f t :   f u n c t i o n (   p o s i t i o n ,   d a t a   )   { 
 	 	 	 v a r   w i t h i n   =   d a t a . w i t h i n , 
 	 	 	 	 w i t h i n O f f s e t   =   w i t h i n . i s W i n d o w   ?   w i t h i n . s c r o l l L e f t   :   w i t h i n . o f f s e t . l e f t , 
 	 	 	 	 o u t e r W i d t h   =   w i t h i n . w i d t h , 
 	 	 	 	 c o l l i s i o n P o s L e f t   =   p o s i t i o n . l e f t   -   d a t a . c o l l i s i o n P o s i t i o n . m a r g i n L e f t , 
 	 	 	 	 o v e r L e f t   =   w i t h i n O f f s e t   -   c o l l i s i o n P o s L e f t , 
 	 	 	 	 o v e r R i g h t   =   c o l l i s i o n P o s L e f t   +   d a t a . c o l l i s i o n W i d t h   -   o u t e r W i d t h   -   w i t h i n O f f s e t , 
 	 	 	 	 n e w O v e r R i g h t ; 
 
 	 	 	 / /   e l e m e n t   i s   w i d e r   t h a n   w i t h i n 
 	 	 	 i f   (   d a t a . c o l l i s i o n W i d t h   >   o u t e r W i d t h   )   { 
 	 	 	 	 / /   e l e m e n t   i s   i n i t i a l l y   o v e r   t h e   l e f t   s i d e   o f   w i t h i n 
 	 	 	 	 i f   (   o v e r L e f t   >   0   & &   o v e r R i g h t   < =   0   )   { 
 	 	 	 	 	 n e w O v e r R i g h t   =   p o s i t i o n . l e f t   +   o v e r L e f t   +   d a t a . c o l l i s i o n W i d t h   -   o u t e r W i d t h   -   w i t h i n O f f s e t ; 
 	 	 	 	 	 p o s i t i o n . l e f t   + =   o v e r L e f t   -   n e w O v e r R i g h t ; 
 	 	 	 	 / /   e l e m e n t   i s   i n i t i a l l y   o v e r   r i g h t   s i d e   o f   w i t h i n 
 	 	 	 	 }   e l s e   i f   (   o v e r R i g h t   >   0   & &   o v e r L e f t   < =   0   )   { 
 	 	 	 	 	 p o s i t i o n . l e f t   =   w i t h i n O f f s e t ; 
 	 	 	 	 / /   e l e m e n t   i s   i n i t i a l l y   o v e r   b o t h   l e f t   a n d   r i g h t   s i d e s   o f   w i t h i n 
 	 	 	 	 }   e l s e   { 
 	 	 	 	 	 i f   (   o v e r L e f t   >   o v e r R i g h t   )   { 
 	 	 	 	 	 	 p o s i t i o n . l e f t   =   w i t h i n O f f s e t   +   o u t e r W i d t h   -   d a t a . c o l l i s i o n W i d t h ; 
 	 	 	 	 	 }   e l s e   { 
 	 	 	 	 	 	 p o s i t i o n . l e f t   =   w i t h i n O f f s e t ; 
 	 	 	 	 	 } 
 	 	 	 	 } 
 	 	 	 / /   t o o   f a r   l e f t   - >   a l i g n   w i t h   l e f t   e d g e 
 	 	 	 }   e l s e   i f   (   o v e r L e f t   >   0   )   { 
 	 	 	 	 p o s i t i o n . l e f t   + =   o v e r L e f t ; 
 	 	 	 / /   t o o   f a r   r i g h t   - >   a l i g n   w i t h   r i g h t   e d g e 
 	 	 	 }   e l s e   i f   (   o v e r R i g h t   >   0   )   { 
 	 	 	 	 p o s i t i o n . l e f t   - =   o v e r R i g h t ; 
 	 	 	 / /   a d j u s t   b a s e d   o n   p o s i t i o n   a n d   m a r g i n 
 	 	 	 }   e l s e   { 
 	 	 	 	 p o s i t i o n . l e f t   =   m a x (   p o s i t i o n . l e f t   -   c o l l i s i o n P o s L e f t ,   p o s i t i o n . l e f t   ) ; 
 	 	 	 } 
 	 	 } , 
 	 	 t o p :   f u n c t i o n (   p o s i t i o n ,   d a t a   )   { 
 	 	 	 v a r   w i t h i n   =   d a t a . w i t h i n , 
 	 	 	 	 w i t h i n O f f s e t   =   w i t h i n . i s W i n d o w   ?   w i t h i n . s c r o l l T o p   :   w i t h i n . o f f s e t . t o p , 
 	 	 	 	 o u t e r H e i g h t   =   d a t a . w i t h i n . h e i g h t , 
 	 	 	 	 c o l l i s i o n P o s T o p   =   p o s i t i o n . t o p   -   d a t a . c o l l i s i o n P o s i t i o n . m a r g i n T o p , 
 	 	 	 	 o v e r T o p   =   w i t h i n O f f s e t   -   c o l l i s i o n P o s T o p , 
 	 	 	 	 o v e r B o t t o m   =   c o l l i s i o n P o s T o p   +   d a t a . c o l l i s i o n H e i g h t   -   o u t e r H e i g h t   -   w i t h i n O f f s e t , 
 	 	 	 	 n e w O v e r B o t t o m ; 
 
 	 	 	 / /   e l e m e n t   i s   t a l l e r   t h a n   w i t h i n 
 	 	 	 i f   (   d a t a . c o l l i s i o n H e i g h t   >   o u t e r H e i g h t   )   { 
 	 	 	 	 / /   e l e m e n t   i s   i n i t i a l l y   o v e r   t h e   t o p   o f   w i t h i n 
 	 	 	 	 i f   (   o v e r T o p   >   0   & &   o v e r B o t t o m   < =   0   )   { 
 	 	 	 	 	 n e w O v e r B o t t o m   =   p o s i t i o n . t o p   +   o v e r T o p   +   d a t a . c o l l i s i o n H e i g h t   -   o u t e r H e i g h t   -   w i t h i n O f f s e t ; 
 	 	 	 	 	 p o s i t i o n . t o p   + =   o v e r T o p   -   n e w O v e r B o t t o m ; 
 	 	 	 	 / /   e l e m e n t   i s   i n i t i a l l y   o v e r   b o t t o m   o f   w i t h i n 
 	 	 	 	 }   e l s e   i f   (   o v e r B o t t o m   >   0   & &   o v e r T o p   < =   0   )   { 
 	 	 	 	 	 p o s i t i o n . t o p   =   w i t h i n O f f s e t ; 
 	 	 	 	 / /   e l e m e n t   i s   i n i t i a l l y   o v e r   b o t h   t o p   a n d   b o t t o m   o f   w i t h i n 
 	 	 	 	 }   e l s e   { 
 	 	 	 	 	 i f   (   o v e r T o p   >   o v e r B o t t o m   )   { 
 	 	 	 	 	 	 p o s i t i o n . t o p   =   w i t h i n O f f s e t   +   o u t e r H e i g h t   -   d a t a . c o l l i s i o n H e i g h t ; 
 	 	 	 	 	 }   e l s e   { 
 	 	 	 	 	 	 p o s i t i o n . t o p   =   w i t h i n O f f s e t ; 
 	 	 	 	 	 } 
 	 	 	 	 } 
 	 	 	 / /   t o o   f a r   u p   - >   a l i g n   w i t h   t o p 
 	 	 	 }   e l s e   i f   (   o v e r T o p   >   0   )   { 
 	 	 	 	 p o s i t i o n . t o p   + =   o v e r T o p ; 
 	 	 	 / /   t o o   f a r   d o w n   - >   a l i g n   w i t h   b o t t o m   e d g e 
 	 	 	 }   e l s e   i f   (   o v e r B o t t o m   >   0   )   { 
 	 	 	 	 p o s i t i o n . t o p   - =   o v e r B o t t o m ; 
 	 	 	 / /   a d j u s t   b a s e d   o n   p o s i t i o n   a n d   m a r g i n 
 	 	 	 }   e l s e   { 
 	 	 	 	 p o s i t i o n . t o p   =   m a x (   p o s i t i o n . t o p   -   c o l l i s i o n P o s T o p ,   p o s i t i o n . t o p   ) ; 
 	 	 	 } 
 	 	 } 
 	 } , 
 	 f l i p :   { 
 	 	 l e f t :   f u n c t i o n (   p o s i t i o n ,   d a t a   )   { 
 	 	 	 v a r   w i t h i n   =   d a t a . w i t h i n , 
 	 	 	 	 w i t h i n O f f s e t   =   w i t h i n . o f f s e t . l e f t   +   w i t h i n . s c r o l l L e f t , 
 	 	 	 	 o u t e r W i d t h   =   w i t h i n . w i d t h , 
 	 	 	 	 o f f s e t L e f t   =   w i t h i n . i s W i n d o w   ?   w i t h i n . s c r o l l L e f t   :   w i t h i n . o f f s e t . l e f t , 
 	 	 	 	 c o l l i s i o n P o s L e f t   =   p o s i t i o n . l e f t   -   d a t a . c o l l i s i o n P o s i t i o n . m a r g i n L e f t , 
 	 	 	 	 o v e r L e f t   =   c o l l i s i o n P o s L e f t   -   o f f s e t L e f t , 
 	 	 	 	 o v e r R i g h t   =   c o l l i s i o n P o s L e f t   +   d a t a . c o l l i s i o n W i d t h   -   o u t e r W i d t h   -   o f f s e t L e f t , 
 	 	 	 	 m y O f f s e t   =   d a t a . m y [   0   ]   = = =   " l e f t "   ? 
 	 	 	 	 	 - d a t a . e l e m W i d t h   : 
 	 	 	 	 	 d a t a . m y [   0   ]   = = =   " r i g h t "   ? 
 	 	 	 	 	 	 d a t a . e l e m W i d t h   : 
 	 	 	 	 	 	 0 , 
 	 	 	 	 a t O f f s e t   =   d a t a . a t [   0   ]   = = =   " l e f t "   ? 
 	 	 	 	 	 d a t a . t a r g e t W i d t h   : 
 	 	 	 	 	 d a t a . a t [   0   ]   = = =   " r i g h t "   ? 
 	 	 	 	 	 	 - d a t a . t a r g e t W i d t h   : 
 	 	 	 	 	 	 0 , 
 	 	 	 	 o f f s e t   =   - 2   *   d a t a . o f f s e t [   0   ] , 
 	 	 	 	 n e w O v e r R i g h t , 
 	 	 	 	 n e w O v e r L e f t ; 
 
 	 	 	 i f   (   o v e r L e f t   <   0   )   { 
 	 	 	 	 n e w O v e r R i g h t   =   p o s i t i o n . l e f t   +   m y O f f s e t   +   a t O f f s e t   +   o f f s e t   +   d a t a . c o l l i s i o n W i d t h   -   o u t e r W i d t h   -   w i t h i n O f f s e t ; 
 	 	 	 	 i f   (   n e w O v e r R i g h t   <   0   | |   n e w O v e r R i g h t   <   a b s (   o v e r L e f t   )   )   { 
 	 	 	 	 	 p o s i t i o n . l e f t   + =   m y O f f s e t   +   a t O f f s e t   +   o f f s e t ; 
 	 	 	 	 } 
 	 	 	 } 
 	 	 	 e l s e   i f   (   o v e r R i g h t   >   0   )   { 
 	 	 	 	 n e w O v e r L e f t   =   p o s i t i o n . l e f t   -   d a t a . c o l l i s i o n P o s i t i o n . m a r g i n L e f t   +   m y O f f s e t   +   a t O f f s e t   +   o f f s e t   -   o f f s e t L e f t ; 
 	 	 	 	 i f   (   n e w O v e r L e f t   >   0   | |   a b s (   n e w O v e r L e f t   )   <   o v e r R i g h t   )   { 
 	 	 	 	 	 p o s i t i o n . l e f t   + =   m y O f f s e t   +   a t O f f s e t   +   o f f s e t ; 
 	 	 	 	 } 
 	 	 	 } 
 	 	 } , 
 	 	 t o p :   f u n c t i o n (   p o s i t i o n ,   d a t a   )   { 
 	 	 	 v a r   w i t h i n   =   d a t a . w i t h i n , 
 	 	 	 	 w i t h i n O f f s e t   =   w i t h i n . o f f s e t . t o p   +   w i t h i n . s c r o l l T o p , 
 	 	 	 	 o u t e r H e i g h t   =   w i t h i n . h e i g h t , 
 	 	 	 	 o f f s e t T o p   =   w i t h i n . i s W i n d o w   ?   w i t h i n . s c r o l l T o p   :   w i t h i n . o f f s e t . t o p , 
 	 	 	 	 c o l l i s i o n P o s T o p   =   p o s i t i o n . t o p   -   d a t a . c o l l i s i o n P o s i t i o n . m a r g i n T o p , 
 	 	 	 	 o v e r T o p   =   c o l l i s i o n P o s T o p   -   o f f s e t T o p , 
 	 	 	 	 o v e r B o t t o m   =   c o l l i s i o n P o s T o p   +   d a t a . c o l l i s i o n H e i g h t   -   o u t e r H e i g h t   -   o f f s e t T o p , 
 	 	 	 	 t o p   =   d a t a . m y [   1   ]   = = =   " t o p " , 
 	 	 	 	 m y O f f s e t   =   t o p   ? 
 	 	 	 	 	 - d a t a . e l e m H e i g h t   : 
 	 	 	 	 	 d a t a . m y [   1   ]   = = =   " b o t t o m "   ? 
 	 	 	 	 	 	 d a t a . e l e m H e i g h t   : 
 	 	 	 	 	 	 0 , 
 	 	 	 	 a t O f f s e t   =   d a t a . a t [   1   ]   = = =   " t o p "   ? 
 	 	 	 	 	 d a t a . t a r g e t H e i g h t   : 
 	 	 	 	 	 d a t a . a t [   1   ]   = = =   " b o t t o m "   ? 
 	 	 	 	 	 	 - d a t a . t a r g e t H e i g h t   : 
 	 	 	 	 	 	 0 , 
 	 	 	 	 o f f s e t   =   - 2   *   d a t a . o f f s e t [   1   ] , 
 	 	 	 	 n e w O v e r T o p , 
 	 	 	 	 n e w O v e r B o t t o m ; 
 	 	 	 i f   (   o v e r T o p   <   0   )   { 
 	 	 	 	 n e w O v e r B o t t o m   =   p o s i t i o n . t o p   +   m y O f f s e t   +   a t O f f s e t   +   o f f s e t   +   d a t a . c o l l i s i o n H e i g h t   -   o u t e r H e i g h t   -   w i t h i n O f f s e t ; 
 	 	 	 	 i f   (   (   p o s i t i o n . t o p   +   m y O f f s e t   +   a t O f f s e t   +   o f f s e t )   >   o v e r T o p   & &   (   n e w O v e r B o t t o m   <   0   | |   n e w O v e r B o t t o m   <   a b s (   o v e r T o p   )   )   )   { 
 	 	 	 	 	 p o s i t i o n . t o p   + =   m y O f f s e t   +   a t O f f s e t   +   o f f s e t ; 
 	 	 	 	 } 
 	 	 	 } 
 	 	 	 e l s e   i f   (   o v e r B o t t o m   >   0   )   { 
 	 	 	 	 n e w O v e r T o p   =   p o s i t i o n . t o p   -     d a t a . c o l l i s i o n P o s i t i o n . m a r g i n T o p   +   m y O f f s e t   +   a t O f f s e t   +   o f f s e t   -   o f f s e t T o p ; 
 	 	 	 	 i f   (   (   p o s i t i o n . t o p   +   m y O f f s e t   +   a t O f f s e t   +   o f f s e t )   >   o v e r B o t t o m   & &   (   n e w O v e r T o p   >   0   | |   a b s (   n e w O v e r T o p   )   <   o v e r B o t t o m   )   )   { 
 	 	 	 	 	 p o s i t i o n . t o p   + =   m y O f f s e t   +   a t O f f s e t   +   o f f s e t ; 
 	 	 	 	 } 
 	 	 	 } 
 	 	 } 
 	 } , 
 	 f l i p f i t :   { 
 	 	 l e f t :   f u n c t i o n ( )   { 
 	 	 	 $ . u i . p o s i t i o n . f l i p . l e f t . a p p l y (   t h i s ,   a r g u m e n t s   ) ; 
 	 	 	 $ . u i . p o s i t i o n . f i t . l e f t . a p p l y (   t h i s ,   a r g u m e n t s   ) ; 
 	 	 } , 
 	 	 t o p :   f u n c t i o n ( )   { 
 	 	 	 $ . u i . p o s i t i o n . f l i p . t o p . a p p l y (   t h i s ,   a r g u m e n t s   ) ; 
 	 	 	 $ . u i . p o s i t i o n . f i t . t o p . a p p l y (   t h i s ,   a r g u m e n t s   ) ; 
 	 	 } 
 	 } 
 } ; 
 
 / /   f r a c t i o n   s u p p o r t   t e s t 
 ( f u n c t i o n   ( )   { 
 	 v a r   t e s t E l e m e n t ,   t e s t E l e m e n t P a r e n t ,   t e s t E l e m e n t S t y l e ,   o f f s e t L e f t ,   i , 
 	 	 b o d y   =   d o c u m e n t . g e t E l e m e n t s B y T a g N a m e (   " b o d y "   ) [   0   ] , 
 	 	 d i v   =   d o c u m e n t . c r e a t e E l e m e n t (   " d i v "   ) ; 
 
 	 / / C r e a t e   a   " f a k e   b o d y "   f o r   t e s t i n g   b a s e d   o n   m e t h o d   u s e d   i n   j Q u e r y . s u p p o r t 
 	 t e s t E l e m e n t   =   d o c u m e n t . c r e a t e E l e m e n t (   b o d y   ?   " d i v "   :   " b o d y "   ) ; 
 	 t e s t E l e m e n t S t y l e   =   { 
 	 	 v i s i b i l i t y :   " h i d d e n " , 
 	 	 w i d t h :   0 , 
 	 	 h e i g h t :   0 , 
 	 	 b o r d e r :   0 , 
 	 	 m a r g i n :   0 , 
 	 	 b a c k g r o u n d :   " n o n e " 
 	 } ; 
 	 i f   (   b o d y   )   { 
 	 	 $ . e x t e n d (   t e s t E l e m e n t S t y l e ,   { 
 	 	 	 p o s i t i o n :   " a b s o l u t e " , 
 	 	 	 l e f t :   " - 1 0 0 0 p x " , 
 	 	 	 t o p :   " - 1 0 0 0 p x " 
 	 	 } ) ; 
 	 } 
 	 f o r   (   i   i n   t e s t E l e m e n t S t y l e   )   { 
 	 	 t e s t E l e m e n t . s t y l e [   i   ]   =   t e s t E l e m e n t S t y l e [   i   ] ; 
 	 } 
 	 t e s t E l e m e n t . a p p e n d C h i l d (   d i v   ) ; 
 	 t e s t E l e m e n t P a r e n t   =   b o d y   | |   d o c u m e n t . d o c u m e n t E l e m e n t ; 
 	 t e s t E l e m e n t P a r e n t . i n s e r t B e f o r e (   t e s t E l e m e n t ,   t e s t E l e m e n t P a r e n t . f i r s t C h i l d   ) ; 
 
 	 d i v . s t y l e . c s s T e x t   =   " p o s i t i o n :   a b s o l u t e ;   l e f t :   1 0 . 7 4 3 2 2 2 2 p x ; " ; 
 
 	 o f f s e t L e f t   =   $ (   d i v   ) . o f f s e t ( ) . l e f t ; 
 	 $ . s u p p o r t . o f f s e t F r a c t i o n s   =   o f f s e t L e f t   >   1 0   & &   o f f s e t L e f t   <   1 1 ; 
 
 	 t e s t E l e m e n t . i n n e r H T M L   =   " " ; 
 	 t e s t E l e m e n t P a r e n t . r e m o v e C h i l d (   t e s t E l e m e n t   ) ; 
 } ) ( ) ; 
 
 } (   j Q u e r y   )   ) ; 
 
 ( f u n c t i o n (   $ ,   u n d e f i n e d   )   { 
 
 $ . w i d g e t (   " u i . p r o g r e s s b a r " ,   { 
 	 v e r s i o n :   " 1 . 1 0 . 3 " , 
 	 o p t i o n s :   { 
 	 	 m a x :   1 0 0 , 
 	 	 v a l u e :   0 , 
 
 	 	 c h a n g e :   n u l l , 
 	 	 c o m p l e t e :   n u l l 
 	 } , 
 
 	 m i n :   0 , 
 
 	 _ c r e a t e :   f u n c t i o n ( )   { 
 	 	 / /   C o n s t r a i n   i n i t i a l   v a l u e 
 	 	 t h i s . o l d V a l u e   =   t h i s . o p t i o n s . v a l u e   =   t h i s . _ c o n s t r a i n e d V a l u e ( ) ; 
 
 	 	 t h i s . e l e m e n t 
 	 	 	 . a d d C l a s s (   " u i - p r o g r e s s b a r   u i - w i d g e t   u i - w i d g e t - c o n t e n t   u i - c o r n e r - a l l "   ) 
 	 	 	 . a t t r ( { 
 	 	 	 	 / /   O n l y   s e t   s t a t i c   v a l u e s ,   a r i a - v a l u e n o w   a n d   a r i a - v a l u e m a x   a r e 
 	 	 	 	 / /   s e t   i n s i d e   _ r e f r e s h V a l u e ( ) 
 	 	 	 	 r o l e :   " p r o g r e s s b a r " , 
 	 	 	 	 " a r i a - v a l u e m i n " :   t h i s . m i n 
 	 	 	 } ) ; 
 
 	 	 t h i s . v a l u e D i v   =   $ (   " < d i v   c l a s s = ' u i - p r o g r e s s b a r - v a l u e   u i - w i d g e t - h e a d e r   u i - c o r n e r - l e f t ' > < / d i v > "   ) 
 	 	 	 . a p p e n d T o (   t h i s . e l e m e n t   ) ; 
 
 	 	 t h i s . _ r e f r e s h V a l u e ( ) ; 
 	 } , 
 
 	 _ d e s t r o y :   f u n c t i o n ( )   { 
 	 	 t h i s . e l e m e n t 
 	 	 	 . r e m o v e C l a s s (   " u i - p r o g r e s s b a r   u i - w i d g e t   u i - w i d g e t - c o n t e n t   u i - c o r n e r - a l l "   ) 
 	 	 	 . r e m o v e A t t r (   " r o l e "   ) 
 	 	 	 . r e m o v e A t t r (   " a r i a - v a l u e m i n "   ) 
 	 	 	 . r e m o v e A t t r (   " a r i a - v a l u e m a x "   ) 
 	 	 	 . r e m o v e A t t r (   " a r i a - v a l u e n o w "   ) ; 
 
 	 	 t h i s . v a l u e D i v . r e m o v e ( ) ; 
 	 } , 
 
 	 v a l u e :   f u n c t i o n (   n e w V a l u e   )   { 
 	 	 i f   (   n e w V a l u e   = = =   u n d e f i n e d   )   { 
 	 	 	 r e t u r n   t h i s . o p t i o n s . v a l u e ; 
 	 	 } 
 
 	 	 t h i s . o p t i o n s . v a l u e   =   t h i s . _ c o n s t r a i n e d V a l u e (   n e w V a l u e   ) ; 
 	 	 t h i s . _ r e f r e s h V a l u e ( ) ; 
 	 } , 
 
 	 _ c o n s t r a i n e d V a l u e :   f u n c t i o n (   n e w V a l u e   )   { 
 	 	 i f   (   n e w V a l u e   = = =   u n d e f i n e d   )   { 
 	 	 	 n e w V a l u e   =   t h i s . o p t i o n s . v a l u e ; 
 	 	 } 
 
 	 	 t h i s . i n d e t e r m i n a t e   =   n e w V a l u e   = = =   f a l s e ; 
 
 	 	 / /   s a n i t i z e   v a l u e 
 	 	 i f   (   t y p e o f   n e w V a l u e   ! = =   " n u m b e r "   )   { 
 	 	 	 n e w V a l u e   =   0 ; 
 	 	 } 
 
 	 	 r e t u r n   t h i s . i n d e t e r m i n a t e   ?   f a l s e   : 
 	 	 	 M a t h . m i n (   t h i s . o p t i o n s . m a x ,   M a t h . m a x (   t h i s . m i n ,   n e w V a l u e   )   ) ; 
 	 } , 
 
 	 _ s e t O p t i o n s :   f u n c t i o n (   o p t i o n s   )   { 
 	 	 / /   E n s u r e   " v a l u e "   o p t i o n   i s   s e t   a f t e r   o t h e r   v a l u e s   ( l i k e   m a x ) 
 	 	 v a r   v a l u e   =   o p t i o n s . v a l u e ; 
 	 	 d e l e t e   o p t i o n s . v a l u e ; 
 
 	 	 t h i s . _ s u p e r (   o p t i o n s   ) ; 
 
 	 	 t h i s . o p t i o n s . v a l u e   =   t h i s . _ c o n s t r a i n e d V a l u e (   v a l u e   ) ; 
 	 	 t h i s . _ r e f r e s h V a l u e ( ) ; 
 	 } , 
 
 	 _ s e t O p t i o n :   f u n c t i o n (   k e y ,   v a l u e   )   { 
 	 	 i f   (   k e y   = = =   " m a x "   )   { 
 	 	 	 / /   D o n ' t   a l l o w   a   m a x   l e s s   t h a n   m i n 
 	 	 	 v a l u e   =   M a t h . m a x (   t h i s . m i n ,   v a l u e   ) ; 
 	 	 } 
 
 	 	 t h i s . _ s u p e r (   k e y ,   v a l u e   ) ; 
 	 } , 
 
 	 _ p e r c e n t a g e :   f u n c t i o n ( )   { 
 	 	 r e t u r n   t h i s . i n d e t e r m i n a t e   ?   1 0 0   :   1 0 0   *   (   t h i s . o p t i o n s . v a l u e   -   t h i s . m i n   )   /   (   t h i s . o p t i o n s . m a x   -   t h i s . m i n   ) ; 
 	 } , 
 
 	 _ r e f r e s h V a l u e :   f u n c t i o n ( )   { 
 	 	 v a r   v a l u e   =   t h i s . o p t i o n s . v a l u e , 
 	 	 	 p e r c e n t a g e   =   t h i s . _ p e r c e n t a g e ( ) ; 
 
 	 	 t h i s . v a l u e D i v 
 	 	 	 . t o g g l e (   t h i s . i n d e t e r m i n a t e   | |   v a l u e   >   t h i s . m i n   ) 
 	 	 	 . t o g g l e C l a s s (   " u i - c o r n e r - r i g h t " ,   v a l u e   = = =   t h i s . o p t i o n s . m a x   ) 
 	 	 	 . w i d t h (   p e r c e n t a g e . t o F i x e d ( 0 )   +   " % "   ) ; 
 
 	 	 t h i s . e l e m e n t . t o g g l e C l a s s (   " u i - p r o g r e s s b a r - i n d e t e r m i n a t e " ,   t h i s . i n d e t e r m i n a t e   ) ; 
 
 	 	 i f   (   t h i s . i n d e t e r m i n a t e   )   { 
 	 	 	 t h i s . e l e m e n t . r e m o v e A t t r (   " a r i a - v a l u e n o w "   ) ; 
 	 	 	 i f   (   ! t h i s . o v e r l a y D i v   )   { 
 	 	 	 	 t h i s . o v e r l a y D i v   =   $ (   " < d i v   c l a s s = ' u i - p r o g r e s s b a r - o v e r l a y ' > < / d i v > "   ) . a p p e n d T o (   t h i s . v a l u e D i v   ) ; 
 	 	 	 } 
 	 	 }   e l s e   { 
 	 	 	 t h i s . e l e m e n t . a t t r ( { 
 	 	 	 	 " a r i a - v a l u e m a x " :   t h i s . o p t i o n s . m a x , 
 	 	 	 	 " a r i a - v a l u e n o w " :   v a l u e 
 	 	 	 } ) ; 
 	 	 	 i f   (   t h i s . o v e r l a y D i v   )   { 
 	 	 	 	 t h i s . o v e r l a y D i v . r e m o v e ( ) ; 
 	 	 	 	 t h i s . o v e r l a y D i v   =   n u l l ; 
 	 	 	 } 
 	 	 } 
 
 	 	 i f   (   t h i s . o l d V a l u e   ! = =   v a l u e   )   { 
 	 	 	 t h i s . o l d V a l u e   =   v a l u e ; 
 	 	 	 t h i s . _ t r i g g e r (   " c h a n g e "   ) ; 
 	 	 } 
 	 	 i f   (   v a l u e   = = =   t h i s . o p t i o n s . m a x   )   { 
 	 	 	 t h i s . _ t r i g g e r (   " c o m p l e t e "   ) ; 
 	 	 } 
 	 } 
 } ) ; 
 
 } ) (   j Q u e r y   ) ; 
 
 ( f u n c t i o n (   $ ,   u n d e f i n e d   )   { 
 
 / /   n u m b e r   o f   p a g e s   i n   a   s l i d e r 
 / /   ( h o w   m a n y   t i m e s   c a n   y o u   p a g e   u p / d o w n   t o   g o   t h r o u g h   t h e   w h o l e   r a n g e ) 
 v a r   n u m P a g e s   =   5 ; 
 
 $ . w i d g e t (   " u i . s l i d e r " ,   $ . u i . m o u s e ,   { 
 	 v e r s i o n :   " 1 . 1 0 . 3 " , 
 	 w i d g e t E v e n t P r e f i x :   " s l i d e " , 
 
 	 o p t i o n s :   { 
 	 	 a n i m a t e :   f a l s e , 
 	 	 d i s t a n c e :   0 , 
 	 	 m a x :   1 0 0 , 
 	 	 m i n :   0 , 
 	 	 o r i e n t a t i o n :   " h o r i z o n t a l " , 
 	 	 r a n g e :   f a l s e , 
 	 	 s t e p :   1 , 
 	 	 v a l u e :   0 , 
 	 	 v a l u e s :   n u l l , 
 
 	 	 / /   c a l l b a c k s 
 	 	 c h a n g e :   n u l l , 
 	 	 s l i d e :   n u l l , 
 	 	 s t a r t :   n u l l , 
 	 	 s t o p :   n u l l 
 	 } , 
 
 	 _ c r e a t e :   f u n c t i o n ( )   { 
 	 	 t h i s . _ k e y S l i d i n g   =   f a l s e ; 
 	 	 t h i s . _ m o u s e S l i d i n g   =   f a l s e ; 
 	 	 t h i s . _ a n i m a t e O f f   =   t r u e ; 
 	 	 t h i s . _ h a n d l e I n d e x   =   n u l l ; 
 	 	 t h i s . _ d e t e c t O r i e n t a t i o n ( ) ; 
 	 	 t h i s . _ m o u s e I n i t ( ) ; 
 
 	 	 t h i s . e l e m e n t 
 	 	 	 . a d d C l a s s (   " u i - s l i d e r "   + 
 	 	 	 	 "   u i - s l i d e r - "   +   t h i s . o r i e n t a t i o n   + 
 	 	 	 	 "   u i - w i d g e t "   + 
 	 	 	 	 "   u i - w i d g e t - c o n t e n t "   + 
 	 	 	 	 "   u i - c o r n e r - a l l " ) ; 
 
 	 	 t h i s . _ r e f r e s h ( ) ; 
 	 	 t h i s . _ s e t O p t i o n (   " d i s a b l e d " ,   t h i s . o p t i o n s . d i s a b l e d   ) ; 
 
 	 	 t h i s . _ a n i m a t e O f f   =   f a l s e ; 
 	 } , 
 
 	 _ r e f r e s h :   f u n c t i o n ( )   { 
 	 	 t h i s . _ c r e a t e R a n g e ( ) ; 
 	 	 t h i s . _ c r e a t e H a n d l e s ( ) ; 
 	 	 t h i s . _ s e t u p E v e n t s ( ) ; 
 	 	 t h i s . _ r e f r e s h V a l u e ( ) ; 
 	 } , 
 
 	 _ c r e a t e H a n d l e s :   f u n c t i o n ( )   { 
 	 	 v a r   i ,   h a n d l e C o u n t , 
 	 	 	 o p t i o n s   =   t h i s . o p t i o n s , 
 	 	 	 e x i s t i n g H a n d l e s   =   t h i s . e l e m e n t . f i n d (   " . u i - s l i d e r - h a n d l e "   ) . a d d C l a s s (   " u i - s t a t e - d e f a u l t   u i - c o r n e r - a l l "   ) , 
 	 	 	 h a n d l e   =   " < a   c l a s s = ' u i - s l i d e r - h a n d l e   u i - s t a t e - d e f a u l t   u i - c o r n e r - a l l '   h r e f = ' # ' > < / a > " , 
 	 	 	 h a n d l e s   =   [ ] ; 
 
 	 	 h a n d l e C o u n t   =   (   o p t i o n s . v a l u e s   & &   o p t i o n s . v a l u e s . l e n g t h   )   | |   1 ; 
 
 	 	 i f   (   e x i s t i n g H a n d l e s . l e n g t h   >   h a n d l e C o u n t   )   { 
 	 	 	 e x i s t i n g H a n d l e s . s l i c e (   h a n d l e C o u n t   ) . r e m o v e ( ) ; 
 	 	 	 e x i s t i n g H a n d l e s   =   e x i s t i n g H a n d l e s . s l i c e (   0 ,   h a n d l e C o u n t   ) ; 
 	 	 } 
 
 	 	 f o r   (   i   =   e x i s t i n g H a n d l e s . l e n g t h ;   i   <   h a n d l e C o u n t ;   i + +   )   { 
 	 	 	 h a n d l e s . p u s h (   h a n d l e   ) ; 
 	 	 } 
 
 	 	 t h i s . h a n d l e s   =   e x i s t i n g H a n d l e s . a d d (   $ (   h a n d l e s . j o i n (   " "   )   ) . a p p e n d T o (   t h i s . e l e m e n t   )   ) ; 
 
 	 	 t h i s . h a n d l e   =   t h i s . h a n d l e s . e q (   0   ) ; 
 
 	 	 t h i s . h a n d l e s . e a c h ( f u n c t i o n (   i   )   { 
 	 	 	 $ (   t h i s   ) . d a t a (   " u i - s l i d e r - h a n d l e - i n d e x " ,   i   ) ; 
 	 	 } ) ; 
 	 } , 
 
 	 _ c r e a t e R a n g e :   f u n c t i o n ( )   { 
 	 	 v a r   o p t i o n s   =   t h i s . o p t i o n s , 
 	 	 	 c l a s s e s   =   " " ; 
 
 	 	 i f   (   o p t i o n s . r a n g e   )   { 
 	 	 	 i f   (   o p t i o n s . r a n g e   = = =   t r u e   )   { 
 	 	 	 	 i f   (   ! o p t i o n s . v a l u e s   )   { 
 	 	 	 	 	 o p t i o n s . v a l u e s   =   [   t h i s . _ v a l u e M i n ( ) ,   t h i s . _ v a l u e M i n ( )   ] ; 
 	 	 	 	 }   e l s e   i f   (   o p t i o n s . v a l u e s . l e n g t h   & &   o p t i o n s . v a l u e s . l e n g t h   ! = =   2   )   { 
 	 	 	 	 	 o p t i o n s . v a l u e s   =   [   o p t i o n s . v a l u e s [ 0 ] ,   o p t i o n s . v a l u e s [ 0 ]   ] ; 
 	 	 	 	 }   e l s e   i f   (   $ . i s A r r a y (   o p t i o n s . v a l u e s   )   )   { 
 	 	 	 	 	 o p t i o n s . v a l u e s   =   o p t i o n s . v a l u e s . s l i c e ( 0 ) ; 
 	 	 	 	 } 
 	 	 	 } 
 
 	 	 	 i f   (   ! t h i s . r a n g e   | |   ! t h i s . r a n g e . l e n g t h   )   { 
 	 	 	 	 t h i s . r a n g e   =   $ (   " < d i v > < / d i v > "   ) 
 	 	 	 	 	 . a p p e n d T o (   t h i s . e l e m e n t   ) ; 
 
 	 	 	 	 c l a s s e s   =   " u i - s l i d e r - r a n g e "   + 
 	 	 	 	 / /   n o t e :   t h i s   i s n ' t   t h e   m o s t   f i t t i n g l y   s e m a n t i c   f r a m e w o r k   c l a s s   f o r   t h i s   e l e m e n t , 
 	 	 	 	 / /   b u t   w o r k e d   b e s t   v i s u a l l y   w i t h   a   v a r i e t y   o f   t h e m e s 
 	 	 	 	 "   u i - w i d g e t - h e a d e r   u i - c o r n e r - a l l " ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 t h i s . r a n g e . r e m o v e C l a s s (   " u i - s l i d e r - r a n g e - m i n   u i - s l i d e r - r a n g e - m a x "   ) 
 	 	 	 	 	 / /   H a n d l e   r a n g e   s w i t c h i n g   f r o m   t r u e   t o   m i n / m a x 
 	 	 	 	 	 . c s s ( { 
 	 	 	 	 	 	 " l e f t " :   " " , 
 	 	 	 	 	 	 " b o t t o m " :   " " 
 	 	 	 	 	 } ) ; 
 	 	 	 } 
 
 	 	 	 t h i s . r a n g e . a d d C l a s s (   c l a s s e s   + 
 	 	 	 	 (   (   o p t i o n s . r a n g e   = = =   " m i n "   | |   o p t i o n s . r a n g e   = = =   " m a x "   )   ?   "   u i - s l i d e r - r a n g e - "   +   o p t i o n s . r a n g e   :   " "   )   ) ; 
 	 	 }   e l s e   { 
 	 	 	 t h i s . r a n g e   =   $ ( [ ] ) ; 
 	 	 } 
 	 } , 
 
 	 _ s e t u p E v e n t s :   f u n c t i o n ( )   { 
 	 	 v a r   e l e m e n t s   =   t h i s . h a n d l e s . a d d (   t h i s . r a n g e   ) . f i l t e r (   " a "   ) ; 
 	 	 t h i s . _ o f f (   e l e m e n t s   ) ; 
 	 	 t h i s . _ o n (   e l e m e n t s ,   t h i s . _ h a n d l e E v e n t s   ) ; 
 	 	 t h i s . _ h o v e r a b l e (   e l e m e n t s   ) ; 
 	 	 t h i s . _ f o c u s a b l e (   e l e m e n t s   ) ; 
 	 } , 
 
 	 _ d e s t r o y :   f u n c t i o n ( )   { 
 	 	 t h i s . h a n d l e s . r e m o v e ( ) ; 
 	 	 t h i s . r a n g e . r e m o v e ( ) ; 
 
 	 	 t h i s . e l e m e n t 
 	 	 	 . r e m o v e C l a s s (   " u i - s l i d e r "   + 
 	 	 	 	 "   u i - s l i d e r - h o r i z o n t a l "   + 
 	 	 	 	 "   u i - s l i d e r - v e r t i c a l "   + 
 	 	 	 	 "   u i - w i d g e t "   + 
 	 	 	 	 "   u i - w i d g e t - c o n t e n t "   + 
 	 	 	 	 "   u i - c o r n e r - a l l "   ) ; 
 
 	 	 t h i s . _ m o u s e D e s t r o y ( ) ; 
 	 } , 
 
 	 _ m o u s e C a p t u r e :   f u n c t i o n (   e v e n t   )   { 
 	 	 v a r   p o s i t i o n ,   n o r m V a l u e ,   d i s t a n c e ,   c l o s e s t H a n d l e ,   i n d e x ,   a l l o w e d ,   o f f s e t ,   m o u s e O v e r H a n d l e , 
 	 	 	 t h a t   =   t h i s , 
 	 	 	 o   =   t h i s . o p t i o n s ; 
 
 	 	 i f   (   o . d i s a b l e d   )   { 
 	 	 	 r e t u r n   f a l s e ; 
 	 	 } 
 
 	 	 t h i s . e l e m e n t S i z e   =   { 
 	 	 	 w i d t h :   t h i s . e l e m e n t . o u t e r W i d t h ( ) , 
 	 	 	 h e i g h t :   t h i s . e l e m e n t . o u t e r H e i g h t ( ) 
 	 	 } ; 
 	 	 t h i s . e l e m e n t O f f s e t   =   t h i s . e l e m e n t . o f f s e t ( ) ; 
 
 	 	 p o s i t i o n   =   {   x :   e v e n t . p a g e X ,   y :   e v e n t . p a g e Y   } ; 
 	 	 n o r m V a l u e   =   t h i s . _ n o r m V a l u e F r o m M o u s e (   p o s i t i o n   ) ; 
 	 	 d i s t a n c e   =   t h i s . _ v a l u e M a x ( )   -   t h i s . _ v a l u e M i n ( )   +   1 ; 
 	 	 t h i s . h a n d l e s . e a c h ( f u n c t i o n (   i   )   { 
 	 	 	 v a r   t h i s D i s t a n c e   =   M a t h . a b s (   n o r m V a l u e   -   t h a t . v a l u e s ( i )   ) ; 
 	 	 	 i f   ( (   d i s t a n c e   >   t h i s D i s t a n c e   )   | | 
 	 	 	 	 (   d i s t a n c e   = = =   t h i s D i s t a n c e   & & 
 	 	 	 	 	 ( i   = = =   t h a t . _ l a s t C h a n g e d V a l u e   | |   t h a t . v a l u e s ( i )   = = =   o . m i n   ) ) )   { 
 	 	 	 	 d i s t a n c e   =   t h i s D i s t a n c e ; 
 	 	 	 	 c l o s e s t H a n d l e   =   $ (   t h i s   ) ; 
 	 	 	 	 i n d e x   =   i ; 
 	 	 	 } 
 	 	 } ) ; 
 
 	 	 a l l o w e d   =   t h i s . _ s t a r t (   e v e n t ,   i n d e x   ) ; 
 	 	 i f   (   a l l o w e d   = = =   f a l s e   )   { 
 	 	 	 r e t u r n   f a l s e ; 
 	 	 } 
 	 	 t h i s . _ m o u s e S l i d i n g   =   t r u e ; 
 
 	 	 t h i s . _ h a n d l e I n d e x   =   i n d e x ; 
 
 	 	 c l o s e s t H a n d l e 
 	 	 	 . a d d C l a s s (   " u i - s t a t e - a c t i v e "   ) 
 	 	 	 . f o c u s ( ) ; 
 
 	 	 o f f s e t   =   c l o s e s t H a n d l e . o f f s e t ( ) ; 
 	 	 m o u s e O v e r H a n d l e   =   ! $ (   e v e n t . t a r g e t   ) . p a r e n t s ( ) . a d d B a c k ( ) . i s (   " . u i - s l i d e r - h a n d l e "   ) ; 
 	 	 t h i s . _ c l i c k O f f s e t   =   m o u s e O v e r H a n d l e   ?   {   l e f t :   0 ,   t o p :   0   }   :   { 
 	 	 	 l e f t :   e v e n t . p a g e X   -   o f f s e t . l e f t   -   (   c l o s e s t H a n d l e . w i d t h ( )   /   2   ) , 
 	 	 	 t o p :   e v e n t . p a g e Y   -   o f f s e t . t o p   - 
 	 	 	 	 (   c l o s e s t H a n d l e . h e i g h t ( )   /   2   )   - 
 	 	 	 	 (   p a r s e I n t (   c l o s e s t H a n d l e . c s s ( " b o r d e r T o p W i d t h " ) ,   1 0   )   | |   0   )   - 
 	 	 	 	 (   p a r s e I n t (   c l o s e s t H a n d l e . c s s ( " b o r d e r B o t t o m W i d t h " ) ,   1 0   )   | |   0 )   + 
 	 	 	 	 (   p a r s e I n t (   c l o s e s t H a n d l e . c s s ( " m a r g i n T o p " ) ,   1 0   )   | |   0 ) 
 	 	 } ; 
 
 	 	 i f   (   ! t h i s . h a n d l e s . h a s C l a s s (   " u i - s t a t e - h o v e r "   )   )   { 
 	 	 	 t h i s . _ s l i d e (   e v e n t ,   i n d e x ,   n o r m V a l u e   ) ; 
 	 	 } 
 	 	 t h i s . _ a n i m a t e O f f   =   t r u e ; 
 	 	 r e t u r n   t r u e ; 
 	 } , 
 
 	 _ m o u s e S t a r t :   f u n c t i o n ( )   { 
 	 	 r e t u r n   t r u e ; 
 	 } , 
 
 	 _ m o u s e D r a g :   f u n c t i o n (   e v e n t   )   { 
 	 	 v a r   p o s i t i o n   =   {   x :   e v e n t . p a g e X ,   y :   e v e n t . p a g e Y   } , 
 	 	 	 n o r m V a l u e   =   t h i s . _ n o r m V a l u e F r o m M o u s e (   p o s i t i o n   ) ; 
 
 	 	 t h i s . _ s l i d e (   e v e n t ,   t h i s . _ h a n d l e I n d e x ,   n o r m V a l u e   ) ; 
 
 	 	 r e t u r n   f a l s e ; 
 	 } , 
 
 	 _ m o u s e S t o p :   f u n c t i o n (   e v e n t   )   { 
 	 	 t h i s . h a n d l e s . r e m o v e C l a s s (   " u i - s t a t e - a c t i v e "   ) ; 
 	 	 t h i s . _ m o u s e S l i d i n g   =   f a l s e ; 
 
 	 	 t h i s . _ s t o p (   e v e n t ,   t h i s . _ h a n d l e I n d e x   ) ; 
 	 	 t h i s . _ c h a n g e (   e v e n t ,   t h i s . _ h a n d l e I n d e x   ) ; 
 
 	 	 t h i s . _ h a n d l e I n d e x   =   n u l l ; 
 	 	 t h i s . _ c l i c k O f f s e t   =   n u l l ; 
 	 	 t h i s . _ a n i m a t e O f f   =   f a l s e ; 
 
 	 	 r e t u r n   f a l s e ; 
 	 } , 
 
 	 _ d e t e c t O r i e n t a t i o n :   f u n c t i o n ( )   { 
 	 	 t h i s . o r i e n t a t i o n   =   (   t h i s . o p t i o n s . o r i e n t a t i o n   = = =   " v e r t i c a l "   )   ?   " v e r t i c a l "   :   " h o r i z o n t a l " ; 
 	 } , 
 
 	 _ n o r m V a l u e F r o m M o u s e :   f u n c t i o n (   p o s i t i o n   )   { 
 	 	 v a r   p i x e l T o t a l , 
 	 	 	 p i x e l M o u s e , 
 	 	 	 p e r c e n t M o u s e , 
 	 	 	 v a l u e T o t a l , 
 	 	 	 v a l u e M o u s e ; 
 
 	 	 i f   (   t h i s . o r i e n t a t i o n   = = =   " h o r i z o n t a l "   )   { 
 	 	 	 p i x e l T o t a l   =   t h i s . e l e m e n t S i z e . w i d t h ; 
 	 	 	 p i x e l M o u s e   =   p o s i t i o n . x   -   t h i s . e l e m e n t O f f s e t . l e f t   -   (   t h i s . _ c l i c k O f f s e t   ?   t h i s . _ c l i c k O f f s e t . l e f t   :   0   ) ; 
 	 	 }   e l s e   { 
 	 	 	 p i x e l T o t a l   =   t h i s . e l e m e n t S i z e . h e i g h t ; 
 	 	 	 p i x e l M o u s e   =   p o s i t i o n . y   -   t h i s . e l e m e n t O f f s e t . t o p   -   (   t h i s . _ c l i c k O f f s e t   ?   t h i s . _ c l i c k O f f s e t . t o p   :   0   ) ; 
 	 	 } 
 
 	 	 p e r c e n t M o u s e   =   (   p i x e l M o u s e   /   p i x e l T o t a l   ) ; 
 	 	 i f   (   p e r c e n t M o u s e   >   1   )   { 
 	 	 	 p e r c e n t M o u s e   =   1 ; 
 	 	 } 
 	 	 i f   (   p e r c e n t M o u s e   <   0   )   { 
 	 	 	 p e r c e n t M o u s e   =   0 ; 
 	 	 } 
 	 	 i f   (   t h i s . o r i e n t a t i o n   = = =   " v e r t i c a l "   )   { 
 	 	 	 p e r c e n t M o u s e   =   1   -   p e r c e n t M o u s e ; 
 	 	 } 
 
 	 	 v a l u e T o t a l   =   t h i s . _ v a l u e M a x ( )   -   t h i s . _ v a l u e M i n ( ) ; 
 	 	 v a l u e M o u s e   =   t h i s . _ v a l u e M i n ( )   +   p e r c e n t M o u s e   *   v a l u e T o t a l ; 
 
 	 	 r e t u r n   t h i s . _ t r i m A l i g n V a l u e (   v a l u e M o u s e   ) ; 
 	 } , 
 
 	 _ s t a r t :   f u n c t i o n (   e v e n t ,   i n d e x   )   { 
 	 	 v a r   u i H a s h   =   { 
 	 	 	 h a n d l e :   t h i s . h a n d l e s [   i n d e x   ] , 
 	 	 	 v a l u e :   t h i s . v a l u e ( ) 
 	 	 } ; 
 	 	 i f   (   t h i s . o p t i o n s . v a l u e s   & &   t h i s . o p t i o n s . v a l u e s . l e n g t h   )   { 
 	 	 	 u i H a s h . v a l u e   =   t h i s . v a l u e s (   i n d e x   ) ; 
 	 	 	 u i H a s h . v a l u e s   =   t h i s . v a l u e s ( ) ; 
 	 	 } 
 	 	 r e t u r n   t h i s . _ t r i g g e r (   " s t a r t " ,   e v e n t ,   u i H a s h   ) ; 
 	 } , 
 
 	 _ s l i d e :   f u n c t i o n (   e v e n t ,   i n d e x ,   n e w V a l   )   { 
 	 	 v a r   o t h e r V a l , 
 	 	 	 n e w V a l u e s , 
 	 	 	 a l l o w e d ; 
 
 	 	 i f   (   t h i s . o p t i o n s . v a l u e s   & &   t h i s . o p t i o n s . v a l u e s . l e n g t h   )   { 
 	 	 	 o t h e r V a l   =   t h i s . v a l u e s (   i n d e x   ?   0   :   1   ) ; 
 
 	 	 	 i f   (   (   t h i s . o p t i o n s . v a l u e s . l e n g t h   = = =   2   & &   t h i s . o p t i o n s . r a n g e   = = =   t r u e   )   & & 
 	 	 	 	 	 (   (   i n d e x   = = =   0   & &   n e w V a l   >   o t h e r V a l )   | |   (   i n d e x   = = =   1   & &   n e w V a l   <   o t h e r V a l   )   ) 
 	 	 	 	 )   { 
 	 	 	 	 n e w V a l   =   o t h e r V a l ; 
 	 	 	 } 
 
 	 	 	 i f   (   n e w V a l   ! = =   t h i s . v a l u e s (   i n d e x   )   )   { 
 	 	 	 	 n e w V a l u e s   =   t h i s . v a l u e s ( ) ; 
 	 	 	 	 n e w V a l u e s [   i n d e x   ]   =   n e w V a l ; 
 	 	 	 	 / /   A   s l i d e   c a n   b e   c a n c e l e d   b y   r e t u r n i n g   f a l s e   f r o m   t h e   s l i d e   c a l l b a c k 
 	 	 	 	 a l l o w e d   =   t h i s . _ t r i g g e r (   " s l i d e " ,   e v e n t ,   { 
 	 	 	 	 	 h a n d l e :   t h i s . h a n d l e s [   i n d e x   ] , 
 	 	 	 	 	 v a l u e :   n e w V a l , 
 	 	 	 	 	 v a l u e s :   n e w V a l u e s 
 	 	 	 	 }   ) ; 
 	 	 	 	 o t h e r V a l   =   t h i s . v a l u e s (   i n d e x   ?   0   :   1   ) ; 
 	 	 	 	 i f   (   a l l o w e d   ! = =   f a l s e   )   { 
 	 	 	 	 	 t h i s . v a l u e s (   i n d e x ,   n e w V a l ,   t r u e   ) ; 
 	 	 	 	 } 
 	 	 	 } 
 	 	 }   e l s e   { 
 	 	 	 i f   (   n e w V a l   ! = =   t h i s . v a l u e ( )   )   { 
 	 	 	 	 / /   A   s l i d e   c a n   b e   c a n c e l e d   b y   r e t u r n i n g   f a l s e   f r o m   t h e   s l i d e   c a l l b a c k 
 	 	 	 	 a l l o w e d   =   t h i s . _ t r i g g e r (   " s l i d e " ,   e v e n t ,   { 
 	 	 	 	 	 h a n d l e :   t h i s . h a n d l e s [   i n d e x   ] , 
 	 	 	 	 	 v a l u e :   n e w V a l 
 	 	 	 	 }   ) ; 
 	 	 	 	 i f   (   a l l o w e d   ! = =   f a l s e   )   { 
 	 	 	 	 	 t h i s . v a l u e (   n e w V a l   ) ; 
 	 	 	 	 } 
 	 	 	 } 
 	 	 } 
 	 } , 
 
 	 _ s t o p :   f u n c t i o n (   e v e n t ,   i n d e x   )   { 
 	 	 v a r   u i H a s h   =   { 
 	 	 	 h a n d l e :   t h i s . h a n d l e s [   i n d e x   ] , 
 	 	 	 v a l u e :   t h i s . v a l u e ( ) 
 	 	 } ; 
 	 	 i f   (   t h i s . o p t i o n s . v a l u e s   & &   t h i s . o p t i o n s . v a l u e s . l e n g t h   )   { 
 	 	 	 u i H a s h . v a l u e   =   t h i s . v a l u e s (   i n d e x   ) ; 
 	 	 	 u i H a s h . v a l u e s   =   t h i s . v a l u e s ( ) ; 
 	 	 } 
 
 	 	 t h i s . _ t r i g g e r (   " s t o p " ,   e v e n t ,   u i H a s h   ) ; 
 	 } , 
 
 	 _ c h a n g e :   f u n c t i o n (   e v e n t ,   i n d e x   )   { 
 	 	 i f   (   ! t h i s . _ k e y S l i d i n g   & &   ! t h i s . _ m o u s e S l i d i n g   )   { 
 	 	 	 v a r   u i H a s h   =   { 
 	 	 	 	 h a n d l e :   t h i s . h a n d l e s [   i n d e x   ] , 
 	 	 	 	 v a l u e :   t h i s . v a l u e ( ) 
 	 	 	 } ; 
 	 	 	 i f   (   t h i s . o p t i o n s . v a l u e s   & &   t h i s . o p t i o n s . v a l u e s . l e n g t h   )   { 
 	 	 	 	 u i H a s h . v a l u e   =   t h i s . v a l u e s (   i n d e x   ) ; 
 	 	 	 	 u i H a s h . v a l u e s   =   t h i s . v a l u e s ( ) ; 
 	 	 	 } 
 
 	 	 	 / / s t o r e   t h e   l a s t   c h a n g e d   v a l u e   i n d e x   f o r   r e f e r e n c e   w h e n   h a n d l e s   o v e r l a p 
 	 	 	 t h i s . _ l a s t C h a n g e d V a l u e   =   i n d e x ; 
 
 	 	 	 t h i s . _ t r i g g e r (   " c h a n g e " ,   e v e n t ,   u i H a s h   ) ; 
 	 	 } 
 	 } , 
 
 	 v a l u e :   f u n c t i o n (   n e w V a l u e   )   { 
 	 	 i f   (   a r g u m e n t s . l e n g t h   )   { 
 	 	 	 t h i s . o p t i o n s . v a l u e   =   t h i s . _ t r i m A l i g n V a l u e (   n e w V a l u e   ) ; 
 	 	 	 t h i s . _ r e f r e s h V a l u e ( ) ; 
 	 	 	 t h i s . _ c h a n g e (   n u l l ,   0   ) ; 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 r e t u r n   t h i s . _ v a l u e ( ) ; 
 	 } , 
 
 	 v a l u e s :   f u n c t i o n (   i n d e x ,   n e w V a l u e   )   { 
 	 	 v a r   v a l s , 
 	 	 	 n e w V a l u e s , 
 	 	 	 i ; 
 
 	 	 i f   (   a r g u m e n t s . l e n g t h   >   1   )   { 
 	 	 	 t h i s . o p t i o n s . v a l u e s [   i n d e x   ]   =   t h i s . _ t r i m A l i g n V a l u e (   n e w V a l u e   ) ; 
 	 	 	 t h i s . _ r e f r e s h V a l u e ( ) ; 
 	 	 	 t h i s . _ c h a n g e (   n u l l ,   i n d e x   ) ; 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 i f   (   a r g u m e n t s . l e n g t h   )   { 
 	 	 	 i f   (   $ . i s A r r a y (   a r g u m e n t s [   0   ]   )   )   { 
 	 	 	 	 v a l s   =   t h i s . o p t i o n s . v a l u e s ; 
 	 	 	 	 n e w V a l u e s   =   a r g u m e n t s [   0   ] ; 
 	 	 	 	 f o r   (   i   =   0 ;   i   <   v a l s . l e n g t h ;   i   + =   1   )   { 
 	 	 	 	 	 v a l s [   i   ]   =   t h i s . _ t r i m A l i g n V a l u e (   n e w V a l u e s [   i   ]   ) ; 
 	 	 	 	 	 t h i s . _ c h a n g e (   n u l l ,   i   ) ; 
 	 	 	 	 } 
 	 	 	 	 t h i s . _ r e f r e s h V a l u e ( ) ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 i f   (   t h i s . o p t i o n s . v a l u e s   & &   t h i s . o p t i o n s . v a l u e s . l e n g t h   )   { 
 	 	 	 	 	 r e t u r n   t h i s . _ v a l u e s (   i n d e x   ) ; 
 	 	 	 	 }   e l s e   { 
 	 	 	 	 	 r e t u r n   t h i s . v a l u e ( ) ; 
 	 	 	 	 } 
 	 	 	 } 
 	 	 }   e l s e   { 
 	 	 	 r e t u r n   t h i s . _ v a l u e s ( ) ; 
 	 	 } 
 	 } , 
 
 	 _ s e t O p t i o n :   f u n c t i o n (   k e y ,   v a l u e   )   { 
 	 	 v a r   i , 
 	 	 	 v a l s L e n g t h   =   0 ; 
 
 	 	 i f   (   k e y   = = =   " r a n g e "   & &   t h i s . o p t i o n s . r a n g e   = = =   t r u e   )   { 
 	 	 	 i f   (   v a l u e   = = =   " m i n "   )   { 
 	 	 	 	 t h i s . o p t i o n s . v a l u e   =   t h i s . _ v a l u e s (   0   ) ; 
 	 	 	 	 t h i s . o p t i o n s . v a l u e s   =   n u l l ; 
 	 	 	 }   e l s e   i f   (   v a l u e   = = =   " m a x "   )   { 
 	 	 	 	 t h i s . o p t i o n s . v a l u e   =   t h i s . _ v a l u e s (   t h i s . o p t i o n s . v a l u e s . l e n g t h - 1   ) ; 
 	 	 	 	 t h i s . o p t i o n s . v a l u e s   =   n u l l ; 
 	 	 	 } 
 	 	 } 
 
 	 	 i f   (   $ . i s A r r a y (   t h i s . o p t i o n s . v a l u e s   )   )   { 
 	 	 	 v a l s L e n g t h   =   t h i s . o p t i o n s . v a l u e s . l e n g t h ; 
 	 	 } 
 
 	 	 $ . W i d g e t . p r o t o t y p e . _ s e t O p t i o n . a p p l y (   t h i s ,   a r g u m e n t s   ) ; 
 
 	 	 s w i t c h   (   k e y   )   { 
 	 	 	 c a s e   " o r i e n t a t i o n " : 
 	 	 	 	 t h i s . _ d e t e c t O r i e n t a t i o n ( ) ; 
 	 	 	 	 t h i s . e l e m e n t 
 	 	 	 	 	 . r e m o v e C l a s s (   " u i - s l i d e r - h o r i z o n t a l   u i - s l i d e r - v e r t i c a l "   ) 
 	 	 	 	 	 . a d d C l a s s (   " u i - s l i d e r - "   +   t h i s . o r i e n t a t i o n   ) ; 
 	 	 	 	 t h i s . _ r e f r e s h V a l u e ( ) ; 
 	 	 	 	 b r e a k ; 
 	 	 	 c a s e   " v a l u e " : 
 	 	 	 	 t h i s . _ a n i m a t e O f f   =   t r u e ; 
 	 	 	 	 t h i s . _ r e f r e s h V a l u e ( ) ; 
 	 	 	 	 t h i s . _ c h a n g e (   n u l l ,   0   ) ; 
 	 	 	 	 t h i s . _ a n i m a t e O f f   =   f a l s e ; 
 	 	 	 	 b r e a k ; 
 	 	 	 c a s e   " v a l u e s " : 
 	 	 	 	 t h i s . _ a n i m a t e O f f   =   t r u e ; 
 	 	 	 	 t h i s . _ r e f r e s h V a l u e ( ) ; 
 	 	 	 	 f o r   (   i   =   0 ;   i   <   v a l s L e n g t h ;   i   + =   1   )   { 
 	 	 	 	 	 t h i s . _ c h a n g e (   n u l l ,   i   ) ; 
 	 	 	 	 } 
 	 	 	 	 t h i s . _ a n i m a t e O f f   =   f a l s e ; 
 	 	 	 	 b r e a k ; 
 	 	 	 c a s e   " m i n " : 
 	 	 	 c a s e   " m a x " : 
 	 	 	 	 t h i s . _ a n i m a t e O f f   =   t r u e ; 
 	 	 	 	 t h i s . _ r e f r e s h V a l u e ( ) ; 
 	 	 	 	 t h i s . _ a n i m a t e O f f   =   f a l s e ; 
 	 	 	 	 b r e a k ; 
 	 	 	 c a s e   " r a n g e " : 
 	 	 	 	 t h i s . _ a n i m a t e O f f   =   t r u e ; 
 	 	 	 	 t h i s . _ r e f r e s h ( ) ; 
 	 	 	 	 t h i s . _ a n i m a t e O f f   =   f a l s e ; 
 	 	 	 	 b r e a k ; 
 	 	 } 
 	 } , 
 
 	 / / i n t e r n a l   v a l u e   g e t t e r 
 	 / /   _ v a l u e ( )   r e t u r n s   v a l u e   t r i m m e d   b y   m i n   a n d   m a x ,   a l i g n e d   b y   s t e p 
 	 _ v a l u e :   f u n c t i o n ( )   { 
 	 	 v a r   v a l   =   t h i s . o p t i o n s . v a l u e ; 
 	 	 v a l   =   t h i s . _ t r i m A l i g n V a l u e (   v a l   ) ; 
 
 	 	 r e t u r n   v a l ; 
 	 } , 
 
 	 / / i n t e r n a l   v a l u e s   g e t t e r 
 	 / /   _ v a l u e s ( )   r e t u r n s   a r r a y   o f   v a l u e s   t r i m m e d   b y   m i n   a n d   m a x ,   a l i g n e d   b y   s t e p 
 	 / /   _ v a l u e s (   i n d e x   )   r e t u r n s   s i n g l e   v a l u e   t r i m m e d   b y   m i n   a n d   m a x ,   a l i g n e d   b y   s t e p 
 	 _ v a l u e s :   f u n c t i o n (   i n d e x   )   { 
 	 	 v a r   v a l , 
 	 	 	 v a l s , 
 	 	 	 i ; 
 
 	 	 i f   (   a r g u m e n t s . l e n g t h   )   { 
 	 	 	 v a l   =   t h i s . o p t i o n s . v a l u e s [   i n d e x   ] ; 
 	 	 	 v a l   =   t h i s . _ t r i m A l i g n V a l u e (   v a l   ) ; 
 
 	 	 	 r e t u r n   v a l ; 
 	 	 }   e l s e   i f   (   t h i s . o p t i o n s . v a l u e s   & &   t h i s . o p t i o n s . v a l u e s . l e n g t h   )   { 
 	 	 	 / /   . s l i c e ( )   c r e a t e s   a   c o p y   o f   t h e   a r r a y 
 	 	 	 / /   t h i s   c o p y   g e t s   t r i m m e d   b y   m i n   a n d   m a x   a n d   t h e n   r e t u r n e d 
 	 	 	 v a l s   =   t h i s . o p t i o n s . v a l u e s . s l i c e ( ) ; 
 	 	 	 f o r   (   i   =   0 ;   i   <   v a l s . l e n g t h ;   i + =   1 )   { 
 	 	 	 	 v a l s [   i   ]   =   t h i s . _ t r i m A l i g n V a l u e (   v a l s [   i   ]   ) ; 
 	 	 	 } 
 
 	 	 	 r e t u r n   v a l s ; 
 	 	 }   e l s e   { 
 	 	 	 r e t u r n   [ ] ; 
 	 	 } 
 	 } , 
 
 	 / /   r e t u r n s   t h e   s t e p - a l i g n e d   v a l u e   t h a t   v a l   i s   c l o s e s t   t o ,   b e t w e e n   ( i n c l u s i v e )   m i n   a n d   m a x 
 	 _ t r i m A l i g n V a l u e :   f u n c t i o n (   v a l   )   { 
 	 	 i f   (   v a l   < =   t h i s . _ v a l u e M i n ( )   )   { 
 	 	 	 r e t u r n   t h i s . _ v a l u e M i n ( ) ; 
 	 	 } 
 	 	 i f   (   v a l   > =   t h i s . _ v a l u e M a x ( )   )   { 
 	 	 	 r e t u r n   t h i s . _ v a l u e M a x ( ) ; 
 	 	 } 
 	 	 v a r   s t e p   =   (   t h i s . o p t i o n s . s t e p   >   0   )   ?   t h i s . o p t i o n s . s t e p   :   1 , 
 	 	 	 v a l M o d S t e p   =   ( v a l   -   t h i s . _ v a l u e M i n ( ) )   %   s t e p , 
 	 	 	 a l i g n V a l u e   =   v a l   -   v a l M o d S t e p ; 
 
 	 	 i f   (   M a t h . a b s ( v a l M o d S t e p )   *   2   > =   s t e p   )   { 
 	 	 	 a l i g n V a l u e   + =   (   v a l M o d S t e p   >   0   )   ?   s t e p   :   (   - s t e p   ) ; 
 	 	 } 
 
 	 	 / /   S i n c e   J a v a S c r i p t   h a s   p r o b l e m s   w i t h   l a r g e   f l o a t s ,   r o u n d 
 	 	 / /   t h e   f i n a l   v a l u e   t o   5   d i g i t s   a f t e r   t h e   d e c i m a l   p o i n t   ( s e e   # 4 1 2 4 ) 
 	 	 r e t u r n   p a r s e F l o a t (   a l i g n V a l u e . t o F i x e d ( 5 )   ) ; 
 	 } , 
 
 	 _ v a l u e M i n :   f u n c t i o n ( )   { 
 	 	 r e t u r n   t h i s . o p t i o n s . m i n ; 
 	 } , 
 
 	 _ v a l u e M a x :   f u n c t i o n ( )   { 
 	 	 r e t u r n   t h i s . o p t i o n s . m a x ; 
 	 } , 
 
 	 _ r e f r e s h V a l u e :   f u n c t i o n ( )   { 
 	 	 v a r   l a s t V a l P e r c e n t ,   v a l P e r c e n t ,   v a l u e ,   v a l u e M i n ,   v a l u e M a x , 
 	 	 	 o R a n g e   =   t h i s . o p t i o n s . r a n g e , 
 	 	 	 o   =   t h i s . o p t i o n s , 
 	 	 	 t h a t   =   t h i s , 
 	 	 	 a n i m a t e   =   (   ! t h i s . _ a n i m a t e O f f   )   ?   o . a n i m a t e   :   f a l s e , 
 	 	 	 _ s e t   =   { } ; 
 
 	 	 i f   (   t h i s . o p t i o n s . v a l u e s   & &   t h i s . o p t i o n s . v a l u e s . l e n g t h   )   { 
 	 	 	 t h i s . h a n d l e s . e a c h ( f u n c t i o n (   i   )   { 
 	 	 	 	 v a l P e r c e n t   =   (   t h a t . v a l u e s ( i )   -   t h a t . _ v a l u e M i n ( )   )   /   (   t h a t . _ v a l u e M a x ( )   -   t h a t . _ v a l u e M i n ( )   )   *   1 0 0 ; 
 	 	 	 	 _ s e t [   t h a t . o r i e n t a t i o n   = = =   " h o r i z o n t a l "   ?   " l e f t "   :   " b o t t o m "   ]   =   v a l P e r c e n t   +   " % " ; 
 	 	 	 	 $ (   t h i s   ) . s t o p (   1 ,   1   ) [   a n i m a t e   ?   " a n i m a t e "   :   " c s s "   ] (   _ s e t ,   o . a n i m a t e   ) ; 
 	 	 	 	 i f   (   t h a t . o p t i o n s . r a n g e   = = =   t r u e   )   { 
 	 	 	 	 	 i f   (   t h a t . o r i e n t a t i o n   = = =   " h o r i z o n t a l "   )   { 
 	 	 	 	 	 	 i f   (   i   = = =   0   )   { 
 	 	 	 	 	 	 	 t h a t . r a n g e . s t o p (   1 ,   1   ) [   a n i m a t e   ?   " a n i m a t e "   :   " c s s "   ] (   {   l e f t :   v a l P e r c e n t   +   " % "   } ,   o . a n i m a t e   ) ; 
 	 	 	 	 	 	 } 
 	 	 	 	 	 	 i f   (   i   = = =   1   )   { 
 	 	 	 	 	 	 	 t h a t . r a n g e [   a n i m a t e   ?   " a n i m a t e "   :   " c s s "   ] (   {   w i d t h :   (   v a l P e r c e n t   -   l a s t V a l P e r c e n t   )   +   " % "   } ,   {   q u e u e :   f a l s e ,   d u r a t i o n :   o . a n i m a t e   }   ) ; 
 	 	 	 	 	 	 } 
 	 	 	 	 	 }   e l s e   { 
 	 	 	 	 	 	 i f   (   i   = = =   0   )   { 
 	 	 	 	 	 	 	 t h a t . r a n g e . s t o p (   1 ,   1   ) [   a n i m a t e   ?   " a n i m a t e "   :   " c s s "   ] (   {   b o t t o m :   (   v a l P e r c e n t   )   +   " % "   } ,   o . a n i m a t e   ) ; 
 	 	 	 	 	 	 } 
 	 	 	 	 	 	 i f   (   i   = = =   1   )   { 
 	 	 	 	 	 	 	 t h a t . r a n g e [   a n i m a t e   ?   " a n i m a t e "   :   " c s s "   ] (   {   h e i g h t :   (   v a l P e r c e n t   -   l a s t V a l P e r c e n t   )   +   " % "   } ,   {   q u e u e :   f a l s e ,   d u r a t i o n :   o . a n i m a t e   }   ) ; 
 	 	 	 	 	 	 } 
 	 	 	 	 	 } 
 	 	 	 	 } 
 	 	 	 	 l a s t V a l P e r c e n t   =   v a l P e r c e n t ; 
 	 	 	 } ) ; 
 	 	 }   e l s e   { 
 	 	 	 v a l u e   =   t h i s . v a l u e ( ) ; 
 	 	 	 v a l u e M i n   =   t h i s . _ v a l u e M i n ( ) ; 
 	 	 	 v a l u e M a x   =   t h i s . _ v a l u e M a x ( ) ; 
 	 	 	 v a l P e r c e n t   =   (   v a l u e M a x   ! = =   v a l u e M i n   )   ? 
 	 	 	 	 	 (   v a l u e   -   v a l u e M i n   )   /   (   v a l u e M a x   -   v a l u e M i n   )   *   1 0 0   : 
 	 	 	 	 	 0 ; 
 	 	 	 _ s e t [   t h i s . o r i e n t a t i o n   = = =   " h o r i z o n t a l "   ?   " l e f t "   :   " b o t t o m "   ]   =   v a l P e r c e n t   +   " % " ; 
 	 	 	 t h i s . h a n d l e . s t o p (   1 ,   1   ) [   a n i m a t e   ?   " a n i m a t e "   :   " c s s "   ] (   _ s e t ,   o . a n i m a t e   ) ; 
 
 	 	 	 i f   (   o R a n g e   = = =   " m i n "   & &   t h i s . o r i e n t a t i o n   = = =   " h o r i z o n t a l "   )   { 
 	 	 	 	 t h i s . r a n g e . s t o p (   1 ,   1   ) [   a n i m a t e   ?   " a n i m a t e "   :   " c s s "   ] (   {   w i d t h :   v a l P e r c e n t   +   " % "   } ,   o . a n i m a t e   ) ; 
 	 	 	 } 
 	 	 	 i f   (   o R a n g e   = = =   " m a x "   & &   t h i s . o r i e n t a t i o n   = = =   " h o r i z o n t a l "   )   { 
 	 	 	 	 t h i s . r a n g e [   a n i m a t e   ?   " a n i m a t e "   :   " c s s "   ] (   {   w i d t h :   (   1 0 0   -   v a l P e r c e n t   )   +   " % "   } ,   {   q u e u e :   f a l s e ,   d u r a t i o n :   o . a n i m a t e   }   ) ; 
 	 	 	 } 
 	 	 	 i f   (   o R a n g e   = = =   " m i n "   & &   t h i s . o r i e n t a t i o n   = = =   " v e r t i c a l "   )   { 
 	 	 	 	 t h i s . r a n g e . s t o p (   1 ,   1   ) [   a n i m a t e   ?   " a n i m a t e "   :   " c s s "   ] (   {   h e i g h t :   v a l P e r c e n t   +   " % "   } ,   o . a n i m a t e   ) ; 
 	 	 	 } 
 	 	 	 i f   (   o R a n g e   = = =   " m a x "   & &   t h i s . o r i e n t a t i o n   = = =   " v e r t i c a l "   )   { 
 	 	 	 	 t h i s . r a n g e [   a n i m a t e   ?   " a n i m a t e "   :   " c s s "   ] (   {   h e i g h t :   (   1 0 0   -   v a l P e r c e n t   )   +   " % "   } ,   {   q u e u e :   f a l s e ,   d u r a t i o n :   o . a n i m a t e   }   ) ; 
 	 	 	 } 
 	 	 } 
 	 } , 
 
 	 _ h a n d l e E v e n t s :   { 
 	 	 k e y d o w n :   f u n c t i o n (   e v e n t   )   { 
 	 	 	 / * j s h i n t   m a x c o m p l e x i t y : 2 5 * / 
 	 	 	 v a r   a l l o w e d ,   c u r V a l ,   n e w V a l ,   s t e p , 
 	 	 	 	 i n d e x   =   $ (   e v e n t . t a r g e t   ) . d a t a (   " u i - s l i d e r - h a n d l e - i n d e x "   ) ; 
 
 	 	 	 s w i t c h   (   e v e n t . k e y C o d e   )   { 
 	 	 	 	 c a s e   $ . u i . k e y C o d e . H O M E : 
 	 	 	 	 c a s e   $ . u i . k e y C o d e . E N D : 
 	 	 	 	 c a s e   $ . u i . k e y C o d e . P A G E _ U P : 
 	 	 	 	 c a s e   $ . u i . k e y C o d e . P A G E _ D O W N : 
 	 	 	 	 c a s e   $ . u i . k e y C o d e . U P : 
 	 	 	 	 c a s e   $ . u i . k e y C o d e . R I G H T : 
 	 	 	 	 c a s e   $ . u i . k e y C o d e . D O W N : 
 	 	 	 	 c a s e   $ . u i . k e y C o d e . L E F T : 
 	 	 	 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 	 	 	 	 	 i f   (   ! t h i s . _ k e y S l i d i n g   )   { 
 	 	 	 	 	 	 t h i s . _ k e y S l i d i n g   =   t r u e ; 
 	 	 	 	 	 	 $ (   e v e n t . t a r g e t   ) . a d d C l a s s (   " u i - s t a t e - a c t i v e "   ) ; 
 	 	 	 	 	 	 a l l o w e d   =   t h i s . _ s t a r t (   e v e n t ,   i n d e x   ) ; 
 	 	 	 	 	 	 i f   (   a l l o w e d   = = =   f a l s e   )   { 
 	 	 	 	 	 	 	 r e t u r n ; 
 	 	 	 	 	 	 } 
 	 	 	 	 	 } 
 	 	 	 	 	 b r e a k ; 
 	 	 	 } 
 
 	 	 	 s t e p   =   t h i s . o p t i o n s . s t e p ; 
 	 	 	 i f   (   t h i s . o p t i o n s . v a l u e s   & &   t h i s . o p t i o n s . v a l u e s . l e n g t h   )   { 
 	 	 	 	 c u r V a l   =   n e w V a l   =   t h i s . v a l u e s (   i n d e x   ) ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 c u r V a l   =   n e w V a l   =   t h i s . v a l u e ( ) ; 
 	 	 	 } 
 
 	 	 	 s w i t c h   (   e v e n t . k e y C o d e   )   { 
 	 	 	 	 c a s e   $ . u i . k e y C o d e . H O M E : 
 	 	 	 	 	 n e w V a l   =   t h i s . _ v a l u e M i n ( ) ; 
 	 	 	 	 	 b r e a k ; 
 	 	 	 	 c a s e   $ . u i . k e y C o d e . E N D : 
 	 	 	 	 	 n e w V a l   =   t h i s . _ v a l u e M a x ( ) ; 
 	 	 	 	 	 b r e a k ; 
 	 	 	 	 c a s e   $ . u i . k e y C o d e . P A G E _ U P : 
 	 	 	 	 	 n e w V a l   =   t h i s . _ t r i m A l i g n V a l u e (   c u r V a l   +   (   ( t h i s . _ v a l u e M a x ( )   -   t h i s . _ v a l u e M i n ( ) )   /   n u m P a g e s   )   ) ; 
 	 	 	 	 	 b r e a k ; 
 	 	 	 	 c a s e   $ . u i . k e y C o d e . P A G E _ D O W N : 
 	 	 	 	 	 n e w V a l   =   t h i s . _ t r i m A l i g n V a l u e (   c u r V a l   -   (   ( t h i s . _ v a l u e M a x ( )   -   t h i s . _ v a l u e M i n ( ) )   /   n u m P a g e s   )   ) ; 
 	 	 	 	 	 b r e a k ; 
 	 	 	 	 c a s e   $ . u i . k e y C o d e . U P : 
 	 	 	 	 c a s e   $ . u i . k e y C o d e . R I G H T : 
 	 	 	 	 	 i f   (   c u r V a l   = = =   t h i s . _ v a l u e M a x ( )   )   { 
 	 	 	 	 	 	 r e t u r n ; 
 	 	 	 	 	 } 
 	 	 	 	 	 n e w V a l   =   t h i s . _ t r i m A l i g n V a l u e (   c u r V a l   +   s t e p   ) ; 
 	 	 	 	 	 b r e a k ; 
 	 	 	 	 c a s e   $ . u i . k e y C o d e . D O W N : 
 	 	 	 	 c a s e   $ . u i . k e y C o d e . L E F T : 
 	 	 	 	 	 i f   (   c u r V a l   = = =   t h i s . _ v a l u e M i n ( )   )   { 
 	 	 	 	 	 	 r e t u r n ; 
 	 	 	 	 	 } 
 	 	 	 	 	 n e w V a l   =   t h i s . _ t r i m A l i g n V a l u e (   c u r V a l   -   s t e p   ) ; 
 	 	 	 	 	 b r e a k ; 
 	 	 	 } 
 
 	 	 	 t h i s . _ s l i d e (   e v e n t ,   i n d e x ,   n e w V a l   ) ; 
 	 	 } , 
 	 	 c l i c k :   f u n c t i o n (   e v e n t   )   { 
 	 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 	 	 } , 
 	 	 k e y u p :   f u n c t i o n (   e v e n t   )   { 
 	 	 	 v a r   i n d e x   =   $ (   e v e n t . t a r g e t   ) . d a t a (   " u i - s l i d e r - h a n d l e - i n d e x "   ) ; 
 
 	 	 	 i f   (   t h i s . _ k e y S l i d i n g   )   { 
 	 	 	 	 t h i s . _ k e y S l i d i n g   =   f a l s e ; 
 	 	 	 	 t h i s . _ s t o p (   e v e n t ,   i n d e x   ) ; 
 	 	 	 	 t h i s . _ c h a n g e (   e v e n t ,   i n d e x   ) ; 
 	 	 	 	 $ (   e v e n t . t a r g e t   ) . r e m o v e C l a s s (   " u i - s t a t e - a c t i v e "   ) ; 
 	 	 	 } 
 	 	 } 
 	 } 
 
 } ) ; 
 
 } ( j Q u e r y ) ) ; 
 
 ( f u n c t i o n (   $   )   { 
 
 f u n c t i o n   m o d i f i e r (   f n   )   { 
 	 r e t u r n   f u n c t i o n ( )   { 
 	 	 v a r   p r e v i o u s   =   t h i s . e l e m e n t . v a l ( ) ; 
 	 	 f n . a p p l y (   t h i s ,   a r g u m e n t s   ) ; 
 	 	 t h i s . _ r e f r e s h ( ) ; 
 	 	 i f   (   p r e v i o u s   ! = =   t h i s . e l e m e n t . v a l ( )   )   { 
 	 	 	 t h i s . _ t r i g g e r (   " c h a n g e "   ) ; 
 	 	 } 
 	 } ; 
 } 
 
 $ . w i d g e t (   " u i . s p i n n e r " ,   { 
 	 v e r s i o n :   " 1 . 1 0 . 3 " , 
 	 d e f a u l t E l e m e n t :   " < i n p u t > " , 
 	 w i d g e t E v e n t P r e f i x :   " s p i n " , 
 	 o p t i o n s :   { 
 	 	 c u l t u r e :   n u l l , 
 	 	 i c o n s :   { 
 	 	 	 d o w n :   " u i - i c o n - t r i a n g l e - 1 - s " , 
 	 	 	 u p :   " u i - i c o n - t r i a n g l e - 1 - n " 
 	 	 } , 
 	 	 i n c r e m e n t a l :   t r u e , 
 	 	 m a x :   n u l l , 
 	 	 m i n :   n u l l , 
 	 	 n u m b e r F o r m a t :   n u l l , 
 	 	 p a g e :   1 0 , 
 	 	 s t e p :   1 , 
 
 	 	 c h a n g e :   n u l l , 
 	 	 s p i n :   n u l l , 
 	 	 s t a r t :   n u l l , 
 	 	 s t o p :   n u l l 
 	 } , 
 
 	 _ c r e a t e :   f u n c t i o n ( )   { 
 	 	 / /   h a n d l e   s t r i n g   v a l u e s   t h a t   n e e d   t o   b e   p a r s e d 
 	 	 t h i s . _ s e t O p t i o n (   " m a x " ,   t h i s . o p t i o n s . m a x   ) ; 
 	 	 t h i s . _ s e t O p t i o n (   " m i n " ,   t h i s . o p t i o n s . m i n   ) ; 
 	 	 t h i s . _ s e t O p t i o n (   " s t e p " ,   t h i s . o p t i o n s . s t e p   ) ; 
 
 	 	 / /   f o r m a t   t h e   v a l u e ,   b u t   d o n ' t   c o n s t r a i n 
 	 	 t h i s . _ v a l u e (   t h i s . e l e m e n t . v a l ( ) ,   t r u e   ) ; 
 
 	 	 t h i s . _ d r a w ( ) ; 
 	 	 t h i s . _ o n (   t h i s . _ e v e n t s   ) ; 
 	 	 t h i s . _ r e f r e s h ( ) ; 
 
 	 	 / /   t u r n i n g   o f f   a u t o c o m p l e t e   p r e v e n t s   t h e   b r o w s e r   f r o m   r e m e m b e r i n g   t h e 
 	 	 / /   v a l u e   w h e n   n a v i g a t i n g   t h r o u g h   h i s t o r y ,   s o   w e   r e - e n a b l e   a u t o c o m p l e t e 
 	 	 / /   i f   t h e   p a g e   i s   u n l o a d e d   b e f o r e   t h e   w i d g e t   i s   d e s t r o y e d .   # 7 7 9 0 
 	 	 t h i s . _ o n (   t h i s . w i n d o w ,   { 
 	 	 	 b e f o r e u n l o a d :   f u n c t i o n ( )   { 
 	 	 	 	 t h i s . e l e m e n t . r e m o v e A t t r (   " a u t o c o m p l e t e "   ) ; 
 	 	 	 } 
 	 	 } ) ; 
 	 } , 
 
 	 _ g e t C r e a t e O p t i o n s :   f u n c t i o n ( )   { 
 	 	 v a r   o p t i o n s   =   { } , 
 	 	 	 e l e m e n t   =   t h i s . e l e m e n t ; 
 
 	 	 $ . e a c h (   [   " m i n " ,   " m a x " ,   " s t e p "   ] ,   f u n c t i o n (   i ,   o p t i o n   )   { 
 	 	 	 v a r   v a l u e   =   e l e m e n t . a t t r (   o p t i o n   ) ; 
 	 	 	 i f   (   v a l u e   ! = =   u n d e f i n e d   & &   v a l u e . l e n g t h   )   { 
 	 	 	 	 o p t i o n s [   o p t i o n   ]   =   v a l u e ; 
 	 	 	 } 
 	 	 } ) ; 
 
 	 	 r e t u r n   o p t i o n s ; 
 	 } , 
 
 	 _ e v e n t s :   { 
 	 	 k e y d o w n :   f u n c t i o n (   e v e n t   )   { 
 	 	 	 i f   (   t h i s . _ s t a r t (   e v e n t   )   & &   t h i s . _ k e y d o w n (   e v e n t   )   )   { 
 	 	 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 	 	 	 } 
 	 	 } , 
 	 	 k e y u p :   " _ s t o p " , 
 	 	 f o c u s :   f u n c t i o n ( )   { 
 	 	 	 t h i s . p r e v i o u s   =   t h i s . e l e m e n t . v a l ( ) ; 
 	 	 } , 
 	 	 b l u r :   f u n c t i o n (   e v e n t   )   { 
 	 	 	 i f   (   t h i s . c a n c e l B l u r   )   { 
 	 	 	 	 d e l e t e   t h i s . c a n c e l B l u r ; 
 	 	 	 	 r e t u r n ; 
 	 	 	 } 
 
 	 	 	 t h i s . _ s t o p ( ) ; 
 	 	 	 t h i s . _ r e f r e s h ( ) ; 
 	 	 	 i f   (   t h i s . p r e v i o u s   ! = =   t h i s . e l e m e n t . v a l ( )   )   { 
 	 	 	 	 t h i s . _ t r i g g e r (   " c h a n g e " ,   e v e n t   ) ; 
 	 	 	 } 
 	 	 } , 
 	 	 m o u s e w h e e l :   f u n c t i o n (   e v e n t ,   d e l t a   )   { 
 	 	 	 i f   (   ! d e l t a   )   { 
 	 	 	 	 r e t u r n ; 
 	 	 	 } 
 	 	 	 i f   (   ! t h i s . s p i n n i n g   & &   ! t h i s . _ s t a r t (   e v e n t   )   )   { 
 	 	 	 	 r e t u r n   f a l s e ; 
 	 	 	 } 
 
 	 	 	 t h i s . _ s p i n (   ( d e l t a   >   0   ?   1   :   - 1 )   *   t h i s . o p t i o n s . s t e p ,   e v e n t   ) ; 
 	 	 	 c l e a r T i m e o u t (   t h i s . m o u s e w h e e l T i m e r   ) ; 
 	 	 	 t h i s . m o u s e w h e e l T i m e r   =   t h i s . _ d e l a y ( f u n c t i o n ( )   { 
 	 	 	 	 i f   (   t h i s . s p i n n i n g   )   { 
 	 	 	 	 	 t h i s . _ s t o p (   e v e n t   ) ; 
 	 	 	 	 } 
 	 	 	 } ,   1 0 0   ) ; 
 	 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 	 	 } , 
 	 	 " m o u s e d o w n   . u i - s p i n n e r - b u t t o n " :   f u n c t i o n (   e v e n t   )   { 
 	 	 	 v a r   p r e v i o u s ; 
 
 	 	 	 / /   W e   n e v e r   w a n t   t h e   b u t t o n s   t o   h a v e   f o c u s ;   w h e n e v e r   t h e   u s e r   i s 
 	 	 	 / /   i n t e r a c t i n g   w i t h   t h e   s p i n n e r ,   t h e   f o c u s   s h o u l d   b e   o n   t h e   i n p u t . 
 	 	 	 / /   I f   t h e   i n p u t   i s   f o c u s e d   t h e n   t h i s . p r e v i o u s   i s   p r o p e r l y   s e t   f r o m 
 	 	 	 / /   w h e n   t h e   i n p u t   f i r s t   r e c e i v e d   f o c u s .   I f   t h e   i n p u t   i s   n o t   f o c u s e d 
 	 	 	 / /   t h e n   w e   n e e d   t o   s e t   t h i s . p r e v i o u s   b a s e d   o n   t h e   v a l u e   b e f o r e   s p i n n i n g . 
 	 	 	 p r e v i o u s   =   t h i s . e l e m e n t [ 0 ]   = = =   t h i s . d o c u m e n t [ 0 ] . a c t i v e E l e m e n t   ? 
 	 	 	 	 t h i s . p r e v i o u s   :   t h i s . e l e m e n t . v a l ( ) ; 
 	 	 	 f u n c t i o n   c h e c k F o c u s ( )   { 
 	 	 	 	 v a r   i s A c t i v e   =   t h i s . e l e m e n t [ 0 ]   = = =   t h i s . d o c u m e n t [ 0 ] . a c t i v e E l e m e n t ; 
 	 	 	 	 i f   (   ! i s A c t i v e   )   { 
 	 	 	 	 	 t h i s . e l e m e n t . f o c u s ( ) ; 
 	 	 	 	 	 t h i s . p r e v i o u s   =   p r e v i o u s ; 
 	 	 	 	 	 / /   s u p p o r t :   I E 
 	 	 	 	 	 / /   I E   s e t s   f o c u s   a s y n c h r o n o u s l y ,   s o   w e   n e e d   t o   c h e c k   i f   f o c u s 
 	 	 	 	 	 / /   m o v e d   o f f   o f   t h e   i n p u t   b e c a u s e   t h e   u s e r   c l i c k e d   o n   t h e   b u t t o n . 
 	 	 	 	 	 t h i s . _ d e l a y ( f u n c t i o n ( )   { 
 	 	 	 	 	 	 t h i s . p r e v i o u s   =   p r e v i o u s ; 
 	 	 	 	 	 } ) ; 
 	 	 	 	 } 
 	 	 	 } 
 
 	 	 	 / /   e n s u r e   f o c u s   i s   o n   ( o r   s t a y s   o n )   t h e   t e x t   f i e l d 
 	 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 	 	 	 c h e c k F o c u s . c a l l (   t h i s   ) ; 
 
 	 	 	 / /   s u p p o r t :   I E 
 	 	 	 / /   I E   d o e s n ' t   p r e v e n t   m o v i n g   f o c u s   e v e n   w i t h   e v e n t . p r e v e n t D e f a u l t ( ) 
 	 	 	 / /   s o   w e   s e t   a   f l a g   t o   k n o w   w h e n   w e   s h o u l d   i g n o r e   t h e   b l u r   e v e n t 
 	 	 	 / /   a n d   c h e c k   ( a g a i n )   i f   f o c u s   m o v e d   o f f   o f   t h e   i n p u t . 
 	 	 	 t h i s . c a n c e l B l u r   =   t r u e ; 
 	 	 	 t h i s . _ d e l a y ( f u n c t i o n ( )   { 
 	 	 	 	 d e l e t e   t h i s . c a n c e l B l u r ; 
 	 	 	 	 c h e c k F o c u s . c a l l (   t h i s   ) ; 
 	 	 	 } ) ; 
 
 	 	 	 i f   (   t h i s . _ s t a r t (   e v e n t   )   = = =   f a l s e   )   { 
 	 	 	 	 r e t u r n ; 
 	 	 	 } 
 
 	 	 	 t h i s . _ r e p e a t (   n u l l ,   $ (   e v e n t . c u r r e n t T a r g e t   ) . h a s C l a s s (   " u i - s p i n n e r - u p "   )   ?   1   :   - 1 ,   e v e n t   ) ; 
 	 	 } , 
 	 	 " m o u s e u p   . u i - s p i n n e r - b u t t o n " :   " _ s t o p " , 
 	 	 " m o u s e e n t e r   . u i - s p i n n e r - b u t t o n " :   f u n c t i o n (   e v e n t   )   { 
 	 	 	 / /   b u t t o n   w i l l   a d d   u i - s t a t e - a c t i v e   i f   m o u s e   w a s   d o w n   w h i l e   m o u s e l e a v e   a n d   k e p t   d o w n 
 	 	 	 i f   (   ! $ (   e v e n t . c u r r e n t T a r g e t   ) . h a s C l a s s (   " u i - s t a t e - a c t i v e "   )   )   { 
 	 	 	 	 r e t u r n ; 
 	 	 	 } 
 
 	 	 	 i f   (   t h i s . _ s t a r t (   e v e n t   )   = = =   f a l s e   )   { 
 	 	 	 	 r e t u r n   f a l s e ; 
 	 	 	 } 
 	 	 	 t h i s . _ r e p e a t (   n u l l ,   $ (   e v e n t . c u r r e n t T a r g e t   ) . h a s C l a s s (   " u i - s p i n n e r - u p "   )   ?   1   :   - 1 ,   e v e n t   ) ; 
 	 	 } , 
 	 	 / /   T O D O :   d o   w e   r e a l l y   w a n t   t o   c o n s i d e r   t h i s   a   s t o p ? 
 	 	 / /   s h o u l d n ' t   w e   j u s t   s t o p   t h e   r e p e a t e r   a n d   w a i t   u n t i l   m o u s e u p   b e f o r e 
 	 	 / /   w e   t r i g g e r   t h e   s t o p   e v e n t ? 
 	 	 " m o u s e l e a v e   . u i - s p i n n e r - b u t t o n " :   " _ s t o p " 
 	 } , 
 
 	 _ d r a w :   f u n c t i o n ( )   { 
 	 	 v a r   u i S p i n n e r   =   t h i s . u i S p i n n e r   =   t h i s . e l e m e n t 
 	 	 	 . a d d C l a s s (   " u i - s p i n n e r - i n p u t "   ) 
 	 	 	 . a t t r (   " a u t o c o m p l e t e " ,   " o f f "   ) 
 	 	 	 . w r a p (   t h i s . _ u i S p i n n e r H t m l ( )   ) 
 	 	 	 . p a r e n t ( ) 
 	 	 	 	 / /   a d d   b u t t o n s 
 	 	 	 	 . a p p e n d (   t h i s . _ b u t t o n H t m l ( )   ) ; 
 
 	 	 t h i s . e l e m e n t . a t t r (   " r o l e " ,   " s p i n b u t t o n "   ) ; 
 
 	 	 / /   b u t t o n   b i n d i n g s 
 	 	 t h i s . b u t t o n s   =   u i S p i n n e r . f i n d (   " . u i - s p i n n e r - b u t t o n "   ) 
 	 	 	 . a t t r (   " t a b I n d e x " ,   - 1   ) 
 	 	 	 . b u t t o n ( ) 
 	 	 	 . r e m o v e C l a s s (   " u i - c o r n e r - a l l "   ) ; 
 
 	 	 / /   I E   6   d o e s n ' t   u n d e r s t a n d   h e i g h t :   5 0 %   f o r   t h e   b u t t o n s 
 	 	 / /   u n l e s s   t h e   w r a p p e r   h a s   a n   e x p l i c i t   h e i g h t 
 	 	 i f   (   t h i s . b u t t o n s . h e i g h t ( )   >   M a t h . c e i l (   u i S p i n n e r . h e i g h t ( )   *   0 . 5   )   & & 
 	 	 	 	 u i S p i n n e r . h e i g h t ( )   >   0   )   { 
 	 	 	 u i S p i n n e r . h e i g h t (   u i S p i n n e r . h e i g h t ( )   ) ; 
 	 	 } 
 
 	 	 / /   d i s a b l e   s p i n n e r   i f   e l e m e n t   w a s   a l r e a d y   d i s a b l e d 
 	 	 i f   (   t h i s . o p t i o n s . d i s a b l e d   )   { 
 	 	 	 t h i s . d i s a b l e ( ) ; 
 	 	 } 
 	 } , 
 
 	 _ k e y d o w n :   f u n c t i o n (   e v e n t   )   { 
 	 	 v a r   o p t i o n s   =   t h i s . o p t i o n s , 
 	 	 	 k e y C o d e   =   $ . u i . k e y C o d e ; 
 
 	 	 s w i t c h   (   e v e n t . k e y C o d e   )   { 
 	 	 c a s e   k e y C o d e . U P : 
 	 	 	 t h i s . _ r e p e a t (   n u l l ,   1 ,   e v e n t   ) ; 
 	 	 	 r e t u r n   t r u e ; 
 	 	 c a s e   k e y C o d e . D O W N : 
 	 	 	 t h i s . _ r e p e a t (   n u l l ,   - 1 ,   e v e n t   ) ; 
 	 	 	 r e t u r n   t r u e ; 
 	 	 c a s e   k e y C o d e . P A G E _ U P : 
 	 	 	 t h i s . _ r e p e a t (   n u l l ,   o p t i o n s . p a g e ,   e v e n t   ) ; 
 	 	 	 r e t u r n   t r u e ; 
 	 	 c a s e   k e y C o d e . P A G E _ D O W N : 
 	 	 	 t h i s . _ r e p e a t (   n u l l ,   - o p t i o n s . p a g e ,   e v e n t   ) ; 
 	 	 	 r e t u r n   t r u e ; 
 	 	 } 
 
 	 	 r e t u r n   f a l s e ; 
 	 } , 
 
 	 _ u i S p i n n e r H t m l :   f u n c t i o n ( )   { 
 	 	 r e t u r n   " < s p a n   c l a s s = ' u i - s p i n n e r   u i - w i d g e t   u i - w i d g e t - c o n t e n t   u i - c o r n e r - a l l ' > < / s p a n > " ; 
 	 } , 
 
 	 _ b u t t o n H t m l :   f u n c t i o n ( )   { 
 	 	 r e t u r n   " "   + 
 	 	 	 " < a   c l a s s = ' u i - s p i n n e r - b u t t o n   u i - s p i n n e r - u p   u i - c o r n e r - t r ' > "   + 
 	 	 	 	 " < s p a n   c l a s s = ' u i - i c o n   "   +   t h i s . o p t i o n s . i c o n s . u p   +   " ' > & # 9 6 5 0 ; < / s p a n > "   + 
 	 	 	 " < / a > "   + 
 	 	 	 " < a   c l a s s = ' u i - s p i n n e r - b u t t o n   u i - s p i n n e r - d o w n   u i - c o r n e r - b r ' > "   + 
 	 	 	 	 " < s p a n   c l a s s = ' u i - i c o n   "   +   t h i s . o p t i o n s . i c o n s . d o w n   +   " ' > & # 9 6 6 0 ; < / s p a n > "   + 
 	 	 	 " < / a > " ; 
 	 } , 
 
 	 _ s t a r t :   f u n c t i o n (   e v e n t   )   { 
 	 	 i f   (   ! t h i s . s p i n n i n g   & &   t h i s . _ t r i g g e r (   " s t a r t " ,   e v e n t   )   = = =   f a l s e   )   { 
 	 	 	 r e t u r n   f a l s e ; 
 	 	 } 
 
 	 	 i f   (   ! t h i s . c o u n t e r   )   { 
 	 	 	 t h i s . c o u n t e r   =   1 ; 
 	 	 } 
 	 	 t h i s . s p i n n i n g   =   t r u e ; 
 	 	 r e t u r n   t r u e ; 
 	 } , 
 
 	 _ r e p e a t :   f u n c t i o n (   i ,   s t e p s ,   e v e n t   )   { 
 	 	 i   =   i   | |   5 0 0 ; 
 
 	 	 c l e a r T i m e o u t (   t h i s . t i m e r   ) ; 
 	 	 t h i s . t i m e r   =   t h i s . _ d e l a y ( f u n c t i o n ( )   { 
 	 	 	 t h i s . _ r e p e a t (   4 0 ,   s t e p s ,   e v e n t   ) ; 
 	 	 } ,   i   ) ; 
 
 	 	 t h i s . _ s p i n (   s t e p s   *   t h i s . o p t i o n s . s t e p ,   e v e n t   ) ; 
 	 } , 
 
 	 _ s p i n :   f u n c t i o n (   s t e p ,   e v e n t   )   { 
 	 	 v a r   v a l u e   =   t h i s . v a l u e ( )   | |   0 ; 
 
 	 	 i f   (   ! t h i s . c o u n t e r   )   { 
 	 	 	 t h i s . c o u n t e r   =   1 ; 
 	 	 } 
 
 	 	 v a l u e   =   t h i s . _ a d j u s t V a l u e (   v a l u e   +   s t e p   *   t h i s . _ i n c r e m e n t (   t h i s . c o u n t e r   )   ) ; 
 
 	 	 i f   (   ! t h i s . s p i n n i n g   | |   t h i s . _ t r i g g e r (   " s p i n " ,   e v e n t ,   {   v a l u e :   v a l u e   }   )   ! = =   f a l s e )   { 
 	 	 	 t h i s . _ v a l u e (   v a l u e   ) ; 
 	 	 	 t h i s . c o u n t e r + + ; 
 	 	 } 
 	 } , 
 
 	 _ i n c r e m e n t :   f u n c t i o n (   i   )   { 
 	 	 v a r   i n c r e m e n t a l   =   t h i s . o p t i o n s . i n c r e m e n t a l ; 
 
 	 	 i f   (   i n c r e m e n t a l   )   { 
 	 	 	 r e t u r n   $ . i s F u n c t i o n (   i n c r e m e n t a l   )   ? 
 	 	 	 	 i n c r e m e n t a l (   i   )   : 
 	 	 	 	 M a t h . f l o o r (   i * i * i / 5 0 0 0 0   -   i * i / 5 0 0   +   1 7 * i / 2 0 0   +   1   ) ; 
 	 	 } 
 
 	 	 r e t u r n   1 ; 
 	 } , 
 
 	 _ p r e c i s i o n :   f u n c t i o n ( )   { 
 	 	 v a r   p r e c i s i o n   =   t h i s . _ p r e c i s i o n O f (   t h i s . o p t i o n s . s t e p   ) ; 
 	 	 i f   (   t h i s . o p t i o n s . m i n   ! = =   n u l l   )   { 
 	 	 	 p r e c i s i o n   =   M a t h . m a x (   p r e c i s i o n ,   t h i s . _ p r e c i s i o n O f (   t h i s . o p t i o n s . m i n   )   ) ; 
 	 	 } 
 	 	 r e t u r n   p r e c i s i o n ; 
 	 } , 
 
 	 _ p r e c i s i o n O f :   f u n c t i o n (   n u m   )   { 
 	 	 v a r   s t r   =   n u m . t o S t r i n g ( ) , 
 	 	 	 d e c i m a l   =   s t r . i n d e x O f (   " . "   ) ; 
 	 	 r e t u r n   d e c i m a l   = = =   - 1   ?   0   :   s t r . l e n g t h   -   d e c i m a l   -   1 ; 
 	 } , 
 
 	 _ a d j u s t V a l u e :   f u n c t i o n (   v a l u e   )   { 
 	 	 v a r   b a s e ,   a b o v e M i n , 
 	 	 	 o p t i o n s   =   t h i s . o p t i o n s ; 
 
 	 	 / /   m a k e   s u r e   w e ' r e   a t   a   v a l i d   s t e p 
 	 	 / /   -   f i n d   o u t   w h e r e   w e   a r e   r e l a t i v e   t o   t h e   b a s e   ( m i n   o r   0 ) 
 	 	 b a s e   =   o p t i o n s . m i n   ! = =   n u l l   ?   o p t i o n s . m i n   :   0 ; 
 	 	 a b o v e M i n   =   v a l u e   -   b a s e ; 
 	 	 / /   -   r o u n d   t o   t h e   n e a r e s t   s t e p 
 	 	 a b o v e M i n   =   M a t h . r o u n d ( a b o v e M i n   /   o p t i o n s . s t e p )   *   o p t i o n s . s t e p ; 
 	 	 / /   -   r o u n d i n g   i s   b a s e d   o n   0 ,   s o   a d j u s t   b a c k   t o   o u r   b a s e 
 	 	 v a l u e   =   b a s e   +   a b o v e M i n ; 
 
 	 	 / /   f i x   p r e c i s i o n   f r o m   b a d   J S   f l o a t i n g   p o i n t   m a t h 
 	 	 v a l u e   =   p a r s e F l o a t (   v a l u e . t o F i x e d (   t h i s . _ p r e c i s i o n ( )   )   ) ; 
 
 	 	 / /   c l a m p   t h e   v a l u e 
 	 	 i f   (   o p t i o n s . m a x   ! = =   n u l l   & &   v a l u e   >   o p t i o n s . m a x )   { 
 	 	 	 r e t u r n   o p t i o n s . m a x ; 
 	 	 } 
 	 	 i f   (   o p t i o n s . m i n   ! = =   n u l l   & &   v a l u e   <   o p t i o n s . m i n   )   { 
 	 	 	 r e t u r n   o p t i o n s . m i n ; 
 	 	 } 
 
 	 	 r e t u r n   v a l u e ; 
 	 } , 
 
 	 _ s t o p :   f u n c t i o n (   e v e n t   )   { 
 	 	 i f   (   ! t h i s . s p i n n i n g   )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 c l e a r T i m e o u t (   t h i s . t i m e r   ) ; 
 	 	 c l e a r T i m e o u t (   t h i s . m o u s e w h e e l T i m e r   ) ; 
 	 	 t h i s . c o u n t e r   =   0 ; 
 	 	 t h i s . s p i n n i n g   =   f a l s e ; 
 	 	 t h i s . _ t r i g g e r (   " s t o p " ,   e v e n t   ) ; 
 	 } , 
 
 	 _ s e t O p t i o n :   f u n c t i o n (   k e y ,   v a l u e   )   { 
 	 	 i f   (   k e y   = = =   " c u l t u r e "   | |   k e y   = = =   " n u m b e r F o r m a t "   )   { 
 	 	 	 v a r   p r e v V a l u e   =   t h i s . _ p a r s e (   t h i s . e l e m e n t . v a l ( )   ) ; 
 	 	 	 t h i s . o p t i o n s [   k e y   ]   =   v a l u e ; 
 	 	 	 t h i s . e l e m e n t . v a l (   t h i s . _ f o r m a t (   p r e v V a l u e   )   ) ; 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 i f   (   k e y   = = =   " m a x "   | |   k e y   = = =   " m i n "   | |   k e y   = = =   " s t e p "   )   { 
 	 	 	 i f   (   t y p e o f   v a l u e   = = =   " s t r i n g "   )   { 
 	 	 	 	 v a l u e   =   t h i s . _ p a r s e (   v a l u e   ) ; 
 	 	 	 } 
 	 	 } 
 	 	 i f   (   k e y   = = =   " i c o n s "   )   { 
 	 	 	 t h i s . b u t t o n s . f i r s t ( ) . f i n d (   " . u i - i c o n "   ) 
 	 	 	 	 . r e m o v e C l a s s (   t h i s . o p t i o n s . i c o n s . u p   ) 
 	 	 	 	 . a d d C l a s s (   v a l u e . u p   ) ; 
 	 	 	 t h i s . b u t t o n s . l a s t ( ) . f i n d (   " . u i - i c o n "   ) 
 	 	 	 	 . r e m o v e C l a s s (   t h i s . o p t i o n s . i c o n s . d o w n   ) 
 	 	 	 	 . a d d C l a s s (   v a l u e . d o w n   ) ; 
 	 	 } 
 
 	 	 t h i s . _ s u p e r (   k e y ,   v a l u e   ) ; 
 
 	 	 i f   (   k e y   = = =   " d i s a b l e d "   )   { 
 	 	 	 i f   (   v a l u e   )   { 
 	 	 	 	 t h i s . e l e m e n t . p r o p (   " d i s a b l e d " ,   t r u e   ) ; 
 	 	 	 	 t h i s . b u t t o n s . b u t t o n (   " d i s a b l e "   ) ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 t h i s . e l e m e n t . p r o p (   " d i s a b l e d " ,   f a l s e   ) ; 
 	 	 	 	 t h i s . b u t t o n s . b u t t o n (   " e n a b l e "   ) ; 
 	 	 	 } 
 	 	 } 
 	 } , 
 
 	 _ s e t O p t i o n s :   m o d i f i e r ( f u n c t i o n (   o p t i o n s   )   { 
 	 	 t h i s . _ s u p e r (   o p t i o n s   ) ; 
 	 	 t h i s . _ v a l u e (   t h i s . e l e m e n t . v a l ( )   ) ; 
 	 } ) , 
 
 	 _ p a r s e :   f u n c t i o n (   v a l   )   { 
 	 	 i f   (   t y p e o f   v a l   = = =   " s t r i n g "   & &   v a l   ! = =   " "   )   { 
 	 	 	 v a l   =   w i n d o w . G l o b a l i z e   & &   t h i s . o p t i o n s . n u m b e r F o r m a t   ? 
 	 	 	 	 G l o b a l i z e . p a r s e F l o a t (   v a l ,   1 0 ,   t h i s . o p t i o n s . c u l t u r e   )   :   + v a l ; 
 	 	 } 
 	 	 r e t u r n   v a l   = = =   " "   | |   i s N a N (   v a l   )   ?   n u l l   :   v a l ; 
 	 } , 
 
 	 _ f o r m a t :   f u n c t i o n (   v a l u e   )   { 
 	 	 i f   (   v a l u e   = = =   " "   )   { 
 	 	 	 r e t u r n   " " ; 
 	 	 } 
 	 	 r e t u r n   w i n d o w . G l o b a l i z e   & &   t h i s . o p t i o n s . n u m b e r F o r m a t   ? 
 	 	 	 G l o b a l i z e . f o r m a t (   v a l u e ,   t h i s . o p t i o n s . n u m b e r F o r m a t ,   t h i s . o p t i o n s . c u l t u r e   )   : 
 	 	 	 v a l u e ; 
 	 } , 
 
 	 _ r e f r e s h :   f u n c t i o n ( )   { 
 	 	 t h i s . e l e m e n t . a t t r ( { 
 	 	 	 " a r i a - v a l u e m i n " :   t h i s . o p t i o n s . m i n , 
 	 	 	 " a r i a - v a l u e m a x " :   t h i s . o p t i o n s . m a x , 
 	 	 	 / /   T O D O :   w h a t   s h o u l d   w e   d o   w i t h   v a l u e s   t h a t   c a n ' t   b e   p a r s e d ? 
 	 	 	 " a r i a - v a l u e n o w " :   t h i s . _ p a r s e (   t h i s . e l e m e n t . v a l ( )   ) 
 	 	 } ) ; 
 	 } , 
 
 	 / /   u p d a t e   t h e   v a l u e   w i t h o u t   t r i g g e r i n g   c h a n g e 
 	 _ v a l u e :   f u n c t i o n (   v a l u e ,   a l l o w A n y   )   { 
 	 	 v a r   p a r s e d ; 
 	 	 i f   (   v a l u e   ! = =   " "   )   { 
 	 	 	 p a r s e d   =   t h i s . _ p a r s e (   v a l u e   ) ; 
 	 	 	 i f   (   p a r s e d   ! = =   n u l l   )   { 
 	 	 	 	 i f   (   ! a l l o w A n y   )   { 
 	 	 	 	 	 p a r s e d   =   t h i s . _ a d j u s t V a l u e (   p a r s e d   ) ; 
 	 	 	 	 } 
 	 	 	 	 v a l u e   =   t h i s . _ f o r m a t (   p a r s e d   ) ; 
 	 	 	 } 
 	 	 } 
 	 	 t h i s . e l e m e n t . v a l (   v a l u e   ) ; 
 	 	 t h i s . _ r e f r e s h ( ) ; 
 	 } , 
 
 	 _ d e s t r o y :   f u n c t i o n ( )   { 
 	 	 t h i s . e l e m e n t 
 	 	 	 . r e m o v e C l a s s (   " u i - s p i n n e r - i n p u t "   ) 
 	 	 	 . p r o p (   " d i s a b l e d " ,   f a l s e   ) 
 	 	 	 . r e m o v e A t t r (   " a u t o c o m p l e t e "   ) 
 	 	 	 . r e m o v e A t t r (   " r o l e "   ) 
 	 	 	 . r e m o v e A t t r (   " a r i a - v a l u e m i n "   ) 
 	 	 	 . r e m o v e A t t r (   " a r i a - v a l u e m a x "   ) 
 	 	 	 . r e m o v e A t t r (   " a r i a - v a l u e n o w "   ) ; 
 	 	 t h i s . u i S p i n n e r . r e p l a c e W i t h (   t h i s . e l e m e n t   ) ; 
 	 } , 
 
 	 s t e p U p :   m o d i f i e r ( f u n c t i o n (   s t e p s   )   { 
 	 	 t h i s . _ s t e p U p (   s t e p s   ) ; 
 	 } ) , 
 	 _ s t e p U p :   f u n c t i o n (   s t e p s   )   { 
 	 	 i f   (   t h i s . _ s t a r t ( )   )   { 
 	 	 	 t h i s . _ s p i n (   ( s t e p s   | |   1 )   *   t h i s . o p t i o n s . s t e p   ) ; 
 	 	 	 t h i s . _ s t o p ( ) ; 
 	 	 } 
 	 } , 
 
 	 s t e p D o w n :   m o d i f i e r ( f u n c t i o n (   s t e p s   )   { 
 	 	 t h i s . _ s t e p D o w n (   s t e p s   ) ; 
 	 } ) , 
 	 _ s t e p D o w n :   f u n c t i o n (   s t e p s   )   { 
 	 	 i f   (   t h i s . _ s t a r t ( )   )   { 
 	 	 	 t h i s . _ s p i n (   ( s t e p s   | |   1 )   *   - t h i s . o p t i o n s . s t e p   ) ; 
 	 	 	 t h i s . _ s t o p ( ) ; 
 	 	 } 
 	 } , 
 
 	 p a g e U p :   m o d i f i e r ( f u n c t i o n (   p a g e s   )   { 
 	 	 t h i s . _ s t e p U p (   ( p a g e s   | |   1 )   *   t h i s . o p t i o n s . p a g e   ) ; 
 	 } ) , 
 
 	 p a g e D o w n :   m o d i f i e r ( f u n c t i o n (   p a g e s   )   { 
 	 	 t h i s . _ s t e p D o w n (   ( p a g e s   | |   1 )   *   t h i s . o p t i o n s . p a g e   ) ; 
 	 } ) , 
 
 	 v a l u e :   f u n c t i o n (   n e w V a l   )   { 
 	 	 i f   (   ! a r g u m e n t s . l e n g t h   )   { 
 	 	 	 r e t u r n   t h i s . _ p a r s e (   t h i s . e l e m e n t . v a l ( )   ) ; 
 	 	 } 
 	 	 m o d i f i e r (   t h i s . _ v a l u e   ) . c a l l (   t h i s ,   n e w V a l   ) ; 
 	 } , 
 
 	 w i d g e t :   f u n c t i o n ( )   { 
 	 	 r e t u r n   t h i s . u i S p i n n e r ; 
 	 } 
 } ) ; 
 
 } (   j Q u e r y   )   ) ; 
 
 ( f u n c t i o n (   $ ,   u n d e f i n e d   )   { 
 
 v a r   t a b I d   =   0 , 
 	 r h a s h   =   / # . * $ / ; 
 
 f u n c t i o n   g e t N e x t T a b I d ( )   { 
 	 r e t u r n   + + t a b I d ; 
 } 
 
 f u n c t i o n   i s L o c a l (   a n c h o r   )   { 
 	 r e t u r n   a n c h o r . h a s h . l e n g t h   >   1   & & 
 	 	 d e c o d e U R I C o m p o n e n t (   a n c h o r . h r e f . r e p l a c e (   r h a s h ,   " "   )   )   = = = 
 	 	 	 d e c o d e U R I C o m p o n e n t (   l o c a t i o n . h r e f . r e p l a c e (   r h a s h ,   " "   )   ) ; 
 } 
 
 $ . w i d g e t (   " u i . t a b s " ,   { 
 	 v e r s i o n :   " 1 . 1 0 . 3 " , 
 	 d e l a y :   3 0 0 , 
 	 o p t i o n s :   { 
 	 	 a c t i v e :   n u l l , 
 	 	 c o l l a p s i b l e :   f a l s e , 
 	 	 e v e n t :   " c l i c k " , 
 	 	 h e i g h t S t y l e :   " c o n t e n t " , 
 	 	 h i d e :   n u l l , 
 	 	 s h o w :   n u l l , 
 
 	 	 / /   c a l l b a c k s 
 	 	 a c t i v a t e :   n u l l , 
 	 	 b e f o r e A c t i v a t e :   n u l l , 
 	 	 b e f o r e L o a d :   n u l l , 
 	 	 l o a d :   n u l l 
 	 } , 
 
 	 _ c r e a t e :   f u n c t i o n ( )   { 
 	 	 v a r   t h a t   =   t h i s , 
 	 	 	 o p t i o n s   =   t h i s . o p t i o n s ; 
 
 	 	 t h i s . r u n n i n g   =   f a l s e ; 
 
 	 	 t h i s . e l e m e n t 
 	 	 	 . a d d C l a s s (   " u i - t a b s   u i - w i d g e t   u i - w i d g e t - c o n t e n t   u i - c o r n e r - a l l "   ) 
 	 	 	 . t o g g l e C l a s s (   " u i - t a b s - c o l l a p s i b l e " ,   o p t i o n s . c o l l a p s i b l e   ) 
 	 	 	 / /   P r e v e n t   u s e r s   f r o m   f o c u s i n g   d i s a b l e d   t a b s   v i a   c l i c k 
 	 	 	 . d e l e g a t e (   " . u i - t a b s - n a v   >   l i " ,   " m o u s e d o w n "   +   t h i s . e v e n t N a m e s p a c e ,   f u n c t i o n (   e v e n t   )   { 
 	 	 	 	 i f   (   $ (   t h i s   ) . i s (   " . u i - s t a t e - d i s a b l e d "   )   )   { 
 	 	 	 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 	 	 	 	 } 
 	 	 	 } ) 
 	 	 	 / /   s u p p o r t :   I E   < 9 
 	 	 	 / /   P r e v e n t i n g   t h e   d e f a u l t   a c t i o n   i n   m o u s e d o w n   d o e s n ' t   p r e v e n t   I E 
 	 	 	 / /   f r o m   f o c u s i n g   t h e   e l e m e n t ,   s o   i f   t h e   a n c h o r   g e t s   f o c u s e d ,   b l u r . 
 	 	 	 / /   W e   d o n ' t   h a v e   t o   w o r r y   a b o u t   f o c u s i n g   t h e   p r e v i o u s l y   f o c u s e d 
 	 	 	 / /   e l e m e n t   s i n c e   c l i c k i n g   o n   a   n o n - f o c u s a b l e   e l e m e n t   s h o u l d   f o c u s 
 	 	 	 / /   t h e   b o d y   a n y w a y . 
 	 	 	 . d e l e g a t e (   " . u i - t a b s - a n c h o r " ,   " f o c u s "   +   t h i s . e v e n t N a m e s p a c e ,   f u n c t i o n ( )   { 
 	 	 	 	 i f   (   $ (   t h i s   ) . c l o s e s t (   " l i "   ) . i s (   " . u i - s t a t e - d i s a b l e d "   )   )   { 
 	 	 	 	 	 t h i s . b l u r ( ) ; 
 	 	 	 	 } 
 	 	 	 } ) ; 
 
 	 	 t h i s . _ p r o c e s s T a b s ( ) ; 
 	 	 o p t i o n s . a c t i v e   =   t h i s . _ i n i t i a l A c t i v e ( ) ; 
 
 	 	 / /   T a k e   d i s a b l i n g   t a b s   v i a   c l a s s   a t t r i b u t e   f r o m   H T M L 
 	 	 / /   i n t o   a c c o u n t   a n d   u p d a t e   o p t i o n   p r o p e r l y . 
 	 	 i f   (   $ . i s A r r a y (   o p t i o n s . d i s a b l e d   )   )   { 
 	 	 	 o p t i o n s . d i s a b l e d   =   $ . u n i q u e (   o p t i o n s . d i s a b l e d . c o n c a t ( 
 	 	 	 	 $ . m a p (   t h i s . t a b s . f i l t e r (   " . u i - s t a t e - d i s a b l e d "   ) ,   f u n c t i o n (   l i   )   { 
 	 	 	 	 	 r e t u r n   t h a t . t a b s . i n d e x (   l i   ) ; 
 	 	 	 	 } ) 
 	 	 	 )   ) . s o r t ( ) ; 
 	 	 } 
 
 	 	 / /   c h e c k   f o r   l e n g t h   a v o i d s   e r r o r   w h e n   i n i t i a l i z i n g   e m p t y   l i s t 
 	 	 i f   (   t h i s . o p t i o n s . a c t i v e   ! = =   f a l s e   & &   t h i s . a n c h o r s . l e n g t h   )   { 
 	 	 	 t h i s . a c t i v e   =   t h i s . _ f i n d A c t i v e (   o p t i o n s . a c t i v e   ) ; 
 	 	 }   e l s e   { 
 	 	 	 t h i s . a c t i v e   =   $ ( ) ; 
 	 	 } 
 
 	 	 t h i s . _ r e f r e s h ( ) ; 
 
 	 	 i f   (   t h i s . a c t i v e . l e n g t h   )   { 
 	 	 	 t h i s . l o a d (   o p t i o n s . a c t i v e   ) ; 
 	 	 } 
 	 } , 
 
 	 _ i n i t i a l A c t i v e :   f u n c t i o n ( )   { 
 	 	 v a r   a c t i v e   =   t h i s . o p t i o n s . a c t i v e , 
 	 	 	 c o l l a p s i b l e   =   t h i s . o p t i o n s . c o l l a p s i b l e , 
 	 	 	 l o c a t i o n H a s h   =   l o c a t i o n . h a s h . s u b s t r i n g (   1   ) ; 
 
 	 	 i f   (   a c t i v e   = = =   n u l l   )   { 
 	 	 	 / /   c h e c k   t h e   f r a g m e n t   i d e n t i f i e r   i n   t h e   U R L 
 	 	 	 i f   (   l o c a t i o n H a s h   )   { 
 	 	 	 	 t h i s . t a b s . e a c h ( f u n c t i o n (   i ,   t a b   )   { 
 	 	 	 	 	 i f   (   $ (   t a b   ) . a t t r (   " a r i a - c o n t r o l s "   )   = = =   l o c a t i o n H a s h   )   { 
 	 	 	 	 	 	 a c t i v e   =   i ; 
 	 	 	 	 	 	 r e t u r n   f a l s e ; 
 	 	 	 	 	 } 
 	 	 	 	 } ) ; 
 	 	 	 } 
 
 	 	 	 / /   c h e c k   f o r   a   t a b   m a r k e d   a c t i v e   v i a   a   c l a s s 
 	 	 	 i f   (   a c t i v e   = = =   n u l l   )   { 
 	 	 	 	 a c t i v e   =   t h i s . t a b s . i n d e x (   t h i s . t a b s . f i l t e r (   " . u i - t a b s - a c t i v e "   )   ) ; 
 	 	 	 } 
 
 	 	 	 / /   n o   a c t i v e   t a b ,   s e t   t o   f a l s e 
 	 	 	 i f   (   a c t i v e   = = =   n u l l   | |   a c t i v e   = = =   - 1   )   { 
 	 	 	 	 a c t i v e   =   t h i s . t a b s . l e n g t h   ?   0   :   f a l s e ; 
 	 	 	 } 
 	 	 } 
 
 	 	 / /   h a n d l e   n u m b e r s :   n e g a t i v e ,   o u t   o f   r a n g e 
 	 	 i f   (   a c t i v e   ! = =   f a l s e   )   { 
 	 	 	 a c t i v e   =   t h i s . t a b s . i n d e x (   t h i s . t a b s . e q (   a c t i v e   )   ) ; 
 	 	 	 i f   (   a c t i v e   = = =   - 1   )   { 
 	 	 	 	 a c t i v e   =   c o l l a p s i b l e   ?   f a l s e   :   0 ; 
 	 	 	 } 
 	 	 } 
 
 	 	 / /   d o n ' t   a l l o w   c o l l a p s i b l e :   f a l s e   a n d   a c t i v e :   f a l s e 
 	 	 i f   (   ! c o l l a p s i b l e   & &   a c t i v e   = = =   f a l s e   & &   t h i s . a n c h o r s . l e n g t h   )   { 
 	 	 	 a c t i v e   =   0 ; 
 	 	 } 
 
 	 	 r e t u r n   a c t i v e ; 
 	 } , 
 
 	 _ g e t C r e a t e E v e n t D a t a :   f u n c t i o n ( )   { 
 	 	 r e t u r n   { 
 	 	 	 t a b :   t h i s . a c t i v e , 
 	 	 	 p a n e l :   ! t h i s . a c t i v e . l e n g t h   ?   $ ( )   :   t h i s . _ g e t P a n e l F o r T a b (   t h i s . a c t i v e   ) 
 	 	 } ; 
 	 } , 
 
 	 _ t a b K e y d o w n :   f u n c t i o n (   e v e n t   )   { 
 	 	 / * j s h i n t   m a x c o m p l e x i t y : 1 5 * / 
 	 	 v a r   f o c u s e d T a b   =   $ (   t h i s . d o c u m e n t [ 0 ] . a c t i v e E l e m e n t   ) . c l o s e s t (   " l i "   ) , 
 	 	 	 s e l e c t e d I n d e x   =   t h i s . t a b s . i n d e x (   f o c u s e d T a b   ) , 
 	 	 	 g o i n g F o r w a r d   =   t r u e ; 
 
 	 	 i f   (   t h i s . _ h a n d l e P a g e N a v (   e v e n t   )   )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 s w i t c h   (   e v e n t . k e y C o d e   )   { 
 	 	 	 c a s e   $ . u i . k e y C o d e . R I G H T : 
 	 	 	 c a s e   $ . u i . k e y C o d e . D O W N : 
 	 	 	 	 s e l e c t e d I n d e x + + ; 
 	 	 	 	 b r e a k ; 
 	 	 	 c a s e   $ . u i . k e y C o d e . U P : 
 	 	 	 c a s e   $ . u i . k e y C o d e . L E F T : 
 	 	 	 	 g o i n g F o r w a r d   =   f a l s e ; 
 	 	 	 	 s e l e c t e d I n d e x - - ; 
 	 	 	 	 b r e a k ; 
 	 	 	 c a s e   $ . u i . k e y C o d e . E N D : 
 	 	 	 	 s e l e c t e d I n d e x   =   t h i s . a n c h o r s . l e n g t h   -   1 ; 
 	 	 	 	 b r e a k ; 
 	 	 	 c a s e   $ . u i . k e y C o d e . H O M E : 
 	 	 	 	 s e l e c t e d I n d e x   =   0 ; 
 	 	 	 	 b r e a k ; 
 	 	 	 c a s e   $ . u i . k e y C o d e . S P A C E : 
 	 	 	 	 / /   A c t i v a t e   o n l y ,   n o   c o l l a p s i n g 
 	 	 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 	 	 	 	 c l e a r T i m e o u t (   t h i s . a c t i v a t i n g   ) ; 
 	 	 	 	 t h i s . _ a c t i v a t e (   s e l e c t e d I n d e x   ) ; 
 	 	 	 	 r e t u r n ; 
 	 	 	 c a s e   $ . u i . k e y C o d e . E N T E R : 
 	 	 	 	 / /   T o g g l e   ( c a n c e l   d e l a y e d   a c t i v a t i o n ,   a l l o w   c o l l a p s i n g ) 
 	 	 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 	 	 	 	 c l e a r T i m e o u t (   t h i s . a c t i v a t i n g   ) ; 
 	 	 	 	 / /   D e t e r m i n e   i f   w e   s h o u l d   c o l l a p s e   o r   a c t i v a t e 
 	 	 	 	 t h i s . _ a c t i v a t e (   s e l e c t e d I n d e x   = = =   t h i s . o p t i o n s . a c t i v e   ?   f a l s e   :   s e l e c t e d I n d e x   ) ; 
 	 	 	 	 r e t u r n ; 
 	 	 	 d e f a u l t : 
 	 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 / /   F o c u s   t h e   a p p r o p r i a t e   t a b ,   b a s e d   o n   w h i c h   k e y   w a s   p r e s s e d 
 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 	 	 c l e a r T i m e o u t (   t h i s . a c t i v a t i n g   ) ; 
 	 	 s e l e c t e d I n d e x   =   t h i s . _ f o c u s N e x t T a b (   s e l e c t e d I n d e x ,   g o i n g F o r w a r d   ) ; 
 
 	 	 / /   N a v i g a t i n g   w i t h   c o n t r o l   k e y   w i l l   p r e v e n t   a u t o m a t i c   a c t i v a t i o n 
 	 	 i f   (   ! e v e n t . c t r l K e y   )   { 
 	 	 	 / /   U p d a t e   a r i a - s e l e c t e d   i m m e d i a t e l y   s o   t h a t   A T   t h i n k   t h e   t a b   i s   a l r e a d y   s e l e c t e d . 
 	 	 	 / /   O t h e r w i s e   A T   m a y   c o n f u s e   t h e   u s e r   b y   s t a t i n g   t h a t   t h e y   n e e d   t o   a c t i v a t e   t h e   t a b , 
 	 	 	 / /   b u t   t h e   t a b   w i l l   a l r e a d y   b e   a c t i v a t e d   b y   t h e   t i m e   t h e   a n n o u n c e m e n t   f i n i s h e s . 
 	 	 	 f o c u s e d T a b . a t t r (   " a r i a - s e l e c t e d " ,   " f a l s e "   ) ; 
 	 	 	 t h i s . t a b s . e q (   s e l e c t e d I n d e x   ) . a t t r (   " a r i a - s e l e c t e d " ,   " t r u e "   ) ; 
 
 	 	 	 t h i s . a c t i v a t i n g   =   t h i s . _ d e l a y ( f u n c t i o n ( )   { 
 	 	 	 	 t h i s . o p t i o n (   " a c t i v e " ,   s e l e c t e d I n d e x   ) ; 
 	 	 	 } ,   t h i s . d e l a y   ) ; 
 	 	 } 
 	 } , 
 
 	 _ p a n e l K e y d o w n :   f u n c t i o n (   e v e n t   )   { 
 	 	 i f   (   t h i s . _ h a n d l e P a g e N a v (   e v e n t   )   )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 / /   C t r l + u p   m o v e s   f o c u s   t o   t h e   c u r r e n t   t a b 
 	 	 i f   (   e v e n t . c t r l K e y   & &   e v e n t . k e y C o d e   = = =   $ . u i . k e y C o d e . U P   )   { 
 	 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 	 	 	 t h i s . a c t i v e . f o c u s ( ) ; 
 	 	 } 
 	 } , 
 
 	 / /   A l t + p a g e   u p / d o w n   m o v e s   f o c u s   t o   t h e   p r e v i o u s / n e x t   t a b   ( a n d   a c t i v a t e s ) 
 	 _ h a n d l e P a g e N a v :   f u n c t i o n (   e v e n t   )   { 
 	 	 i f   (   e v e n t . a l t K e y   & &   e v e n t . k e y C o d e   = = =   $ . u i . k e y C o d e . P A G E _ U P   )   { 
 	 	 	 t h i s . _ a c t i v a t e (   t h i s . _ f o c u s N e x t T a b (   t h i s . o p t i o n s . a c t i v e   -   1 ,   f a l s e   )   ) ; 
 	 	 	 r e t u r n   t r u e ; 
 	 	 } 
 	 	 i f   (   e v e n t . a l t K e y   & &   e v e n t . k e y C o d e   = = =   $ . u i . k e y C o d e . P A G E _ D O W N   )   { 
 	 	 	 t h i s . _ a c t i v a t e (   t h i s . _ f o c u s N e x t T a b (   t h i s . o p t i o n s . a c t i v e   +   1 ,   t r u e   )   ) ; 
 	 	 	 r e t u r n   t r u e ; 
 	 	 } 
 	 } , 
 
 	 _ f i n d N e x t T a b :   f u n c t i o n (   i n d e x ,   g o i n g F o r w a r d   )   { 
 	 	 v a r   l a s t T a b I n d e x   =   t h i s . t a b s . l e n g t h   -   1 ; 
 
 	 	 f u n c t i o n   c o n s t r a i n ( )   { 
 	 	 	 i f   (   i n d e x   >   l a s t T a b I n d e x   )   { 
 	 	 	 	 i n d e x   =   0 ; 
 	 	 	 } 
 	 	 	 i f   (   i n d e x   <   0   )   { 
 	 	 	 	 i n d e x   =   l a s t T a b I n d e x ; 
 	 	 	 } 
 	 	 	 r e t u r n   i n d e x ; 
 	 	 } 
 
 	 	 w h i l e   (   $ . i n A r r a y (   c o n s t r a i n ( ) ,   t h i s . o p t i o n s . d i s a b l e d   )   ! = =   - 1   )   { 
 	 	 	 i n d e x   =   g o i n g F o r w a r d   ?   i n d e x   +   1   :   i n d e x   -   1 ; 
 	 	 } 
 
 	 	 r e t u r n   i n d e x ; 
 	 } , 
 
 	 _ f o c u s N e x t T a b :   f u n c t i o n (   i n d e x ,   g o i n g F o r w a r d   )   { 
 	 	 i n d e x   =   t h i s . _ f i n d N e x t T a b (   i n d e x ,   g o i n g F o r w a r d   ) ; 
 	 	 t h i s . t a b s . e q (   i n d e x   ) . f o c u s ( ) ; 
 	 	 r e t u r n   i n d e x ; 
 	 } , 
 
 	 _ s e t O p t i o n :   f u n c t i o n (   k e y ,   v a l u e   )   { 
 	 	 i f   (   k e y   = = =   " a c t i v e "   )   { 
 	 	 	 / /   _ a c t i v a t e ( )   w i l l   h a n d l e   i n v a l i d   v a l u e s   a n d   u p d a t e   t h i s . o p t i o n s 
 	 	 	 t h i s . _ a c t i v a t e (   v a l u e   ) ; 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 i f   (   k e y   = = =   " d i s a b l e d "   )   { 
 	 	 	 / /   d o n ' t   u s e   t h e   w i d g e t   f a c t o r y ' s   d i s a b l e d   h a n d l i n g 
 	 	 	 t h i s . _ s e t u p D i s a b l e d (   v a l u e   ) ; 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 t h i s . _ s u p e r (   k e y ,   v a l u e ) ; 
 
 	 	 i f   (   k e y   = = =   " c o l l a p s i b l e "   )   { 
 	 	 	 t h i s . e l e m e n t . t o g g l e C l a s s (   " u i - t a b s - c o l l a p s i b l e " ,   v a l u e   ) ; 
 	 	 	 / /   S e t t i n g   c o l l a p s i b l e :   f a l s e   w h i l e   c o l l a p s e d ;   o p e n   f i r s t   p a n e l 
 	 	 	 i f   (   ! v a l u e   & &   t h i s . o p t i o n s . a c t i v e   = = =   f a l s e   )   { 
 	 	 	 	 t h i s . _ a c t i v a t e (   0   ) ; 
 	 	 	 } 
 	 	 } 
 
 	 	 i f   (   k e y   = = =   " e v e n t "   )   { 
 	 	 	 t h i s . _ s e t u p E v e n t s (   v a l u e   ) ; 
 	 	 } 
 
 	 	 i f   (   k e y   = = =   " h e i g h t S t y l e "   )   { 
 	 	 	 t h i s . _ s e t u p H e i g h t S t y l e (   v a l u e   ) ; 
 	 	 } 
 	 } , 
 
 	 _ t a b I d :   f u n c t i o n (   t a b   )   { 
 	 	 r e t u r n   t a b . a t t r (   " a r i a - c o n t r o l s "   )   | |   " u i - t a b s - "   +   g e t N e x t T a b I d ( ) ; 
 	 } , 
 
 	 _ s a n i t i z e S e l e c t o r :   f u n c t i o n (   h a s h   )   { 
 	 	 r e t u r n   h a s h   ?   h a s h . r e p l a c e (   / [ ! " $ % & ' ( ) * + , . \ / : ; < = > ? @ \ [ \ ] \ ^ ` { | } ~ ] / g ,   " \ \ $ & "   )   :   " " ; 
 	 } , 
 
 	 r e f r e s h :   f u n c t i o n ( )   { 
 	 	 v a r   o p t i o n s   =   t h i s . o p t i o n s , 
 	 	 	 l i s   =   t h i s . t a b l i s t . c h i l d r e n (   " : h a s ( a [ h r e f ] ) "   ) ; 
 
 	 	 / /   g e t   d i s a b l e d   t a b s   f r o m   c l a s s   a t t r i b u t e   f r o m   H T M L 
 	 	 / /   t h i s   w i l l   g e t   c o n v e r t e d   t o   a   b o o l e a n   i f   n e e d e d   i n   _ r e f r e s h ( ) 
 	 	 o p t i o n s . d i s a b l e d   =   $ . m a p (   l i s . f i l t e r (   " . u i - s t a t e - d i s a b l e d "   ) ,   f u n c t i o n (   t a b   )   { 
 	 	 	 r e t u r n   l i s . i n d e x (   t a b   ) ; 
 	 	 } ) ; 
 
 	 	 t h i s . _ p r o c e s s T a b s ( ) ; 
 
 	 	 / /   w a s   c o l l a p s e d   o r   n o   t a b s 
 	 	 i f   (   o p t i o n s . a c t i v e   = = =   f a l s e   | |   ! t h i s . a n c h o r s . l e n g t h   )   { 
 	 	 	 o p t i o n s . a c t i v e   =   f a l s e ; 
 	 	 	 t h i s . a c t i v e   =   $ ( ) ; 
 	 	 / /   w a s   a c t i v e ,   b u t   a c t i v e   t a b   i s   g o n e 
 	 	 }   e l s e   i f   (   t h i s . a c t i v e . l e n g t h   & &   ! $ . c o n t a i n s (   t h i s . t a b l i s t [   0   ] ,   t h i s . a c t i v e [   0   ]   )   )   { 
 	 	 	 / /   a l l   r e m a i n i n g   t a b s   a r e   d i s a b l e d 
 	 	 	 i f   (   t h i s . t a b s . l e n g t h   = = =   o p t i o n s . d i s a b l e d . l e n g t h   )   { 
 	 	 	 	 o p t i o n s . a c t i v e   =   f a l s e ; 
 	 	 	 	 t h i s . a c t i v e   =   $ ( ) ; 
 	 	 	 / /   a c t i v a t e   p r e v i o u s   t a b 
 	 	 	 }   e l s e   { 
 	 	 	 	 t h i s . _ a c t i v a t e (   t h i s . _ f i n d N e x t T a b (   M a t h . m a x (   0 ,   o p t i o n s . a c t i v e   -   1   ) ,   f a l s e   )   ) ; 
 	 	 	 } 
 	 	 / /   w a s   a c t i v e ,   a c t i v e   t a b   s t i l l   e x i s t s 
 	 	 }   e l s e   { 
 	 	 	 / /   m a k e   s u r e   a c t i v e   i n d e x   i s   c o r r e c t 
 	 	 	 o p t i o n s . a c t i v e   =   t h i s . t a b s . i n d e x (   t h i s . a c t i v e   ) ; 
 	 	 } 
 
 	 	 t h i s . _ r e f r e s h ( ) ; 
 	 } , 
 
 	 _ r e f r e s h :   f u n c t i o n ( )   { 
 	 	 t h i s . _ s e t u p D i s a b l e d (   t h i s . o p t i o n s . d i s a b l e d   ) ; 
 	 	 t h i s . _ s e t u p E v e n t s (   t h i s . o p t i o n s . e v e n t   ) ; 
 	 	 t h i s . _ s e t u p H e i g h t S t y l e (   t h i s . o p t i o n s . h e i g h t S t y l e   ) ; 
 
 	 	 t h i s . t a b s . n o t (   t h i s . a c t i v e   ) . a t t r ( { 
 	 	 	 " a r i a - s e l e c t e d " :   " f a l s e " , 
 	 	 	 t a b I n d e x :   - 1 
 	 	 } ) ; 
 	 	 t h i s . p a n e l s . n o t (   t h i s . _ g e t P a n e l F o r T a b (   t h i s . a c t i v e   )   ) 
 	 	 	 . h i d e ( ) 
 	 	 	 . a t t r ( { 
 	 	 	 	 " a r i a - e x p a n d e d " :   " f a l s e " , 
 	 	 	 	 " a r i a - h i d d e n " :   " t r u e " 
 	 	 	 } ) ; 
 
 	 	 / /   M a k e   s u r e   o n e   t a b   i s   i n   t h e   t a b   o r d e r 
 	 	 i f   (   ! t h i s . a c t i v e . l e n g t h   )   { 
 	 	 	 t h i s . t a b s . e q (   0   ) . a t t r (   " t a b I n d e x " ,   0   ) ; 
 	 	 }   e l s e   { 
 	 	 	 t h i s . a c t i v e 
 	 	 	 	 . a d d C l a s s (   " u i - t a b s - a c t i v e   u i - s t a t e - a c t i v e "   ) 
 	 	 	 	 . a t t r ( { 
 	 	 	 	 	 " a r i a - s e l e c t e d " :   " t r u e " , 
 	 	 	 	 	 t a b I n d e x :   0 
 	 	 	 	 } ) ; 
 	 	 	 t h i s . _ g e t P a n e l F o r T a b (   t h i s . a c t i v e   ) 
 	 	 	 	 . s h o w ( ) 
 	 	 	 	 . a t t r ( { 
 	 	 	 	 	 " a r i a - e x p a n d e d " :   " t r u e " , 
 	 	 	 	 	 " a r i a - h i d d e n " :   " f a l s e " 
 	 	 	 	 } ) ; 
 	 	 } 
 	 } , 
 
 	 _ p r o c e s s T a b s :   f u n c t i o n ( )   { 
 	 	 v a r   t h a t   =   t h i s ; 
 
 	 	 t h i s . t a b l i s t   =   t h i s . _ g e t L i s t ( ) 
 	 	 	 . a d d C l a s s (   " u i - t a b s - n a v   u i - h e l p e r - r e s e t   u i - h e l p e r - c l e a r f i x   u i - w i d g e t - h e a d e r   u i - c o r n e r - a l l "   ) 
 	 	 	 . a t t r (   " r o l e " ,   " t a b l i s t "   ) ; 
 
 	 	 t h i s . t a b s   =   t h i s . t a b l i s t . f i n d (   " >   l i : h a s ( a [ h r e f ] ) "   ) 
 	 	 	 . a d d C l a s s (   " u i - s t a t e - d e f a u l t   u i - c o r n e r - t o p "   ) 
 	 	 	 . a t t r ( { 
 	 	 	 	 r o l e :   " t a b " , 
 	 	 	 	 t a b I n d e x :   - 1 
 	 	 	 } ) ; 
 
 	 	 t h i s . a n c h o r s   =   t h i s . t a b s . m a p ( f u n c t i o n ( )   { 
 	 	 	 	 r e t u r n   $ (   " a " ,   t h i s   ) [   0   ] ; 
 	 	 	 } ) 
 	 	 	 . a d d C l a s s (   " u i - t a b s - a n c h o r "   ) 
 	 	 	 . a t t r ( { 
 	 	 	 	 r o l e :   " p r e s e n t a t i o n " , 
 	 	 	 	 t a b I n d e x :   - 1 
 	 	 	 } ) ; 
 
 	 	 t h i s . p a n e l s   =   $ ( ) ; 
 
 	 	 t h i s . a n c h o r s . e a c h ( f u n c t i o n (   i ,   a n c h o r   )   { 
 	 	 	 v a r   s e l e c t o r ,   p a n e l ,   p a n e l I d , 
 	 	 	 	 a n c h o r I d   =   $ (   a n c h o r   ) . u n i q u e I d ( ) . a t t r (   " i d "   ) , 
 	 	 	 	 t a b   =   $ (   a n c h o r   ) . c l o s e s t (   " l i "   ) , 
 	 	 	 	 o r i g i n a l A r i a C o n t r o l s   =   t a b . a t t r (   " a r i a - c o n t r o l s "   ) ; 
 
 	 	 	 / /   i n l i n e   t a b 
 	 	 	 i f   (   i s L o c a l (   a n c h o r   )   )   { 
 	 	 	 	 s e l e c t o r   =   a n c h o r . h a s h ; 
 	 	 	 	 p a n e l   =   t h a t . e l e m e n t . f i n d (   t h a t . _ s a n i t i z e S e l e c t o r (   s e l e c t o r   )   ) ; 
 	 	 	 / /   r e m o t e   t a b 
 	 	 	 }   e l s e   { 
 	 	 	 	 p a n e l I d   =   t h a t . _ t a b I d (   t a b   ) ; 
 	 	 	 	 s e l e c t o r   =   " # "   +   p a n e l I d ; 
 	 	 	 	 p a n e l   =   t h a t . e l e m e n t . f i n d (   s e l e c t o r   ) ; 
 	 	 	 	 i f   (   ! p a n e l . l e n g t h   )   { 
 	 	 	 	 	 p a n e l   =   t h a t . _ c r e a t e P a n e l (   p a n e l I d   ) ; 
 	 	 	 	 	 p a n e l . i n s e r t A f t e r (   t h a t . p a n e l s [   i   -   1   ]   | |   t h a t . t a b l i s t   ) ; 
 	 	 	 	 } 
 	 	 	 	 p a n e l . a t t r (   " a r i a - l i v e " ,   " p o l i t e "   ) ; 
 	 	 	 } 
 
 	 	 	 i f   (   p a n e l . l e n g t h )   { 
 	 	 	 	 t h a t . p a n e l s   =   t h a t . p a n e l s . a d d (   p a n e l   ) ; 
 	 	 	 } 
 	 	 	 i f   (   o r i g i n a l A r i a C o n t r o l s   )   { 
 	 	 	 	 t a b . d a t a (   " u i - t a b s - a r i a - c o n t r o l s " ,   o r i g i n a l A r i a C o n t r o l s   ) ; 
 	 	 	 } 
 	 	 	 t a b . a t t r ( { 
 	 	 	 	 " a r i a - c o n t r o l s " :   s e l e c t o r . s u b s t r i n g (   1   ) , 
 	 	 	 	 " a r i a - l a b e l l e d b y " :   a n c h o r I d 
 	 	 	 } ) ; 
 	 	 	 p a n e l . a t t r (   " a r i a - l a b e l l e d b y " ,   a n c h o r I d   ) ; 
 	 	 } ) ; 
 
 	 	 t h i s . p a n e l s 
 	 	 	 . a d d C l a s s (   " u i - t a b s - p a n e l   u i - w i d g e t - c o n t e n t   u i - c o r n e r - b o t t o m "   ) 
 	 	 	 . a t t r (   " r o l e " ,   " t a b p a n e l "   ) ; 
 	 } , 
 
 	 / /   a l l o w   o v e r r i d i n g   h o w   t o   f i n d   t h e   l i s t   f o r   r a r e   u s a g e   s c e n a r i o s   ( # 7 7 1 5 ) 
 	 _ g e t L i s t :   f u n c t i o n ( )   { 
 	 	 r e t u r n   t h i s . e l e m e n t . f i n d (   " o l , u l "   ) . e q (   0   ) ; 
 	 } , 
 
 	 _ c r e a t e P a n e l :   f u n c t i o n (   i d   )   { 
 	 	 r e t u r n   $ (   " < d i v > "   ) 
 	 	 	 . a t t r (   " i d " ,   i d   ) 
 	 	 	 . a d d C l a s s (   " u i - t a b s - p a n e l   u i - w i d g e t - c o n t e n t   u i - c o r n e r - b o t t o m "   ) 
 	 	 	 . d a t a (   " u i - t a b s - d e s t r o y " ,   t r u e   ) ; 
 	 } , 
 
 	 _ s e t u p D i s a b l e d :   f u n c t i o n (   d i s a b l e d   )   { 
 	 	 i f   (   $ . i s A r r a y (   d i s a b l e d   )   )   { 
 	 	 	 i f   (   ! d i s a b l e d . l e n g t h   )   { 
 	 	 	 	 d i s a b l e d   =   f a l s e ; 
 	 	 	 }   e l s e   i f   (   d i s a b l e d . l e n g t h   = = =   t h i s . a n c h o r s . l e n g t h   )   { 
 	 	 	 	 d i s a b l e d   =   t r u e ; 
 	 	 	 } 
 	 	 } 
 
 	 	 / /   d i s a b l e   t a b s 
 	 	 f o r   (   v a r   i   =   0 ,   l i ;   (   l i   =   t h i s . t a b s [   i   ]   ) ;   i + +   )   { 
 	 	 	 i f   (   d i s a b l e d   = = =   t r u e   | |   $ . i n A r r a y (   i ,   d i s a b l e d   )   ! = =   - 1   )   { 
 	 	 	 	 $ (   l i   ) 
 	 	 	 	 	 . a d d C l a s s (   " u i - s t a t e - d i s a b l e d "   ) 
 	 	 	 	 	 . a t t r (   " a r i a - d i s a b l e d " ,   " t r u e "   ) ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 $ (   l i   ) 
 	 	 	 	 	 . r e m o v e C l a s s (   " u i - s t a t e - d i s a b l e d "   ) 
 	 	 	 	 	 . r e m o v e A t t r (   " a r i a - d i s a b l e d "   ) ; 
 	 	 	 } 
 	 	 } 
 
 	 	 t h i s . o p t i o n s . d i s a b l e d   =   d i s a b l e d ; 
 	 } , 
 
 	 _ s e t u p E v e n t s :   f u n c t i o n (   e v e n t   )   { 
 	 	 v a r   e v e n t s   =   { 
 	 	 	 c l i c k :   f u n c t i o n (   e v e n t   )   { 
 	 	 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 	 	 	 } 
 	 	 } ; 
 	 	 i f   (   e v e n t   )   { 
 	 	 	 $ . e a c h (   e v e n t . s p l i t ( "   " ) ,   f u n c t i o n (   i n d e x ,   e v e n t N a m e   )   { 
 	 	 	 	 e v e n t s [   e v e n t N a m e   ]   =   " _ e v e n t H a n d l e r " ; 
 	 	 	 } ) ; 
 	 	 } 
 
 	 	 t h i s . _ o f f (   t h i s . a n c h o r s . a d d (   t h i s . t a b s   ) . a d d (   t h i s . p a n e l s   )   ) ; 
 	 	 t h i s . _ o n (   t h i s . a n c h o r s ,   e v e n t s   ) ; 
 	 	 t h i s . _ o n (   t h i s . t a b s ,   {   k e y d o w n :   " _ t a b K e y d o w n "   }   ) ; 
 	 	 t h i s . _ o n (   t h i s . p a n e l s ,   {   k e y d o w n :   " _ p a n e l K e y d o w n "   }   ) ; 
 
 	 	 t h i s . _ f o c u s a b l e (   t h i s . t a b s   ) ; 
 	 	 t h i s . _ h o v e r a b l e (   t h i s . t a b s   ) ; 
 	 } , 
 
 	 _ s e t u p H e i g h t S t y l e :   f u n c t i o n (   h e i g h t S t y l e   )   { 
 	 	 v a r   m a x H e i g h t , 
 	 	 	 p a r e n t   =   t h i s . e l e m e n t . p a r e n t ( ) ; 
 
 	 	 i f   (   h e i g h t S t y l e   = = =   " f i l l "   )   { 
 	 	 	 m a x H e i g h t   =   p a r e n t . h e i g h t ( ) ; 
 	 	 	 m a x H e i g h t   - =   t h i s . e l e m e n t . o u t e r H e i g h t ( )   -   t h i s . e l e m e n t . h e i g h t ( ) ; 
 
 	 	 	 t h i s . e l e m e n t . s i b l i n g s (   " : v i s i b l e "   ) . e a c h ( f u n c t i o n ( )   { 
 	 	 	 	 v a r   e l e m   =   $ (   t h i s   ) , 
 	 	 	 	 	 p o s i t i o n   =   e l e m . c s s (   " p o s i t i o n "   ) ; 
 
 	 	 	 	 i f   (   p o s i t i o n   = = =   " a b s o l u t e "   | |   p o s i t i o n   = = =   " f i x e d "   )   { 
 	 	 	 	 	 r e t u r n ; 
 	 	 	 	 } 
 	 	 	 	 m a x H e i g h t   - =   e l e m . o u t e r H e i g h t (   t r u e   ) ; 
 	 	 	 } ) ; 
 
 	 	 	 t h i s . e l e m e n t . c h i l d r e n ( ) . n o t (   t h i s . p a n e l s   ) . e a c h ( f u n c t i o n ( )   { 
 	 	 	 	 m a x H e i g h t   - =   $ (   t h i s   ) . o u t e r H e i g h t (   t r u e   ) ; 
 	 	 	 } ) ; 
 
 	 	 	 t h i s . p a n e l s . e a c h ( f u n c t i o n ( )   { 
 	 	 	 	 $ (   t h i s   ) . h e i g h t (   M a t h . m a x (   0 ,   m a x H e i g h t   - 
 	 	 	 	 	 $ (   t h i s   ) . i n n e r H e i g h t ( )   +   $ (   t h i s   ) . h e i g h t ( )   )   ) ; 
 	 	 	 } ) 
 	 	 	 . c s s (   " o v e r f l o w " ,   " a u t o "   ) ; 
 	 	 }   e l s e   i f   (   h e i g h t S t y l e   = = =   " a u t o "   )   { 
 	 	 	 m a x H e i g h t   =   0 ; 
 	 	 	 t h i s . p a n e l s . e a c h ( f u n c t i o n ( )   { 
 	 	 	 	 m a x H e i g h t   =   M a t h . m a x (   m a x H e i g h t ,   $ (   t h i s   ) . h e i g h t (   " "   ) . h e i g h t ( )   ) ; 
 	 	 	 } ) . h e i g h t (   m a x H e i g h t   ) ; 
 	 	 } 
 	 } , 
 
 	 _ e v e n t H a n d l e r :   f u n c t i o n (   e v e n t   )   { 
 	 	 v a r   o p t i o n s   =   t h i s . o p t i o n s , 
 	 	 	 a c t i v e   =   t h i s . a c t i v e , 
 	 	 	 a n c h o r   =   $ (   e v e n t . c u r r e n t T a r g e t   ) , 
 	 	 	 t a b   =   a n c h o r . c l o s e s t (   " l i "   ) , 
 	 	 	 c l i c k e d I s A c t i v e   =   t a b [   0   ]   = = =   a c t i v e [   0   ] , 
 	 	 	 c o l l a p s i n g   =   c l i c k e d I s A c t i v e   & &   o p t i o n s . c o l l a p s i b l e , 
 	 	 	 t o S h o w   =   c o l l a p s i n g   ?   $ ( )   :   t h i s . _ g e t P a n e l F o r T a b (   t a b   ) , 
 	 	 	 t o H i d e   =   ! a c t i v e . l e n g t h   ?   $ ( )   :   t h i s . _ g e t P a n e l F o r T a b (   a c t i v e   ) , 
 	 	 	 e v e n t D a t a   =   { 
 	 	 	 	 o l d T a b :   a c t i v e , 
 	 	 	 	 o l d P a n e l :   t o H i d e , 
 	 	 	 	 n e w T a b :   c o l l a p s i n g   ?   $ ( )   :   t a b , 
 	 	 	 	 n e w P a n e l :   t o S h o w 
 	 	 	 } ; 
 
 	 	 e v e n t . p r e v e n t D e f a u l t ( ) ; 
 
 	 	 i f   (   t a b . h a s C l a s s (   " u i - s t a t e - d i s a b l e d "   )   | | 
 	 	 	 	 / /   t a b   i s   a l r e a d y   l o a d i n g 
 	 	 	 	 t a b . h a s C l a s s (   " u i - t a b s - l o a d i n g "   )   | | 
 	 	 	 	 / /   c a n ' t   s w i t c h   d u r n i n g   a n   a n i m a t i o n 
 	 	 	 	 t h i s . r u n n i n g   | | 
 	 	 	 	 / /   c l i c k   o n   a c t i v e   h e a d e r ,   b u t   n o t   c o l l a p s i b l e 
 	 	 	 	 (   c l i c k e d I s A c t i v e   & &   ! o p t i o n s . c o l l a p s i b l e   )   | | 
 	 	 	 	 / /   a l l o w   c a n c e l i n g   a c t i v a t i o n 
 	 	 	 	 (   t h i s . _ t r i g g e r (   " b e f o r e A c t i v a t e " ,   e v e n t ,   e v e n t D a t a   )   = = =   f a l s e   )   )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 o p t i o n s . a c t i v e   =   c o l l a p s i n g   ?   f a l s e   :   t h i s . t a b s . i n d e x (   t a b   ) ; 
 
 	 	 t h i s . a c t i v e   =   c l i c k e d I s A c t i v e   ?   $ ( )   :   t a b ; 
 	 	 i f   (   t h i s . x h r   )   { 
 	 	 	 t h i s . x h r . a b o r t ( ) ; 
 	 	 } 
 
 	 	 i f   (   ! t o H i d e . l e n g t h   & &   ! t o S h o w . l e n g t h   )   { 
 	 	 	 $ . e r r o r (   " j Q u e r y   U I   T a b s :   M i s m a t c h i n g   f r a g m e n t   i d e n t i f i e r . "   ) ; 
 	 	 } 
 
 	 	 i f   (   t o S h o w . l e n g t h   )   { 
 	 	 	 t h i s . l o a d (   t h i s . t a b s . i n d e x (   t a b   ) ,   e v e n t   ) ; 
 	 	 } 
 	 	 t h i s . _ t o g g l e (   e v e n t ,   e v e n t D a t a   ) ; 
 	 } , 
 
 	 / /   h a n d l e s   s h o w / h i d e   f o r   s e l e c t i n g   t a b s 
 	 _ t o g g l e :   f u n c t i o n (   e v e n t ,   e v e n t D a t a   )   { 
 	 	 v a r   t h a t   =   t h i s , 
 	 	 	 t o S h o w   =   e v e n t D a t a . n e w P a n e l , 
 	 	 	 t o H i d e   =   e v e n t D a t a . o l d P a n e l ; 
 
 	 	 t h i s . r u n n i n g   =   t r u e ; 
 
 	 	 f u n c t i o n   c o m p l e t e ( )   { 
 	 	 	 t h a t . r u n n i n g   =   f a l s e ; 
 	 	 	 t h a t . _ t r i g g e r (   " a c t i v a t e " ,   e v e n t ,   e v e n t D a t a   ) ; 
 	 	 } 
 
 	 	 f u n c t i o n   s h o w ( )   { 
 	 	 	 e v e n t D a t a . n e w T a b . c l o s e s t (   " l i "   ) . a d d C l a s s (   " u i - t a b s - a c t i v e   u i - s t a t e - a c t i v e "   ) ; 
 
 	 	 	 i f   (   t o S h o w . l e n g t h   & &   t h a t . o p t i o n s . s h o w   )   { 
 	 	 	 	 t h a t . _ s h o w (   t o S h o w ,   t h a t . o p t i o n s . s h o w ,   c o m p l e t e   ) ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 t o S h o w . s h o w ( ) ; 
 	 	 	 	 c o m p l e t e ( ) ; 
 	 	 	 } 
 	 	 } 
 
 	 	 / /   s t a r t   o u t   b y   h i d i n g ,   t h e n   s h o w i n g ,   t h e n   c o m p l e t i n g 
 	 	 i f   (   t o H i d e . l e n g t h   & &   t h i s . o p t i o n s . h i d e   )   { 
 	 	 	 t h i s . _ h i d e (   t o H i d e ,   t h i s . o p t i o n s . h i d e ,   f u n c t i o n ( )   { 
 	 	 	 	 e v e n t D a t a . o l d T a b . c l o s e s t (   " l i "   ) . r e m o v e C l a s s (   " u i - t a b s - a c t i v e   u i - s t a t e - a c t i v e "   ) ; 
 	 	 	 	 s h o w ( ) ; 
 	 	 	 } ) ; 
 	 	 }   e l s e   { 
 	 	 	 e v e n t D a t a . o l d T a b . c l o s e s t (   " l i "   ) . r e m o v e C l a s s (   " u i - t a b s - a c t i v e   u i - s t a t e - a c t i v e "   ) ; 
 	 	 	 t o H i d e . h i d e ( ) ; 
 	 	 	 s h o w ( ) ; 
 	 	 } 
 
 	 	 t o H i d e . a t t r ( { 
 	 	 	 " a r i a - e x p a n d e d " :   " f a l s e " , 
 	 	 	 " a r i a - h i d d e n " :   " t r u e " 
 	 	 } ) ; 
 	 	 e v e n t D a t a . o l d T a b . a t t r (   " a r i a - s e l e c t e d " ,   " f a l s e "   ) ; 
 	 	 / /   I f   w e ' r e   s w i t c h i n g   t a b s ,   r e m o v e   t h e   o l d   t a b   f r o m   t h e   t a b   o r d e r . 
 	 	 / /   I f   w e ' r e   o p e n i n g   f r o m   c o l l a p s e d   s t a t e ,   r e m o v e   t h e   p r e v i o u s   t a b   f r o m   t h e   t a b   o r d e r . 
 	 	 / /   I f   w e ' r e   c o l l a p s i n g ,   t h e n   k e e p   t h e   c o l l a p s i n g   t a b   i n   t h e   t a b   o r d e r . 
 	 	 i f   (   t o S h o w . l e n g t h   & &   t o H i d e . l e n g t h   )   { 
 	 	 	 e v e n t D a t a . o l d T a b . a t t r (   " t a b I n d e x " ,   - 1   ) ; 
 	 	 }   e l s e   i f   (   t o S h o w . l e n g t h   )   { 
 	 	 	 t h i s . t a b s . f i l t e r ( f u n c t i o n ( )   { 
 	 	 	 	 r e t u r n   $ (   t h i s   ) . a t t r (   " t a b I n d e x "   )   = = =   0 ; 
 	 	 	 } ) 
 	 	 	 . a t t r (   " t a b I n d e x " ,   - 1   ) ; 
 	 	 } 
 
 	 	 t o S h o w . a t t r ( { 
 	 	 	 " a r i a - e x p a n d e d " :   " t r u e " , 
 	 	 	 " a r i a - h i d d e n " :   " f a l s e " 
 	 	 } ) ; 
 	 	 e v e n t D a t a . n e w T a b . a t t r ( { 
 	 	 	 " a r i a - s e l e c t e d " :   " t r u e " , 
 	 	 	 t a b I n d e x :   0 
 	 	 } ) ; 
 	 } , 
 
 	 _ a c t i v a t e :   f u n c t i o n (   i n d e x   )   { 
 	 	 v a r   a n c h o r , 
 	 	 	 a c t i v e   =   t h i s . _ f i n d A c t i v e (   i n d e x   ) ; 
 
 	 	 / /   t r y i n g   t o   a c t i v a t e   t h e   a l r e a d y   a c t i v e   p a n e l 
 	 	 i f   (   a c t i v e [   0   ]   = = =   t h i s . a c t i v e [   0   ]   )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 / /   t r y i n g   t o   c o l l a p s e ,   s i m u l a t e   a   c l i c k   o n   t h e   c u r r e n t   a c t i v e   h e a d e r 
 	 	 i f   (   ! a c t i v e . l e n g t h   )   { 
 	 	 	 a c t i v e   =   t h i s . a c t i v e ; 
 	 	 } 
 
 	 	 a n c h o r   =   a c t i v e . f i n d (   " . u i - t a b s - a n c h o r "   ) [   0   ] ; 
 	 	 t h i s . _ e v e n t H a n d l e r ( { 
 	 	 	 t a r g e t :   a n c h o r , 
 	 	 	 c u r r e n t T a r g e t :   a n c h o r , 
 	 	 	 p r e v e n t D e f a u l t :   $ . n o o p 
 	 	 } ) ; 
 	 } , 
 
 	 _ f i n d A c t i v e :   f u n c t i o n (   i n d e x   )   { 
 	 	 r e t u r n   i n d e x   = = =   f a l s e   ?   $ ( )   :   t h i s . t a b s . e q (   i n d e x   ) ; 
 	 } , 
 
 	 _ g e t I n d e x :   f u n c t i o n (   i n d e x   )   { 
 	 	 / /   m e t a - f u n c t i o n   t o   g i v e   u s e r s   o p t i o n   t o   p r o v i d e   a   h r e f   s t r i n g   i n s t e a d   o f   a   n u m e r i c a l   i n d e x . 
 	 	 i f   (   t y p e o f   i n d e x   = = =   " s t r i n g "   )   { 
 	 	 	 i n d e x   =   t h i s . a n c h o r s . i n d e x (   t h i s . a n c h o r s . f i l t e r (   " [ h r e f $ = ' "   +   i n d e x   +   " ' ] "   )   ) ; 
 	 	 } 
 
 	 	 r e t u r n   i n d e x ; 
 	 } , 
 
 	 _ d e s t r o y :   f u n c t i o n ( )   { 
 	 	 i f   (   t h i s . x h r   )   { 
 	 	 	 t h i s . x h r . a b o r t ( ) ; 
 	 	 } 
 
 	 	 t h i s . e l e m e n t . r e m o v e C l a s s (   " u i - t a b s   u i - w i d g e t   u i - w i d g e t - c o n t e n t   u i - c o r n e r - a l l   u i - t a b s - c o l l a p s i b l e "   ) ; 
 
 	 	 t h i s . t a b l i s t 
 	 	 	 . r e m o v e C l a s s (   " u i - t a b s - n a v   u i - h e l p e r - r e s e t   u i - h e l p e r - c l e a r f i x   u i - w i d g e t - h e a d e r   u i - c o r n e r - a l l "   ) 
 	 	 	 . r e m o v e A t t r (   " r o l e "   ) ; 
 
 	 	 t h i s . a n c h o r s 
 	 	 	 . r e m o v e C l a s s (   " u i - t a b s - a n c h o r "   ) 
 	 	 	 . r e m o v e A t t r (   " r o l e "   ) 
 	 	 	 . r e m o v e A t t r (   " t a b I n d e x "   ) 
 	 	 	 . r e m o v e U n i q u e I d ( ) ; 
 
 	 	 t h i s . t a b s . a d d (   t h i s . p a n e l s   ) . e a c h ( f u n c t i o n ( )   { 
 	 	 	 i f   (   $ . d a t a (   t h i s ,   " u i - t a b s - d e s t r o y "   )   )   { 
 	 	 	 	 $ (   t h i s   ) . r e m o v e ( ) ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 $ (   t h i s   ) 
 	 	 	 	 	 . r e m o v e C l a s s (   " u i - s t a t e - d e f a u l t   u i - s t a t e - a c t i v e   u i - s t a t e - d i s a b l e d   "   + 
 	 	 	 	 	 	 " u i - c o r n e r - t o p   u i - c o r n e r - b o t t o m   u i - w i d g e t - c o n t e n t   u i - t a b s - a c t i v e   u i - t a b s - p a n e l "   ) 
 	 	 	 	 	 . r e m o v e A t t r (   " t a b I n d e x "   ) 
 	 	 	 	 	 . r e m o v e A t t r (   " a r i a - l i v e "   ) 
 	 	 	 	 	 . r e m o v e A t t r (   " a r i a - b u s y "   ) 
 	 	 	 	 	 . r e m o v e A t t r (   " a r i a - s e l e c t e d "   ) 
 	 	 	 	 	 . r e m o v e A t t r (   " a r i a - l a b e l l e d b y "   ) 
 	 	 	 	 	 . r e m o v e A t t r (   " a r i a - h i d d e n "   ) 
 	 	 	 	 	 . r e m o v e A t t r (   " a r i a - e x p a n d e d "   ) 
 	 	 	 	 	 . r e m o v e A t t r (   " r o l e "   ) ; 
 	 	 	 } 
 	 	 } ) ; 
 
 	 	 t h i s . t a b s . e a c h ( f u n c t i o n ( )   { 
 	 	 	 v a r   l i   =   $ (   t h i s   ) , 
 	 	 	 	 p r e v   =   l i . d a t a (   " u i - t a b s - a r i a - c o n t r o l s "   ) ; 
 	 	 	 i f   (   p r e v   )   { 
 	 	 	 	 l i 
 	 	 	 	 	 . a t t r (   " a r i a - c o n t r o l s " ,   p r e v   ) 
 	 	 	 	 	 . r e m o v e D a t a (   " u i - t a b s - a r i a - c o n t r o l s "   ) ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 l i . r e m o v e A t t r (   " a r i a - c o n t r o l s "   ) ; 
 	 	 	 } 
 	 	 } ) ; 
 
 	 	 t h i s . p a n e l s . s h o w ( ) ; 
 
 	 	 i f   (   t h i s . o p t i o n s . h e i g h t S t y l e   ! = =   " c o n t e n t "   )   { 
 	 	 	 t h i s . p a n e l s . c s s (   " h e i g h t " ,   " "   ) ; 
 	 	 } 
 	 } , 
 
 	 e n a b l e :   f u n c t i o n (   i n d e x   )   { 
 	 	 v a r   d i s a b l e d   =   t h i s . o p t i o n s . d i s a b l e d ; 
 	 	 i f   (   d i s a b l e d   = = =   f a l s e   )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 i f   (   i n d e x   = = =   u n d e f i n e d   )   { 
 	 	 	 d i s a b l e d   =   f a l s e ; 
 	 	 }   e l s e   { 
 	 	 	 i n d e x   =   t h i s . _ g e t I n d e x (   i n d e x   ) ; 
 	 	 	 i f   (   $ . i s A r r a y (   d i s a b l e d   )   )   { 
 	 	 	 	 d i s a b l e d   =   $ . m a p (   d i s a b l e d ,   f u n c t i o n (   n u m   )   { 
 	 	 	 	 	 r e t u r n   n u m   ! = =   i n d e x   ?   n u m   :   n u l l ; 
 	 	 	 	 } ) ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 d i s a b l e d   =   $ . m a p (   t h i s . t a b s ,   f u n c t i o n (   l i ,   n u m   )   { 
 	 	 	 	 	 r e t u r n   n u m   ! = =   i n d e x   ?   n u m   :   n u l l ; 
 	 	 	 	 } ) ; 
 	 	 	 } 
 	 	 } 
 	 	 t h i s . _ s e t u p D i s a b l e d (   d i s a b l e d   ) ; 
 	 } , 
 
 	 d i s a b l e :   f u n c t i o n (   i n d e x   )   { 
 	 	 v a r   d i s a b l e d   =   t h i s . o p t i o n s . d i s a b l e d ; 
 	 	 i f   (   d i s a b l e d   = = =   t r u e   )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 i f   (   i n d e x   = = =   u n d e f i n e d   )   { 
 	 	 	 d i s a b l e d   =   t r u e ; 
 	 	 }   e l s e   { 
 	 	 	 i n d e x   =   t h i s . _ g e t I n d e x (   i n d e x   ) ; 
 	 	 	 i f   (   $ . i n A r r a y (   i n d e x ,   d i s a b l e d   )   ! = =   - 1   )   { 
 	 	 	 	 r e t u r n ; 
 	 	 	 } 
 	 	 	 i f   (   $ . i s A r r a y (   d i s a b l e d   )   )   { 
 	 	 	 	 d i s a b l e d   =   $ . m e r g e (   [   i n d e x   ] ,   d i s a b l e d   ) . s o r t ( ) ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 d i s a b l e d   =   [   i n d e x   ] ; 
 	 	 	 } 
 	 	 } 
 	 	 t h i s . _ s e t u p D i s a b l e d (   d i s a b l e d   ) ; 
 	 } , 
 
 	 l o a d :   f u n c t i o n (   i n d e x ,   e v e n t   )   { 
 	 	 i n d e x   =   t h i s . _ g e t I n d e x (   i n d e x   ) ; 
 	 	 v a r   t h a t   =   t h i s , 
 	 	 	 t a b   =   t h i s . t a b s . e q (   i n d e x   ) , 
 	 	 	 a n c h o r   =   t a b . f i n d (   " . u i - t a b s - a n c h o r "   ) , 
 	 	 	 p a n e l   =   t h i s . _ g e t P a n e l F o r T a b (   t a b   ) , 
 	 	 	 e v e n t D a t a   =   { 
 	 	 	 	 t a b :   t a b , 
 	 	 	 	 p a n e l :   p a n e l 
 	 	 	 } ; 
 
 	 	 / /   n o t   r e m o t e 
 	 	 i f   (   i s L o c a l (   a n c h o r [   0   ]   )   )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 t h i s . x h r   =   $ . a j a x (   t h i s . _ a j a x S e t t i n g s (   a n c h o r ,   e v e n t ,   e v e n t D a t a   )   ) ; 
 
 	 	 / /   s u p p o r t :   j Q u e r y   < 1 . 8 
 	 	 / /   j Q u e r y   < 1 . 8   r e t u r n s   f a l s e   i f   t h e   r e q u e s t   i s   c a n c e l e d   i n   b e f o r e S e n d , 
 	 	 / /   b u t   a s   o f   1 . 8 ,   $ . a j a x ( )   a l w a y s   r e t u r n s   a   j q X H R   o b j e c t . 
 	 	 i f   (   t h i s . x h r   & &   t h i s . x h r . s t a t u s T e x t   ! = =   " c a n c e l e d "   )   { 
 	 	 	 t a b . a d d C l a s s (   " u i - t a b s - l o a d i n g "   ) ; 
 	 	 	 p a n e l . a t t r (   " a r i a - b u s y " ,   " t r u e "   ) ; 
 
 	 	 	 t h i s . x h r 
 	 	 	 	 . s u c c e s s ( f u n c t i o n (   r e s p o n s e   )   { 
 	 	 	 	 	 / /   s u p p o r t :   j Q u e r y   < 1 . 8 
 	 	 	 	 	 / /   h t t p : / / b u g s . j q u e r y . c o m / t i c k e t / 1 1 7 7 8 
 	 	 	 	 	 s e t T i m e o u t ( f u n c t i o n ( )   { 
 	 	 	 	 	 	 p a n e l . h t m l (   r e s p o n s e   ) ; 
 	 	 	 	 	 	 t h a t . _ t r i g g e r (   " l o a d " ,   e v e n t ,   e v e n t D a t a   ) ; 
 	 	 	 	 	 } ,   1   ) ; 
 	 	 	 	 } ) 
 	 	 	 	 . c o m p l e t e ( f u n c t i o n (   j q X H R ,   s t a t u s   )   { 
 	 	 	 	 	 / /   s u p p o r t :   j Q u e r y   < 1 . 8 
 	 	 	 	 	 / /   h t t p : / / b u g s . j q u e r y . c o m / t i c k e t / 1 1 7 7 8 
 	 	 	 	 	 s e t T i m e o u t ( f u n c t i o n ( )   { 
 	 	 	 	 	 	 i f   (   s t a t u s   = = =   " a b o r t "   )   { 
 	 	 	 	 	 	 	 t h a t . p a n e l s . s t o p (   f a l s e ,   t r u e   ) ; 
 	 	 	 	 	 	 } 
 
 	 	 	 	 	 	 t a b . r e m o v e C l a s s (   " u i - t a b s - l o a d i n g "   ) ; 
 	 	 	 	 	 	 p a n e l . r e m o v e A t t r (   " a r i a - b u s y "   ) ; 
 
 	 	 	 	 	 	 i f   (   j q X H R   = = =   t h a t . x h r   )   { 
 	 	 	 	 	 	 	 d e l e t e   t h a t . x h r ; 
 	 	 	 	 	 	 } 
 	 	 	 	 	 } ,   1   ) ; 
 	 	 	 	 } ) ; 
 	 	 } 
 	 } , 
 
 	 _ a j a x S e t t i n g s :   f u n c t i o n (   a n c h o r ,   e v e n t ,   e v e n t D a t a   )   { 
 	 	 v a r   t h a t   =   t h i s ; 
 	 	 r e t u r n   { 
 	 	 	 u r l :   a n c h o r . a t t r (   " h r e f "   ) , 
 	 	 	 b e f o r e S e n d :   f u n c t i o n (   j q X H R ,   s e t t i n g s   )   { 
 	 	 	 	 r e t u r n   t h a t . _ t r i g g e r (   " b e f o r e L o a d " ,   e v e n t , 
 	 	 	 	 	 $ . e x t e n d (   {   j q X H R   :   j q X H R ,   a j a x S e t t i n g s :   s e t t i n g s   } ,   e v e n t D a t a   )   ) ; 
 	 	 	 } 
 	 	 } ; 
 	 } , 
 
 	 _ g e t P a n e l F o r T a b :   f u n c t i o n (   t a b   )   { 
 	 	 v a r   i d   =   $ (   t a b   ) . a t t r (   " a r i a - c o n t r o l s "   ) ; 
 	 	 r e t u r n   t h i s . e l e m e n t . f i n d (   t h i s . _ s a n i t i z e S e l e c t o r (   " # "   +   i d   )   ) ; 
 	 } 
 } ) ; 
 
 } ) (   j Q u e r y   ) ; 
 
 ( f u n c t i o n (   $   )   { 
 
 v a r   i n c r e m e n t s   =   0 ; 
 
 f u n c t i o n   a d d D e s c r i b e d B y (   e l e m ,   i d   )   { 
 	 v a r   d e s c r i b e d b y   =   ( e l e m . a t t r (   " a r i a - d e s c r i b e d b y "   )   | |   " " ) . s p l i t (   / \ s + /   ) ; 
 	 d e s c r i b e d b y . p u s h (   i d   ) ; 
 	 e l e m 
 	 	 . d a t a (   " u i - t o o l t i p - i d " ,   i d   ) 
 	 	 . a t t r (   " a r i a - d e s c r i b e d b y " ,   $ . t r i m (   d e s c r i b e d b y . j o i n (   "   "   )   )   ) ; 
 } 
 
 f u n c t i o n   r e m o v e D e s c r i b e d B y (   e l e m   )   { 
 	 v a r   i d   =   e l e m . d a t a (   " u i - t o o l t i p - i d "   ) , 
 	 	 d e s c r i b e d b y   =   ( e l e m . a t t r (   " a r i a - d e s c r i b e d b y "   )   | |   " " ) . s p l i t (   / \ s + /   ) , 
 	 	 i n d e x   =   $ . i n A r r a y (   i d ,   d e s c r i b e d b y   ) ; 
 	 i f   (   i n d e x   ! = =   - 1   )   { 
 	 	 d e s c r i b e d b y . s p l i c e (   i n d e x ,   1   ) ; 
 	 } 
 
 	 e l e m . r e m o v e D a t a (   " u i - t o o l t i p - i d "   ) ; 
 	 d e s c r i b e d b y   =   $ . t r i m (   d e s c r i b e d b y . j o i n (   "   "   )   ) ; 
 	 i f   (   d e s c r i b e d b y   )   { 
 	 	 e l e m . a t t r (   " a r i a - d e s c r i b e d b y " ,   d e s c r i b e d b y   ) ; 
 	 }   e l s e   { 
 	 	 e l e m . r e m o v e A t t r (   " a r i a - d e s c r i b e d b y "   ) ; 
 	 } 
 } 
 
 $ . w i d g e t (   " u i . t o o l t i p " ,   { 
 	 v e r s i o n :   " 1 . 1 0 . 3 " , 
 	 o p t i o n s :   { 
 	 	 c o n t e n t :   f u n c t i o n ( )   { 
 	 	 	 / /   s u p p o r t :   I E < 9 ,   O p e r a   i n   j Q u e r y   < 1 . 7 
 	 	 	 / /   . t e x t ( )   c a n ' t   a c c e p t   u n d e f i n e d ,   s o   c o e r c e   t o   a   s t r i n g 
 	 	 	 v a r   t i t l e   =   $ (   t h i s   ) . a t t r (   " t i t l e "   )   | |   " " ; 
 	 	 	 / /   E s c a p e   t i t l e ,   s i n c e   w e ' r e   g o i n g   f r o m   a n   a t t r i b u t e   t o   r a w   H T M L 
 	 	 	 r e t u r n   $ (   " < a > "   ) . t e x t (   t i t l e   ) . h t m l ( ) ; 
 	 	 } , 
 	 	 h i d e :   t r u e , 
 	 	 / /   D i s a b l e d   e l e m e n t s   h a v e   i n c o n s i s t e n t   b e h a v i o r   a c r o s s   b r o w s e r s   ( # 8 6 6 1 ) 
 	 	 i t e m s :   " [ t i t l e ] : n o t ( [ d i s a b l e d ] ) " , 
 	 	 p o s i t i o n :   { 
 	 	 	 m y :   " l e f t   t o p + 1 5 " , 
 	 	 	 a t :   " l e f t   b o t t o m " , 
 	 	 	 c o l l i s i o n :   " f l i p f i t   f l i p " 
 	 	 } , 
 	 	 s h o w :   t r u e , 
 	 	 t o o l t i p C l a s s :   n u l l , 
 	 	 t r a c k :   f a l s e , 
 
 	 	 / /   c a l l b a c k s 
 	 	 c l o s e :   n u l l , 
 	 	 o p e n :   n u l l 
 	 } , 
 
 	 _ c r e a t e :   f u n c t i o n ( )   { 
 	 	 t h i s . _ o n ( { 
 	 	 	 m o u s e o v e r :   " o p e n " , 
 	 	 	 f o c u s i n :   " o p e n " 
 	 	 } ) ; 
 
 	 	 / /   I D s   o f   g e n e r a t e d   t o o l t i p s ,   n e e d e d   f o r   d e s t r o y 
 	 	 t h i s . t o o l t i p s   =   { } ; 
 	 	 / /   I D s   o f   p a r e n t   t o o l t i p s   w h e r e   w e   r e m o v e d   t h e   t i t l e   a t t r i b u t e 
 	 	 t h i s . p a r e n t s   =   { } ; 
 
 	 	 i f   (   t h i s . o p t i o n s . d i s a b l e d   )   { 
 	 	 	 t h i s . _ d i s a b l e ( ) ; 
 	 	 } 
 	 } , 
 
 	 _ s e t O p t i o n :   f u n c t i o n (   k e y ,   v a l u e   )   { 
 	 	 v a r   t h a t   =   t h i s ; 
 
 	 	 i f   (   k e y   = = =   " d i s a b l e d "   )   { 
 	 	 	 t h i s [   v a l u e   ?   " _ d i s a b l e "   :   " _ e n a b l e "   ] ( ) ; 
 	 	 	 t h i s . o p t i o n s [   k e y   ]   =   v a l u e ; 
 	 	 	 / /   d i s a b l e   e l e m e n t   s t y l e   c h a n g e s 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 t h i s . _ s u p e r (   k e y ,   v a l u e   ) ; 
 
 	 	 i f   (   k e y   = = =   " c o n t e n t "   )   { 
 	 	 	 $ . e a c h (   t h i s . t o o l t i p s ,   f u n c t i o n (   i d ,   e l e m e n t   )   { 
 	 	 	 	 t h a t . _ u p d a t e C o n t e n t (   e l e m e n t   ) ; 
 	 	 	 } ) ; 
 	 	 } 
 	 } , 
 
 	 _ d i s a b l e :   f u n c t i o n ( )   { 
 	 	 v a r   t h a t   =   t h i s ; 
 
 	 	 / /   c l o s e   o p e n   t o o l t i p s 
 	 	 $ . e a c h (   t h i s . t o o l t i p s ,   f u n c t i o n (   i d ,   e l e m e n t   )   { 
 	 	 	 v a r   e v e n t   =   $ . E v e n t (   " b l u r "   ) ; 
 	 	 	 e v e n t . t a r g e t   =   e v e n t . c u r r e n t T a r g e t   =   e l e m e n t [ 0 ] ; 
 	 	 	 t h a t . c l o s e (   e v e n t ,   t r u e   ) ; 
 	 	 } ) ; 
 
 	 	 / /   r e m o v e   t i t l e   a t t r i b u t e s   t o   p r e v e n t   n a t i v e   t o o l t i p s 
 	 	 t h i s . e l e m e n t . f i n d (   t h i s . o p t i o n s . i t e m s   ) . a d d B a c k ( ) . e a c h ( f u n c t i o n ( )   { 
 	 	 	 v a r   e l e m e n t   =   $ (   t h i s   ) ; 
 	 	 	 i f   (   e l e m e n t . i s (   " [ t i t l e ] "   )   )   { 
 	 	 	 	 e l e m e n t 
 	 	 	 	 	 . d a t a (   " u i - t o o l t i p - t i t l e " ,   e l e m e n t . a t t r (   " t i t l e "   )   ) 
 	 	 	 	 	 . a t t r (   " t i t l e " ,   " "   ) ; 
 	 	 	 } 
 	 	 } ) ; 
 	 } , 
 
 	 _ e n a b l e :   f u n c t i o n ( )   { 
 	 	 / /   r e s t o r e   t i t l e   a t t r i b u t e s 
 	 	 t h i s . e l e m e n t . f i n d (   t h i s . o p t i o n s . i t e m s   ) . a d d B a c k ( ) . e a c h ( f u n c t i o n ( )   { 
 	 	 	 v a r   e l e m e n t   =   $ (   t h i s   ) ; 
 	 	 	 i f   (   e l e m e n t . d a t a (   " u i - t o o l t i p - t i t l e "   )   )   { 
 	 	 	 	 e l e m e n t . a t t r (   " t i t l e " ,   e l e m e n t . d a t a (   " u i - t o o l t i p - t i t l e "   )   ) ; 
 	 	 	 } 
 	 	 } ) ; 
 	 } , 
 
 	 o p e n :   f u n c t i o n (   e v e n t   )   { 
 	 	 v a r   t h a t   =   t h i s , 
 	 	 	 t a r g e t   =   $ (   e v e n t   ?   e v e n t . t a r g e t   :   t h i s . e l e m e n t   ) 
 	 	 	 	 / /   w e   n e e d   c l o s e s t   h e r e   d u e   t o   m o u s e o v e r   b u b b l i n g , 
 	 	 	 	 / /   b u t   a l w a y s   p o i n t i n g   a t   t h e   s a m e   e v e n t   t a r g e t 
 	 	 	 	 . c l o s e s t (   t h i s . o p t i o n s . i t e m s   ) ; 
 
 	 	 / /   N o   e l e m e n t   t o   s h o w   a   t o o l t i p   f o r   o r   t h e   t o o l t i p   i s   a l r e a d y   o p e n 
 	 	 i f   (   ! t a r g e t . l e n g t h   | |   t a r g e t . d a t a (   " u i - t o o l t i p - i d "   )   )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 i f   (   t a r g e t . a t t r (   " t i t l e "   )   )   { 
 	 	 	 t a r g e t . d a t a (   " u i - t o o l t i p - t i t l e " ,   t a r g e t . a t t r (   " t i t l e "   )   ) ; 
 	 	 } 
 
 	 	 t a r g e t . d a t a (   " u i - t o o l t i p - o p e n " ,   t r u e   ) ; 
 
 	 	 / /   k i l l   p a r e n t   t o o l t i p s ,   c u s t o m   o r   n a t i v e ,   f o r   h o v e r 
 	 	 i f   (   e v e n t   & &   e v e n t . t y p e   = = =   " m o u s e o v e r "   )   { 
 	 	 	 t a r g e t . p a r e n t s ( ) . e a c h ( f u n c t i o n ( )   { 
 	 	 	 	 v a r   p a r e n t   =   $ (   t h i s   ) , 
 	 	 	 	 	 b l u r E v e n t ; 
 	 	 	 	 i f   (   p a r e n t . d a t a (   " u i - t o o l t i p - o p e n "   )   )   { 
 	 	 	 	 	 b l u r E v e n t   =   $ . E v e n t (   " b l u r "   ) ; 
 	 	 	 	 	 b l u r E v e n t . t a r g e t   =   b l u r E v e n t . c u r r e n t T a r g e t   =   t h i s ; 
 	 	 	 	 	 t h a t . c l o s e (   b l u r E v e n t ,   t r u e   ) ; 
 	 	 	 	 } 
 	 	 	 	 i f   (   p a r e n t . a t t r (   " t i t l e "   )   )   { 
 	 	 	 	 	 p a r e n t . u n i q u e I d ( ) ; 
 	 	 	 	 	 t h a t . p a r e n t s [   t h i s . i d   ]   =   { 
 	 	 	 	 	 	 e l e m e n t :   t h i s , 
 	 	 	 	 	 	 t i t l e :   p a r e n t . a t t r (   " t i t l e "   ) 
 	 	 	 	 	 } ; 
 	 	 	 	 	 p a r e n t . a t t r (   " t i t l e " ,   " "   ) ; 
 	 	 	 	 } 
 	 	 	 } ) ; 
 	 	 } 
 
 	 	 t h i s . _ u p d a t e C o n t e n t (   t a r g e t ,   e v e n t   ) ; 
 	 } , 
 
 	 _ u p d a t e C o n t e n t :   f u n c t i o n (   t a r g e t ,   e v e n t   )   { 
 	 	 v a r   c o n t e n t , 
 	 	 	 c o n t e n t O p t i o n   =   t h i s . o p t i o n s . c o n t e n t , 
 	 	 	 t h a t   =   t h i s , 
 	 	 	 e v e n t T y p e   =   e v e n t   ?   e v e n t . t y p e   :   n u l l ; 
 
 	 	 i f   (   t y p e o f   c o n t e n t O p t i o n   = = =   " s t r i n g "   )   { 
 	 	 	 r e t u r n   t h i s . _ o p e n (   e v e n t ,   t a r g e t ,   c o n t e n t O p t i o n   ) ; 
 	 	 } 
 
 	 	 c o n t e n t   =   c o n t e n t O p t i o n . c a l l (   t a r g e t [ 0 ] ,   f u n c t i o n (   r e s p o n s e   )   { 
 	 	 	 / /   i g n o r e   a s y n c   r e s p o n s e   i f   t o o l t i p   w a s   c l o s e d   a l r e a d y 
 	 	 	 i f   (   ! t a r g e t . d a t a (   " u i - t o o l t i p - o p e n "   )   )   { 
 	 	 	 	 r e t u r n ; 
 	 	 	 } 
 	 	 	 / /   I E   m a y   i n s t a n t l y   s e r v e   a   c a c h e d   r e s p o n s e   f o r   a j a x   r e q u e s t s 
 	 	 	 / /   d e l a y   t h i s   c a l l   t o   _ o p e n   s o   t h e   o t h e r   c a l l   t o   _ o p e n   r u n s   f i r s t 
 	 	 	 t h a t . _ d e l a y ( f u n c t i o n ( )   { 
 	 	 	 	 / /   j Q u e r y   c r e a t e s   a   s p e c i a l   e v e n t   f o r   f o c u s i n   w h e n   i t   d o e s n ' t 
 	 	 	 	 / /   e x i s t   n a t i v e l y .   T o   i m p r o v e   p e r f o r m a n c e ,   t h e   n a t i v e   e v e n t 
 	 	 	 	 / /   o b j e c t   i s   r e u s e d   a n d   t h e   t y p e   i s   c h a n g e d .   T h e r e f o r e ,   w e   c a n ' t 
 	 	 	 	 / /   r e l y   o n   t h e   t y p e   b e i n g   c o r r e c t   a f t e r   t h e   e v e n t   f i n i s h e d 
 	 	 	 	 / /   b u b b l i n g ,   s o   w e   s e t   i t   b a c k   t o   t h e   p r e v i o u s   v a l u e .   ( # 8 7 4 0 ) 
 	 	 	 	 i f   (   e v e n t   )   { 
 	 	 	 	 	 e v e n t . t y p e   =   e v e n t T y p e ; 
 	 	 	 	 } 
 	 	 	 	 t h i s . _ o p e n (   e v e n t ,   t a r g e t ,   r e s p o n s e   ) ; 
 	 	 	 } ) ; 
 	 	 } ) ; 
 	 	 i f   (   c o n t e n t   )   { 
 	 	 	 t h i s . _ o p e n (   e v e n t ,   t a r g e t ,   c o n t e n t   ) ; 
 	 	 } 
 	 } , 
 
 	 _ o p e n :   f u n c t i o n (   e v e n t ,   t a r g e t ,   c o n t e n t   )   { 
 	 	 v a r   t o o l t i p ,   e v e n t s ,   d e l a y e d S h o w , 
 	 	 	 p o s i t i o n O p t i o n   =   $ . e x t e n d (   { } ,   t h i s . o p t i o n s . p o s i t i o n   ) ; 
 
 	 	 i f   (   ! c o n t e n t   )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 / /   C o n t e n t   c a n   b e   u p d a t e d   m u l t i p l e   t i m e s .   I f   t h e   t o o l t i p   a l r e a d y 
 	 	 / /   e x i s t s ,   t h e n   j u s t   u p d a t e   t h e   c o n t e n t   a n d   b a i l . 
 	 	 t o o l t i p   =   t h i s . _ f i n d (   t a r g e t   ) ; 
 	 	 i f   (   t o o l t i p . l e n g t h   )   { 
 	 	 	 t o o l t i p . f i n d (   " . u i - t o o l t i p - c o n t e n t "   ) . h t m l (   c o n t e n t   ) ; 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 / /   i f   w e   h a v e   a   t i t l e ,   c l e a r   i t   t o   p r e v e n t   t h e   n a t i v e   t o o l t i p 
 	 	 / /   w e   h a v e   t o   c h e c k   f i r s t   t o   a v o i d   d e f i n i n g   a   t i t l e   i f   n o n e   e x i s t s 
 	 	 / /   ( w e   d o n ' t   w a n t   t o   c a u s e   a n   e l e m e n t   t o   s t a r t   m a t c h i n g   [ t i t l e ] ) 
 	 	 / / 
 	 	 / /   W e   u s e   r e m o v e A t t r   o n l y   f o r   k e y   e v e n t s ,   t o   a l l o w   I E   t o   e x p o r t   t h e   c o r r e c t 
 	 	 / /   a c c e s s i b l e   a t t r i b u t e s .   F o r   m o u s e   e v e n t s ,   s e t   t o   e m p t y   s t r i n g   t o   a v o i d 
 	 	 / /   n a t i v e   t o o l t i p   s h o w i n g   u p   ( h a p p e n s   o n l y   w h e n   r e m o v i n g   i n s i d e   m o u s e o v e r ) . 
 	 	 i f   (   t a r g e t . i s (   " [ t i t l e ] "   )   )   { 
 	 	 	 i f   (   e v e n t   & &   e v e n t . t y p e   = = =   " m o u s e o v e r "   )   { 
 	 	 	 	 t a r g e t . a t t r (   " t i t l e " ,   " "   ) ; 
 	 	 	 }   e l s e   { 
 	 	 	 	 t a r g e t . r e m o v e A t t r (   " t i t l e "   ) ; 
 	 	 	 } 
 	 	 } 
 
 	 	 t o o l t i p   =   t h i s . _ t o o l t i p (   t a r g e t   ) ; 
 	 	 a d d D e s c r i b e d B y (   t a r g e t ,   t o o l t i p . a t t r (   " i d "   )   ) ; 
 	 	 t o o l t i p . f i n d (   " . u i - t o o l t i p - c o n t e n t "   ) . h t m l (   c o n t e n t   ) ; 
 
 	 	 f u n c t i o n   p o s i t i o n (   e v e n t   )   { 
 	 	 	 p o s i t i o n O p t i o n . o f   =   e v e n t ; 
 	 	 	 i f   (   t o o l t i p . i s (   " : h i d d e n "   )   )   { 
 	 	 	 	 r e t u r n ; 
 	 	 	 } 
 	 	 	 t o o l t i p . p o s i t i o n (   p o s i t i o n O p t i o n   ) ; 
 	 	 } 
 	 	 i f   (   t h i s . o p t i o n s . t r a c k   & &   e v e n t   & &   / ^ m o u s e / . t e s t (   e v e n t . t y p e   )   )   { 
 	 	 	 t h i s . _ o n (   t h i s . d o c u m e n t ,   { 
 	 	 	 	 m o u s e m o v e :   p o s i t i o n 
 	 	 	 } ) ; 
 	 	 	 / /   t r i g g e r   o n c e   t o   o v e r r i d e   e l e m e n t - r e l a t i v e   p o s i t i o n i n g 
 	 	 	 p o s i t i o n (   e v e n t   ) ; 
 	 	 }   e l s e   { 
 	 	 	 t o o l t i p . p o s i t i o n (   $ . e x t e n d ( { 
 	 	 	 	 o f :   t a r g e t 
 	 	 	 } ,   t h i s . o p t i o n s . p o s i t i o n   )   ) ; 
 	 	 } 
 
 	 	 t o o l t i p . h i d e ( ) ; 
 
 	 	 t h i s . _ s h o w (   t o o l t i p ,   t h i s . o p t i o n s . s h o w   ) ; 
 	 	 / /   H a n d l e   t r a c k i n g   t o o l t i p s   t h a t   a r e   s h o w n   w i t h   a   d e l a y   ( # 8 6 4 4 ) .   A s   s o o n 
 	 	 / /   a s   t h e   t o o l t i p   i s   v i s i b l e ,   p o s i t i o n   t h e   t o o l t i p   u s i n g   t h e   m o s t   r e c e n t 
 	 	 / /   e v e n t . 
 	 	 i f   (   t h i s . o p t i o n s . s h o w   & &   t h i s . o p t i o n s . s h o w . d e l a y   )   { 
 	 	 	 d e l a y e d S h o w   =   t h i s . d e l a y e d S h o w   =   s e t I n t e r v a l ( f u n c t i o n ( )   { 
 	 	 	 	 i f   (   t o o l t i p . i s (   " : v i s i b l e "   )   )   { 
 	 	 	 	 	 p o s i t i o n (   p o s i t i o n O p t i o n . o f   ) ; 
 	 	 	 	 	 c l e a r I n t e r v a l (   d e l a y e d S h o w   ) ; 
 	 	 	 	 } 
 	 	 	 } ,   $ . f x . i n t e r v a l   ) ; 
 	 	 } 
 
 	 	 t h i s . _ t r i g g e r (   " o p e n " ,   e v e n t ,   {   t o o l t i p :   t o o l t i p   }   ) ; 
 
 	 	 e v e n t s   =   { 
 	 	 	 k e y u p :   f u n c t i o n (   e v e n t   )   { 
 	 	 	 	 i f   (   e v e n t . k e y C o d e   = = =   $ . u i . k e y C o d e . E S C A P E   )   { 
 	 	 	 	 	 v a r   f a k e E v e n t   =   $ . E v e n t ( e v e n t ) ; 
 	 	 	 	 	 f a k e E v e n t . c u r r e n t T a r g e t   =   t a r g e t [ 0 ] ; 
 	 	 	 	 	 t h i s . c l o s e (   f a k e E v e n t ,   t r u e   ) ; 
 	 	 	 	 } 
 	 	 	 } , 
 	 	 	 r e m o v e :   f u n c t i o n ( )   { 
 	 	 	 	 t h i s . _ r e m o v e T o o l t i p (   t o o l t i p   ) ; 
 	 	 	 } 
 	 	 } ; 
 	 	 i f   (   ! e v e n t   | |   e v e n t . t y p e   = = =   " m o u s e o v e r "   )   { 
 	 	 	 e v e n t s . m o u s e l e a v e   =   " c l o s e " ; 
 	 	 } 
 	 	 i f   (   ! e v e n t   | |   e v e n t . t y p e   = = =   " f o c u s i n "   )   { 
 	 	 	 e v e n t s . f o c u s o u t   =   " c l o s e " ; 
 	 	 } 
 	 	 t h i s . _ o n (   t r u e ,   t a r g e t ,   e v e n t s   ) ; 
 	 } , 
 
 	 c l o s e :   f u n c t i o n (   e v e n t   )   { 
 	 	 v a r   t h a t   =   t h i s , 
 	 	 	 t a r g e t   =   $ (   e v e n t   ?   e v e n t . c u r r e n t T a r g e t   :   t h i s . e l e m e n t   ) , 
 	 	 	 t o o l t i p   =   t h i s . _ f i n d (   t a r g e t   ) ; 
 
 	 	 / /   d i s a b l i n g   c l o s e s   t h e   t o o l t i p ,   s o   w e   n e e d   t o   t r a c k   w h e n   w e ' r e   c l o s i n g 
 	 	 / /   t o   a v o i d   a n   i n f i n i t e   l o o p   i n   c a s e   t h e   t o o l t i p   b e c o m e s   d i s a b l e d   o n   c l o s e 
 	 	 i f   (   t h i s . c l o s i n g   )   { 
 	 	 	 r e t u r n ; 
 	 	 } 
 
 	 	 / /   C l e a r   t h e   i n t e r v a l   f o r   d e l a y e d   t r a c k i n g   t o o l t i p s 
 	 	 c l e a r I n t e r v a l (   t h i s . d e l a y e d S h o w   ) ; 
 
 	 	 / /   o n l y   s e t   t i t l e   i f   w e   h a d   o n e   b e f o r e   ( s e e   c o m m e n t   i n   _ o p e n ( ) ) 
 	 	 i f   (   t a r g e t . d a t a (   " u i - t o o l t i p - t i t l e "   )   )   { 
 	 	 	 t a r g e t . a t t r (   " t i t l e " ,   t a r g e t . d a t a (   " u i - t o o l t i p - t i t l e "   )   ) ; 
 	 	 } 
 
 	 	 r e m o v e D e s c r i b e d B y (   t a r g e t   ) ; 
 
 	 	 t o o l t i p . s t o p (   t r u e   ) ; 
 	 	 t h i s . _ h i d e (   t o o l t i p ,   t h i s . o p t i o n s . h i d e ,   f u n c t i o n ( )   { 
 	 	 	 t h a t . _ r e m o v e T o o l t i p (   $ (   t h i s   )   ) ; 
 	 	 } ) ; 
 
 	 	 t a r g e t . r e m o v e D a t a (   " u i - t o o l t i p - o p e n "   ) ; 
 	 	 t h i s . _ o f f (   t a r g e t ,   " m o u s e l e a v e   f o c u s o u t   k e y u p "   ) ; 
 	 	 / /   R e m o v e   ' r e m o v e '   b i n d i n g   o n l y   o n   d e l e g a t e d   t a r g e t s 
 	 	 i f   (   t a r g e t [ 0 ]   ! = =   t h i s . e l e m e n t [ 0 ]   )   { 
 	 	 	 t h i s . _ o f f (   t a r g e t ,   " r e m o v e "   ) ; 
 	 	 } 
 	 	 t h i s . _ o f f (   t h i s . d o c u m e n t ,   " m o u s e m o v e "   ) ; 
 
 	 	 i f   (   e v e n t   & &   e v e n t . t y p e   = = =   " m o u s e l e a v e "   )   { 
 	 	 	 $ . e a c h (   t h i s . p a r e n t s ,   f u n c t i o n (   i d ,   p a r e n t   )   { 
 	 	 	 	 $ (   p a r e n t . e l e m e n t   ) . a t t r (   " t i t l e " ,   p a r e n t . t i t l e   ) ; 
 	 	 	 	 d e l e t e   t h a t . p a r e n t s [   i d   ] ; 
 	 	 	 } ) ; 
 	 	 } 
 
 	 	 t h i s . c l o s i n g   =   t r u e ; 
 	 	 t h i s . _ t r i g g e r (   " c l o s e " ,   e v e n t ,   {   t o o l t i p :   t o o l t i p   }   ) ; 
 	 	 t h i s . c l o s i n g   =   f a l s e ; 
 	 } , 
 
 	 _ t o o l t i p :   f u n c t i o n (   e l e m e n t   )   { 
 	 	 v a r   i d   =   " u i - t o o l t i p - "   +   i n c r e m e n t s + + , 
 	 	 	 t o o l t i p   =   $ (   " < d i v > "   ) 
 	 	 	 	 . a t t r ( { 
 	 	 	 	 	 i d :   i d , 
 	 	 	 	 	 r o l e :   " t o o l t i p " 
 	 	 	 	 } ) 
 	 	 	 	 . a d d C l a s s (   " u i - t o o l t i p   u i - w i d g e t   u i - c o r n e r - a l l   u i - w i d g e t - c o n t e n t   "   + 
 	 	 	 	 	 (   t h i s . o p t i o n s . t o o l t i p C l a s s   | |   " "   )   ) ; 
 	 	 $ (   " < d i v > "   ) 
 	 	 	 . a d d C l a s s (   " u i - t o o l t i p - c o n t e n t "   ) 
 	 	 	 . a p p e n d T o (   t o o l t i p   ) ; 
 	 	 t o o l t i p . a p p e n d T o (   t h i s . d o c u m e n t [ 0 ] . b o d y   ) ; 
 	 	 t h i s . t o o l t i p s [   i d   ]   =   e l e m e n t ; 
 	 	 r e t u r n   t o o l t i p ; 
 	 } , 
 
 	 _ f i n d :   f u n c t i o n (   t a r g e t   )   { 
 	 	 v a r   i d   =   t a r g e t . d a t a (   " u i - t o o l t i p - i d "   ) ; 
 	 	 r e t u r n   i d   ?   $ (   " # "   +   i d   )   :   $ ( ) ; 
 	 } , 
 
 	 _ r e m o v e T o o l t i p :   f u n c t i o n (   t o o l t i p   )   { 
 	 	 t o o l t i p . r e m o v e ( ) ; 
 	 	 d e l e t e   t h i s . t o o l t i p s [   t o o l t i p . a t t r (   " i d "   )   ] ; 
 	 } , 
 
 	 _ d e s t r o y :   f u n c t i o n ( )   { 
 	 	 v a r   t h a t   =   t h i s ; 
 
 	 	 / /   c l o s e   o p e n   t o o l t i p s 
 	 	 $ . e a c h (   t h i s . t o o l t i p s ,   f u n c t i o n (   i d ,   e l e m e n t   )   { 
 	 	 	 / /   D e l e g a t e   t o   c l o s e   m e t h o d   t o   h a n d l e   c o m m o n   c l e a n u p 
 	 	 	 v a r   e v e n t   =   $ . E v e n t (   " b l u r "   ) ; 
 	 	 	 e v e n t . t a r g e t   =   e v e n t . c u r r e n t T a r g e t   =   e l e m e n t [ 0 ] ; 
 	 	 	 t h a t . c l o s e (   e v e n t ,   t r u e   ) ; 
 
 	 	 	 / /   R e m o v e   i m m e d i a t e l y ;   d e s t r o y i n g   a n   o p e n   t o o l t i p   d o e s n ' t   u s e   t h e 
 	 	 	 / /   h i d e   a n i m a t i o n 
 	 	 	 $ (   " # "   +   i d   ) . r e m o v e ( ) ; 
 
 	 	 	 / /   R e s t o r e   t h e   t i t l e 
 	 	 	 i f   (   e l e m e n t . d a t a (   " u i - t o o l t i p - t i t l e "   )   )   { 
 	 	 	 	 e l e m e n t . a t t r (   " t i t l e " ,   e l e m e n t . d a t a (   " u i - t o o l t i p - t i t l e "   )   ) ; 
 	 	 	 	 e l e m e n t . r e m o v e D a t a (   " u i - t o o l t i p - t i t l e "   ) ; 
 	 	 	 } 
 	 	 } ) ; 
 	 } 
 } ) ; 
 
 } (   j Q u e r y   )   ) ; 
    9       https://www.campusinteraction.com/js/jquery-ui-1.10.3.js                                      Q        Q        Q        Q        Q        Q        Q        Q        Q	        Q
        Q        Q        Q        Q        Q        Q        Q        Q        Q        Q        Q        Q        Q        Q        Q        Q        Q        Q        Q        Q        Q        Q         Q!        Q : < : < <  <                       &  (  (  %  % ( % ( ) ( ) )g ) )i ) )i ) ) ) ) *( ) ** *: ** *< *z *< *| * *| * * * * , * , ,C , ,E ,w ,E ,y , ,y , . , . 0 . 0 1e 0 1g 3 1g 3 5 3 5 9 5 9 : 9 :    jQuery!!            +H!!       C       B   J                        N             "    "                    G       Q      Q>   Q      Q      5    D   Q[   6    Q      
   5    [   =   ]   [   ]   X ]   .]   (]   #]   ]	   ]
   $]   %]   k]   n]   o]   l]   j]   m]   "]   !]   X ]   ']    ]   	]   &]   ]    Q   5      
[         5   5   : ]      ]      ]   	   ]   
   ]     Q      
   5!   5"   [      5!   5#   $      5!   #   
   :       ]$      ]%      ]&    Q   ='   : (   
?: 5)    4      *   
Z   =+   `    =,   `       Q   5   5-          5      6-   Q   ='   : $   
=.   =/   : 0   
=.   : $   
=.   : .      5         5   50   : 60   Q   5       1   
2   53   4   
:  :   65   Q   56   =7   8   9   
=:   : q6;   Q   5      
[      ]<      ]=    Q      
   5    [   [      ]>      ]?   ]@      ]A    Q+:,	<Khp+        
	          
+      "  :    ui   extend   1.10.3   version   BACKSPACE   COMMA   DELETE	   DOWN   END   ENTER   ESCAPE	   HOME	   LEFT   NUMPAD_ADD   NUMPAD_DECIMAL   NUMPAD_DIVIDE   NUMPAD_ENTER   NUMPAD_MULTIPLY   NUMPAD_SUBTRACT   PAGE_DOWN   PAGE_UP   PERIOD   RIGHT   SPACE   TAB   UP   keyCode   fn   focus   scrollParent   zIndex   uniqueId   removeUniqueId	   expr   :   createPseudo	   data   focusable   tabbable   <a>   outerWidth   jquery	   each   Width   Height   addBack   a-b   a   removeData	   exec   navigator   userAgent   toLowerCase   ie   support   onselectstart   document   createElement   div   selectstart!   disableSelection   enableSelection   add	   call   plugin   hasScroll!!      $   undefined	   uuid   runiqueId   focusable   visible       +H!!          focusable N    <    z      0       5!!          visible   ~    ~                 B  7  s  /  s     3          5 5!!   ^ui-id-\d+$    !!            !!       !!   BACKSPACE!!!!   COMMA!!!!   DELETE!!!!	   DOWN!!!!   END!!!!   ENTER!!!!   ESCAPE!!!!	   HOME!!!!	   LEFT!!!!   NUMPAD_ADD!!!!   NUMPAD_DECIMAL!!!!   NUMPAD_DIVIDE!!!!   NUMPAD_ENTER!!!!   NUMPAD_MULTIPLY!!!!   NUMPAD_SUBTRACT!!!!   PAGE_DOWN!!!!   PAGE_UP!!!!   PERIOD!!!!   RIGHT!!!!   SPACE!!!!   TAB!!!!   UP!!    !!       !!   version!!!!   keyCode!!    !!     	      .focus<c                                                 5  d  -  d  ,                  G    : !!   	   orig       +H!!          .focusb Q  `  I  `  -      3          delay    fn   B    6    6  /      "       	   elem   B    &    &  1              555;5!!          scrollParentB    *
    *
  <      2          B  H    @    ?   0          5    B  @	  	  8	  	  C   0          5 5!!          zIndexB >
    6
    K      b       5!!          uniqueIdB  )    !    h                B  I    A    i      "       55!!          removeUniqueIdB    )    )  p                B    $    $  q      "       55!!       !!   focus!!!!   scrollParent!!!!   zIndex!!!!   uniqueId!!!!   removeUniqueId!!    !!           .data<b   2    2                   dataName   B   -    -               5 5!!          .data<b Z    R       
          5 !!          focusableB   	    	               5!!          tabbableB                      5 !!       !!	   data!!!!   focusable!!!!   tabbable!!    !!        B L    D       (   `       	   name 	   side 	   type 	   orig    reduce      reduce n    _          P       	   elem 	   size    border    margin    B                2       5 5   B            #   2       	   size    B  f    ^                 5 5   B            "   B       	   size    margin   B  b    Z                 5 55!!          $.fn.addBackb   {    {               5 !!    	   !   $.fn.removeData<c                                                 *    "                      G       !!      removeData       +H!!          $.fn.removeDatab L    D          3       5;5!!   msie [\w.]+    !!        !   disableSelectionB    t    t                  B C  o  ;  o     #          5 5!!          enableSelectionB                      5!!       !!!   disableSelection!!!!   enableSelection!!    !!     	      addC           -                                     <    4    
        	          5    T  75   W  QT Kh   mW   V  5   V   V  5   V   7D   QZ    8QV  5   V   7   
Z   T `    T V   7`    QQLMQN=m     ui   prototype   plugins	   push!!      module   option   set   i   proto       +H;   "   o          5!!       	   callB   |     |        @       5!!       !!   add!!!!	   call!!    !!           hasScrollB    "     "  "     0       5!!       !!   plugin!!!!   hasScroll!!    ;5 !!       C       )                                       "  \  "  \  <                 G>   Q    5   5      Q   5      Q       6   Q      6   Q   5      6   Q   5      6   Q      6   Q   5   Z    6   Q   5   [   =   ]	   =
   ]   =   ]   [   B]   @]   ]      ]      5   ]      5   ]      5   ]      5   ]      ]      5   ]      ]   	   ]   
   ]      ]      ]      ]      ]      ]      ]       ]!      ]"      ]#   6   Q   $   
[   =%   ]&   ='   ](       Q K    4 R         
 :    Array   prototype   slice   cleanData   widget   extend   bridge   Widget%   _childConstructors   widgetName   #   widgetEventPrefix   <div>   defaultElement   disabled   create   options   _createWidget	   noop#   _getCreateOptions'   _getCreateEventData   _create   _init   destroy   _destroy   option   _setOptions   _setOption   enable   disable   _on	   _off   _delay   _hoverable   _focusable   _trigger	   each   fadeIn	   show   fadeOut	   hide!!      $   undefined	   uuid   slice   _cleanData       +H!!     	      $.cleanDatac  t          A                                    l#  8$  d#  8$  A               >W   Q I   m   V  :     
=    Q     Qv  Q V   #?W   QQT  V   7W  @   T   Q I:Y B
 B3 G B H    triggerHandler   remove!!      elems   i	   elem       !!          e         +H;        "          Y      3      P      5!!    	      $.widgetc  x                                  @            N$  b3  F$  b3  K                [       QT      
=   : >7W  QT      
=   : ?7U  QV  =   T     QT        U Q  5      Q  5   5         
:     8Q  V    V  7D   Q[   8Q  V  7T  7W   Q  V  7T     8   Q     
   V   [   T 5   ]        
[   T : ]	   Z    ]
    Q   A,  R  W  QV    5      
[   V  5   : 6   Q     
T     Q     5      
V  [   V      V  5   	   T  ]      [	      ]   V  ]   T  ]      ]   : 6   QV   3        
V   5
   
    QV   %
   Q       5
      
    Q  5      
T      Q
 n n x        split   .   -   Widget	   expr   :   toLowerCase   extend   version   _proto%   _childConstructors   widget   options	   each#   widgetEventPrefix   constructor   namespace   widgetName   widgetFullName   prototype	   push   bridge!!	   	   name	   base   prototype   fullName'   existingConstructor   constructor   basePrototype!   proxiedPrototype   namespace      +H!!            !!        B N&  &  F&  &  [  3          5 !!            !!       7   $.widget/$[namespace][name]c  W         (                                    
  
'  u(  '  u(  a  0             	W   QW  QV  5           AT  T ,  R V         V      
T  T  Q l i    _createWidget   length!!      options   element   arguments   .this       +H;3       5!!            !!       !!   version!!!!   _proto!!!!%   _childConstructors!!    !!            !!           $.widget/<c  E          )                         
            Y+  -  Q+  -  }                       
   :             8Q         :  8Q       isFunction!!   	   prop   value       +H!!        E   $.widget/</proxiedPrototype[prop]<c                                                      +  -  +  -                          Q      Q     !!      _super   _superApply         +H!!           _superB  ,  K,  +  K,              5 !!          _superApplyB g,  ,  _,  ,              5!!       I   $.widget/</proxiedPrototype[prop]</<b  ,  -  ,  -              5 ;5;5!!       !!#   widgetEventPrefix!!    !!       !!   constructor!!!!   namespace!!!!   widgetName!!!!   widgetFullName!!    !!           $.widget/<b 1  @2  1  @2    :          5 ;5!!    	      $.widget.extendc  `                                            3  =6  w3  =6                 	W  Q       
V  ?l W   Q>W  QV      W  Q   mV   V  7K   mW  V   V  7V  7W  QV   V  7   
V  : E   QV     I         
V  : z   T  V        
T  V  7: 0      5      
[    T  V  7V  : #      5      
[   V  : 8Q   T  V  V  8QQLMQNV  #?W  QQV  V  T      ! 8    #  	  	   call   length   hasOwnProperty   isPlainObject   widget   extend!!      target   input   inputIndex   inputLength   key   value   arguments       +H!!            !!            ;   J          9   !  a      5!!    	      $.widget.bridgec  9                                               Z6  ;  R6  ;                      5    5   D   Q      Q  5          8Q     prototype   widgetFullName   fn!!   	   name   object   fullName       +H!!       5   $.widget.bridge/$.fn[name]c           G                                     6  ;  6  ;           	       	W  QW  Q   '=    HW   Q     
V  ?l    QV     QV    E   Q      C     5   5      
@Z      `       
   : O          QV      V     
     Q   V     
    Q   
"
       string	   call   length   widget   extend   apply   concat	   each!!      options   isMethodCall	   args   returnValue   arguments   .this      +H!!       9   $.widget.bridge/$.fn[name]/<b  8  :  8  :       B       5!!       9   $.widget.bridge/$.fn[name]/<b  :  ;  :  ;       2       5 ;5;5!!    	      $.Widgetc                                                      ;  <  ;  <                   / !!              +H;      5 !!       !!   disabled!!!!   create!!    !!          _createWidgetB <  @  <  @       2          element    B >  4?  >  4?  "     "       55!!          destroyB  A  "D  A  "D  9            5!!          widgetB  ID  gD  AD  gD  T            5 !!          optionB {D  qH  sD  qH  X            5!!          _setOptionsB H  H  H  H       "       5 !!          _setOptionB I  hJ  I  hJ       "       5!!          enableB  |J  J  tJ  J              5 !!          disableB  J  J  J  J              5!!          _onB K  DQ  K  DQ              +   suppressDisabledCheck    element    delegateElement    instance   B M  ?Q  ~M  ?Q       P          handler      handlerProxy  M  pO  M  pO       #       555!!       	   _offB VQ  R  NQ  R              5 !!          _delayB "R  S  R  S       2          handler    instance      handlerProxy  NR  R  9R  R              5 5!!          _hoverableB &S  OT  S  OT                 B S  S  S  S              5    B S  FT  S  FT              5 5!!          _focusableB gT  U  _T  U                 B T  U  T  U              5    B 4U  U  ,U  U              5 5!!          _triggerB U  X  U  X       B       5!!       !!   widgetName!!!!#   widgetEventPrefix!!!!   defaultElement!!!!   options!!!!   _createWidget!!!!#   _getCreateOptions!!!!'   _getCreateEventData!!!!   _create!!!!   _init!!!!   destroy!!!!   _destroy!!!!   widget!!!!   option!!!!   _setOptions!!!!   _setOption!!!!   enable!!!!   disable!!!!   _on!!!!	   _off!!!!   _delay!!!!   _hoverable!!!!   _focusable!!!!   _trigger!!    !!       !!	   show!!!!	   hide!!    !!        C  "          
                                     X  \  X  \                     5    5   =          8Q 8    Widget   prototype   _!!      method   defaultEffect       +H!!        B 3Y  \  +Y  \    .             element    callback   B T\  \  L\  \  /     "       55;5;5!!       C           s                                    \  m  \  m  <                 GB   Q       :    
     Q      
=   [   =   ]   [   =   ]   ?]   >]	   ]
      ]      ]      ]      ]      ]      ]      ]   	   ]   
   ]      ]      ]    Q ^ g      C     document   mouseup   widget   ui.mouse   1.10.3   versionG   input,textarea,button,select,option   cancel   distance   delay   options   _mouseInit   _mouseDestroy   _mouseDown   _mouseMove   _mouseUp#   _mouseDistanceMet   _mouseDelayMet   _mouseStart   _mouseDrag   _mouseStop   _mouseCapture!!      $   undefined   mouseHandled       +H!!       B  ?]  \]  7]  \]  ?            5 !!       !!   cancel!!!!   distance!!!!   delay!!    !!           _mouseInitB  ]  _  ]  _  J     "       	   that   B R^  ^  J^  ^  N  /          5    B ^  _  ^  _  Q  +           55!!          _mouseDestroyB  5`  !a  -`  !a  ^     "       5 !!          _mouseDownB 9a  g  1a  g  g            	   that   B  d  4d  d  4d  {  .          5    B Nf  }f  Ff  }f    $          5    B f  f  f  f    "          5 5!!          _mouseMoveB g  i  g  i       B       5!!          _mouseUpB j  k  i  k       2       5 !!       #   _mouseDistanceMetB k  el  k  el              5!!          _mouseDelayMetB  l  l  yl  l              5 !!          _mouseStartB  m   m  m   m              5!!          _mouseDragB  7m  Gm  /m  Gm              5 !!          _mouseStopB  ^m  nm  Vm  nm              5 !!          _mouseCaptureB  m  m  m  m              5!!       !!   version!!!!   options!!!!   _mouseInit!!!!   _mouseDestroy!!!!   _mouseDown!!!!   _mouseMove!!!!   _mouseUp!!!!#   _mouseDistanceMet!!!!   _mouseDelayMet!!!!   _mouseStart!!!!   _mouseDrag!!!!   _mouseStop!!!!   _mouseCapture!!    ;5!!       C       A         -                  )           m    m                     G       
=      5   5   [   =   ]   =   ]   [    C]   =	   ]
   B]   B]   B]   =   ]   B]   B]   B]   =   ]   B]   B]   B]   B]   X]   =   ]   C]   ]   ]   B]   =    ]!   ]"   B]#   B]$   @]   @]%   @]&   ]'      ](      ])      ]*      ]+      ],      ]-      ].      ]/   	   ]0   
   ]1      ]2      ]3      ]4      ]5      ]6      ]7      ]8      ]9      ]:      ];   [   ]<      ]=    Q   5   5>   ?   
=@   =   [      ]%      ]&      ]    Q   5   5>   ?   
=@   =   [      ]%      ]&    Q   5   5>   ?   
=@   =   [!      ]%       ]&    Q   5   5>   ?   
=@   =   [$   "   ]%   #   ]    Q   5   5>   ?   
=@   =   ['   %   ]%   &   ]    Q   5   5>   ?   
=@   =#   [)   (   ]%    Q   5   5>   ?   
=@   =$   [,   *   ]%   +   ]&    Q   /         + 9 B I        $ I              e e w  w     widget   ui.draggable   ui   mouse   1.10.3   version	   drag#   widgetEventPrefix   addClasses   parent   appendTo	   axis#   connectToSortable   containment	   auto   cursor   cursorAt	   grid   handle   original   helper   iframeFix   opacity!   refreshPositions   revert   revertDuration   default   scope   scroll#   scrollSensitivity   scrollSpeed	   snap	   both   snapMode   snapTolerance   stack   zIndex   start	   stop   options   _create   _destroy   _mouseCapture   _mouseStart   _mouseDrag   _mouseStop   _mouseUp   cancel   _getHandle   _createHelper/   _adjustOffsetFromHelper!   _getParentOffset%   _getRelativeOffset   _cacheMargins/   _cacheHelperProportions   _setContainment%   _convertPositionTo#   _generatePosition   _clear   _trigger   plugins   _uiHash   plugin   add   draggable!!      $   undefined       +H!!       !!   addClasses!!!!   appendTo!!!!	   axis!!!!#   connectToSortable!!!!   containment!!!!   cursor!!!!   cursorAt!!!!	   grid!!!!   handle!!!!   helper!!!!   iframeFix!!!!   opacity!!!!!   refreshPositions!!!!   revert!!!!   revertDuration!!!!   scope!!!!   scroll!!!!#   scrollSensitivity!!!!   scrollSpeed!!!!	   snap!!!!   snapMode!!!!   snapTolerance!!!!   stack!!!!   zIndex!!!!	   drag!!!!   start!!!!	   stop!!    !!           _createB  ap  q  Yp  q       B       5 !!          _destroyB  q  Hr  q  Hr              5 !!          _mouseCaptureB cr  u  [r  u       2         B  s  u  s  u  !  @          5 5!!          _mouseStartB 1u    )u    /     R       5!!          _mouseDragB              r       5 !!          _mouseStopB                        event 	   that   B  L    D      d           55!!          _mouseUpB #             "         B  u    m      /          5 5!!          cancelB    %    %       2       5 !!          _getHandleB =    5                5 !!          _createHelperB              2       5!!       /   _adjustOffsetFromHelperB           "   r       5!!       !   _getParentOffsetB  .  (  &  (       2       5 !!       %   _getRelativeOffsetB  H    @    +     2       5 !!          _cacheMarginsB          9            5!!       /   _cacheHelperProportionsB    b    b  B  "          5!!          _setContainmentB    V  w  V  I     r       5!!       %   _convertPositionToB v  z  n  z       2       5 !!       #   _generatePositionB                     5!!          _clearB               "       5!!          _triggerB              "       5!!            !!          _uiHashB  :    2                5!!       !!   version!!!!#   widgetEventPrefix!!!!   options!!!!   _create!!!!   _destroy!!!!   _mouseCapture!!!!   _mouseStart!!!!   _mouseDrag!!!!   _mouseStop!!!!   _mouseUp!!!!   cancel!!!!   _getHandle!!!!   _createHelper!!!!/   _adjustOffsetFromHelper!!!!!   _getParentOffset!!!!%   _getRelativeOffset!!!!   _cacheMargins!!!!/   _cacheHelperProportions!!!!   _setContainment!!!!%   _convertPositionTo!!!!#   _generatePosition!!!!   _clear!!!!   _trigger!!!!   plugins!!!!   _uiHash!!    !!          startB   &    &       B          event 	   inst    uiSortable   B              &   "       55!!       	   stopB 7  E  /  E  $     B          event 	   inst    uiSortable    B  3  ?  +  ?  *  !   R       5 5!!       	   dragB V    N    I     R          event    ui 	   inst 	   that   B          M  !          +   innermostIntersecting    thisSortable    B    D  ~  D  Y  $   "       5   B  o    g    r  ,          5 55!!       !!   start!!!!	   stop!!!!	   drag!!    !!           startB               "       5 !!       	   stopB    B    B       "       5!!       !!   start!!!!	   stop!!    !!           startB   2  z  2       "       5 !!       	   stopB C    ;         "       5!!       !!   start!!!!	   stop!!    !!           startB               "       5 !!       	   dragB                    5!!       !!   start!!!!	   drag!!    !!           startB  V    N         "          i   B            e   "       55!!       	   dragB                     5 !!       !!   start!!!!	   drag!!    !!           startB    o    o  f     2          min    B 6    .    i  0          5    B   >  
  >  p            5 5!!       !!   start!!    !!           startB   Y    Y  x     "       5 !!       	   stopB j    b         "       5!!       !!   start!!!!	   stop!!    ;5 !!       C  i     %                                                              G       Q       
=   [   =   ]   =   ]   [   =   ]   B]   C]	   B]
   B]   =   ]   =   ]   @]   @]   @]   @]   @]   ]      ]      ]      ]      ]      ]      ]      ]   	   ]   
   ]    Q   5      6   Q   5   [   @]   [   Z    ]   ]      ]       ]      ]!      ]"      ]#   6$   Q         /  : e         widget   ui.droppable   1.10.3   version	   drop#   widgetEventPrefix   *   accept   activeClass   addClasses   greedy   hoverClass   default   scope   intersect   tolerance   activate   deactivate   out	   over   options   _create   _destroy   _setOption   _activate   _deactivate   _over	   _out   _drop   ui   current   droppables   prepareOffsets   dragStart	   drag   dragStop   ddmanager!!      $   undefined   isOverAxis       +H!!           isOverAxis -                    5 !!       !!   accept!!!!   activeClass!!!!   addClasses!!!!   greedy!!!!   hoverClass!!!!   scope!!!!   tolerance!!!!   activate!!!!   deactivate!!!!	   drop!!!!   out!!!!	   over!!    !!          _createB               "          accept    B v    n      8          5 5!!          _destroyB  /     '          2       5 !!          _setOptionB 8    0         3         value   B           7          5 5!!          _activateB     	         2       5!!          _deactivateB              2       5!!          _overB              B       5 !!       	   _outB              B       5!!          _dropB   ^    ^                 draggable )   childrenIntersection   B      
      V   "       55!!          uiB n    f    /            5 !!       !!   version!!!!#   widgetEventPrefix!!!!   options!!!!   _create!!!!   _destroy!!!!   _setOption!!!!   _activate!!!!   _deactivate!!!!   _over!!!!	   _out!!!!   _drop!!!!   ui!!    !!          $.ui.intersectb         :     0       5 !!       !!   default!!    !!           prepareOffsetsB P  O H  O h     p       5 !!       	   dropB `  X       @          draggable    event    dropped    B  8  0    U   B       55!!          dragStartB ! ~  ~      0          draggable    event   B   y  y   M           55!!       	   dragB  <  <      @          draggable    event   B  '	 6 	 6   K             scope    B  % q  q   I          5 55!!          dragStopB Q  I               5!!       !!   current!!!!   droppables!!!!   prepareOffsets!!!!	   drop!!!!   dragStart!!!!	   drag!!!!   dragStop!!    ;5!!       C       8         ,                              uy  uy                  G       Q      Q       
=      5   5   [   =   ]   =   ]   [   B]   B]	   =
   ]   =   ]   B]   B]   B]   B]   B]   =   ]   B]   @]   @]   
]   
]   Z]   @]   @]   @]   ]      ]      ]      ]       ]!      ]"      ]#   	   ]$   
   ]%      ]&      ]'      ](      ])   [      ]*      ]+      ],      ]-      ].      ]/      ]0      ]1   ]2      ]3   [   ]4      ]    Q   5   55   6   
=7   =	   [      ]    Q   5   55   6   
=7   =   [!      ]      ]       ]    Q   5   55   6   
=7   =   [%   "   ]   #   ]   $   ]    Q   5   55   6   
=7   =   [)   &   ]   '   ]   (   ]    Q   5   55   6   
=7   =   [+   *   ]    Q  	 	 	 
 
T 
 
 
 
 
  3 P U  i i      ' H  M ] d M m m     widget   ui.resizable   ui   mouse   1.10.3   version   resize#   widgetEventPrefix   alsoResize   animate	   slow   animateDuration   swing   animateEasing   aspectRatio   autoHide   containment   ghost	   grid   e,s,se   handles   helper   maxHeight   maxWidth   minHeight   minWidth   zIndex   start	   stop   options   _create   _destroy   _mouseCapture   _mouseStart   _mouseDrag   _mouseStop1   _updateVirtualBoundaries   _updateCache   _updateRatio   _respectSize+   _proportionallyResize   _renderProxy   e   w   n   s   se   sw   ne   nw   _change   _propagate   plugins   plugin   add   resizable!!      $   undefined   num   isNumber       +H!!           num                 5!!          isNumber  >  >             5 !!       !!   alsoResize!!!!   animate!!!!   animateDuration!!!!   animateEasing!!!!   aspectRatio!!!!   autoHide!!!!   containment!!!!   ghost!!!!	   grid!!!!   handles!!!!   helper!!!!   maxHeight!!!!   maxWidth!!!!   minHeight!!!!   minWidth!!!!   zIndex!!!!   resize!!!!   start!!!!	   stop!!    !!          _createB  : % 2 % 	            	   axis 	   that    o   B  !  ! i	     R       5    B  " # " # 	  "   2       5    B  d$ $ \$ $ 	     "       5   B  % % $ % 	     2       5 5!!          _destroyB  & ) % ) 	     "         B E& ' =& ' 	            5 5!!          _mouseCaptureB ") #* ) #* 	     2       5!!          _mouseStartB <* 0 4* 0 	     B       5 !!          _mouseDragB 0 6 0 6 
            5 !!          _mouseStopB 6 w; 6 w; T
     R       5 !!       1   _updateVirtualBoundariesB ; ? ; ? 
  #   b       5!!          _updateCacheB ? A ? A 
     R       5 !!          _updateRatioB 6A /C .A /C 
     R       5 !!          _respectSizeB IC G AC G 
            5 !!       +   _proportionallyResizeB  H K H K 
      R       5!!          _renderProxyB  K N K N      2       5 !!          eB ;N N 3N N 4            5!!          wB N O N O 7            5!!          nB !O O O O ;            5!!          sB O P O P ?            5!!          seB P P 
P P B            5 !!          swB P Q P Q E            5 !!          neB ,Q Q $Q Q H            5 !!          nwB Q 6R Q 6R K            5 !!       !!   e!!!!   w!!!!   n!!!!   s!!!!   se!!!!   sw!!!!   ne!!!!   nw!!    !!          _propagateB QR R IR R P            5 !!            !!          uiB  R S R S W            5 !!       !!   version!!!!#   widgetEventPrefix!!!!   options!!!!   _create!!!!   _destroy!!!!   _mouseCapture!!!!   _mouseStart!!!!   _mouseDrag!!!!   _mouseStop!!!!1   _updateVirtualBoundaries!!!!   _updateCache!!!!   _updateRatio!!!!   _respectSize!!!!+   _proportionallyResize!!!!   _renderProxy!!!!   _change!!!!   _propagate!!!!   plugins!!!!   ui!!    !!        	   stopB =T bY 5T bY k     B          event 	   that    pr    B  jW UY bW UY z             55!!       !!	   stop!!    !!          startB  Y _ Y _      b          element    p    B \ \ \ \   8          5 5!!          resizeB _ f _ f             5 !!       	   stopB  f Fi f Fi      2       5 !!       !!   start!!!!   resize!!!!	   stop!!    !!           startB  i  l i  l      b          _store    B i j i j                B  j j i j             5 5   B k k k k !  (          5 5!!          resizeB l p l p '     b          ui    delta    _alsoResize   B |m Jo sm Jo 1                c    B  m Co m Co 2     2          start    style    B n &o n &o 6             555   B o o o o B  !          5 5!!       	   stopB  p Lp p Lp H            5 !!       !!   start!!!!   resize!!!!	   stop!!    !!           startB  p !r p !r O            5!!          resizeB  5r r -r r ]     "       5!!       	   stopB  r ~s r ~s d     "       5!!       !!   start!!!!   resize!!!!	   stop!!    !!           resizeB  s my s my o            5 !!       !!   resize!!    ;5!!       C           a                                    y v y v                  G       
=      5   5   [   =   ]   [    =   ]   C]   >]	   =
   ]   =   ]   @]   @]   @]   @]   @]   @]   ]      ]      ]      ]      ]      ]    Q   /       widget   ui.selectable   ui   mouse   1.10.3   version	   body   appendTo   autoRefresh   distance   *   filter   touch   tolerance   selected   selecting   start	   stop   unselected   unselecting   options   _create   _destroy   _mouseStart   _mouseDrag   _mouseStop!!      $   undefined       +H!!       !!   appendTo!!!!   autoRefresh!!!!   distance!!!!   filter!!!!   tolerance!!!!   selected!!!!   selecting!!!!   start!!!!	   stop!!!!   unselected!!!!   unselecting!!    !!          _createB  z j~ z j~      2          selectees 	   that    B  { } |{ }                B  | } { }             5 55!!          _destroyB  ~ : x~ :             5 !!          _mouseStartB S  K       R          event 	   that    B  Z  R    5   "       5   B  >  6    3   B       55!!          _mouseDragB * 3 " 3 /               event 	   that    options    x1    y1    x2    y2    B      C            5 5!!          _mouseStopB K n C n      2          event 	   that   B        5          5    B        3          5 5!!       !!   version!!!!   options!!!!   _create!!!!   _destroy!!!!   _mouseStart!!!!   _mouseDrag!!!!   _mouseStop!!    ;5!!       C       U         (                              9  9                  G       Q      Q       
=      5   5   ['   =   ]   =   ]   B]   [   =	   ]
   B]   B]   B]   =   ]   B]   C]   B]   B]   B]   B]   =   ]   =   ]   B]   B]   B]   C]   ]   ]   =    ]!   ="   ]#   X]$   @]%   @]&   @]'   @](   @])   @]*   @]+   @],   @]   @]-   @].   @]/   ]0      ]1      ]2      ]3      ]4      ]5      ]6   	   ]7   
   ]8      ]9      ]:      ];      ]<      ]=      ]>      ]?      ]@      ]A      ]B      ]C      ]D      ]E      ]F      ]G      ]H      ]I      ]J      ]K      ]L      ]M       ]N   !   ]O   "   ]P   #   ]Q   $   ]R   %   ]S   &   ]T    Q     B  A d           , ; f   / H ] z       &        widget   ui.sortable   ui   mouse   1.10.3   version	   sort#   widgetEventPrefix   ready   parent   appendTo	   axis   connectWith   containment	   auto   cursor   cursorAt   dropOnEmpty)   forcePlaceholderSize   forceHelperSize	   grid   handle   original   helper   > *   items   opacity   placeholder   revert   scroll#   scrollSensitivity   scrollSpeed   default   scope   intersect   tolerance   zIndex   activate   beforeStop   change   deactivate   out	   over   receive   remove   start	   stop   update   options   _create   _destroy   _setOption   _mouseCapture   _mouseStart   _mouseDrag   _mouseStop   cancel   serialize   toArray   _intersectsWith-   _intersectsWithPointer)   _intersectsWithSides3   _getDragVerticalDirection7   _getDragHorizontalDirection   refresh   _connectWith#   _getItemsAsjQuery1   _removeCurrentsFromItems   _refreshItems!   refreshPositions%   _createPlaceholder%   _contactContainers   _createHelper/   _adjustOffsetFromHelper!   _getParentOffset%   _getRelativeOffset   _cacheMargins/   _cacheHelperProportions   _setContainment%   _convertPositionTo#   _generatePosition   _rearrange   _clear   _trigger   _uiHash!!      $   undefined   isOverAxis   isFloating       +H!!           isOverAxis  #  #             5 !!          isFloating 8  %              5 !!    "   !!   appendTo!!!!	   axis!!!!   connectWith!!!!   containment!!!!   cursor!!!!   cursorAt!!!!   dropOnEmpty!!!!)   forcePlaceholderSize!!!!   forceHelperSize!!!!	   grid!!!!   handle!!!!   helper!!!!   items!!!!   opacity!!!!   placeholder!!!!   revert!!!!   scroll!!!!#   scrollSensitivity!!!!   scrollSpeed!!!!   scope!!!!   tolerance!!!!   zIndex!!!!   activate!!!!   beforeStop!!!!   change!!!!   deactivate!!!!   out!!!!	   over!!!!   receive!!!!   remove!!!!	   sort!!!!   start!!!!	   stop!!!!   update!!    !!          _createB                  5!!          _destroyB           "       5!!          _setOptionB          3      5 !!          _mouseCaptureB 
                   event    currentItem    validHandle 	   that    B   /  / $  )   "       5   B  ;  3  2  H   "       55!!          _mouseStartB (     B            5 !!          _mouseDragB          r      5 !!          _mouseStopB .  &  A               event 	   that   B      Y  X          5 5!!          cancelB  
    d            5 !!          serializeB          B          o    str    B   n  n      "       55!!          toArrayB          2          o    ret   B  P  H              5 5!!          _intersectsWithB  v  v      2       5!!       -   _intersectsWithPointerB  i  i   !   "       5!!       )   _intersectsWithSidesB  E  E      2       5 !!       3   _getDragVerticalDirectionB  l  d    $          5!!       7   _getDragHorizontalDirectionB        &          5!!          refreshB                 5!!          _connectWithB    
              5 !!       #   _getItemsAsjQueryB          r          items    B  T s L s #            5 5!!       1   _removeCurrentsFromItemsB      ,  #   "       	   list   B 4  +  0  +   0       5 5!!          _refreshItemsB  +  + ;     r       5!!       !   refreshPositionsB I  A  f            5!!       %   _createPlaceholderB          R       	   that    className    o    B  { ? s ?      P          element   B   g  g   /          5 5   B U  M       @       55!!       %   _contactContainersB          2      5 !!          _createHelperB  4  4 /     R       5!!       /   _adjustOffsetFromHelperB Y } Q } H  "   r       5!!       !   _getParentOffsetB   	  	 ]     2       5 !!       %   _getRelativeOffsetB  	 D 	 D z     2       5 !!          _cacheMarginsB  _  W              5!!       /   _cacheHelperProportionsB  "      "          5!!          _setContainmentB           B       5 !!       %   _convertPositionToB          "       5!!       #   _generatePositionB  $  $             5!!          _rearrangeB $ =( $ =(      2          hardRefresh    counter    B  ' 7( ' 7(      "       55!!          _clearB Q( [7 I( [7 &     r         B , S, + S, A             5    B 6- q- .- q- D             5    B g. . _. . K  !          5    B . / . / L  "              c    B . / . / L  7          5 5   B e/ / ]/ / M  "              c    B z/ / r/ / M  7          5 5   B x0 0 p0 0 U  "              c    B 0 0 0 0 U  7          5 5   B K1 1 C1 1 X  "              c    B `1 1 X1 1 X  7          5 55!!          _triggerB  q7 7 i7 7      #      5!!          _uiHashB 7 9 7 9             5!!    (   !!   version!!!!#   widgetEventPrefix!!!!   ready!!!!   options!!!!   _create!!!!   _destroy!!!!   _setOption!!!!   _mouseCapture!!!!   _mouseStart!!!!   _mouseDrag!!!!   _mouseStop!!!!   cancel!!!!   serialize!!!!   toArray!!!!   _intersectsWith!!!!-   _intersectsWithPointer!!!!)   _intersectsWithSides!!!!3   _getDragVerticalDirection!!!!7   _getDragHorizontalDirection!!!!   refresh!!!!   _connectWith!!!!#   _getItemsAsjQuery!!!!1   _removeCurrentsFromItems!!!!   _refreshItems!!!!!   refreshPositions!!!!%   _createPlaceholder!!!!%   _contactContainers!!!!   _createHelper!!!!/   _adjustOffsetFromHelper!!!!!   _getParentOffset!!!!%   _getRelativeOffset!!!!   _cacheMargins!!!!/   _cacheHelperProportions!!!!   _setContainment!!!!%   _convertPositionTo!!!!#   _generatePosition!!!!   _rearrange!!!!   _clear!!!!   _trigger!!!!   _uiHash!!    ;5!!       C  T         =                                    )9  !9                   G=       Q   [   [    ]   6   Q       Q     Q     Q     Q  D  J  s     ui-effects-   effect   effects   jQuery!!      $   undefined   dataSpace       +H!!            !!       !!   effect!!    !!        C       O         6                  *           : y w: y                 G       Q      Q      Q=    W   Q      QZ   [      ]      ]   `    [	      ]      ]   `   [   
   ]      ]   `   [      ]      ]   `   [      ]   =   ]      ]   `      Q      6      Q[   [   [   [   >]   =   ]   ]	   [   ?]   =   ]   ]
   [   ]   =   ]   ]   ]   ]   [   [   [   >]   =   ]   ]   [   ?]   =   ]   ]   [   ]   =   ]   ]   ]   ]      Q["   [   C]   X ]   ]   [    ?]   ]   [!   Xh]   C]   ]      Q   [#   6    	  Q   =   : >7W  Q   5      QV  5   =   6   Q 	  V  5   5      
=   : 6   Q      $    Q         
   5   [.   %   ]   &   ]    '   ]!   (   ]"   )   ]#   *   ]$   +   ]%   ,   ]&   -   ]'   : 6(   Q   5(   5      5(   6   Q   5   /   6)   Q   5   0   6*   Q      1    Q   2   6+   Q   +   
V    Q   5,   [4   3   ]-   6.   Q   5   [5   =/   ]0   =1   ]2   =3   ]   =4   ]5   =6   ]7   =8   ]
   =9   ]:   =;   ]<   ==   ]>   =?   ]@   =A   ]B   =C   ]	   =D   ]E   =F   ]G   =H   ]I   =J   ]K   Z   @`    @`   @`   >`   ]L   =H   ]M   6N    
  Q      
        * > M  Q d     + 5  backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor   re   parse	   hsla   space   Color   idx	   byte	   type   red   green	   blue   props	   rgba   degrees   hue   percent   saturation   lightness   floor   max   mod   support   <p>	   each   style?   background-color:rgba(1,1,1,.5)   cssText   backgroundColor   indexOf   extend   prototype   is   _space   transition   blend   toRgbaString   toHslaString   toHexString   toString   fn   to	   from	   hook   cssHooks   expand   borderColor   #00ffff	   aqua   #000000   black   #0000ff   #ff00ff   fuchsia   #808080	   gray   #008000   #00ff00	   lime   #800000   maroon   #000080	   navy   #808000   olive   #800080   purple   #ff0000   #c0c0c0   silver   #008080	   teal   #ffffff   white   #ffff00   yellow   transparent   _default   names!!      jQuery   undefined   stepHooks   rplusequals   stringParsers   color   spaces   propTypes   support   supportElem   colors	   each   clamp   stringParse   hue2rgb      +H!!          clamp F I F I B     @       5 !!          stringParse I M I M \     `          string 	   inst 	   rgba    B AJ *L 9J *L b             55!!          hue2rgb b Rc ~b Rc V     @       5 !!/   ^([\-+])=\s*(\d+\.?\d*)    !!   rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)    !!          parseB `< < X< <             5!!       !!   re!!!!   parse!!    !!   rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)    !!          parseB p= > h= >             5!!       !!   re!!!!   parse!!    !!Q   #([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})    !!           parseB > D? > D?             5!!       !!   re!!!!   parse!!    !!?   #([a-f0-9])([a-f0-9])([a-f0-9])    !!          parseB ? @ ? @             5!!       !!   re!!!!   parse!!    !!   hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)    !!          parseB PA A HA A             5!!       !!   re!!!!   space!!!!   parse!!    !!          jQuery.Colorb B {B B {B              5 !!       !!   idx!!!!	   type!!    !!       !!   idx!!!!	   type!!    !!       !!   idx!!!!	   type!!    !!       !!   red!!!!   green!!!!	   blue!!    !!       !!   props!!    !!       !!   idx!!!!	   type!!    !!       !!   idx!!!!	   type!!    !!       !!   idx!!!!	   type!!    !!       !!   hue!!!!   saturation!!!!   lightness!!    !!       !!   props!!    !!       !!	   rgba!!!!	   hsla!!    !!       !!   floor!!!!   max!!    !!       !!   max!!    !!       !!   mod!!!!   floor!!    !!       !!	   byte!!!!   percent!!!!   degrees!!    !!            !!        C  =                                               rF F jF F 9                T =    T  6   QT 5   [    ]   =   ]   ?]   6   Q    _   cache   props   idx   percent	   type   def   alpha!!      spaceName   space        +H!!       !!   idx!!!!	   type!!!!   def!!    ;      5 !!          parseB M qU M qU                red 	   inst 	   rgba   B JP P BP P   $          5    B Q Q P Q              5   B Q SU Q SU      P          space    cache    B Q 7T Q 7T       0       5 55!!          isB U qW xU qW      B          is 	   same 	   inst   B U ]W U ]W      @          localCache    isCache    B V BW V BW              555!!          _spaceB  W 7X |W 7X      2       	   used 	   inst    B W X W X              55!!          transitionB NX A\ FX A\      R          distance    end    start    result    B Y \ Y \      p       5 5!!          blendB S\ ] K\ ]      B          a    blend    B C] {] ;] {]   )          5 5!!          toRgbaStringB  ] ^ ] ^      "         B ] ^ ] ^   *          5 5!!          toHslaStringB  ^ ` ^ ` *     "         B ^ _ ^ _ ,  +   0       5 5!!          toHexStringB ` [a ` [a >     "          B ` Ma ` Ma F  )          5 5!!          toStringB  pa a ha a M            5 !!    	   !!   parse!!!!   is!!!!   _space!!!!   transition!!!!   blend!!!!   toRgbaString!!!!   toHslaString!!!!   toHexString!!!!   toString!!    !!           spaces.hsla.tob nc f ec f d            5 !!       !   spaces.hsla.fromb g h f h              5!!       C  c          $                         
            h o h o                  T 5       QT 5      QT 5      QT 5      Q  5          8Q         Q      props   cache   to	   from   fn!!      spaceName   space   props   cache   to	   from       +H!!        '   color.fn[spaceName]b i 9l xi 9l   !          	   type    arr    local    B k k j k              55!!        C  0                                                l o l o                    5       7     5           8Q       fn!!      key	   prop       +H!!           color.fn[key]b m o m o      b       5 ;5;5!!    	      color.hookc  +                                                ?p u 7p u                 T      
=   : W   Q   V        Q     split    !!   	   hook   hooks       +H!!           color.hook/<c  <                                               p u xp u                    5       [       ]   8Q  5   5         8Q      cssHooks   set   fx	   step!!      i	   hook       +H!!          setB p t p t             5 !!       !!   set!!    !!        C   color.hook/</jQuery.fx.step[hook]b t u t u   #           5 ;5;5!!          expandB u v u v      0          value    expanded   B Dv v <v v !  6          5 5!!       !!   expand!!    !!       !!	   aqua!!!!   black!!!!	   blue!!!!   fuchsia!!!!	   gray!!!!   green!!!!	   lime!!!!   maroon!!!!	   navy!!!!   olive!!!!   purple!!!!   red!!!!   silver!!!!	   teal!!!!   white!!!!   yellow!!!!   transparent!!!!   _default!!    ;5 !!       C                                                 z  z  J                 G       Q      QZ   =    `    =   `   =   `      Q[   ?]   ?]   ?]   ?]   ?]   ?]   ?]	   ?]
   ?]      Q     
Z   =   `    =   `   =   `   =   `       Q  5   5         5      6   Q  5      6   Q  5      
[
        5   5   : ]        5   5   : ]        5   5   : ]   	   ]    Q
	            
      add   remove   toggle   border   borderBottom   borderColor   borderLeft   borderRight   borderTop   borderWidth   margin   padding	   each   borderLeftStyle!   borderRightStyle#   borderBottomStyle   borderTopStyle   fn   addBack   effects   animateClass   extend   addClass   removeClass   toggleClass   switchClass!!   +   classAnimationActions   shorthandStyles!   getElementStyles   styleDifference         +H!!        !   getElementStyles ?| ~ &| ~ b     p       5 !!          styleDifference ~  ~  ~     P       5!!    	   !!   border!!!!   borderBottom!!!!   borderColor!!!!   borderLeft!!!!   borderRight!!!!   borderTop!!!!   borderWidth!!!!   margin!!!!   padding!!    !!        C            
                                     Z{ "| R{ "| Y                   5    5          8Q `    fx	   step!!      _	   prop       +H!!           $.fx.step[prop]b { | }{ | Z             5 ;5!!          $.fn.addBackb !                5 !!       -   $.effects.animateClassb  N  N   !   2          value    o    B  0 J ( J      2          animated !   applyClassChange    B  I  A    ,          5    B                     B  } 
 }   *           55   B        ,          5    B  C 8 ; 8   ,   2          styleInfo    dfd    B                  5 5   B   E  E   6             B  D  <       "          el   B ~  v              5 5555!!    	      .addClass<c                                                 s R k R                  G      !!   	   orig       +H!!    	      .addClassc  h                                            
   N  N         	       	W   QW  QT >     5    5      
V  [    T  ]   T T T l          
V  V   O      effects   animateClass	   call   add   apply!!      classNames   speed   easing   callback   arguments   .this       +H!!       !!   add!!    ;      5 ;5!!    	      .removeClass<c                                                 ~ o v o                  G      !!   	   orig       +H!!     	      .removeClassc  p                                  	          
   k  k         	       	W   QW  QV       ?>     5   5      
V  [    T  ]   T T T l          
V  V   O      length   effects   animateClass	   call   remove   apply!!      classNames   speed   easing   callback   arguments   .this       +H!!       !!   remove!!    ;      5 ;5!!    	      .toggleClass<c                                                                      G      !!   	   orig       +H!!     	      .toggleClassc           Z                                   
              	       	W   QW  QT '=    HD   QT   H   T  #         
V  V   O W     5   5      
V  T    [    T  ]      [   T  ]   T T T l :     5   5      
V  [   T  ]   T T T l           boolean   apply   effects   animateClass	   call   add   remove   toggle!!      classNames   force   speed   easing   callback   arguments   .this       +H!!       !!   add!!    !!       !!   remove!!    !!       !!   toggle!!    ;S      5;5!!          switchClassB     
            5!!       !!   addClass!!!!   removeClass!!!!   toggleClass!!!!   switchClass!!    ;5 !!       C                                                  >  >                  G       Q      Q      
  5   [	   =   ]      ]      ]      ]      ]      ]      ]	      ]
    Q  5       
[   
   ]        5   5   : ]        5   5   : ]        5   5   : ]      ]    Q ' 9 B W     ; E ; G Q G S ] S
 `  m    extend   effects   1.10.3   version	   save   restore   setMode   getBaseline   createWrapper   removeWrapper   setTransition   fn   effect	   show	   hide   toggle   cssUnit!!   '   _normalizeArguments/   standardAnimationOption         +H!!       '   _normalizeArguments ~ { b {      p       5!!       /   standardAnimationOption   }        P       5!!       	   saveB          0       5 !!          restoreB     '     @       5 !!          setModeB /  '  9             5 !!          getBaselineB A  9  B     0       5!!          createWrapperB B  :  W               element    props    B l  d    8           55!!          removeWrapperB          0       5!!          setTransitionB 6  .       @          element    factor    value    B  
  
              55!!       !!   version!!!!	   save!!!!   restore!!!!   setMode!!!!   getBaseline!!!!   createWrapper!!!!   removeWrapper!!!!   setTransition!!    !!           effectB   `  `      c       	   args    effectMethod   B  z  r       "       5      run           b       	   next 	   elem    complete    	   done  M  @  %     0       5 55!!    	      .show<c                                                 s  k  ;                 G     E !!   	   orig       +H!!          .showb     <     3       5;5!!    	      .hide<c                                                     G                 G     Q !!   	   orig       +H!!          .hideb     H     3       5;5!!    	      .toggle<c                                                  #  # S                 G     ] !!   	   orig       +H!!          .toggleb     T     3       5;5!!          cssUnitB ] 7 U 7 `     2          style    val   B  $  $ d  -           55!!       !!   effect!!!!	   show!!!!	   hide!!!!   toggle!!!!   cssUnit!!    ;5 !!       C            >       
                               A  9  s                 G[       Q      
f       Q     
   [      ]      ]      ]      ]      ]    Q      
   	    Q     	   each   extend	   Sine	   Circ   Elastic	   Back   Bounce!!      baseEasings         +H!!            !!      !!	   Quad!!   Cubic!!   Quart!!   Quint!!	   Expo   !!        C                                                   L  L y                   T     8Q !!      i	   name       +H!!        #   baseEasings[name]b   I  I z            5;5!!       	   SineB y  p              5 !!       	   CircB                 5 !!          ElasticB                 5!!       	   BackB                 5 !!          BounceB                  5!!       !!	   Sine!!!!	   Circ!!!!   Elastic!!!!	   Back!!!!   Bounce!!    !!        C  O                                                                      5    =   T     8Q  5    =   T      8Q  5    =   T     8Q     easing   easeIn   easeOut   easeInOut!!   	   name   easeIn       +H!!        B  C  C   (          5 !!       B o  g    *          5 ;5;5;5!!       C       -                                        -  -                  G>   Q[       Q[      Q               =    6   6   6   6   6   Q               =   6   6   6   6   6   Q      
=   [   =	   ]
   [   >]   [   ]   B]   =   ]   =   ]   =   ]   [   =   ]   =   ]   ]   @]   @]   ]      ]      ]      ]      ]   	   ]   
   ]       ]!      ]"      ]#      ]$      ]%      ]&      ]'      ](      ])      ]*      ]+      ],    Q      @ h n     # \     	   hide#   borderBottomWidth   borderTopWidth   paddingBottom   paddingTop   height	   show   widget   ui.accordion   1.10.3   version   active   animate   collapsible   click   eventG   > li > :first-child,> :not(li):even   header	   auto   heightStyle)   ui-icon-triangle-1-s   activeHeader)   ui-icon-triangle-1-e   icons   activate   beforeActivate   options   _create'   _getCreateEventData   _createIcons   _destroyIcons   _destroy   _setOption   _keydown   _panelKeyDown   refresh   _processPanels   _refresh   _activate   _findActive   _setupEvents   _eventHandler   _toggle   _animate   _toggleComplete!!      $   undefined   uid   hideProps   showProps       +H!!            !!            !!            !!       !!   activeHeader!!!!   header!!    !!    	   !!   active!!!!   animate!!!!   collapsible!!!!   event!!!!   header!!!!   heightStyle!!!!   icons!!!!   activate!!!!   beforeActivate!!    !!           _createB           2       5!!       '   _getCreateEventDataB   s  s             5!!          _createIconsB           "       5!!          _destroyIconsB  
                5!!          _destroyB   +  +      "         B    {       "       5   B  p  h       "       55!!          _setOptionB C  ;              5!!          _keydownB  G  G @     B       5!!          _panelKeyDownB c  [  h             5 !!          refreshB      n     r       5!!          _processPanelsB                  5 !!          _refreshB  -  %       r          maxHeight    accordionId    B 4  ,       2       5    B        4   "       5   B                  5    B  *  "              5    B  " |  |             5 5!!          _activateB  0  0      "       5 !!          _findActiveB I  A              5!!          _setupEventsB  `  `      2          events    B . t & t   %          5 5!!          _eventHandlerB { 	 s 	 #     R       5!!          _toggleB     \     R         B      x            5 5!!          _animateB                    toHide 	   data    total 	   that    adjust    B   >  >             5    B                 5    B   }       0       5 5!!          _toggleCompleteB  &  &      "       5 !!       !!   version!!!!   options!!!!   _create!!!!'   _getCreateEventData!!!!   _createIcons!!!!   _destroyIcons!!!!   _destroy!!!!   _setOption!!!!   _keydown!!!!   _panelKeyDown!!!!   refresh!!!!   _processPanels!!!!   _refresh!!!!   _activate!!!!   _findActive!!!!   _setupEvents!!!!   _eventHandler!!!!   _toggle!!!!   _animate!!!!   _toggleComplete!!    ;5!!       C  2     8   C      "                             D J+ < J+                  G>   Q       
=   [   =   ]   =   ]   [   @]   B]   X,]   ?]	   [    =
   ]   =   ]   =   ]   ]   @]   @]   @]   @]   @]   @]   @]   @]   ]   >]      ]      ]      ]      ]      ]      ]       ]   	   ]!   
   ]"      ]#      ]      ]$      ]%      ]&      ]'      ](      ])      ]*      ]+      ],      ]       ]-      ].    Q   /   
   50   51   [      ]2      ]3    Q       
=      50   51   [!   [   [   =4   ]5      ]6   ]7   ]       ]#    Q    ' F Q b j z                 &    widget   ui.autocomplete   1.10.3   version   <input>   defaultElement   appendTo   autoFocus   delay   minLength   left top   my   left bottom   at	   none   collision   position   source   change   close   focus	   open   response   search   select   options   pending   _create   _destroy   _setOption   _appendTo   _initSource   _searchTimeout   _search   _response   __response   _close   _change   _normalize   _suggest   _resizeMenu   _renderMenu   _renderItemData   _renderItem   _move   _value   _keyEvent   extend   ui   autocomplete   escapeRegex   filter%   No search results.   noResults   results   messages!!      $   undefined   requestIndex       +H!!       !!   my!!!!   at!!!!   collision!!    !!       !!   appendTo!!!!   autoFocus!!!!   delay!!!!   minLength!!!!   position!!!!   source!!!!   change!!!!   close!!!!   focus!!!!	   open!!!!   response!!!!   search!!!!   select!!    !!           _createB  M  E       B   	    !   suppressKeyPress -   suppressKeyPressRepeat    suppressInput   B          b       5   B     R     R       5    B  {  { o     "       5   B      w            5    B       {     "       5   B          2          menuElement   B   #  #             5    B           "       	   that   B       .           555   B  s
  s
      r          event   B  8 } 0 }   .          5 5   B 
  
       R       	   item    previous    B  f  ^              5 5   B                  5 5!!          _destroyB                  5 !!          _setOptionB          B       5!!          _appendToB   I  I      B       5 !!          _initSourceB  b  Z  '     r          array    url 	   that   B  I  I ,            5    B     1     0          response    B o  g  9            5    B      <            5 55!!          _searchTimeoutB 1 > ) > F     "          event    B   $ ~ $ H  '   "       55!!          searchB R  J  Q     2       5 !!          _searchB  t  t b            5!!          _responseB      j     2       	   that    index    B     n     0       5 5!!          __responseB  8  8 z     B       5!!          closeB K  C              5!!          _closeB  Q  Q      "       5!!          _changeB f  ^       "       5 !!          _normalizeB                    B                  55!!          _suggestB  	!  	!      "       5!!          _resizeMenuB  "! " ! "             5!!          _renderMenuB -" " %" "      2          ul 	   that   B i" " a" "             5 5!!          _renderItemDataB " "# " "#             5!!          _renderItemB ;# # 3# #             5!!          _moveB # % # %      2       5!!          widgetB  !% D% % D%             5 !!          _valueB  X% % P% %             5 !!          _keyEventB % & % &      "       5 !!       !!   version!!!!   defaultElement!!!!   options!!!!   pending!!!!   _create!!!!   _destroy!!!!   _setOption!!!!   _appendTo!!!!   _initSource!!!!   _searchTimeout!!!!   search!!!!   _search!!!!   _response!!!!   __response!!!!   close!!!!   _close!!!!   _change!!!!   _normalize!!!!   _suggest!!!!   _resizeMenu!!!!   _renderMenu!!!!   _renderItemData!!!!   _renderItem!!!!   _move!!!!   widget!!!!   _value!!!!   _keyEvent!!    !!          escapeRegexB & (' & ('             5!!          filterB ;' ( 3' (                  matcher    B ' ' ' '              5 5!!       !!   escapeRegex!!!!   filter!!    !!           resultsB J) ) B) )             5!!       !!   noResults!!!!   results!!    !!       !!   messages!!    !!          __responseB ) C+ ) C+      C       5!!       !!   options!!!!   __response!!    ;5 !!       C  I                                            a+ XX Y+ XX (                 G=       Q=      Q=    	  Q     
  Q      Q      
=   [   =   ]   =   ]   [   @]	   C]
   @]   [   @]   @]   ]   ]      ]      ]      ]      ]      ]   	   ]   
   ]    Q      
=   [   =   ]   [   =   ]   ]      ]      ]      ]      ]      ]    Q 4 F   * 7 W F      e   ui-button ui-widget ui-state-default ui-corner-all?   ui-state-hover ui-state-active   ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only   widget   ui.button   1.10.3   version   <button>   defaultElement   disabled	   text   label   primary   secondary   icons   options   _create)   _determineButtonType   _destroy   _setOption   refresh   _resetButton   ui.buttonset   button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)   items   _init!!      $   undefined   lastActive   startXPos   startYPos   clickDragged   baseClasses   stateClasses   typeClasses!   formResetHandler   radioGroup       +H!!       !   formResetHandlerB  , P- , P- .     "       	   form   B  - G- - G- 0            5 5!!          radioGroupB h- . `- . 4     @         B  . . . . >            5 5!!       !!   primary!!!!   secondary!!    !!       !!   disabled!!!!	   text!!!!   label!!!!   icons!!    !!          _createB  / B / B R            	   that    options    activeClass    focusClass   B  [3 3 S3 3 o  6   2       5    B  "4 4 4 4 w  6   "       5   B 4 15 4 15 }  1           5   B  u5 5 m5 5   1          5    B  !6 \6 6 \6   0          5    B  6  7 6  7   >           5   B 8 8 8 8   6           5   B 8 9 8 9   4   0       5    B  	: Y: : Y:   C           5   B  : g< : g<   C   "         B  ; < ; <             5 5   B  < = < =   6   "         B  q= = i= =   +          5 5   B  = H> = H>   4   "       5   B ~> X? v> X?   4   2       5    B  B@ }@ :@ }@   R          5    B @ A @ A   %   "       55!!       )   _determineButtonTypeB  B qG B qG             5!!          widgetB  G G }G G             5 !!          _destroyB  G )I G )I      "       5!!          _setOptionB AI /J 9I /J *     B       5!!          refreshB  DJ M <J M 7     b          B  K L K L ?  .   2       5 5!!          _resetButtonB  N (S N (S W            5!!    
   !!   version!!!!   defaultElement!!!!   options!!!!   _create!!!!)   _determineButtonType!!!!   widget!!!!   _destroy!!!!   _setOption!!!!   refresh!!!!   _resetButton!!    !!       !!   items!!    !!           _createB  T >T T >T             5!!          _initB  QT jT IT jT             5!!          _setOptionB T U zT U      "       5!!          refreshB  U VW U VW               B  V EV V EV             5 5!!          _destroyB  lW QX dW QX                B  W W W W             5 5!!       !!   version!!!!   options!!!!   _create!!!!   _init!!!!   _setOption!!!!   refresh!!!!   _destroy!!    ;5 !!       C  L     c        F                              pX v hX v          	       G    W   Q      Q      Q       
   5   [   [   =   ]   ]    Q=      Q       
V   5   [D   =   ]   ]      ]	      ]
      ]      ]   	   ]   
   ]      ]      ]      ]      ]      ]      ]      ]      ]      ]      ]      ]      ]      ]      ]      ]      ]      ]      ]       ]!      ]"      ]#       ]$   !   ]%   "   ]&   #   ]'   $   ](   %   ])   &   ]*   '   ]+   (   ],   )   ]-   *   ].   +   ]/   ,   ]0   =1   ]2   =3   ]4   =1   ]5   =6   ]7   =8   ]9   =6   ]:   =;   ]<   =;   ]=   =6   ]>   =?   ]@   =A   ]B   =1   ]C   ]
D   E   
<    : D   E   
<   : D   E   
<   : <<]F   -   ]G   .   ]H   /   ]I   0   ]J   1   ]K   2   ]L   3   ]M   4   ]N   5   ]O   6   ]P   7   ]Q   8   ]R   9   ]S   :   ]T   ;   ]U   <   ]V   =   ]W   >   ]X   ?   ]Y   @   ]Z   A   ][   B   ]\   C   ]]    Q   5^   E   6   Q   V   A,  R  6   Q   5   B6_   Q   5   `   A,  R  a   
:  6b   Q   5   =   6   Q " 2 ; M X k      8 V g y       4  @  [         !  !. !3 !F !T !h !u ! ! ! ! ! ! "# " # #1 #7 #Q #W # # # # # $ $ $ $ $ % %	 % % % %: %D " %~ %    extend   ui   1.10.3   version   datepicker   prototype   hasDatepicker   markerClassName   maxRows#   _widgetDatepicker   setDefaults#   _attachDatepicker   _newInst%   _connectDatepicker   _attachments   _autoSize#   _inlineDatepicker#   _dialogDatepicker%   _destroyDatepicker#   _enableDatepicker%   _disableDatepicker+   _isDisabledDatepicker   _getInst#   _optionDatepicker#   _changeDatepicker%   _refreshDatepicker%   _setDateDatepicker%   _getDateDatepicker   _doKeyDown   _doKeyPress   _doKeyUp   _showDatepicker#   _updateDatepicker#   _shouldFocusInput   _checkOffset   _findPos   _hideDatepicker   _tidyDialog'   _checkExternalClick   _adjustDate   _gotoToday!   _selectMonthYear   _selectDay   _clearDate   _selectDate!   _updateAlternate   noWeekends   iso8601Week   parseDate   yy-mm-dd	   ATOM   D, dd M yy   COOKIE   ISO_8601   D, d M y   RFC_822   DD, dd-M-y   RFC_850   RFC_1036   D, d M yy   RFC_1123   RFC_2822   RSS   !   TICKS   @   TIMESTAMP   W3C	   Math   floor   _ticksTo1970   formatDate   _possibleChars	   _get#   _setDateFromField   _getDefaultDate   _determineDate+   _daylightSavingAdjust   _setDate   _getDate   _attachHandlers   _generateHTML1   _generateMonthYearHeader   _adjustInstDate   _restrictMinMax   _notifyChange%   _getNumberOfMonths   _getMinMaxDate   _getDaysInMonth'   _getFirstDayOfMonth   _canAdjustMonth   _isInRange!   _getFormatConfig   _formatDate   fn   initialized	   Date   getTime	   uuid!!     ~@!!333333@!!33333@!!      $   undefined   PROP_NAME   instActive   Datepicker   bindHover   extendRemove      +H!!     	      Datepicker        _                                      
  Y r Y r                W   QV   @6    QV   B6   QV   Z    6   QV   B6   QV   B6   QV   =   6   QV   =   6   QV   =	   6
   QV   =   6   QV   =   6   QV   =   6   QV   =   6   QV   =   6   QV   =   6   QV   Z    6   QV   5   [   =   ]   =   ]   =   ]   =   ]   f    ]    f   ]!   f   ]"   f   ]#   f   ]$   =%   ]&   ='   ](   >])   B]*   B]+   =,   ]-   6,   QV   [   =.   ]/   =0   ]1   [   ]2   @]3   =,   ]4   =5   ]6   =,   ]7   B]8   B]9   B]:   B];   B]<   B]=   =>   ]?   B]@   B]A   B]B   V   5C   ]D   =E   ]F   @]G   @]H   =I   ]J   @]K   @]L   @]M   @]N   @]O   ?]P   >]Q   ?]R   ]S   =,   ]T   =,   ]U   C]V   B]W   B]X   B]Y   6Z   Q   [   
V   5Z   V   5   5,    QV         =\   V   5   =]   : : 6^   Q    _curInst   _keyEvent   _disabledInputs%   _datepickerShowing   _inDialog#   ui-datepicker-div   _mainDivId)   ui-datepicker-inline   _inlineClass)   ui-datepicker-append   _appendClass+   ui-datepicker-trigger   _triggerClass)   ui-datepicker-dialog   _dialogClass-   ui-datepicker-disabled   _disableClass5   ui-datepicker-unselectable%   _unselectableClass3   ui-datepicker-current-day   _currentClass9   ui-datepicker-days-cell-over   _dayOverClass   regional	   Done   closeText	   Prev   prevText	   Next   nextText   Today   currentText   monthNames   monthNamesShort   dayNames   dayNamesShort   dayNamesMin   Wk   weekHeader   mm/dd/yy   dateFormat   firstDay   isRTL%   showMonthAfterYear      yearSuffix   focus   showOn   fadeIn   showAnim   showOptions   defaultDate   appendText   ...   buttonText   buttonImage   buttonImageOnly!   hideIfNoPrevNext-   navigationAsDateFormat   gotoCurrent   changeMonth   changeYear   c-10:c+10   yearRange   showOtherMonths#   selectOtherMonths   showWeek   iso8601Week   calculateWeek   +10   shortYearCutoff   minDate   maxDate	   fast   duration   beforeShowDay   beforeShow   onSelect#   onChangeMonthYear   onClose   numberOfMonths!   showCurrentAtPos   stepMonths   stepBigMonths   altField   altFormat   constrainInput   showButtonPanel   autoSize   disabled   _defaults   extend   <div id='   ' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>   dpDiv!!      .this         +H!!      !!   January!!   February!!   March!!   April!!   May!!	   June!!	   July!!   August!!   September!!   October!!   November!!   December   !!      !!   Jan!!   Feb!!   Mar!!   Apr!!   May!!   Jun!!   Jul!!   Aug!!   Sep!!   Oct!!   Nov!!   Dec   !!      !!   Sunday!!   Monday!!   Tuesday!!   Wednesday!!   Thursday!!   Friday!!   Saturday   !!      !!   Sun!!   Mon!!   Tue!!   Wed!!   Thu!!   Fri!!   Sat   !!      !!   Su!!   Mo!!   Tu!!   We!!   Th!!   Fr!!   Sa   !!       !!   closeText!!!!   prevText!!!!   nextText!!!!   currentText!!!!   monthNames!!!!   monthNamesShort!!!!   dayNames!!!!   dayNamesShort!!!!   dayNamesMin!!!!   weekHeader!!!!   dateFormat!!!!   firstDay!!!!   isRTL!!!!%   showMonthAfterYear!!!!   yearSuffix!!    !!            !!    %   !!   showOn!!!!   showAnim!!!!   showOptions!!!!   defaultDate!!!!   appendText!!!!   buttonText!!!!   buttonImage!!!!   buttonImageOnly!!!!!   hideIfNoPrevNext!!!!-   navigationAsDateFormat!!!!   gotoCurrent!!!!   changeMonth!!!!   changeYear!!!!   yearRange!!!!   showOtherMonths!!!!#   selectOtherMonths!!!!   showWeek!!!!   calculateWeek!!!!   shortYearCutoff!!!!   minDate!!!!   maxDate!!!!   duration!!!!   beforeShowDay!!!!   beforeShow!!!!   onSelect!!!!#   onChangeMonthYear!!!!   onClose!!!!   numberOfMonths!!!!!   showCurrentAtPos!!!!   stepMonths!!!!   stepBigMonths!!!!   altField!!!!   altFormat!!!!   constrainInput!!!!   showButtonPanel!!!!   autoSize!!!!   disabled!!    ;      5 !!    	      bindHover  A                                               v z v z V%                =    W   Q      
V   =       :    
V   =      :  %a %m    button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a   delegate   mouseout   mouseover!!      dpDiv   selector      +H!!           bindHover/<b  Hw jx @w jx X%  5   2       5!!          bindHover/<b  x z x z a%  +   B       5 ;5!!          extendRemove z \{ z \{ p%     0       5 !!       !!   version!!    !!       !!   datepicker!!    !!        #   _widgetDatepickerB  s s s s *            5!!          setDefaultsB t  u t  u 2            5!!       #   _attachDatepickerB v w v w ;     B       5 !!          _newInstB &x Cz x Cz M            5 !!       %   _connectDatepickerB z | z | X     2       5 !!          _attachmentsB | x | x k     r          input   B   o  o      @       55!!          _autoSizeB          b          max 	   maxI    i    B          0       5 5!!       #   _inlineDatepickerB          2       5!!       #   _dialogDatepickerB "         B       5 !!       %   _destroyDatepickerB *  "       B       5!!       #   _enableDatepickerB G y ? y      R          target   B    z  )            5    B / d ' d 2            5 5!!       %   _disableDatepickerB     8     R          target    B  S o K o E            5    B  7  7 N            5 5!!       +   _isDisabledDatepickerB { ? s ? V      B       5 !!          _getInstB A  9  g     @       5!!       #   _optionDatepickerB     y            5 !!       #   _changeDatepickerB  .  .             5!!       %   _refreshDatepickerB  C  C      "       5!!       %   _setDateDatepickerB          "       5!!       %   _getDateDatepickerB  u  u      "       5!!          _doKeyDownB                5 !!          _doKeyPressB  j  j 4              5 !!          _doKeyUpB     @      `       5!!          _showDatepickerB     [                isFixed    B         "          5 5!!       #   _updateDatepickerB 	 q  q       b       	   inst    origyearshtml   B  i e a e               55!!       #   _shouldFocusInputB   	               5!!          _checkOffsetB  =  =              5 !!          _findPosB   {        "       5!!          _hideDatepickerB S L K L  !            	   inst    B    ~  !            5 5!!          _tidyDialogB     .!            5!!       '   _checkExternalClickB 6  .  3!     0       5!!          _adjustDateB     F!     "       5 !!          _gotoTodayB ? [ 7 [ T!     2       5 !!       !   _selectMonthYearB     h!            5 !!          _selectDayB     u!     "       5!!          _clearDateB 7 v / v !            5 !!          _selectDateB     !     r       5!!       !   _updateAlternateB     !     2          dateStr   B  g  _  !            5 5!!          noWeekendsB m  e  !            5 !!          iso8601WeekB  *  * !            5!!          parseDateB     !              format    value    iFormat    iValue    lookAhead   B 2  *  !             5   B      "             5   B  c  c "     @          index    B     "  G          5    B     "            5    B     "             55   B   N  N $"             55!!          formatDateB N k E k "               format    iFormat    lookAhead   B M  E  "             5   B C  ;  "     0       5    B 1  )  "            5 5!!          _possibleCharsB  c  c #               format    iFormat   B K  C  #             55!!       	   _getB     1#            5 !!       #   _setDateFromFieldB m  e  7#     R       5!!          _getDefaultDateB  I  I Q#            5!!          _determineDateB  &  & W#     2       	   inst    B  I   I  X#            5    B e  $ ]  $ ]#     `       55!!       +   _daylightSavingAdjustB ' Y( ' Y( #              5 !!          _setDateB ( + ( + #     2       5 !!          _getDateB [+ 8, S+ 8, #            5 !!          _attachHandlersB , 0 , 0 #     2          stepMonths    id   B  n- 0 e- 0 #  1             B  - - - - #            5    B  - ,. - ,. #            5    B  A. p. 8. p. #            5    B  . . }. . #            5    B  . T/ . T/ #            5    B  p/ / g/ / #            5    B  / +0 / +0 #            5 55!!          _generateHTMLB 0 Y 0 Y #            5!!       1   _generateMonthYearHeaderB Y sd Y sd $  #             drawYear    thisYear    B ` a ` a $            5 5!!          _adjustInstDateB d f d f $     "       5 !!          _restrictMinMaxB Fg 0h >g 0h $            5!!          _notifyChangeB oh 6i gh 6i $     "       5 !!       %   _getNumberOfMonthsB i +j }i +j $            5 !!          _getMinMaxDateB j j j j %            5 !!          _getDaysInMonthB Ck k ;k k 	%            5!!       '   _getFirstDayOfMonthB k <l k <l %            5!!          _canAdjustMonthB l n l n %     "       5 !!          _isInRangeB Kn Tq Cn Tq %     B       5!!       !   _getFormatConfigB q ws q ws :%            5 !!          _formatDateB s u s u D%     "       5 !!    N   !!   markerClassName!!!!   maxRows!!!!#   _widgetDatepicker!!!!   setDefaults!!!!#   _attachDatepicker!!!!   _newInst!!!!%   _connectDatepicker!!!!   _attachments!!!!   _autoSize!!!!#   _inlineDatepicker!!!!#   _dialogDatepicker!!!!%   _destroyDatepicker!!!!#   _enableDatepicker!!!!%   _disableDatepicker!!!!+   _isDisabledDatepicker!!!!   _getInst!!!!#   _optionDatepicker!!!!#   _changeDatepicker!!!!%   _refreshDatepicker!!!!%   _setDateDatepicker!!!!%   _getDateDatepicker!!!!   _doKeyDown!!!!   _doKeyPress!!!!   _doKeyUp!!!!   _showDatepicker!!!!#   _updateDatepicker!!!!#   _shouldFocusInput!!!!   _checkOffset!!!!   _findPos!!!!   _hideDatepicker!!!!   _tidyDialog!!!!'   _checkExternalClick!!!!   _adjustDate!!!!   _gotoToday!!!!!   _selectMonthYear!!!!   _selectDay!!!!   _clearDate!!!!   _selectDate!!!!!   _updateAlternate!!!!   noWeekends!!!!   iso8601Week!!!!   parseDate!!!!	   ATOM!!!!   COOKIE!!!!   ISO_8601!!!!   RFC_822!!!!   RFC_850!!!!   RFC_1036!!!!   RFC_1123!!!!   RFC_2822!!!!   RSS!!!!   TICKS!!!!   TIMESTAMP!!!!   W3C!!!!   _ticksTo1970!!!!   formatDate!!!!   _possibleChars!!!!	   _get!!!!#   _setDateFromField!!!!   _getDefaultDate!!!!   _determineDate!!!!+   _daylightSavingAdjust!!!!   _setDate!!!!   _getDate!!!!   _attachHandlers!!!!   _generateHTML!!!!1   _generateMonthYearHeader!!!!   _adjustInstDate!!!!   _restrictMinMax!!!!   _notifyChange!!!!%   _getNumberOfMonths!!!!   _getMinMaxDate!!!!   _getDaysInMonth!!!!'   _getFirstDayOfMonth!!!!   _canAdjustMonth!!!!   _isInRange!!!!!   _getFormatConfig!!!!   _formatDate!!    !!           $.fn.datepickerb W|  O|  ~%               options    otherArgs    B      %            5 5;5!!       C  "     N         %                                 %                 G[    C]    C]   C]   C]   C]   C]   C]      Q[   C]   C]   C]   C]      Q      
=   ["   =	   ]
   [   =   ]   C]   Z    ]    C]   =   ]   =   ]   C]   @]   =   ]   @]   @]   X ]   X ]   B]   [   =   ]   =   ]      ]   =   ]      ]   ]   C]    @]!   @]"   X,]   @]#   @]   @]$   @]%   @]&   @]'   @](   @])   @]*   @]+   ],      ]-      ].      ]/      ]0   	   ]      51   ]2      51   ]3   
   ]      ]4      ]5      ]6      ](      ]7      ]8      ]9      ]:      ];      ]<      ]=      ]>      ]?      ]@      ]A      ]B      ]C      ]D      ]E      ]F      ]G       ]H   !   ]I    Q   5J   5K   >6L   Q   5M   BI9         
=      5J   5K   [$   #   ]A    Q % & & & &8 &U &e &} & & & '	 ' ' 'B 'e ' ' ' ' ( (5 (D (K (U (w % ( ( (    buttons   height   maxHeight   maxWidth   minHeight   minWidth   width   widget   ui.dialog   1.10.3   version	   body   appendTo   autoOpen   closeOnEscape   close   closeText      dialogClass   draggable	   hide	   auto   modal   center   my   at   window   of   fit   collision   using   position   resizable	   show   title   beforeClose	   drag   dragStart   dragStop   focus	   open   resize   resizeStart   resizeStop   options   _create   _init   _appendTo   _destroy	   noop   disable   enable   isOpen   moveToTop   _moveToTop   _focusTabbable   _keepFocus   _createWrapper   _createTitlebar   _title#   _createButtonPane   _createButtons   _makeDraggable   _makeResizable   _minHeight   _position   _setOptions   _setOption   _size   _blockFrames   _unblockFrames#   _allowInteraction   _createOverlay   _destroyOverlay   ui   dialog!   overlayInstances   uiBackCompat!!      $   undefined%   sizeRelatedOptions/   resizableRelatedOptions       +H!!       !!   buttons!!!!   height!!!!   maxHeight!!!!   maxWidth!!!!   minHeight!!!!   minWidth!!!!   width!!    !!       !!   maxHeight!!!!   maxWidth!!!!   minHeight!!!!   minWidth!!    !!           usingB m  e  %     "       5 !!       !!   my!!!!   at!!!!   of!!!!   collision!!!!   using!!    !!       !!   appendTo!!!!   autoOpen!!!!   buttons!!!!   closeOnEscape!!!!   closeText!!!!   dialogClass!!!!   draggable!!!!	   hide!!!!   height!!!!   maxHeight!!!!   maxWidth!!!!   minHeight!!!!   minWidth!!!!   modal!!!!   position!!!!   resizable!!!!	   show!!!!   title!!!!   width!!!!   beforeClose!!!!   close!!!!	   drag!!!!   dragStart!!!!   dragStop!!!!   focus!!!!	   open!!!!   resize!!!!   resizeStart!!!!   resizeStop!!    !!          _createB      %     2       5!!          _initB      &     "       5 !!          _appendToB  
    &     "       5 !!          _destroyB      &     B       5!!          widgetB      8&            5 !!          closeB  Y  Y ?&     R          event 	   that    B  ( T   T P&  8          5 5!!          isOpenB  m  e  U&            5 !!          moveToTopB      Y&            5!!          _moveToTopB     ]&     "       5!!       	   openB   g  g e&     B       	   that   B   H  H u&  8          5 5!!          _focusTabbableB    {  }&     R       5 !!          _keepFocusB )  !  &                  checkFocus  J ( 7 ( &     "       55!!          _createWrapperB   7 
 7 &     "         B h r ` r &     R       5    B     &     "       55!!          _createTitlebarB  T , L , &              B D  <  &     "       5   B  @  @ &            5 5!!          _titleB @  8  	'     "       5!!       #   _createButtonPaneB      '            5!!          _createButtonsB   "  " '     2       	   that    B I  A  ('                click    B      1'            5 55!!          _makeDraggableB  >  6  B'     B       	   that    options    filteredUi       filteredUi   t  F'            5    B   x  Q'            5    B ) s ! s V'            5    B   ~  Y'            5 5!!          _makeResizableB      e'     B       	   that    options    filteredUi       filteredUi ;  (  p'            5    B     '            5    B     '            5    B     '            5 5!!          _minHeightB  1  )  '            5 !!          _positionB      '     2       5!!          _setOptionsB   
  '     b       	   that    resize !   resizableOptions    B | F t F '     0       5 5!!          _setOptionB   	  '            5 !!          _sizeB      (     R       5!!          _blockFramesB   
  
 5(               B      6(  A          5 5!!          _unblockFramesB  &    D(     "       5!!       #   _allowInteractionB     K(             5 !!          _createOverlayB   C  C U(     R       	   that    widgetFullName    B    q  q `(     "         B  d  d c(  3           555!!          _destroyOverlayB  ` e X e w(     B       5 !!    !   !!   version!!!!   options!!!!   _create!!!!   _init!!!!   _appendTo!!!!   _destroy!!!!   widget!!!!   disable!!!!   enable!!!!   close!!!!   isOpen!!!!   moveToTop!!!!   _moveToTop!!!!	   open!!!!   _focusTabbable!!!!   _keepFocus!!!!   _createWrapper!!!!   _createTitlebar!!!!   _title!!!!#   _createButtonPane!!!!   _createButtons!!!!   _makeDraggable!!!!   _makeResizable!!!!   _minHeight!!!!   _position!!!!   _setOptions!!!!   _setOption!!!!   _size!!!!   _blockFrames!!!!   _unblockFrames!!!!#   _allowInteraction!!!!   _createOverlay!!!!   _destroyOverlay!!    !!           _positionB  L  D  (            	   myAt    offset   B  p  p (  (           55!!       !!   _position!!    ;5 !!       C  2                                              h  h (                 G       Q      Q   5    5      6   Q )    effects   effect   blind!!      $   undefined   rvertical   rpositivemotion       +H!!!   up|down|vertical    !!7   up|left|vertical|horizontal    !!        -   $.effects.effect.blindb  d  d (  !          	   done    el    props 	   mode    B   \  \ (             55;5!!       C           	                                    } ; u ; )                 G   5    5       6   Q )g    effects   effect   bounce!!      $   undefined       +H!!       /   $.effects.effect.bounceb  7  7 )  "          	   done    el    props 	   hide   B   Y  Y U)             55;5!!       C           	                                    P  H  i)                 G   5    5       6   Q )    effects   effect	   clip!!      $   undefined       +H!!       +   $.effects.effect.clipb   |  k)      b       	   done    el    props 	   show   B  _  W  )             55;5!!       C           	                                        )                 G   5    5       6   Q )    effects   effect	   drop!!      $   undefined       +H!!       +   $.effects.effect.dropb 2  *  )      b       	   done    el    props 	   mode   B  	    )             55;5!!       C           	                                        )                 G   5    5       6   Q *(    effects   effect   explode!!      $   undefined       +H!!        1   $.effects.effect.explodeb     )  #          	   done 	   rows    cells    el 	   show    pieces    animComplete       childComplete   ~ 	 ~ )     "       5       animComplete  n  Y  *             55;5!!       C           	                                        **                 G   5    5       6   Q *:    effects   effect	   fade!!      $   undefined       +H!!       +   $.effects.effect.fadeb 3  +  ,*             5;5!!       C           	                                        <*                 G   5    5       6   Q *z    effects   effect	   fold!!      $   undefined       +H!!       +   $.effects.effect.foldb S  K  >*      r       	   done    el    props 	   hide    B      o*  4           55;5!!       C           	                                     p  p |*                 G   5    5       6   Q *    effects   effect   highlight!!      $   undefined       +H!!        5   $.effects.effect.highlightb  l  l ~*  %   b       	   done 	   elem    props 	   mode    B   d  d *             55;5!!       C           	                                      }  *                 G   5    5       6   Q *    effects   effect   pulsate!!      $   undefined       +H!!        1   $.effects.effect.pulsateb     *  #   r       	   done 	   elem 	   hide    B      *             55;5!!       C  P                                  	               *                 G   5    5       6   Q   5    5      6   Q   5    5      6   Q * +6 ,    effects   effect	   puff   scale	   size!!      $   undefined       +H!!        +   $.effects.effect.puffb       *             5!!       -   $.effects.effect.scaleb       *  !   R       5 !!       +   $.effects.effect.sizeb     6+      b         o 	   done    factor    el    props2    vProps    hProps 	   mode    restore    position    props   B   3  3 +  &   R          child   B   -  - +  :           55   B      +     `         B d  \  +  '              idx    B     +             5555;5!!       C           	                                     # 	 # ,                 G   5    5       6   Q ,C    effects   effect   shake!!      $   undefined       +H!!        -   $.effects.effect.shakeb F # > # 	,  !   r       	   done    el    props 	   mode   B  " " " " 1,             55;5!!       C           	                                    # 8( # 8( E,                 G   5    5       6   Q ,w    effects   effect   slide!!      $   undefined       +H!!        -   $.effects.effect.slideb # 4( # 4( G,  !   b       	   done    el    props 	   mode    B  ' -( ' -( l,             55;5!!       C           	                                    M( + E( + y,                 G   5    5       6   Q ,    effects   effect   transfer!!      $   undefined       +H!!       3   $.effects.effect.transferb ( + }( + {,  $   2       	   done    transfer   B  + + + + ,  6          5 5;5!!       C       -                                      , }k , }k ,                 G       
=   [   =   ]   =   ]   X,]   [   [    =   ]   ]	   =
   ]   [   =   ]   =   ]   ]   =   ]   @]   @]   @]   ]      ]      ]      ]      ]      ]      ]   	   ]   
   ]      ]      ]      ]      ]       ]!      ]"      ]#      ]$      ]%      ]&      ]'      ](      ])      ]*      ]+      ],      ]    Q - -< - - - - - . .( .7 .F .W .l .{ . . . . . , .    widget   ui.menu   1.10.3   version	   <ul>   defaultElement   delay#   ui-icon-carat-1-e   submenu   icons   ul   menus   left top   my   right top   at   position	   menu	   role	   blur   focus   select   options   _create   _destroy   _keydown   _activate   refresh   _itemRole   _setOption   _scrollIntoView   _startOpening   _open   collapseAll   _close   collapse   expand	   next   previous   isFirstItem   isLastItem   _move   nextPage   previousPage   _hasScroll!!      $   undefined       +H!!       !!   submenu!!    !!       !!   my!!!!   at!!    !!       !!   icons!!!!   menus!!!!   position!!!!	   role!!!!	   blur!!!!   focus!!!!   select!!    !!          _createB  X- 9 P- 9 ,     "          B y/ / q/ / ,  9   "       5   B 1 D1 1 D1 ,  *          5    B q1 1 i1 1 ,  +          5    B 1 4 1 4 ,  )   R       5    B 4 #6 4 #6 ,  '          5    B ~6 7 v6 7 ,     "       5   B 7 O8 7 O8 ,     "          event    B  7 H8 7 H8 ,     "       55   B 8 9 8 9 -     "       55!!          _destroyB  9 = 9 = -               B  < W= < W= 1-     "       55!!          _keydownB = vG = vG <-               regex       escape m> > ^> > A-            5    B  vC C nC C v-  F          5    B  E E E E -  G          5    B  F F F F -  ,          5 5!!          _activateB G \H G \H -     B       5 !!          refreshB  qH N iH N -     2       	   icon   B  I 3K I 3K -            5    B  M M M M -  7   "       55!!          _itemRoleB  O gO 	O gO -            5!!          _setOptionB O EP wO EP -     "       5!!          focusB XP :T PP :T -     R         B  )S ES !S ES .  $          5 5!!          _scrollIntoViewB WT W OT W .     B       5 !!       	   blurB W )X W )X (.     2       5 !!          _startOpeningB DX Y <X Y 7.     2          submenu    B  gY Y _Y Y @.  #          5 5!!          _openB Y %[ Y %[ F.            5!!          collapseAllB >[ k] 6[ k] W.     2          event    all   B  [ Y] [ Y] Y.  #   "       55!!          _closeB ^ V_ ^ V_ l.     "       5!!          collapseB l_ 7` d_ 7` {.     "       5!!          expandB K` a C` a .     B          event    newItem   B  a a a a .            5 5!!       	   nextB a b a b .            5 !!          previousB b Sb b Sb .            5 !!          isFirstItemB  lb b db b .            5!!          isLastItemB  b "c b "c .            5 !!          _moveB 5c #e -c #e .     R       5!!          nextPageB 9e Xg 1e Xg .            	   item 	   base    height   B  ef f ]f f .  7          5 5!!          previousPageB rg oi jg oi .            	   item 	   base    height   B  h h h h .  7          5 5!!          _hasScrollB  i i i i .            5 !!          selectB i vk i vk .     "       5!!       !!   version!!!!   defaultElement!!!!   delay!!!!   options!!!!   _create!!!!   _destroy!!!!   _keydown!!!!   _activate!!!!   refresh!!!!   _itemRole!!!!   _setOption!!!!   focus!!!!   _scrollIntoView!!!!	   blur!!!!   _startOpening!!!!   _open!!!!   collapseAll!!!!   _close!!!!   collapse!!!!   expand!!!!	   next!!!!   previous!!!!   isFirstItem!!!!   isLastItem!!!!   _move!!!!   nextPage!!!!   previousPage!!!!   _hasScroll!!!!   select!!    ;5!!       C  }                                            k  k  .                 G       Q      Q      Q      5    D   Q[   6    Q   5      Q   5      Q   5      Q      Q    	  Q    
  Q      Q      Q   5   5      Q   [   	   ]   
   ]      ]	   6   Q   5      6   Q   5    [   [      ]
      ]   ]   [      ]
      ]   ]   [      ]
      ]   ]   6   Q     Q /3 /J /V /e 0 0@ 0f 0 0 0 0    ui	   Math   max   abs   round   fn   position   scrollbarWidth   getScrollInfo   getWithinInfo	   left   top   fit	   flip   flipfit!!      $   undefined)   cachedScrollbarWidth   max   abs   round   rhorizontal   rvertical   roffset   rposition   rpercent   _position   getOffsets   parseCss   getDimensions       +H!!           getOffsets l m l m 
/            5 !!          parseCss m n m n /            5 !!          getDimensions n 9p 	n 9p /     @       5 !!            !!#   left|center|right    !!#   top|center|bottom    !!+   [\+\-]\d+(\.[\d]+)?%?    !!	   ^\w+    !!   %$    !!           scrollbarWidthB  cp ar [p ar 4/     0       5 !!          getScrollInfoB {r t sr t J/            5!!          getWithinInfoB t v t v V/            5!!       !!   scrollbarWidth!!!!   getScrollInfo!!!!   getWithinInfo!!    !!          $.fn.positionb v 0 v 0 e/     3         options    atOffset    targetWidth    targetHeight    targetOffset    basePosition    target    within    scrollInfo    collision    offsets   B  }z } uz } /  !   "       5   B   ,  , /            #   collisionPosition 	   elem    elemWidth    elemHeight    collisionWidth    collisionHeight    position    myOffset   B     /  %           5   B p  h  /     R       5 55!!       	   leftB ] 	 U 	 0            5!!          topB     @0            5 !!       !!	   left!!!!   top!!    !!        	   leftB     g0     P       5 !!          topB  x  x 0     P       5!!       !!	   left!!!!   top!!    !!        	   leftB   
  
 0           5 !!          topB      0           5!!       !!	   left!!!!   top!!    !!       !!   fit!!!!	   flip!!!!   flipfit!!    !!        C                                                      0                G       
=   : >7W  Q       
=   : W  Q       
V     =      =   : W   Q[    =   ]   >]   >]   >]	   >]
   =   ]   W  QV  =         
V  [   =   ]   =   ]   =   ]    QV  K#   mW  V   5   V  V  V  78QQLMQNV      
V   QV  D   Q    5   W  QV     
V   V  5    QV  5   =   6   Q   V  :    
:  5   W  Q   5   V  
E   QV  6   QV   =   6   QV     
V    Q 0 0>( 0	    document)   getElementsByTagName	   body   createElement   div   hidden   visibility   width   height   border   margin	   none   background   extend   absolute   position   -1000px	   left   top   style   appendChild   documentElement   insertBefore   firstChildO   position: absolute; left: 10.7432222px;   cssText   offset   support   offsetFractions      innerHTML   removeChild!!      testElement#   testElementParent!   testElementStyle   offsetLeft   i	   body   div         +H!!       !!   visibility!!!!   width!!!!   height!!!!   border!!!!   margin!!!!   background!!    !!       !!   position!!!!	   left!!!!   top!!    ;      *   5;5!!       C           d       
                                 0                 G       
=   [	   =   ]   [    d]   >]   @]   @]   ]   >]	      ]
      ]      ]      ]      ]      ]      ]      ]    Q 1 1 1 1( 13 1< 0 1e    widget   ui.progressbar   1.10.3   version   max   value   change   complete   options   min   _create   _destroy#   _constrainedValue   _setOptions   _setOption   _percentage   _refreshValue!!      $   undefined       +H!!       !!   max!!!!   value!!!!   change!!!!   complete!!    !!           _createB      0            5!!          _destroyB      1            5 !!          valueB  u  u 1     "       5 !!       #   _constrainedValueB     1     2       5!!          _setOptionsB     (1            5!!          _setOptionB     31     "       5!!          _percentageB        <1            5!!          _refreshValueB  ;  3  @1     r       5!!       !!   version!!!!   options!!!!   min!!!!   _create!!!!   _destroy!!!!   value!!!!#   _constrainedValue!!!!   _setOptions!!!!   _setOption!!!!   _percentage!!!!   _refreshValue!!    ;5 !!       C       1   '                                       g1                 G   Q       
=      5   5   [   =   ]   =   ]   [    B]   >]	   d]
   >]   =   ]   B]   ?]   >]   @]   @]   @]   @]   @]   ]      ]      ]      ]      ]      ]      ]      ]      ]   	   ]   
   ]      ]       ]!      ]"      ]#      ]$      ]%      ]      ]      ]&      ]'      ](      ])      ]*      ]+      ],   [      ]-      ].      ]/   ]0    Q 1 1 1 1 1 1 23 2@ 2N 2r 2~ 2 2 2 2 2 3- 37 3P 3d 3 3 1m 3    widget   ui.slider   ui   mouse   1.10.3   version   slide#   widgetEventPrefix   animate   distance   max   min   horizontal   orientation   range	   step   value   values   change   start	   stop   options   _create   _refresh   _createHandles   _createRange   _setupEvents   _destroy   _mouseCapture   _mouseStart   _mouseDrag   _mouseStop%   _detectOrientation'   _normValueFromMouse   _start   _slide   _stop   _change   _setOption   _value   _values   _trimAlignValue   _valueMin   _valueMax   _refreshValue   keydown   click   keyup   _handleEvents!!      $   undefined   numPages       +H!!       !!   animate!!!!   distance!!!!   max!!!!   min!!!!   orientation!!!!   range!!!!	   step!!!!   value!!!!   values!!!!   change!!!!   slide!!!!   start!!!!	   stop!!    !!          _createB   y  y 1            5!!          _refreshB      1            5 !!          _createHandlesB   B 	 B 1     2          B   =  = 1            5 5!!          _createRangeB  \  T  1            5 !!          _setupEventsB       1            5 !!          _destroyB      1            5 !!          _mouseCaptureB     1               normValue    distance    closestHandle    index 	   that    o    B  (  ( 
2     "       55!!          _mouseStartB      32            5!!          _mouseDragB     72            5 !!          _mouseStopB     @2            5 !!       %   _detectOrientationB   `  ` N2            5 !!       '   _normValueFromMouseB   y  R2     b       5 !!          _startB     r2     "       5!!          _slideB     ~2            5!!          _stopB     2     "       5 !!          _changeB     2     2       5!!          valueB  g  g 2     #       5 !!          valuesB { R s R 2            5 !!          _setOptionB j  b  2     s      5 !!          _valueB   b  b -3            5 !!          _valuesB 1 7 ) 7 73     S       5!!          _trimAlignValueB     P3     B       5 !!          _valueMinB   &  & d3            5!!          _valueMaxB  = _ 5 _ h3            5!!          _refreshValueB  z " r " l3               lastValPercent    valPercent    o 	   that    animate 	   _set   B     u3            55!!          keydownB J  B  3            5!!          clickB 0 Z ( Z 3            5!!          keyupB m z e z 3     "       5 !!       !!   keydown!!!!   click!!!!   keyup!!    !!       !!   version!!!!#   widgetEventPrefix!!!!   options!!!!   _create!!!!   _refresh!!!!   _createHandles!!!!   _createRange!!!!   _setupEvents!!!!   _destroy!!!!   _mouseCapture!!!!   _mouseStart!!!!   _mouseDrag!!!!   _mouseStop!!!!%   _detectOrientation!!!!'   _normValueFromMouse!!!!   _start!!!!   _slide!!!!   _stop!!!!   _change!!!!   value!!!!   values!!!!   _setOption!!!!   _value!!!!   _values!!!!   _trimAlignValue!!!!   _valueMin!!!!   _valueMax!!!!   _refreshValue!!!!   _handleEvents!!    ;5 !!       C  c     >   }      (                              (  ( 3                 G       Q       
=   ['   =   ]   =   ]   =   ]   [   @]   [   =	   ]
   =   ]   ]   C]   @]   @]   @]   
]   ?]   @]   @]   @]   @]   ]      ]      ]   [      ]   =   ]      ]      ]      ]   	   ]    =   ]!   
   ]"   =   ]#   ]$      ]%      ]&      ]'      ](      ])      ]*      ]+      ],      ]-      ].      ]/      ]      ]0         : ]1      ]2      ]3      ]4      ]5      ]6         : ]7       ]8      !   : ]9   "   ]:      #   : ];      $   : ]<   %   ]=   &   ]     Q 4 44 4B 4H 4X 4i 4 4 4 4 4 4 5  5 5 5# 5) 5D 5P 5s 5x 5 5 5 5 5 5
 5
 5 4 5    widget   ui.spinner   1.10.3   version   <input>   defaultElement	   spin#   widgetEventPrefix   culture)   ui-icon-triangle-1-s	   down)   ui-icon-triangle-1-n   up   icons   incremental   max   min   numberFormat	   page	   step   change   start	   stop   options   _create#   _getCreateOptions   keydown   _stop   keyup   focus	   blur   mousewheel9   mousedown .ui-spinner-button5   mouseup .ui-spinner-button;   mouseenter .ui-spinner-button;   mouseleave .ui-spinner-button   _events   _draw   _keydown   _uiSpinnerHtml   _buttonHtml   _start   _repeat   _spin   _increment   _precision   _precisionOf   _adjustValue   _setOption   _setOptions   _parse   _format   _refresh   _value   _destroy   stepUp   _stepUp   stepDown   _stepDown   pageUp   pageDown   value!!      $   modifier       +H!!     	      modifier             	                                       {  { 3                      4 !!      fn       +H!!           modifier/<b   x  x 3     #      5;5!!       !!	   down!!!!   up!!    !!       !!   culture!!!!   icons!!!!   incremental!!!!   max!!!!   min!!!!   numberFormat!!!!	   page!!!!	   step!!!!   change!!!!	   spin!!!!   start!!!!	   stop!!    !!          _createB      4              B  _  W  .4            5 5!!       #   _getCreateOptionsB      44     2          options    element   B      84  ,           55!!          keydownB  S   S  C4     "       5 !!          focusB  x    p    I4            5!!       	   blurB       L4     2       5 !!          mousewheelB  2  2 X4     B          event    B      b4  .   "       55!!       9   mousedown .ui-spinner-buttonB ^ I	 V I	 i4  *   B          previous    checkFocus      checkFocus  `  M  s4     "         B      {4            5 5   B  d  \  4            5 5!!       ;   mouseenter .ui-spinner-buttonB 	 
 	 
 4  +   2       5!!    	   !!   keydown!!!!   keyup!!!!   focus!!!!	   blur!!!!   mousewheel!!!!9   mousedown .ui-spinner-button!!!!5   mouseup .ui-spinner-button!!!!;   mouseenter .ui-spinner-button!!!!;   mouseleave .ui-spinner-button!!    !!           _drawB      4     2       5!!          _keydownB     4     "       5!!          _uiSpinnerHtmlB   9  9 4            5 !!          _buttonHtmlB  R  J  4            5!!          _startB  p  p 4     2       5 !!          _repeatB  V } V 4     2          steps    event   B      4  #          5 5!!          _spinB i  a   5     2       5!!          _incrementB     5     "       5!!          _precisionB   |  | 5     "       5!!          _precisionOfB     #5            5 !!          _adjustValueB 1  )  )5     2       5 !!          _stopB #    D5     "       5 !!          _setOptionB      P5            5!!          ._setOptions<b     s5            5!!          _parseB        x5     "       5!!          _formatB ! !  ! ! 5     "       5 !!          _refreshB  ! " ! " 5            5 !!          _valueB # 2$ 	# 2$ 5     B       5!!          _destroyB  H$ q% @$ q% 5            5 !!          .stepUp<b % % % % 5            5 !!          _stepUpB % 9& % 9& 5     "       5 !!          .stepDown<b X& & P& & 5            5 !!          _stepDownB & ' & ' 5     "       5 !!          .pageUp<b %' g' ' g' 5            5 !!          .pageDown<b ' ' ' ' 5            5 !!          valueB ' l( ' l( 5     #       5 !!          widgetB  ( ( x( ( 5            5 !!    "   !!   version!!!!   defaultElement!!!!#   widgetEventPrefix!!!!   options!!!!   _create!!!!#   _getCreateOptions!!!!   _events!!!!   _draw!!!!   _keydown!!!!   _uiSpinnerHtml!!!!   _buttonHtml!!!!   _start!!!!   _repeat!!!!   _spin!!!!   _increment!!!!   _precision!!!!   _precisionOf!!!!   _adjustValue!!!!   _stop!!!!   _setOption!!!!   _setOptions!!!!   _parse!!!!   _format!!!!   _refresh!!!!   _value!!!!   _destroy!!!!   stepUp!!!!   _stepUp!!!!   stepDown!!!!   _stepDown!!!!   pageUp!!!!   pageDown!!!!   value!!!!   widget!!    ;5!!       C       /   2      #                             ( d} ( d} 5                 G       Q      Q>   Q      Q       
=   ["   =   ]   X,]   [   @]   B]   =   ]   =	   ]
   @]   @]   @]   @]   @]   @]   ]      ]      ]      ]      ]      ]   	   ]   
   ]      ]      ]      ]      ]      ]      ]      ]      ]       ]!      ]"      ]#      ]$      ]%      ]&      ]'      ](      ])      ]*      ]+      ],      ]       ]-   !   ].    Q 5 6/ 6Z 6a 6 6 6 6 6 6 7 7? 7 7 7 7 7 8 8K 8a 8n 8 8 8 9 9 5 9    widget   ui.tabs   1.10.3   version   delay   active   collapsible   click   event   content   heightStyle	   hide	   show   activate   beforeActivate   beforeLoad	   load   options   _create   _initialActive'   _getCreateEventData   _tabKeydown   _panelKeydown   _handlePageNav   _findNextTab   _focusNextTab   _setOption   _tabId#   _sanitizeSelector   refresh   _refresh   _processTabs   _getList   _createPanel   _setupDisabled   _setupEvents#   _setupHeightStyle   _eventHandler   _toggle   _activate   _findActive   _getIndex   _destroy   enable   disable   _ajaxSettings   _getPanelForTab!!      $   undefined   tabId   rhash   getNextTabId   isLocal       +H!!          getNextTabId  	)  ) (  ) 5            5 !!          isLocal 2) ) ") ) 5            5!!	   #.*$    !!    
   !!   active!!!!   collapsible!!!!   event!!!!   heightStyle!!!!	   hide!!!!	   show!!!!   activate!!!!   beforeActivate!!!!   beforeLoad!!!!	   load!!    !!           _createB  + |1 * |1 5     b       	   that    B h, , `, , 6  N   "       5   B  U. . M. . 6  H   "       5   B 0 30 / 30 6  =          5 5!!          _initialActiveB  1 5 1 5 /6               active    locationHash   B 2 3 2 3 76             55!!       '   _getCreateEventDataB  5 @6 5 @6 Z6            5!!          _tabKeydownB Y6 = Q6 = a6     R          selectedIndex    B  u= = m= = 6  )          5 5!!          _panelKeydownB = > = > 6     2       5!!          _handlePageNavB (? y@  ? y@ 6     2       5 !!          _findNextTabB @ A @ A 6     B          index    lastTabIndex       constrain  @ pA @ pA 6     0       55!!          _focusNextTabB B B B B 6            5!!          _setOptionB B vE B vE 6     r       5 !!          _tabIdB E E E E 6            5 !!       #   _sanitizeSelectorB E [F E [F 6            5!!          refreshB  pF J hF J 6     r          lis    B G G G G 6  H          5 5!!          _refreshB  J M J M 7     2       5 !!          _processTabsB  M ^T M ^T ?7     "       	   that   B  QO zO IO zO M7  '          5    B P S P S X7     `       55!!          _getListB  T T T T 7            5 !!          _createPanelB U U U U 7            5 !!          _setupDisabledB U  X U  X 7     r       5 !!          _setupEventsB X Z X Z 7     2          events    B IX uX AX uX 7            5    B X X X X 7  %          5 5!!       #   _setupHeightStyleB 4Z ] ,Z ] 7     B          maxHeight   B  6[ [ .[ [ 7  4   "       5   B  <\ u\ 4\ u\ 7  ;          5    B  \ ] \ ] 7            5    B  |] ] t] ] 7            5 5!!          _eventHandlerB ^  c ]  c 7     R       5!!          _toggleB ^c i Vc i 8               event    eventData 	   that    toShow    complete 	   show      complete  c Gd c Gd 8            5    	   show  Xd Me Kd Me 8     0       5    B  e Rf e Rf &8  2          5    B  h i h i ;8            5 5!!          _activateB i k i k K8     2       5!!          _findActiveB k  l k  l a8            5!!          _getIndexB l m l m e8     "       5 !!          _destroyB  'm r m r n8     2          B  n q n q 8  ,   2       5    B  3q !r +q !r 8     2       5 5!!          enableB r t r t 8     r          index   B s s s s 8  (          5    B *t et "t et 8  )          5 5!!          disableB t [v t [v 8     r       5!!       	   loadB mv { ev { 8               event 	   that    tab    panel    eventData   B 1y z )y z 8                response   B  y y y y 8            5 5   B z { z { 8     0          jqXHR    status   B  z { z { 8     0       5 55!!          _ajaxSettingsB { | { | 9     B          event    eventData 	   that    B +| | #| | 
9            5 5!!          _getPanelForTabB | ]} | ]} 9            5!!    !   !!   version!!!!   delay!!!!   options!!!!   _create!!!!   _initialActive!!!!'   _getCreateEventData!!!!   _tabKeydown!!!!   _panelKeydown!!!!   _handlePageNav!!!!   _findNextTab!!!!   _focusNextTab!!!!   _setOption!!!!   _tabId!!!!#   _sanitizeSelector!!!!   refresh!!!!   _refresh!!!!   _processTabs!!!!   _getList!!!!   _createPanel!!!!   _setupDisabled!!!!   _setupEvents!!!!#   _setupHeightStyle!!!!   _eventHandler!!!!   _toggle!!!!   _activate!!!!   _findActive!!!!   _getIndex!!!!   _destroy!!!!   enable!!!!   disable!!!!	   load!!!!   _ajaxSettings!!!!   _getPanelForTab!!    ;5 !!       C  %                                            {} v s} v 9                 G       Q      Q>   Q       
=   [   =   ]   [      ]   C]   =   ]   [   =   ]	   =
   ]   =   ]   ]   C]   @]   B]   @]   @]   ]      ]      ]      ]      ]   	   ]   
   ]      ]      ]      ]      ]      ]      ]    Q 96 9@ 9a 9t 9 9 9 9 :; :i :z : : 96 :    widget   ui.tooltip   1.10.3   version   content	   hide/   [title]:not([disabled])   items   left top+15   my   left bottom   at   flipfit flip   collision   position	   show   tooltipClass   track   close	   open   options   _create   _setOption   _disable   _enable   _updateContent   _open   _tooltip   _find   _removeTooltip   _destroy!!      $   increments   addDescribedBy#   removeDescribedBy       +H!!          addDescribedBy } ~ } ~ 9            5 !!       #   removeDescribedBy ~ [ ~ [ %9     @       5 !!          contentB      99            5!!       !!   my!!!!   at!!!!   collision!!    !!    	   !!   content!!!!	   hide!!!!   items!!!!   position!!!!	   show!!!!   tooltipClass!!!!   track!!!!   close!!!!	   open!!    !!           _createB   %   % Q9     "       5 !!          _setOptionB =  5  a9     B       	   that   B ^  V  n9  "          5 5!!          _disableB      t9     "       	   that   B 
    x9  !          5    B      9  A   "       55!!          _enableB      9              B  <  4  9  A   "       55!!       	   openB  X  X 9     R       	   that    B  x & p & 9  !   2       5 5!!          _updateContentB t  l  9     r          target    event 	   that    eventType    B  s  s 9  3   0          response    B   m  m 9     "       555!!          _openB  5  5 9              target    tooltip    delayedShow    positionOption    position       position k  Z  :             5   B  {  s  :  8           5   B g # _ # ':     "       5   B  8 e 0 e .:            5 5!!          closeB H n @ n ;:     b       	   that    B   ,  , Q:  2          5    B     ^:  !          5 5!!          _tooltipB  . | . i:            5 !!          _findB A  9  z:            5!!          _removeTooltipB     :            5 !!          _destroyB  $ o  o :     "       	   that   B w j o j :  !           55!!       !!   version!!!!   options!!!!   _create!!!!   _setOption!!!!   _disable!!!!   _enable!!!!	   open!!!!   _updateContent!!!!   _open!!!!   close!!!!   _tooltip!!!!   _find!!!!   _removeTooltip!!!!   _destroy!!    ;5 ;;Q([D]m     \l[\l[@d\l   9    :https://www.campusinteraction.com/js/jquery-ui-1.10.3.js necko:classified 1 strongly-framed 1 security-info FnhllAKWRHGAlo+ESXykKAAAAAAAAAAAwAAAAAAAAEaphjojH6pBabDSgSnsfLHeAAgAAgAAAAAAAAAAAAAAAAAAAAEAMQFmCjImkVxP+7sgiYWmMt8FvcOXmlQiTNWFiWlrbpbqgwAAAAAAAAZaMIIGVjCCBT6gAwIBAgIIQPVmRmD4imAwDQYJKoZIhvcNAQELBQAwgbQxCzAJBgNVBAYTAlVTMRAwDgYDVQQIEwdBcml6b25hMRMwEQYDVQQHEwpTY290dHNkYWxlMRowGAYDVQQKExFHb0RhZGR5LmNvbSwgSW5jLjEtMCsGA1UECxMkaHR0cDovL2NlcnRzLmdvZGFkZHkuY29tL3JlcG9zaXRvcnkvMTMwMQYDVQQDEypHbyBEYWRkeSBTZWN1cmUgQ2VydGlmaWNhdGUgQXV0aG9yaXR5IC0gRzIwHhcNMTgxMTIzMTMxOTUzWhcNMTkwNDExMTAyOTAyWjBHMSEwHwYDVQQLExhEb21haW4gQ29udHJvbCBWYWxpZGF0ZWQxIjAgBgNVBAMTGXd3dy5jYW1wdXNpbnRlcmFjdGlvbi5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCuiXcFKCXU2i/3wDSccP39FMyqKycd8qY3taI33on3U/miHHHFTmM/Wup0q9A4JvFLBLwIuGVR7SzcgUIZ/SSzfIN7quVSOR+1wvxAB+MPqlUDX1r7SfFsssWaAv4GaWD9e/NXTXN9OcvsVqsz6muf0ZJUTHrGl5RaY+qWb3i6Lrn/0z/Pyn0ZTeyOCQNtfOYXJqHDzJlJhS/FIGXTfMHNjFktnbvhvIVl5RDuI67HbCOgbTNq2MSBM6QAc3+E3DhsaDE+9/s3Me3v/DntzO13O+RsrMHal5OpAr49z88GIdTHoub02lVNpfrCTY3HML84gYpPhRnGNLKpiUXlKaGNAgMBAAGjggLWMIIC0jAMBgNVHRMBAf8EAjAAMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAOBgNVHQ8BAf8EBAMCBaAwNwYDVR0fBDAwLjAsoCqgKIYmaHR0cDovL2NybC5nb2RhZGR5LmNvbS9nZGlnMnMxLTg5MS5jcmwwXQYDVR0gBFYwVDBIBgtghkgBhv1tAQcXATA5MDcGCCsGAQUFBwIBFitodHRwOi8vY2VydGlmaWNhdGVzLmdvZGFkZHkuY29tL3JlcG9zaXRvcnkvMAgGBmeBDAECATB2BggrBgEFBQcBAQRqMGgwJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmdvZGFkZHkuY29tLzBABggrBgEFBQcwAoY0aHR0cDovL2NlcnRpZmljYXRlcy5nb2RhZGR5LmNvbS9yZXBvc2l0b3J5L2dkaWcyLmNydDAfBgNVHSMEGDAWgBRAwr0njsw0gzCiM9f7bLPwtCyAzjA7BgNVHREENDAyghl3d3cuY2FtcHVzaW50ZXJhY3Rpb24uY29tghVjYW1wdXNpbnRlcmFjdGlvbi5jb20wHQYDVR0OBBYEFLOCgH8rU6WOSESEMNu/HPFRQDgWMIIBBAYKKwYBBAHWeQIEAgSB9QSB8gDwAHUApLkJkLQYWBSHuxOizGdwCjw1mAT5G9+443fNDsgN3BAAAAFnQLoLFQAABAMARjBEAiAfOrdNU3/7q/ADoEWRjuekPa5PkVOg8yn+mpEDkrm3yAIgQWgPQ13YLzWdF/K7I6Mfuu0S4Gs0b66+srZ7N1Zq6AEAdwB0ftqDMa0zEJEhnM4lT0Jwwr/9XkIgCMY3NXnmEHvMVgAAAWdAug+rAAAEAwBIMEYCIQCwlgNPmVMjeBMrb8cOgIHK0Nbx8d47ndzFla/n2V++uwIhAI1EwJ+bEo9FNXM6g5Za5+26oKnjyZMV/BWFIvrbC8tXMA0GCSqGSIb3DQEBCwUAA4IBAQBk8Y3jq3jQkxftRQ438cHgcrUFPDWHQvDTcPqZxFt/XjQ8ZJPaQumlB1PWNGQYJnVA14lAvu9OBau6JD6eUDfD8yBC/kSv+35IRSY58t5gM6Rz/byhWfk7lXnD+pSjPnvblq5DVAaESb+bsgOsk7MbxBEZ4Y1R6XpGjhipbToIrCFnlfo0B0YJmB3lQzxEe501Pk9wceD+HFEUVrxpVd/oEo5+5ccW9ikIzt7qy1faCgbe4HPKnfU7v6M65kVaI6Tfpfahh/bQWi2XSE+IDgebqrcRTdoCtDY61dG7AAwM2k3K7+qdHyocFeWzSQqylLbohu4X20bk7XfDzU9u/wcAwC8AAwAAAAABAQAAAAAAAARub25lAAAAEFJTQS1QS0NTMS1TSEEyNTYBlZ+xZWUXSH+rm9iRO+Uxl650zaXNL0c/lvXwt//2LGgAAAADZgoyJpFcT/u7IImFpjLfBb3Dl5pUIkzVhYlpa26W6oMAAAAAAAAGWjCCBlYwggU+oAMCAQICCED1ZkZg+IpgMA0GCSqGSIb3DQEBCwUAMIG0MQswCQYDVQQGEwJVUzEQMA4GA1UECBMHQXJpem9uYTETMBEGA1UEBxMKU2NvdHRzZGFsZTEaMBgGA1UEChMRR29EYWRkeS5jb20sIEluYy4xLTArBgNVBAsTJGh0dHA6Ly9jZXJ0cy5nb2RhZGR5LmNvbS9yZXBvc2l0b3J5LzEzMDEGA1UEAxMqR28gRGFkZHkgU2VjdXJlIENlcnRpZmljYXRlIEF1dGhvcml0eSAtIEcyMB4XDTE4MTEyMzEzMTk1M1oXDTE5MDQxMTEwMjkwMlowRzEhMB8GA1UECxMYRG9tYWluIENvbnRyb2wgVmFsaWRhdGVkMSIwIAYDVQQDExl3d3cuY2FtcHVzaW50ZXJhY3Rpb24uY29tMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEArol3BSgl1Nov98A0nHD9/RTMqisnHfKmN7WiN96J91P5ohxxxU5jP1rqdKvQOCbxSwS8CLhlUe0s3IFCGf0ks3yDe6rlUjkftcL8QAfjD6pVA19a+0nxbLLFmgL+Bmlg/XvzV01zfTnL7FarM+prn9GSVEx6xpeUWmPqlm94ui65/9M/z8p9GU3sjgkDbXzmFyahw8yZSYUvxSBl03zBzYxZLZ274byFZeUQ7iOux2wjoG0zatjEgTOkAHN/hNw4bGgxPvf7NzHt7/w57cztdzvkbKzB2peTqQK+Pc/PBiHUx6Lm9NpVTaX6wk2NxzC/OIGKT4UZxjSyqYlF5SmhjQIDAQABo4IC1jCCAtIwDAYDVR0TAQH/BAIwADAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwDgYDVR0PAQH/BAQDAgWgMDcGA1UdHwQwMC4wLKAqoCiGJmh0dHA6Ly9jcmwuZ29kYWRkeS5jb20vZ2RpZzJzMS04OTEuY3JsMF0GA1UdIARWMFQwSAYLYIZIAYb9bQEHFwEwOTA3BggrBgEFBQcCARYraHR0cDovL2NlcnRpZmljYXRlcy5nb2RhZGR5LmNvbS9yZXBvc2l0b3J5LzAIBgZngQwBAgEwdgYIKwYBBQUHAQEEajBoMCQGCCsGAQUFBzABhhhodHRwOi8vb2NzcC5nb2RhZGR5LmNvbS8wQAYIKwYBBQUHMAKGNGh0dHA6Ly9jZXJ0aWZpY2F0ZXMuZ29kYWRkeS5jb20vcmVwb3NpdG9yeS9nZGlnMi5jcnQwHwYDVR0jBBgwFoAUQMK9J47MNIMwojPX+2yz8LQsgM4wOwYDVR0RBDQwMoIZd3d3LmNhbXB1c2ludGVyYWN0aW9uLmNvbYIVY2FtcHVzaW50ZXJhY3Rpb24uY29tMB0GA1UdDgQWBBSzgoB/K1OljkhEhDDbvxzxUUA4FjCCAQQGCisGAQQB1nkCBAIEgfUEgfIA8AB1AKS5CZC0GFgUh7sTosxncAo8NZgE+RvfuON3zQ7IDdwQAAABZ0C6CxUAAAQDAEYwRAIgHzq3TVN/+6vwA6BFkY7npD2uT5FToPMp/pqRA5K5t8gCIEFoD0Nd2C81nRfyuyOjH7rtEuBrNG+uvrK2ezdWaugBAHcAdH7agzGtMxCRIZzOJU9CcMK//V5CIAjGNzV55hB7zFYAAAFnQLoPqwAABAMASDBGAiEAsJYDT5lTI3gTK2/HDoCBytDW8fHeO53cxZWv59lfvrsCIQCNRMCfmxKPRTVzOoOWWuftuqCp48mTFfwVhSL62wvLVzANBgkqhkiG9w0BAQsFAAOCAQEAZPGN46t40JMX7UUON/HB4HK1BTw1h0Lw03D6mcRbf140PGST2kLppQdT1jRkGCZ1QNeJQL7vTgWruiQ+nlA3w/MgQv5Er/t+SEUmOfLeYDOkc/28oVn5O5V5w/qUoz5725auQ1QGhEm/m7IDrJOzG8QRGeGNUel6Ro4YqW06CKwhZ5X6NAdGCZgd5UM8RHudNT5PcHHg/hxRFFa8aVXf6BKOfuXHFvYpCM7e6stX2goG3uBzyp31O7+jOuZFWiOk36X2oYf20Fotl0hPiA4Hm6q3EU3aArQ2OtXRuwAMDNpNyu/qnR8qHBXls0kKspS26IbuF9tG5O13w81Pbv8HAGYKMiaRXE/7uyCJhaYy3wW9w5eaVCJM1YWJaWtuluqDAAAAAAAABNQwggTQMIIDuKADAgECAgEHMA0GCSqGSIb3DQEBCwUAMIGDMQswCQYDVQQGEwJVUzEQMA4GA1UECBMHQXJpem9uYTETMBEGA1UEBxMKU2NvdHRzZGFsZTEaMBgGA1UEChMRR29EYWRkeS5jb20sIEluYy4xMTAvBgNVBAMTKEdvIERhZGR5IFJvb3QgQ2VydGlmaWNhdGUgQXV0aG9yaXR5IC0gRzIwHhcNMTEwNTAzMDcwMDAwWhcNMzEwNTAzMDcwMDAwWjCBtDELMAkGA1UEBhMCVVMxEDAOBgNVBAgTB0FyaXpvbmExEzARBgNVBAcTClNjb3R0c2RhbGUxGjAYBgNVBAoTEUdvRGFkZHkuY29tLCBJbmMuMS0wKwYDVQQLEyRodHRwOi8vY2VydHMuZ29kYWRkeS5jb20vcmVwb3NpdG9yeS8xMzAxBgNVBAMTKkdvIERhZGR5IFNlY3VyZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkgLSBHMjCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALngyxDUr3a91JNi6zBkuIEIbMME2WIXji//PmXPj85i5jxSHNoWRUtVq3hrY4NikM4PaWyZyBoUi0zMRTPqiNyeo68r/oBhnXlXxM8u9D8wPF1H/JoWvMM3lkFRjhFLVPgovtCMvvAwOB7zsCb4Zkdjbd5xJkePOEdT0UYdtOPcAOpFrL28cdmqbwDb280wOnlPX0xH+B3vW8LEnWA7sbJDkdikM07qs9YnT60liqXG9NXQpq50BWRXiLVEVdQtKjo++Li96TIKApRkxBY6UPFKrud5M68MIAd/6N8EOcJpAmxjUvp3wRvIdIfIuZMYUFQ1S2lOvDvTSS4f3MHSUvsCAwEAAaOCARowggEWMA8GA1UdEwEB/wQFMAMBAf8wDgYDVR0PAQH/BAQDAgEGMB0GA1UdDgQWBBRAwr0njsw0gzCiM9f7bLPwtCyAzjAfBgNVHSMEGDAWgBQ6moUHEGcotu/2vQVBbiDBlNoP3jA0BggrBgEFBQcBAQQoMCYwJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmdvZGFkZHkuY29tLzA1BgNVHR8ELjAsMCqgKKAmhiRodHRwOi8vY3JsLmdvZGFkZHkuY29tL2dkcm9vdC1nMi5jcmwwRgYDVR0gBD8wPTA7BgRVHSAAMDMwMQYIKwYBBQUHAgEWJWh0dHBzOi8vY2VydHMuZ29kYWRkeS5jb20vcmVwb3NpdG9yeS8wDQYJKoZIhvcNAQELBQADggEBAAh+bJMQyDi4lqmQS/+hX08E72w+nIgGyVCPpnP3VzEbvrzkL9v4utNb4LTn5nliDgyi12pjczG19ahIpDsILaJdkNe0fCVPEVYwxLZEnXssneVe5u8MYaq/5Cob7oSeuIN9wUPORKcTcA2RH/TIE62DYNnYcqhzJB61rCIOyheJYlhEG6uJJQEAD83EG2LbUbTTD1Eqm/S8c/x2zjakzdnYLOqum/UqspDRTXUYij+KQZAjfVtL/qQDWJtGssNgYIP4fVBBzsKhkMO77wIv0hVU7kQV2Qqup4oz7bEtdjYm3ATrn/dhHxXch2/uRpYoraEmfQoJpy4Eo428+LwEMAFmCjImkVxP+7sgiYWmMt8FvcOXmlQiTNWFiWlrbpbqgwAAAAAAAAPJMIIDxTCCAq2gAwIBAgIBADANBgkqhkiG9w0BAQsFADCBgzELMAkGA1UEBhMCVVMxEDAOBgNVBAgTB0FyaXpvbmExEzARBgNVBAcTClNjb3R0c2RhbGUxGjAYBgNVBAoTEUdvRGFkZHkuY29tLCBJbmMuMTEwLwYDVQQDEyhHbyBEYWRkeSBSb290IENlcnRpZmljYXRlIEF1dGhvcml0eSAtIEcyMB4XDTA5MDkwMTAwMDAwMFoXDTM3MTIzMTIzNTk1OVowgYMxCzAJBgNVBAYTAlVTMRAwDgYDVQQIEwdBcml6b25hMRMwEQYDVQQHEwpTY290dHNkYWxlMRowGAYDVQQKExFHb0RhZGR5LmNvbSwgSW5jLjExMC8GA1UEAxMoR28gRGFkZHkgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkgLSBHMjCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAL9xYgjx+lk09xvJGKP3gElY6SKDE6bFIEMBO4Tx5oVJnyfq9oQbTqC023CYxzIBsQU+B07u9PpPL1kwIuerGVZr4oAH/PMWdYA5UXvl+TW2dE6pjYIT5LY/qQOD+qK+ihVqf94Lw7YZFAXK6sOoBJQ7RnwyDfMAZiLIjWltNowRGLfTshxgtDj6AozO091GB94KPutdfMh8+7ArU6SSYmlRJQVhGkSBjCypQ5Yj36w6gZoOKcUcqeldHraenjAKOc7xiID7S13MMuyFYkMlNAJWJwGRtDtwKj9useiciAF9n9T521NtYJ2/LOdYq7hfRvzOxBsDPAnrSTFcaUaz4EcCAwEAAaNCMEAwDwYDVR0TAQH/BAUwAwEB/zAOBgNVHQ8BAf8EBAMCAQYwHQYDVR0OBBYEFDqahQcQZyi27/a9BUFuIMGU2g/eMA0GCSqGSIb3DQEBCwUAA4IBAQCZ21151fmXWWcDYfF+OwYxdS2hII5PZYe096acvNjpL9DbWu7PdIxztDhC2gV7+AJ1uP2lsdeu9tfeE8tTEH6KRtGX+rcuKxGrkLAngPnon1rpN5+r5N9ss4UXnT3ZJE95kTXWXwTrgIOrmgIttRD02JDHBHNA7XIloKmf7J6raBKZV8aPEjoJpL1E/QYVN8Gb5DKj7Tjo2GTzLH4U/ALqn83/B2gX2yKQOC16jdFU8WnjXzPKej17CuPKf1855eJ1usV2GDPOLPAvTK33sefOT6jEm0pUBsV/fdUID+Ic/n4XuKxe9tQWskMJDE32p2u0mYRlynqI4uJEvlz36hz1AA== request-method GET response-head HTTP/1.1 200 OK
Accept-Ranges: bytes
ETag: W/"435844-1539164302000"
Last-Modified: Wed, 10 Oct 2018 09:38:22 GMT
Content-Type: application/javascript;charset=ISO-8859-1
Content-Language: en-US
Content-Length: 435844
Date: Wed, 13 Feb 2019 07:04:40 GMT
Server: Apache-Coyote/1.1
 original-response-headers Date: Fri, 04 Jan 2019 11:35:14 GMT
Server: Apache-Coyote/1.1
Accept-Ranges: bytes
ETag: W/"435844-1539164302000"
Last-Modified: Wed, 10 Oct 2018 09:38:22 GMT
Content-Type: application/javascript;charset=ISO-8859-1
Content-Language: en-US
Content-Length: 435844
Connection: close
 uncompressed-len 0 net-response-time-onstart 1039 net-response-time-onstop 2595 alt-data 1;435844,javascript/moz-bytecode-20190128165852 alt-data-from-child 1  D