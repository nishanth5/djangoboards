/*
 * Inline Form Validation Engine 2.6.2, jQuery plugin
 *
 * Copyright(c) 2010, Cedric Dugas
 * http://www.position-absolute.com
 *
 * 2.0 Rewrite by Olivier Refalo
 * http://www.crionics.com
 *
 * Form validation engine allowing custom regex rules to be added.
 * Licensed under the MIT License
 */
 (function($) {

	"use strict";

	var methods = {

		/**
		* Kind of the constructor, called before any action
		* @param {Map} user options
		*/
		init: function(options) {
			var form = this;
			if (!form.data('jqv') || form.data('jqv') == null ) {
				options = methods._saveOptions(form, options);
				// bind all formError elements to close on click
				$(document).on("click", ".formError", function() {
					$(this).fadeOut(150, function() {
						// remove prompt once invisible
						$(this).closest('.formError').remove();
					});
				});
			}
			return this;
		 },
		/**
		* Attachs jQuery.validationEngine to form.submit and field.blur events
		* Takes an optional params: a list of options
		* ie. jQuery("#formID1").validationEngine('attach', {promptPosition : "centerRight"});
		*/
		attach: function(userOptions) {

			var form = this;
			var options;

			if(userOptions)
				options = methods._saveOptions(form, userOptions);
			else
				options = form.data('jqv');

			options.validateAttribute = (form.find("[data-validation-engine*=validate]").length) ? "data-validation-engine" : "class";
			if (options.binded) {

				// delegate fields
				form.on(options.validationEventTrigger, "["+options.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)", methods._onFieldEvent);
				form.on("click", "["+options.validateAttribute+"*=validate][type=checkbox],["+options.validateAttribute+"*=validate][type=radio]", methods._onFieldEvent);
				form.on(options.validationEventTrigger,"["+options.validateAttribute+"*=validate][class*=datepicker]", {"delay": 300}, methods._onFieldEvent);
			}
			if (options.autoPositionUpdate) {
				$(window).bind("resize", {
					"noAnimation": true,
					"formElem": form
				}, methods.updatePromptsPosition);
			}
			form.on("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']", methods._submitButtonClick);
			form.removeData('jqv_submitButton');

			// bind form.submit
			form.on("submit", methods._onSubmitEvent);
			return this;
		},
		/**
		* Unregisters any bindings that may point to jQuery.validaitonEngine
		*/
		detach: function() {

			var form = this;
			var options = form.data('jqv');

			// unbind fields
			form.off(options.validationEventTrigger, "["+options.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)", methods._onFieldEvent);
			form.off("click", "["+options.validateAttribute+"*=validate][type=checkbox],["+options.validateAttribute+"*=validate][type=radio]", methods._onFieldEvent);
			form.off(options.validationEventTrigger,"["+options.validateAttribute+"*=validate][class*=datepicker]", methods._onFieldEvent);

			// unbind form.submit
			form.off("submit", methods._onSubmitEvent);
			form.removeData('jqv');

			form.off("click", "a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']", methods._submitButtonClick);
			form.removeData('jqv_submitButton');

			if (options.autoPositionUpdate)
				$(window).off("resize", methods.updatePromptsPosition);

			return this;
		},
		/**
		* Validates either a form or a list of fields, shows prompts accordingly.
		* Note: There is no ajax form validation with this method, only field ajax validation are evaluated
		*
		* @return true if the form validates, false if it fails
		*/
		validate: function(userOptions) {
			var element = $(this);
			var valid = null;
			var options;

			if (element.is("form") || element.hasClass("validationEngineContainer")) {
				if (element.hasClass('validating')) {
					// form is already validating.
					// Should abort old validation and start new one. I don't know how to implement it.
					return false;
				} else {
					element.addClass('validating');
					if(userOptions)
						options = methods._saveOptions(element, userOptions);
					else
						options = element.data('jqv');
					var valid = methods._validateFields(this);

					// If the form doesn't validate, clear the 'validating' class before the user has a chance to submit again
					setTimeout(function(){
						element.removeClass('validating');
					}, 100);
					if (valid && options.onSuccess) {
						options.onSuccess();
					} else if (!valid && options.onFailure) {
						options.onFailure();
					}
				}
			} else if (element.is('form') || element.hasClass('validationEngineContainer')) {
				element.removeClass('validating');
			} else {
				// field validation
		                var form = element.closest('form, .validationEngineContainer');
		                options = (form.data('jqv')) ? form.data('jqv') : $.validationEngine.defaults;
		                valid = methods._validateField(element, options);

		                if (valid && options.onFieldSuccess)
		                    options.onFieldSuccess();
		                else if (options.onFieldFailure && options.InvalidFields.length > 0) {
		                    options.onFieldFailure();
		                }

		                return !valid;
			}
			if(options.onValidationComplete) {
				// !! ensures that an undefined return is interpreted as return false but allows a onValidationComplete() to possibly return true and have form continue processing
				return !!options.onValidationComplete(form, valid);
			}
			return valid;
		},
		/**
		*  Redraw prompts position, useful when you change the DOM state when validating
		*/
		updatePromptsPosition: function(event) {

			if (event && this == window) {
				var form = event.data.formElem;
				var noAnimation = event.data.noAnimation;
			}
			else
				var form = $(this.closest('form, .validationEngineContainer'));

			var options = form.data('jqv');
			// No option, take default one
			if (!options)
				options = methods._saveOptions(form, options);
			form.find('['+options.validateAttribute+'*=validate]').not(":disabled").each(function(){
				var field = $(this);
				if (options.prettySelect && field.is(":hidden"))
				  field = form.find("#" + options.usePrefix + field.attr('id') + options.useSuffix);
				var prompt = methods._getPrompt(field);
				var promptText = $(prompt).find(".formErrorContent").html();

				if(prompt)
					methods._updatePrompt(field, $(prompt), promptText, undefined, false, options, noAnimation);
			});
			return this;
		},
		/**
		* Displays a prompt on a element.
		* Note that the element needs an id!
		*
		* @param {String} promptText html text to display type
		* @param {String} type the type of bubble: 'pass' (green), 'load' (black) anything else (red)
		* @param {String} possible values topLeft, topRight, bottomLeft, centerRight, bottomRight
		*/
		showPrompt: function(promptText, type, promptPosition, showArrow) {
			var form = this.closest('form, .validationEngineContainer');
			var options = form.data('jqv');
			// No option, take default one
			if(!options)
				options = methods._saveOptions(this, options);
			if(promptPosition)
				options.promptPosition=promptPosition;
			options.showArrow = showArrow==true;

			methods._showPrompt(this, promptText, type, false, options);
			return this;
		},
		/**
		* Closes form error prompts, CAN be invidual
		*/
		hide: function() {
			 var form = $(this).closest('form, .validationEngineContainer');
			 var options = form.data('jqv');
			 // No option, take default one
			 if (!options)
				options = methods._saveOptions(form, options);
			 var fadeDuration = (options && options.fadeDuration) ? options.fadeDuration : 0.3;
			 var closingtag;

			 if(form.is("form") || form.hasClass("validationEngineContainer")) {
				 closingtag = "parentForm"+methods._getClassName($(form).attr("id"));
			 } else {
				 closingtag = methods._getClassName($(form).attr("id")) +"formError";
			 }
			 $('.'+closingtag).fadeTo(fadeDuration, 0, function() {
				 $(this).closest('.formError').remove();
			 });
			 return this;
		 },
		 /**
		 * Closes all error prompts on the page
		 */
		 hideAll: function() {
			 var form = this;
			 var options = form.data('jqv');
			 var duration = options ? options.fadeDuration:300;
			 $('.formError').fadeTo(duration, 0, function() {
				 $(this).closest('.formError').remove();
			 });
			 return this;
		 },
		/**
		* Typically called when user exists a field using tab or a mouse click, triggers a field
		* validation
		*/
		_onFieldEvent: function(event) {
			var field = $(this);
			var form = field.closest('form, .validationEngineContainer');
			var options = form.data('jqv');
			// No option, take default one
			if (!options)
				options = methods._saveOptions(form, options);
			options.eventTrigger = "field";

            if (options.notEmpty == true){

                if(field.val().length > 0){
                    // validate the current field
                    window.setTimeout(function() {
                        methods._validateField(field, options);
                    }, (event.data) ? event.data.delay : 0);

                }

            }else{

                // validate the current field
                window.setTimeout(function() {
                    methods._validateField(field, options);
                }, (event.data) ? event.data.delay : 0);

            }




		},
		/**
		* Called when the form is submited, shows prompts accordingly
		*
		* @param {jqObject}
		*            form
		* @return false if form submission needs to be cancelled
		*/
		_onSubmitEvent: function() {
			var form = $(this);
			var options = form.data('jqv');

			//check if it is trigger from skipped button
			if (form.data("jqv_submitButton")){
				var submitButton = $("#" + form.data("jqv_submitButton"));
				if (submitButton){
					if (submitButton.length > 0){
						if (submitButton.hasClass("validate-skip") || submitButton.attr("data-validation-engine-skip") == "true")
							return true;
					}
				}
			}

			options.eventTrigger = "submit";

			// validate each field
			// (- skip field ajax validation, not necessary IF we will perform an ajax form validation)
			var r=methods._validateFields(form);

			if (r && options.ajaxFormValidation) {
				methods._validateFormWithAjax(form, options);
				// cancel form auto-submission - process with async call onAjaxFormComplete
				return false;
			}

			if(options.onValidationComplete) {
				// !! ensures that an undefined return is interpreted as return false but allows a onValidationComplete() to possibly return true and have form continue processing
				return !!options.onValidationComplete(form, r);
			}
			return r;
		},
		/**
		* Return true if the ajax field validations passed so far
		* @param {Object} options
		* @return true, is all ajax validation passed so far (remember ajax is async)
		*/
		_checkAjaxStatus: function(options) {
			var status = true;
			$.each(options.ajaxValidCache, function(key, value) {
				if (!value) {
					status = false;
					// break the each
					return false;
				}
			});
			return status;
		},

		/**
		* Return true if the ajax field is validated
		* @param {String} fieldid
		* @param {Object} options
		* @return true, if validation passed, false if false or doesn't exist
		*/
		_checkAjaxFieldStatus: function(fieldid, options) {
			return options.ajaxValidCache[fieldid] == true;
		},
		/**
		* Validates form fields, shows prompts accordingly
		*
		* @param {jqObject}
		*            form
		* @param {skipAjaxFieldValidation}
		*            boolean - when set to true, ajax field validation is skipped, typically used when the submit button is clicked
		*
		* @return true if form is valid, false if not, undefined if ajax form validation is done
		*/
		_validateFields: function(form) {
			var options = form.data('jqv');

			// this variable is set to true if an error is found
			var errorFound = false;

			// Trigger hook, start validation
			form.trigger("jqv.form.validating");
			// first, evaluate status of non ajax fields
			var first_err=null;
			form.find('['+options.validateAttribute+'*=validate]').not(":disabled").each( function() {
				var field = $(this);
				var names = [];
				if ($.inArray(field.attr('name'), names) < 0) {
					errorFound |= methods._validateField(field, options);
					if (errorFound && first_err==null)
						if (field.is(":hidden") && options.prettySelect)
							first_err = field = form.find("#" + options.usePrefix + methods._jqSelector(field.attr('id')) + options.useSuffix);
						else {

							//Check if we need to adjust what element to show the prompt on
							//and and such scroll to instead
							if(field.data('jqv-prompt-at') instanceof jQuery ){
								field = field.data('jqv-prompt-at');
							} else if(field.data('jqv-prompt-at')) {
								field = $(field.data('jqv-prompt-at'));
							}
							first_err=field;
						}
					if (options.doNotShowAllErrosOnSubmit)
						return false;
					names.push(field.attr('name'));

					//if option set, stop checking validation rules after one error is found
					if(options.showOneMessage == true && errorFound){
						return false;
					}
				}
			});

			// second, check to see if all ajax calls completed ok
			// errorFound |= !methods._checkAjaxStatus(options);

			// third, check status and scroll the container accordingly
			form.trigger("jqv.form.result", [errorFound]);

			if (errorFound) {
				if (options.scroll) {
					var destination=first_err.offset().top;
					var fixleft = first_err.offset().left;

					//prompt positioning adjustment support. Usage: positionType:Xshift,Yshift (for ex.: bottomLeft:+20 or bottomLeft:-20,+10)
					var positionType=options.promptPosition;
					if (typeof(positionType)=='string' && positionType.indexOf(":")!=-1)
						positionType=positionType.substring(0,positionType.indexOf(":"));

					if (positionType!="bottomRight" && positionType!="bottomLeft") {
						var prompt_err= methods._getPrompt(first_err);
						if (prompt_err) {
							destination=prompt_err.offset().top;
						}
					}

					// Offset the amount the page scrolls by an amount in px to accomodate fixed elements at top of page
					if (options.scrollOffset) {
						destination -= options.scrollOffset;
					}

					// get the position of the first error, there should be at least one, no need to check this
					//var destination = form.find(".formError:not('.greenPopup'):first").offset().top;
					if (options.isOverflown) {
						var overflowDIV = $(options.overflownDIV);
						if(!overflowDIV.length) return false;
						var scrollContainerScroll = overflowDIV.scrollTop();
						var scrollContainerPos = -parseInt(overflowDIV.offset().top);

						destination += scrollContainerScroll + scrollContainerPos - 5;
						var scrollContainer = $(options.overflownDIV).filter(":not(:animated)");

						scrollContainer.animate({ scrollTop: destination }, 1100, function(){
							if(options.focusFirstField) first_err.focus();
						});

					} else {
						$("html, body").animate({
							scrollTop: destination
						}, 1100, function(){
							if(options.focusFirstField) first_err.focus();
						});
						$("html, body").animate({scrollLeft: fixleft},1100)
					}

				} else if(options.focusFirstField)
					first_err.focus();
				return false;
			}
			return true;
		},
		/**
		* This method is called to perform an ajax form validation.
		* During this process all the (field, value) pairs are sent to the server which returns a list of invalid fields or true
		*
		* @param {jqObject} form
		* @param {Map} options
		*/
		_validateFormWithAjax: function(form, options) {

			var data = form.serialize();
									var type = (options.ajaxFormValidationMethod) ? options.ajaxFormValidationMethod : "GET";
			var url = (options.ajaxFormValidationURL) ? options.ajaxFormValidationURL : form.attr("action");
									var dataType = (options.dataType) ? options.dataType : "json";
			$.ajax({
				type: type,
				url: url,
				cache: false,
				dataType: dataType,
				data: data,
				form: form,
				methods: methods,
				options: options,
				beforeSend: function() {
					return options.onBeforeAjaxFormValidation(form, options);
				},
				error: function(data, transport) {
					if (options.onFailure) {
						options.onFailure(data, transport);
					} else {
						methods._ajaxError(data, transport);
					}
				},
				success: function(json) {
					if ((dataType == "json") && (json !== true)) {
						// getting to this case doesn't necessary means that the form is invalid
						// the server may return green or closing prompt actions
						// this flag helps figuring it out
						var errorInForm=false;
						for (var i = 0; i < json.length; i++) {
							var value = json[i];

							var errorFieldId = value[0];
							var errorField = $($("#" + errorFieldId)[0]);

							// make sure we found the element
							if (errorField.length == 1) {

								// promptText or selector
								var msg = value[2];
								// if the field is valid
								if (value[1] == true) {

									if (msg == ""  || !msg){
										// if for some reason, status==true and error="", just close the prompt
										methods._closePrompt(errorField);
									} else {
										// the field is valid, but we are displaying a green prompt
										if (options.allrules[msg]) {
											var txt = options.allrules[msg].alertTextOk;
											if (txt)
												msg = txt;
										}
										if (options.showPrompts) methods._showPrompt(errorField, msg, "pass", false, options, true);
									}
								} else {
									// the field is invalid, show the red error prompt
									errorInForm|=true;
									if (options.allrules[msg]) {
										var txt = options.allrules[msg].alertText;
										if (txt)
											msg = txt;
									}
									if(options.showPrompts) methods._showPrompt(errorField, msg, "", false, options, true);
								}
							}
						}
						options.onAjaxFormComplete(!errorInForm, form, json, options);
					} else
						options.onAjaxFormComplete(true, form, json, options);

				}
			});

		},
		/**
		* Validates field, shows prompts accordingly
		*
		* @param {jqObject}
		*            field
		* @param {Array[String]}
		*            field's validation rules
		* @param {Map}
		*            user options
		* @return false if field is valid (It is inversed for *fields*, it return false on validate and true on errors.)
		*/
		_validateField: function(field, options, skipAjaxValidation) {
			if (!field.attr("id")) {
				field.attr("id", "form-validation-field-" + $.validationEngine.fieldIdCounter);
				++$.validationEngine.fieldIdCounter;
			}

			if(field.hasClass(options.ignoreFieldsWithClass))
				return false;

           if (!options.validateNonVisibleFields && (field.is(":hidden") && !options.prettySelect || field.parent().is(":hidden")))
				return false;

			var rulesParsing = field.attr(options.validateAttribute);
			var getRules = /validate\[(.*)\]/.exec(rulesParsing);

			if (!getRules)
				return false;
			var str = getRules[1];
			var rules = str.split(/\[|,|\]/);

			// true if we ran the ajax validation, tells the logic to stop messing with prompts
			var isAjaxValidator = false;
			var fieldName = field.attr("name");
			var promptText = "";
			var promptType = "";
			var required = false;
			var limitErrors = false;
			options.isError = false;
			options.showArrow = options.showArrow ==true;

			// If the programmer wants to limit the amount of error messages per field,
			if (options.maxErrorsPerField > 0) {
				limitErrors = true;
			}

			var form = $(field.closest("form, .validationEngineContainer"));
			// Fix for adding spaces in the rules
			for (var i = 0; i < rules.length; i++) {
				rules[i] = rules[i].toString().replace(" ", "");//.toString to worked on IE8
				// Remove any parsing errors
				if (rules[i] === '') {
					delete rules[i];
				}
			}

			for (var i = 0, field_errors = 0; i < rules.length; i++) {

				// If we are limiting errors, and have hit the max, break
				if (limitErrors && field_errors >= options.maxErrorsPerField) {
					// If we haven't hit a required yet, check to see if there is one in the validation rules for this
					// field and that it's index is greater or equal to our current index
					if (!required) {
						var have_required = $.inArray('required', rules);
						required = (have_required != -1 &&  have_required >= i);
					}
					break;
				}


				var errorMsg = undefined;
				switch (rules[i]) {

					case "required":
						required = true;
						errorMsg = methods._getErrorMessage(form, field, rules[i], rules, i, options, methods._required);
						break;
					case "custom":
						errorMsg = methods._getErrorMessage(form, field, rules[i], rules, i, options, methods._custom);
						break;
					case "groupRequired":
						// Check is its the first of group, if not, reload validation with first field
						// AND continue normal validation on present field
						var classGroup = "["+options.validateAttribute+"*=" +rules[i + 1] +"]";
						var firstOfGroup = form.find(classGroup).eq(0);
						if(firstOfGroup[0] != field[0]){

							methods._validateField(firstOfGroup, options, skipAjaxValidation);
							options.showArrow = true;

						}
						errorMsg = methods._getErrorMessage(form, field, rules[i], rules, i, options, methods._groupRequired);
						if(errorMsg)  required = true;
						options.showArrow = false;
						break;
					case "ajax":
						// AJAX defaults to returning it's loading message
						errorMsg = methods._ajax(field, rules, i, options);
						if (errorMsg) {
							promptType = "load";
						}
						break;
					case "minSize":
						errorMsg = methods._getErrorMessage(form, field, rules[i], rules, i, options, methods._minSize);
						break;
					case "maxSize":
						errorMsg = methods._getErrorMessage(form, field, rules[i], rules, i, options, methods._maxSize);
						break;
					case "min":
						errorMsg = methods._getErrorMessage(form, field, rules[i], rules, i, options, methods._min);
						break;
					case "max":
						errorMsg = methods._getErrorMessage(form, field, rules[i], rules, i, options, methods._max);
						break;
					case "past":
						errorMsg = methods._getErrorMessage(form, field,rules[i], rules, i, options, methods._past);
						break;
					case "future":
						errorMsg = methods._getErrorMessage(form, field,rules[i], rules, i, options, methods._future);
						break;
					case "dateRange":
						var classGroup = "["+options.validateAttribute+"*=" + rules[i + 1] + "]";
						options.firstOfGroup = form.find(classGroup).eq(0);
						options.secondOfGroup = form.find(classGroup).eq(1);

						//if one entry out of the pair has value then proceed to run through validation
						if (options.firstOfGroup[0].value || options.secondOfGroup[0].value) {
							errorMsg = methods._getErrorMessage(form, field,rules[i], rules, i, options, methods._dateRange);
						}
						if (errorMsg) required = true;
						options.showArrow = false;
						break;

					case "dateTimeRange":
						var classGroup = "["+options.validateAttribute+"*=" + rules[i + 1] + "]";
						options.firstOfGroup = form.find(classGroup).eq(0);
						options.secondOfGroup = form.find(classGroup).eq(1);

						//if one entry out of the pair has value then proceed to run through validation
						if (options.firstOfGroup[0].value || options.secondOfGroup[0].value) {
							errorMsg = methods._getErrorMessage(form, field,rules[i], rules, i, options, methods._dateTimeRange);
						}
						if (errorMsg) required = true;
						options.showArrow = false;
						break;
					case "maxCheckbox":
						field = $(form.find("input[name='" + fieldName + "']"));
						errorMsg = methods._getErrorMessage(form, field, rules[i], rules, i, options, methods._maxCheckbox);
						break;
					case "minCheckbox":
						field = $(form.find("input[name='" + fieldName + "']"));
						errorMsg = methods._getErrorMessage(form, field, rules[i], rules, i, options, methods._minCheckbox);
						break;
					case "equals":
						errorMsg = methods._getErrorMessage(form, field, rules[i], rules, i, options, methods._equals);
						break;
					case "funcCall":
						errorMsg = methods._getErrorMessage(form, field, rules[i], rules, i, options, methods._funcCall);
						break;
					case "creditCard":
						errorMsg = methods._getErrorMessage(form, field, rules[i], rules, i, options, methods._creditCard);
						break;
					case "condRequired":
						errorMsg = methods._getErrorMessage(form, field, rules[i], rules, i, options, methods._condRequired);
						if (errorMsg !== undefined) {
							required = true;
						}
						break;
					case "funcCallRequired":
						errorMsg = methods._getErrorMessage(form, field, rules[i], rules, i, options, methods._funcCallRequired);
						if (errorMsg !== undefined) {
							required = true;
						}
						break;

					default:
				}

				var end_validation = false;

				// If we were passed back an message object, check what the status was to determine what to do
				if (typeof errorMsg == "object") {
					switch (errorMsg.status) {
						case "_break":
							end_validation = true;
							break;
						// If we have an error message, set errorMsg to the error message
						case "_error":
							errorMsg = errorMsg.message;
							break;
						// If we want to throw an error, but not show a prompt, return early with true
						case "_error_no_prompt":
							return true;
							break;
						// Anything else we continue on
						default:
							break;
					}
				}

				//funcCallRequired, first in rules, and has error, skip anything else
				if( i==0 && str.indexOf('funcCallRequired')==0 && errorMsg !== undefined ){
					if(promptText != '') {
						promptText += "<br/>";
					}
					promptText += errorMsg;
					options.isError=true;
					field_errors++;
					end_validation=true;
				}

				// If it has been specified that validation should end now, break
				if (end_validation) {
					break;
				}

				// If we have a string, that means that we have an error, so add it to the error message.
				if (typeof errorMsg == 'string') {
					if(promptText != '') {
						promptText += "<br/>";
					}
					promptText += errorMsg;
					options.isError = true;
					field_errors++;
				}
			}
			// If the rules required is not added, an empty field is not validated
			//the 3rd condition is added so that even empty password fields should be equal
			//otherwise if one is filled and another left empty, the "equal" condition would fail
			//which does not make any sense
			if(!required && !(field.val()) && field.val().length < 1 && $.inArray('equals', rules) < 0) options.isError = false;

			// Hack for radio/checkbox group button, the validation go into the
			// first radio/checkbox of the group
			var fieldType = field.prop("type");
			var positionType=field.data("promptPosition") || options.promptPosition;

			if ((fieldType == "radio" || fieldType == "checkbox") && form.find("input[name='" + fieldName + "']").length > 1) {
				if(positionType === 'inline') {
					field = $(form.find("input[name='" + fieldName + "'][type!=hidden]:last"));
				} else {
				field = $(form.find("input[name='" + fieldName + "'][type!=hidden]:first"));
				}
				options.showArrow = options.showArrowOnRadioAndCheckbox;
			}

			if(field.is(":hidden") && options.prettySelect) {
				field = form.find("#" + options.usePrefix + methods._jqSelector(field.attr('id')) + options.useSuffix);
			}

			if (options.isError && options.showPrompts){
				methods._showPrompt(field, promptText, promptType, false, options);
			}else{
				if (!isAjaxValidator) methods._closePrompt(field);
			}

			if (!isAjaxValidator) {
				field.trigger("jqv.field.result", [field, options.isError, promptText]);
			}

			/* Record error */
			var errindex = $.inArray(field[0], options.InvalidFields);
			if (errindex == -1) {
				if (options.isError)
				options.InvalidFields.push(field[0]);
			} else if (!options.isError) {
				options.InvalidFields.splice(errindex, 1);
			}

			methods._handleStatusCssClasses(field, options);

			/* run callback function for each field */
			if (options.isError && options.onFieldFailure)
				options.onFieldFailure(field);

			if (!options.isError && options.onFieldSuccess)
				options.onFieldSuccess(field);

			return options.isError;
		},
		/**
		* Handling css classes of fields indicating result of validation
		*
		* @param {jqObject}
		*            field
		* @param {Array[String]}
		*            field's validation rules
		* @private
		*/
		_handleStatusCssClasses: function(field, options) {
			/* remove all classes */
			if(options.addSuccessCssClassToField)
				field.removeClass(options.addSuccessCssClassToField);

			if(options.addFailureCssClassToField)
				field.removeClass(options.addFailureCssClassToField);

			/* Add classes */
			if (options.addSuccessCssClassToField && !options.isError)
				field.addClass(options.addSuccessCssClassToField);

			if (options.addFailureCssClassToField && options.isError)
				field.addClass(options.addFailureCssClassToField);
		},

		 /********************
		  * _getErrorMessage
		  *
		  * @param form
		  * @param field
		  * @param rule
		  * @param rules
		  * @param i
		  * @param options
		  * @param originalValidationMethod
		  * @return {*}
		  * @private
		  */
		 _getErrorMessage:function (form, field, rule, rules, i, options, originalValidationMethod) {
			 // If we are using the custon validation type, build the index for the rule.
			 // Otherwise if we are doing a function call, make the call and return the object
			 // that is passed back.
	 		 var rule_index = jQuery.inArray(rule, rules);
			 if (rule === "custom" || rule === "funcCall" || rule === "funcCallRequired") {
				 var custom_validation_type = rules[rule_index + 1];
				 rule = rule + "[" + custom_validation_type + "]";
				 // Delete the rule from the rules array so that it doesn't try to call the
			    // same rule over again
			    delete(rules[rule_index]);
			 }
			 // Change the rule to the composite rule, if it was different from the original
			 var alteredRule = rule;


			 var element_classes = (field.attr("data-validation-engine")) ? field.attr("data-validation-engine") : field.attr("class");
			 var element_classes_array = element_classes.split(" ");

			 // Call the original validation method. If we are dealing with dates or checkboxes, also pass the form
			 var errorMsg;
			 if (rule == "future" || rule == "past"  || rule == "maxCheckbox" || rule == "minCheckbox") {
				 errorMsg = originalValidationMethod(form, field, rules, i, options);
			 } else {
				 errorMsg = originalValidationMethod(field, rules, i, options);
			 }

			 // If the original validation method returned an error and we have a custom error message,
			 // return the custom message instead. Otherwise return the original error message.
			 if (errorMsg != undefined) {
				 var custom_message = methods._getCustomErrorMessage($(field), element_classes_array, alteredRule, options);
				 if (custom_message) errorMsg = custom_message;
			 }
			 return errorMsg;

		 },
		 _getCustomErrorMessage:function (field, classes, rule, options) {
			var custom_message = false;
			var validityProp = /^custom\[.*\]$/.test(rule) ? methods._validityProp["custom"] : methods._validityProp[rule];
			 // If there is a validityProp for this rule, check to see if the field has an attribute for it
			if (validityProp != undefined) {
				custom_message = field.attr("data-errormessage-"+validityProp);
				// If there was an error message for it, return the message
				if (custom_message != undefined)
					return custom_message;
			}
			custom_message = field.attr("data-errormessage");
			 // If there is an inline custom error message, return it
			if (custom_message != undefined)
				return custom_message;
			var id = '#' + field.attr("id");
			// If we have custom messages for the element's id, get the message for the rule from the id.
			// Otherwise, if we have custom messages for the element's classes, use the first class message we find instead.
			if (typeof options.custom_error_messages[id] != "undefined" &&
				typeof options.custom_error_messages[id][rule] != "undefined" ) {
						  custom_message = options.custom_error_messages[id][rule]['message'];
			} else if (classes.length > 0) {
				for (var i = 0; i < classes.length && classes.length > 0; i++) {
					 var element_class = "." + classes[i];
					if (typeof options.custom_error_messages[element_class] != "undefined" &&
						typeof options.custom_error_messages[element_class][rule] != "undefined") {
							custom_message = options.custom_error_messages[element_class][rule]['message'];
							break;
					}
				}
			}
			if (!custom_message &&
				typeof options.custom_error_messages[rule] != "undefined" &&
				typeof options.custom_error_messages[rule]['message'] != "undefined"){
					 custom_message = options.custom_error_messages[rule]['message'];
			 }
			 return custom_message;
		 },
		 _validityProp: {
			 "required": "value-missing",
			 "custom": "custom-error",
			 "groupRequired": "value-missing",
			 "ajax": "custom-error",
			 "minSize": "range-underflow",
			 "maxSize": "range-overflow",
			 "min": "range-underflow",
			 "max": "range-overflow",
			 "past": "type-mismatch",
			 "future": "type-mismatch",
			 "dateRange": "type-mismatch",
			 "dateTimeRange": "type-mismatch",
			 "maxCheckbox": "range-overflow",
			 "minCheckbox": "range-underflow",
			 "equals": "pattern-mismatch",
			 "funcCall": "custom-error",
			 "funcCallRequired": "custom-error",
			 "creditCard": "pattern-mismatch",
			 "condRequired": "value-missing"
		 },
		/**
		* Required validation
		*
		* @param {jqObject} field
		* @param {Array[String]} rules
		* @param {int} i rules index
		* @param {Map}
		*            user options
		* @param {bool} condRequired flag when method is used for internal purpose in condRequired check
		* @return an error string if validation failed
		*/
		_required: function(field, rules, i, options, condRequired) {
			switch (field.prop("type")) {
				case "radio":
				case "checkbox":
					// new validation style to only check dependent field
					if (condRequired) {
						if (!field.prop('checked')) {
							return options.allrules[rules[i]].alertTextCheckboxMultiple;
						}
						break;
					}
					// old validation style
					var form = field.closest("form, .validationEngineContainer");
					var name = field.attr("name");
					if (form.find("input[name='" + name + "']:checked").length == 0) {
						if (form.find("input[name='" + name + "']:visible").length == 1)
							return options.allrules[rules[i]].alertTextCheckboxe;
						else
							return options.allrules[rules[i]].alertTextCheckboxMultiple;
					}
					break;
				case "text":
				case "password":
				case "textarea":
				case "file":
				case "select-one":
				case "select-multiple":
				default:
					var field_val      = $.trim( field.val()                               );
					var dv_placeholder = $.trim( field.attr("data-validation-placeholder") );
					var placeholder    = $.trim( field.attr("placeholder")                 );
					if (
						   ( !field_val                                    )
						|| ( dv_placeholder && field_val == dv_placeholder )
						|| ( placeholder    && field_val == placeholder    )
					) {
						return options.allrules[rules[i]].alertText;
					}
					break;
			}
		},
		/**
		* Validate that 1 from the group field is required
		*
		* @param {jqObject} field
		* @param {Array[String]} rules
		* @param {int} i rules index
		* @param {Map}
		*            user options
		* @return an error string if validation failed
		*/
		_groupRequired: function(field, rules, i, options) {
			var classGroup = "["+options.validateAttribute+"*=" +rules[i + 1] +"]";
			var isValid = false;
			// Check all fields from the group
			field.closest("form, .validationEngineContainer").find(classGroup).each(function(){
				if(!methods._required($(this), rules, i, options)){
					isValid = true;
					return false;
				}
			});

			if(!isValid) {
		  return options.allrules[rules[i]].alertText;
		}
		},
		/**
		* Validate rules
		*
		* @param {jqObject} field
		* @param {Array[String]} rules
		* @param {int} i rules index
		* @param {Map}
		*            user options
		* @return an error string if validation failed
		*/
		_custom: function(field, rules, i, options) {
			var customRule = rules[i + 1];
			var rule = options.allrules[customRule];
			var fn;
			if(!rule) {
				alert("jqv:custom rule not found - "+customRule);
				return;
			}

			if(rule["regex"]) {
				 var ex=rule.regex;
					if(!ex) {
						alert("jqv:custom regex not found - "+customRule);
						return;
					}
					var pattern = new RegExp(ex);

					if (!pattern.test(field.val())) return options.allrules[customRule].alertText;

			} else if(rule["func"]) {
				fn = rule["func"];

				if (typeof(fn) !== "function") {
					alert("jqv:custom parameter 'function' is no function - "+customRule);
						return;
				}

				if (!fn(field, rules, i, options))
					return options.allrules[customRule].alertText;
			} else {
				alert("jqv:custom type not allowed "+customRule);
					return;
			}
		},
		/**
		* Validate custom function outside of the engine scope
		*
		* @param {jqObject} field
		* @param {Array[String]} rules
		* @param {int} i rules index
		* @param {Map}
		*            user options
		* @return an error string if validation failed
		*/
		_funcCall: function(field, rules, i, options) {
			var functionName = rules[i + 1];
			var fn;
			if(functionName.indexOf('.') >-1)
			{
				var namespaces = functionName.split('.');
				var scope = window;
				while(namespaces.length)
				{
					scope = scope[namespaces.shift()];
				}
				fn = scope;
			}
			else
				fn = window[functionName] || options.customFunctions[functionName];
			if (typeof(fn) == 'function')
				return fn(field, rules, i, options);

		},
		_funcCallRequired: function(field, rules, i, options) {
			return methods._funcCall(field,rules,i,options);
		},
		/**
		* Field match
		*
		* @param {jqObject} field
		* @param {Array[String]} rules
		* @param {int} i rules index
		* @param {Map}
		*            user options
		* @return an error string if validation failed
		*/
		_equals: function(field, rules, i, options) {
			var equalsField = rules[i + 1];

			if (field.val() != $("#" + equalsField).val())
				return options.allrules.equals.alertText;
		},
		/**
		* Check the maximum size (in characters)
		*
		* @param {jqObject} field
		* @param {Array[String]} rules
		* @param {int} i rules index
		* @param {Map}
		*            user options
		* @return an error string if validation failed
		*/
		_maxSize: function(field, rules, i, options) {
			var max = rules[i + 1];
			var len = field.val().length;

			if (len > max) {
				var rule = options.allrules.maxSize;
				return rule.alertText + max + rule.alertText2;
			}
		},
		/**
		* Check the minimum size (in characters)
		*
		* @param {jqObject} field
		* @param {Array[String]} rules
		* @param {int} i rules index
		* @param {Map}
		*            user options
		* @return an error string if validation failed
		*/
		_minSize: function(field, rules, i, options) {
			var min = rules[i + 1];
			var len = field.val().length;

			if (len < min) {
				var rule = options.allrules.minSize;
				return rule.alertText + min + rule.alertText2;
			}
		},
		/**
		* Check number minimum value
		*
		* @param {jqObject} field
		* @param {Array[String]} rules
		* @param {int} i rules index
		* @param {Map}
		*            user options
		* @return an error string if validation failed
		*/
		_min: function(field, rules, i, options) {
			var min = parseFloat(rules[i + 1]);
			var len = parseFloat(field.val());

			if (len < min) {
				var rule = options.allrules.min;
				if (rule.alertText2) return rule.alertText + min + rule.alertText2;
				return rule.alertText + min;
			}
		},
		/**
		* Check number maximum value
		*
		* @param {jqObject} field
		* @param {Array[String]} rules
		* @param {int} i rules index
		* @param {Map}
		*            user options
		* @return an error string if validation failed
		*/
		_max: function(field, rules, i, options) {
			var max = parseFloat(rules[i + 1]);
			var len = parseFloat(field.val());

			if (len >max ) {
				var rule = options.allrules.max;
				if (rule.alertText2) return rule.alertText + max + rule.alertText2;
				//orefalo: to review, also do the translations
				return rule.alertText + max;
			}
		},
		/**
		* Checks date is in the past
		*
		* @param {jqObject} field
		* @param {Array[String]} rules
		* @param {int} i rules index
		* @param {Map}
		*            user options
		* @return an error string if validation failed
		*/
		_past: function(form, field, rules, i, options) {

			var p=rules[i + 1];
			var fieldAlt = $(form.find("*[name='" + p.replace(/^#+/, '') + "']"));
			var pdate;

			if (p.toLowerCase() == "now") {
				pdate = new Date();
			} else if (undefined != fieldAlt.val()) {
				if (fieldAlt.is(":disabled"))
					return;
				pdate = methods._parseDate(fieldAlt.val());
			} else {
				pdate = methods._parseDate(p);
			}
			var vdate = methods._parseDate(field.val());

			if (vdate > pdate ) {
				var rule = options.allrules.past;
				if (rule.alertText2) return rule.alertText + methods._dateToString(pdate) + rule.alertText2;
				return rule.alertText + methods._dateToString(pdate);
			}
		},
		/**
		* Checks date is in the future
		*
		* @param {jqObject} field
		* @param {Array[String]} rules
		* @param {int} i rules index
		* @param {Map}
		*            user options
		* @return an error string if validation failed
		*/
		_future: function(form, field, rules, i, options) {

			var p=rules[i + 1];
			var fieldAlt = $(form.find("*[name='" + p.replace(/^#+/, '') + "']"));
			var pdate;

			if (p.toLowerCase() == "now") {
				pdate = new Date();
			} else if (undefined != fieldAlt.val()) {
				if (fieldAlt.is(":disabled"))
					return;
				pdate = methods._parseDate(fieldAlt.val());
			} else {
				pdate = methods._parseDate(p);
			}
			var vdate = methods._parseDate(field.val());

			if (vdate < pdate ) {
				var rule = options.allrules.future;
				if (rule.alertText2)
					return rule.alertText + methods._dateToString(pdate) + rule.alertText2;
				return rule.alertText + methods._dateToString(pdate);
			}
		},
		/**
		* Checks if valid date
		*
		* @param {string} date string
		* @return a bool based on determination of valid date
		*/
		_isDate: function (value) {
			var dateRegEx = new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/);
			return dateRegEx.test(value);
		},
		/**
		* Checks if valid date time
		*
		* @param {string} date string
		* @return a bool based on determination of valid date time
		*/
		_isDateTime: function (value){
			var dateTimeRegEx = new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/);
			return dateTimeRegEx.test(value);
		},
		//Checks if the start date is before the end date
		//returns true if end is later than start
		_dateCompare: function (start, end) {
			return (new Date(start.toString()) < new Date(end.toString()));
		},
		/**
		* Checks date range
		*
		* @param {jqObject} first field name
		* @param {jqObject} second field name
		* @return an error string if validation failed
		*/
		_dateRange: function (field, rules, i, options) {
			//are not both populated
			if ((!options.firstOfGroup[0].value && options.secondOfGroup[0].value) || (options.firstOfGroup[0].value && !options.secondOfGroup[0].value)) {
				return options.allrules[rules[i]].alertText + options.allrules[rules[i]].alertText2;
			}

			//are not both dates
			if (!methods._isDate(options.firstOfGroup[0].value) || !methods._isDate(options.secondOfGroup[0].value)) {
				return options.allrules[rules[i]].alertText + options.allrules[rules[i]].alertText2;
			}

			//are both dates but range is off
			if (!methods._dateCompare(options.firstOfGroup[0].value, options.secondOfGroup[0].value)) {
				return options.allrules[rules[i]].alertText + options.allrules[rules[i]].alertText2;
			}
		},
		/**
		* Checks date time range
		*
		* @param {jqObject} first field name
		* @param {jqObject} second field name
		* @return an error string if validation failed
		*/
		_dateTimeRange: function (field, rules, i, options) {
			//are not both populated
			if ((!options.firstOfGroup[0].value && options.secondOfGroup[0].value) || (options.firstOfGroup[0].value && !options.secondOfGroup[0].value)) {
				return options.allrules[rules[i]].alertText + options.allrules[rules[i]].alertText2;
			}
			//are not both dates
			if (!methods._isDateTime(options.firstOfGroup[0].value) || !methods._isDateTime(options.secondOfGroup[0].value)) {
				return options.allrules[rules[i]].alertText + options.allrules[rules[i]].alertText2;
			}
			//are both dates but range is off
			if (!methods._dateCompare(options.firstOfGroup[0].value, options.secondOfGroup[0].value)) {
				return options.allrules[rules[i]].alertText + options.allrules[rules[i]].alertText2;
			}
		},
		/**
		* Max number of checkbox selected
		*
		* @param {jqObject} field
		* @param {Array[String]} rules
		* @param {int} i rules index
		* @param {Map}
		*            user options
		* @return an error string if validation failed
		*/
		_maxCheckbox: function(form, field, rules, i, options) {

			var nbCheck = rules[i + 1];
			var groupname = field.attr("name");
			var groupSize = form.find("input[name='" + groupname + "']:checked").length;
			if (groupSize > nbCheck) {
				options.showArrow = false;
				if (options.allrules.maxCheckbox.alertText2)
					 return options.allrules.maxCheckbox.alertText + " " + nbCheck + " " + options.allrules.maxCheckbox.alertText2;
				return options.allrules.maxCheckbox.alertText;
			}
		},
		/**
		* Min number of checkbox selected
		*
		* @param {jqObject} field
		* @param {Array[String]} rules
		* @param {int} i rules index
		* @param {Map}
		*            user options
		* @return an error string if validation failed
		*/
		_minCheckbox: function(form, field, rules, i, options) {

			var nbCheck = rules[i + 1];
			var groupname = field.attr("name");
			var groupSize = form.find("input[name='" + groupname + "']:checked").length;
			if (groupSize < nbCheck) {
				options.showArrow = false;
				return options.allrules.minCheckbox.alertText + " " + nbCheck + " " + options.allrules.minCheckbox.alertText2;
			}
		},
		/**
		* Checks that it is a valid credit card number according to the
		* Luhn checksum algorithm.
		*
		* @param {jqObject} field
		* @param {Array[String]} rules
		* @param {int} i rules index
		* @param {Map}
		*            user options
		* @return an error string if validation failed
		*/
		_creditCard: function(field, rules, i, options) {
			//spaces and dashes may be valid characters, but must be stripped to calculate the checksum.
			var valid = false, cardNumber = field.val().replace(/ +/g, '').replace(/-+/g, '');

			var numDigits = cardNumber.length;
			if (numDigits >= 14 && numDigits <= 16 && parseInt(cardNumber) > 0) {

				var sum = 0, i = numDigits - 1, pos = 1, digit, luhn = new String();
				do {
					digit = parseInt(cardNumber.charAt(i));
					luhn += (pos++ % 2 == 0) ? digit * 2 : digit;
				} while (--i >= 0)

				for (i = 0; i < luhn.length; i++) {
					sum += parseInt(luhn.charAt(i));
				}
				valid = sum % 10 == 0;
			}
			if (!valid) return options.allrules.creditCard.alertText;
		},
		/**
		* Ajax field validation
		*
		* @param {jqObject} field
		* @param {Array[String]} rules
		* @param {int} i rules index
		* @param {Map}
		*            user options
		* @return nothing! the ajax validator handles the prompts itself
		*/
		 _ajax: function(field, rules, i, options) {

			 var errorSelector = rules[i + 1];
			 var rule = options.allrules[errorSelector];
			 var extraData = rule.extraData;
			 var extraDataDynamic = rule.extraDataDynamic;
			 var data = {
				"fieldId" : field.attr("id"),
				"fieldValue" : field.val()
			 };

			 if (typeof extraData === "object") {
				$.extend(data, extraData);
			 } else if (typeof extraData === "string") {
				var tempData = extraData.split("&");
				for(var i = 0; i < tempData.length; i++) {
					var values = tempData[i].split("=");
					if (values[0] && values[0]) {
						data[values[0]] = values[1];
					}
				}
			 }

			 if (extraDataDynamic) {
				 var tmpData = [];
				 var domIds = String(extraDataDynamic).split(",");
				 for (var i = 0; i < domIds.length; i++) {
					 var id = domIds[i];
					 if ($(id).length) {
						 var inputValue = field.closest("form, .validationEngineContainer").find(id).val();
						 var keyValue = id.replace('#', '') + '=' + escape(inputValue);
						 data[id.replace('#', '')] = inputValue;
					 }
				 }
			 }

			 // If a field change event triggered this we want to clear the cache for this ID
			 if (options.eventTrigger == "field") {
				delete(options.ajaxValidCache[field.attr("id")]);
			 }

			 // If there is an error or if the the field is already validated, do not re-execute AJAX
			 if (!options.isError && !methods._checkAjaxFieldStatus(field.attr("id"), options)) {
				 $.ajax({
					 type: options.ajaxFormValidationMethod,
					 url: rule.url,
					 cache: false,
					 dataType: "json",
					 data: data,
					 field: field,
					 rule: rule,
					 methods: methods,
					 options: options,
					 beforeSend: function() {},
					 error: function(data, transport) {
						if (options.onFailure) {
							options.onFailure(data, transport);
						} else {
							methods._ajaxError(data, transport);
						}
					 },
					 success: function(json) {

						 // asynchronously called on success, data is the json answer from the server
						 var errorFieldId = json[0];
						 //var errorField = $($("#" + errorFieldId)[0]);
						 var errorField = $("#"+ errorFieldId).eq(0);

						 // make sure we found the element
						 if (errorField.length == 1) {
							 var status = json[1];
							 // read the optional msg from the server
							 var msg = json[2];
							 if (!status) {
								 // Houston we got a problem - display an red prompt
								 options.ajaxValidCache[errorFieldId] = false;
								 options.isError = true;

								 // resolve the msg prompt
								 if(msg) {
									 if (options.allrules[msg]) {
										 var txt = options.allrules[msg].alertText;
										 if (txt) {
											msg = txt;
							}
									 }
								 }
								 else
									msg = rule.alertText;

								 if (options.showPrompts) methods._showPrompt(errorField, msg, "", true, options);
							 } else {
								 options.ajaxValidCache[errorFieldId] = true;

								 // resolves the msg prompt
								 if(msg) {
									 if (options.allrules[msg]) {
										 var txt = options.allrules[msg].alertTextOk;
										 if (txt) {
											msg = txt;
							}
									 }
								 }
								 else
								 msg = rule.alertTextOk;

								 if (options.showPrompts) {
									 // see if we should display a green prompt
									 if (msg)
										methods._showPrompt(errorField, msg, "pass", true, options);
									 else
										methods._closePrompt(errorField);
								}

								 // If a submit form triggered this, we want to re-submit the form
								 if (options.eventTrigger == "submit")
									field.closest("form").submit();
							 }
						 }
						 errorField.trigger("jqv.field.result", [errorField, options.isError, msg]);
					 }
				 });

				 return rule.alertTextLoad;
			 }
		 },
		/**
		* Common method to handle ajax errors
		*
		* @param {Object} data
		* @param {Object} transport
		*/
		_ajaxError: function(data, transport) {
			if(data.status == 0 && transport == null)
				alert("The page is not served from a server! ajax call failed");
			else if(typeof console != "undefined")
				console.log("Ajax error: " + data.status + " " + transport);
		},
		/**
		* date -> string
		*
		* @param {Object} date
		*/
		_dateToString: function(date) {
			return date.getFullYear()+"-"+(date.getMonth()+1)+"-"+date.getDate();
		},
		/**
		* Parses an ISO date
		* @param {String} d
		*/
		_parseDate: function(d) {

			var dateParts = d.split("-");
			if(dateParts==d)
				dateParts = d.split("/");
			if(dateParts==d) {
				dateParts = d.split(".");
				return new Date(dateParts[2], (dateParts[1] - 1), dateParts[0]);
			}
			return new Date(dateParts[0], (dateParts[1] - 1) ,dateParts[2]);
		},
		/**
		* Builds or updates a prompt with the given information
		*
		* @param {jqObject} field
		* @param {String} promptText html text to display type
		* @param {String} type the type of bubble: 'pass' (green), 'load' (black) anything else (red)
		* @param {boolean} ajaxed - use to mark fields than being validated with ajax
		* @param {Map} options user options
		*/
		 _showPrompt: function(field, promptText, type, ajaxed, options, ajaxform) {
		 	//Check if we need to adjust what element to show the prompt on
			if(field.data('jqv-prompt-at') instanceof jQuery ){
				field = field.data('jqv-prompt-at');
			} else if(field.data('jqv-prompt-at')) {
				field = $(field.data('jqv-prompt-at'));
			}

			 var prompt = methods._getPrompt(field);
			 // The ajax submit errors are not see has an error in the form,
			 // When the form errors are returned, the engine see 2 bubbles, but those are ebing closed by the engine at the same time
			 // Because no error was found befor submitting
			 if(ajaxform) prompt = false;
			 // Check that there is indded text
			 if($.trim(promptText)){
				 if (prompt)
					methods._updatePrompt(field, prompt, promptText, type, ajaxed, options);
				 else
					methods._buildPrompt(field, promptText, type, ajaxed, options);
			}
		 },
		/**
		* Builds and shades a prompt for the given field.
		*
		* @param {jqObject} field
		* @param {String} promptText html text to display type
		* @param {String} type the type of bubble: 'pass' (green), 'load' (black) anything else (red)
		* @param {boolean} ajaxed - use to mark fields than being validated with ajax
		* @param {Map} options user options
		*/
		_buildPrompt: function(field, promptText, type, ajaxed, options) {

			// create the prompt
			var prompt = $('<div>');
			prompt.addClass(methods._getClassName(field.attr("id")) + "formError");
			// add a class name to identify the parent form of the prompt
			prompt.addClass("parentForm"+methods._getClassName(field.closest('form, .validationEngineContainer').attr("id")));
			prompt.addClass("formError");

			switch (type) {
				case "pass":
					prompt.addClass("greenPopup");
					break;
				case "load":
					prompt.addClass("blackPopup");
					break;
				default:
					/* it has error  */
					//alert("unknown popup type:"+type);
			}
			if (ajaxed)
				prompt.addClass("ajaxed");

			// create the prompt content
			var promptContent = $('<div>').addClass("formErrorContent").html(promptText).appendTo(prompt);

			// determine position type
			var positionType=field.data("promptPosition") || options.promptPosition;

			// create the css arrow pointing at the field
			// note that there is no triangle on max-checkbox and radio
			if (options.showArrow) {
				var arrow = $('<div>').addClass("formErrorArrow");

				//prompt positioning adjustment support. Usage: positionType:Xshift,Yshift (for ex.: bottomLeft:+20 or bottomLeft:-20,+10)
				if (typeof(positionType)=='string')
				{
					var pos=positionType.indexOf(":");
					if(pos!=-1)
						positionType=positionType.substring(0,pos);
				}

				switch (positionType) {
					case "bottomLeft":
					case "bottomRight":
						prompt.find(".formErrorContent").before(arrow);
						arrow.addClass("formErrorArrowBottom").html('<div class="line1"><!-- --></div><div class="line2"><!-- --></div><div class="line3"><!-- --></div><div class="line4"><!-- --></div><div class="line5"><!-- --></div><div class="line6"><!-- --></div><div class="line7"><!-- --></div><div class="line8"><!-- --></div><div class="line9"><!-- --></div><div class="line10"><!-- --></div>');
						break;
					case "topLeft":
					case "topRight":
						arrow.html('<div class="line10"><!-- --></div><div class="line9"><!-- --></div><div class="line8"><!-- --></div><div class="line7"><!-- --></div><div class="line6"><!-- --></div><div class="line5"><!-- --></div><div class="line4"><!-- --></div><div class="line3"><!-- --></div><div class="line2"><!-- --></div><div class="line1"><!-- --></div>');
						prompt.append(arrow);
						break;
				}
			}
			// Add custom prompt class
			if (options.addPromptClass)
				prompt.addClass(options.addPromptClass);

            // Add custom prompt class defined in element
            var requiredOverride = field.attr('data-required-class');
            if(requiredOverride !== undefined) {
                prompt.addClass(requiredOverride);
            } else {
                if(options.prettySelect) {
                    if($('#' + field.attr('id')).next().is('select')) {
                        var prettyOverrideClass = $('#' + field.attr('id').substr(options.usePrefix.length).substring(options.useSuffix.length)).attr('data-required-class');
                        if(prettyOverrideClass !== undefined) {
                            prompt.addClass(prettyOverrideClass);
                        }
                    }
                }
            }

			prompt.css({
				"opacity": 0
			});
			if(positionType === 'inline') {
				prompt.addClass("inline");
				if(typeof field.attr('data-prompt-target') !== 'undefined' && $('#'+field.attr('data-prompt-target')).length > 0) {
					prompt.appendTo($('#'+field.attr('data-prompt-target')));
				} else {
					field.after(prompt);
				}
			} else {
				field.before(prompt);
			}

			var pos = methods._calculatePosition(field, prompt, options);
			// Support RTL layouts by @yasser_lotfy ( Yasser Lotfy )
			if ($('body').hasClass('rtl')) {
				prompt.css({
					'position': positionType === 'inline' ? 'relative' : 'absolute',
					"top": pos.callerTopPosition,
					"left": "initial",
					"right": pos.callerleftPosition,
					"marginTop": pos.marginTopSize,
					"opacity": 0
				}).data("callerField", field);
		    	} else {
				prompt.css({
					'position': positionType === 'inline' ? 'relative' : 'absolute',
					"top": pos.callerTopPosition,
					"left": pos.callerleftPosition,
					"right": "initial",
					"marginTop": pos.marginTopSize,
					"opacity": 0
				}).data("callerField", field);
		    	}


			if (options.autoHidePrompt) {
				setTimeout(function(){
					prompt.animate({
						"opacity": 0
					},function(){
						prompt.closest('.formError').remove();
					});
				}, options.autoHideDelay);
			}
			return prompt.animate({
				"opacity": 0.87
			});
		},
		/**
		* Updates the prompt text field - the field for which the prompt
		* @param {jqObject} field
		* @param {String} promptText html text to display type
		* @param {String} type the type of bubble: 'pass' (green), 'load' (black) anything else (red)
		* @param {boolean} ajaxed - use to mark fields than being validated with ajax
		* @param {Map} options user options
		*/
		_updatePrompt: function(field, prompt, promptText, type, ajaxed, options, noAnimation) {

			if (prompt) {
				if (typeof type !== "undefined") {
					if (type == "pass")
						prompt.addClass("greenPopup");
					else
						prompt.removeClass("greenPopup");

					if (type == "load")
						prompt.addClass("blackPopup");
					else
						prompt.removeClass("blackPopup");
				}
				if (ajaxed)
					prompt.addClass("ajaxed");
				else
					prompt.removeClass("ajaxed");

				prompt.find(".formErrorContent").html(promptText);

				var pos = methods._calculatePosition(field, prompt, options);
				// Support RTL layouts by @yasser_lotfy ( Yasser Lotfy )
				if ($('body').hasClass('rtl')) {
					var css = {"top": pos.callerTopPosition,
					"left": "initial",
					"right": pos.callerleftPosition,
					"marginTop": pos.marginTopSize,
					"opacity": 0.87};
				} else {
					var css = {"top": pos.callerTopPosition,
					"left": pos.callerleftPosition,
					"right": "initial",
					"marginTop": pos.marginTopSize,
					"opacity": 0.87};
				}

                prompt.css({
                    "opacity": 0,
                    "display": "block"
                });

				if (noAnimation)
					prompt.css(css);
				else
					prompt.animate(css);
			}
		},
		/**
		* Closes the prompt associated with the given field
		*
		* @param {jqObject}
		*            field
		*/
		 _closePrompt: function(field) {
			 var prompt = methods._getPrompt(field);
			 if (prompt)
				 prompt.fadeTo("fast", 0, function() {
					 prompt.closest('.formError').remove();
				 });
		 },
		 closePrompt: function(field) {
			 return methods._closePrompt(field);
		 },
		/**
		* Returns the error prompt matching the field if any
		*
		* @param {jqObject}
		*            field
		* @return undefined or the error prompt (jqObject)
		*/
		_getPrompt: function(field) {
				var formId = $(field).closest('form, .validationEngineContainer').attr('id');
			var className = methods._getClassName(field.attr("id")) + "formError";
				var match = $("." + methods._escapeExpression(className) + '.parentForm' + methods._getClassName(formId))[0];
			if (match)
			return $(match);
		},
		/**
		  * Returns the escapade classname
		  *
		  * @param {selector}
		  *            className
		  */
		  _escapeExpression: function (selector) {
			  return selector.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g, "\\$1");
		  },
		/**
		 * returns true if we are in a RTLed document
		 *
		 * @param {jqObject} field
		 */
		isRTL: function(field)
		{
			var $document = $(document);
			var $body = $('body');
			var rtl =
				(field && field.hasClass('rtl')) ||
				(field && (field.attr('dir') || '').toLowerCase()==='rtl') ||
				$document.hasClass('rtl') ||
				($document.attr('dir') || '').toLowerCase()==='rtl' ||
				$body.hasClass('rtl') ||
				($body.attr('dir') || '').toLowerCase()==='rtl';
			return Boolean(rtl);
		},
		/**
		* Calculates prompt position
		*
		* @param {jqObject}
		*            field
		* @param {jqObject}
		*            the prompt
		* @param {Map}
		*            options
		* @return positions
		*/
		_calculatePosition: function (field, promptElmt, options) {

			var promptTopPosition, promptleftPosition, marginTopSize;
			var fieldWidth 	= field.width();
			var fieldLeft 	= field.position().left;
			var fieldTop 	=  field.position().top;
			var fieldHeight 	=  field.height();
			var promptHeight = promptElmt.height();


			// is the form contained in an overflown container?
			promptTopPosition = promptleftPosition = 0;
			// compensation for the arrow
			marginTopSize = -promptHeight;


			//prompt positioning adjustment support
			//now you can adjust prompt position
			//usage: positionType:Xshift,Yshift
			//for example:
			//   bottomLeft:+20 means bottomLeft position shifted by 20 pixels right horizontally
			//   topRight:20, -15 means topRight position shifted by 20 pixels to right and 15 pixels to top
			//You can use +pixels, - pixels. If no sign is provided than + is default.
			var positionType=field.data("promptPosition") || options.promptPosition;
			var shift1="";
			var shift2="";
			var shiftX=0;
			var shiftY=0;
			if (typeof(positionType)=='string') {
				//do we have any position adjustments ?
				if (positionType.indexOf(":")!=-1) {
					shift1=positionType.substring(positionType.indexOf(":")+1);
					positionType=positionType.substring(0,positionType.indexOf(":"));

					//if any advanced positioning will be needed (percents or something else) - parser should be added here
					//for now we use simple parseInt()

					//do we have second parameter?
					if (shift1.indexOf(",") !=-1) {
						shift2=shift1.substring(shift1.indexOf(",") +1);
						shift1=shift1.substring(0,shift1.indexOf(","));
						shiftY=parseInt(shift2);
						if (isNaN(shiftY)) shiftY=0;
					};

					shiftX=parseInt(shift1);
					if (isNaN(shift1)) shift1=0;

				};
			};


			switch (positionType) {
				default:
				case "topRight":
					promptleftPosition +=  fieldLeft + fieldWidth - 27;
					promptTopPosition +=  fieldTop;
					break;

				case "topLeft":
					promptTopPosition +=  fieldTop;
					promptleftPosition += fieldLeft;
					break;

				case "centerRight":
					promptTopPosition = fieldTop+4;
					marginTopSize = 0;
					promptleftPosition= fieldLeft + field.outerWidth(true)+5;
					break;
				case "centerLeft":
					promptleftPosition = fieldLeft - (promptElmt.width() + 2);
					promptTopPosition = fieldTop+4;
					marginTopSize = 0;

					break;

				case "bottomLeft":
					promptTopPosition = fieldTop + field.height() + 5;
					marginTopSize = 0;
					promptleftPosition = fieldLeft;
					break;
				case "bottomRight":
					promptleftPosition = fieldLeft + fieldWidth - 27;
					promptTopPosition =  fieldTop +  field.height() + 5;
					marginTopSize = 0;
					break;
				case "inline":
					promptleftPosition = 0;
					promptTopPosition = 0;
					marginTopSize = 0;
			};



			//apply adjusments if any
			promptleftPosition += shiftX;
			promptTopPosition  += shiftY;

			return {
				"callerTopPosition": promptTopPosition + "px",
				"callerleftPosition": promptleftPosition + "px",
				"marginTopSize": marginTopSize + "px"
			};
		},
		/**
		* Saves the user options and variables in the form.data
		*
		* @param {jqObject}
		*            form - the form where the user option should be saved
		* @param {Map}
		*            options - the user options
		* @return the user options (extended from the defaults)
		*/
		 _saveOptions: function(form, options) {

			 // is there a language localisation ?
			 if ($.validationEngineLanguage)
			 var allRules = $.validationEngineLanguage.allRules;
			 else
			 $.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page");
			 // --- Internals DO NOT TOUCH or OVERLOAD ---
			 // validation rules and i18
			 $.validationEngine.defaults.allrules = allRules;

			 var userOptions = $.extend(true,{},$.validationEngine.defaults,options);

			 form.data('jqv', userOptions);
			 return userOptions;
		 },

		 /**
		 * Removes forbidden characters from class name
		 * @param {String} className
		 */
		 _getClassName: function(className) {
			 if(className)
				 return className.replace(/:/g, "_").replace(/\./g, "_");
					  },
		/**
		 * Escape special character for jQuery selector
		 * http://totaldev.com/content/escaping-characters-get-valid-jquery-id
		 * @param {String} selector
		 */
		 _jqSelector: function(str){
			return str.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g, '\\$1');
		},
		/**
		* Conditionally required field
		*
		* @param {jqObject} field
		* @param {Array[String]} rules
		* @param {int} i rules index
		* @param {Map}
		* user options
		* @return an error string if validation failed
		*/
		_condRequired: function(field, rules, i, options) {
			var idx, dependingField;

			for(idx = (i + 1); idx < rules.length; idx++) {
				dependingField = jQuery("#" + rules[idx]).first();

				/* Use _required for determining wether dependingField has a value.
				 * There is logic there for handling all field types, and default value; so we won't replicate that here
				 * Indicate this special use by setting the last parameter to true so we only validate the dependingField on chackboxes and radio buttons (#462)
				 */
				if (dependingField.length && methods._required(dependingField, ["required"], 0, options, true) == undefined) {
					/* We now know any of the depending fields has a value,
					 * so we can validate this field as per normal required code
					 */
					return methods._required(field, ["required"], 0, options);
				}
			}
		},

	    _submitButtonClick: function(event) {
	        var button = $(this);
	        var form = button.closest('form, .validationEngineContainer');
	        form.data("jqv_submitButton", button.attr("id"));
	    }
		  };

	 /**
	 * Plugin entry point.
	 * You may pass an action as a parameter or a list of options.
	 * if none, the init and attach methods are being called.
	 * Remember: if you pass options, the attached method is NOT called automatically
	 *
	 * @param {String}
	 *            method (optional) action
	 */
	 $.fn.validationEngine = function(method) {

		 var form = $(this);
		 if(!form[0]) return form;  // stop here if the form does not exist

		 if (typeof(method) == 'string' && method.charAt(0) != '_' && methods[method]) {

			 // make sure init is called once
			 if(method != "showPrompt" && method != "hide" && method != "hideAll")
			 methods.init.apply(form);

			 return methods[method].apply(form, Array.prototype.slice.call(arguments, 1));
		 } else if (typeof method == 'object' || !method) {

			 // default constructor with or without arguments
			 methods.init.apply(form, arguments);
			 return methods.attach.apply(form);
		 } else {
			 $.error('Method ' + method + ' does not exist in jQuery.validationEngine');
		 }
	};



	// LEAK GLOBAL OPTIONS
	$.validationEngine= {fieldIdCounter: 0,defaults:{

		// Name of the event triggering field validation
		validationEventTrigger: "blur",
		// Automatically scroll viewport to the first error
		scroll: true,
		// Focus on the first input
		focusFirstField:true,
		// Show prompts, set to false to disable prompts
		showPrompts: true,
		// Should we attempt to validate non-visible input fields contained in the form? (Useful in cases of tabbed containers, e.g. jQuery-UI tabs)
		validateNonVisibleFields: false,
		// ignore the validation for fields with this specific class (Useful in cases of tabbed containers AND hidden fields we don't want to validate)
		ignoreFieldsWithClass: 'ignoreMe',
		// Opening box position, possible locations are: topLeft,
		// topRight, bottomLeft, centerRight, bottomRight, inline
		// inline gets inserted after the validated field or into an element specified in data-prompt-target
		promptPosition: "topRight",
		bindMethod:"bind",
		// internal, automatically set to true when it parse a _ajax rule
		inlineAjax: false,
		// if set to true, the form data is sent asynchronously via ajax to the form.action url (get)
		ajaxFormValidation: false,
		// The url to send the submit ajax validation (default to action)
		ajaxFormValidationURL: false,
		// HTTP method used for ajax validation
		ajaxFormValidationMethod: 'get',
		// Ajax form validation callback method: boolean onComplete(form, status, errors, options)
		// retuns false if the form.submit event needs to be canceled.
		onAjaxFormComplete: $.noop,
		// called right before the ajax call, may return false to cancel
		onBeforeAjaxFormValidation: $.noop,
		// Stops form from submitting and execute function assiciated with it
		onValidationComplete: false,

		// Used when you have a form fields too close and the errors messages are on top of other disturbing viewing messages
		doNotShowAllErrosOnSubmit: false,
		// Object where you store custom messages to override the default error messages
		custom_error_messages:{},
		// true if you want to validate the input fields on blur event
		binded: true,
		// set to true if you want to validate the input fields on blur only if the field it's not empty
		notEmpty: false,
		// set to true, when the prompt arrow needs to be displayed
		showArrow: true,
		// set to false, determines if the prompt arrow should be displayed when validating
		// checkboxes and radio buttons
		showArrowOnRadioAndCheckbox: false,
		// did one of the validation fail ? kept global to stop further ajax validations
		isError: false,
		// Limit how many displayed errors a field can have
		maxErrorsPerField: false,

		// Caches field validation status, typically only bad status are created.
		// the array is used during ajax form validation to detect issues early and prevent an expensive submit
		ajaxValidCache: {},
		// Auto update prompt position after window resize
		autoPositionUpdate: false,

		InvalidFields: [],
		onFieldSuccess: false,
		onFieldFailure: false,
		onSuccess: false,
		onFailure: false,
		validateAttribute: "class",
		addSuccessCssClassToField: "",
		addFailureCssClassToField: "",

		// Auto-hide prompt
		autoHidePrompt: false,
		// Delay before auto-hide
		autoHideDelay: 10000,
		// Fade out duration while hiding the validations
		fadeDuration: 300,
	 // Use Prettify select library
	 prettySelect: false,
	 // Add css class on prompt
	 addPromptClass : "",
	 // Custom ID uses prefix
	 usePrefix: "",
	 // Custom ID uses suffix
	 useSuffix: "",
	 // Only show one message per error prompt
	 showOneMessage: false
	}};
	$(function(){$.validationEngine.defaults.promptPosition = methods.isRTL()?'topLeft':"topRight"});
})(jQuery);
         20190128165852                                                (     / *  
   *   I n l i n e   F o r m   V a l i d a t i o n   E n g i n e   2 . 6 . 2 ,   j Q u e r y   p l u g i n  
   *  
   *   C o p y r i g h t ( c )   2 0 1 0 ,   C e d r i c   D u g a s  
   *   h t t p : / / w w w . p o s i t i o n - a b s o l u t e . c o m  
   *  
   *   2 . 0   R e w r i t e   b y   O l i v i e r   R e f a l o  
   *   h t t p : / / w w w . c r i o n i c s . c o m  
   *  
   *   F o r m   v a l i d a t i o n   e n g i n e   a l l o w i n g   c u s t o m   r e g e x   r u l e s   t o   b e   a d d e d .  
   *   L i c e n s e d   u n d e r   t h e   M I T   L i c e n s e  
   * /  
   ( f u n c t i o n ( $ )   {  
  
 	 " u s e   s t r i c t " ;  
  
 	 v a r   m e t h o d s   =   {  
  
 	 	 / * *  
 	 	 *   K i n d   o f   t h e   c o n s t r u c t o r ,   c a l l e d   b e f o r e   a n y   a c t i o n  
 	 	 *   @ p a r a m   { M a p }   u s e r   o p t i o n s  
 	 	 * /  
 	 	 i n i t :   f u n c t i o n ( o p t i o n s )   {  
 	 	 	 v a r   f o r m   =   t h i s ;  
 	 	 	 i f   ( ! f o r m . d a t a ( ' j q v ' )   | |   f o r m . d a t a ( ' j q v ' )   = =   n u l l   )   {  
 	 	 	 	 o p t i o n s   =   m e t h o d s . _ s a v e O p t i o n s ( f o r m ,   o p t i o n s ) ;  
 	 	 	 	 / /   b i n d   a l l   f o r m E r r o r   e l e m e n t s   t o   c l o s e   o n   c l i c k  
 	 	 	 	 $ ( d o c u m e n t ) . o n ( " c l i c k " ,   " . f o r m E r r o r " ,   f u n c t i o n ( )   {  
 	 	 	 	 	 $ ( t h i s ) . f a d e O u t ( 1 5 0 ,   f u n c t i o n ( )   {  
 	 	 	 	 	 	 / /   r e m o v e   p r o m p t   o n c e   i n v i s i b l e  
 	 	 	 	 	 	 $ ( t h i s ) . c l o s e s t ( ' . f o r m E r r o r ' ) . r e m o v e ( ) ;  
 	 	 	 	 	 } ) ;  
 	 	 	 	 } ) ;  
 	 	 	 }  
 	 	 	 r e t u r n   t h i s ;  
 	 	   } ,  
 	 	 / * *  
 	 	 *   A t t a c h s   j Q u e r y . v a l i d a t i o n E n g i n e   t o   f o r m . s u b m i t   a n d   f i e l d . b l u r   e v e n t s  
 	 	 *   T a k e s   a n   o p t i o n a l   p a r a m s :   a   l i s t   o f   o p t i o n s  
 	 	 *   i e .   j Q u e r y ( " # f o r m I D 1 " ) . v a l i d a t i o n E n g i n e ( ' a t t a c h ' ,   { p r o m p t P o s i t i o n   :   " c e n t e r R i g h t " } ) ;  
 	 	 * /  
 	 	 a t t a c h :   f u n c t i o n ( u s e r O p t i o n s )   {  
  
 	 	 	 v a r   f o r m   =   t h i s ;  
 	 	 	 v a r   o p t i o n s ;  
  
 	 	 	 i f ( u s e r O p t i o n s )  
 	 	 	 	 o p t i o n s   =   m e t h o d s . _ s a v e O p t i o n s ( f o r m ,   u s e r O p t i o n s ) ;  
 	 	 	 e l s e  
 	 	 	 	 o p t i o n s   =   f o r m . d a t a ( ' j q v ' ) ;  
  
 	 	 	 o p t i o n s . v a l i d a t e A t t r i b u t e   =   ( f o r m . f i n d ( " [ d a t a - v a l i d a t i o n - e n g i n e * = v a l i d a t e ] " ) . l e n g t h )   ?   " d a t a - v a l i d a t i o n - e n g i n e "   :   " c l a s s " ;  
 	 	 	 i f   ( o p t i o n s . b i n d e d )   {  
  
 	 	 	 	 / /   d e l e g a t e   f i e l d s  
 	 	 	 	 f o r m . o n ( o p t i o n s . v a l i d a t i o n E v e n t T r i g g e r ,   " [ " + o p t i o n s . v a l i d a t e A t t r i b u t e + " * = v a l i d a t e ] : n o t ( [ t y p e = c h e c k b o x ] ) : n o t ( [ t y p e = r a d i o ] ) : n o t ( . d a t e p i c k e r ) " ,   m e t h o d s . _ o n F i e l d E v e n t ) ;  
 	 	 	 	 f o r m . o n ( " c l i c k " ,   " [ " + o p t i o n s . v a l i d a t e A t t r i b u t e + " * = v a l i d a t e ] [ t y p e = c h e c k b o x ] , [ " + o p t i o n s . v a l i d a t e A t t r i b u t e + " * = v a l i d a t e ] [ t y p e = r a d i o ] " ,   m e t h o d s . _ o n F i e l d E v e n t ) ;  
 	 	 	 	 f o r m . o n ( o p t i o n s . v a l i d a t i o n E v e n t T r i g g e r , " [ " + o p t i o n s . v a l i d a t e A t t r i b u t e + " * = v a l i d a t e ] [ c l a s s * = d a t e p i c k e r ] " ,   { " d e l a y " :   3 0 0 } ,   m e t h o d s . _ o n F i e l d E v e n t ) ;  
 	 	 	 }  
 	 	 	 i f   ( o p t i o n s . a u t o P o s i t i o n U p d a t e )   {  
 	 	 	 	 $ ( w i n d o w ) . b i n d ( " r e s i z e " ,   {  
 	 	 	 	 	 " n o A n i m a t i o n " :   t r u e ,  
 	 	 	 	 	 " f o r m E l e m " :   f o r m  
 	 	 	 	 } ,   m e t h o d s . u p d a t e P r o m p t s P o s i t i o n ) ;  
 	 	 	 }  
 	 	 	 f o r m . o n ( " c l i c k " , " a [ d a t a - v a l i d a t i o n - e n g i n e - s k i p ] ,   a [ c l a s s * = ' v a l i d a t e - s k i p ' ] ,   b u t t o n [ d a t a - v a l i d a t i o n - e n g i n e - s k i p ] ,   b u t t o n [ c l a s s * = ' v a l i d a t e - s k i p ' ] ,   i n p u t [ d a t a - v a l i d a t i o n - e n g i n e - s k i p ] ,   i n p u t [ c l a s s * = ' v a l i d a t e - s k i p ' ] " ,   m e t h o d s . _ s u b m i t B u t t o n C l i c k ) ;  
 	 	 	 f o r m . r e m o v e D a t a ( ' j q v _ s u b m i t B u t t o n ' ) ;  
  
 	 	 	 / /   b i n d   f o r m . s u b m i t  
 	 	 	 f o r m . o n ( " s u b m i t " ,   m e t h o d s . _ o n S u b m i t E v e n t ) ;  
 	 	 	 r e t u r n   t h i s ;  
 	 	 } ,  
 	 	 / * *  
 	 	 *   U n r e g i s t e r s   a n y   b i n d i n g s   t h a t   m a y   p o i n t   t o   j Q u e r y . v a l i d a i t o n E n g i n e  
 	 	 * /  
 	 	 d e t a c h :   f u n c t i o n ( )   {  
  
 	 	 	 v a r   f o r m   =   t h i s ;  
 	 	 	 v a r   o p t i o n s   =   f o r m . d a t a ( ' j q v ' ) ;  
  
 	 	 	 / /   u n b i n d   f i e l d s  
 	 	 	 f o r m . o f f ( o p t i o n s . v a l i d a t i o n E v e n t T r i g g e r ,   " [ " + o p t i o n s . v a l i d a t e A t t r i b u t e + " * = v a l i d a t e ] : n o t ( [ t y p e = c h e c k b o x ] ) : n o t ( [ t y p e = r a d i o ] ) : n o t ( . d a t e p i c k e r ) " ,   m e t h o d s . _ o n F i e l d E v e n t ) ;  
 	 	 	 f o r m . o f f ( " c l i c k " ,   " [ " + o p t i o n s . v a l i d a t e A t t r i b u t e + " * = v a l i d a t e ] [ t y p e = c h e c k b o x ] , [ " + o p t i o n s . v a l i d a t e A t t r i b u t e + " * = v a l i d a t e ] [ t y p e = r a d i o ] " ,   m e t h o d s . _ o n F i e l d E v e n t ) ;  
 	 	 	 f o r m . o f f ( o p t i o n s . v a l i d a t i o n E v e n t T r i g g e r , " [ " + o p t i o n s . v a l i d a t e A t t r i b u t e + " * = v a l i d a t e ] [ c l a s s * = d a t e p i c k e r ] " ,   m e t h o d s . _ o n F i e l d E v e n t ) ;  
  
 	 	 	 / /   u n b i n d   f o r m . s u b m i t  
 	 	 	 f o r m . o f f ( " s u b m i t " ,   m e t h o d s . _ o n S u b m i t E v e n t ) ;  
 	 	 	 f o r m . r e m o v e D a t a ( ' j q v ' ) ;  
  
 	 	 	 f o r m . o f f ( " c l i c k " ,   " a [ d a t a - v a l i d a t i o n - e n g i n e - s k i p ] ,   a [ c l a s s * = ' v a l i d a t e - s k i p ' ] ,   b u t t o n [ d a t a - v a l i d a t i o n - e n g i n e - s k i p ] ,   b u t t o n [ c l a s s * = ' v a l i d a t e - s k i p ' ] ,   i n p u t [ d a t a - v a l i d a t i o n - e n g i n e - s k i p ] ,   i n p u t [ c l a s s * = ' v a l i d a t e - s k i p ' ] " ,   m e t h o d s . _ s u b m i t B u t t o n C l i c k ) ;  
 	 	 	 f o r m . r e m o v e D a t a ( ' j q v _ s u b m i t B u t t o n ' ) ;  
  
 	 	 	 i f   ( o p t i o n s . a u t o P o s i t i o n U p d a t e )  
 	 	 	 	 $ ( w i n d o w ) . o f f ( " r e s i z e " ,   m e t h o d s . u p d a t e P r o m p t s P o s i t i o n ) ;  
  
 	 	 	 r e t u r n   t h i s ;  
 	 	 } ,  
 	 	 / * *  
 	 	 *   V a l i d a t e s   e i t h e r   a   f o r m   o r   a   l i s t   o f   f i e l d s ,   s h o w s   p r o m p t s   a c c o r d i n g l y .  
 	 	 *   N o t e :   T h e r e   i s   n o   a j a x   f o r m   v a l i d a t i o n   w i t h   t h i s   m e t h o d ,   o n l y   f i e l d   a j a x   v a l i d a t i o n   a r e   e v a l u a t e d  
 	 	 *  
 	 	 *   @ r e t u r n   t r u e   i f   t h e   f o r m   v a l i d a t e s ,   f a l s e   i f   i t   f a i l s  
 	 	 * /  
 	 	 v a l i d a t e :   f u n c t i o n ( u s e r O p t i o n s )   {  
 	 	 	 v a r   e l e m e n t   =   $ ( t h i s ) ;  
 	 	 	 v a r   v a l i d   =   n u l l ;  
 	 	 	 v a r   o p t i o n s ;  
  
 	 	 	 i f   ( e l e m e n t . i s ( " f o r m " )   | |   e l e m e n t . h a s C l a s s ( " v a l i d a t i o n E n g i n e C o n t a i n e r " ) )   {  
 	 	 	 	 i f   ( e l e m e n t . h a s C l a s s ( ' v a l i d a t i n g ' ) )   {  
 	 	 	 	 	 / /   f o r m   i s   a l r e a d y   v a l i d a t i n g .  
 	 	 	 	 	 / /   S h o u l d   a b o r t   o l d   v a l i d a t i o n   a n d   s t a r t   n e w   o n e .   I   d o n ' t   k n o w   h o w   t o   i m p l e m e n t   i t .  
 	 	 	 	 	 r e t u r n   f a l s e ;  
 	 	 	 	 }   e l s e   {  
 	 	 	 	 	 e l e m e n t . a d d C l a s s ( ' v a l i d a t i n g ' ) ;  
 	 	 	 	 	 i f ( u s e r O p t i o n s )  
 	 	 	 	 	 	 o p t i o n s   =   m e t h o d s . _ s a v e O p t i o n s ( e l e m e n t ,   u s e r O p t i o n s ) ;  
 	 	 	 	 	 e l s e  
 	 	 	 	 	 	 o p t i o n s   =   e l e m e n t . d a t a ( ' j q v ' ) ;  
 	 	 	 	 	 v a r   v a l i d   =   m e t h o d s . _ v a l i d a t e F i e l d s ( t h i s ) ;  
  
 	 	 	 	 	 / /   I f   t h e   f o r m   d o e s n ' t   v a l i d a t e ,   c l e a r   t h e   ' v a l i d a t i n g '   c l a s s   b e f o r e   t h e   u s e r   h a s   a   c h a n c e   t o   s u b m i t   a g a i n  
 	 	 	 	 	 s e t T i m e o u t ( f u n c t i o n ( ) {  
 	 	 	 	 	 	 e l e m e n t . r e m o v e C l a s s ( ' v a l i d a t i n g ' ) ;  
 	 	 	 	 	 } ,   1 0 0 ) ;  
 	 	 	 	 	 i f   ( v a l i d   & &   o p t i o n s . o n S u c c e s s )   {  
 	 	 	 	 	 	 o p t i o n s . o n S u c c e s s ( ) ;  
 	 	 	 	 	 }   e l s e   i f   ( ! v a l i d   & &   o p t i o n s . o n F a i l u r e )   {  
 	 	 	 	 	 	 o p t i o n s . o n F a i l u r e ( ) ;  
 	 	 	 	 	 }  
 	 	 	 	 }  
 	 	 	 }   e l s e   i f   ( e l e m e n t . i s ( ' f o r m ' )   | |   e l e m e n t . h a s C l a s s ( ' v a l i d a t i o n E n g i n e C o n t a i n e r ' ) )   {  
 	 	 	 	 e l e m e n t . r e m o v e C l a s s ( ' v a l i d a t i n g ' ) ;  
 	 	 	 }   e l s e   {  
 	 	 	 	 / /   f i e l d   v a l i d a t i o n  
 	 	                                 v a r   f o r m   =   e l e m e n t . c l o s e s t ( ' f o r m ,   . v a l i d a t i o n E n g i n e C o n t a i n e r ' ) ;  
 	 	                                 o p t i o n s   =   ( f o r m . d a t a ( ' j q v ' ) )   ?   f o r m . d a t a ( ' j q v ' )   :   $ . v a l i d a t i o n E n g i n e . d e f a u l t s ;  
 	 	                                 v a l i d   =   m e t h o d s . _ v a l i d a t e F i e l d ( e l e m e n t ,   o p t i o n s ) ;  
  
 	 	                                 i f   ( v a l i d   & &   o p t i o n s . o n F i e l d S u c c e s s )  
 	 	                                         o p t i o n s . o n F i e l d S u c c e s s ( ) ;  
 	 	                                 e l s e   i f   ( o p t i o n s . o n F i e l d F a i l u r e   & &   o p t i o n s . I n v a l i d F i e l d s . l e n g t h   >   0 )   {  
 	 	                                         o p t i o n s . o n F i e l d F a i l u r e ( ) ;  
 	 	                                 }  
  
 	 	                                 r e t u r n   ! v a l i d ;  
 	 	 	 }  
 	 	 	 i f ( o p t i o n s . o n V a l i d a t i o n C o m p l e t e )   {  
 	 	 	 	 / /   ! !   e n s u r e s   t h a t   a n   u n d e f i n e d   r e t u r n   i s   i n t e r p r e t e d   a s   r e t u r n   f a l s e   b u t   a l l o w s   a   o n V a l i d a t i o n C o m p l e t e ( )   t o   p o s s i b l y   r e t u r n   t r u e   a n d   h a v e   f o r m   c o n t i n u e   p r o c e s s i n g  
 	 	 	 	 r e t u r n   ! ! o p t i o n s . o n V a l i d a t i o n C o m p l e t e ( f o r m ,   v a l i d ) ;  
 	 	 	 }  
 	 	 	 r e t u r n   v a l i d ;  
 	 	 } ,  
 	 	 / * *  
 	 	 *     R e d r a w   p r o m p t s   p o s i t i o n ,   u s e f u l   w h e n   y o u   c h a n g e   t h e   D O M   s t a t e   w h e n   v a l i d a t i n g  
 	 	 * /  
 	 	 u p d a t e P r o m p t s P o s i t i o n :   f u n c t i o n ( e v e n t )   {  
  
 	 	 	 i f   ( e v e n t   & &   t h i s   = =   w i n d o w )   {  
 	 	 	 	 v a r   f o r m   =   e v e n t . d a t a . f o r m E l e m ;  
 	 	 	 	 v a r   n o A n i m a t i o n   =   e v e n t . d a t a . n o A n i m a t i o n ;  
 	 	 	 }  
 	 	 	 e l s e  
 	 	 	 	 v a r   f o r m   =   $ ( t h i s . c l o s e s t ( ' f o r m ,   . v a l i d a t i o n E n g i n e C o n t a i n e r ' ) ) ;  
  
 	 	 	 v a r   o p t i o n s   =   f o r m . d a t a ( ' j q v ' ) ;  
 	 	 	 / /   N o   o p t i o n ,   t a k e   d e f a u l t   o n e  
 	 	 	 i f   ( ! o p t i o n s )  
 	 	 	 	 o p t i o n s   =   m e t h o d s . _ s a v e O p t i o n s ( f o r m ,   o p t i o n s ) ;  
 	 	 	 f o r m . f i n d ( ' [ ' + o p t i o n s . v a l i d a t e A t t r i b u t e + ' * = v a l i d a t e ] ' ) . n o t ( " : d i s a b l e d " ) . e a c h ( f u n c t i o n ( ) {  
 	 	 	 	 v a r   f i e l d   =   $ ( t h i s ) ;  
 	 	 	 	 i f   ( o p t i o n s . p r e t t y S e l e c t   & &   f i e l d . i s ( " : h i d d e n " ) )  
 	 	 	 	     f i e l d   =   f o r m . f i n d ( " # "   +   o p t i o n s . u s e P r e f i x   +   f i e l d . a t t r ( ' i d ' )   +   o p t i o n s . u s e S u f f i x ) ;  
 	 	 	 	 v a r   p r o m p t   =   m e t h o d s . _ g e t P r o m p t ( f i e l d ) ;  
 	 	 	 	 v a r   p r o m p t T e x t   =   $ ( p r o m p t ) . f i n d ( " . f o r m E r r o r C o n t e n t " ) . h t m l ( ) ;  
  
 	 	 	 	 i f ( p r o m p t )  
 	 	 	 	 	 m e t h o d s . _ u p d a t e P r o m p t ( f i e l d ,   $ ( p r o m p t ) ,   p r o m p t T e x t ,   u n d e f i n e d ,   f a l s e ,   o p t i o n s ,   n o A n i m a t i o n ) ;  
 	 	 	 } ) ;  
 	 	 	 r e t u r n   t h i s ;  
 	 	 } ,  
 	 	 / * *  
 	 	 *   D i s p l a y s   a   p r o m p t   o n   a   e l e m e n t .  
 	 	 *   N o t e   t h a t   t h e   e l e m e n t   n e e d s   a n   i d !  
 	 	 *  
 	 	 *   @ p a r a m   { S t r i n g }   p r o m p t T e x t   h t m l   t e x t   t o   d i s p l a y   t y p e  
 	 	 *   @ p a r a m   { S t r i n g }   t y p e   t h e   t y p e   o f   b u b b l e :   ' p a s s '   ( g r e e n ) ,   ' l o a d '   ( b l a c k )   a n y t h i n g   e l s e   ( r e d )  
 	 	 *   @ p a r a m   { S t r i n g }   p o s s i b l e   v a l u e s   t o p L e f t ,   t o p R i g h t ,   b o t t o m L e f t ,   c e n t e r R i g h t ,   b o t t o m R i g h t  
 	 	 * /  
 	 	 s h o w P r o m p t :   f u n c t i o n ( p r o m p t T e x t ,   t y p e ,   p r o m p t P o s i t i o n ,   s h o w A r r o w )   {  
 	 	 	 v a r   f o r m   =   t h i s . c l o s e s t ( ' f o r m ,   . v a l i d a t i o n E n g i n e C o n t a i n e r ' ) ;  
 	 	 	 v a r   o p t i o n s   =   f o r m . d a t a ( ' j q v ' ) ;  
 	 	 	 / /   N o   o p t i o n ,   t a k e   d e f a u l t   o n e  
 	 	 	 i f ( ! o p t i o n s )  
 	 	 	 	 o p t i o n s   =   m e t h o d s . _ s a v e O p t i o n s ( t h i s ,   o p t i o n s ) ;  
 	 	 	 i f ( p r o m p t P o s i t i o n )  
 	 	 	 	 o p t i o n s . p r o m p t P o s i t i o n = p r o m p t P o s i t i o n ;  
 	 	 	 o p t i o n s . s h o w A r r o w   =   s h o w A r r o w = = t r u e ;  
  
 	 	 	 m e t h o d s . _ s h o w P r o m p t ( t h i s ,   p r o m p t T e x t ,   t y p e ,   f a l s e ,   o p t i o n s ) ;  
 	 	 	 r e t u r n   t h i s ;  
 	 	 } ,  
 	 	 / * *  
 	 	 *   C l o s e s   f o r m   e r r o r   p r o m p t s ,   C A N   b e   i n v i d u a l  
 	 	 * /  
 	 	 h i d e :   f u n c t i o n ( )   {  
 	 	 	   v a r   f o r m   =   $ ( t h i s ) . c l o s e s t ( ' f o r m ,   . v a l i d a t i o n E n g i n e C o n t a i n e r ' ) ;  
 	 	 	   v a r   o p t i o n s   =   f o r m . d a t a ( ' j q v ' ) ;  
 	 	 	   / /   N o   o p t i o n ,   t a k e   d e f a u l t   o n e  
 	 	 	   i f   ( ! o p t i o n s )  
 	 	 	 	 o p t i o n s   =   m e t h o d s . _ s a v e O p t i o n s ( f o r m ,   o p t i o n s ) ;  
 	 	 	   v a r   f a d e D u r a t i o n   =   ( o p t i o n s   & &   o p t i o n s . f a d e D u r a t i o n )   ?   o p t i o n s . f a d e D u r a t i o n   :   0 . 3 ;  
 	 	 	   v a r   c l o s i n g t a g ;  
  
 	 	 	   i f ( f o r m . i s ( " f o r m " )   | |   f o r m . h a s C l a s s ( " v a l i d a t i o n E n g i n e C o n t a i n e r " ) )   {  
 	 	 	 	   c l o s i n g t a g   =   " p a r e n t F o r m " + m e t h o d s . _ g e t C l a s s N a m e ( $ ( f o r m ) . a t t r ( " i d " ) ) ;  
 	 	 	   }   e l s e   {  
 	 	 	 	   c l o s i n g t a g   =   m e t h o d s . _ g e t C l a s s N a m e ( $ ( f o r m ) . a t t r ( " i d " ) )   + " f o r m E r r o r " ;  
 	 	 	   }  
 	 	 	   $ ( ' . ' + c l o s i n g t a g ) . f a d e T o ( f a d e D u r a t i o n ,   0 ,   f u n c t i o n ( )   {  
 	 	 	 	   $ ( t h i s ) . c l o s e s t ( ' . f o r m E r r o r ' ) . r e m o v e ( ) ;  
 	 	 	   } ) ;  
 	 	 	   r e t u r n   t h i s ;  
 	 	   } ,  
 	 	   / * *  
 	 	   *   C l o s e s   a l l   e r r o r   p r o m p t s   o n   t h e   p a g e  
 	 	   * /  
 	 	   h i d e A l l :   f u n c t i o n ( )   {  
 	 	 	   v a r   f o r m   =   t h i s ;  
 	 	 	   v a r   o p t i o n s   =   f o r m . d a t a ( ' j q v ' ) ;  
 	 	 	   v a r   d u r a t i o n   =   o p t i o n s   ?   o p t i o n s . f a d e D u r a t i o n : 3 0 0 ;  
 	 	 	   $ ( ' . f o r m E r r o r ' ) . f a d e T o ( d u r a t i o n ,   0 ,   f u n c t i o n ( )   {  
 	 	 	 	   $ ( t h i s ) . c l o s e s t ( ' . f o r m E r r o r ' ) . r e m o v e ( ) ;  
 	 	 	   } ) ;  
 	 	 	   r e t u r n   t h i s ;  
 	 	   } ,  
 	 	 / * *  
 	 	 *   T y p i c a l l y   c a l l e d   w h e n   u s e r   e x i s t s   a   f i e l d   u s i n g   t a b   o r   a   m o u s e   c l i c k ,   t r i g g e r s   a   f i e l d  
 	 	 *   v a l i d a t i o n  
 	 	 * /  
 	 	 _ o n F i e l d E v e n t :   f u n c t i o n ( e v e n t )   {  
 	 	 	 v a r   f i e l d   =   $ ( t h i s ) ;  
 	 	 	 v a r   f o r m   =   f i e l d . c l o s e s t ( ' f o r m ,   . v a l i d a t i o n E n g i n e C o n t a i n e r ' ) ;  
 	 	 	 v a r   o p t i o n s   =   f o r m . d a t a ( ' j q v ' ) ;  
 	 	 	 / /   N o   o p t i o n ,   t a k e   d e f a u l t   o n e  
 	 	 	 i f   ( ! o p t i o n s )  
 	 	 	 	 o p t i o n s   =   m e t h o d s . _ s a v e O p t i o n s ( f o r m ,   o p t i o n s ) ;  
 	 	 	 o p t i o n s . e v e n t T r i g g e r   =   " f i e l d " ;  
  
                         i f   ( o p t i o n s . n o t E m p t y   = =   t r u e ) {  
  
                                 i f ( f i e l d . v a l ( ) . l e n g t h   >   0 ) {  
                                         / /   v a l i d a t e   t h e   c u r r e n t   f i e l d  
                                         w i n d o w . s e t T i m e o u t ( f u n c t i o n ( )   {  
                                                 m e t h o d s . _ v a l i d a t e F i e l d ( f i e l d ,   o p t i o n s ) ;  
                                         } ,   ( e v e n t . d a t a )   ?   e v e n t . d a t a . d e l a y   :   0 ) ;  
  
                                 }  
  
                         } e l s e {  
  
                                 / /   v a l i d a t e   t h e   c u r r e n t   f i e l d  
                                 w i n d o w . s e t T i m e o u t ( f u n c t i o n ( )   {  
                                         m e t h o d s . _ v a l i d a t e F i e l d ( f i e l d ,   o p t i o n s ) ;  
                                 } ,   ( e v e n t . d a t a )   ?   e v e n t . d a t a . d e l a y   :   0 ) ;  
  
                         }  
  
  
  
  
 	 	 } ,  
 	 	 / * *  
 	 	 *   C a l l e d   w h e n   t h e   f o r m   i s   s u b m i t e d ,   s h o w s   p r o m p t s   a c c o r d i n g l y  
 	 	 *  
 	 	 *   @ p a r a m   { j q O b j e c t }  
 	 	 *                         f o r m  
 	 	 *   @ r e t u r n   f a l s e   i f   f o r m   s u b m i s s i o n   n e e d s   t o   b e   c a n c e l l e d  
 	 	 * /  
 	 	 _ o n S u b m i t E v e n t :   f u n c t i o n ( )   {  
 	 	 	 v a r   f o r m   =   $ ( t h i s ) ;  
 	 	 	 v a r   o p t i o n s   =   f o r m . d a t a ( ' j q v ' ) ;  
  
 	 	 	 / / c h e c k   i f   i t   i s   t r i g g e r   f r o m   s k i p p e d   b u t t o n  
 	 	 	 i f   ( f o r m . d a t a ( " j q v _ s u b m i t B u t t o n " ) ) {  
 	 	 	 	 v a r   s u b m i t B u t t o n   =   $ ( " # "   +   f o r m . d a t a ( " j q v _ s u b m i t B u t t o n " ) ) ;  
 	 	 	 	 i f   ( s u b m i t B u t t o n ) {  
 	 	 	 	 	 i f   ( s u b m i t B u t t o n . l e n g t h   >   0 ) {  
 	 	 	 	 	 	 i f   ( s u b m i t B u t t o n . h a s C l a s s ( " v a l i d a t e - s k i p " )   | |   s u b m i t B u t t o n . a t t r ( " d a t a - v a l i d a t i o n - e n g i n e - s k i p " )   = =   " t r u e " )  
 	 	 	 	 	 	 	 r e t u r n   t r u e ;  
 	 	 	 	 	 }  
 	 	 	 	 }  
 	 	 	 }  
  
 	 	 	 o p t i o n s . e v e n t T r i g g e r   =   " s u b m i t " ;  
  
 	 	 	 / /   v a l i d a t e   e a c h   f i e l d  
 	 	 	 / /   ( -   s k i p   f i e l d   a j a x   v a l i d a t i o n ,   n o t   n e c e s s a r y   I F   w e   w i l l   p e r f o r m   a n   a j a x   f o r m   v a l i d a t i o n )  
 	 	 	 v a r   r = m e t h o d s . _ v a l i d a t e F i e l d s ( f o r m ) ;  
  
 	 	 	 i f   ( r   & &   o p t i o n s . a j a x F o r m V a l i d a t i o n )   {  
 	 	 	 	 m e t h o d s . _ v a l i d a t e F o r m W i t h A j a x ( f o r m ,   o p t i o n s ) ;  
 	 	 	 	 / /   c a n c e l   f o r m   a u t o - s u b m i s s i o n   -   p r o c e s s   w i t h   a s y n c   c a l l   o n A j a x F o r m C o m p l e t e  
 	 	 	 	 r e t u r n   f a l s e ;  
 	 	 	 }  
  
 	 	 	 i f ( o p t i o n s . o n V a l i d a t i o n C o m p l e t e )   {  
 	 	 	 	 / /   ! !   e n s u r e s   t h a t   a n   u n d e f i n e d   r e t u r n   i s   i n t e r p r e t e d   a s   r e t u r n   f a l s e   b u t   a l l o w s   a   o n V a l i d a t i o n C o m p l e t e ( )   t o   p o s s i b l y   r e t u r n   t r u e   a n d   h a v e   f o r m   c o n t i n u e   p r o c e s s i n g  
 	 	 	 	 r e t u r n   ! ! o p t i o n s . o n V a l i d a t i o n C o m p l e t e ( f o r m ,   r ) ;  
 	 	 	 }  
 	 	 	 r e t u r n   r ;  
 	 	 } ,  
 	 	 / * *  
 	 	 *   R e t u r n   t r u e   i f   t h e   a j a x   f i e l d   v a l i d a t i o n s   p a s s e d   s o   f a r  
 	 	 *   @ p a r a m   { O b j e c t }   o p t i o n s  
 	 	 *   @ r e t u r n   t r u e ,   i s   a l l   a j a x   v a l i d a t i o n   p a s s e d   s o   f a r   ( r e m e m b e r   a j a x   i s   a s y n c )  
 	 	 * /  
 	 	 _ c h e c k A j a x S t a t u s :   f u n c t i o n ( o p t i o n s )   {  
 	 	 	 v a r   s t a t u s   =   t r u e ;  
 	 	 	 $ . e a c h ( o p t i o n s . a j a x V a l i d C a c h e ,   f u n c t i o n ( k e y ,   v a l u e )   {  
 	 	 	 	 i f   ( ! v a l u e )   {  
 	 	 	 	 	 s t a t u s   =   f a l s e ;  
 	 	 	 	 	 / /   b r e a k   t h e   e a c h  
 	 	 	 	 	 r e t u r n   f a l s e ;  
 	 	 	 	 }  
 	 	 	 } ) ;  
 	 	 	 r e t u r n   s t a t u s ;  
 	 	 } ,  
  
 	 	 / * *  
 	 	 *   R e t u r n   t r u e   i f   t h e   a j a x   f i e l d   i s   v a l i d a t e d  
 	 	 *   @ p a r a m   { S t r i n g }   f i e l d i d  
 	 	 *   @ p a r a m   { O b j e c t }   o p t i o n s  
 	 	 *   @ r e t u r n   t r u e ,   i f   v a l i d a t i o n   p a s s e d ,   f a l s e   i f   f a l s e   o r   d o e s n ' t   e x i s t  
 	 	 * /  
 	 	 _ c h e c k A j a x F i e l d S t a t u s :   f u n c t i o n ( f i e l d i d ,   o p t i o n s )   {  
 	 	 	 r e t u r n   o p t i o n s . a j a x V a l i d C a c h e [ f i e l d i d ]   = =   t r u e ;  
 	 	 } ,  
 	 	 / * *  
 	 	 *   V a l i d a t e s   f o r m   f i e l d s ,   s h o w s   p r o m p t s   a c c o r d i n g l y  
 	 	 *  
 	 	 *   @ p a r a m   { j q O b j e c t }  
 	 	 *                         f o r m  
 	 	 *   @ p a r a m   { s k i p A j a x F i e l d V a l i d a t i o n }  
 	 	 *                         b o o l e a n   -   w h e n   s e t   t o   t r u e ,   a j a x   f i e l d   v a l i d a t i o n   i s   s k i p p e d ,   t y p i c a l l y   u s e d   w h e n   t h e   s u b m i t   b u t t o n   i s   c l i c k e d  
 	 	 *  
 	 	 *   @ r e t u r n   t r u e   i f   f o r m   i s   v a l i d ,   f a l s e   i f   n o t ,   u n d e f i n e d   i f   a j a x   f o r m   v a l i d a t i o n   i s   d o n e  
 	 	 * /  
 	 	 _ v a l i d a t e F i e l d s :   f u n c t i o n ( f o r m )   {  
 	 	 	 v a r   o p t i o n s   =   f o r m . d a t a ( ' j q v ' ) ;  
  
 	 	 	 / /   t h i s   v a r i a b l e   i s   s e t   t o   t r u e   i f   a n   e r r o r   i s   f o u n d  
 	 	 	 v a r   e r r o r F o u n d   =   f a l s e ;  
  
 	 	 	 / /   T r i g g e r   h o o k ,   s t a r t   v a l i d a t i o n  
 	 	 	 f o r m . t r i g g e r ( " j q v . f o r m . v a l i d a t i n g " ) ;  
 	 	 	 / /   f i r s t ,   e v a l u a t e   s t a t u s   o f   n o n   a j a x   f i e l d s  
 	 	 	 v a r   f i r s t _ e r r = n u l l ;  
 	 	 	 f o r m . f i n d ( ' [ ' + o p t i o n s . v a l i d a t e A t t r i b u t e + ' * = v a l i d a t e ] ' ) . n o t ( " : d i s a b l e d " ) . e a c h (   f u n c t i o n ( )   {  
 	 	 	 	 v a r   f i e l d   =   $ ( t h i s ) ;  
 	 	 	 	 v a r   n a m e s   =   [ ] ;  
 	 	 	 	 i f   ( $ . i n A r r a y ( f i e l d . a t t r ( ' n a m e ' ) ,   n a m e s )   <   0 )   {  
 	 	 	 	 	 e r r o r F o u n d   | =   m e t h o d s . _ v a l i d a t e F i e l d ( f i e l d ,   o p t i o n s ) ;  
 	 	 	 	 	 i f   ( e r r o r F o u n d   & &   f i r s t _ e r r = = n u l l )  
 	 	 	 	 	 	 i f   ( f i e l d . i s ( " : h i d d e n " )   & &   o p t i o n s . p r e t t y S e l e c t )  
 	 	 	 	 	 	 	 f i r s t _ e r r   =   f i e l d   =   f o r m . f i n d ( " # "   +   o p t i o n s . u s e P r e f i x   +   m e t h o d s . _ j q S e l e c t o r ( f i e l d . a t t r ( ' i d ' ) )   +   o p t i o n s . u s e S u f f i x ) ;  
 	 	 	 	 	 	 e l s e   {  
  
 	 	 	 	 	 	 	 / / C h e c k   i f   w e   n e e d   t o   a d j u s t   w h a t   e l e m e n t   t o   s h o w   t h e   p r o m p t   o n  
 	 	 	 	 	 	 	 / / a n d   a n d   s u c h   s c r o l l   t o   i n s t e a d  
 	 	 	 	 	 	 	 i f ( f i e l d . d a t a ( ' j q v - p r o m p t - a t ' )   i n s t a n c e o f   j Q u e r y   ) {  
 	 	 	 	 	 	 	 	 f i e l d   =   f i e l d . d a t a ( ' j q v - p r o m p t - a t ' ) ;  
 	 	 	 	 	 	 	 }   e l s e   i f ( f i e l d . d a t a ( ' j q v - p r o m p t - a t ' ) )   {  
 	 	 	 	 	 	 	 	 f i e l d   =   $ ( f i e l d . d a t a ( ' j q v - p r o m p t - a t ' ) ) ;  
 	 	 	 	 	 	 	 }  
 	 	 	 	 	 	 	 f i r s t _ e r r = f i e l d ;  
 	 	 	 	 	 	 }  
 	 	 	 	 	 i f   ( o p t i o n s . d o N o t S h o w A l l E r r o s O n S u b m i t )  
 	 	 	 	 	 	 r e t u r n   f a l s e ;  
 	 	 	 	 	 n a m e s . p u s h ( f i e l d . a t t r ( ' n a m e ' ) ) ;  
  
 	 	 	 	 	 / / i f   o p t i o n   s e t ,   s t o p   c h e c k i n g   v a l i d a t i o n   r u l e s   a f t e r   o n e   e r r o r   i s   f o u n d  
 	 	 	 	 	 i f ( o p t i o n s . s h o w O n e M e s s a g e   = =   t r u e   & &   e r r o r F o u n d ) {  
 	 	 	 	 	 	 r e t u r n   f a l s e ;  
 	 	 	 	 	 }  
 	 	 	 	 }  
 	 	 	 } ) ;  
  
 	 	 	 / /   s e c o n d ,   c h e c k   t o   s e e   i f   a l l   a j a x   c a l l s   c o m p l e t e d   o k  
 	 	 	 / /   e r r o r F o u n d   | =   ! m e t h o d s . _ c h e c k A j a x S t a t u s ( o p t i o n s ) ;  
  
 	 	 	 / /   t h i r d ,   c h e c k   s t a t u s   a n d   s c r o l l   t h e   c o n t a i n e r   a c c o r d i n g l y  
 	 	 	 f o r m . t r i g g e r ( " j q v . f o r m . r e s u l t " ,   [ e r r o r F o u n d ] ) ;  
  
 	 	 	 i f   ( e r r o r F o u n d )   {  
 	 	 	 	 i f   ( o p t i o n s . s c r o l l )   {  
 	 	 	 	 	 v a r   d e s t i n a t i o n = f i r s t _ e r r . o f f s e t ( ) . t o p ;  
 	 	 	 	 	 v a r   f i x l e f t   =   f i r s t _ e r r . o f f s e t ( ) . l e f t ;  
  
 	 	 	 	 	 / / p r o m p t   p o s i t i o n i n g   a d j u s t m e n t   s u p p o r t .   U s a g e :   p o s i t i o n T y p e : X s h i f t , Y s h i f t   ( f o r   e x . :   b o t t o m L e f t : + 2 0   o r   b o t t o m L e f t : - 2 0 , + 1 0 )  
 	 	 	 	 	 v a r   p o s i t i o n T y p e = o p t i o n s . p r o m p t P o s i t i o n ;  
 	 	 	 	 	 i f   ( t y p e o f ( p o s i t i o n T y p e ) = = ' s t r i n g '   & &   p o s i t i o n T y p e . i n d e x O f ( " : " ) ! = - 1 )  
 	 	 	 	 	 	 p o s i t i o n T y p e = p o s i t i o n T y p e . s u b s t r i n g ( 0 , p o s i t i o n T y p e . i n d e x O f ( " : " ) ) ;  
  
 	 	 	 	 	 i f   ( p o s i t i o n T y p e ! = " b o t t o m R i g h t "   & &   p o s i t i o n T y p e ! = " b o t t o m L e f t " )   {  
 	 	 	 	 	 	 v a r   p r o m p t _ e r r =   m e t h o d s . _ g e t P r o m p t ( f i r s t _ e r r ) ;  
 	 	 	 	 	 	 i f   ( p r o m p t _ e r r )   {  
 	 	 	 	 	 	 	 d e s t i n a t i o n = p r o m p t _ e r r . o f f s e t ( ) . t o p ;  
 	 	 	 	 	 	 }  
 	 	 	 	 	 }  
  
 	 	 	 	 	 / /   O f f s e t   t h e   a m o u n t   t h e   p a g e   s c r o l l s   b y   a n   a m o u n t   i n   p x   t o   a c c o m o d a t e   f i x e d   e l e m e n t s   a t   t o p   o f   p a g e  
 	 	 	 	 	 i f   ( o p t i o n s . s c r o l l O f f s e t )   {  
 	 	 	 	 	 	 d e s t i n a t i o n   - =   o p t i o n s . s c r o l l O f f s e t ;  
 	 	 	 	 	 }  
  
 	 	 	 	 	 / /   g e t   t h e   p o s i t i o n   o f   t h e   f i r s t   e r r o r ,   t h e r e   s h o u l d   b e   a t   l e a s t   o n e ,   n o   n e e d   t o   c h e c k   t h i s  
 	 	 	 	 	 / / v a r   d e s t i n a t i o n   =   f o r m . f i n d ( " . f o r m E r r o r : n o t ( ' . g r e e n P o p u p ' ) : f i r s t " ) . o f f s e t ( ) . t o p ;  
 	 	 	 	 	 i f   ( o p t i o n s . i s O v e r f l o w n )   {  
 	 	 	 	 	 	 v a r   o v e r f l o w D I V   =   $ ( o p t i o n s . o v e r f l o w n D I V ) ;  
 	 	 	 	 	 	 i f ( ! o v e r f l o w D I V . l e n g t h )   r e t u r n   f a l s e ;  
 	 	 	 	 	 	 v a r   s c r o l l C o n t a i n e r S c r o l l   =   o v e r f l o w D I V . s c r o l l T o p ( ) ;  
 	 	 	 	 	 	 v a r   s c r o l l C o n t a i n e r P o s   =   - p a r s e I n t ( o v e r f l o w D I V . o f f s e t ( ) . t o p ) ;  
  
 	 	 	 	 	 	 d e s t i n a t i o n   + =   s c r o l l C o n t a i n e r S c r o l l   +   s c r o l l C o n t a i n e r P o s   -   5 ;  
 	 	 	 	 	 	 v a r   s c r o l l C o n t a i n e r   =   $ ( o p t i o n s . o v e r f l o w n D I V ) . f i l t e r ( " : n o t ( : a n i m a t e d ) " ) ;  
  
 	 	 	 	 	 	 s c r o l l C o n t a i n e r . a n i m a t e ( {   s c r o l l T o p :   d e s t i n a t i o n   } ,   1 1 0 0 ,   f u n c t i o n ( ) {  
 	 	 	 	 	 	 	 i f ( o p t i o n s . f o c u s F i r s t F i e l d )   f i r s t _ e r r . f o c u s ( ) ;  
 	 	 	 	 	 	 } ) ;  
  
 	 	 	 	 	 }   e l s e   {  
 	 	 	 	 	 	 $ ( " h t m l ,   b o d y " ) . a n i m a t e ( {  
 	 	 	 	 	 	 	 s c r o l l T o p :   d e s t i n a t i o n  
 	 	 	 	 	 	 } ,   1 1 0 0 ,   f u n c t i o n ( ) {  
 	 	 	 	 	 	 	 i f ( o p t i o n s . f o c u s F i r s t F i e l d )   f i r s t _ e r r . f o c u s ( ) ;  
 	 	 	 	 	 	 } ) ;  
 	 	 	 	 	 	 $ ( " h t m l ,   b o d y " ) . a n i m a t e ( { s c r o l l L e f t :   f i x l e f t } , 1 1 0 0 )  
 	 	 	 	 	 }  
  
 	 	 	 	 }   e l s e   i f ( o p t i o n s . f o c u s F i r s t F i e l d )  
 	 	 	 	 	 f i r s t _ e r r . f o c u s ( ) ;  
 	 	 	 	 r e t u r n   f a l s e ;  
 	 	 	 }  
 	 	 	 r e t u r n   t r u e ;  
 	 	 } ,  
 	 	 / * *  
 	 	 *   T h i s   m e t h o d   i s   c a l l e d   t o   p e r f o r m   a n   a j a x   f o r m   v a l i d a t i o n .  
 	 	 *   D u r i n g   t h i s   p r o c e s s   a l l   t h e   ( f i e l d ,   v a l u e )   p a i r s   a r e   s e n t   t o   t h e   s e r v e r   w h i c h   r e t u r n s   a   l i s t   o f   i n v a l i d   f i e l d s   o r   t r u e  
 	 	 *  
 	 	 *   @ p a r a m   { j q O b j e c t }   f o r m  
 	 	 *   @ p a r a m   { M a p }   o p t i o n s  
 	 	 * /  
 	 	 _ v a l i d a t e F o r m W i t h A j a x :   f u n c t i o n ( f o r m ,   o p t i o n s )   {  
  
 	 	 	 v a r   d a t a   =   f o r m . s e r i a l i z e ( ) ;  
 	 	 	 	 	 	 	 	 	 v a r   t y p e   =   ( o p t i o n s . a j a x F o r m V a l i d a t i o n M e t h o d )   ?   o p t i o n s . a j a x F o r m V a l i d a t i o n M e t h o d   :   " G E T " ;  
 	 	 	 v a r   u r l   =   ( o p t i o n s . a j a x F o r m V a l i d a t i o n U R L )   ?   o p t i o n s . a j a x F o r m V a l i d a t i o n U R L   :   f o r m . a t t r ( " a c t i o n " ) ;  
 	 	 	 	 	 	 	 	 	 v a r   d a t a T y p e   =   ( o p t i o n s . d a t a T y p e )   ?   o p t i o n s . d a t a T y p e   :   " j s o n " ;  
 	 	 	 $ . a j a x ( {  
 	 	 	 	 t y p e :   t y p e ,  
 	 	 	 	 u r l :   u r l ,  
 	 	 	 	 c a c h e :   f a l s e ,  
 	 	 	 	 d a t a T y p e :   d a t a T y p e ,  
 	 	 	 	 d a t a :   d a t a ,  
 	 	 	 	 f o r m :   f o r m ,  
 	 	 	 	 m e t h o d s :   m e t h o d s ,  
 	 	 	 	 o p t i o n s :   o p t i o n s ,  
 	 	 	 	 b e f o r e S e n d :   f u n c t i o n ( )   {  
 	 	 	 	 	 r e t u r n   o p t i o n s . o n B e f o r e A j a x F o r m V a l i d a t i o n ( f o r m ,   o p t i o n s ) ;  
 	 	 	 	 } ,  
 	 	 	 	 e r r o r :   f u n c t i o n ( d a t a ,   t r a n s p o r t )   {  
 	 	 	 	 	 i f   ( o p t i o n s . o n F a i l u r e )   {  
 	 	 	 	 	 	 o p t i o n s . o n F a i l u r e ( d a t a ,   t r a n s p o r t ) ;  
 	 	 	 	 	 }   e l s e   {  
 	 	 	 	 	 	 m e t h o d s . _ a j a x E r r o r ( d a t a ,   t r a n s p o r t ) ;  
 	 	 	 	 	 }  
 	 	 	 	 } ,  
 	 	 	 	 s u c c e s s :   f u n c t i o n ( j s o n )   {  
 	 	 	 	 	 i f   ( ( d a t a T y p e   = =   " j s o n " )   & &   ( j s o n   ! = =   t r u e ) )   {  
 	 	 	 	 	 	 / /   g e t t i n g   t o   t h i s   c a s e   d o e s n ' t   n e c e s s a r y   m e a n s   t h a t   t h e   f o r m   i s   i n v a l i d  
 	 	 	 	 	 	 / /   t h e   s e r v e r   m a y   r e t u r n   g r e e n   o r   c l o s i n g   p r o m p t   a c t i o n s  
 	 	 	 	 	 	 / /   t h i s   f l a g   h e l p s   f i g u r i n g   i t   o u t  
 	 	 	 	 	 	 v a r   e r r o r I n F o r m = f a l s e ;  
 	 	 	 	 	 	 f o r   ( v a r   i   =   0 ;   i   <   j s o n . l e n g t h ;   i + + )   {  
 	 	 	 	 	 	 	 v a r   v a l u e   =   j s o n [ i ] ;  
  
 	 	 	 	 	 	 	 v a r   e r r o r F i e l d I d   =   v a l u e [ 0 ] ;  
 	 	 	 	 	 	 	 v a r   e r r o r F i e l d   =   $ ( $ ( " # "   +   e r r o r F i e l d I d ) [ 0 ] ) ;  
  
 	 	 	 	 	 	 	 / /   m a k e   s u r e   w e   f o u n d   t h e   e l e m e n t  
 	 	 	 	 	 	 	 i f   ( e r r o r F i e l d . l e n g t h   = =   1 )   {  
  
 	 	 	 	 	 	 	 	 / /   p r o m p t T e x t   o r   s e l e c t o r  
 	 	 	 	 	 	 	 	 v a r   m s g   =   v a l u e [ 2 ] ;  
 	 	 	 	 	 	 	 	 / /   i f   t h e   f i e l d   i s   v a l i d  
 	 	 	 	 	 	 	 	 i f   ( v a l u e [ 1 ]   = =   t r u e )   {  
  
 	 	 	 	 	 	 	 	 	 i f   ( m s g   = =   " "     | |   ! m s g ) {  
 	 	 	 	 	 	 	 	 	 	 / /   i f   f o r   s o m e   r e a s o n ,   s t a t u s = = t r u e   a n d   e r r o r = " " ,   j u s t   c l o s e   t h e   p r o m p t  
 	 	 	 	 	 	 	 	 	 	 m e t h o d s . _ c l o s e P r o m p t ( e r r o r F i e l d ) ;  
 	 	 	 	 	 	 	 	 	 }   e l s e   {  
 	 	 	 	 	 	 	 	 	 	 / /   t h e   f i e l d   i s   v a l i d ,   b u t   w e   a r e   d i s p l a y i n g   a   g r e e n   p r o m p t  
 	 	 	 	 	 	 	 	 	 	 i f   ( o p t i o n s . a l l r u l e s [ m s g ] )   {  
 	 	 	 	 	 	 	 	 	 	 	 v a r   t x t   =   o p t i o n s . a l l r u l e s [ m s g ] . a l e r t T e x t O k ;  
 	 	 	 	 	 	 	 	 	 	 	 i f   ( t x t )  
 	 	 	 	 	 	 	 	 	 	 	 	 m s g   =   t x t ;  
 	 	 	 	 	 	 	 	 	 	 }  
 	 	 	 	 	 	 	 	 	 	 i f   ( o p t i o n s . s h o w P r o m p t s )   m e t h o d s . _ s h o w P r o m p t ( e r r o r F i e l d ,   m s g ,   " p a s s " ,   f a l s e ,   o p t i o n s ,   t r u e ) ;  
 	 	 	 	 	 	 	 	 	 }  
 	 	 	 	 	 	 	 	 }   e l s e   {  
 	 	 	 	 	 	 	 	 	 / /   t h e   f i e l d   i s   i n v a l i d ,   s h o w   t h e   r e d   e r r o r   p r o m p t  
 	 	 	 	 	 	 	 	 	 e r r o r I n F o r m | = t r u e ;  
 	 	 	 	 	 	 	 	 	 i f   ( o p t i o n s . a l l r u l e s [ m s g ] )   {  
 	 	 	 	 	 	 	 	 	 	 v a r   t x t   =   o p t i o n s . a l l r u l e s [ m s g ] . a l e r t T e x t ;  
 	 	 	 	 	 	 	 	 	 	 i f   ( t x t )  
 	 	 	 	 	 	 	 	 	 	 	 m s g   =   t x t ;  
 	 	 	 	 	 	 	 	 	 }  
 	 	 	 	 	 	 	 	 	 i f ( o p t i o n s . s h o w P r o m p t s )   m e t h o d s . _ s h o w P r o m p t ( e r r o r F i e l d ,   m s g ,   " " ,   f a l s e ,   o p t i o n s ,   t r u e ) ;  
 	 	 	 	 	 	 	 	 }  
 	 	 	 	 	 	 	 }  
 	 	 	 	 	 	 }  
 	 	 	 	 	 	 o p t i o n s . o n A j a x F o r m C o m p l e t e ( ! e r r o r I n F o r m ,   f o r m ,   j s o n ,   o p t i o n s ) ;  
 	 	 	 	 	 }   e l s e  
 	 	 	 	 	 	 o p t i o n s . o n A j a x F o r m C o m p l e t e ( t r u e ,   f o r m ,   j s o n ,   o p t i o n s ) ;  
  
 	 	 	 	 }  
 	 	 	 } ) ;  
  
 	 	 } ,  
 	 	 / * *  
 	 	 *   V a l i d a t e s   f i e l d ,   s h o w s   p r o m p t s   a c c o r d i n g l y  
 	 	 *  
 	 	 *   @ p a r a m   { j q O b j e c t }  
 	 	 *                         f i e l d  
 	 	 *   @ p a r a m   { A r r a y [ S t r i n g ] }  
 	 	 *                         f i e l d ' s   v a l i d a t i o n   r u l e s  
 	 	 *   @ p a r a m   { M a p }  
 	 	 *                         u s e r   o p t i o n s  
 	 	 *   @ r e t u r n   f a l s e   i f   f i e l d   i s   v a l i d   ( I t   i s   i n v e r s e d   f o r   * f i e l d s * ,   i t   r e t u r n   f a l s e   o n   v a l i d a t e   a n d   t r u e   o n   e r r o r s . )  
 	 	 * /  
 	 	 _ v a l i d a t e F i e l d :   f u n c t i o n ( f i e l d ,   o p t i o n s ,   s k i p A j a x V a l i d a t i o n )   {  
 	 	 	 i f   ( ! f i e l d . a t t r ( " i d " ) )   {  
 	 	 	 	 f i e l d . a t t r ( " i d " ,   " f o r m - v a l i d a t i o n - f i e l d - "   +   $ . v a l i d a t i o n E n g i n e . f i e l d I d C o u n t e r ) ;  
 	 	 	 	 + + $ . v a l i d a t i o n E n g i n e . f i e l d I d C o u n t e r ;  
 	 	 	 }  
  
 	 	 	 i f ( f i e l d . h a s C l a s s ( o p t i o n s . i g n o r e F i e l d s W i t h C l a s s ) )  
 	 	 	 	 r e t u r n   f a l s e ;  
  
                       i f   ( ! o p t i o n s . v a l i d a t e N o n V i s i b l e F i e l d s   & &   ( f i e l d . i s ( " : h i d d e n " )   & &   ! o p t i o n s . p r e t t y S e l e c t   | |   f i e l d . p a r e n t ( ) . i s ( " : h i d d e n " ) ) )  
 	 	 	 	 r e t u r n   f a l s e ;  
  
 	 	 	 v a r   r u l e s P a r s i n g   =   f i e l d . a t t r ( o p t i o n s . v a l i d a t e A t t r i b u t e ) ;  
 	 	 	 v a r   g e t R u l e s   =   / v a l i d a t e \ [ ( . * ) \ ] / . e x e c ( r u l e s P a r s i n g ) ;  
  
 	 	 	 i f   ( ! g e t R u l e s )  
 	 	 	 	 r e t u r n   f a l s e ;  
 	 	 	 v a r   s t r   =   g e t R u l e s [ 1 ] ;  
 	 	 	 v a r   r u l e s   =   s t r . s p l i t ( / \ [ | , | \ ] / ) ;  
  
 	 	 	 / /   t r u e   i f   w e   r a n   t h e   a j a x   v a l i d a t i o n ,   t e l l s   t h e   l o g i c   t o   s t o p   m e s s i n g   w i t h   p r o m p t s  
 	 	 	 v a r   i s A j a x V a l i d a t o r   =   f a l s e ;  
 	 	 	 v a r   f i e l d N a m e   =   f i e l d . a t t r ( " n a m e " ) ;  
 	 	 	 v a r   p r o m p t T e x t   =   " " ;  
 	 	 	 v a r   p r o m p t T y p e   =   " " ;  
 	 	 	 v a r   r e q u i r e d   =   f a l s e ;  
 	 	 	 v a r   l i m i t E r r o r s   =   f a l s e ;  
 	 	 	 o p t i o n s . i s E r r o r   =   f a l s e ;  
 	 	 	 o p t i o n s . s h o w A r r o w   =   o p t i o n s . s h o w A r r o w   = = t r u e ;  
  
 	 	 	 / /   I f   t h e   p r o g r a m m e r   w a n t s   t o   l i m i t   t h e   a m o u n t   o f   e r r o r   m e s s a g e s   p e r   f i e l d ,  
 	 	 	 i f   ( o p t i o n s . m a x E r r o r s P e r F i e l d   >   0 )   {  
 	 	 	 	 l i m i t E r r o r s   =   t r u e ;  
 	 	 	 }  
  
 	 	 	 v a r   f o r m   =   $ ( f i e l d . c l o s e s t ( " f o r m ,   . v a l i d a t i o n E n g i n e C o n t a i n e r " ) ) ;  
 	 	 	 / /   F i x   f o r   a d d i n g   s p a c e s   i n   t h e   r u l e s  
 	 	 	 f o r   ( v a r   i   =   0 ;   i   <   r u l e s . l e n g t h ;   i + + )   {  
 	 	 	 	 r u l e s [ i ]   =   r u l e s [ i ] . t o S t r i n g ( ) . r e p l a c e ( "   " ,   " " ) ; / / . t o S t r i n g   t o   w o r k e d   o n   I E 8  
 	 	 	 	 / /   R e m o v e   a n y   p a r s i n g   e r r o r s  
 	 	 	 	 i f   ( r u l e s [ i ]   = = =   ' ' )   {  
 	 	 	 	 	 d e l e t e   r u l e s [ i ] ;  
 	 	 	 	 }  
 	 	 	 }  
  
 	 	 	 f o r   ( v a r   i   =   0 ,   f i e l d _ e r r o r s   =   0 ;   i   <   r u l e s . l e n g t h ;   i + + )   {  
  
 	 	 	 	 / /   I f   w e   a r e   l i m i t i n g   e r r o r s ,   a n d   h a v e   h i t   t h e   m a x ,   b r e a k  
 	 	 	 	 i f   ( l i m i t E r r o r s   & &   f i e l d _ e r r o r s   > =   o p t i o n s . m a x E r r o r s P e r F i e l d )   {  
 	 	 	 	 	 / /   I f   w e   h a v e n ' t   h i t   a   r e q u i r e d   y e t ,   c h e c k   t o   s e e   i f   t h e r e   i s   o n e   i n   t h e   v a l i d a t i o n   r u l e s   f o r   t h i s  
 	 	 	 	 	 / /   f i e l d   a n d   t h a t   i t ' s   i n d e x   i s   g r e a t e r   o r   e q u a l   t o   o u r   c u r r e n t   i n d e x  
 	 	 	 	 	 i f   ( ! r e q u i r e d )   {  
 	 	 	 	 	 	 v a r   h a v e _ r e q u i r e d   =   $ . i n A r r a y ( ' r e q u i r e d ' ,   r u l e s ) ;  
 	 	 	 	 	 	 r e q u i r e d   =   ( h a v e _ r e q u i r e d   ! =   - 1   & &     h a v e _ r e q u i r e d   > =   i ) ;  
 	 	 	 	 	 }  
 	 	 	 	 	 b r e a k ;  
 	 	 	 	 }  
  
  
 	 	 	 	 v a r   e r r o r M s g   =   u n d e f i n e d ;  
 	 	 	 	 s w i t c h   ( r u l e s [ i ] )   {  
  
 	 	 	 	 	 c a s e   " r e q u i r e d " :  
 	 	 	 	 	 	 r e q u i r e d   =   t r u e ;  
 	 	 	 	 	 	 e r r o r M s g   =   m e t h o d s . _ g e t E r r o r M e s s a g e ( f o r m ,   f i e l d ,   r u l e s [ i ] ,   r u l e s ,   i ,   o p t i o n s ,   m e t h o d s . _ r e q u i r e d ) ;  
 	 	 	 	 	 	 b r e a k ;  
 	 	 	 	 	 c a s e   " c u s t o m " :  
 	 	 	 	 	 	 e r r o r M s g   =   m e t h o d s . _ g e t E r r o r M e s s a g e ( f o r m ,   f i e l d ,   r u l e s [ i ] ,   r u l e s ,   i ,   o p t i o n s ,   m e t h o d s . _ c u s t o m ) ;  
 	 	 	 	 	 	 b r e a k ;  
 	 	 	 	 	 c a s e   " g r o u p R e q u i r e d " :  
 	 	 	 	 	 	 / /   C h e c k   i s   i t s   t h e   f i r s t   o f   g r o u p ,   i f   n o t ,   r e l o a d   v a l i d a t i o n   w i t h   f i r s t   f i e l d  
 	 	 	 	 	 	 / /   A N D   c o n t i n u e   n o r m a l   v a l i d a t i o n   o n   p r e s e n t   f i e l d  
 	 	 	 	 	 	 v a r   c l a s s G r o u p   =   " [ " + o p t i o n s . v a l i d a t e A t t r i b u t e + " * = "   + r u l e s [ i   +   1 ]   + " ] " ;  
 	 	 	 	 	 	 v a r   f i r s t O f G r o u p   =   f o r m . f i n d ( c l a s s G r o u p ) . e q ( 0 ) ;  
 	 	 	 	 	 	 i f ( f i r s t O f G r o u p [ 0 ]   ! =   f i e l d [ 0 ] ) {  
  
 	 	 	 	 	 	 	 m e t h o d s . _ v a l i d a t e F i e l d ( f i r s t O f G r o u p ,   o p t i o n s ,   s k i p A j a x V a l i d a t i o n ) ;  
 	 	 	 	 	 	 	 o p t i o n s . s h o w A r r o w   =   t r u e ;  
  
 	 	 	 	 	 	 }  
 	 	 	 	 	 	 e r r o r M s g   =   m e t h o d s . _ g e t E r r o r M e s s a g e ( f o r m ,   f i e l d ,   r u l e s [ i ] ,   r u l e s ,   i ,   o p t i o n s ,   m e t h o d s . _ g r o u p R e q u i r e d ) ;  
 	 	 	 	 	 	 i f ( e r r o r M s g )     r e q u i r e d   =   t r u e ;  
 	 	 	 	 	 	 o p t i o n s . s h o w A r r o w   =   f a l s e ;  
 	 	 	 	 	 	 b r e a k ;  
 	 	 	 	 	 c a s e   " a j a x " :  
 	 	 	 	 	 	 / /   A J A X   d e f a u l t s   t o   r e t u r n i n g   i t ' s   l o a d i n g   m e s s a g e  
 	 	 	 	 	 	 e r r o r M s g   =   m e t h o d s . _ a j a x ( f i e l d ,   r u l e s ,   i ,   o p t i o n s ) ;  
 	 	 	 	 	 	 i f   ( e r r o r M s g )   {  
 	 	 	 	 	 	 	 p r o m p t T y p e   =   " l o a d " ;  
 	 	 	 	 	 	 }  
 	 	 	 	 	 	 b r e a k ;  
 	 	 	 	 	 c a s e   " m i n S i z e " :  
 	 	 	 	 	 	 e r r o r M s g   =   m e t h o d s . _ g e t E r r o r M e s s a g e ( f o r m ,   f i e l d ,   r u l e s [ i ] ,   r u l e s ,   i ,   o p t i o n s ,   m e t h o d s . _ m i n S i z e ) ;  
 	 	 	 	 	 	 b r e a k ;  
 	 	 	 	 	 c a s e   " m a x S i z e " :  
 	 	 	 	 	 	 e r r o r M s g   =   m e t h o d s . _ g e t E r r o r M e s s a g e ( f o r m ,   f i e l d ,   r u l e s [ i ] ,   r u l e s ,   i ,   o p t i o n s ,   m e t h o d s . _ m a x S i z e ) ;  
 	 	 	 	 	 	 b r e a k ;  
 	 	 	 	 	 c a s e   " m i n " :  
 	 	 	 	 	 	 e r r o r M s g   =   m e t h o d s . _ g e t E r r o r M e s s a g e ( f o r m ,   f i e l d ,   r u l e s [ i ] ,   r u l e s ,   i ,   o p t i o n s ,   m e t h o d s . _ m i n ) ;  
 	 	 	 	 	 	 b r e a k ;  
 	 	 	 	 	 c a s e   " m a x " :  
 	 	 	 	 	 	 e r r o r M s g   =   m e t h o d s . _ g e t E r r o r M e s s a g e ( f o r m ,   f i e l d ,   r u l e s [ i ] ,   r u l e s ,   i ,   o p t i o n s ,   m e t h o d s . _ m a x ) ;  
 	 	 	 	 	 	 b r e a k ;  
 	 	 	 	 	 c a s e   " p a s t " :  
 	 	 	 	 	 	 e r r o r M s g   =   m e t h o d s . _ g e t E r r o r M e s s a g e ( f o r m ,   f i e l d , r u l e s [ i ] ,   r u l e s ,   i ,   o p t i o n s ,   m e t h o d s . _ p a s t ) ;  
 	 	 	 	 	 	 b r e a k ;  
 	 	 	 	 	 c a s e   " f u t u r e " :  
 	 	 	 	 	 	 e r r o r M s g   =   m e t h o d s . _ g e t E r r o r M e s s a g e ( f o r m ,   f i e l d , r u l e s [ i ] ,   r u l e s ,   i ,   o p t i o n s ,   m e t h o d s . _ f u t u r e ) ;  
 	 	 	 	 	 	 b r e a k ;  
 	 	 	 	 	 c a s e   " d a t e R a n g e " :  
 	 	 	 	 	 	 v a r   c l a s s G r o u p   =   " [ " + o p t i o n s . v a l i d a t e A t t r i b u t e + " * = "   +   r u l e s [ i   +   1 ]   +   " ] " ;  
 	 	 	 	 	 	 o p t i o n s . f i r s t O f G r o u p   =   f o r m . f i n d ( c l a s s G r o u p ) . e q ( 0 ) ;  
 	 	 	 	 	 	 o p t i o n s . s e c o n d O f G r o u p   =   f o r m . f i n d ( c l a s s G r o u p ) . e q ( 1 ) ;  
  
 	 	 	 	 	 	 / / i f   o n e   e n t r y   o u t   o f   t h e   p a i r   h a s   v a l u e   t h e n   p r o c e e d   t o   r u n   t h r o u g h   v a l i d a t i o n  
 	 	 	 	 	 	 i f   ( o p t i o n s . f i r s t O f G r o u p [ 0 ] . v a l u e   | |   o p t i o n s . s e c o n d O f G r o u p [ 0 ] . v a l u e )   {  
 	 	 	 	 	 	 	 e r r o r M s g   =   m e t h o d s . _ g e t E r r o r M e s s a g e ( f o r m ,   f i e l d , r u l e s [ i ] ,   r u l e s ,   i ,   o p t i o n s ,   m e t h o d s . _ d a t e R a n g e ) ;  
 	 	 	 	 	 	 }  
 	 	 	 	 	 	 i f   ( e r r o r M s g )   r e q u i r e d   =   t r u e ;  
 	 	 	 	 	 	 o p t i o n s . s h o w A r r o w   =   f a l s e ;  
 	 	 	 	 	 	 b r e a k ;  
  
 	 	 	 	 	 c a s e   " d a t e T i m e R a n g e " :  
 	 	 	 	 	 	 v a r   c l a s s G r o u p   =   " [ " + o p t i o n s . v a l i d a t e A t t r i b u t e + " * = "   +   r u l e s [ i   +   1 ]   +   " ] " ;  
 	 	 	 	 	 	 o p t i o n s . f i r s t O f G r o u p   =   f o r m . f i n d ( c l a s s G r o u p ) . e q ( 0 ) ;  
 	 	 	 	 	 	 o p t i o n s . s e c o n d O f G r o u p   =   f o r m . f i n d ( c l a s s G r o u p ) . e q ( 1 ) ;  
  
 	 	 	 	 	 	 / / i f   o n e   e n t r y   o u t   o f   t h e   p a i r   h a s   v a l u e   t h e n   p r o c e e d   t o   r u n   t h r o u g h   v a l i d a t i o n  
 	 	 	 	 	 	 i f   ( o p t i o n s . f i r s t O f G r o u p [ 0 ] . v a l u e   | |   o p t i o n s . s e c o n d O f G r o u p [ 0 ] . v a l u e )   {  
 	 	 	 	 	 	 	 e r r o r M s g   =   m e t h o d s . _ g e t E r r o r M e s s a g e ( f o r m ,   f i e l d , r u l e s [ i ] ,   r u l e s ,   i ,   o p t i o n s ,   m e t h o d s . _ d a t e T i m e R a n g e ) ;  
 	 	 	 	 	 	 }  
 	 	 	 	 	 	 i f   ( e r r o r M s g )   r e q u i r e d   =   t r u e ;  
 	 	 	 	 	 	 o p t i o n s . s h o w A r r o w   =   f a l s e ;  
 	 	 	 	 	 	 b r e a k ;  
 	 	 	 	 	 c a s e   " m a x C h e c k b o x " :  
 	 	 	 	 	 	 f i e l d   =   $ ( f o r m . f i n d ( " i n p u t [ n a m e = ' "   +   f i e l d N a m e   +   " ' ] " ) ) ;  
 	 	 	 	 	 	 e r r o r M s g   =   m e t h o d s . _ g e t E r r o r M e s s a g e ( f o r m ,   f i e l d ,   r u l e s [ i ] ,   r u l e s ,   i ,   o p t i o n s ,   m e t h o d s . _ m a x C h e c k b o x ) ;  
 	 	 	 	 	 	 b r e a k ;  
 	 	 	 	 	 c a s e   " m i n C h e c k b o x " :  
 	 	 	 	 	 	 f i e l d   =   $ ( f o r m . f i n d ( " i n p u t [ n a m e = ' "   +   f i e l d N a m e   +   " ' ] " ) ) ;  
 	 	 	 	 	 	 e r r o r M s g   =   m e t h o d s . _ g e t E r r o r M e s s a g e ( f o r m ,   f i e l d ,   r u l e s [ i ] ,   r u l e s ,   i ,   o p t i o n s ,   m e t h o d s . _ m i n C h e c k b o x ) ;  
 	 	 	 	 	 	 b r e a k ;  
 	 	 	 	 	 c a s e   " e q u a l s " :  
 	 	 	 	 	 	 e r r o r M s g   =   m e t h o d s . _ g e t E r r o r M e s s a g e ( f o r m ,   f i e l d ,   r u l e s [ i ] ,   r u l e s ,   i ,   o p t i o n s ,   m e t h o d s . _ e q u a l s ) ;  
 	 	 	 	 	 	 b r e a k ;  
 	 	 	 	 	 c a s e   " f u n c C a l l " :  
 	 	 	 	 	 	 e r r o r M s g   =   m e t h o d s . _ g e t E r r o r M e s s a g e ( f o r m ,   f i e l d ,   r u l e s [ i ] ,   r u l e s ,   i ,   o p t i o n s ,   m e t h o d s . _ f u n c C a l l ) ;  
 	 	 	 	 	 	 b r e a k ;  
 	 	 	 	 	 c a s e   " c r e d i t C a r d " :  
 	 	 	 	 	 	 e r r o r M s g   =   m e t h o d s . _ g e t E r r o r M e s s a g e ( f o r m ,   f i e l d ,   r u l e s [ i ] ,   r u l e s ,   i ,   o p t i o n s ,   m e t h o d s . _ c r e d i t C a r d ) ;  
 	 	 	 	 	 	 b r e a k ;  
 	 	 	 	 	 c a s e   " c o n d R e q u i r e d " :  
 	 	 	 	 	 	 e r r o r M s g   =   m e t h o d s . _ g e t E r r o r M e s s a g e ( f o r m ,   f i e l d ,   r u l e s [ i ] ,   r u l e s ,   i ,   o p t i o n s ,   m e t h o d s . _ c o n d R e q u i r e d ) ;  
 	 	 	 	 	 	 i f   ( e r r o r M s g   ! = =   u n d e f i n e d )   {  
 	 	 	 	 	 	 	 r e q u i r e d   =   t r u e ;  
 	 	 	 	 	 	 }  
 	 	 	 	 	 	 b r e a k ;  
 	 	 	 	 	 c a s e   " f u n c C a l l R e q u i r e d " :  
 	 	 	 	 	 	 e r r o r M s g   =   m e t h o d s . _ g e t E r r o r M e s s a g e ( f o r m ,   f i e l d ,   r u l e s [ i ] ,   r u l e s ,   i ,   o p t i o n s ,   m e t h o d s . _ f u n c C a l l R e q u i r e d ) ;  
 	 	 	 	 	 	 i f   ( e r r o r M s g   ! = =   u n d e f i n e d )   {  
 	 	 	 	 	 	 	 r e q u i r e d   =   t r u e ;  
 	 	 	 	 	 	 }  
 	 	 	 	 	 	 b r e a k ;  
  
 	 	 	 	 	 d e f a u l t :  
 	 	 	 	 }  
  
 	 	 	 	 v a r   e n d _ v a l i d a t i o n   =   f a l s e ;  
  
 	 	 	 	 / /   I f   w e   w e r e   p a s s e d   b a c k   a n   m e s s a g e   o b j e c t ,   c h e c k   w h a t   t h e   s t a t u s   w a s   t o   d e t e r m i n e   w h a t   t o   d o  
 	 	 	 	 i f   ( t y p e o f   e r r o r M s g   = =   " o b j e c t " )   {  
 	 	 	 	 	 s w i t c h   ( e r r o r M s g . s t a t u s )   {  
 	 	 	 	 	 	 c a s e   " _ b r e a k " :  
 	 	 	 	 	 	 	 e n d _ v a l i d a t i o n   =   t r u e ;  
 	 	 	 	 	 	 	 b r e a k ;  
 	 	 	 	 	 	 / /   I f   w e   h a v e   a n   e r r o r   m e s s a g e ,   s e t   e r r o r M s g   t o   t h e   e r r o r   m e s s a g e  
 	 	 	 	 	 	 c a s e   " _ e r r o r " :  
 	 	 	 	 	 	 	 e r r o r M s g   =   e r r o r M s g . m e s s a g e ;  
 	 	 	 	 	 	 	 b r e a k ;  
 	 	 	 	 	 	 / /   I f   w e   w a n t   t o   t h r o w   a n   e r r o r ,   b u t   n o t   s h o w   a   p r o m p t ,   r e t u r n   e a r l y   w i t h   t r u e  
 	 	 	 	 	 	 c a s e   " _ e r r o r _ n o _ p r o m p t " :  
 	 	 	 	 	 	 	 r e t u r n   t r u e ;  
 	 	 	 	 	 	 	 b r e a k ;  
 	 	 	 	 	 	 / /   A n y t h i n g   e l s e   w e   c o n t i n u e   o n  
 	 	 	 	 	 	 d e f a u l t :  
 	 	 	 	 	 	 	 b r e a k ;  
 	 	 	 	 	 }  
 	 	 	 	 }  
  
 	 	 	 	 / / f u n c C a l l R e q u i r e d ,   f i r s t   i n   r u l e s ,   a n d   h a s   e r r o r ,   s k i p   a n y t h i n g   e l s e  
 	 	 	 	 i f (   i = = 0   & &   s t r . i n d e x O f ( ' f u n c C a l l R e q u i r e d ' ) = = 0   & &   e r r o r M s g   ! = =   u n d e f i n e d   ) {  
 	 	 	 	 	 i f ( p r o m p t T e x t   ! =   ' ' )   {  
 	 	 	 	 	 	 p r o m p t T e x t   + =   " < b r / > " ;  
 	 	 	 	 	 }  
 	 	 	 	 	 p r o m p t T e x t   + =   e r r o r M s g ;  
 	 	 	 	 	 o p t i o n s . i s E r r o r = t r u e ;  
 	 	 	 	 	 f i e l d _ e r r o r s + + ;  
 	 	 	 	 	 e n d _ v a l i d a t i o n = t r u e ;  
 	 	 	 	 }  
  
 	 	 	 	 / /   I f   i t   h a s   b e e n   s p e c i f i e d   t h a t   v a l i d a t i o n   s h o u l d   e n d   n o w ,   b r e a k  
 	 	 	 	 i f   ( e n d _ v a l i d a t i o n )   {  
 	 	 	 	 	 b r e a k ;  
 	 	 	 	 }  
  
 	 	 	 	 / /   I f   w e   h a v e   a   s t r i n g ,   t h a t   m e a n s   t h a t   w e   h a v e   a n   e r r o r ,   s o   a d d   i t   t o   t h e   e r r o r   m e s s a g e .  
 	 	 	 	 i f   ( t y p e o f   e r r o r M s g   = =   ' s t r i n g ' )   {  
 	 	 	 	 	 i f ( p r o m p t T e x t   ! =   ' ' )   {  
 	 	 	 	 	 	 p r o m p t T e x t   + =   " < b r / > " ;  
 	 	 	 	 	 }  
 	 	 	 	 	 p r o m p t T e x t   + =   e r r o r M s g ;  
 	 	 	 	 	 o p t i o n s . i s E r r o r   =   t r u e ;  
 	 	 	 	 	 f i e l d _ e r r o r s + + ;  
 	 	 	 	 }  
 	 	 	 }  
 	 	 	 / /   I f   t h e   r u l e s   r e q u i r e d   i s   n o t   a d d e d ,   a n   e m p t y   f i e l d   i s   n o t   v a l i d a t e d  
 	 	 	 / / t h e   3 r d   c o n d i t i o n   i s   a d d e d   s o   t h a t   e v e n   e m p t y   p a s s w o r d   f i e l d s   s h o u l d   b e   e q u a l  
 	 	 	 / / o t h e r w i s e   i f   o n e   i s   f i l l e d   a n d   a n o t h e r   l e f t   e m p t y ,   t h e   " e q u a l "   c o n d i t i o n   w o u l d   f a i l  
 	 	 	 / / w h i c h   d o e s   n o t   m a k e   a n y   s e n s e  
 	 	 	 i f ( ! r e q u i r e d   & &   ! ( f i e l d . v a l ( ) )   & &   f i e l d . v a l ( ) . l e n g t h   <   1   & &   $ . i n A r r a y ( ' e q u a l s ' ,   r u l e s )   <   0 )   o p t i o n s . i s E r r o r   =   f a l s e ;  
  
 	 	 	 / /   H a c k   f o r   r a d i o / c h e c k b o x   g r o u p   b u t t o n ,   t h e   v a l i d a t i o n   g o   i n t o   t h e  
 	 	 	 / /   f i r s t   r a d i o / c h e c k b o x   o f   t h e   g r o u p  
 	 	 	 v a r   f i e l d T y p e   =   f i e l d . p r o p ( " t y p e " ) ;  
 	 	 	 v a r   p o s i t i o n T y p e = f i e l d . d a t a ( " p r o m p t P o s i t i o n " )   | |   o p t i o n s . p r o m p t P o s i t i o n ;  
  
 	 	 	 i f   ( ( f i e l d T y p e   = =   " r a d i o "   | |   f i e l d T y p e   = =   " c h e c k b o x " )   & &   f o r m . f i n d ( " i n p u t [ n a m e = ' "   +   f i e l d N a m e   +   " ' ] " ) . l e n g t h   >   1 )   {  
 	 	 	 	 i f ( p o s i t i o n T y p e   = = =   ' i n l i n e ' )   {  
 	 	 	 	 	 f i e l d   =   $ ( f o r m . f i n d ( " i n p u t [ n a m e = ' "   +   f i e l d N a m e   +   " ' ] [ t y p e ! = h i d d e n ] : l a s t " ) ) ;  
 	 	 	 	 }   e l s e   {  
 	 	 	 	 f i e l d   =   $ ( f o r m . f i n d ( " i n p u t [ n a m e = ' "   +   f i e l d N a m e   +   " ' ] [ t y p e ! = h i d d e n ] : f i r s t " ) ) ;  
 	 	 	 	 }  
 	 	 	 	 o p t i o n s . s h o w A r r o w   =   o p t i o n s . s h o w A r r o w O n R a d i o A n d C h e c k b o x ;  
 	 	 	 }  
  
 	 	 	 i f ( f i e l d . i s ( " : h i d d e n " )   & &   o p t i o n s . p r e t t y S e l e c t )   {  
 	 	 	 	 f i e l d   =   f o r m . f i n d ( " # "   +   o p t i o n s . u s e P r e f i x   +   m e t h o d s . _ j q S e l e c t o r ( f i e l d . a t t r ( ' i d ' ) )   +   o p t i o n s . u s e S u f f i x ) ;  
 	 	 	 }  
  
 	 	 	 i f   ( o p t i o n s . i s E r r o r   & &   o p t i o n s . s h o w P r o m p t s ) {  
 	 	 	 	 m e t h o d s . _ s h o w P r o m p t ( f i e l d ,   p r o m p t T e x t ,   p r o m p t T y p e ,   f a l s e ,   o p t i o n s ) ;  
 	 	 	 } e l s e {  
 	 	 	 	 i f   ( ! i s A j a x V a l i d a t o r )   m e t h o d s . _ c l o s e P r o m p t ( f i e l d ) ;  
 	 	 	 }  
  
 	 	 	 i f   ( ! i s A j a x V a l i d a t o r )   {  
 	 	 	 	 f i e l d . t r i g g e r ( " j q v . f i e l d . r e s u l t " ,   [ f i e l d ,   o p t i o n s . i s E r r o r ,   p r o m p t T e x t ] ) ;  
 	 	 	 }  
  
 	 	 	 / *   R e c o r d   e r r o r   * /  
 	 	 	 v a r   e r r i n d e x   =   $ . i n A r r a y ( f i e l d [ 0 ] ,   o p t i o n s . I n v a l i d F i e l d s ) ;  
 	 	 	 i f   ( e r r i n d e x   = =   - 1 )   {  
 	 	 	 	 i f   ( o p t i o n s . i s E r r o r )  
 	 	 	 	 o p t i o n s . I n v a l i d F i e l d s . p u s h ( f i e l d [ 0 ] ) ;  
 	 	 	 }   e l s e   i f   ( ! o p t i o n s . i s E r r o r )   {  
 	 	 	 	 o p t i o n s . I n v a l i d F i e l d s . s p l i c e ( e r r i n d e x ,   1 ) ;  
 	 	 	 }  
  
 	 	 	 m e t h o d s . _ h a n d l e S t a t u s C s s C l a s s e s ( f i e l d ,   o p t i o n s ) ;  
  
 	 	 	 / *   r u n   c a l l b a c k   f u n c t i o n   f o r   e a c h   f i e l d   * /  
 	 	 	 i f   ( o p t i o n s . i s E r r o r   & &   o p t i o n s . o n F i e l d F a i l u r e )  
 	 	 	 	 o p t i o n s . o n F i e l d F a i l u r e ( f i e l d ) ;  
  
 	 	 	 i f   ( ! o p t i o n s . i s E r r o r   & &   o p t i o n s . o n F i e l d S u c c e s s )  
 	 	 	 	 o p t i o n s . o n F i e l d S u c c e s s ( f i e l d ) ;  
  
 	 	 	 r e t u r n   o p t i o n s . i s E r r o r ;  
 	 	 } ,  
 	 	 / * *  
 	 	 *   H a n d l i n g   c s s   c l a s s e s   o f   f i e l d s   i n d i c a t i n g   r e s u l t   o f   v a l i d a t i o n  
 	 	 *  
 	 	 *   @ p a r a m   { j q O b j e c t }  
 	 	 *                         f i e l d  
 	 	 *   @ p a r a m   { A r r a y [ S t r i n g ] }  
 	 	 *                         f i e l d ' s   v a l i d a t i o n   r u l e s  
 	 	 *   @ p r i v a t e  
 	 	 * /  
 	 	 _ h a n d l e S t a t u s C s s C l a s s e s :   f u n c t i o n ( f i e l d ,   o p t i o n s )   {  
 	 	 	 / *   r e m o v e   a l l   c l a s s e s   * /  
 	 	 	 i f ( o p t i o n s . a d d S u c c e s s C s s C l a s s T o F i e l d )  
 	 	 	 	 f i e l d . r e m o v e C l a s s ( o p t i o n s . a d d S u c c e s s C s s C l a s s T o F i e l d ) ;  
  
 	 	 	 i f ( o p t i o n s . a d d F a i l u r e C s s C l a s s T o F i e l d )  
 	 	 	 	 f i e l d . r e m o v e C l a s s ( o p t i o n s . a d d F a i l u r e C s s C l a s s T o F i e l d ) ;  
  
 	 	 	 / *   A d d   c l a s s e s   * /  
 	 	 	 i f   ( o p t i o n s . a d d S u c c e s s C s s C l a s s T o F i e l d   & &   ! o p t i o n s . i s E r r o r )  
 	 	 	 	 f i e l d . a d d C l a s s ( o p t i o n s . a d d S u c c e s s C s s C l a s s T o F i e l d ) ;  
  
 	 	 	 i f   ( o p t i o n s . a d d F a i l u r e C s s C l a s s T o F i e l d   & &   o p t i o n s . i s E r r o r )  
 	 	 	 	 f i e l d . a d d C l a s s ( o p t i o n s . a d d F a i l u r e C s s C l a s s T o F i e l d ) ;  
 	 	 } ,  
  
 	 	   / * * * * * * * * * * * * * * * * * * * *  
 	 	     *   _ g e t E r r o r M e s s a g e  
 	 	     *  
 	 	     *   @ p a r a m   f o r m  
 	 	     *   @ p a r a m   f i e l d  
 	 	     *   @ p a r a m   r u l e  
 	 	     *   @ p a r a m   r u l e s  
 	 	     *   @ p a r a m   i  
 	 	     *   @ p a r a m   o p t i o n s  
 	 	     *   @ p a r a m   o r i g i n a l V a l i d a t i o n M e t h o d  
 	 	     *   @ r e t u r n   { * }  
 	 	     *   @ p r i v a t e  
 	 	     * /  
 	 	   _ g e t E r r o r M e s s a g e : f u n c t i o n   ( f o r m ,   f i e l d ,   r u l e ,   r u l e s ,   i ,   o p t i o n s ,   o r i g i n a l V a l i d a t i o n M e t h o d )   {  
 	 	 	   / /   I f   w e   a r e   u s i n g   t h e   c u s t o n   v a l i d a t i o n   t y p e ,   b u i l d   t h e   i n d e x   f o r   t h e   r u l e .  
 	 	 	   / /   O t h e r w i s e   i f   w e   a r e   d o i n g   a   f u n c t i o n   c a l l ,   m a k e   t h e   c a l l   a n d   r e t u r n   t h e   o b j e c t  
 	 	 	   / /   t h a t   i s   p a s s e d   b a c k .  
 	   	 	   v a r   r u l e _ i n d e x   =   j Q u e r y . i n A r r a y ( r u l e ,   r u l e s ) ;  
 	 	 	   i f   ( r u l e   = = =   " c u s t o m "   | |   r u l e   = = =   " f u n c C a l l "   | |   r u l e   = = =   " f u n c C a l l R e q u i r e d " )   {  
 	 	 	 	   v a r   c u s t o m _ v a l i d a t i o n _ t y p e   =   r u l e s [ r u l e _ i n d e x   +   1 ] ;  
 	 	 	 	   r u l e   =   r u l e   +   " [ "   +   c u s t o m _ v a l i d a t i o n _ t y p e   +   " ] " ;  
 	 	 	 	   / /   D e l e t e   t h e   r u l e   f r o m   t h e   r u l e s   a r r a y   s o   t h a t   i t   d o e s n ' t   t r y   t o   c a l l   t h e  
 	 	 	         / /   s a m e   r u l e   o v e r   a g a i n  
 	 	 	         d e l e t e ( r u l e s [ r u l e _ i n d e x ] ) ;  
 	 	 	   }  
 	 	 	   / /   C h a n g e   t h e   r u l e   t o   t h e   c o m p o s i t e   r u l e ,   i f   i t   w a s   d i f f e r e n t   f r o m   t h e   o r i g i n a l  
 	 	 	   v a r   a l t e r e d R u l e   =   r u l e ;  
  
  
 	 	 	   v a r   e l e m e n t _ c l a s s e s   =   ( f i e l d . a t t r ( " d a t a - v a l i d a t i o n - e n g i n e " ) )   ?   f i e l d . a t t r ( " d a t a - v a l i d a t i o n - e n g i n e " )   :   f i e l d . a t t r ( " c l a s s " ) ;  
 	 	 	   v a r   e l e m e n t _ c l a s s e s _ a r r a y   =   e l e m e n t _ c l a s s e s . s p l i t ( "   " ) ;  
  
 	 	 	   / /   C a l l   t h e   o r i g i n a l   v a l i d a t i o n   m e t h o d .   I f   w e   a r e   d e a l i n g   w i t h   d a t e s   o r   c h e c k b o x e s ,   a l s o   p a s s   t h e   f o r m  
 	 	 	   v a r   e r r o r M s g ;  
 	 	 	   i f   ( r u l e   = =   " f u t u r e "   | |   r u l e   = =   " p a s t "     | |   r u l e   = =   " m a x C h e c k b o x "   | |   r u l e   = =   " m i n C h e c k b o x " )   {  
 	 	 	 	   e r r o r M s g   =   o r i g i n a l V a l i d a t i o n M e t h o d ( f o r m ,   f i e l d ,   r u l e s ,   i ,   o p t i o n s ) ;  
 	 	 	   }   e l s e   {  
 	 	 	 	   e r r o r M s g   =   o r i g i n a l V a l i d a t i o n M e t h o d ( f i e l d ,   r u l e s ,   i ,   o p t i o n s ) ;  
 	 	 	   }  
  
 	 	 	   / /   I f   t h e   o r i g i n a l   v a l i d a t i o n   m e t h o d   r e t u r n e d   a n   e r r o r   a n d   w e   h a v e   a   c u s t o m   e r r o r   m e s s a g e ,  
 	 	 	   / /   r e t u r n   t h e   c u s t o m   m e s s a g e   i n s t e a d .   O t h e r w i s e   r e t u r n   t h e   o r i g i n a l   e r r o r   m e s s a g e .  
 	 	 	   i f   ( e r r o r M s g   ! =   u n d e f i n e d )   {  
 	 	 	 	   v a r   c u s t o m _ m e s s a g e   =   m e t h o d s . _ g e t C u s t o m E r r o r M e s s a g e ( $ ( f i e l d ) ,   e l e m e n t _ c l a s s e s _ a r r a y ,   a l t e r e d R u l e ,   o p t i o n s ) ;  
 	 	 	 	   i f   ( c u s t o m _ m e s s a g e )   e r r o r M s g   =   c u s t o m _ m e s s a g e ;  
 	 	 	   }  
 	 	 	   r e t u r n   e r r o r M s g ;  
  
 	 	   } ,  
 	 	   _ g e t C u s t o m E r r o r M e s s a g e : f u n c t i o n   ( f i e l d ,   c l a s s e s ,   r u l e ,   o p t i o n s )   {  
 	 	 	 v a r   c u s t o m _ m e s s a g e   =   f a l s e ;  
 	 	 	 v a r   v a l i d i t y P r o p   =   / ^ c u s t o m \ [ . * \ ] $ / . t e s t ( r u l e )   ?   m e t h o d s . _ v a l i d i t y P r o p [ " c u s t o m " ]   :   m e t h o d s . _ v a l i d i t y P r o p [ r u l e ] ;  
 	 	 	   / /   I f   t h e r e   i s   a   v a l i d i t y P r o p   f o r   t h i s   r u l e ,   c h e c k   t o   s e e   i f   t h e   f i e l d   h a s   a n   a t t r i b u t e   f o r   i t  
 	 	 	 i f   ( v a l i d i t y P r o p   ! =   u n d e f i n e d )   {  
 	 	 	 	 c u s t o m _ m e s s a g e   =   f i e l d . a t t r ( " d a t a - e r r o r m e s s a g e - " + v a l i d i t y P r o p ) ;  
 	 	 	 	 / /   I f   t h e r e   w a s   a n   e r r o r   m e s s a g e   f o r   i t ,   r e t u r n   t h e   m e s s a g e  
 	 	 	 	 i f   ( c u s t o m _ m e s s a g e   ! =   u n d e f i n e d )  
 	 	 	 	 	 r e t u r n   c u s t o m _ m e s s a g e ;  
 	 	 	 }  
 	 	 	 c u s t o m _ m e s s a g e   =   f i e l d . a t t r ( " d a t a - e r r o r m e s s a g e " ) ;  
 	 	 	   / /   I f   t h e r e   i s   a n   i n l i n e   c u s t o m   e r r o r   m e s s a g e ,   r e t u r n   i t  
 	 	 	 i f   ( c u s t o m _ m e s s a g e   ! =   u n d e f i n e d )  
 	 	 	 	 r e t u r n   c u s t o m _ m e s s a g e ;  
 	 	 	 v a r   i d   =   ' # '   +   f i e l d . a t t r ( " i d " ) ;  
 	 	 	 / /   I f   w e   h a v e   c u s t o m   m e s s a g e s   f o r   t h e   e l e m e n t ' s   i d ,   g e t   t h e   m e s s a g e   f o r   t h e   r u l e   f r o m   t h e   i d .  
 	 	 	 / /   O t h e r w i s e ,   i f   w e   h a v e   c u s t o m   m e s s a g e s   f o r   t h e   e l e m e n t ' s   c l a s s e s ,   u s e   t h e   f i r s t   c l a s s   m e s s a g e   w e   f i n d   i n s t e a d .  
 	 	 	 i f   ( t y p e o f   o p t i o n s . c u s t o m _ e r r o r _ m e s s a g e s [ i d ]   ! =   " u n d e f i n e d "   & &  
 	 	 	 	 t y p e o f   o p t i o n s . c u s t o m _ e r r o r _ m e s s a g e s [ i d ] [ r u l e ]   ! =   " u n d e f i n e d "   )   {  
 	 	 	 	 	 	     c u s t o m _ m e s s a g e   =   o p t i o n s . c u s t o m _ e r r o r _ m e s s a g e s [ i d ] [ r u l e ] [ ' m e s s a g e ' ] ;  
 	 	 	 }   e l s e   i f   ( c l a s s e s . l e n g t h   >   0 )   {  
 	 	 	 	 f o r   ( v a r   i   =   0 ;   i   <   c l a s s e s . l e n g t h   & &   c l a s s e s . l e n g t h   >   0 ;   i + + )   {  
 	 	 	 	 	   v a r   e l e m e n t _ c l a s s   =   " . "   +   c l a s s e s [ i ] ;  
 	 	 	 	 	 i f   ( t y p e o f   o p t i o n s . c u s t o m _ e r r o r _ m e s s a g e s [ e l e m e n t _ c l a s s ]   ! =   " u n d e f i n e d "   & &  
 	 	 	 	 	 	 t y p e o f   o p t i o n s . c u s t o m _ e r r o r _ m e s s a g e s [ e l e m e n t _ c l a s s ] [ r u l e ]   ! =   " u n d e f i n e d " )   {  
 	 	 	 	 	 	 	 c u s t o m _ m e s s a g e   =   o p t i o n s . c u s t o m _ e r r o r _ m e s s a g e s [ e l e m e n t _ c l a s s ] [ r u l e ] [ ' m e s s a g e ' ] ;  
 	 	 	 	 	 	 	 b r e a k ;  
 	 	 	 	 	 }  
 	 	 	 	 }  
 	 	 	 }  
 	 	 	 i f   ( ! c u s t o m _ m e s s a g e   & &  
 	 	 	 	 t y p e o f   o p t i o n s . c u s t o m _ e r r o r _ m e s s a g e s [ r u l e ]   ! =   " u n d e f i n e d "   & &  
 	 	 	 	 t y p e o f   o p t i o n s . c u s t o m _ e r r o r _ m e s s a g e s [ r u l e ] [ ' m e s s a g e ' ]   ! =   " u n d e f i n e d " ) {  
 	 	 	 	 	   c u s t o m _ m e s s a g e   =   o p t i o n s . c u s t o m _ e r r o r _ m e s s a g e s [ r u l e ] [ ' m e s s a g e ' ] ;  
 	 	 	   }  
 	 	 	   r e t u r n   c u s t o m _ m e s s a g e ;  
 	 	   } ,  
 	 	   _ v a l i d i t y P r o p :   {  
 	 	 	   " r e q u i r e d " :   " v a l u e - m i s s i n g " ,  
 	 	 	   " c u s t o m " :   " c u s t o m - e r r o r " ,  
 	 	 	   " g r o u p R e q u i r e d " :   " v a l u e - m i s s i n g " ,  
 	 	 	   " a j a x " :   " c u s t o m - e r r o r " ,  
 	 	 	   " m i n S i z e " :   " r a n g e - u n d e r f l o w " ,  
 	 	 	   " m a x S i z e " :   " r a n g e - o v e r f l o w " ,  
 	 	 	   " m i n " :   " r a n g e - u n d e r f l o w " ,  
 	 	 	   " m a x " :   " r a n g e - o v e r f l o w " ,  
 	 	 	   " p a s t " :   " t y p e - m i s m a t c h " ,  
 	 	 	   " f u t u r e " :   " t y p e - m i s m a t c h " ,  
 	 	 	   " d a t e R a n g e " :   " t y p e - m i s m a t c h " ,  
 	 	 	   " d a t e T i m e R a n g e " :   " t y p e - m i s m a t c h " ,  
 	 	 	   " m a x C h e c k b o x " :   " r a n g e - o v e r f l o w " ,  
 	 	 	   " m i n C h e c k b o x " :   " r a n g e - u n d e r f l o w " ,  
 	 	 	   " e q u a l s " :   " p a t t e r n - m i s m a t c h " ,  
 	 	 	   " f u n c C a l l " :   " c u s t o m - e r r o r " ,  
 	 	 	   " f u n c C a l l R e q u i r e d " :   " c u s t o m - e r r o r " ,  
 	 	 	   " c r e d i t C a r d " :   " p a t t e r n - m i s m a t c h " ,  
 	 	 	   " c o n d R e q u i r e d " :   " v a l u e - m i s s i n g "  
 	 	   } ,  
 	 	 / * *  
 	 	 *   R e q u i r e d   v a l i d a t i o n  
 	 	 *  
 	 	 *   @ p a r a m   { j q O b j e c t }   f i e l d  
 	 	 *   @ p a r a m   { A r r a y [ S t r i n g ] }   r u l e s  
 	 	 *   @ p a r a m   { i n t }   i   r u l e s   i n d e x  
 	 	 *   @ p a r a m   { M a p }  
 	 	 *                         u s e r   o p t i o n s  
 	 	 *   @ p a r a m   { b o o l }   c o n d R e q u i r e d   f l a g   w h e n   m e t h o d   i s   u s e d   f o r   i n t e r n a l   p u r p o s e   i n   c o n d R e q u i r e d   c h e c k  
 	 	 *   @ r e t u r n   a n   e r r o r   s t r i n g   i f   v a l i d a t i o n   f a i l e d  
 	 	 * /  
 	 	 _ r e q u i r e d :   f u n c t i o n ( f i e l d ,   r u l e s ,   i ,   o p t i o n s ,   c o n d R e q u i r e d )   {  
 	 	 	 s w i t c h   ( f i e l d . p r o p ( " t y p e " ) )   {  
 	 	 	 	 c a s e   " r a d i o " :  
 	 	 	 	 c a s e   " c h e c k b o x " :  
 	 	 	 	 	 / /   n e w   v a l i d a t i o n   s t y l e   t o   o n l y   c h e c k   d e p e n d e n t   f i e l d  
 	 	 	 	 	 i f   ( c o n d R e q u i r e d )   {  
 	 	 	 	 	 	 i f   ( ! f i e l d . p r o p ( ' c h e c k e d ' ) )   {  
 	 	 	 	 	 	 	 r e t u r n   o p t i o n s . a l l r u l e s [ r u l e s [ i ] ] . a l e r t T e x t C h e c k b o x M u l t i p l e ;  
 	 	 	 	 	 	 }  
 	 	 	 	 	 	 b r e a k ;  
 	 	 	 	 	 }  
 	 	 	 	 	 / /   o l d   v a l i d a t i o n   s t y l e  
 	 	 	 	 	 v a r   f o r m   =   f i e l d . c l o s e s t ( " f o r m ,   . v a l i d a t i o n E n g i n e C o n t a i n e r " ) ;  
 	 	 	 	 	 v a r   n a m e   =   f i e l d . a t t r ( " n a m e " ) ;  
 	 	 	 	 	 i f   ( f o r m . f i n d ( " i n p u t [ n a m e = ' "   +   n a m e   +   " ' ] : c h e c k e d " ) . l e n g t h   = =   0 )   {  
 	 	 	 	 	 	 i f   ( f o r m . f i n d ( " i n p u t [ n a m e = ' "   +   n a m e   +   " ' ] : v i s i b l e " ) . l e n g t h   = =   1 )  
 	 	 	 	 	 	 	 r e t u r n   o p t i o n s . a l l r u l e s [ r u l e s [ i ] ] . a l e r t T e x t C h e c k b o x e ;  
 	 	 	 	 	 	 e l s e  
 	 	 	 	 	 	 	 r e t u r n   o p t i o n s . a l l r u l e s [ r u l e s [ i ] ] . a l e r t T e x t C h e c k b o x M u l t i p l e ;  
 	 	 	 	 	 }  
 	 	 	 	 	 b r e a k ;  
 	 	 	 	 c a s e   " t e x t " :  
 	 	 	 	 c a s e   " p a s s w o r d " :  
 	 	 	 	 c a s e   " t e x t a r e a " :  
 	 	 	 	 c a s e   " f i l e " :  
 	 	 	 	 c a s e   " s e l e c t - o n e " :  
 	 	 	 	 c a s e   " s e l e c t - m u l t i p l e " :  
 	 	 	 	 d e f a u l t :  
 	 	 	 	 	 v a r   f i e l d _ v a l             =   $ . t r i m (   f i e l d . v a l ( )                                                               ) ;  
 	 	 	 	 	 v a r   d v _ p l a c e h o l d e r   =   $ . t r i m (   f i e l d . a t t r ( " d a t a - v a l i d a t i o n - p l a c e h o l d e r " )   ) ;  
 	 	 	 	 	 v a r   p l a c e h o l d e r         =   $ . t r i m (   f i e l d . a t t r ( " p l a c e h o l d e r " )                                   ) ;  
 	 	 	 	 	 i f   (  
 	 	 	 	 	 	       (   ! f i e l d _ v a l                                                                         )  
 	 	 	 	 	 	 | |   (   d v _ p l a c e h o l d e r   & &   f i e l d _ v a l   = =   d v _ p l a c e h o l d e r   )  
 	 	 	 	 	 	 | |   (   p l a c e h o l d e r         & &   f i e l d _ v a l   = =   p l a c e h o l d e r         )  
 	 	 	 	 	 )   {  
 	 	 	 	 	 	 r e t u r n   o p t i o n s . a l l r u l e s [ r u l e s [ i ] ] . a l e r t T e x t ;  
 	 	 	 	 	 }  
 	 	 	 	 	 b r e a k ;  
 	 	 	 }  
 	 	 } ,  
 	 	 / * *  
 	 	 *   V a l i d a t e   t h a t   1   f r o m   t h e   g r o u p   f i e l d   i s   r e q u i r e d  
 	 	 *  
 	 	 *   @ p a r a m   { j q O b j e c t }   f i e l d  
 	 	 *   @ p a r a m   { A r r a y [ S t r i n g ] }   r u l e s  
 	 	 *   @ p a r a m   { i n t }   i   r u l e s   i n d e x  
 	 	 *   @ p a r a m   { M a p }  
 	 	 *                         u s e r   o p t i o n s  
 	 	 *   @ r e t u r n   a n   e r r o r   s t r i n g   i f   v a l i d a t i o n   f a i l e d  
 	 	 * /  
 	 	 _ g r o u p R e q u i r e d :   f u n c t i o n ( f i e l d ,   r u l e s ,   i ,   o p t i o n s )   {  
 	 	 	 v a r   c l a s s G r o u p   =   " [ " + o p t i o n s . v a l i d a t e A t t r i b u t e + " * = "   + r u l e s [ i   +   1 ]   + " ] " ;  
 	 	 	 v a r   i s V a l i d   =   f a l s e ;  
 	 	 	 / /   C h e c k   a l l   f i e l d s   f r o m   t h e   g r o u p  
 	 	 	 f i e l d . c l o s e s t ( " f o r m ,   . v a l i d a t i o n E n g i n e C o n t a i n e r " ) . f i n d ( c l a s s G r o u p ) . e a c h ( f u n c t i o n ( ) {  
 	 	 	 	 i f ( ! m e t h o d s . _ r e q u i r e d ( $ ( t h i s ) ,   r u l e s ,   i ,   o p t i o n s ) ) {  
 	 	 	 	 	 i s V a l i d   =   t r u e ;  
 	 	 	 	 	 r e t u r n   f a l s e ;  
 	 	 	 	 }  
 	 	 	 } ) ;  
  
 	 	 	 i f ( ! i s V a l i d )   {  
 	 	     r e t u r n   o p t i o n s . a l l r u l e s [ r u l e s [ i ] ] . a l e r t T e x t ;  
 	 	 }  
 	 	 } ,  
 	 	 / * *  
 	 	 *   V a l i d a t e   r u l e s  
 	 	 *  
 	 	 *   @ p a r a m   { j q O b j e c t }   f i e l d  
 	 	 *   @ p a r a m   { A r r a y [ S t r i n g ] }   r u l e s  
 	 	 *   @ p a r a m   { i n t }   i   r u l e s   i n d e x  
 	 	 *   @ p a r a m   { M a p }  
 	 	 *                         u s e r   o p t i o n s  
 	 	 *   @ r e t u r n   a n   e r r o r   s t r i n g   i f   v a l i d a t i o n   f a i l e d  
 	 	 * /  
 	 	 _ c u s t o m :   f u n c t i o n ( f i e l d ,   r u l e s ,   i ,   o p t i o n s )   {  
 	 	 	 v a r   c u s t o m R u l e   =   r u l e s [ i   +   1 ] ;  
 	 	 	 v a r   r u l e   =   o p t i o n s . a l l r u l e s [ c u s t o m R u l e ] ;  
 	 	 	 v a r   f n ;  
 	 	 	 i f ( ! r u l e )   {  
 	 	 	 	 a l e r t ( " j q v : c u s t o m   r u l e   n o t   f o u n d   -   " + c u s t o m R u l e ) ;  
 	 	 	 	 r e t u r n ;  
 	 	 	 }  
  
 	 	 	 i f ( r u l e [ " r e g e x " ] )   {  
 	 	 	 	   v a r   e x = r u l e . r e g e x ;  
 	 	 	 	 	 i f ( ! e x )   {  
 	 	 	 	 	 	 a l e r t ( " j q v : c u s t o m   r e g e x   n o t   f o u n d   -   " + c u s t o m R u l e ) ;  
 	 	 	 	 	 	 r e t u r n ;  
 	 	 	 	 	 }  
 	 	 	 	 	 v a r   p a t t e r n   =   n e w   R e g E x p ( e x ) ;  
  
 	 	 	 	 	 i f   ( ! p a t t e r n . t e s t ( f i e l d . v a l ( ) ) )   r e t u r n   o p t i o n s . a l l r u l e s [ c u s t o m R u l e ] . a l e r t T e x t ;  
  
 	 	 	 }   e l s e   i f ( r u l e [ " f u n c " ] )   {  
 	 	 	 	 f n   =   r u l e [ " f u n c " ] ;  
  
 	 	 	 	 i f   ( t y p e o f ( f n )   ! = =   " f u n c t i o n " )   {  
 	 	 	 	 	 a l e r t ( " j q v : c u s t o m   p a r a m e t e r   ' f u n c t i o n '   i s   n o   f u n c t i o n   -   " + c u s t o m R u l e ) ;  
 	 	 	 	 	 	 r e t u r n ;  
 	 	 	 	 }  
  
 	 	 	 	 i f   ( ! f n ( f i e l d ,   r u l e s ,   i ,   o p t i o n s ) )  
 	 	 	 	 	 r e t u r n   o p t i o n s . a l l r u l e s [ c u s t o m R u l e ] . a l e r t T e x t ;  
 	 	 	 }   e l s e   {  
 	 	 	 	 a l e r t ( " j q v : c u s t o m   t y p e   n o t   a l l o w e d   " + c u s t o m R u l e ) ;  
 	 	 	 	 	 r e t u r n ;  
 	 	 	 }  
 	 	 } ,  
 	 	 / * *  
 	 	 *   V a l i d a t e   c u s t o m   f u n c t i o n   o u t s i d e   o f   t h e   e n g i n e   s c o p e  
 	 	 *  
 	 	 *   @ p a r a m   { j q O b j e c t }   f i e l d  
 	 	 *   @ p a r a m   { A r r a y [ S t r i n g ] }   r u l e s  
 	 	 *   @ p a r a m   { i n t }   i   r u l e s   i n d e x  
 	 	 *   @ p a r a m   { M a p }  
 	 	 *                         u s e r   o p t i o n s  
 	 	 *   @ r e t u r n   a n   e r r o r   s t r i n g   i f   v a l i d a t i o n   f a i l e d  
 	 	 * /  
 	 	 _ f u n c C a l l :   f u n c t i o n ( f i e l d ,   r u l e s ,   i ,   o p t i o n s )   {  
 	 	 	 v a r   f u n c t i o n N a m e   =   r u l e s [ i   +   1 ] ;  
 	 	 	 v a r   f n ;  
 	 	 	 i f ( f u n c t i o n N a m e . i n d e x O f ( ' . ' )   > - 1 )  
 	 	 	 {  
 	 	 	 	 v a r   n a m e s p a c e s   =   f u n c t i o n N a m e . s p l i t ( ' . ' ) ;  
 	 	 	 	 v a r   s c o p e   =   w i n d o w ;  
 	 	 	 	 w h i l e ( n a m e s p a c e s . l e n g t h )  
 	 	 	 	 {  
 	 	 	 	 	 s c o p e   =   s c o p e [ n a m e s p a c e s . s h i f t ( ) ] ;  
 	 	 	 	 }  
 	 	 	 	 f n   =   s c o p e ;  
 	 	 	 }  
 	 	 	 e l s e  
 	 	 	 	 f n   =   w i n d o w [ f u n c t i o n N a m e ]   | |   o p t i o n s . c u s t o m F u n c t i o n s [ f u n c t i o n N a m e ] ;  
 	 	 	 i f   ( t y p e o f ( f n )   = =   ' f u n c t i o n ' )  
 	 	 	 	 r e t u r n   f n ( f i e l d ,   r u l e s ,   i ,   o p t i o n s ) ;  
  
 	 	 } ,  
 	 	 _ f u n c C a l l R e q u i r e d :   f u n c t i o n ( f i e l d ,   r u l e s ,   i ,   o p t i o n s )   {  
 	 	 	 r e t u r n   m e t h o d s . _ f u n c C a l l ( f i e l d , r u l e s , i , o p t i o n s ) ;  
 	 	 } ,  
 	 	 / * *  
 	 	 *   F i e l d   m a t c h  
 	 	 *  
 	 	 *   @ p a r a m   { j q O b j e c t }   f i e l d  
 	 	 *   @ p a r a m   { A r r a y [ S t r i n g ] }   r u l e s  
 	 	 *   @ p a r a m   { i n t }   i   r u l e s   i n d e x  
 	 	 *   @ p a r a m   { M a p }  
 	 	 *                         u s e r   o p t i o n s  
 	 	 *   @ r e t u r n   a n   e r r o r   s t r i n g   i f   v a l i d a t i o n   f a i l e d  
 	 	 * /  
 	 	 _ e q u a l s :   f u n c t i o n ( f i e l d ,   r u l e s ,   i ,   o p t i o n s )   {  
 	 	 	 v a r   e q u a l s F i e l d   =   r u l e s [ i   +   1 ] ;  
  
 	 	 	 i f   ( f i e l d . v a l ( )   ! =   $ ( " # "   +   e q u a l s F i e l d ) . v a l ( ) )  
 	 	 	 	 r e t u r n   o p t i o n s . a l l r u l e s . e q u a l s . a l e r t T e x t ;  
 	 	 } ,  
 	 	 / * *  
 	 	 *   C h e c k   t h e   m a x i m u m   s i z e   ( i n   c h a r a c t e r s )  
 	 	 *  
 	 	 *   @ p a r a m   { j q O b j e c t }   f i e l d  
 	 	 *   @ p a r a m   { A r r a y [ S t r i n g ] }   r u l e s  
 	 	 *   @ p a r a m   { i n t }   i   r u l e s   i n d e x  
 	 	 *   @ p a r a m   { M a p }  
 	 	 *                         u s e r   o p t i o n s  
 	 	 *   @ r e t u r n   a n   e r r o r   s t r i n g   i f   v a l i d a t i o n   f a i l e d  
 	 	 * /  
 	 	 _ m a x S i z e :   f u n c t i o n ( f i e l d ,   r u l e s ,   i ,   o p t i o n s )   {  
 	 	 	 v a r   m a x   =   r u l e s [ i   +   1 ] ;  
 	 	 	 v a r   l e n   =   f i e l d . v a l ( ) . l e n g t h ;  
  
 	 	 	 i f   ( l e n   >   m a x )   {  
 	 	 	 	 v a r   r u l e   =   o p t i o n s . a l l r u l e s . m a x S i z e ;  
 	 	 	 	 r e t u r n   r u l e . a l e r t T e x t   +   m a x   +   r u l e . a l e r t T e x t 2 ;  
 	 	 	 }  
 	 	 } ,  
 	 	 / * *  
 	 	 *   C h e c k   t h e   m i n i m u m   s i z e   ( i n   c h a r a c t e r s )  
 	 	 *  
 	 	 *   @ p a r a m   { j q O b j e c t }   f i e l d  
 	 	 *   @ p a r a m   { A r r a y [ S t r i n g ] }   r u l e s  
 	 	 *   @ p a r a m   { i n t }   i   r u l e s   i n d e x  
 	 	 *   @ p a r a m   { M a p }  
 	 	 *                         u s e r   o p t i o n s  
 	 	 *   @ r e t u r n   a n   e r r o r   s t r i n g   i f   v a l i d a t i o n   f a i l e d  
 	 	 * /  
 	 	 _ m i n S i z e :   f u n c t i o n ( f i e l d ,   r u l e s ,   i ,   o p t i o n s )   {  
 	 	 	 v a r   m i n   =   r u l e s [ i   +   1 ] ;  
 	 	 	 v a r   l e n   =   f i e l d . v a l ( ) . l e n g t h ;  
  
 	 	 	 i f   ( l e n   <   m i n )   {  
 	 	 	 	 v a r   r u l e   =   o p t i o n s . a l l r u l e s . m i n S i z e ;  
 	 	 	 	 r e t u r n   r u l e . a l e r t T e x t   +   m i n   +   r u l e . a l e r t T e x t 2 ;  
 	 	 	 }  
 	 	 } ,  
 	 	 / * *  
 	 	 *   C h e c k   n u m b e r   m i n i m u m   v a l u e  
 	 	 *  
 	 	 *   @ p a r a m   { j q O b j e c t }   f i e l d  
 	 	 *   @ p a r a m   { A r r a y [ S t r i n g ] }   r u l e s  
 	 	 *   @ p a r a m   { i n t }   i   r u l e s   i n d e x  
 	 	 *   @ p a r a m   { M a p }  
 	 	 *                         u s e r   o p t i o n s  
 	 	 *   @ r e t u r n   a n   e r r o r   s t r i n g   i f   v a l i d a t i o n   f a i l e d  
 	 	 * /  
 	 	 _ m i n :   f u n c t i o n ( f i e l d ,   r u l e s ,   i ,   o p t i o n s )   {  
 	 	 	 v a r   m i n   =   p a r s e F l o a t ( r u l e s [ i   +   1 ] ) ;  
 	 	 	 v a r   l e n   =   p a r s e F l o a t ( f i e l d . v a l ( ) ) ;  
  
 	 	 	 i f   ( l e n   <   m i n )   {  
 	 	 	 	 v a r   r u l e   =   o p t i o n s . a l l r u l e s . m i n ;  
 	 	 	 	 i f   ( r u l e . a l e r t T e x t 2 )   r e t u r n   r u l e . a l e r t T e x t   +   m i n   +   r u l e . a l e r t T e x t 2 ;  
 	 	 	 	 r e t u r n   r u l e . a l e r t T e x t   +   m i n ;  
 	 	 	 }  
 	 	 } ,  
 	 	 / * *  
 	 	 *   C h e c k   n u m b e r   m a x i m u m   v a l u e  
 	 	 *  
 	 	 *   @ p a r a m   { j q O b j e c t }   f i e l d  
 	 	 *   @ p a r a m   { A r r a y [ S t r i n g ] }   r u l e s  
 	 	 *   @ p a r a m   { i n t }   i   r u l e s   i n d e x  
 	 	 *   @ p a r a m   { M a p }  
 	 	 *                         u s e r   o p t i o n s  
 	 	 *   @ r e t u r n   a n   e r r o r   s t r i n g   i f   v a l i d a t i o n   f a i l e d  
 	 	 * /  
 	 	 _ m a x :   f u n c t i o n ( f i e l d ,   r u l e s ,   i ,   o p t i o n s )   {  
 	 	 	 v a r   m a x   =   p a r s e F l o a t ( r u l e s [ i   +   1 ] ) ;  
 	 	 	 v a r   l e n   =   p a r s e F l o a t ( f i e l d . v a l ( ) ) ;  
  
 	 	 	 i f   ( l e n   > m a x   )   {  
 	 	 	 	 v a r   r u l e   =   o p t i o n s . a l l r u l e s . m a x ;  
 	 	 	 	 i f   ( r u l e . a l e r t T e x t 2 )   r e t u r n   r u l e . a l e r t T e x t   +   m a x   +   r u l e . a l e r t T e x t 2 ;  
 	 	 	 	 / / o r e f a l o :   t o   r e v i e w ,   a l s o   d o   t h e   t r a n s l a t i o n s  
 	 	 	 	 r e t u r n   r u l e . a l e r t T e x t   +   m a x ;  
 	 	 	 }  
 	 	 } ,  
 	 	 / * *  
 	 	 *   C h e c k s   d a t e   i s   i n   t h e   p a s t  
 	 	 *  
 	 	 *   @ p a r a m   { j q O b j e c t }   f i e l d  
 	 	 *   @ p a r a m   { A r r a y [ S t r i n g ] }   r u l e s  
 	 	 *   @ p a r a m   { i n t }   i   r u l e s   i n d e x  
 	 	 *   @ p a r a m   { M a p }  
 	 	 *                         u s e r   o p t i o n s  
 	 	 *   @ r e t u r n   a n   e r r o r   s t r i n g   i f   v a l i d a t i o n   f a i l e d  
 	 	 * /  
 	 	 _ p a s t :   f u n c t i o n ( f o r m ,   f i e l d ,   r u l e s ,   i ,   o p t i o n s )   {  
  
 	 	 	 v a r   p = r u l e s [ i   +   1 ] ;  
 	 	 	 v a r   f i e l d A l t   =   $ ( f o r m . f i n d ( " * [ n a m e = ' "   +   p . r e p l a c e ( / ^ # + / ,   ' ' )   +   " ' ] " ) ) ;  
 	 	 	 v a r   p d a t e ;  
  
 	 	 	 i f   ( p . t o L o w e r C a s e ( )   = =   " n o w " )   {  
 	 	 	 	 p d a t e   =   n e w   D a t e ( ) ;  
 	 	 	 }   e l s e   i f   ( u n d e f i n e d   ! =   f i e l d A l t . v a l ( ) )   {  
 	 	 	 	 i f   ( f i e l d A l t . i s ( " : d i s a b l e d " ) )  
 	 	 	 	 	 r e t u r n ;  
 	 	 	 	 p d a t e   =   m e t h o d s . _ p a r s e D a t e ( f i e l d A l t . v a l ( ) ) ;  
 	 	 	 }   e l s e   {  
 	 	 	 	 p d a t e   =   m e t h o d s . _ p a r s e D a t e ( p ) ;  
 	 	 	 }  
 	 	 	 v a r   v d a t e   =   m e t h o d s . _ p a r s e D a t e ( f i e l d . v a l ( ) ) ;  
  
 	 	 	 i f   ( v d a t e   >   p d a t e   )   {  
 	 	 	 	 v a r   r u l e   =   o p t i o n s . a l l r u l e s . p a s t ;  
 	 	 	 	 i f   ( r u l e . a l e r t T e x t 2 )   r e t u r n   r u l e . a l e r t T e x t   +   m e t h o d s . _ d a t e T o S t r i n g ( p d a t e )   +   r u l e . a l e r t T e x t 2 ;  
 	 	 	 	 r e t u r n   r u l e . a l e r t T e x t   +   m e t h o d s . _ d a t e T o S t r i n g ( p d a t e ) ;  
 	 	 	 }  
 	 	 } ,  
 	 	 / * *  
 	 	 *   C h e c k s   d a t e   i s   i n   t h e   f u t u r e  
 	 	 *  
 	 	 *   @ p a r a m   { j q O b j e c t }   f i e l d  
 	 	 *   @ p a r a m   { A r r a y [ S t r i n g ] }   r u l e s  
 	 	 *   @ p a r a m   { i n t }   i   r u l e s   i n d e x  
 	 	 *   @ p a r a m   { M a p }  
 	 	 *                         u s e r   o p t i o n s  
 	 	 *   @ r e t u r n   a n   e r r o r   s t r i n g   i f   v a l i d a t i o n   f a i l e d  
 	 	 * /  
 	 	 _ f u t u r e :   f u n c t i o n ( f o r m ,   f i e l d ,   r u l e s ,   i ,   o p t i o n s )   {  
  
 	 	 	 v a r   p = r u l e s [ i   +   1 ] ;  
 	 	 	 v a r   f i e l d A l t   =   $ ( f o r m . f i n d ( " * [ n a m e = ' "   +   p . r e p l a c e ( / ^ # + / ,   ' ' )   +   " ' ] " ) ) ;  
 	 	 	 v a r   p d a t e ;  
  
 	 	 	 i f   ( p . t o L o w e r C a s e ( )   = =   " n o w " )   {  
 	 	 	 	 p d a t e   =   n e w   D a t e ( ) ;  
 	 	 	 }   e l s e   i f   ( u n d e f i n e d   ! =   f i e l d A l t . v a l ( ) )   {  
 	 	 	 	 i f   ( f i e l d A l t . i s ( " : d i s a b l e d " ) )  
 	 	 	 	 	 r e t u r n ;  
 	 	 	 	 p d a t e   =   m e t h o d s . _ p a r s e D a t e ( f i e l d A l t . v a l ( ) ) ;  
 	 	 	 }   e l s e   {  
 	 	 	 	 p d a t e   =   m e t h o d s . _ p a r s e D a t e ( p ) ;  
 	 	 	 }  
 	 	 	 v a r   v d a t e   =   m e t h o d s . _ p a r s e D a t e ( f i e l d . v a l ( ) ) ;  
  
 	 	 	 i f   ( v d a t e   <   p d a t e   )   {  
 	 	 	 	 v a r   r u l e   =   o p t i o n s . a l l r u l e s . f u t u r e ;  
 	 	 	 	 i f   ( r u l e . a l e r t T e x t 2 )  
 	 	 	 	 	 r e t u r n   r u l e . a l e r t T e x t   +   m e t h o d s . _ d a t e T o S t r i n g ( p d a t e )   +   r u l e . a l e r t T e x t 2 ;  
 	 	 	 	 r e t u r n   r u l e . a l e r t T e x t   +   m e t h o d s . _ d a t e T o S t r i n g ( p d a t e ) ;  
 	 	 	 }  
 	 	 } ,  
 	 	 / * *  
 	 	 *   C h e c k s   i f   v a l i d   d a t e  
 	 	 *  
 	 	 *   @ p a r a m   { s t r i n g }   d a t e   s t r i n g  
 	 	 *   @ r e t u r n   a   b o o l   b a s e d   o n   d e t e r m i n a t i o n   o f   v a l i d   d a t e  
 	 	 * /  
 	 	 _ i s D a t e :   f u n c t i o n   ( v a l u e )   {  
 	 	 	 v a r   d a t e R e g E x   =   n e w   R e g E x p ( / ^ \ d { 4 } [ \ / \ - ] ( 0 ? [ 1 - 9 ] | 1 [ 0 1 2 ] ) [ \ / \ - ] ( 0 ? [ 1 - 9 ] | [ 1 2 ] [ 0 - 9 ] | 3 [ 0 1 ] ) $ | ^ ( ? : ( ? : ( ? : 0 ? [ 1 3 5 7 8 ] | 1 [ 0 2 ] ) ( \ / | - ) 3 1 ) | ( ? : ( ? : 0 ? [ 1 , 3 - 9 ] | 1 [ 0 - 2 ] ) ( \ / | - ) ( ? : 2 9 | 3 0 ) ) ) ( \ / | - ) ( ? : [ 1 - 9 ] \ d \ d \ d | \ d [ 1 - 9 ] \ d \ d | \ d \ d [ 1 - 9 ] \ d | \ d \ d \ d [ 1 - 9 ] ) $ | ^ ( ? : ( ? : 0 ? [ 1 - 9 ] | 1 [ 0 - 2 ] ) ( \ / | - ) ( ? : 0 ? [ 1 - 9 ] | 1 \ d | 2 [ 0 - 8 ] ) ) ( \ / | - ) ( ? : [ 1 - 9 ] \ d \ d \ d | \ d [ 1 - 9 ] \ d \ d | \ d \ d [ 1 - 9 ] \ d | \ d \ d \ d [ 1 - 9 ] ) $ | ^ ( 0 ? 2 ( \ / | - ) 2 9 ) ( \ / | - ) ( ? : ( ? : 0 [ 4 8 ] 0 0 | [ 1 3 5 7 9 ] [ 2 6 ] 0 0 | [ 2 4 6 8 ] [ 0 4 8 ] 0 0 ) | ( ? : \ d \ d ) ? ( ? : 0 [ 4 8 ] | [ 2 4 6 8 ] [ 0 4 8 ] | [ 1 3 5 7 9 ] [ 2 6 ] ) ) $ / ) ;  
 	 	 	 r e t u r n   d a t e R e g E x . t e s t ( v a l u e ) ;  
 	 	 } ,  
 	 	 / * *  
 	 	 *   C h e c k s   i f   v a l i d   d a t e   t i m e  
 	 	 *  
 	 	 *   @ p a r a m   { s t r i n g }   d a t e   s t r i n g  
 	 	 *   @ r e t u r n   a   b o o l   b a s e d   o n   d e t e r m i n a t i o n   o f   v a l i d   d a t e   t i m e  
 	 	 * /  
 	 	 _ i s D a t e T i m e :   f u n c t i o n   ( v a l u e ) {  
 	 	 	 v a r   d a t e T i m e R e g E x   =   n e w   R e g E x p ( / ^ \ d { 4 } [ \ / \ - ] ( 0 ? [ 1 - 9 ] | 1 [ 0 1 2 ] ) [ \ / \ - ] ( 0 ? [ 1 - 9 ] | [ 1 2 ] [ 0 - 9 ] | 3 [ 0 1 ] ) \ s + ( 1 [ 0 1 2 ] | 0 ? [ 1 - 9 ] ) { 1 } : ( 0 ? [ 1 - 5 ] | [ 0 - 6 ] [ 0 - 9 ] ) { 1 } : ( 0 ? [ 0 - 6 ] | [ 0 - 6 ] [ 0 - 9 ] ) { 1 } \ s + ( a m | p m | A M | P M ) { 1 } $ | ^ ( ? : ( ? : ( ? : 0 ? [ 1 3 5 7 8 ] | 1 [ 0 2 ] ) ( \ / | - ) 3 1 ) | ( ? : ( ? : 0 ? [ 1 , 3 - 9 ] | 1 [ 0 - 2 ] ) ( \ / | - ) ( ? : 2 9 | 3 0 ) ) ) ( \ / | - ) ( ? : [ 1 - 9 ] \ d \ d \ d | \ d [ 1 - 9 ] \ d \ d | \ d \ d [ 1 - 9 ] \ d | \ d \ d \ d [ 1 - 9 ] ) $ | ^ ( ( 1 [ 0 1 2 ] | 0 ? [ 1 - 9 ] ) { 1 } \ / ( 0 ? [ 1 - 9 ] | [ 1 2 ] [ 0 - 9 ] | 3 [ 0 1 ] ) { 1 } \ / \ d { 2 , 4 } \ s + ( 1 [ 0 1 2 ] | 0 ? [ 1 - 9 ] ) { 1 } : ( 0 ? [ 1 - 5 ] | [ 0 - 6 ] [ 0 - 9 ] ) { 1 } : ( 0 ? [ 0 - 6 ] | [ 0 - 6 ] [ 0 - 9 ] ) { 1 } \ s + ( a m | p m | A M | P M ) { 1 } ) $ / ) ;  
 	 	 	 r e t u r n   d a t e T i m e R e g E x . t e s t ( v a l u e ) ;  
 	 	 } ,  
 	 	 / / C h e c k s   i f   t h e   s t a r t   d a t e   i s   b e f o r e   t h e   e n d   d a t e  
 	 	 / / r e t u r n s   t r u e   i f   e n d   i s   l a t e r   t h a n   s t a r t  
 	 	 _ d a t e C o m p a r e :   f u n c t i o n   ( s t a r t ,   e n d )   {  
 	 	 	 r e t u r n   ( n e w   D a t e ( s t a r t . t o S t r i n g ( ) )   <   n e w   D a t e ( e n d . t o S t r i n g ( ) ) ) ;  
 	 	 } ,  
 	 	 / * *  
 	 	 *   C h e c k s   d a t e   r a n g e  
 	 	 *  
 	 	 *   @ p a r a m   { j q O b j e c t }   f i r s t   f i e l d   n a m e  
 	 	 *   @ p a r a m   { j q O b j e c t }   s e c o n d   f i e l d   n a m e  
 	 	 *   @ r e t u r n   a n   e r r o r   s t r i n g   i f   v a l i d a t i o n   f a i l e d  
 	 	 * /  
 	 	 _ d a t e R a n g e :   f u n c t i o n   ( f i e l d ,   r u l e s ,   i ,   o p t i o n s )   {  
 	 	 	 / / a r e   n o t   b o t h   p o p u l a t e d  
 	 	 	 i f   ( ( ! o p t i o n s . f i r s t O f G r o u p [ 0 ] . v a l u e   & &   o p t i o n s . s e c o n d O f G r o u p [ 0 ] . v a l u e )   | |   ( o p t i o n s . f i r s t O f G r o u p [ 0 ] . v a l u e   & &   ! o p t i o n s . s e c o n d O f G r o u p [ 0 ] . v a l u e ) )   {  
 	 	 	 	 r e t u r n   o p t i o n s . a l l r u l e s [ r u l e s [ i ] ] . a l e r t T e x t   +   o p t i o n s . a l l r u l e s [ r u l e s [ i ] ] . a l e r t T e x t 2 ;  
 	 	 	 }  
  
 	 	 	 / / a r e   n o t   b o t h   d a t e s  
 	 	 	 i f   ( ! m e t h o d s . _ i s D a t e ( o p t i o n s . f i r s t O f G r o u p [ 0 ] . v a l u e )   | |   ! m e t h o d s . _ i s D a t e ( o p t i o n s . s e c o n d O f G r o u p [ 0 ] . v a l u e ) )   {  
 	 	 	 	 r e t u r n   o p t i o n s . a l l r u l e s [ r u l e s [ i ] ] . a l e r t T e x t   +   o p t i o n s . a l l r u l e s [ r u l e s [ i ] ] . a l e r t T e x t 2 ;  
 	 	 	 }  
  
 	 	 	 / / a r e   b o t h   d a t e s   b u t   r a n g e   i s   o f f  
 	 	 	 i f   ( ! m e t h o d s . _ d a t e C o m p a r e ( o p t i o n s . f i r s t O f G r o u p [ 0 ] . v a l u e ,   o p t i o n s . s e c o n d O f G r o u p [ 0 ] . v a l u e ) )   {  
 	 	 	 	 r e t u r n   o p t i o n s . a l l r u l e s [ r u l e s [ i ] ] . a l e r t T e x t   +   o p t i o n s . a l l r u l e s [ r u l e s [ i ] ] . a l e r t T e x t 2 ;  
 	 	 	 }  
 	 	 } ,  
 	 	 / * *  
 	 	 *   C h e c k s   d a t e   t i m e   r a n g e  
 	 	 *  
 	 	 *   @ p a r a m   { j q O b j e c t }   f i r s t   f i e l d   n a m e  
 	 	 *   @ p a r a m   { j q O b j e c t }   s e c o n d   f i e l d   n a m e  
 	 	 *   @ r e t u r n   a n   e r r o r   s t r i n g   i f   v a l i d a t i o n   f a i l e d  
 	 	 * /  
 	 	 _ d a t e T i m e R a n g e :   f u n c t i o n   ( f i e l d ,   r u l e s ,   i ,   o p t i o n s )   {  
 	 	 	 / / a r e   n o t   b o t h   p o p u l a t e d  
 	 	 	 i f   ( ( ! o p t i o n s . f i r s t O f G r o u p [ 0 ] . v a l u e   & &   o p t i o n s . s e c o n d O f G r o u p [ 0 ] . v a l u e )   | |   ( o p t i o n s . f i r s t O f G r o u p [ 0 ] . v a l u e   & &   ! o p t i o n s . s e c o n d O f G r o u p [ 0 ] . v a l u e ) )   {  
 	 	 	 	 r e t u r n   o p t i o n s . a l l r u l e s [ r u l e s [ i ] ] . a l e r t T e x t   +   o p t i o n s . a l l r u l e s [ r u l e s [ i ] ] . a l e r t T e x t 2 ;  
 	 	 	 }  
 	 	 	 / / a r e   n o t   b o t h   d a t e s  
 	 	 	 i f   ( ! m e t h o d s . _ i s D a t e T i m e ( o p t i o n s . f i r s t O f G r o u p [ 0 ] . v a l u e )   | |   ! m e t h o d s . _ i s D a t e T i m e ( o p t i o n s . s e c o n d O f G r o u p [ 0 ] . v a l u e ) )   {  
 	 	 	 	 r e t u r n   o p t i o n s . a l l r u l e s [ r u l e s [ i ] ] . a l e r t T e x t   +   o p t i o n s . a l l r u l e s [ r u l e s [ i ] ] . a l e r t T e x t 2 ;  
 	 	 	 }  
 	 	 	 / / a r e   b o t h   d a t e s   b u t   r a n g e   i s   o f f  
 	 	 	 i f   ( ! m e t h o d s . _ d a t e C o m p a r e ( o p t i o n s . f i r s t O f G r o u p [ 0 ] . v a l u e ,   o p t i o n s . s e c o n d O f G r o u p [ 0 ] . v a l u e ) )   {  
 	 	 	 	 r e t u r n   o p t i o n s . a l l r u l e s [ r u l e s [ i ] ] . a l e r t T e x t   +   o p t i o n s . a l l r u l e s [ r u l e s [ i ] ] . a l e r t T e x t 2 ;  
 	 	 	 }  
 	 	 } ,  
 	 	 / * *  
 	 	 *   M a x   n u m b e r   o f   c h e c k b o x   s e l e c t e d  
 	 	 *  
 	 	 *   @ p a r a m   { j q O b j e c t }   f i e l d  
 	 	 *   @ p a r a m   { A r r a y [ S t r i n g ] }   r u l e s  
 	 	 *   @ p a r a m   { i n t }   i   r u l e s   i n d e x  
 	 	 *   @ p a r a m   { M a p }  
 	 	 *                         u s e r   o p t i o n s  
 	 	 *   @ r e t u r n   a n   e r r o r   s t r i n g   i f   v a l i d a t i o n   f a i l e d  
 	 	 * /  
 	 	 _ m a x C h e c k b o x :   f u n c t i o n ( f o r m ,   f i e l d ,   r u l e s ,   i ,   o p t i o n s )   {  
  
 	 	 	 v a r   n b C h e c k   =   r u l e s [ i   +   1 ] ;  
 	 	 	 v a r   g r o u p n a m e   =   f i e l d . a t t r ( " n a m e " ) ;  
 	 	 	 v a r   g r o u p S i z e   =   f o r m . f i n d ( " i n p u t [ n a m e = ' "   +   g r o u p n a m e   +   " ' ] : c h e c k e d " ) . l e n g t h ;  
 	 	 	 i f   ( g r o u p S i z e   >   n b C h e c k )   {  
 	 	 	 	 o p t i o n s . s h o w A r r o w   =   f a l s e ;  
 	 	 	 	 i f   ( o p t i o n s . a l l r u l e s . m a x C h e c k b o x . a l e r t T e x t 2 )  
 	 	 	 	 	   r e t u r n   o p t i o n s . a l l r u l e s . m a x C h e c k b o x . a l e r t T e x t   +   "   "   +   n b C h e c k   +   "   "   +   o p t i o n s . a l l r u l e s . m a x C h e c k b o x . a l e r t T e x t 2 ;  
 	 	 	 	 r e t u r n   o p t i o n s . a l l r u l e s . m a x C h e c k b o x . a l e r t T e x t ;  
 	 	 	 }  
 	 	 } ,  
 	 	 / * *  
 	 	 *   M i n   n u m b e r   o f   c h e c k b o x   s e l e c t e d  
 	 	 *  
 	 	 *   @ p a r a m   { j q O b j e c t }   f i e l d  
 	 	 *   @ p a r a m   { A r r a y [ S t r i n g ] }   r u l e s  
 	 	 *   @ p a r a m   { i n t }   i   r u l e s   i n d e x  
 	 	 *   @ p a r a m   { M a p }  
 	 	 *                         u s e r   o p t i o n s  
 	 	 *   @ r e t u r n   a n   e r r o r   s t r i n g   i f   v a l i d a t i o n   f a i l e d  
 	 	 * /  
 	 	 _ m i n C h e c k b o x :   f u n c t i o n ( f o r m ,   f i e l d ,   r u l e s ,   i ,   o p t i o n s )   {  
  
 	 	 	 v a r   n b C h e c k   =   r u l e s [ i   +   1 ] ;  
 	 	 	 v a r   g r o u p n a m e   =   f i e l d . a t t r ( " n a m e " ) ;  
 	 	 	 v a r   g r o u p S i z e   =   f o r m . f i n d ( " i n p u t [ n a m e = ' "   +   g r o u p n a m e   +   " ' ] : c h e c k e d " ) . l e n g t h ;  
 	 	 	 i f   ( g r o u p S i z e   <   n b C h e c k )   {  
 	 	 	 	 o p t i o n s . s h o w A r r o w   =   f a l s e ;  
 	 	 	 	 r e t u r n   o p t i o n s . a l l r u l e s . m i n C h e c k b o x . a l e r t T e x t   +   "   "   +   n b C h e c k   +   "   "   +   o p t i o n s . a l l r u l e s . m i n C h e c k b o x . a l e r t T e x t 2 ;  
 	 	 	 }  
 	 	 } ,  
 	 	 / * *  
 	 	 *   C h e c k s   t h a t   i t   i s   a   v a l i d   c r e d i t   c a r d   n u m b e r   a c c o r d i n g   t o   t h e  
 	 	 *   L u h n   c h e c k s u m   a l g o r i t h m .  
 	 	 *  
 	 	 *   @ p a r a m   { j q O b j e c t }   f i e l d  
 	 	 *   @ p a r a m   { A r r a y [ S t r i n g ] }   r u l e s  
 	 	 *   @ p a r a m   { i n t }   i   r u l e s   i n d e x  
 	 	 *   @ p a r a m   { M a p }  
 	 	 *                         u s e r   o p t i o n s  
 	 	 *   @ r e t u r n   a n   e r r o r   s t r i n g   i f   v a l i d a t i o n   f a i l e d  
 	 	 * /  
 	 	 _ c r e d i t C a r d :   f u n c t i o n ( f i e l d ,   r u l e s ,   i ,   o p t i o n s )   {  
 	 	 	 / / s p a c e s   a n d   d a s h e s   m a y   b e   v a l i d   c h a r a c t e r s ,   b u t   m u s t   b e   s t r i p p e d   t o   c a l c u l a t e   t h e   c h e c k s u m .  
 	 	 	 v a r   v a l i d   =   f a l s e ,   c a r d N u m b e r   =   f i e l d . v a l ( ) . r e p l a c e ( /   + / g ,   ' ' ) . r e p l a c e ( / - + / g ,   ' ' ) ;  
  
 	 	 	 v a r   n u m D i g i t s   =   c a r d N u m b e r . l e n g t h ;  
 	 	 	 i f   ( n u m D i g i t s   > =   1 4   & &   n u m D i g i t s   < =   1 6   & &   p a r s e I n t ( c a r d N u m b e r )   >   0 )   {  
  
 	 	 	 	 v a r   s u m   =   0 ,   i   =   n u m D i g i t s   -   1 ,   p o s   =   1 ,   d i g i t ,   l u h n   =   n e w   S t r i n g ( ) ;  
 	 	 	 	 d o   {  
 	 	 	 	 	 d i g i t   =   p a r s e I n t ( c a r d N u m b e r . c h a r A t ( i ) ) ;  
 	 	 	 	 	 l u h n   + =   ( p o s + +   %   2   = =   0 )   ?   d i g i t   *   2   :   d i g i t ;  
 	 	 	 	 }   w h i l e   ( - - i   > =   0 )  
  
 	 	 	 	 f o r   ( i   =   0 ;   i   <   l u h n . l e n g t h ;   i + + )   {  
 	 	 	 	 	 s u m   + =   p a r s e I n t ( l u h n . c h a r A t ( i ) ) ;  
 	 	 	 	 }  
 	 	 	 	 v a l i d   =   s u m   %   1 0   = =   0 ;  
 	 	 	 }  
 	 	 	 i f   ( ! v a l i d )   r e t u r n   o p t i o n s . a l l r u l e s . c r e d i t C a r d . a l e r t T e x t ;  
 	 	 } ,  
 	 	 / * *  
 	 	 *   A j a x   f i e l d   v a l i d a t i o n  
 	 	 *  
 	 	 *   @ p a r a m   { j q O b j e c t }   f i e l d  
 	 	 *   @ p a r a m   { A r r a y [ S t r i n g ] }   r u l e s  
 	 	 *   @ p a r a m   { i n t }   i   r u l e s   i n d e x  
 	 	 *   @ p a r a m   { M a p }  
 	 	 *                         u s e r   o p t i o n s  
 	 	 *   @ r e t u r n   n o t h i n g !   t h e   a j a x   v a l i d a t o r   h a n d l e s   t h e   p r o m p t s   i t s e l f  
 	 	 * /  
 	 	   _ a j a x :   f u n c t i o n ( f i e l d ,   r u l e s ,   i ,   o p t i o n s )   {  
  
 	 	 	   v a r   e r r o r S e l e c t o r   =   r u l e s [ i   +   1 ] ;  
 	 	 	   v a r   r u l e   =   o p t i o n s . a l l r u l e s [ e r r o r S e l e c t o r ] ;  
 	 	 	   v a r   e x t r a D a t a   =   r u l e . e x t r a D a t a ;  
 	 	 	   v a r   e x t r a D a t a D y n a m i c   =   r u l e . e x t r a D a t a D y n a m i c ;  
 	 	 	   v a r   d a t a   =   {  
 	 	 	 	 " f i e l d I d "   :   f i e l d . a t t r ( " i d " ) ,  
 	 	 	 	 " f i e l d V a l u e "   :   f i e l d . v a l ( )  
 	 	 	   } ;  
  
 	 	 	   i f   ( t y p e o f   e x t r a D a t a   = = =   " o b j e c t " )   {  
 	 	 	 	 $ . e x t e n d ( d a t a ,   e x t r a D a t a ) ;  
 	 	 	   }   e l s e   i f   ( t y p e o f   e x t r a D a t a   = = =   " s t r i n g " )   {  
 	 	 	 	 v a r   t e m p D a t a   =   e x t r a D a t a . s p l i t ( " & " ) ;  
 	 	 	 	 f o r ( v a r   i   =   0 ;   i   <   t e m p D a t a . l e n g t h ;   i + + )   {  
 	 	 	 	 	 v a r   v a l u e s   =   t e m p D a t a [ i ] . s p l i t ( " = " ) ;  
 	 	 	 	 	 i f   ( v a l u e s [ 0 ]   & &   v a l u e s [ 0 ] )   {  
 	 	 	 	 	 	 d a t a [ v a l u e s [ 0 ] ]   =   v a l u e s [ 1 ] ;  
 	 	 	 	 	 }  
 	 	 	 	 }  
 	 	 	   }  
  
 	 	 	   i f   ( e x t r a D a t a D y n a m i c )   {  
 	 	 	 	   v a r   t m p D a t a   =   [ ] ;  
 	 	 	 	   v a r   d o m I d s   =   S t r i n g ( e x t r a D a t a D y n a m i c ) . s p l i t ( " , " ) ;  
 	 	 	 	   f o r   ( v a r   i   =   0 ;   i   <   d o m I d s . l e n g t h ;   i + + )   {  
 	 	 	 	 	   v a r   i d   =   d o m I d s [ i ] ;  
 	 	 	 	 	   i f   ( $ ( i d ) . l e n g t h )   {  
 	 	 	 	 	 	   v a r   i n p u t V a l u e   =   f i e l d . c l o s e s t ( " f o r m ,   . v a l i d a t i o n E n g i n e C o n t a i n e r " ) . f i n d ( i d ) . v a l ( ) ;  
 	 	 	 	 	 	   v a r   k e y V a l u e   =   i d . r e p l a c e ( ' # ' ,   ' ' )   +   ' = '   +   e s c a p e ( i n p u t V a l u e ) ;  
 	 	 	 	 	 	   d a t a [ i d . r e p l a c e ( ' # ' ,   ' ' ) ]   =   i n p u t V a l u e ;  
 	 	 	 	 	   }  
 	 	 	 	   }  
 	 	 	   }  
  
 	 	 	   / /   I f   a   f i e l d   c h a n g e   e v e n t   t r i g g e r e d   t h i s   w e   w a n t   t o   c l e a r   t h e   c a c h e   f o r   t h i s   I D  
 	 	 	   i f   ( o p t i o n s . e v e n t T r i g g e r   = =   " f i e l d " )   {  
 	 	 	 	 d e l e t e ( o p t i o n s . a j a x V a l i d C a c h e [ f i e l d . a t t r ( " i d " ) ] ) ;  
 	 	 	   }  
  
 	 	 	   / /   I f   t h e r e   i s   a n   e r r o r   o r   i f   t h e   t h e   f i e l d   i s   a l r e a d y   v a l i d a t e d ,   d o   n o t   r e - e x e c u t e   A J A X  
 	 	 	   i f   ( ! o p t i o n s . i s E r r o r   & &   ! m e t h o d s . _ c h e c k A j a x F i e l d S t a t u s ( f i e l d . a t t r ( " i d " ) ,   o p t i o n s ) )   {  
 	 	 	 	   $ . a j a x ( {  
 	 	 	 	 	   t y p e :   o p t i o n s . a j a x F o r m V a l i d a t i o n M e t h o d ,  
 	 	 	 	 	   u r l :   r u l e . u r l ,  
 	 	 	 	 	   c a c h e :   f a l s e ,  
 	 	 	 	 	   d a t a T y p e :   " j s o n " ,  
 	 	 	 	 	   d a t a :   d a t a ,  
 	 	 	 	 	   f i e l d :   f i e l d ,  
 	 	 	 	 	   r u l e :   r u l e ,  
 	 	 	 	 	   m e t h o d s :   m e t h o d s ,  
 	 	 	 	 	   o p t i o n s :   o p t i o n s ,  
 	 	 	 	 	   b e f o r e S e n d :   f u n c t i o n ( )   { } ,  
 	 	 	 	 	   e r r o r :   f u n c t i o n ( d a t a ,   t r a n s p o r t )   {  
 	 	 	 	 	 	 i f   ( o p t i o n s . o n F a i l u r e )   {  
 	 	 	 	 	 	 	 o p t i o n s . o n F a i l u r e ( d a t a ,   t r a n s p o r t ) ;  
 	 	 	 	 	 	 }   e l s e   {  
 	 	 	 	 	 	 	 m e t h o d s . _ a j a x E r r o r ( d a t a ,   t r a n s p o r t ) ;  
 	 	 	 	 	 	 }  
 	 	 	 	 	   } ,  
 	 	 	 	 	   s u c c e s s :   f u n c t i o n ( j s o n )   {  
  
 	 	 	 	 	 	   / /   a s y n c h r o n o u s l y   c a l l e d   o n   s u c c e s s ,   d a t a   i s   t h e   j s o n   a n s w e r   f r o m   t h e   s e r v e r  
 	 	 	 	 	 	   v a r   e r r o r F i e l d I d   =   j s o n [ 0 ] ;  
 	 	 	 	 	 	   / / v a r   e r r o r F i e l d   =   $ ( $ ( " # "   +   e r r o r F i e l d I d ) [ 0 ] ) ;  
 	 	 	 	 	 	   v a r   e r r o r F i e l d   =   $ ( " # " +   e r r o r F i e l d I d ) . e q ( 0 ) ;  
  
 	 	 	 	 	 	   / /   m a k e   s u r e   w e   f o u n d   t h e   e l e m e n t  
 	 	 	 	 	 	   i f   ( e r r o r F i e l d . l e n g t h   = =   1 )   {  
 	 	 	 	 	 	 	   v a r   s t a t u s   =   j s o n [ 1 ] ;  
 	 	 	 	 	 	 	   / /   r e a d   t h e   o p t i o n a l   m s g   f r o m   t h e   s e r v e r  
 	 	 	 	 	 	 	   v a r   m s g   =   j s o n [ 2 ] ;  
 	 	 	 	 	 	 	   i f   ( ! s t a t u s )   {  
 	 	 	 	 	 	 	 	   / /   H o u s t o n   w e   g o t   a   p r o b l e m   -   d i s p l a y   a n   r e d   p r o m p t  
 	 	 	 	 	 	 	 	   o p t i o n s . a j a x V a l i d C a c h e [ e r r o r F i e l d I d ]   =   f a l s e ;  
 	 	 	 	 	 	 	 	   o p t i o n s . i s E r r o r   =   t r u e ;  
  
 	 	 	 	 	 	 	 	   / /   r e s o l v e   t h e   m s g   p r o m p t  
 	 	 	 	 	 	 	 	   i f ( m s g )   {  
 	 	 	 	 	 	 	 	 	   i f   ( o p t i o n s . a l l r u l e s [ m s g ] )   {  
 	 	 	 	 	 	 	 	 	 	   v a r   t x t   =   o p t i o n s . a l l r u l e s [ m s g ] . a l e r t T e x t ;  
 	 	 	 	 	 	 	 	 	 	   i f   ( t x t )   {  
 	 	 	 	 	 	 	 	 	 	 	 m s g   =   t x t ;  
 	 	 	 	 	 	 	 }  
 	 	 	 	 	 	 	 	 	   }  
 	 	 	 	 	 	 	 	   }  
 	 	 	 	 	 	 	 	   e l s e  
 	 	 	 	 	 	 	 	 	 m s g   =   r u l e . a l e r t T e x t ;  
  
 	 	 	 	 	 	 	 	   i f   ( o p t i o n s . s h o w P r o m p t s )   m e t h o d s . _ s h o w P r o m p t ( e r r o r F i e l d ,   m s g ,   " " ,   t r u e ,   o p t i o n s ) ;  
 	 	 	 	 	 	 	   }   e l s e   {  
 	 	 	 	 	 	 	 	   o p t i o n s . a j a x V a l i d C a c h e [ e r r o r F i e l d I d ]   =   t r u e ;  
  
 	 	 	 	 	 	 	 	   / /   r e s o l v e s   t h e   m s g   p r o m p t  
 	 	 	 	 	 	 	 	   i f ( m s g )   {  
 	 	 	 	 	 	 	 	 	   i f   ( o p t i o n s . a l l r u l e s [ m s g ] )   {  
 	 	 	 	 	 	 	 	 	 	   v a r   t x t   =   o p t i o n s . a l l r u l e s [ m s g ] . a l e r t T e x t O k ;  
 	 	 	 	 	 	 	 	 	 	   i f   ( t x t )   {  
 	 	 	 	 	 	 	 	 	 	 	 m s g   =   t x t ;  
 	 	 	 	 	 	 	 }  
 	 	 	 	 	 	 	 	 	   }  
 	 	 	 	 	 	 	 	   }  
 	 	 	 	 	 	 	 	   e l s e  
 	 	 	 	 	 	 	 	   m s g   =   r u l e . a l e r t T e x t O k ;  
  
 	 	 	 	 	 	 	 	   i f   ( o p t i o n s . s h o w P r o m p t s )   {  
 	 	 	 	 	 	 	 	 	   / /   s e e   i f   w e   s h o u l d   d i s p l a y   a   g r e e n   p r o m p t  
 	 	 	 	 	 	 	 	 	   i f   ( m s g )  
 	 	 	 	 	 	 	 	 	 	 m e t h o d s . _ s h o w P r o m p t ( e r r o r F i e l d ,   m s g ,   " p a s s " ,   t r u e ,   o p t i o n s ) ;  
 	 	 	 	 	 	 	 	 	   e l s e  
 	 	 	 	 	 	 	 	 	 	 m e t h o d s . _ c l o s e P r o m p t ( e r r o r F i e l d ) ;  
 	 	 	 	 	 	 	 	 }  
  
 	 	 	 	 	 	 	 	   / /   I f   a   s u b m i t   f o r m   t r i g g e r e d   t h i s ,   w e   w a n t   t o   r e - s u b m i t   t h e   f o r m  
 	 	 	 	 	 	 	 	   i f   ( o p t i o n s . e v e n t T r i g g e r   = =   " s u b m i t " )  
 	 	 	 	 	 	 	 	 	 f i e l d . c l o s e s t ( " f o r m " ) . s u b m i t ( ) ;  
 	 	 	 	 	 	 	   }  
 	 	 	 	 	 	   }  
 	 	 	 	 	 	   e r r o r F i e l d . t r i g g e r ( " j q v . f i e l d . r e s u l t " ,   [ e r r o r F i e l d ,   o p t i o n s . i s E r r o r ,   m s g ] ) ;  
 	 	 	 	 	   }  
 	 	 	 	   } ) ;  
  
 	 	 	 	   r e t u r n   r u l e . a l e r t T e x t L o a d ;  
 	 	 	   }  
 	 	   } ,  
 	 	 / * *  
 	 	 *   C o m m o n   m e t h o d   t o   h a n d l e   a j a x   e r r o r s  
 	 	 *  
 	 	 *   @ p a r a m   { O b j e c t }   d a t a  
 	 	 *   @ p a r a m   { O b j e c t }   t r a n s p o r t  
 	 	 * /  
 	 	 _ a j a x E r r o r :   f u n c t i o n ( d a t a ,   t r a n s p o r t )   {  
 	 	 	 i f ( d a t a . s t a t u s   = =   0   & &   t r a n s p o r t   = =   n u l l )  
 	 	 	 	 a l e r t ( " T h e   p a g e   i s   n o t   s e r v e d   f r o m   a   s e r v e r !   a j a x   c a l l   f a i l e d " ) ;  
 	 	 	 e l s e   i f ( t y p e o f   c o n s o l e   ! =   " u n d e f i n e d " )  
 	 	 	 	 c o n s o l e . l o g ( " A j a x   e r r o r :   "   +   d a t a . s t a t u s   +   "   "   +   t r a n s p o r t ) ;  
 	 	 } ,  
 	 	 / * *  
 	 	 *   d a t e   - >   s t r i n g  
 	 	 *  
 	 	 *   @ p a r a m   { O b j e c t }   d a t e  
 	 	 * /  
 	 	 _ d a t e T o S t r i n g :   f u n c t i o n ( d a t e )   {  
 	 	 	 r e t u r n   d a t e . g e t F u l l Y e a r ( ) + " - " + ( d a t e . g e t M o n t h ( ) + 1 ) + " - " + d a t e . g e t D a t e ( ) ;  
 	 	 } ,  
 	 	 / * *  
 	 	 *   P a r s e s   a n   I S O   d a t e  
 	 	 *   @ p a r a m   { S t r i n g }   d  
 	 	 * /  
 	 	 _ p a r s e D a t e :   f u n c t i o n ( d )   {  
  
 	 	 	 v a r   d a t e P a r t s   =   d . s p l i t ( " - " ) ;  
 	 	 	 i f ( d a t e P a r t s = = d )  
 	 	 	 	 d a t e P a r t s   =   d . s p l i t ( " / " ) ;  
 	 	 	 i f ( d a t e P a r t s = = d )   {  
 	 	 	 	 d a t e P a r t s   =   d . s p l i t ( " . " ) ;  
 	 	 	 	 r e t u r n   n e w   D a t e ( d a t e P a r t s [ 2 ] ,   ( d a t e P a r t s [ 1 ]   -   1 ) ,   d a t e P a r t s [ 0 ] ) ;  
 	 	 	 }  
 	 	 	 r e t u r n   n e w   D a t e ( d a t e P a r t s [ 0 ] ,   ( d a t e P a r t s [ 1 ]   -   1 )   , d a t e P a r t s [ 2 ] ) ;  
 	 	 } ,  
 	 	 / * *  
 	 	 *   B u i l d s   o r   u p d a t e s   a   p r o m p t   w i t h   t h e   g i v e n   i n f o r m a t i o n  
 	 	 *  
 	 	 *   @ p a r a m   { j q O b j e c t }   f i e l d  
 	 	 *   @ p a r a m   { S t r i n g }   p r o m p t T e x t   h t m l   t e x t   t o   d i s p l a y   t y p e  
 	 	 *   @ p a r a m   { S t r i n g }   t y p e   t h e   t y p e   o f   b u b b l e :   ' p a s s '   ( g r e e n ) ,   ' l o a d '   ( b l a c k )   a n y t h i n g   e l s e   ( r e d )  
 	 	 *   @ p a r a m   { b o o l e a n }   a j a x e d   -   u s e   t o   m a r k   f i e l d s   t h a n   b e i n g   v a l i d a t e d   w i t h   a j a x  
 	 	 *   @ p a r a m   { M a p }   o p t i o n s   u s e r   o p t i o n s  
 	 	 * /  
 	 	   _ s h o w P r o m p t :   f u n c t i o n ( f i e l d ,   p r o m p t T e x t ,   t y p e ,   a j a x e d ,   o p t i o n s ,   a j a x f o r m )   {  
 	 	   	 / / C h e c k   i f   w e   n e e d   t o   a d j u s t   w h a t   e l e m e n t   t o   s h o w   t h e   p r o m p t   o n  
 	 	 	 i f ( f i e l d . d a t a ( ' j q v - p r o m p t - a t ' )   i n s t a n c e o f   j Q u e r y   ) {  
 	 	 	 	 f i e l d   =   f i e l d . d a t a ( ' j q v - p r o m p t - a t ' ) ;  
 	 	 	 }   e l s e   i f ( f i e l d . d a t a ( ' j q v - p r o m p t - a t ' ) )   {  
 	 	 	 	 f i e l d   =   $ ( f i e l d . d a t a ( ' j q v - p r o m p t - a t ' ) ) ;  
 	 	 	 }  
  
 	 	 	   v a r   p r o m p t   =   m e t h o d s . _ g e t P r o m p t ( f i e l d ) ;  
 	 	 	   / /   T h e   a j a x   s u b m i t   e r r o r s   a r e   n o t   s e e   h a s   a n   e r r o r   i n   t h e   f o r m ,  
 	 	 	   / /   W h e n   t h e   f o r m   e r r o r s   a r e   r e t u r n e d ,   t h e   e n g i n e   s e e   2   b u b b l e s ,   b u t   t h o s e   a r e   e b i n g   c l o s e d   b y   t h e   e n g i n e   a t   t h e   s a m e   t i m e  
 	 	 	   / /   B e c a u s e   n o   e r r o r   w a s   f o u n d   b e f o r   s u b m i t t i n g  
 	 	 	   i f ( a j a x f o r m )   p r o m p t   =   f a l s e ;  
 	 	 	   / /   C h e c k   t h a t   t h e r e   i s   i n d d e d   t e x t  
 	 	 	   i f ( $ . t r i m ( p r o m p t T e x t ) ) {  
 	 	 	 	   i f   ( p r o m p t )  
 	 	 	 	 	 m e t h o d s . _ u p d a t e P r o m p t ( f i e l d ,   p r o m p t ,   p r o m p t T e x t ,   t y p e ,   a j a x e d ,   o p t i o n s ) ;  
 	 	 	 	   e l s e  
 	 	 	 	 	 m e t h o d s . _ b u i l d P r o m p t ( f i e l d ,   p r o m p t T e x t ,   t y p e ,   a j a x e d ,   o p t i o n s ) ;  
 	 	 	 }  
 	 	   } ,  
 	 	 / * *  
 	 	 *   B u i l d s   a n d   s h a d e s   a   p r o m p t   f o r   t h e   g i v e n   f i e l d .  
 	 	 *  
 	 	 *   @ p a r a m   { j q O b j e c t }   f i e l d  
 	 	 *   @ p a r a m   { S t r i n g }   p r o m p t T e x t   h t m l   t e x t   t o   d i s p l a y   t y p e  
 	 	 *   @ p a r a m   { S t r i n g }   t y p e   t h e   t y p e   o f   b u b b l e :   ' p a s s '   ( g r e e n ) ,   ' l o a d '   ( b l a c k )   a n y t h i n g   e l s e   ( r e d )  
 	 	 *   @ p a r a m   { b o o l e a n }   a j a x e d   -   u s e   t o   m a r k   f i e l d s   t h a n   b e i n g   v a l i d a t e d   w i t h   a j a x  
 	 	 *   @ p a r a m   { M a p }   o p t i o n s   u s e r   o p t i o n s  
 	 	 * /  
 	 	 _ b u i l d P r o m p t :   f u n c t i o n ( f i e l d ,   p r o m p t T e x t ,   t y p e ,   a j a x e d ,   o p t i o n s )   {  
  
 	 	 	 / /   c r e a t e   t h e   p r o m p t  
 	 	 	 v a r   p r o m p t   =   $ ( ' < d i v > ' ) ;  
 	 	 	 p r o m p t . a d d C l a s s ( m e t h o d s . _ g e t C l a s s N a m e ( f i e l d . a t t r ( " i d " ) )   +   " f o r m E r r o r " ) ;  
 	 	 	 / /   a d d   a   c l a s s   n a m e   t o   i d e n t i f y   t h e   p a r e n t   f o r m   o f   t h e   p r o m p t  
 	 	 	 p r o m p t . a d d C l a s s ( " p a r e n t F o r m " + m e t h o d s . _ g e t C l a s s N a m e ( f i e l d . c l o s e s t ( ' f o r m ,   . v a l i d a t i o n E n g i n e C o n t a i n e r ' ) . a t t r ( " i d " ) ) ) ;  
 	 	 	 p r o m p t . a d d C l a s s ( " f o r m E r r o r " ) ;  
  
 	 	 	 s w i t c h   ( t y p e )   {  
 	 	 	 	 c a s e   " p a s s " :  
 	 	 	 	 	 p r o m p t . a d d C l a s s ( " g r e e n P o p u p " ) ;  
 	 	 	 	 	 b r e a k ;  
 	 	 	 	 c a s e   " l o a d " :  
 	 	 	 	 	 p r o m p t . a d d C l a s s ( " b l a c k P o p u p " ) ;  
 	 	 	 	 	 b r e a k ;  
 	 	 	 	 d e f a u l t :  
 	 	 	 	 	 / *   i t   h a s   e r r o r     * /  
 	 	 	 	 	 / / a l e r t ( " u n k n o w n   p o p u p   t y p e : " + t y p e ) ;  
 	 	 	 }  
 	 	 	 i f   ( a j a x e d )  
 	 	 	 	 p r o m p t . a d d C l a s s ( " a j a x e d " ) ;  
  
 	 	 	 / /   c r e a t e   t h e   p r o m p t   c o n t e n t  
 	 	 	 v a r   p r o m p t C o n t e n t   =   $ ( ' < d i v > ' ) . a d d C l a s s ( " f o r m E r r o r C o n t e n t " ) . h t m l ( p r o m p t T e x t ) . a p p e n d T o ( p r o m p t ) ;  
  
 	 	 	 / /   d e t e r m i n e   p o s i t i o n   t y p e  
 	 	 	 v a r   p o s i t i o n T y p e = f i e l d . d a t a ( " p r o m p t P o s i t i o n " )   | |   o p t i o n s . p r o m p t P o s i t i o n ;  
  
 	 	 	 / /   c r e a t e   t h e   c s s   a r r o w   p o i n t i n g   a t   t h e   f i e l d  
 	 	 	 / /   n o t e   t h a t   t h e r e   i s   n o   t r i a n g l e   o n   m a x - c h e c k b o x   a n d   r a d i o  
 	 	 	 i f   ( o p t i o n s . s h o w A r r o w )   {  
 	 	 	 	 v a r   a r r o w   =   $ ( ' < d i v > ' ) . a d d C l a s s ( " f o r m E r r o r A r r o w " ) ;  
  
 	 	 	 	 / / p r o m p t   p o s i t i o n i n g   a d j u s t m e n t   s u p p o r t .   U s a g e :   p o s i t i o n T y p e : X s h i f t , Y s h i f t   ( f o r   e x . :   b o t t o m L e f t : + 2 0   o r   b o t t o m L e f t : - 2 0 , + 1 0 )  
 	 	 	 	 i f   ( t y p e o f ( p o s i t i o n T y p e ) = = ' s t r i n g ' )  
 	 	 	 	 {  
 	 	 	 	 	 v a r   p o s = p o s i t i o n T y p e . i n d e x O f ( " : " ) ;  
 	 	 	 	 	 i f ( p o s ! = - 1 )  
 	 	 	 	 	 	 p o s i t i o n T y p e = p o s i t i o n T y p e . s u b s t r i n g ( 0 , p o s ) ;  
 	 	 	 	 }  
  
 	 	 	 	 s w i t c h   ( p o s i t i o n T y p e )   {  
 	 	 	 	 	 c a s e   " b o t t o m L e f t " :  
 	 	 	 	 	 c a s e   " b o t t o m R i g h t " :  
 	 	 	 	 	 	 p r o m p t . f i n d ( " . f o r m E r r o r C o n t e n t " ) . b e f o r e ( a r r o w ) ;  
 	 	 	 	 	 	 a r r o w . a d d C l a s s ( " f o r m E r r o r A r r o w B o t t o m " ) . h t m l ( ' < d i v   c l a s s = " l i n e 1 " > < ! - -   - - > < / d i v > < d i v   c l a s s = " l i n e 2 " > < ! - -   - - > < / d i v > < d i v   c l a s s = " l i n e 3 " > < ! - -   - - > < / d i v > < d i v   c l a s s = " l i n e 4 " > < ! - -   - - > < / d i v > < d i v   c l a s s = " l i n e 5 " > < ! - -   - - > < / d i v > < d i v   c l a s s = " l i n e 6 " > < ! - -   - - > < / d i v > < d i v   c l a s s = " l i n e 7 " > < ! - -   - - > < / d i v > < d i v   c l a s s = " l i n e 8 " > < ! - -   - - > < / d i v > < d i v   c l a s s = " l i n e 9 " > < ! - -   - - > < / d i v > < d i v   c l a s s = " l i n e 1 0 " > < ! - -   - - > < / d i v > ' ) ;  
 	 	 	 	 	 	 b r e a k ;  
 	 	 	 	 	 c a s e   " t o p L e f t " :  
 	 	 	 	 	 c a s e   " t o p R i g h t " :  
 	 	 	 	 	 	 a r r o w . h t m l ( ' < d i v   c l a s s = " l i n e 1 0 " > < ! - -   - - > < / d i v > < d i v   c l a s s = " l i n e 9 " > < ! - -   - - > < / d i v > < d i v   c l a s s = " l i n e 8 " > < ! - -   - - > < / d i v > < d i v   c l a s s = " l i n e 7 " > < ! - -   - - > < / d i v > < d i v   c l a s s = " l i n e 6 " > < ! - -   - - > < / d i v > < d i v   c l a s s = " l i n e 5 " > < ! - -   - - > < / d i v > < d i v   c l a s s = " l i n e 4 " > < ! - -   - - > < / d i v > < d i v   c l a s s = " l i n e 3 " > < ! - -   - - > < / d i v > < d i v   c l a s s = " l i n e 2 " > < ! - -   - - > < / d i v > < d i v   c l a s s = " l i n e 1 " > < ! - -   - - > < / d i v > ' ) ;  
 	 	 	 	 	 	 p r o m p t . a p p e n d ( a r r o w ) ;  
 	 	 	 	 	 	 b r e a k ;  
 	 	 	 	 }  
 	 	 	 }  
 	 	 	 / /   A d d   c u s t o m   p r o m p t   c l a s s  
 	 	 	 i f   ( o p t i o n s . a d d P r o m p t C l a s s )  
 	 	 	 	 p r o m p t . a d d C l a s s ( o p t i o n s . a d d P r o m p t C l a s s ) ;  
  
                         / /   A d d   c u s t o m   p r o m p t   c l a s s   d e f i n e d   i n   e l e m e n t  
                         v a r   r e q u i r e d O v e r r i d e   =   f i e l d . a t t r ( ' d a t a - r e q u i r e d - c l a s s ' ) ;  
                         i f ( r e q u i r e d O v e r r i d e   ! = =   u n d e f i n e d )   {  
                                 p r o m p t . a d d C l a s s ( r e q u i r e d O v e r r i d e ) ;  
                         }   e l s e   {  
                                 i f ( o p t i o n s . p r e t t y S e l e c t )   {  
                                         i f ( $ ( ' # '   +   f i e l d . a t t r ( ' i d ' ) ) . n e x t ( ) . i s ( ' s e l e c t ' ) )   {  
                                                 v a r   p r e t t y O v e r r i d e C l a s s   =   $ ( ' # '   +   f i e l d . a t t r ( ' i d ' ) . s u b s t r ( o p t i o n s . u s e P r e f i x . l e n g t h ) . s u b s t r i n g ( o p t i o n s . u s e S u f f i x . l e n g t h ) ) . a t t r ( ' d a t a - r e q u i r e d - c l a s s ' ) ;  
                                                 i f ( p r e t t y O v e r r i d e C l a s s   ! = =   u n d e f i n e d )   {  
                                                         p r o m p t . a d d C l a s s ( p r e t t y O v e r r i d e C l a s s ) ;  
                                                 }  
                                         }  
                                 }  
                         }  
  
 	 	 	 p r o m p t . c s s ( {  
 	 	 	 	 " o p a c i t y " :   0  
 	 	 	 } ) ;  
 	 	 	 i f ( p o s i t i o n T y p e   = = =   ' i n l i n e ' )   {  
 	 	 	 	 p r o m p t . a d d C l a s s ( " i n l i n e " ) ;  
 	 	 	 	 i f ( t y p e o f   f i e l d . a t t r ( ' d a t a - p r o m p t - t a r g e t ' )   ! = =   ' u n d e f i n e d '   & &   $ ( ' # ' + f i e l d . a t t r ( ' d a t a - p r o m p t - t a r g e t ' ) ) . l e n g t h   >   0 )   {  
 	 	 	 	 	 p r o m p t . a p p e n d T o ( $ ( ' # ' + f i e l d . a t t r ( ' d a t a - p r o m p t - t a r g e t ' ) ) ) ;  
 	 	 	 	 }   e l s e   {  
 	 	 	 	 	 f i e l d . a f t e r ( p r o m p t ) ;  
 	 	 	 	 }  
 	 	 	 }   e l s e   {  
 	 	 	 	 f i e l d . b e f o r e ( p r o m p t ) ;  
 	 	 	 }  
  
 	 	 	 v a r   p o s   =   m e t h o d s . _ c a l c u l a t e P o s i t i o n ( f i e l d ,   p r o m p t ,   o p t i o n s ) ;  
 	 	 	 / /   S u p p o r t   R T L   l a y o u t s   b y   @ y a s s e r _ l o t f y   (   Y a s s e r   L o t f y   )  
 	 	 	 i f   ( $ ( ' b o d y ' ) . h a s C l a s s ( ' r t l ' ) )   {  
 	 	 	 	 p r o m p t . c s s ( {  
 	 	 	 	 	 ' p o s i t i o n ' :   p o s i t i o n T y p e   = = =   ' i n l i n e '   ?   ' r e l a t i v e '   :   ' a b s o l u t e ' ,  
 	 	 	 	 	 " t o p " :   p o s . c a l l e r T o p P o s i t i o n ,  
 	 	 	 	 	 " l e f t " :   " i n i t i a l " ,  
 	 	 	 	 	 " r i g h t " :   p o s . c a l l e r l e f t P o s i t i o n ,  
 	 	 	 	 	 " m a r g i n T o p " :   p o s . m a r g i n T o p S i z e ,  
 	 	 	 	 	 " o p a c i t y " :   0  
 	 	 	 	 } ) . d a t a ( " c a l l e r F i e l d " ,   f i e l d ) ;  
 	 	         	 }   e l s e   {  
 	 	 	 	 p r o m p t . c s s ( {  
 	 	 	 	 	 ' p o s i t i o n ' :   p o s i t i o n T y p e   = = =   ' i n l i n e '   ?   ' r e l a t i v e '   :   ' a b s o l u t e ' ,  
 	 	 	 	 	 " t o p " :   p o s . c a l l e r T o p P o s i t i o n ,  
 	 	 	 	 	 " l e f t " :   p o s . c a l l e r l e f t P o s i t i o n ,  
 	 	 	 	 	 " r i g h t " :   " i n i t i a l " ,  
 	 	 	 	 	 " m a r g i n T o p " :   p o s . m a r g i n T o p S i z e ,  
 	 	 	 	 	 " o p a c i t y " :   0  
 	 	 	 	 } ) . d a t a ( " c a l l e r F i e l d " ,   f i e l d ) ;  
 	 	         	 }  
  
  
 	 	 	 i f   ( o p t i o n s . a u t o H i d e P r o m p t )   {  
 	 	 	 	 s e t T i m e o u t ( f u n c t i o n ( ) {  
 	 	 	 	 	 p r o m p t . a n i m a t e ( {  
 	 	 	 	 	 	 " o p a c i t y " :   0  
 	 	 	 	 	 } , f u n c t i o n ( ) {  
 	 	 	 	 	 	 p r o m p t . c l o s e s t ( ' . f o r m E r r o r ' ) . r e m o v e ( ) ;  
 	 	 	 	 	 } ) ;  
 	 	 	 	 } ,   o p t i o n s . a u t o H i d e D e l a y ) ;  
 	 	 	 }  
 	 	 	 r e t u r n   p r o m p t . a n i m a t e ( {  
 	 	 	 	 " o p a c i t y " :   0 . 8 7  
 	 	 	 } ) ;  
 	 	 } ,  
 	 	 / * *  
 	 	 *   U p d a t e s   t h e   p r o m p t   t e x t   f i e l d   -   t h e   f i e l d   f o r   w h i c h   t h e   p r o m p t  
 	 	 *   @ p a r a m   { j q O b j e c t }   f i e l d  
 	 	 *   @ p a r a m   { S t r i n g }   p r o m p t T e x t   h t m l   t e x t   t o   d i s p l a y   t y p e  
 	 	 *   @ p a r a m   { S t r i n g }   t y p e   t h e   t y p e   o f   b u b b l e :   ' p a s s '   ( g r e e n ) ,   ' l o a d '   ( b l a c k )   a n y t h i n g   e l s e   ( r e d )  
 	 	 *   @ p a r a m   { b o o l e a n }   a j a x e d   -   u s e   t o   m a r k   f i e l d s   t h a n   b e i n g   v a l i d a t e d   w i t h   a j a x  
 	 	 *   @ p a r a m   { M a p }   o p t i o n s   u s e r   o p t i o n s  
 	 	 * /  
 	 	 _ u p d a t e P r o m p t :   f u n c t i o n ( f i e l d ,   p r o m p t ,   p r o m p t T e x t ,   t y p e ,   a j a x e d ,   o p t i o n s ,   n o A n i m a t i o n )   {  
  
 	 	 	 i f   ( p r o m p t )   {  
 	 	 	 	 i f   ( t y p e o f   t y p e   ! = =   " u n d e f i n e d " )   {  
 	 	 	 	 	 i f   ( t y p e   = =   " p a s s " )  
 	 	 	 	 	 	 p r o m p t . a d d C l a s s ( " g r e e n P o p u p " ) ;  
 	 	 	 	 	 e l s e  
 	 	 	 	 	 	 p r o m p t . r e m o v e C l a s s ( " g r e e n P o p u p " ) ;  
  
 	 	 	 	 	 i f   ( t y p e   = =   " l o a d " )  
 	 	 	 	 	 	 p r o m p t . a d d C l a s s ( " b l a c k P o p u p " ) ;  
 	 	 	 	 	 e l s e  
 	 	 	 	 	 	 p r o m p t . r e m o v e C l a s s ( " b l a c k P o p u p " ) ;  
 	 	 	 	 }  
 	 	 	 	 i f   ( a j a x e d )  
 	 	 	 	 	 p r o m p t . a d d C l a s s ( " a j a x e d " ) ;  
 	 	 	 	 e l s e  
 	 	 	 	 	 p r o m p t . r e m o v e C l a s s ( " a j a x e d " ) ;  
  
 	 	 	 	 p r o m p t . f i n d ( " . f o r m E r r o r C o n t e n t " ) . h t m l ( p r o m p t T e x t ) ;  
  
 	 	 	 	 v a r   p o s   =   m e t h o d s . _ c a l c u l a t e P o s i t i o n ( f i e l d ,   p r o m p t ,   o p t i o n s ) ;  
 	 	 	 	 / /   S u p p o r t   R T L   l a y o u t s   b y   @ y a s s e r _ l o t f y   (   Y a s s e r   L o t f y   )  
 	 	 	 	 i f   ( $ ( ' b o d y ' ) . h a s C l a s s ( ' r t l ' ) )   {  
 	 	 	 	 	 v a r   c s s   =   { " t o p " :   p o s . c a l l e r T o p P o s i t i o n ,  
 	 	 	 	 	 " l e f t " :   " i n i t i a l " ,  
 	 	 	 	 	 " r i g h t " :   p o s . c a l l e r l e f t P o s i t i o n ,  
 	 	 	 	 	 " m a r g i n T o p " :   p o s . m a r g i n T o p S i z e ,  
 	 	 	 	 	 " o p a c i t y " :   0 . 8 7 } ;  
 	 	 	 	 }   e l s e   {  
 	 	 	 	 	 v a r   c s s   =   { " t o p " :   p o s . c a l l e r T o p P o s i t i o n ,  
 	 	 	 	 	 " l e f t " :   p o s . c a l l e r l e f t P o s i t i o n ,  
 	 	 	 	 	 " r i g h t " :   " i n i t i a l " ,  
 	 	 	 	 	 " m a r g i n T o p " :   p o s . m a r g i n T o p S i z e ,  
 	 	 	 	 	 " o p a c i t y " :   0 . 8 7 } ;  
 	 	 	 	 }  
  
                                 p r o m p t . c s s ( {  
                                         " o p a c i t y " :   0 ,  
                                         " d i s p l a y " :   " b l o c k "  
                                 } ) ;  
  
 	 	 	 	 i f   ( n o A n i m a t i o n )  
 	 	 	 	 	 p r o m p t . c s s ( c s s ) ;  
 	 	 	 	 e l s e  
 	 	 	 	 	 p r o m p t . a n i m a t e ( c s s ) ;  
 	 	 	 }  
 	 	 } ,  
 	 	 / * *  
 	 	 *   C l o s e s   t h e   p r o m p t   a s s o c i a t e d   w i t h   t h e   g i v e n   f i e l d  
 	 	 *  
 	 	 *   @ p a r a m   { j q O b j e c t }  
 	 	 *                         f i e l d  
 	 	 * /  
 	 	   _ c l o s e P r o m p t :   f u n c t i o n ( f i e l d )   {  
 	 	 	   v a r   p r o m p t   =   m e t h o d s . _ g e t P r o m p t ( f i e l d ) ;  
 	 	 	   i f   ( p r o m p t )  
 	 	 	 	   p r o m p t . f a d e T o ( " f a s t " ,   0 ,   f u n c t i o n ( )   {  
 	 	 	 	 	   p r o m p t . c l o s e s t ( ' . f o r m E r r o r ' ) . r e m o v e ( ) ;  
 	 	 	 	   } ) ;  
 	 	   } ,  
 	 	   c l o s e P r o m p t :   f u n c t i o n ( f i e l d )   {  
 	 	 	   r e t u r n   m e t h o d s . _ c l o s e P r o m p t ( f i e l d ) ;  
 	 	   } ,  
 	 	 / * *  
 	 	 *   R e t u r n s   t h e   e r r o r   p r o m p t   m a t c h i n g   t h e   f i e l d   i f   a n y  
 	 	 *  
 	 	 *   @ p a r a m   { j q O b j e c t }  
 	 	 *                         f i e l d  
 	 	 *   @ r e t u r n   u n d e f i n e d   o r   t h e   e r r o r   p r o m p t   ( j q O b j e c t )  
 	 	 * /  
 	 	 _ g e t P r o m p t :   f u n c t i o n ( f i e l d )   {  
 	 	 	 	 v a r   f o r m I d   =   $ ( f i e l d ) . c l o s e s t ( ' f o r m ,   . v a l i d a t i o n E n g i n e C o n t a i n e r ' ) . a t t r ( ' i d ' ) ;  
 	 	 	 v a r   c l a s s N a m e   =   m e t h o d s . _ g e t C l a s s N a m e ( f i e l d . a t t r ( " i d " ) )   +   " f o r m E r r o r " ;  
 	 	 	 	 v a r   m a t c h   =   $ ( " . "   +   m e t h o d s . _ e s c a p e E x p r e s s i o n ( c l a s s N a m e )   +   ' . p a r e n t F o r m '   +   m e t h o d s . _ g e t C l a s s N a m e ( f o r m I d ) ) [ 0 ] ;  
 	 	 	 i f   ( m a t c h )  
 	 	 	 r e t u r n   $ ( m a t c h ) ;  
 	 	 } ,  
 	 	 / * *  
 	 	     *   R e t u r n s   t h e   e s c a p a d e   c l a s s n a m e  
 	 	     *  
 	 	     *   @ p a r a m   { s e l e c t o r }  
 	 	     *                         c l a s s N a m e  
 	 	     * /  
 	 	     _ e s c a p e E x p r e s s i o n :   f u n c t i o n   ( s e l e c t o r )   {  
 	 	 	     r e t u r n   s e l e c t o r . r e p l a c e ( / ( [ # ; & , \ . \ + \ * \ ~ ' : " \ ! \ ^ $ \ [ \ ] \ ( \ ) = > \ | ] ) / g ,   " \ \ $ 1 " ) ;  
 	 	     } ,  
 	 	 / * *  
 	 	   *   r e t u r n s   t r u e   i f   w e   a r e   i n   a   R T L e d   d o c u m e n t  
 	 	   *  
 	 	   *   @ p a r a m   { j q O b j e c t }   f i e l d  
 	 	   * /  
 	 	 i s R T L :   f u n c t i o n ( f i e l d )  
 	 	 {  
 	 	 	 v a r   $ d o c u m e n t   =   $ ( d o c u m e n t ) ;  
 	 	 	 v a r   $ b o d y   =   $ ( ' b o d y ' ) ;  
 	 	 	 v a r   r t l   =  
 	 	 	 	 ( f i e l d   & &   f i e l d . h a s C l a s s ( ' r t l ' ) )   | |  
 	 	 	 	 ( f i e l d   & &   ( f i e l d . a t t r ( ' d i r ' )   | |   ' ' ) . t o L o w e r C a s e ( ) = = = ' r t l ' )   | |  
 	 	 	 	 $ d o c u m e n t . h a s C l a s s ( ' r t l ' )   | |  
 	 	 	 	 ( $ d o c u m e n t . a t t r ( ' d i r ' )   | |   ' ' ) . t o L o w e r C a s e ( ) = = = ' r t l '   | |  
 	 	 	 	 $ b o d y . h a s C l a s s ( ' r t l ' )   | |  
 	 	 	 	 ( $ b o d y . a t t r ( ' d i r ' )   | |   ' ' ) . t o L o w e r C a s e ( ) = = = ' r t l ' ;  
 	 	 	 r e t u r n   B o o l e a n ( r t l ) ;  
 	 	 } ,  
 	 	 / * *  
 	 	 *   C a l c u l a t e s   p r o m p t   p o s i t i o n  
 	 	 *  
 	 	 *   @ p a r a m   { j q O b j e c t }  
 	 	 *                         f i e l d  
 	 	 *   @ p a r a m   { j q O b j e c t }  
 	 	 *                         t h e   p r o m p t  
 	 	 *   @ p a r a m   { M a p }  
 	 	 *                         o p t i o n s  
 	 	 *   @ r e t u r n   p o s i t i o n s  
 	 	 * /  
 	 	 _ c a l c u l a t e P o s i t i o n :   f u n c t i o n   ( f i e l d ,   p r o m p t E l m t ,   o p t i o n s )   {  
  
 	 	 	 v a r   p r o m p t T o p P o s i t i o n ,   p r o m p t l e f t P o s i t i o n ,   m a r g i n T o p S i z e ;  
 	 	 	 v a r   f i e l d W i d t h   	 =   f i e l d . w i d t h ( ) ;  
 	 	 	 v a r   f i e l d L e f t   	 =   f i e l d . p o s i t i o n ( ) . l e f t ;  
 	 	 	 v a r   f i e l d T o p   	 =     f i e l d . p o s i t i o n ( ) . t o p ;  
 	 	 	 v a r   f i e l d H e i g h t   	 =     f i e l d . h e i g h t ( ) ;  
 	 	 	 v a r   p r o m p t H e i g h t   =   p r o m p t E l m t . h e i g h t ( ) ;  
  
  
 	 	 	 / /   i s   t h e   f o r m   c o n t a i n e d   i n   a n   o v e r f l o w n   c o n t a i n e r ?  
 	 	 	 p r o m p t T o p P o s i t i o n   =   p r o m p t l e f t P o s i t i o n   =   0 ;  
 	 	 	 / /   c o m p e n s a t i o n   f o r   t h e   a r r o w  
 	 	 	 m a r g i n T o p S i z e   =   - p r o m p t H e i g h t ;  
  
  
 	 	 	 / / p r o m p t   p o s i t i o n i n g   a d j u s t m e n t   s u p p o r t  
 	 	 	 / / n o w   y o u   c a n   a d j u s t   p r o m p t   p o s i t i o n  
 	 	 	 / / u s a g e :   p o s i t i o n T y p e : X s h i f t , Y s h i f t  
 	 	 	 / / f o r   e x a m p l e :  
 	 	 	 / /       b o t t o m L e f t : + 2 0   m e a n s   b o t t o m L e f t   p o s i t i o n   s h i f t e d   b y   2 0   p i x e l s   r i g h t   h o r i z o n t a l l y  
 	 	 	 / /       t o p R i g h t : 2 0 ,   - 1 5   m e a n s   t o p R i g h t   p o s i t i o n   s h i f t e d   b y   2 0   p i x e l s   t o   r i g h t   a n d   1 5   p i x e l s   t o   t o p  
 	 	 	 / / Y o u   c a n   u s e   + p i x e l s ,   -   p i x e l s .   I f   n o   s i g n   i s   p r o v i d e d   t h a n   +   i s   d e f a u l t .  
 	 	 	 v a r   p o s i t i o n T y p e = f i e l d . d a t a ( " p r o m p t P o s i t i o n " )   | |   o p t i o n s . p r o m p t P o s i t i o n ;  
 	 	 	 v a r   s h i f t 1 = " " ;  
 	 	 	 v a r   s h i f t 2 = " " ;  
 	 	 	 v a r   s h i f t X = 0 ;  
 	 	 	 v a r   s h i f t Y = 0 ;  
 	 	 	 i f   ( t y p e o f ( p o s i t i o n T y p e ) = = ' s t r i n g ' )   {  
 	 	 	 	 / / d o   w e   h a v e   a n y   p o s i t i o n   a d j u s t m e n t s   ?  
 	 	 	 	 i f   ( p o s i t i o n T y p e . i n d e x O f ( " : " ) ! = - 1 )   {  
 	 	 	 	 	 s h i f t 1 = p o s i t i o n T y p e . s u b s t r i n g ( p o s i t i o n T y p e . i n d e x O f ( " : " ) + 1 ) ;  
 	 	 	 	 	 p o s i t i o n T y p e = p o s i t i o n T y p e . s u b s t r i n g ( 0 , p o s i t i o n T y p e . i n d e x O f ( " : " ) ) ;  
  
 	 	 	 	 	 / / i f   a n y   a d v a n c e d   p o s i t i o n i n g   w i l l   b e   n e e d e d   ( p e r c e n t s   o r   s o m e t h i n g   e l s e )   -   p a r s e r   s h o u l d   b e   a d d e d   h e r e  
 	 	 	 	 	 / / f o r   n o w   w e   u s e   s i m p l e   p a r s e I n t ( )  
  
 	 	 	 	 	 / / d o   w e   h a v e   s e c o n d   p a r a m e t e r ?  
 	 	 	 	 	 i f   ( s h i f t 1 . i n d e x O f ( " , " )   ! = - 1 )   {  
 	 	 	 	 	 	 s h i f t 2 = s h i f t 1 . s u b s t r i n g ( s h i f t 1 . i n d e x O f ( " , " )   + 1 ) ;  
 	 	 	 	 	 	 s h i f t 1 = s h i f t 1 . s u b s t r i n g ( 0 , s h i f t 1 . i n d e x O f ( " , " ) ) ;  
 	 	 	 	 	 	 s h i f t Y = p a r s e I n t ( s h i f t 2 ) ;  
 	 	 	 	 	 	 i f   ( i s N a N ( s h i f t Y ) )   s h i f t Y = 0 ;  
 	 	 	 	 	 } ;  
  
 	 	 	 	 	 s h i f t X = p a r s e I n t ( s h i f t 1 ) ;  
 	 	 	 	 	 i f   ( i s N a N ( s h i f t 1 ) )   s h i f t 1 = 0 ;  
  
 	 	 	 	 } ;  
 	 	 	 } ;  
  
  
 	 	 	 s w i t c h   ( p o s i t i o n T y p e )   {  
 	 	 	 	 d e f a u l t :  
 	 	 	 	 c a s e   " t o p R i g h t " :  
 	 	 	 	 	 p r o m p t l e f t P o s i t i o n   + =     f i e l d L e f t   +   f i e l d W i d t h   -   2 7 ;  
 	 	 	 	 	 p r o m p t T o p P o s i t i o n   + =     f i e l d T o p ;  
 	 	 	 	 	 b r e a k ;  
  
 	 	 	 	 c a s e   " t o p L e f t " :  
 	 	 	 	 	 p r o m p t T o p P o s i t i o n   + =     f i e l d T o p ;  
 	 	 	 	 	 p r o m p t l e f t P o s i t i o n   + =   f i e l d L e f t ;  
 	 	 	 	 	 b r e a k ;  
  
 	 	 	 	 c a s e   " c e n t e r R i g h t " :  
 	 	 	 	 	 p r o m p t T o p P o s i t i o n   =   f i e l d T o p + 4 ;  
 	 	 	 	 	 m a r g i n T o p S i z e   =   0 ;  
 	 	 	 	 	 p r o m p t l e f t P o s i t i o n =   f i e l d L e f t   +   f i e l d . o u t e r W i d t h ( t r u e ) + 5 ;  
 	 	 	 	 	 b r e a k ;  
 	 	 	 	 c a s e   " c e n t e r L e f t " :  
 	 	 	 	 	 p r o m p t l e f t P o s i t i o n   =   f i e l d L e f t   -   ( p r o m p t E l m t . w i d t h ( )   +   2 ) ;  
 	 	 	 	 	 p r o m p t T o p P o s i t i o n   =   f i e l d T o p + 4 ;  
 	 	 	 	 	 m a r g i n T o p S i z e   =   0 ;  
  
 	 	 	 	 	 b r e a k ;  
  
 	 	 	 	 c a s e   " b o t t o m L e f t " :  
 	 	 	 	 	 p r o m p t T o p P o s i t i o n   =   f i e l d T o p   +   f i e l d . h e i g h t ( )   +   5 ;  
 	 	 	 	 	 m a r g i n T o p S i z e   =   0 ;  
 	 	 	 	 	 p r o m p t l e f t P o s i t i o n   =   f i e l d L e f t ;  
 	 	 	 	 	 b r e a k ;  
 	 	 	 	 c a s e   " b o t t o m R i g h t " :  
 	 	 	 	 	 p r o m p t l e f t P o s i t i o n   =   f i e l d L e f t   +   f i e l d W i d t h   -   2 7 ;  
 	 	 	 	 	 p r o m p t T o p P o s i t i o n   =     f i e l d T o p   +     f i e l d . h e i g h t ( )   +   5 ;  
 	 	 	 	 	 m a r g i n T o p S i z e   =   0 ;  
 	 	 	 	 	 b r e a k ;  
 	 	 	 	 c a s e   " i n l i n e " :  
 	 	 	 	 	 p r o m p t l e f t P o s i t i o n   =   0 ;  
 	 	 	 	 	 p r o m p t T o p P o s i t i o n   =   0 ;  
 	 	 	 	 	 m a r g i n T o p S i z e   =   0 ;  
 	 	 	 } ;  
  
  
  
 	 	 	 / / a p p l y   a d j u s m e n t s   i f   a n y  
 	 	 	 p r o m p t l e f t P o s i t i o n   + =   s h i f t X ;  
 	 	 	 p r o m p t T o p P o s i t i o n     + =   s h i f t Y ;  
  
 	 	 	 r e t u r n   {  
 	 	 	 	 " c a l l e r T o p P o s i t i o n " :   p r o m p t T o p P o s i t i o n   +   " p x " ,  
 	 	 	 	 " c a l l e r l e f t P o s i t i o n " :   p r o m p t l e f t P o s i t i o n   +   " p x " ,  
 	 	 	 	 " m a r g i n T o p S i z e " :   m a r g i n T o p S i z e   +   " p x "  
 	 	 	 } ;  
 	 	 } ,  
 	 	 / * *  
 	 	 *   S a v e s   t h e   u s e r   o p t i o n s   a n d   v a r i a b l e s   i n   t h e   f o r m . d a t a  
 	 	 *  
 	 	 *   @ p a r a m   { j q O b j e c t }  
 	 	 *                         f o r m   -   t h e   f o r m   w h e r e   t h e   u s e r   o p t i o n   s h o u l d   b e   s a v e d  
 	 	 *   @ p a r a m   { M a p }  
 	 	 *                         o p t i o n s   -   t h e   u s e r   o p t i o n s  
 	 	 *   @ r e t u r n   t h e   u s e r   o p t i o n s   ( e x t e n d e d   f r o m   t h e   d e f a u l t s )  
 	 	 * /  
 	 	   _ s a v e O p t i o n s :   f u n c t i o n ( f o r m ,   o p t i o n s )   {  
  
 	 	 	   / /   i s   t h e r e   a   l a n g u a g e   l o c a l i s a t i o n   ?  
 	 	 	   i f   ( $ . v a l i d a t i o n E n g i n e L a n g u a g e )  
 	 	 	   v a r   a l l R u l e s   =   $ . v a l i d a t i o n E n g i n e L a n g u a g e . a l l R u l e s ;  
 	 	 	   e l s e  
 	 	 	   $ . e r r o r ( " j Q u e r y . v a l i d a t i o n E n g i n e   r u l e s   a r e   n o t   l o a d e d ,   p l z   a d d   l o c a l i z a t i o n   f i l e s   t o   t h e   p a g e " ) ;  
 	 	 	   / /   - - -   I n t e r n a l s   D O   N O T   T O U C H   o r   O V E R L O A D   - - -  
 	 	 	   / /   v a l i d a t i o n   r u l e s   a n d   i 1 8  
 	 	 	   $ . v a l i d a t i o n E n g i n e . d e f a u l t s . a l l r u l e s   =   a l l R u l e s ;  
  
 	 	 	   v a r   u s e r O p t i o n s   =   $ . e x t e n d ( t r u e , { } , $ . v a l i d a t i o n E n g i n e . d e f a u l t s , o p t i o n s ) ;  
  
 	 	 	   f o r m . d a t a ( ' j q v ' ,   u s e r O p t i o n s ) ;  
 	 	 	   r e t u r n   u s e r O p t i o n s ;  
 	 	   } ,  
  
 	 	   / * *  
 	 	   *   R e m o v e s   f o r b i d d e n   c h a r a c t e r s   f r o m   c l a s s   n a m e  
 	 	   *   @ p a r a m   { S t r i n g }   c l a s s N a m e  
 	 	   * /  
 	 	   _ g e t C l a s s N a m e :   f u n c t i o n ( c l a s s N a m e )   {  
 	 	 	   i f ( c l a s s N a m e )  
 	 	 	 	   r e t u r n   c l a s s N a m e . r e p l a c e ( / : / g ,   " _ " ) . r e p l a c e ( / \ . / g ,   " _ " ) ;  
 	 	 	 	 	     } ,  
 	 	 / * *  
 	 	   *   E s c a p e   s p e c i a l   c h a r a c t e r   f o r   j Q u e r y   s e l e c t o r  
 	 	   *   h t t p : / / t o t a l d e v . c o m / c o n t e n t / e s c a p i n g - c h a r a c t e r s - g e t - v a l i d - j q u e r y - i d  
 	 	   *   @ p a r a m   { S t r i n g }   s e l e c t o r  
 	 	   * /  
 	 	   _ j q S e l e c t o r :   f u n c t i o n ( s t r ) {  
 	 	 	 r e t u r n   s t r . r e p l a c e ( / ( [ ; & , \ . \ + \ * \ ~ ' : " \ ! \ ^ # $ % @ \ [ \ ] \ ( \ ) = > \ | ] ) / g ,   ' \ \ $ 1 ' ) ;  
 	 	 } ,  
 	 	 / * *  
 	 	 *   C o n d i t i o n a l l y   r e q u i r e d   f i e l d  
 	 	 *  
 	 	 *   @ p a r a m   { j q O b j e c t }   f i e l d  
 	 	 *   @ p a r a m   { A r r a y [ S t r i n g ] }   r u l e s  
 	 	 *   @ p a r a m   { i n t }   i   r u l e s   i n d e x  
 	 	 *   @ p a r a m   { M a p }  
 	 	 *   u s e r   o p t i o n s  
 	 	 *   @ r e t u r n   a n   e r r o r   s t r i n g   i f   v a l i d a t i o n   f a i l e d  
 	 	 * /  
 	 	 _ c o n d R e q u i r e d :   f u n c t i o n ( f i e l d ,   r u l e s ,   i ,   o p t i o n s )   {  
 	 	 	 v a r   i d x ,   d e p e n d i n g F i e l d ;  
  
 	 	 	 f o r ( i d x   =   ( i   +   1 ) ;   i d x   <   r u l e s . l e n g t h ;   i d x + + )   {  
 	 	 	 	 d e p e n d i n g F i e l d   =   j Q u e r y ( " # "   +   r u l e s [ i d x ] ) . f i r s t ( ) ;  
  
 	 	 	 	 / *   U s e   _ r e q u i r e d   f o r   d e t e r m i n i n g   w e t h e r   d e p e n d i n g F i e l d   h a s   a   v a l u e .  
 	 	 	 	   *   T h e r e   i s   l o g i c   t h e r e   f o r   h a n d l i n g   a l l   f i e l d   t y p e s ,   a n d   d e f a u l t   v a l u e ;   s o   w e   w o n ' t   r e p l i c a t e   t h a t   h e r e  
 	 	 	 	   *   I n d i c a t e   t h i s   s p e c i a l   u s e   b y   s e t t i n g   t h e   l a s t   p a r a m e t e r   t o   t r u e   s o   w e   o n l y   v a l i d a t e   t h e   d e p e n d i n g F i e l d   o n   c h a c k b o x e s   a n d   r a d i o   b u t t o n s   ( # 4 6 2 )  
 	 	 	 	   * /  
 	 	 	 	 i f   ( d e p e n d i n g F i e l d . l e n g t h   & &   m e t h o d s . _ r e q u i r e d ( d e p e n d i n g F i e l d ,   [ " r e q u i r e d " ] ,   0 ,   o p t i o n s ,   t r u e )   = =   u n d e f i n e d )   {  
 	 	 	 	 	 / *   W e   n o w   k n o w   a n y   o f   t h e   d e p e n d i n g   f i e l d s   h a s   a   v a l u e ,  
 	 	 	 	 	   *   s o   w e   c a n   v a l i d a t e   t h i s   f i e l d   a s   p e r   n o r m a l   r e q u i r e d   c o d e  
 	 	 	 	 	   * /  
 	 	 	 	 	 r e t u r n   m e t h o d s . _ r e q u i r e d ( f i e l d ,   [ " r e q u i r e d " ] ,   0 ,   o p t i o n s ) ;  
 	 	 	 	 }  
 	 	 	 }  
 	 	 } ,  
  
 	         _ s u b m i t B u t t o n C l i c k :   f u n c t i o n ( e v e n t )   {  
 	                 v a r   b u t t o n   =   $ ( t h i s ) ;  
 	                 v a r   f o r m   =   b u t t o n . c l o s e s t ( ' f o r m ,   . v a l i d a t i o n E n g i n e C o n t a i n e r ' ) ;  
 	                 f o r m . d a t a ( " j q v _ s u b m i t B u t t o n " ,   b u t t o n . a t t r ( " i d " ) ) ;  
 	         }  
 	 	     } ;  
  
 	   / * *  
 	   *   P l u g i n   e n t r y   p o i n t .  
 	   *   Y o u   m a y   p a s s   a n   a c t i o n   a s   a   p a r a m e t e r   o r   a   l i s t   o f   o p t i o n s .  
 	   *   i f   n o n e ,   t h e   i n i t   a n d   a t t a c h   m e t h o d s   a r e   b e i n g   c a l l e d .  
 	   *   R e m e m b e r :   i f   y o u   p a s s   o p t i o n s ,   t h e   a t t a c h e d   m e t h o d   i s   N O T   c a l l e d   a u t o m a t i c a l l y  
 	   *  
 	   *   @ p a r a m   { S t r i n g }  
 	   *                         m e t h o d   ( o p t i o n a l )   a c t i o n  
 	   * /  
 	   $ . f n . v a l i d a t i o n E n g i n e   =   f u n c t i o n ( m e t h o d )   {  
  
 	 	   v a r   f o r m   =   $ ( t h i s ) ;  
 	 	   i f ( ! f o r m [ 0 ] )   r e t u r n   f o r m ;     / /   s t o p   h e r e   i f   t h e   f o r m   d o e s   n o t   e x i s t  
  
 	 	   i f   ( t y p e o f ( m e t h o d )   = =   ' s t r i n g '   & &   m e t h o d . c h a r A t ( 0 )   ! =   ' _ '   & &   m e t h o d s [ m e t h o d ] )   {  
  
 	 	 	   / /   m a k e   s u r e   i n i t   i s   c a l l e d   o n c e  
 	 	 	   i f ( m e t h o d   ! =   " s h o w P r o m p t "   & &   m e t h o d   ! =   " h i d e "   & &   m e t h o d   ! =   " h i d e A l l " )  
 	 	 	   m e t h o d s . i n i t . a p p l y ( f o r m ) ;  
  
 	 	 	   r e t u r n   m e t h o d s [ m e t h o d ] . a p p l y ( f o r m ,   A r r a y . p r o t o t y p e . s l i c e . c a l l ( a r g u m e n t s ,   1 ) ) ;  
 	 	   }   e l s e   i f   ( t y p e o f   m e t h o d   = =   ' o b j e c t '   | |   ! m e t h o d )   {  
  
 	 	 	   / /   d e f a u l t   c o n s t r u c t o r   w i t h   o r   w i t h o u t   a r g u m e n t s  
 	 	 	   m e t h o d s . i n i t . a p p l y ( f o r m ,   a r g u m e n t s ) ;  
 	 	 	   r e t u r n   m e t h o d s . a t t a c h . a p p l y ( f o r m ) ;  
 	 	   }   e l s e   {  
 	 	 	   $ . e r r o r ( ' M e t h o d   '   +   m e t h o d   +   '   d o e s   n o t   e x i s t   i n   j Q u e r y . v a l i d a t i o n E n g i n e ' ) ;  
 	 	   }  
 	 } ;  
  
  
  
 	 / /   L E A K   G L O B A L   O P T I O N S  
 	 $ . v a l i d a t i o n E n g i n e =   { f i e l d I d C o u n t e r :   0 , d e f a u l t s : {  
  
 	 	 / /   N a m e   o f   t h e   e v e n t   t r i g g e r i n g   f i e l d   v a l i d a t i o n  
 	 	 v a l i d a t i o n E v e n t T r i g g e r :   " b l u r " ,  
 	 	 / /   A u t o m a t i c a l l y   s c r o l l   v i e w p o r t   t o   t h e   f i r s t   e r r o r  
 	 	 s c r o l l :   t r u e ,  
 	 	 / /   F o c u s   o n   t h e   f i r s t   i n p u t  
 	 	 f o c u s F i r s t F i e l d : t r u e ,  
 	 	 / /   S h o w   p r o m p t s ,   s e t   t o   f a l s e   t o   d i s a b l e   p r o m p t s  
 	 	 s h o w P r o m p t s :   t r u e ,  
 	 	 / /   S h o u l d   w e   a t t e m p t   t o   v a l i d a t e   n o n - v i s i b l e   i n p u t   f i e l d s   c o n t a i n e d   i n   t h e   f o r m ?   ( U s e f u l   i n   c a s e s   o f   t a b b e d   c o n t a i n e r s ,   e . g .   j Q u e r y - U I   t a b s )  
 	 	 v a l i d a t e N o n V i s i b l e F i e l d s :   f a l s e ,  
 	 	 / /   i g n o r e   t h e   v a l i d a t i o n   f o r   f i e l d s   w i t h   t h i s   s p e c i f i c   c l a s s   ( U s e f u l   i n   c a s e s   o f   t a b b e d   c o n t a i n e r s   A N D   h i d d e n   f i e l d s   w e   d o n ' t   w a n t   t o   v a l i d a t e )  
 	 	 i g n o r e F i e l d s W i t h C l a s s :   ' i g n o r e M e ' ,  
 	 	 / /   O p e n i n g   b o x   p o s i t i o n ,   p o s s i b l e   l o c a t i o n s   a r e :   t o p L e f t ,  
 	 	 / /   t o p R i g h t ,   b o t t o m L e f t ,   c e n t e r R i g h t ,   b o t t o m R i g h t ,   i n l i n e  
 	 	 / /   i n l i n e   g e t s   i n s e r t e d   a f t e r   t h e   v a l i d a t e d   f i e l d   o r   i n t o   a n   e l e m e n t   s p e c i f i e d   i n   d a t a - p r o m p t - t a r g e t  
 	 	 p r o m p t P o s i t i o n :   " t o p R i g h t " ,  
 	 	 b i n d M e t h o d : " b i n d " ,  
 	 	 / /   i n t e r n a l ,   a u t o m a t i c a l l y   s e t   t o   t r u e   w h e n   i t   p a r s e   a   _ a j a x   r u l e  
 	 	 i n l i n e A j a x :   f a l s e ,  
 	 	 / /   i f   s e t   t o   t r u e ,   t h e   f o r m   d a t a   i s   s e n t   a s y n c h r o n o u s l y   v i a   a j a x   t o   t h e   f o r m . a c t i o n   u r l   ( g e t )  
 	 	 a j a x F o r m V a l i d a t i o n :   f a l s e ,  
 	 	 / /   T h e   u r l   t o   s e n d   t h e   s u b m i t   a j a x   v a l i d a t i o n   ( d e f a u l t   t o   a c t i o n )  
 	 	 a j a x F o r m V a l i d a t i o n U R L :   f a l s e ,  
 	 	 / /   H T T P   m e t h o d   u s e d   f o r   a j a x   v a l i d a t i o n  
 	 	 a j a x F o r m V a l i d a t i o n M e t h o d :   ' g e t ' ,  
 	 	 / /   A j a x   f o r m   v a l i d a t i o n   c a l l b a c k   m e t h o d :   b o o l e a n   o n C o m p l e t e ( f o r m ,   s t a t u s ,   e r r o r s ,   o p t i o n s )  
 	 	 / /   r e t u n s   f a l s e   i f   t h e   f o r m . s u b m i t   e v e n t   n e e d s   t o   b e   c a n c e l e d .  
 	 	 o n A j a x F o r m C o m p l e t e :   $ . n o o p ,  
 	 	 / /   c a l l e d   r i g h t   b e f o r e   t h e   a j a x   c a l l ,   m a y   r e t u r n   f a l s e   t o   c a n c e l  
 	 	 o n B e f o r e A j a x F o r m V a l i d a t i o n :   $ . n o o p ,  
 	 	 / /   S t o p s   f o r m   f r o m   s u b m i t t i n g   a n d   e x e c u t e   f u n c t i o n   a s s i c i a t e d   w i t h   i t  
 	 	 o n V a l i d a t i o n C o m p l e t e :   f a l s e ,  
  
 	 	 / /   U s e d   w h e n   y o u   h a v e   a   f o r m   f i e l d s   t o o   c l o s e   a n d   t h e   e r r o r s   m e s s a g e s   a r e   o n   t o p   o f   o t h e r   d i s t u r b i n g   v i e w i n g   m e s s a g e s  
 	 	 d o N o t S h o w A l l E r r o s O n S u b m i t :   f a l s e ,  
 	 	 / /   O b j e c t   w h e r e   y o u   s t o r e   c u s t o m   m e s s a g e s   t o   o v e r r i d e   t h e   d e f a u l t   e r r o r   m e s s a g e s  
 	 	 c u s t o m _ e r r o r _ m e s s a g e s : { } ,  
 	 	 / /   t r u e   i f   y o u   w a n t   t o   v a l i d a t e   t h e   i n p u t   f i e l d s   o n   b l u r   e v e n t  
 	 	 b i n d e d :   t r u e ,  
 	 	 / /   s e t   t o   t r u e   i f   y o u   w a n t   t o   v a l i d a t e   t h e   i n p u t   f i e l d s   o n   b l u r   o n l y   i f   t h e   f i e l d   i t ' s   n o t   e m p t y  
 	 	 n o t E m p t y :   f a l s e ,  
 	 	 / /   s e t   t o   t r u e ,   w h e n   t h e   p r o m p t   a r r o w   n e e d s   t o   b e   d i s p l a y e d  
 	 	 s h o w A r r o w :   t r u e ,  
 	 	 / /   s e t   t o   f a l s e ,   d e t e r m i n e s   i f   t h e   p r o m p t   a r r o w   s h o u l d   b e   d i s p l a y e d   w h e n   v a l i d a t i n g  
 	 	 / /   c h e c k b o x e s   a n d   r a d i o   b u t t o n s  
 	 	 s h o w A r r o w O n R a d i o A n d C h e c k b o x :   f a l s e ,  
 	 	 / /   d i d   o n e   o f   t h e   v a l i d a t i o n   f a i l   ?   k e p t   g l o b a l   t o   s t o p   f u r t h e r   a j a x   v a l i d a t i o n s  
 	 	 i s E r r o r :   f a l s e ,  
 	 	 / /   L i m i t   h o w   m a n y   d i s p l a y e d   e r r o r s   a   f i e l d   c a n   h a v e  
 	 	 m a x E r r o r s P e r F i e l d :   f a l s e ,  
  
 	 	 / /   C a c h e s   f i e l d   v a l i d a t i o n   s t a t u s ,   t y p i c a l l y   o n l y   b a d   s t a t u s   a r e   c r e a t e d .  
 	 	 / /   t h e   a r r a y   i s   u s e d   d u r i n g   a j a x   f o r m   v a l i d a t i o n   t o   d e t e c t   i s s u e s   e a r l y   a n d   p r e v e n t   a n   e x p e n s i v e   s u b m i t  
 	 	 a j a x V a l i d C a c h e :   { } ,  
 	 	 / /   A u t o   u p d a t e   p r o m p t   p o s i t i o n   a f t e r   w i n d o w   r e s i z e  
 	 	 a u t o P o s i t i o n U p d a t e :   f a l s e ,  
  
 	 	 I n v a l i d F i e l d s :   [ ] ,  
 	 	 o n F i e l d S u c c e s s :   f a l s e ,  
 	 	 o n F i e l d F a i l u r e :   f a l s e ,  
 	 	 o n S u c c e s s :   f a l s e ,  
 	 	 o n F a i l u r e :   f a l s e ,  
 	 	 v a l i d a t e A t t r i b u t e :   " c l a s s " ,  
 	 	 a d d S u c c e s s C s s C l a s s T o F i e l d :   " " ,  
 	 	 a d d F a i l u r e C s s C l a s s T o F i e l d :   " " ,  
  
 	 	 / /   A u t o - h i d e   p r o m p t  
 	 	 a u t o H i d e P r o m p t :   f a l s e ,  
 	 	 / /   D e l a y   b e f o r e   a u t o - h i d e  
 	 	 a u t o H i d e D e l a y :   1 0 0 0 0 ,  
 	 	 / /   F a d e   o u t   d u r a t i o n   w h i l e   h i d i n g   t h e   v a l i d a t i o n s  
 	 	 f a d e D u r a t i o n :   3 0 0 ,  
 	   / /   U s e   P r e t t i f y   s e l e c t   l i b r a r y  
 	   p r e t t y S e l e c t :   f a l s e ,  
 	   / /   A d d   c s s   c l a s s   o n   p r o m p t  
 	   a d d P r o m p t C l a s s   :   " " ,  
 	   / /   C u s t o m   I D   u s e s   p r e f i x  
 	   u s e P r e f i x :   " " ,  
 	   / /   C u s t o m   I D   u s e s   s u f f i x  
 	   u s e S u f f i x :   " " ,  
 	   / /   O n l y   s h o w   o n e   m e s s a g e   p e r   e r r o r   p r o m p t  
 	   s h o w O n e M e s s a g e :   f a l s e  
 	 } } ;  
 	 $ ( f u n c t i o n ( ) { $ . v a l i d a t i o n E n g i n e . d e f a u l t s . p r o m p t P o s i t i o n   =   m e t h o d s . i s R T L ( ) ? ' t o p L e f t ' : " t o p R i g h t " } ) ;  
 } ) ( j Q u e r y ) ;  
    F       https://vtop.vit.ac.in/vtop/assets/plugins/jquery.validationEngine.js     (     (                            Q p q    jQuery!!            +H!!        C                @                  	           D  ( <  (                   G[9       ]       ]      ]      ]      ]      ]      ]      ]      ]   	   ]	   
   ]
      ]      ]      ]      ]      ]      ]      ]   [   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]   =   ]    =   ]!   =   ]"   =   ]#   =   ]$   =%   ]&   =   ]'   =   ](   =%   ])   =   ]*   ]+      ],      ]-      ].      ]/      ]0      ]1      ]2      ]3      ]4      ]5      ]6      ]7      ]8       ]9   !   ]:   "   ];   #   ]<   $   ]=   %   ]>   &   ]?   '   ]@   (   ]A   )   ]B   *   ]C   +   ]D   ,   ]E   -   ]F   .   ]G   /   ]H   0   ]I   1   ]J   2   ]K   3   ]L   4   ]M   5   ]N   6   ]O   7   ]P   8   ]Q      Q   5R   :   0S   Q   [>   >]T   [=   =U   ]V   C]W   C]X   C]Y   B]Z   =[   ]\   =]   ]^   =_   ]`   B]a   B]b   B]c   =d   ]e      5f   ]g      5f   ]h   B]i   B]j   [;   ]k   C]l   B]m   C]n   B]o   B]p   B]q   [<   ]r   B]s   Z    ]t   B]u   B]v   B]w   B]x   =y   ]z   ={   ]|   ={   ]}   B]~   X']   X,]   B]   ={   ]   ={   ]   ={   ]   B]   ]   0S   Q   ?    Q*Lh            > P ]   4 Q u     2 E R b u         
 ! 9 O d     , J     " * B        	   init   attach   detach   validate+   updatePromptsPosition   showPrompt	   hide   hideAll   _onFieldEvent   _onSubmitEvent!   _checkAjaxStatus+   _checkAjaxFieldStatus   _validateFields+   _validateFormWithAjax   _validateField/   _handleStatusCssClasses!   _getErrorMessage-   _getCustomErrorMessage   value-missing   required   custom-error   custom   groupRequired	   ajax   range-underflow   minSize   range-overflow   maxSize   min   max   type-mismatch	   past   future   dateRange   dateTimeRange   maxCheckbox   minCheckbox!   pattern-mismatch   equals   funcCall!   funcCallRequired   creditCard   condRequired   _validityProp   _required   _groupRequired   _custom   _funcCall#   _funcCallRequired   _equals   _maxSize   _minSize	   _min	   _max   _past   _future   _isDate   _isDateTime   _dateCompare   _dateRange   _dateTimeRange   _maxCheckbox   _minCheckbox   _creditCard   _ajax   _ajaxError   _dateToString   _parseDate   _showPrompt   _buildPrompt   _updatePrompt   _closePrompt   closePrompt   _getPrompt#   _escapeExpression   isRTL%   _calculatePosition   _saveOptions   _getClassName   _jqSelector   _condRequired%   _submitButtonClick   fn!   validationEngine   fieldIdCounter	   blur-   validationEventTrigger   scroll   focusFirstField   showPrompts1   validateNonVisibleFields   ignoreMe+   ignoreFieldsWithClass   topRight   promptPosition	   bind   bindMethod   inlineAjax%   ajaxFormValidation+   ajaxFormValidationURL   get1   ajaxFormValidationMethod	   noop%   onAjaxFormComplete5   onBeforeAjaxFormValidation)   onValidationComplete3   doNotShowAllErrosOnSubmit+   custom_error_messages   binded   notEmpty   showArrow7   showArrowOnRadioAndCheckbox   isError#   maxErrorsPerField   ajaxValidCache%   autoPositionUpdate   InvalidFields   onFieldSuccess   onFieldFailure   onSuccess   onFailure   class#   validateAttribute   3   addSuccessCssClassToField3   addFailureCssClassToField   autoHidePrompt   autoHideDelay   fadeDuration   prettySelect   addPromptClass   usePrefix   useSuffix   showOneMessage   defaults!!      $   methods       +H!!       	   initB               "         B    q    q     2             B    h    h     "          5 55!!          attachB   	    	  *      2       5 !!          detachB  ]
    U
    L             5 !!          validateB   I    I  h                element   B  u    m    {             5 5!!       +   updatePromptsPositionB   <    <     !   R       	   form    noAnimation    options   B    $    $     X          5 5!!          showPromptB   m    m               5 !!       	   hideB    !    !        2          B  1!  j!  )!  j!     6          5 5!!          hideAllB  !  "  !  "                 B  ~"  "  v"  "     0          5 5!!          _onFieldEventB f#  &  ^#  &        b          field    options    B  ;%  %  3%  %     .          5    B  F&  &  >&  &    *          5 5!!          _onSubmitEventB  '   ,  '   ,       b       5!!       !   _checkAjaxStatusB ,  -  ,  -  >                status   B E-  -  =-  -  @  *           55!!       +   _checkAjaxFieldStatusB .  /  .  /  P  !          5!!          _validateFieldsB 0  >  0  >  ]            	   form    options    errorFound    first_err    B  2  '6  
2  '6  g  Y   b       5   B  #=  f=  =  f=    H          5    B  =  >  =  >              5 5!!       +   _validateFormWithAjaxB ?  I  ?  I    !   @       	   form    options    dataType   B  A  GB  A  GB              5    B ]B  C  UB  C       0       5    B C  I  C  I              55!!          _validateFieldB \K  s  TK  s             5 !!       /   _handleStatusCssClassesB 
t  v  t  v  4  #          5!!       !   _getErrorMessageB 2w  2~  )w  2~  Q     P       5 !!       -   _getCustomErrorMessageB X~    O~    u  #   p       5 !!       !!   required!!!!   custom!!!!   groupRequired!!!!	   ajax!!!!   minSize!!!!   maxSize!!!!   min!!!!   max!!!!	   past!!!!   future!!!!   dateRange!!!!   dateTimeRange!!!!   maxCheckbox!!!!   minCheckbox!!!!   equals!!!!   funcCall!!!!!   funcCallRequired!!!!   creditCard!!!!   condRequired!!    !!           _requiredB              `       5 !!          _groupRequiredB   o    o       `          rules    i    options    isValid   B            S   "       55!!          _customB k    c         p       5!!          _funcCallB         2     0       5!!       #   _funcCallRequiredB   7    7  E            5!!          _equalsB 0    (    R            5!!          _maxSizeB         b             5!!          _minSizeB         u             5!!       	   _minB                      5!!       	   _maxB   1    1               5!!          _pastB 7    /         P       5!!          _futureB              P       5!!          _isDateB V  G  M  G              5!!          _isDateTimeB                     5!!          _dateCompareB     v                 5 !!          _dateRangeB         
     @       5!!          _dateTimeRangeB o  w  f  w  !     @       5!!          _maxCheckboxB   l    l  9             5!!          _minCheckboxB ~    v    O             5!!          _creditCardB F    >    d     @       5 !!          _ajaxB /  w  '  w                 field    options 	   rule   B                       5    B              0       5    B   =    =              5 5!!          _ajaxErrorB                     5 !!          _dateToStringB Y    Q                5!!          _parseDateB   .    .               5!!          _showPromptB   O    O  ,     @       5 !!          _buildPromptB   [    [  J               prompt   B  }    u                   B                      5 55!!          _updatePromptB              P       5!!          _closePromptB   :    :                  prompt   B    2    2    &          5 5!!          closePromptB U    M                5!!          _getPromptB S    K                5 !!       #   _escapeExpressionB *    !    "             5!!          isRTLB         *            5!!       %   _calculatePositionB   
   
 B     P       5 !!          _saveOptionsB * U " U             5 !!          _getClassNameB  ?  ?             5!!          _jqSelectorB  Z  Z             5!!          _condRequiredB _  W       0       5!!       %   _submitButtonClickB       !          5 !!    9   !!	   init!!!!   attach!!!!   detach!!!!   validate!!!!+   updatePromptsPosition!!!!   showPrompt!!!!	   hide!!!!   hideAll!!!!   _onFieldEvent!!!!   _onSubmitEvent!!!!!   _checkAjaxStatus!!!!+   _checkAjaxFieldStatus!!!!   _validateFields!!!!+   _validateFormWithAjax!!!!   _validateField!!!!/   _handleStatusCssClasses!!!!!   _getErrorMessage!!!!-   _getCustomErrorMessage!!!!   _validityProp!!!!   _required!!!!   _groupRequired!!!!   _custom!!!!   _funcCall!!!!#   _funcCallRequired!!!!   _equals!!!!   _maxSize!!!!   _minSize!!!!	   _min!!!!	   _max!!!!   _past!!!!   _future!!!!   _isDate!!!!   _isDateTime!!!!   _dateCompare!!!!   _dateRange!!!!   _dateTimeRange!!!!   _maxCheckbox!!!!   _minCheckbox!!!!   _creditCard!!!!   _ajax!!!!   _ajaxError!!!!   _dateToString!!!!   _parseDate!!!!   _showPrompt!!!!   _buildPrompt!!!!   _updatePrompt!!!!   _closePrompt!!!!   closePrompt!!!!   _getPrompt!!!!#   _escapeExpression!!!!   isRTL!!!!%   _calculatePosition!!!!   _saveOptions!!!!   _getClassName!!!!   _jqSelector!!!!   _condRequired!!!!%   _submitButtonClick!!    !!       +   $.fn.validationEngineb       "   C       5 !!            !!            !!    )   !!-   validationEventTrigger!!!!   scroll!!!!   focusFirstField!!!!   showPrompts!!!!1   validateNonVisibleFields!!!!+   ignoreFieldsWithClass!!!!   promptPosition!!!!   bindMethod!!!!   inlineAjax!!!!%   ajaxFormValidation!!!!+   ajaxFormValidationURL!!!!1   ajaxFormValidationMethod!!!!%   onAjaxFormComplete!!!!5   onBeforeAjaxFormValidation!!!!)   onValidationComplete!!!!3   doNotShowAllErrosOnSubmit!!!!+   custom_error_messages!!!!   binded!!!!   notEmpty!!!!   showArrow!!!!7   showArrowOnRadioAndCheckbox!!!!   isError!!!!#   maxErrorsPerField!!!!   ajaxValidCache!!!!%   autoPositionUpdate!!!!   InvalidFields!!!!   onFieldSuccess!!!!   onFieldFailure!!!!   onSuccess!!!!   onFailure!!!!#   validateAttribute!!!!3   addSuccessCssClassToField!!!!3   addFailureCssClassToField!!!!   autoHidePrompt!!!!   autoHideDelay!!!!   fadeDuration!!!!   prettySelect!!!!   addPromptClass!!!!   usePrefix!!!!   useSuffix!!!!   showOneMessage!!    !!       !!   fieldIdCounter!!!!   defaults!!    !!        B  D( ( <( ( o            5 ;5;TpE      \jSj\jSj@       F    :https://vtop.vit.ac.in/vtop/assets/plugins/jquery.validationEngine.js necko:classified 1 strongly-framed 1 security-info FnhllAKWRHGAlo+ESXykKAAAAAAAAAAAwAAAAAAAAEaphjojH6pBabDSgSnsfLHeAAgAAgAAAAAAAAAAAAAAAAAAAAEAMQFmCjImkVxP+7sgiYWmMt8FvcOXmlQiTNWFiWlrbpbqgwAAAAAAAAbMMIIGyDCCBbCgAwIBAgIQacmPEWNA5XkKQ56+E6LcmjANBgkqhkiG9w0BAQsFADCBkDELMAkGA1UEBhMCR0IxGzAZBgNVBAgTEkdyZWF0ZXIgTWFuY2hlc3RlcjEQMA4GA1UEBxMHU2FsZm9yZDEaMBgGA1UEChMRQ09NT0RPIENBIExpbWl0ZWQxNjA0BgNVBAMTLUNPTU9ETyBSU0EgRG9tYWluIFZhbGlkYXRpb24gU2VjdXJlIFNlcnZlciBDQTAeFw0xODA4MjAwMDAwMDBaFw0yMDA4MTkyMzU5NTlaMFgxITAfBgNVBAsTGERvbWFpbiBDb250cm9sIFZhbGlkYXRlZDEdMBsGA1UECxMUUG9zaXRpdmVTU0wgV2lsZGNhcmQxFDASBgNVBAMMCyoudml0LmFjLmluMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwaoaX2uhqbJPj1OKS0ojUYprCgPICOUKjuU6NrNQhrWiGzf89Qb/Qh3Uuz/UuB1pTnQnSgumdEVM1ex0jRusadZ8JII/SJwnXbkR8754PzbMGmZrmr1PzkyVGTi3CfB9/dEgvVt9SFsNdbOsjRT0u1990DvMZBifhkNmqulWjNP2DDVe8e8C7qw73HissU/W6R+lqEHt12Tz+NthYYkyzOLkCWzmsht6RNkCY3Iq9CdjiHfPpz5ZIJh9iqcLKsBdt0Fjo88fD0gv3lExTJ2Y7lt1zzz/4OneQiRxiiJXV0ZHt9/JVmRUViy4EQBENuOKoDT+DDbiO1yQESpZJQT0KwIDAQABo4IDUzCCA08wHwYDVR0jBBgwFoAUkK9qOpRaC9iQ6hJWc99DtDoo2ucwHQYDVR0OBBYEFEUrbEmjPEEUcFIejneV26cDpmjhMA4GA1UdDwEB/wQEAwIFoDAMBgNVHRMBAf8EAjAAMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjBPBgNVHSAESDBGMDoGCysGAQQBsjEBAgIHMCswKQYIKwYBBQUHAgEWHWh0dHBzOi8vc2VjdXJlLmNvbW9kby5jb20vQ1BTMAgGBmeBDAECATBUBgNVHR8ETTBLMEmgR6BFhkNodHRwOi8vY3JsLmNvbW9kb2NhLmNvbS9DT01PRE9SU0FEb21haW5WYWxpZGF0aW9uU2VjdXJlU2VydmVyQ0EuY3JsMIGFBggrBgEFBQcBAQR5MHcwTwYIKwYBBQUHMAKGQ2h0dHA6Ly9jcnQuY29tb2RvY2EuY29tL0NPTU9ET1JTQURvbWFpblZhbGlkYXRpb25TZWN1cmVTZXJ2ZXJDQS5jcnQwJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmNvbW9kb2NhLmNvbTAhBgNVHREEGjAYggsqLnZpdC5hYy5pboIJdml0LmFjLmluMIIBfAYKKwYBBAHWeQIEAgSCAWwEggFoAWYAdQDuS723dc5guuFCaR+r4Z5mow9+X7By2IMAxHuJeqj9ywAAAWVVqQwjAAAEAwBGMEQCICCPWa9g3OP8g1MZMf2vTduHA3tFkxTHpqD8UP9j9sBCAiBHb9i1Sr+Va1i8FKzVhfG19zLucHmXHKYdpxuQxGHm1gB2AF6nc/nfVsDntTZIfdBJ4DJ6kZoMhKESEoQYdZaBcUVYAAABZVWpDAIAAAQDAEcwRQIhAM2XuDj23tQs9kc5I6J9a1GP3kJjsiTegVw7//f85ge2AiAnzyec+VszEFbePNu0AC5cJohI4zXdOhnmoAPdRS1oggB1AFWB1MIWkDYBSuoLm1c8U/DA5Dh4cCUIFy+jqh0HE9MMAAABZVWpDDIAAAQDAEYwRAIgM2/8uTnZdMu6hJu292vXA4UGOUqU0YEvsxdcPJ++F7MCIFP2iwy2pp1G8QeZd6xJ3QqARJYppzylmeFJ5jaquNuqMA0GCSqGSIb3DQEBCwUAA4IBAQBu5IFwOkMUYgeBFCYsmc5/RSWbP+ZZTzuKZi3e68zso0W4merZKnVL3cGV4qk6GwBsW4A2YuaTTNbYs9tNYj1t/UeJ7uCXm7Z+5h8GuQLU1u++HSZReS5NavvepJX8mPwNpAGXgfstBDDhJ+5O0XM4D7GaneIiTo/iVAoDAE+wZoKWQDRGi/Co9RhTx6xcVfmtoLEC9yb3ID52MoKIcFON3qq8YANUwfT58BEMf8lcEypeDw7MNUOnYAXicKM/RpnzK9Jd0V9HSWS25zT0zh/LQFZOgV1xSdx38YDePWXzJq02FZbUr4qZ5f72wfRM85eCfUu2rtKGw5L1ysSTwDWWwDAAAwAAAAABAQAAAAAAAARQMjU2AAAAEFJTQS1QS0NTMS1TSEE1MTIBlZ+xZWUXSH+rm9iRO+Uxl650zaXNL0c/lvXwt//2LGgAAAADZgoyJpFcT/u7IImFpjLfBb3Dl5pUIkzVhYlpa26W6oMAAAAAAAAGzDCCBsgwggWwoAMCAQICEGnJjxFjQOV5CkOevhOi3JowDQYJKoZIhvcNAQELBQAwgZAxCzAJBgNVBAYTAkdCMRswGQYDVQQIExJHcmVhdGVyIE1hbmNoZXN0ZXIxEDAOBgNVBAcTB1NhbGZvcmQxGjAYBgNVBAoTEUNPTU9ETyBDQSBMaW1pdGVkMTYwNAYDVQQDEy1DT01PRE8gUlNBIERvbWFpbiBWYWxpZGF0aW9uIFNlY3VyZSBTZXJ2ZXIgQ0EwHhcNMTgwODIwMDAwMDAwWhcNMjAwODE5MjM1OTU5WjBYMSEwHwYDVQQLExhEb21haW4gQ29udHJvbCBWYWxpZGF0ZWQxHTAbBgNVBAsTFFBvc2l0aXZlU1NMIFdpbGRjYXJkMRQwEgYDVQQDDAsqLnZpdC5hYy5pbjCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMGqGl9roamyT49TiktKI1GKawoDyAjlCo7lOjazUIa1ohs3/PUG/0Id1Ls/1LgdaU50J0oLpnRFTNXsdI0brGnWfCSCP0icJ125EfO+eD82zBpma5q9T85MlRk4twnwff3RIL1bfUhbDXWzrI0U9LtffdA7zGQYn4ZDZqrpVozT9gw1XvHvAu6sO9x4rLFP1ukfpahB7ddk8/jbYWGJMszi5Als5rIbekTZAmNyKvQnY4h3z6c+WSCYfYqnCyrAXbdBY6PPHw9IL95RMUydmO5bdc88/+Dp3kIkcYoiV1dGR7ffyVZkVFYsuBEARDbjiqA0/gw24jtckBEqWSUE9CsCAwEAAaOCA1MwggNPMB8GA1UdIwQYMBaAFJCvajqUWgvYkOoSVnPfQ7Q6KNrnMB0GA1UdDgQWBBRFK2xJozxBFHBSHo53ldunA6Zo4TAOBgNVHQ8BAf8EBAMCBaAwDAYDVR0TAQH/BAIwADAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwTwYDVR0gBEgwRjA6BgsrBgEEAbIxAQICBzArMCkGCCsGAQUFBwIBFh1odHRwczovL3NlY3VyZS5jb21vZG8uY29tL0NQUzAIBgZngQwBAgEwVAYDVR0fBE0wSzBJoEegRYZDaHR0cDovL2NybC5jb21vZG9jYS5jb20vQ09NT0RPUlNBRG9tYWluVmFsaWRhdGlvblNlY3VyZVNlcnZlckNBLmNybDCBhQYIKwYBBQUHAQEEeTB3ME8GCCsGAQUFBzAChkNodHRwOi8vY3J0LmNvbW9kb2NhLmNvbS9DT01PRE9SU0FEb21haW5WYWxpZGF0aW9uU2VjdXJlU2VydmVyQ0EuY3J0MCQGCCsGAQUFBzABhhhodHRwOi8vb2NzcC5jb21vZG9jYS5jb20wIQYDVR0RBBowGIILKi52aXQuYWMuaW6CCXZpdC5hYy5pbjCCAXwGCisGAQQB1nkCBAIEggFsBIIBaAFmAHUA7ku9t3XOYLrhQmkfq+GeZqMPfl+wctiDAMR7iXqo/csAAAFlVakMIwAABAMARjBEAiAgj1mvYNzj/INTGTH9r03bhwN7RZMUx6ag/FD/Y/bAQgIgR2/YtUq/lWtYvBSs1YXxtfcy7nB5lxymHacbkMRh5tYAdgBep3P531bA57U2SH3QSeAyepGaDIShEhKEGHWWgXFFWAAAAWVVqQwCAAAEAwBHMEUCIQDNl7g49t7ULPZHOSOifWtRj95CY7Ik3oFcO//3/OYHtgIgJ88nnPlbMxBW3jzbtAAuXCaISOM13ToZ5qAD3UUtaIIAdQBVgdTCFpA2AUrqC5tXPFPwwOQ4eHAlCBcvo6odBxPTDAAAAWVVqQwyAAAEAwBGMEQCIDNv/Lk52XTLuoSbtvdr1wOFBjlKlNGBL7MXXDyfvhezAiBT9osMtqadRvEHmXesSd0KgESWKac8pZnhSeY2qrjbqjANBgkqhkiG9w0BAQsFAAOCAQEAbuSBcDpDFGIHgRQmLJnOf0Ulmz/mWU87imYt3uvM7KNFuJnq2Sp1S93BleKpOhsAbFuANmLmk0zW2LPbTWI9bf1Hie7gl5u2fuYfBrkC1Nbvvh0mUXkuTWr73qSV/Jj8DaQBl4H7LQQw4SfuTtFzOA+xmp3iIk6P4lQKAwBPsGaClkA0RovwqPUYU8esXFX5raCxAvcm9yA+djKCiHBTjd6qvGADVMH0+fARDH/JXBMqXg8OzDVDp2AF4nCjP0aZ8yvSXdFfR0lktuc09M4fy0BWToFdcUncd/GA3j1l8yatNhWW1K+KmeX+9sH0TPOXgn1Ltq7ShsOS9crEk8A1lmYKMiaRXE/7uyCJhaYy3wW9w5eaVCJM1YWJaWtuluqDAAAAAAAABgwwggYIMIID8KADAgECAhArLm7q2XU2bBSKbtujfIwHMA0GCSqGSIb3DQEBDAUAMIGFMQswCQYDVQQGEwJHQjEbMBkGA1UECBMSR3JlYXRlciBNYW5jaGVzdGVyMRAwDgYDVQQHEwdTYWxmb3JkMRowGAYDVQQKExFDT01PRE8gQ0EgTGltaXRlZDErMCkGA1UEAxMiQ09NT0RPIFJTQSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw0xNDAyMTIwMDAwMDBaFw0yOTAyMTEyMzU5NTlaMIGQMQswCQYDVQQGEwJHQjEbMBkGA1UECBMSR3JlYXRlciBNYW5jaGVzdGVyMRAwDgYDVQQHEwdTYWxmb3JkMRowGAYDVQQKExFDT01PRE8gQ0EgTGltaXRlZDE2MDQGA1UEAxMtQ09NT0RPIFJTQSBEb21haW4gVmFsaWRhdGlvbiBTZWN1cmUgU2VydmVyIENBMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAjsICGeGgWaTrODWNLP0B0NNJwGTHC2IFRRY6qKDADAJ/HczbxKFtdwOjD4b54wacPguBiptJG60DvvpL24wg7dXOXmWOPg2vTMKwt0VeUi803kgkZLRBrgCX975n3p7QeqdTgDt8rfWWVW+XRwp8hYsil42zhOCWV9BwGGCWj+4tB5OdobrK0c176cQqmighkU1vkk8lpfJ6Nd0m3Eal0KxZNYz/TpFDUD9Zkx5sUSHuWBSr/nVQeD5MsByGE/prmLzgO5QehVLcA5MkGG7LJ1FF5nDeJUOkDeFKpe22fsjNbe4uHSdzXdxFMICq47JBC6+9RIfaueUbnX+u5YWCpQIDAQABo4IBZTCCAWEwHwYDVR0jBBgwFoAUu69+Aj36pvE8hI6t7jiY7NkyMtQwHQYDVR0OBBYEFJCvajqUWgvYkOoSVnPfQ7Q6KNrnMA4GA1UdDwEB/wQEAwIBhjASBgNVHRMBAf8ECDAGAQH/AgEAMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAbBgNVHSAEFDASMAYGBFUdIAAwCAYGZ4EMAQIBMEwGA1UdHwRFMEMwQaA/oD2GO2h0dHA6Ly9jcmwuY29tb2RvY2EuY29tL0NPTU9ET1JTQUNlcnRpZmljYXRpb25BdXRob3JpdHkuY3JsMHEGCCsGAQUFBwEBBGUwYzA7BggrBgEFBQcwAoYvaHR0cDovL2NydC5jb21vZG9jYS5jb20vQ09NT0RPUlNBQWRkVHJ1c3RDQS5jcnQwJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmNvbW9kb2NhLmNvbTANBgkqhkiG9w0BAQwFAAOCAgEATit2T5IcYjaJunfBJwX0HNZEnamaPqrVZmYBPupJ5qI1vPr23ZWOmTWYDjYYdbHd3VByfK7cd4jOD/eQIMqjZy4fVn974UTqQpXEXQ0BUEYV8oGJWWyK3YzxEqGNOkKKmPhLNHsnOwi0byQ7cp1jdFg8Gmw/T8cRmsio9bU37xBFxmzZ4F6VJrPrraO57n8MmmY1czJgTuXdimEsblIRd2iW0xh1URUAG3SI3eHHOARDKOkW/dkF1F1HJ2DW+zg7bHKilPhCGt/tbwaMRcIGAKrk6NzZteFzeOz2I9zR3WyOGo+l6lR8lrfD/lWOjUle/GS7zz69lutpzb/gSPFighDlDEZX8jPa0Mhj7cYflAWWShqR0ffrz49Srg0I2T6ooFHpwYd01cn3dKsuU/u7evuX4vgfJo+z0qDgN1soOzHlDlctWriteaxeIGYapbmmtTnB9ZhD/+75p6f97sokPYAWxBePisFgoQyuW0NHkUvVmhdf+dSHwcKMt+fiDzAZN4as4NxCA+aUqJ2u/Q8kUZTOkgjR/FDwA0B7iFntDt2s0neCNNwGlQLYkPkt6jfVGmDQZyDX2EILRa+CaN7dZiQ3kCmUGUYZJbiA18vUhihqRHAmI2Kpn4Zvv7qQcNJWd4V47+olqRfOUHKMADqq49tjNJ/4BnEB4oIg1P5vvbFmCjImkVxP+7sgiYWmMt8FvcOXmlQiTNWFiWlrbpbqgwAAAAAAAAXcMIIF2DCCA8CgAwIBAgIQTKr5yttjb+Af907YWwOGnTANBgkqhkiG9w0BAQwFADCBhTELMAkGA1UEBhMCR0IxGzAZBgNVBAgTEkdyZWF0ZXIgTWFuY2hlc3RlcjEQMA4GA1UEBxMHU2FsZm9yZDEaMBgGA1UEChMRQ09NT0RPIENBIExpbWl0ZWQxKzApBgNVBAMTIkNPTU9ETyBSU0EgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNMTAwMTE5MDAwMDAwWhcNMzgwMTE4MjM1OTU5WjCBhTELMAkGA1UEBhMCR0IxGzAZBgNVBAgTEkdyZWF0ZXIgTWFuY2hlc3RlcjEQMA4GA1UEBxMHU2FsZm9yZDEaMBgGA1UEChMRQ09NT0RPIENBIExpbWl0ZWQxKzApBgNVBAMTIkNPTU9ETyBSU0EgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQCR6FSS0gpWsawNJN3Fz0RndJkrN6N9I3AAcbxT38T6KhKPS38QVr2fcHK3YX/JSw8Xpz3jsARh7v8Rl8f0hj4K+j5c+ZPmNHrZFGvnnLOFoIJ6dq9xkNfs/Q36nGz637CC9BR++b7Epi9Pf5l/tfxnQ3K9DADWietrLNPtj5gcFKt+5eNu/Nio5JIk2kNrYrhV/erBvGy2i/MOjZrkm2xpmfh4SDBF1a3hDTxFYPwyllEnvGfDyi62a+pGx8cgoLEfZd5ICLqkTqnyg0Y3hOvozIFIQ2dOciqbXL1MGyiKXCJ7tKuY2e7gUYPDCUZObT6Z+pUX2nwzV0E8jVHtC7ZcryxjGt9XyD+86V3Em69FmeKjWiS0uqlWPc9vqv9JWL7wqP/0uK3pN/u6uPQLOvnoQ0IeidiEyxPx2bvhiWC4jChWrBQdnArncevPDt09qZahSL0896+1DSJMwBGB7FY79tOi4lu3sgQiUpWAk2nojkxl8ZEDLXB0AuqLZxUpaVICu9ffUGpVRr+goyhhf3DQw6KqLCGqR84onAZFdr+CGCe01a60y1Dma/RMhnEw6abfFobg2P9A3fvQQoh/ozM6LlweQRGBY84YcWsr7KaKtzFcOmpH4MN5WdYgGq/yapiqcrxXStJLnbsQ/LBMQeXtHT1eKJ2czL+zUdqnR+WEUwIDAQABo0IwQDAdBgNVHQ4EFgQUu69+Aj36pvE8hI6t7jiY7NkyMtQwDgYDVR0PAQH/BAQDAgEGMA8GA1UdEwEB/wQFMAMBAf8wDQYJKoZIhvcNAQEMBQADggIBAArx1UaEt65Ru2yyTUEUAJNMnMvlwFTPoCWOAvn9sKIN9SCYPBMtrFaisNZ+EZLpLrqeLppysb0ZRGxhNaKatBYSaVqM4dc+pBroLwP0rmEdEBsqpIt6xf4FpuHA1sj+nq6PK7o9mfjYcwlYRm6mnPTXJ9OV2jeDchzTc+CiR5kDOF3VSXkAKRzH7JsgHAckaVd4sjn8OoSgtZx8jb8uk2IntznaFxiuvTwJaP+EmzzV1gsD41eeFPfR60/IvYcjt7ZJQ3mFXLrrkguhxuhoqEwWsRqZCuhTLJK7oQkYdQxlqHvLI7cawiiFwxv/0Cti76R7CZGYZ4wUAc1oBmpjIXUDgIiKboHGhfKppC3n9KUkEEeDys30jXlYsQab5xoq2Z0B15R97QNKyvDb6KkBPvVWmckejkk9u+UJueBPSZI9FoJAzMxZxuY67RIuaTxslbH9qh17f4a+Hg4yRvv7E491f0yLS0Zj/gA0QHDBw7mh3aZw4gSzQbzpgJHqZJx64SIDqZxubw5lT2yHh17zbqD5daWbQOhTsiedSrnAdyGN/4fy3ryM7xfft0kL0fJuMAsaDk527RH89elWsn2/x20Kk4yl0MC2Hb46TpSi125sC8KKfPog88Tk5c0NqMuRkrF8hey1FGlmDoLnzc7ILaZRfyHBNVOFBkpdn627G190AA== request-method GET response-head HTTP/1.1 200 
Accept-Ranges: bytes
Content-Type: application/javascript
Content-Length: 75946
Cache-Control: private
Expires: Thu, 01 Jan 1970 05:30:00 IST
Date: Mon, 18 Feb 2019 06:40:06 GMT
Last-Modified: Mon, 04 Feb 2019 09:16:48 GMT
X-Frame-Options: DENY
 original-response-headers Last-Modified: Mon, 04 Feb 2019 09:16:48 GMT
Accept-Ranges: bytes
Content-Type: application/javascript
Content-Length: 75946
Date: Tue, 05 Feb 2019 06:39:41 GMT
X-Frame-Options: DENY
 uncompressed-len 0 net-response-time-onstart 892 net-response-time-onstop 1123 alt-data 1;75946,javascript/moz-bytecode-20190128165852 alt-data-from-child 1  v